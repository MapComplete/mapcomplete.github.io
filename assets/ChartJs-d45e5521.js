var ko=Object.defineProperty;var Fo=(n,e,t)=>e in n?ko(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ge=(n,e,t)=>(Fo(n,typeof e!="symbol"?e+"":e,t),t);import{a as Title$1,T as Toggle,I as InputElement,D as DropDown}from"./List-1234f6d5.js";import{I as ImmutableStore,B as BaseUIElement,T as Translations,J as Utils,U as UIEventSource,C as Combine,F as FixedUiElement,V as VariableUiElement,S as Svg,P as Store,R as Translation,M as Locale,W as Link,A as Img,X as Stores,Q as QueryParameters,L as LocalStorageSource}from"./SvelteUIElement-dd1aa8e6.js";import{G as GeoOperations,r as require$$0$3,C as Constants}from"./BBox-52fd8673.js";import{a as Loading,S as SubtleButton}from"./SubtleButton-48d180fb.js";import{g as getAugmentedNamespace,c as commonjsGlobal}from"./_commonjsHelpers-edff4021.js";import{_ as _typeof$4,d as defineProperty}from"./defineProperty-bf1f4e26.js";const la=class{static AvailableLayersAt(e){var t;return((t=la.implementation)==null?void 0:t.AvailableLayersAt(e))??new ImmutableStore([])}static SelectBestLayerAccordingTo(e,t){var o;return((o=la.implementation)==null?void 0:o.SelectBestLayerAccordingTo(e,t))??new ImmutableStore(void 0)}static implement(e){la.layerOverview=e.layerOverview,la.osmCarto=e.osmCarto,la.implementation=e}};let AvailableBaseLayers=la;ge(AvailableBaseLayers,"layerOverview"),ge(AvailableBaseLayers,"osmCarto"),ge(AvailableBaseLayers,"implementation");class Minimap{constructor(){}}ge(Minimap,"createMiniMap",e=>{throw"CreateMinimap hasn't been initialized yet. Please call MinimapImplementation.initialize()"});var earcutExports={},earcut$2={get exports(){return earcutExports},set exports(n){earcutExports=n}};earcut$2.exports=earcut$1;earcutExports.default=earcut$1;function earcut$1(n,e,t){t=t||2;var o=e&&e.length,l=o?e[0]*t:n.length,d=linkedList(n,0,l,t,!0),h=[];if(!d||d.next===d.prev)return h;var g,m,y,b,w,E,P;if(o&&(d=eliminateHoles(n,e,d,t)),n.length>80*t){g=y=n[0],m=b=n[1];for(var $=t;$<l;$+=t)w=n[$],E=n[$+1],w<g&&(g=w),E<m&&(m=E),w>y&&(y=w),E>b&&(b=E);P=Math.max(y-g,b-m),P=P!==0?32767/P:0}return earcutLinked(d,h,t,g,m,P,0),h}function linkedList(n,e,t,o,l){var d,h;if(l===signedArea(n,e,t,o)>0)for(d=e;d<t;d+=o)h=insertNode(d,n[d],n[d+1],h);else for(d=t-o;d>=e;d-=o)h=insertNode(d,n[d],n[d+1],h);return h&&equals(h,h.next)&&(removeNode(h),h=h.next),h}function filterPoints(n,e){if(!n)return n;e||(e=n);var t=n,o;do if(o=!1,!t.steiner&&(equals(t,t.next)||area$1(t.prev,t,t.next)===0)){if(removeNode(t),t=e=t.prev,t===t.next)break;o=!0}else t=t.next;while(o||t!==e);return e}function earcutLinked(n,e,t,o,l,d,h){if(n){!h&&d&&indexCurve(n,o,l,d);for(var g=n,m,y;n.prev!==n.next;){if(m=n.prev,y=n.next,d?isEarHashed(n,o,l,d):isEar(n)){e.push(m.i/t|0),e.push(n.i/t|0),e.push(y.i/t|0),removeNode(n),n=y.next,g=y.next;continue}if(n=y,n===g){h?h===1?(n=cureLocalIntersections(filterPoints(n),e,t),earcutLinked(n,e,t,o,l,d,2)):h===2&&splitEarcut(n,e,t,o,l,d):earcutLinked(filterPoints(n),e,t,o,l,d,1);break}}}}function isEar(n){var e=n.prev,t=n,o=n.next;if(area$1(e,t,o)>=0)return!1;for(var l=e.x,d=t.x,h=o.x,g=e.y,m=t.y,y=o.y,b=l<d?l<h?l:h:d<h?d:h,w=g<m?g<y?g:y:m<y?m:y,E=l>d?l>h?l:h:d>h?d:h,P=g>m?g>y?g:y:m>y?m:y,$=o.next;$!==e;){if($.x>=b&&$.x<=E&&$.y>=w&&$.y<=P&&pointInTriangle(l,g,d,m,h,y,$.x,$.y)&&area$1($.prev,$,$.next)>=0)return!1;$=$.next}return!0}function isEarHashed(n,e,t,o){var l=n.prev,d=n,h=n.next;if(area$1(l,d,h)>=0)return!1;for(var g=l.x,m=d.x,y=h.x,b=l.y,w=d.y,E=h.y,P=g<m?g<y?g:y:m<y?m:y,$=b<w?b<E?b:E:w<E?w:E,C=g>m?g>y?g:y:m>y?m:y,L=b>w?b>E?b:E:w>E?w:E,W=zOrder(P,$,e,t,o),Y=zOrder(C,L,e,t,o),D=n.prevZ,k=n.nextZ;D&&D.z>=W&&k&&k.z<=Y;){if(D.x>=P&&D.x<=C&&D.y>=$&&D.y<=L&&D!==l&&D!==h&&pointInTriangle(g,b,m,w,y,E,D.x,D.y)&&area$1(D.prev,D,D.next)>=0||(D=D.prevZ,k.x>=P&&k.x<=C&&k.y>=$&&k.y<=L&&k!==l&&k!==h&&pointInTriangle(g,b,m,w,y,E,k.x,k.y)&&area$1(k.prev,k,k.next)>=0))return!1;k=k.nextZ}for(;D&&D.z>=W;){if(D.x>=P&&D.x<=C&&D.y>=$&&D.y<=L&&D!==l&&D!==h&&pointInTriangle(g,b,m,w,y,E,D.x,D.y)&&area$1(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;k&&k.z<=Y;){if(k.x>=P&&k.x<=C&&k.y>=$&&k.y<=L&&k!==l&&k!==h&&pointInTriangle(g,b,m,w,y,E,k.x,k.y)&&area$1(k.prev,k,k.next)>=0)return!1;k=k.nextZ}return!0}function cureLocalIntersections(n,e,t){var o=n;do{var l=o.prev,d=o.next.next;!equals(l,d)&&intersects(l,o,o.next,d)&&locallyInside(l,d)&&locallyInside(d,l)&&(e.push(l.i/t|0),e.push(o.i/t|0),e.push(d.i/t|0),removeNode(o),removeNode(o.next),o=n=d),o=o.next}while(o!==n);return filterPoints(o)}function splitEarcut(n,e,t,o,l,d){var h=n;do{for(var g=h.next.next;g!==h.prev;){if(h.i!==g.i&&isValidDiagonal(h,g)){var m=splitPolygon(h,g);h=filterPoints(h,h.next),m=filterPoints(m,m.next),earcutLinked(h,e,t,o,l,d,0),earcutLinked(m,e,t,o,l,d,0);return}g=g.next}h=h.next}while(h!==n)}function eliminateHoles(n,e,t,o){var l=[],d,h,g,m,y;for(d=0,h=e.length;d<h;d++)g=e[d]*o,m=d<h-1?e[d+1]*o:n.length,y=linkedList(n,g,m,o,!1),y===y.next&&(y.steiner=!0),l.push(getLeftmost(y));for(l.sort(compareX),d=0;d<l.length;d++)t=eliminateHole(l[d],t);return t}function compareX(n,e){return n.x-e.x}function eliminateHole(n,e){var t=findHoleBridge(n,e);if(!t)return e;var o=splitPolygon(t,n);return filterPoints(o,o.next),filterPoints(t,t.next)}function findHoleBridge(n,e){var t=e,o=n.x,l=n.y,d=-1/0,h;do{if(l<=t.y&&l>=t.next.y&&t.next.y!==t.y){var g=t.x+(l-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=o&&g>d&&(d=g,h=t.x<t.next.x?t:t.next,g===o))return h}t=t.next}while(t!==e);if(!h)return null;var m=h,y=h.x,b=h.y,w=1/0,E;t=h;do o>=t.x&&t.x>=y&&o!==t.x&&pointInTriangle(l<b?o:d,l,y,b,l<b?d:o,l,t.x,t.y)&&(E=Math.abs(l-t.y)/(o-t.x),locallyInside(t,n)&&(E<w||E===w&&(t.x>h.x||t.x===h.x&&sectorContainsSector(h,t)))&&(h=t,w=E)),t=t.next;while(t!==m);return h}function sectorContainsSector(n,e){return area$1(n.prev,n,e.prev)<0&&area$1(e.next,n,n.next)<0}function indexCurve(n,e,t,o){var l=n;do l.z===0&&(l.z=zOrder(l.x,l.y,e,t,o)),l.prevZ=l.prev,l.nextZ=l.next,l=l.next;while(l!==n);l.prevZ.nextZ=null,l.prevZ=null,sortLinked(l)}function sortLinked(n){var e,t,o,l,d,h,g,m,y=1;do{for(t=n,n=null,d=null,h=0;t;){for(h++,o=t,g=0,e=0;e<y&&(g++,o=o.nextZ,!!o);e++);for(m=y;g>0||m>0&&o;)g!==0&&(m===0||!o||t.z<=o.z)?(l=t,t=t.nextZ,g--):(l=o,o=o.nextZ,m--),d?d.nextZ=l:n=l,l.prevZ=d,d=l;t=o}d.nextZ=null,y*=2}while(h>1);return n}function zOrder(n,e,t,o,l){return n=(n-t)*l|0,e=(e-o)*l|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function getLeftmost(n){var e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function pointInTriangle(n,e,t,o,l,d,h,g){return(l-h)*(e-g)>=(n-h)*(d-g)&&(n-h)*(o-g)>=(t-h)*(e-g)&&(t-h)*(d-g)>=(l-h)*(o-g)}function isValidDiagonal(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!intersectsPolygon(n,e)&&(locallyInside(n,e)&&locallyInside(e,n)&&middleInside(n,e)&&(area$1(n.prev,n,e.prev)||area$1(n,e.prev,e))||equals(n,e)&&area$1(n.prev,n,n.next)>0&&area$1(e.prev,e,e.next)>0)}function area$1(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function equals(n,e){return n.x===e.x&&n.y===e.y}function intersects(n,e,t,o){var l=sign$3(area$1(n,e,t)),d=sign$3(area$1(n,e,o)),h=sign$3(area$1(t,o,n)),g=sign$3(area$1(t,o,e));return!!(l!==d&&h!==g||l===0&&onSegment(n,t,e)||d===0&&onSegment(n,o,e)||h===0&&onSegment(t,n,o)||g===0&&onSegment(t,e,o))}function onSegment(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function sign$3(n){return n>0?1:n<0?-1:0}function intersectsPolygon(n,e){var t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&intersects(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function locallyInside(n,e){return area$1(n.prev,n,n.next)<0?area$1(n,e,n.next)>=0&&area$1(n,n.prev,e)>=0:area$1(n,e,n.prev)<0||area$1(n,n.next,e)<0}function middleInside(n,e){var t=n,o=!1,l=(n.x+e.x)/2,d=(n.y+e.y)/2;do t.y>d!=t.next.y>d&&t.next.y!==t.y&&l<(t.next.x-t.x)*(d-t.y)/(t.next.y-t.y)+t.x&&(o=!o),t=t.next;while(t!==n);return o}function splitPolygon(n,e){var t=new Node$3(n.i,n.x,n.y),o=new Node$3(e.i,e.x,e.y),l=n.next,d=e.prev;return n.next=e,e.prev=n,t.next=l,l.prev=t,o.next=t,t.prev=o,d.next=o,o.prev=d,o}function insertNode(n,e,t,o){var l=new Node$3(n,e,t);return o?(l.next=o.next,l.prev=o,o.next.prev=l,o.next=l):(l.prev=l,l.next=l),l}function removeNode(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Node$3(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut$1.deviation=function(n,e,t,o){var l=e&&e.length,d=l?e[0]*t:n.length,h=Math.abs(signedArea(n,0,d,t));if(l)for(var g=0,m=e.length;g<m;g++){var y=e[g]*t,b=g<m-1?e[g+1]*t:n.length;h-=Math.abs(signedArea(n,y,b,t))}var w=0;for(g=0;g<o.length;g+=3){var E=o[g]*t,P=o[g+1]*t,$=o[g+2]*t;w+=Math.abs((n[E]-n[$])*(n[P+1]-n[E+1])-(n[E]-n[P])*(n[$+1]-n[E+1]))}return h===0&&w===0?0:Math.abs((w-h)/h)};function signedArea(n,e,t,o){for(var l=0,d=e,h=t-o;d<t;d+=o)l+=(n[h]-n[d])*(n[d+1]+n[h+1]),h=d;return l}earcut$1.flatten=function(n){for(var e=n[0][0].length,t={vertices:[],holes:[],dimensions:e},o=0,l=0;l<n.length;l++){for(var d=0;d<n[l].length;d++)for(var h=0;h<e;h++)t.vertices.push(n[l][d][h]);l>0&&(o+=n[l-1].length,t.holes.push(o))}return t};class Table extends BaseUIElement{constructor(t,o,l){super();ge(this,"_header");ge(this,"_contents");ge(this,"_contentStyle");ge(this,"_sortable");this._contentStyle=(l==null?void 0:l.contentStyle)??[["min-width: 9rem"]],this._header=t==null?void 0:t.map(Translations.W),this._contents=o.map(d=>d.map(Translations.W)),this._sortable=(l==null?void 0:l.sortable)??!1}AsMarkdown(){const t=this._header.map(h=>(h==null?void 0:h.AsMarkdown())??" "),o=Utils.NoNull(t).join(" | "),l=t.map(h=>"-".repeat(h.length+2)).join(" | "),d=this._contents.map(h=>h.map(g=>{var m;return((m=g==null?void 0:g.AsMarkdown())==null?void 0:m.replace("|","\\|"))??" "}).join(" | ")).join(`
`);return`

`+[o,l,d,""].join(`
`)}InnerConstructElement(){const t=document.createElement("table"),o=new UIEventSource(void 0),l=this,d=Utils.NoNull((this._header??[]).map((h,g)=>(l._sortable&&h.onClick(()=>{o.data==g?o.setData(-1-g):o.setData(g)}),h.ConstructElement())));if(d.length>0){const h=document.createElement("thead"),g=document.createElement("tr");d.forEach(m=>{const y=document.createElement("th");y.appendChild(m),g.appendChild(y)}),h.appendChild(g),t.appendChild(h)}for(let h=0;h<this._contents.length;h++){let g=this._contents[h];const m=document.createElement("tr");for(let y=0;y<g.length;y++)try{let b=g[y];const w=b==null?void 0:b.ConstructElement();if(w===void 0)continue;let E;this._contentStyle!==void 0&&this._contentStyle[h]!==void 0&&this._contentStyle[y]!==void 0&&(E=this._contentStyle[h][y]);const P=document.createElement("td");P.style.cssText=E,P.appendChild(w),m.appendChild(P)}catch(b){console.error("Could not render an element in a table due to",b,g[y])}t.appendChild(m)}return o.addCallback(h=>{if(h===void 0)return;const g=h<0,m=g?-h-1:h;let y=Array.from(t.rows);y.splice(0,1),y=y.sort((b,w)=>{var $,C,L,W;const E=(C=($=b.cells[m])==null?void 0:$.textContent)==null?void 0:C.toLowerCase(),P=(W=(L=w.cells[m])==null?void 0:L.textContent)==null?void 0:W.toLowerCase();return E===P?0:E<P!==g?-1:1});for(let b=y.length;b>1;b--)t.deleteRow(b);for(const b of y)t.appendChild(b)}),t}}const da=class{static textElementSelected(){var e,t;return["input","textarea"].includes((t=(e=document==null?void 0:document.activeElement)==null?void 0:e.tagName)==null?void 0:t.toLowerCase())}static RegisterHotkey(e,t,o){const l=e.onUp?"keyup":"keypress";let d=e.ctrl??e.shift??e.alt??e.nomod;d.length==1&&(d=d.toLowerCase(),e.shift!==void 0&&(d=d.toUpperCase())),this._docs.data.push({key:e,documentation:t}),this._docs.ping(),!Utils.runningFromConsole&&(e.ctrl!==void 0?document.addEventListener("keydown",function(h){h.ctrlKey&&h.key===d&&(o(),h.preventDefault())}):e.shift!==void 0?document.addEventListener(l,function(h){da.textElementSelected()||h.shiftKey&&h.key===d&&(o(),h.preventDefault())}):e.alt!==void 0?document.addEventListener(l,function(h){h.altKey&&h.key===d&&(o(),h.preventDefault())}):e.nomod!==void 0&&document.addEventListener(l,function(h){da.textElementSelected()||h.key===d&&(o(),h.preventDefault())}))}static generateDocumentation(){const e=da._docs.data.map(({key:o,documentation:l})=>{const d=Object.keys(o).filter(g=>g!=="nomod"&&g!=="onUp"),h=o.ctrl??o.shift??o.alt??o.nomod;return d.push(h),[d.join("+"),l]}).sort(),t=Translations.t.hotkeyDocumentation;return new Combine([new Title$1(t.title,1),t.intro,new Table([t.key,t.action],e.map(([o,l])=>[new FixedUiElement(o).SetClass("code"),l]))])}static generateDocumentationDynamic(){return new VariableUiElement(da._docs.map(e=>da.generateDocumentation()))}};let Hotkeys=da;ge(Hotkeys,"_docs",new UIEventSource([]));class SingleLayerSelectionButton extends Toggle{constructor(t,o){const l=o.preferredType,d=new UIEventSource(o.preferredLayer),h=SingleLayerSelectionButton.getIconFor(l).SetClass("rounded-lg p-1 h-12 w-12 overflow-hidden subtle-background border-invisible"),g=SingleLayerSelectionButton.getIconFor(l).SetClass("rounded-lg p-1 h-12 w-12 overflow-hidden subtle-background border-attention-catch"),m=AvailableBaseLayers.SelectBestLayerAccordingTo(t,new UIEventSource(o.preferredType));let y=new Toggle(g,h,o.currentBackground.map(w=>(w==null?void 0:w.category)===o.preferredType));super(y,void 0,m.map(w=>(w==null?void 0:w.category)===o.preferredType));ge(this,"activate");function b(){if(d.data===void 0||d.data.feature===null||d.data.feature===void 0)return;const w=t.data;GeoOperations.inside([w.lon,w.lat],d.data.feature)||d.setData(void 0)}h.onClick(()=>{b(),d.setData(d.data??m.data),o.currentBackground.setData(d.data)}),o.currentBackground.addCallbackAndRunD(w=>{w.category===o.preferredType&&d.setData(w)}),m.addCallbackD(w=>{var E,P;d.data!==void 0&&((E=o.currentBackground.data)==null?void 0:E.id)===((P=d.data)==null?void 0:P.id)&&(d.data.feature===null||GeoOperations.inside([t.data.lon,t.data.lat],d.data.feature)||(w.category===o.preferredType?(o.currentBackground.setData(w),d.setData(w)):o.notAvailable!==void 0?o.notAvailable():o.currentBackground.setData(AvailableBaseLayers.osmCarto)))}),this.activate=()=>{if(b(),m.data.category!==o.preferredType){o.notAvailable!==void 0?o.notAvailable():o.currentBackground.setData(AvailableBaseLayers.osmCarto);return}d.setData(d.data??m.data),o.currentBackground.setData(d.data)}}static getIconFor(t){switch(t){case"map":return Svg.generic_map_svg();case"photo":return Svg.satellite_svg();case"osmbasedmap":return Svg.osm_logo_svg();default:return Svg.generic_map_svg()}}}class BackgroundMapSwitch extends Combine{constructor(e,t,o){const l=(o==null?void 0:o.allowedCategories)??["osmbasedmap","photo","map"],d=e.backgroundLayer.data,h=[];let g;for(const m of l){let y;(d==null?void 0:d.category)===m&&(y=d);const b=new SingleLayerSelectionButton(e.locationControl,{preferredType:m,preferredLayer:y,currentBackground:t,notAvailable:g});g=g??b.activate,m===(o==null?void 0:o.preferredCategory)&&b.activate(),o!=null&&o.enableHotkeys&&Hotkeys.RegisterHotkey({nomod:m.charAt(0).toUpperCase()},Translations.t.hotkeyDocumentation.selectBackground.Subs({category:m}),()=>{b.activate()}),h.push(b)}super(h),this.SetClass("flex")}}class TagsFilter{}const oo=class extends TagsFilter{constructor(t,o){super();ge(this,"key");ge(this,"value");if(this.key=t,this.value=o,t===void 0||t==="")throw"Invalid key: undefined or empty";if(o===void 0)throw`Invalid value while constructing a Tag with key '${t}': value is undefined`;o==="*"&&console.warn(`Got suspicious tag ${t}=*   ; did you mean ${t}~* ?`)}matchesProperties(t){const o=t[this.key];return o===void 0&&(this.value===""||this.value===void 0)?!0:o===this.value}asOverpass(){return this.value===""?['[!"'+this.key+'"]']:[`["${this.key}"="${this.value}"]`]}asHumanString(t,o,l){let d=this.value;return o&&(d=Utils.EllipsesAfter(d,25)),d===""||d===void 0&&l!==void 0?l!==void 0&&(l[this.key]??"")===""?"":"<span class='line-through'>"+this.key+"</span>":t?`<a href='https://wiki.openstreetmap.org/wiki/Key:${this.key}' target='_blank'>${this.key}</a>=<a href='https://wiki.openstreetmap.org/wiki/Tag:${this.key}%3D${this.value}' target='_blank'>${d}</a>`:this.key+"="+d}isUsableAsAnswer(){return!0}shadows(t){return t.key!==void 0&&t.key!==this.key?!1:t.matchesProperties({[this.key]:this.value})}usedKeys(){return[this.key]}usedTags(){return this.value==""?[]:[this]}asChange(t){return[{k:this.key,v:this.value}]}optimize(){return this}isNegative(){return!1}visit(t){t(this)}};let Tag=oo;ge(Tag,"newlyCreated",new oo("_newly_created","yes"));class RegexTag extends TagsFilter{constructor(t,o,l=!1){super();ge(this,"key");ge(this,"value");ge(this,"invert");ge(this,"matchesEmpty");this.key=t,this.value=o,this.invert=l,this.matchesEmpty=RegexTag.doesMatch("",this.value)}static doesMatch(t,o){if(t!==void 0){if(typeof t=="number"&&(t=""+t),typeof o=="string")return t===o;if(typeof t.match!="function")throw console.error("Error: fromTag is not a regex: ",t,o),"Error: fromTag is not a regex: "+t+o;return t.match(o)!==null}}static source(t){return typeof t=="string"?t:t.source}asOverpass(){const t=this.invert?"!":"";if(typeof this.key!="string")return[`[~"${this.key.source}"${t}~"${RegexTag.source(this.value)}"]`];if(this.value instanceof RegExp){const o=this.value.source;if(o==="^..*$"||o===".+")return[`[${t}"${this.key}"]`];const l=this.value.ignoreCase?",i":"";return[`["${this.key}"${t}~"${o}"${l}]`]}else return[`["${this.key}"${t}="${this.value}"]`]}isUsableAsAnswer(){return!1}matchesProperties(t){if(typeof this.key=="string"){const o=t[this.key]??"";return RegexTag.doesMatch(o,this.value)!=this.invert}for(const o in t)if(o!==void 0&&RegexTag.doesMatch(o,this.key)){const l=t[o]??"";return RegexTag.doesMatch(l,this.value)!=this.invert}return this.matchesEmpty?!this.invert:this.invert}asHumanString(){if(typeof this.key=="string"){const t=typeof this.value=="string"?"=":"~";return`${this.key}${this.invert?"!":""}${t}${RegexTag.source(this.value)}`}return`${this.key.source}${this.invert?"!":""}~~${RegexTag.source(this.value)}`}shadows(t){if(t instanceof RegexTag){if((t.key.source??t.key)!==(this.key.source??this.key))return!1;if((t.value.source??t.key)===(this.value.source??this.key)&&this.invert==t.invert)return!0;if(typeof t.value=="string"){const o=RegexTag.doesMatch(t.value,this.value);if(!this.invert&&!t.invert)return o;if(this.invert&&!t.invert||!this.invert&&t.invert)return!o;if(!this.invert&&!t.invert)return o}return!1}return t instanceof Tag&&RegexTag.doesMatch(t.key,this.key)?this.value.source==="^..*$"?this.invert?t.value==="":!1:this.invert?!1:(this.value.source??this.value)===t.value:!1}usedKeys(){if(typeof this.key=="string")return[this.key];throw"Key cannot be determined as it is a regex"}usedTags(){return[]}asChange(t){return this.invert?[]:typeof this.key=="string"?typeof this.value=="string"?[{k:this.key,v:this.value}]:((this.value.toString()!="/^..*$/"||this.value.toString()!=".+")&&console.warn("Regex value in tag; using wildcard:",this.key,this.value),[{k:this.key,v:void 0}]):(console.error("Cannot export regex tag to asChange; ",this.key,this.value),[])}optimize(){return this}isNegative(){return this.invert}visit(t){t(this)}}class Or extends TagsFilter{constructor(t){super();ge(this,"or");this.or=t}static construct(t){return t.length===1?t[0]:new Or(t)}matchesProperties(t){for(const o of this.or)if(o.matchesProperties(t))return!0;return!1}asOverpass(){const t=[];for(const o of this.or){const l=o.asOverpass();t.push(...l)}return t}asHumanString(t,o,l){return this.or.map(d=>d.asHumanString(t,o,l)).join("|")}isUsableAsAnswer(){return!1}shadows(t){if(t instanceof Or){for(const o of this.or){let l=!1;for(let d=0;d<t.or.length&&!l;d++){let h=t.or[d];l=o.shadows(h)}if(!l)return!1}return!0}return!1}usedKeys(){return[].concat(...this.or.map(t=>t.usedKeys()))}usedTags(){return[].concat(...this.or.map(t=>t.usedTags()))}asChange(t){const o=[];for(const l of this.or)o.push(...l.asChange(t));return o}removePhraseConsideredKnown(t,o){const l=[];for(const d of this.or){if(d instanceof Or)throw"Optimize expressions before using removePhraseConsideredKnown";if(d instanceof And){const h=d.removePhraseConsideredKnown(t,o);if(h===!1)continue;if(h===!0)return!0;l.push(h);continue}if(o&&t.shadows(d))return!0;!o&&d.shadows(t)||l.push(d)}return l.length===0?!1:Or.construct(l)}optimize(){if(this.or.length===0)return!1;const t=this.or.map(h=>h.optimize()).filter(h=>h!==!1);if(t.some(h=>h===!0))return!0;const o=t,l=[];let d=[];for(const h of o)h instanceof Or?l.push(...h.or):h instanceof And?d.push(h):l.push(h);{let h=!1;do{const g=[];e:for(let m of d){for(const y of l){const b=m.removePhraseConsideredKnown(y,!1);if(b===!1)continue e;if(b===!0)return!0;if(b instanceof And){m=b;continue}l.push(b),h=!0;continue e}g.push(m)}d=g}while(h)}if(d.length===1)l.push(d[0]);else if(d.length>1){let h=d[0].and;for(let g=1;g<d.length&&h.length>0;g++){const m=d[g];h=h.filter(y=>m.and.some(b=>b.shadows(y)))}if(h.length===0)l.push(...d);else{const g=[];for(const y of d){const b=y.and.filter(w=>!h.some(E=>E.shadows(w)));g.push(And.construct(b))}h.push(Or.construct(g));const m=new And(h).optimize();if(m===!0)return!0;m===!1||l.push(And.construct(h))}}return l.length===0?!1:TagUtils.ContainsOppositeTags(l)?!0:(TagUtils.sortFilters(l,!1),Or.construct(l))}isNegative(){return this.or.some(t=>t.isNegative())}visit(t){t(this),this.or.forEach(o=>o.visit(t))}}class And extends TagsFilter{constructor(t){super();ge(this,"and");this.and=t}static construct(t){return t.length===1?t[0]:new And(t)}static combine(t,o){const l=[];for(const d of o)l.push(t+d);return l}normalize(){const t=[];for(const o of this.and)o instanceof And?t.push(...o.and):t.push(o);return new And(t)}matchesProperties(t){for(const o of this.and)if(!o.matchesProperties(t))return!1;return!0}asOverpass(){let t=null;for(const o of this.and){const l=o.asOverpass();if(t===null){t=l;continue}const d=[];for(const h of t)d.push(...And.combine(h,l));t=d}return t}asHumanString(t,o,l){return this.and.map(d=>d.asHumanString(t,o,l)).filter(d=>d!=="").join("&")}isUsableAsAnswer(){for(const t of this.and)if(!t.isUsableAsAnswer())return!1;return!0}shadows(t){if(!(t instanceof And))return!1;for(const o of this.and){let l=!1;for(const d of t.and)if(l=o.shadows(d),l)break;if(!l)return!1}for(const o of t.and){let l=!1;for(const d of this.and)if(l=d.shadows(o),l)break;if(!l)return!1}return!0}usedKeys(){return[].concat(...this.and.map(t=>t.usedKeys()))}usedTags(){return[].concat(...this.and.map(t=>t.usedTags()))}asChange(t){const o=[];for(const l of this.and)o.push(...l.asChange(t));return o}removePhraseConsideredKnown(t,o){const l=[];for(const d of this.and){if(d instanceof And)throw"Optimize expressions before using removePhraseConsideredKnown";if(d instanceof Or){const h=d.removePhraseConsideredKnown(t,o);if(h===!0)continue;if(h===!1)return!1;l.push(h);continue}if(!(o&&t.shadows(d))){if(!o&&d.shadows(t))return!1;l.push(d)}}return l.length===0?!0:And.construct(l)}optimize(){if(this.and.length===0)return!0;const t=this.and.map(h=>h.optimize()).filter(h=>h!==!0);if(t.some(h=>h===!1))return!1;const o=t;{const h={};for(const g of o)g instanceof Tag&&(h[g.key]=g.value);for(const g of o){if(g instanceof Tag){const m=g.key,y=h[m];if(y===void 0)continue;if(y!==g.value)return!1}if(g instanceof RegexTag){const m=g.key;if(typeof m!="string")continue;const y=h[m];if(y===void 0)continue;if(y!==g.value)return!1}}}const l=[];let d=[];for(const h of o)h instanceof And?l.push(...h.and):h instanceof Or?d.push(h):l.push(h);{let h=!1;do{const g=[];e:for(let m of d){for(const y of l){const b=m.removePhraseConsideredKnown(y,!0);if(b===!0)continue e;if(b===!1)return!1;if(b instanceof Or){m=b;continue}l.push(b),h=!0;continue e}g.push(m)}d=g}while(h)}if(d=d.filter(h=>!TagUtils.containsEquivalents(l,h.or)),d.length===1)l.push(d[0]);else if(d.length>1){let h=d[0].or;for(let g=1;g<d.length&&h.length>0;g++){const m=d[g];h=h.filter(y=>m.or.some(b=>b.shadows(y)))}if(h.length===0)l.push(...d);else{const g=[];for(const y of d){const b=y.or.filter(w=>!h.some(E=>E.shadows(w)));g.push(Or.construct(b))}h.push(And.construct(g));const m=new Or(h).optimize();if(m===!1)return!1;m===!0||l.push(m)}}return l.length===0?!0:TagUtils.ContainsOppositeTags(l)?!1:(TagUtils.sortFilters(l,!0),And.construct(l))}isNegative(){return!this.and.some(t=>!t.isNegative())}visit(t){t(this),this.and.forEach(o=>o.visit(t))}}class ComparingTag{constructor(e,t,o=""){ge(this,"_key");ge(this,"_predicate");ge(this,"_representation");this._key=e,this._predicate=t,this._representation=o}asChange(e){throw"A comparable tag can not be used to be uploaded to OSM"}asHumanString(e,t,o){return this._key+this._representation}asOverpass(){throw"A comparable tag can not be used as overpass filter"}shadows(e){return e===this}isUsableAsAnswer(){return!1}matchesProperties(e){return this._predicate(e[this._key])}usedKeys(){return[this._key]}usedTags(){return[]}optimize(){return this}isNegative(){return!0}visit(e){e(this)}}class SubstitutingTag{constructor(e,t,o=!1){ge(this,"_key");ge(this,"_value");ge(this,"_invert");this._key=e,this._value=t,this._invert=o}static substituteString(e,t){for(const o in t)e=e.replace(new RegExp("\\{"+o+"\\}","g"),t[o]);return e.replace(/{.*}/g,"")}asTag(e){if(this._invert)throw"Cannot convert an inverted substituting tag";return new Tag(this._key,Utils.SubstituteKeys(this._value,e))}asHumanString(e,t,o){return this._key+(this._invert?"!":"")+"="+SubstitutingTag.substituteString(this._value,o)}asOverpass(){throw"A variable with substitution can not be used to query overpass"}shadows(e){return e instanceof SubstitutingTag?e._key===this._key&&e._value===this._value&&e._invert===this._invert:!1}isUsableAsAnswer(){return!this._invert}matchesProperties(e){const t=e[this._key];if(t===void 0||t==="")return!1;const o=SubstitutingTag.substituteString(this._value,e);return t===o!==this._invert}usedKeys(){return[this._key]}usedTags(){return[]}asChange(e){if(this._invert)throw"An inverted substituting tag can not be used to create a change";const t=SubstitutingTag.substituteString(this._value,e);if(t.match(/{.*}/)!==null)throw"Could not calculate all the substitutions: still have "+t;return[{k:this._key,v:t}]}optimize(){return this}isNegative(){return!1}visit(e){e(this)}}const keys={"addr:street":117211930,"addr:housenumber":125040768,emergency:1939478,barrier:18424246,tourism:2683525,amenity:20541353,bench:894256,rental:8838,bicycle_rental:7447,vending:206755,"service:bicycle:rental":3570,pub:316,theme:426,"service:bicycle:.*":0,"service:bicycle:cleaning":807,shop:5062252,"service:bicycle:retail":9162,network:2181336,sport:2194801,"service:bicycle:repair":11381,association:369,ngo:42,leisure:7368076,club:38429,"disused:amenity":40880,"planned:amenity":205,tileId:0,"construction:amenity":1206,cycleway:906487,highway:218189453,bicycle:6218071,cyclestreet:8185,"camera:direction":40676,direction:1896015,access:16030036,entrance:2954076,"name:etymology":24485,memorial:132172,indoor:353116,"name:etymology:wikidata":285224,landuse:35524214,name:88330405,protect_class:73801,information:831513,man_made:5116088,boundary:2142378,"tower:type":451658,playground:109175,route:939184,"surveillance:type":116760,natural:52353504,building:500469053},tags$1={emergency:{defibrillator:51273,ambulance_station:11047,fire_extinguisher:7355,fire_hydrant:1598739},barrier:{cycle_barrier:104166,bollard:502220,wall:3535056},tourism:{artwork:187470,map:51,viewpoint:191765},amenity:{bench:1736979,bicycle_library:36,bicycle_rental:49082,vending_machine:201871,bar:199662,pub:174979,cafe:467521,restaurant:1211671,bicycle_wash:44,bike_wash:0,bicycle_repair_station:9247,bicycle_parking:435959,binoculars:479,biergarten:10309,charging_station:65402,drinking_water:250463,fast_food:460079,fire_station:122200,parking:4255206,public_bookcase:13120,toilets:350648,recycling:333925,waste_basket:550357,waste_disposal:156765},bench:{stand_up_bench:87,yes:524993},"service:bicycle:rental":{yes:3054},pub:{cycling:9,bicycle:0},theme:{cycling:8,bicycle:16},"service:bicycle:cleaning":{yes:607,diy:0},shop:{bicycle:46488,sports:37024},sport:{cycling:6045,bicycle:96},association:{cycling:5,bicycle:20},ngo:{cycling:0,bicycle:0},leisure:{bird_hide:5669,nature_reserve:117016,picnic_table:206322,pitch:1990293,playground:705102},club:{cycling:3,bicycle:49},"disused:amenity":{charging_station:164},"planned:amenity":{charging_station:115},"construction:amenity":{charging_station:221},cycleway:{lane:314576,track:86541,shared_lane:60824},highway:{residential:61321708,crossing:6119521,cycleway:1423789,traffic_signals:1512639,tertiary:7051727,unclassified:15756878,secondary:4486617,primary:3110552,footway:16496620,path:11438303,steps:1327396,corridor:27051,pedestrian:685989,bridleway:102280,track:22670967,living_street:1519108,street_lamp:2811705},bicycle:{designated:1110839},cyclestreet:{yes:8164},access:{public:6222,yes:1363526},memorial:{ghost_bike:503},indoor:{door:9722},landuse:{grass:4898559,village_green:104681},name:{"Park Oude God":1},information:{board:242007,map:85912,office:24139,visitor_centre:285},man_made:{surveillance:148172,watermill:9699},boundary:{protected_area:97075},"tower:type":{observation:19654},playground:{forest:56},"surveillance:type":{camera:112963,ALPR:2522,ANPR:3},natural:{tree:18245059}},key_counts={keys,tags:tags$1},gr=class{static KVtoProperties(e){const t={};for(const o of e)t[o.key]=o.value;return t}static changeAsProperties(e){const t={};for(const o of e)t[o.k]=o.v;return t}static AllKeysAreContained(e,t){for(const o in t){const l=e[o];if(l===void 0)return!1;const d=t[o];for(const h of d)if(l.indexOf(h)<0)return!1}return!0}static SplitKeys(e){return this.SplitKeysRegex(e,!1)}static SplitKeysRegex(e,t){const o={};for(e=[...e];e.length>0;){const l=e.shift();if(l!==void 0){if(l instanceof And){e.push(...l.and);continue}if(l instanceof Tag){o[l.key]===void 0&&(o[l.key]=[]),o[l.key].push(...l.value.split(";").map(d=>d.trim()));continue}if(t&&l instanceof RegexTag){const d=l.key;if(typeof d!="string")throw console.error("Invalid type to flatten the multiAnswer: key is a regex too",l),"Invalid type to FlattenMultiAnswer";const h=d;o[h]===void 0&&(o[h]=[]),o[h].push(l);continue}throw console.error("Invalid type to flatten the multiAnswer",l),"Invalid type to FlattenMultiAnswer"}}return o}static FlattenAnd(e,t){const o=[];return e.visit(l=>{l instanceof Tag&&o.push(l),l instanceof SubstitutingTag&&o.push(l.asTag(t))}),o}static FlattenMultiAnswer(e){if(e===void 0)return new And([]);let t=gr.SplitKeys(e);const o=[];for(const l in t){const d=Utils.Dedup(t[l]).filter(h=>h!=="");d.sort(),o.push(new Tag(l,d.join(";")))}return new And(o)}static MatchesMultiAnswer(e,t){const o=gr.SplitKeysRegex([e],!0);for(const l in o){const d=o[l];if(t[l]===void 0)return!1;const h=t[l].split(";").map(g=>g.trim());for(const g of d){if(g instanceof RegexTag){if(!g.matchesProperties(t))return!1;continue}if(h.indexOf(g)<0)return!1}}return!0}static SimpleTag(e,t){const o=Utils.SplitFirst(e,"=");if(o.length!==2)throw`Invalid tag: no (or too much) '=' found (in ${t??"unkown context"})`;return new Tag(o[0],o[1])}static isValidKey(e){return e.match(/^[a-z][a-z0-9:_]{2,253}[a-z0-9]$/)!==null}static Tag(e,t=""){try{return this.ParseTagUnsafe(e,t)}catch(o){throw console.error("Could not parse tag",e,"in context",t,"due to ",o),o}}static ParseUploadableTag(e,t=""){const o=this.Tag(e,t);return o.visit(l=>{if(!(l instanceof And)&&!(l instanceof Tag)&&!(l instanceof SubstitutingTag))throw`Error at ${t}: detected a non-uploadable tag at a location where this is not supported: ${l.asHumanString(!1,!1,{})}`}),o}static TagD(e,t=""){if(e!==void 0)return gr.Tag(e,t)}static sortFilters(e,t){e.sort((o,l)=>gr.order(o,l,t))}static toString(e,t=!0){let o;return e instanceof Or?o=gr.joinL(e.or,"|",t):e instanceof And?o=gr.joinL(e.and,"&",t):o=e.asHumanString(!1,!1,{}),t&&(o=o.trim()),o}static parseRegexOperator(e){const t=e.match(/^([_|a-zA-Z0-9: -]+)(!)?~([i]~)?(.*)$/);if(t==null)return null;const[o,l,d,h,g]=t;return{key:l,value:g,invert:d=="!",modifier:h=="i~"?"i":""}}static ContainsOppositeTags(e){for(let t=0;t<e.length;t++){const o=e[t];if(o instanceof Tag||o instanceof RegexTag)for(let l=t+1;l<e.length;l++){const d=e[l];if((d instanceof Tag||d instanceof RegexTag)&&d.key===o.key&&(d.value.source??d.value)===(o.value.source??o.value)&&(d.invert??!1)!==(o.invert??!1))return!0}}return!1}static removeShadowedElementsFrom(e,t){return t.filter(o=>!e.some(l=>l.shadows(o)))}static removeEquivalents(e){const t=[];e:for(let o=0;o<e.length;o++){const l=e[o];for(let d=0;d<e.length;d++){if(o===d)continue;if(e[d].shadows(l))continue e}t.push(l)}return t}static containsEquivalents(e,t){return t.some(o=>e.some(l=>l.shadows(o)))}static LevelsParser(e){let t=Utils.NoNull([e]);return t=[].concat(...t.map(o=>o==null?void 0:o.split(";"))),t=[].concat(...t.map(o=>{if(o=o.trim(),o.indexOf("-")<0||o.startsWith("-"))return o;const[l,d]=o.split("-").map(g=>Number(g.trim()));if(isNaN(l)||isNaN(d))return;const h=[];for(let g=l;g<=d;g++)h.push(g+"");return h})),Utils.NoNull(t)}static ParseTagUnsafe(e,t=""){if(e===void 0)throw new Error(`Error while parsing a tag: 'json' is undefined in ${t}. Make sure all the tags are defined and at least one tag is present in a complex expression`);if(typeof e!="string"){if(e.and!==void 0&&e.or!==void 0)throw"Error while parsing a TagConfig: got an object where both 'and' and 'or' are defined";if(e.and!==void 0)return new And(e.and.map(d=>gr.Tag(d,t)));if(e.or!==void 0)return new Or(e.or.map(d=>gr.Tag(d,t)));throw`At ${t}: unrecognized tag: ${JSON.stringify(e)}`}const o=e;for(const[d,h]of gr.comparators)if(o.indexOf(d)>=0){const g=Utils.SplitFirst(o,d);let m=Number(g[1].trim());isNaN(m)&&(m=new Date(g[1].trim()).getTime());const y=b=>{if(b===void 0)return!1;let w;return typeof b=="number"?w=b:typeof w=="string"?w=Number(b==null?void 0:b.trim()):w=Number(b),isNaN(w)&&typeof b=="string"&&(w=Utils.ParseDate(b).getTime(),isNaN(w))?!1:h(w,m)};return new ComparingTag(g[0],y,d+m)}if(o.indexOf("~~")>=0){const d=Utils.SplitFirst(o,"~~");let h;d[0]==="*"?h=new RegExp(".+","i"):h=new RegExp("^("+d[0]+")$");let g;return d[1]==="*"?g=new RegExp(".+","si"):g=new RegExp("^("+d[1]+")$","s"),new RegexTag(h,g)}const l=gr.parseRegexOperator(o);if(l!=null){if(l.value==="*"&&l.invert)throw`Don't use 'key!~*' - use 'key=' instead (empty string as value (in the tag ${o} while parsing ${t})`;if(l.value==="")throw"Detected a regextag with an empty regex; this is not allowed. Use '"+l.key+"='instead (at "+t+")";let d=l.value;return d==="*"?new RegexTag(l.key,new RegExp(".+","si"+l.modifier),l.invert):new RegexTag(l.key,new RegExp("^("+d+")$","s"+l.modifier),l.invert)}if(o.indexOf("!:=")>=0){const d=Utils.SplitFirst(o,"!:=");return new SubstitutingTag(d[0],d[1],!0)}if(o.indexOf(":=")>=0){const d=Utils.SplitFirst(o,":=");return new SubstitutingTag(d[0],d[1])}if(o.indexOf("!=")>=0){const d=Utils.SplitFirst(o,"!=");if(d[1]==="*")throw"At "+t+": invalid tag "+o+". To indicate a missing tag, use '"+d[0]+"!=' instead";return d[1]===""?new RegexTag(d[0],/.+/is):new RegexTag(d[0],d[1],!0)}if(o.indexOf("=")>=0){const d=Utils.SplitFirst(o,"=");if(d[1]=="*")throw`Error while parsing tag '${o}' in ${t}: detected a wildcard on a normal value. Use a regex pattern instead`;return new Tag(d[0],d[1])}throw`Error while parsing tag '${o}' in ${t}: no key part and value part were found`}static GetCount(e,t){if(e===void 0)return;const o=gr.keyCounts.tags[e];return o!==void 0&&o[t]!==void 0?o[t]:gr.keyCounts.keys[e]}static order(e,t,o){const l=e instanceof RegexTag,d=t instanceof RegexTag;if(l!==d)return l?1:-1;if(e.key!==void 0&&t.key!==void 0){if(o){const h=gr.GetCount(e.key,e.value),g=gr.GetCount(t.key,t.value);if(h!==void 0&&g!==void 0)return h-g}return e.key===t.key?0:e.key<t.key?-1:1}return 0}static joinL(e,t,o){const l=e.map(d=>gr.toString(d,!1)).join(t);return o?l:" ("+l+") "}};let TagUtils=gr;ge(TagUtils,"keyCounts",key_counts),ge(TagUtils,"comparators",[["<=",(e,t)=>e<=t],[">=",(e,t)=>e>=t],["<",(e,t)=>e<t],[">",(e,t)=>e>t]]);var tester=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/,validate=function(n){if(!n||n.length>254)return!1;var e=tester.test(n);if(!e)return!1;var t=n.split("@");if(t[0].length>64)return!1;var o=t[1].split(".");return!o.some(function(l){return l.length>63})};const metadata={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([457]\\d{6})$","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2457]\\d{6})$","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"1|([267]\\d{6})$","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"0|(183[12])",0,0,0,[["(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|3(?:[0-3589]\\d|4[0-578]|6[1-9]|7[0-35-9])|7(?:[013-57-9]\\d|2[0-8]))\\d{3}|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4]))|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:83[0-389]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[016-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:28|4[14]|5)|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|22"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[047]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","[24-689]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]]]],BL:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","(?:[2-467]\\d\\d|8001)\\d{5}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[23]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([3-8]\\d{6})$","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-79]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|3[178]|50|68|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-7]|33|44|66|77|88)|622)[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"0|([59]\\d{7})$","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:83[0-389]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[016-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","[189]\\d{8}|[1-68]\\d{6}",[7,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","10(?:10|9[56])|2[0-57-9](?:100|9[56])"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"0|(1(?:[12]\\d|79)\\d\\d)",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:60\\d\\d|9101)\\d{6}|(?:1\\d|3)\\d{9}",[10,11],[["(\\d{3})(\\d{7})","$1 $2",["6"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0(4(?:[14]4|56)|[579])?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","[27]\\d{6,7}|[34]\\d{5,7}|(?:5|8\\d\\d)\\d{7}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["5"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"0|([59]\\d{7})$","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:83[0-389]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[016-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[0568]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[189]"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d)(\\d{4,9})","$1 $2",["[2568][1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["[12]00|[368]|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[1245]|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0235])|4(?:[0-5]\\d\\d|69[7-9]|70[0-579])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d\\d|1(?:[0-7]\\d\\d|8(?:[02]\\d|1[0-246-9])))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","(?:[56]94|80\\d|976)\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"0|([25-9]\\d{5})$","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d\\d|606)\\d{5}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1289]|5[3-579]|6[0-389]|7[08]|8[0-689]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"1|([3-9]\\d{6})$","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","9008\\d{3}|(?:[2-467]\\d\\d|862)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-46-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-5]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","(?:[2-489]\\d|55)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","(?:(?:00[1-9]|8\\d)\\d{4}|[1-36])\\d{6}|00\\d{10}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"0|([25-8]\\d{5})$","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}"],["3[1-9]\\d{8}|3[2-9]\\d{7}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],0,0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"0|([0-24-8]\\d{5})$","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97[7-9]))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51|63)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9]|636)|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9]|636[457-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[27-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(?:2|3[045]|4[0-369]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|49|51|6(?:[0-24]|36|5[0-3589]|72|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:49|55|83)[29]|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|7[015-9]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17|3[015-9]))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9(?:[019]|4[1-3]|6(?:[0-47-9]|5[01346-9])))|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|829(?:2|66)|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|(?:[235-8]\\d|99)\\d{7}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[013-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"1|([2-8]\\d{6})$","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"0|(1001)"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:[25]\\d|33|77|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[4-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(8-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(8-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(8-$1)",1]],"8",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{5})(\\d{4})","$1-$2",["5(?:29|38)","5(?:29[1289]|389)","529(?:1[1-46-9]|2[013-8]|90)|5(?:298|389)[0-46-9]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|9)|892","5(?:2(?:[2-49]|8[235-9])|3[5-9]|9)|892"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5293[01]\\d{4}|5(?:2(?:[0-25-7]\\d|3[1-578]|4[02-46-8]|8[0235-7]|9[0-289])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[0189]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[017]\\d|2[0-2]|6[0-8]|8[0-3]))\\d{6}"],["80\\d{7}"],["89\\d{7}"],0,0,0,0,["592(?:4[0-2]|93)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|30|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"0|([24-9]\\d{6})$","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","670$1",0,"670"],MQ:["596","00","(?:69|80)\\d{7}|(?:59|97)6\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"1|([34]\\d{6})$","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[3467]|9[1-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","1(?:(?:[27]2|44|99)[1-9]|65[0-689])\\d{7}|(?:1(?:[01]\\d|2[13-9]|[35][1-9]|4[0-35-9]|6[0-46-9]|7[013-9]|8[1-79]|9[1-8])|[2-9]\\d)\\d{8}",[10,11],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],0,1],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],0,1],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],0,1]],"01",0,"0(?:[12]|4[45])|1",0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[04]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","(?:[124-7]|9\\d{3})\\d{6}|[1-9]\\d{7}|[78]\\d{9,13}",[7,8,10,11,12,13,14],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-7]|8[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[489]|59"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-7]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[47]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[29]\\d{7,9}|50\\d{5}(?:\\d{2,3})?|6[0-35-9]\\d{6}|7\\d{7,8}|8\\d{4,9}|(?:11\\d|[34])\\d{7}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-579]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|[89]0","50(?:[0367]|88)|[89]0"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[59]|80"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7|86"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","(?:[45]|80\\d\\d)\\d{5}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-6])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[16]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","00","976\\d{6}|(?:26|[68]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,"26[23]|69|[89]"],RO:["40","00","(?:[2378]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[237-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","(?:[1-6]|[7-9]\\d\\d)\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","800\\d{4}|(?:[249]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-6]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|[57]9)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3478]|64|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6(?:0[5-7]|[1-35-9])|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|[89]00\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|(5\\d{6})$","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"1|([2-479]\\d{6})$","649$1",0,"649"],TD:["235","00|16","(?:22|[69]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","(?:00|[1-57-9]\\d)\\d{7}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[34]7|91[78]"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","[1-6]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|616)","5(?:[0-59]|6161)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-46-8]\\d{6})$","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["505(?:[2-57-9]\\d\\d|6(?:[0-35-9]\\d|4[46]))\\d{4}|(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[01356]|3[0-24679]|4[167]|5[0-2]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}"]]],UY:["598","0(?:0|1[3-9]\\d)","(?:0004|4)\\d{9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[7,8,10,13],[["(\\d{3})(\\d{4})","$1 $2",["405|8|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["4"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","810","(?:33|[5-79]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[35-9]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-578]\\d{6})$","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[69]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3578]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","[23]\\d{7,8}|(?:4\\d\\d|[89]00)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23]"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","80\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,"269|63"],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|63|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"[0-36-9]\\d{8}",[9],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-36-9]"]]],0,0,0,0,0,0,[0,["[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,0,0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[013-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};function withMetadataArgument(n,e){var t=Array.prototype.slice.call(e);return t.push(metadata),n.apply(this,t)}function _typeof$3(n){return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$3(n)}function _defineProperties$2(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function _createClass$2(n,e,t){return e&&_defineProperties$2(n.prototype,e),t&&_defineProperties$2(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function _classCallCheck$2(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&_setPrototypeOf(n,e)}function _createSuper(n){var e=_isNativeReflectConstruct();return function(){var o=_getPrototypeOf(n),l;if(e){var d=_getPrototypeOf(this).constructor;l=Reflect.construct(o,arguments,d)}else l=o.apply(this,arguments);return _possibleConstructorReturn(this,l)}}function _possibleConstructorReturn(n,e){if(e&&(_typeof$3(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(n)}function _assertThisInitialized(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _wrapNativeSuper(n){var e=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(o){if(o===null||!_isNativeFunction(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(o))return e.get(o);e.set(o,l)}function l(){return _construct(o,arguments,_getPrototypeOf(this).constructor)}return l.prototype=Object.create(o.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(l,o)},_wrapNativeSuper(n)}function _construct(n,e,t){return _isNativeReflectConstruct()?_construct=Reflect.construct:_construct=function(l,d,h){var g=[null];g.push.apply(g,d);var m=Function.bind.apply(l,g),y=new m;return h&&_setPrototypeOf(y,h.prototype),y},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _isNativeFunction(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function _setPrototypeOf(n,e){return _setPrototypeOf=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},_setPrototypeOf(n,e)}function _getPrototypeOf(n){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(n)}var ParseError=function(n){_inherits(t,n);var e=_createSuper(t);function t(o){var l;return _classCallCheck$2(this,t),l=e.call(this,o),Object.setPrototypeOf(_assertThisInitialized(l),t.prototype),l.name=l.constructor.name,l}return _createClass$2(t)}(_wrapNativeSuper(Error)),MIN_LENGTH_FOR_NSN=2,MAX_LENGTH_FOR_NSN=17,MAX_LENGTH_COUNTRY_CODE=3,VALID_DIGITS="0-9---",DASHES="--",SLASHES="/",DOTS=".",WHITESPACE=" ",BRACKETS="()\\[\\]",TILDES="~",VALID_PUNCTUATION="".concat(DASHES).concat(SLASHES).concat(DOTS).concat(WHITESPACE).concat(BRACKETS).concat(TILDES),PLUS_CHARS="+";function compare(n,e){n=n.split("-"),e=e.split("-");for(var t=n[0].split("."),o=e[0].split("."),l=0;l<3;l++){var d=Number(t[l]),h=Number(o[l]);if(d>h)return 1;if(h>d)return-1;if(!isNaN(d)&&isNaN(h))return 1;if(isNaN(d)&&!isNaN(h))return-1}return n[1]&&e[1]?n[1]>e[1]?1:n[1]<e[1]?-1:0:!n[1]&&e[1]?1:n[1]&&!e[1]?-1:0}function _typeof$2(n){return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(n)}function _classCallCheck$1(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function _createClass$1(n,e,t){return e&&_defineProperties$1(n.prototype,e),t&&_defineProperties$1(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var V3="1.2.0",V4="1.7.35",DEFAULT_EXT_PREFIX=" ext. ",CALLING_CODE_REG_EXP=/^\d+$/,Metadata=function(){function n(e){_classCallCheck$1(this,n),validateMetadata(e),this.metadata=e,setVersion.call(this,e)}return _createClass$1(n,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(t){return t!=="001"})}},{key:"getCountryMetadata",value:function(t){return this.metadata.countries[t]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(t){return this.getCountryMetadata(t)!==void 0}},{key:"hasCallingCode",value:function(t){if(this.getCountryCodesForCallingCode(t))return!0;if(this.nonGeographic()){if(this.nonGeographic()[t])return!0}else{var o=this.countryCallingCodes()[t];if(o&&o.length===1&&o[0]==="001")return!0}}},{key:"isNonGeographicCallingCode",value:function(t){return this.nonGeographic()?!!this.nonGeographic()[t]:!this.getCountryCodesForCallingCode(t)}},{key:"country",value:function(t){return this.selectNumberingPlan(t)}},{key:"selectNumberingPlan",value:function(t,o){if(t&&CALLING_CODE_REG_EXP.test(t)&&(o=t,t=null),t&&t!=="001"){if(!this.hasCountry(t))throw new Error("Unknown country: ".concat(t));this.numberingPlan=new NumberingPlan(this.getCountryMetadata(t),this)}else if(o){if(!this.hasCallingCode(o))throw new Error("Unknown calling code: ".concat(o));this.numberingPlan=new NumberingPlan(this.getNumberingPlanMetadata(o),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(t){var o=this.countryCallingCodes()[t];if(o)return o.length===1&&o[0].length===3?void 0:o}},{key:"getCountryCodeForCallingCode",value:function(t){var o=this.getCountryCodesForCallingCode(t);if(o)return o[0]}},{key:"getNumberingPlanMetadata",value:function(t){var o=this.getCountryCodeForCallingCode(t);if(o)return this.getCountryMetadata(o);if(this.nonGeographic()){var l=this.nonGeographic()[t];if(l)return l}else{var d=this.countryCallingCodes()[t];if(d&&d.length===1&&d[0]==="001")return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(t){return this.numberingPlan.type(t)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(t){return this.selectNumberingPlan(t)}},{key:"hasSelectedNumberingPlan",value:function(){return this.numberingPlan!==void 0}}]),n}(),NumberingPlan=function(){function n(e,t){_classCallCheck$1(this,n),this.globalMetadataObject=t,this.metadata=e,setVersion.call(this,t.metadata)}return _createClass$1(n,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(t){return t[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var t=this,o=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return o.map(function(l){return new Format(l,t)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(t){return t[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return this.types()&&this.types().length===0?!1:!!this.types()}},{key:"type",value:function(t){if(this.hasTypes()&&getType(this.types(),t))return new Type(getType(this.types(),t),this)}},{key:"ext",value:function(){return this.v1||this.v2?DEFAULT_EXT_PREFIX:this.metadata[13]||DEFAULT_EXT_PREFIX}}]),n}(),Format=function(){function n(e,t){_classCallCheck$1(this,n),this._format=e,this.metadata=t}return _createClass$1(n,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!!(this.nationalPrefixFormattingRule()&&!FIRST_GROUP_ONLY_PREFIX_PATTERN.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),n}(),FIRST_GROUP_ONLY_PREFIX_PATTERN=/^\(?\$1\)?$/,Type=function(){function n(e,t){_classCallCheck$1(this,n),this.type=e,this.metadata=t}return _createClass$1(n,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),n}();function getType(n,e){switch(e){case"FIXED_LINE":return n[0];case"MOBILE":return n[1];case"TOLL_FREE":return n[2];case"PREMIUM_RATE":return n[3];case"PERSONAL_NUMBER":return n[4];case"VOICEMAIL":return n[5];case"UAN":return n[6];case"PAGER":return n[7];case"VOIP":return n[8];case"SHARED_COST":return n[9]}}function validateMetadata(n){if(!n)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!is_object(n)||!is_object(n.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(is_object(n)?"an object of shape: { "+Object.keys(n).join(", ")+" }":"a "+type_of(n)+": "+n,"."))}var is_object=function(e){return _typeof$2(e)==="object"},type_of=function(e){return _typeof$2(e)};function getCountryCallingCode(n,e){if(e=new Metadata(e),e.hasCountry(n))return e.country(n).countryCallingCode();throw new Error("Unknown country: ".concat(n))}function isSupportedCountry(n,e){return e.countries[n]!==void 0}function setVersion(n){var e=n.version;typeof e=="number"?(this.v1=e===1,this.v2=e===2,this.v3=e===3,this.v4=e===4):e?compare(e,V3)===-1?this.v2=!0:compare(e,V4)===-1?this.v3=!0:this.v4=!0:this.v1=!0}var RFC3966_EXTN_PREFIX=";ext=",getExtensionDigitsPattern=function(e){return"([".concat(VALID_DIGITS,"]{1,").concat(e,"})")};function createExtensionPattern(n){var e="20",t="15",o="9",l="6",d="[ \\t,]*",h="[:\\.]?[ \\t,-]*",g="#?",m="(?:e?xt(?:ensi(?:o?|))?n?|??||anexo)",y="(?:[x#~]|int|)",b="[- ]+",w="[ \\t]*",E="(?:,{2}|;)",P=RFC3966_EXTN_PREFIX+getExtensionDigitsPattern(e),$=d+m+h+getExtensionDigitsPattern(e)+g,C=d+y+h+getExtensionDigitsPattern(o)+g,L=b+getExtensionDigitsPattern(l)+"#",W=w+E+h+getExtensionDigitsPattern(t)+g,Y=w+"(?:,)+"+h+getExtensionDigitsPattern(o)+g;return P+"|"+$+"|"+C+"|"+L+"|"+W+"|"+Y}var MIN_LENGTH_PHONE_NUMBER_PATTERN="["+VALID_DIGITS+"]{"+MIN_LENGTH_FOR_NSN+"}",VALID_PHONE_NUMBER="["+PLUS_CHARS+"]{0,1}(?:["+VALID_PUNCTUATION+"]*["+VALID_DIGITS+"]){3,}["+VALID_PUNCTUATION+VALID_DIGITS+"]*",VALID_PHONE_NUMBER_START_REG_EXP=new RegExp("^["+PLUS_CHARS+"]{0,1}(?:["+VALID_PUNCTUATION+"]*["+VALID_DIGITS+"]){1,2}$","i"),VALID_PHONE_NUMBER_WITH_EXTENSION=VALID_PHONE_NUMBER+"(?:"+createExtensionPattern()+")?",VALID_PHONE_NUMBER_PATTERN=new RegExp("^"+MIN_LENGTH_PHONE_NUMBER_PATTERN+"$|^"+VALID_PHONE_NUMBER_WITH_EXTENSION+"$","i");function isViablePhoneNumber(n){return n.length>=MIN_LENGTH_FOR_NSN&&VALID_PHONE_NUMBER_PATTERN.test(n)}function isViablePhoneNumberStart(n){return VALID_PHONE_NUMBER_START_REG_EXP.test(n)}var EXTN_PATTERN=new RegExp("(?:"+createExtensionPattern()+")$","i");function extractExtension(n){var e=n.search(EXTN_PATTERN);if(e<0)return{};for(var t=n.slice(0,e),o=n.match(EXTN_PATTERN),l=1;l<o.length;){if(o[l])return{number:t,ext:o[l]};l++}}var DIGITS={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};function parseDigit(n){return DIGITS[n]}function _createForOfIteratorHelperLoose$5(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=_unsupportedIterableToArray$6(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var o=0;return function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$6(n,e){if(n){if(typeof n=="string")return _arrayLikeToArray$6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _arrayLikeToArray$6(n,e)}}function _arrayLikeToArray$6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=n[t];return o}function parseIncompletePhoneNumber(n){for(var e="",t=_createForOfIteratorHelperLoose$5(n.split("")),o;!(o=t()).done;){var l=o.value;e+=parsePhoneNumberCharacter(l,e)||""}return e}function parsePhoneNumberCharacter(n,e){return n==="+"?e?void 0:"+":parseDigit(n)}function _createForOfIteratorHelperLoose$4(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=_unsupportedIterableToArray$5(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var o=0;return function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$5(n,e){if(n){if(typeof n=="string")return _arrayLikeToArray$5(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _arrayLikeToArray$5(n,e)}}function _arrayLikeToArray$5(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=n[t];return o}function mergeArrays(n,e){for(var t=n.slice(),o=_createForOfIteratorHelperLoose$4(e),l;!(l=o()).done;){var d=l.value;n.indexOf(d)<0&&t.push(d)}return t.sort(function(h,g){return h-g})}function checkNumberLength(n,e){return checkNumberLengthForType(n,void 0,e)}function checkNumberLengthForType(n,e,t){var o=t.type(e),l=o&&o.possibleLengths()||t.possibleLengths();if(!l)return"IS_POSSIBLE";if(e==="FIXED_LINE_OR_MOBILE"){if(!t.type("FIXED_LINE"))return checkNumberLengthForType(n,"MOBILE",t);var d=t.type("MOBILE");d&&(l=mergeArrays(l,d.possibleLengths()))}else if(e&&!o)return"INVALID_LENGTH";var h=n.length,g=l[0];return g===h?"IS_POSSIBLE":g>h?"TOO_SHORT":l[l.length-1]<h?"TOO_LONG":l.indexOf(h,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function isPossiblePhoneNumber(n,e,t){if(e===void 0&&(e={}),t=new Metadata(t),e.v2){if(!n.countryCallingCode)throw new Error("Invalid phone number object passed");t.selectNumberingPlan(n.countryCallingCode)}else{if(!n.phone)return!1;if(n.country){if(!t.hasCountry(n.country))throw new Error("Unknown country: ".concat(n.country));t.country(n.country)}else{if(!n.countryCallingCode)throw new Error("Invalid phone number object passed");t.selectNumberingPlan(n.countryCallingCode)}}if(t.possibleLengths())return isPossibleNumber(n.phone||n.nationalNumber,t);if(n.countryCallingCode&&t.isNonGeographicCallingCode(n.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function isPossibleNumber(n,e){switch(checkNumberLength(n,e)){case"IS_POSSIBLE":return!0;default:return!1}}function _slicedToArray$1(n,e){return _arrayWithHoles$1(n)||_iterableToArrayLimit$1(n,e)||_unsupportedIterableToArray$4(n,e)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArrayLimit$1(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var o=[],l=!0,d=!1,h,g;try{for(t=t.call(n);!(l=(h=t.next()).done)&&(o.push(h.value),!(e&&o.length===e));l=!0);}catch(m){d=!0,g=m}finally{try{!l&&t.return!=null&&t.return()}finally{if(d)throw g}}return o}}function _arrayWithHoles$1(n){if(Array.isArray(n))return n}function _createForOfIteratorHelperLoose$3(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=_unsupportedIterableToArray$4(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var o=0;return function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$4(n,e){if(n){if(typeof n=="string")return _arrayLikeToArray$4(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _arrayLikeToArray$4(n,e)}}function _arrayLikeToArray$4(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=n[t];return o}function parseRFC3966(n){var e,t;n=n.replace(/^tel:/,"tel=");for(var o=_createForOfIteratorHelperLoose$3(n.split(";")),l;!(l=o()).done;){var d=l.value,h=d.split("="),g=_slicedToArray$1(h,2),m=g[0],y=g[1];switch(m){case"tel":e=y;break;case"ext":t=y;break;case"phone-context":y[0]==="+"&&(e=y+e);break}}if(!isViablePhoneNumber(e))return{};var b={number:e};return t&&(b.ext=t),b}function formatRFC3966(n){var e=n.number,t=n.ext;if(!e)return"";if(e[0]!=="+")throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(e).concat(t?";ext="+t:"")}function matchesEntirely(n,e){return n=n||"",new RegExp("^(?:"+e+")$").test(n)}function _createForOfIteratorHelperLoose$2(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=_unsupportedIterableToArray$3(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var o=0;return function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$3(n,e){if(n){if(typeof n=="string")return _arrayLikeToArray$3(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _arrayLikeToArray$3(n,e)}}function _arrayLikeToArray$3(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=n[t];return o}var NON_FIXED_LINE_PHONE_TYPES=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function getNumberType(n,e,t){if(e=e||{},!!n.country){t=new Metadata(t),t.selectNumberingPlan(n.country,n.countryCallingCode);var o=e.v2?n.nationalNumber:n.phone;if(matchesEntirely(o,t.nationalNumberPattern())){if(isNumberTypeEqualTo(o,"FIXED_LINE",t))return t.type("MOBILE")&&t.type("MOBILE").pattern()===""||!t.type("MOBILE")||isNumberTypeEqualTo(o,"MOBILE",t)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE";for(var l=_createForOfIteratorHelperLoose$2(NON_FIXED_LINE_PHONE_TYPES),d;!(d=l()).done;){var h=d.value;if(isNumberTypeEqualTo(o,h,t))return h}}}}function isNumberTypeEqualTo(n,e,t){return e=t.type(e),!e||!e.pattern()||e.possibleLengths()&&e.possibleLengths().indexOf(n.length)<0?!1:matchesEntirely(n,e.pattern())}function isValidNumber(n,e,t){if(e=e||{},t=new Metadata(t),!n.country)return!1;if(t.selectNumberingPlan(n.country,n.countryCallingCode),t.hasTypes())return getNumberType(n,e,t.metadata)!==void 0;var o=e.v2?n.nationalNumber:n.phone;return matchesEntirely(o,t.nationalNumberPattern())}function getPossibleCountriesForNumber(n,e,t){var o=new Metadata(t),l=o.getCountryCodesForCallingCode(n);return l?l.filter(function(d){return couldNationalNumberBelongToCountry(e,d,t)}):[]}function couldNationalNumberBelongToCountry(n,e,t){var o=new Metadata(t);return o.selectNumberingPlan(e),o.numberingPlan.possibleLengths().indexOf(n.length)>=0}function applyInternationalSeparatorStyle(n){return n.replace(new RegExp("[".concat(VALID_PUNCTUATION,"]+"),"g")," ").trim()}var FIRST_GROUP_PATTERN=/(\$\d)/;function formatNationalNumberUsingFormat(n,e,t){var o=t.useInternationalFormat,l=t.withNationalPrefix;t.carrierCode,t.metadata;var d=n.replace(new RegExp(e.pattern()),o?e.internationalFormat():l&&e.nationalPrefixFormattingRule()?e.format().replace(FIRST_GROUP_PATTERN,e.nationalPrefixFormattingRule()):e.format());return o?applyInternationalSeparatorStyle(d):d}var SINGLE_IDD_PREFIX_REG_EXP=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function getIddPrefix(n,e,t){var o=new Metadata(t);if(o.selectNumberingPlan(n,e),o.defaultIDDPrefix())return o.defaultIDDPrefix();if(SINGLE_IDD_PREFIX_REG_EXP.test(o.IDDPrefix()))return o.IDDPrefix()}function _createForOfIteratorHelperLoose$1(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=_unsupportedIterableToArray$2(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var o=0;return function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$2(n,e){if(n){if(typeof n=="string")return _arrayLikeToArray$2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _arrayLikeToArray$2(n,e)}}function _arrayLikeToArray$2(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=n[t];return o}function ownKeys$4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),t.push.apply(t,o)}return t}function _objectSpread$4(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$4(Object(t),!0).forEach(function(o){_defineProperty$4(n,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ownKeys$4(Object(t)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(t,o))})}return n}function _defineProperty$4(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var DEFAULT_OPTIONS={formatExtension:function(e,t,o){return"".concat(e).concat(o.ext()).concat(t)}};function formatNumber$1(n,e,t,o){if(t?t=_objectSpread$4(_objectSpread$4({},DEFAULT_OPTIONS),t):t=DEFAULT_OPTIONS,o=new Metadata(o),n.country&&n.country!=="001"){if(!o.hasCountry(n.country))throw new Error("Unknown country: ".concat(n.country));o.country(n.country)}else if(n.countryCallingCode)o.selectNumberingPlan(n.countryCallingCode);else return n.phone||"";var l=o.countryCallingCode(),d=t.v2?n.nationalNumber:n.phone,h;switch(e){case"NATIONAL":return d?(h=formatNationalNumber(d,n.carrierCode,"NATIONAL",o,t),addExtension(h,n.ext,o,t.formatExtension)):"";case"INTERNATIONAL":return d?(h=formatNationalNumber(d,null,"INTERNATIONAL",o,t),h="+".concat(l," ").concat(h),addExtension(h,n.ext,o,t.formatExtension)):"+".concat(l);case"E.164":return"+".concat(l).concat(d);case"RFC3966":return formatRFC3966({number:"+".concat(l).concat(d),ext:n.ext});case"IDD":if(!t.fromCountry)return;var g=formatIDD(d,n.carrierCode,l,t.fromCountry,o);return addExtension(g,n.ext,o,t.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(e,'"'))}}function formatNationalNumber(n,e,t,o,l){var d=chooseFormatForNumber(o.formats(),n);return d?formatNationalNumberUsingFormat(n,d,{useInternationalFormat:t==="INTERNATIONAL",withNationalPrefix:!(d.nationalPrefixIsOptionalWhenFormattingInNationalFormat()&&l&&l.nationalPrefix===!1),carrierCode:e,metadata:o}):n}function chooseFormatForNumber(n,e){for(var t=_createForOfIteratorHelperLoose$1(n),o;!(o=t()).done;){var l=o.value;if(l.leadingDigitsPatterns().length>0){var d=l.leadingDigitsPatterns()[l.leadingDigitsPatterns().length-1];if(e.search(d)!==0)continue}if(matchesEntirely(e,l.pattern()))return l}}function addExtension(n,e,t,o){return e?o(n,e,t):n}function formatIDD(n,e,t,o,l){var d=getCountryCallingCode(o,l.metadata);if(d===t){var h=formatNationalNumber(n,e,"NATIONAL",l);return t==="1"?t+" "+h:h}var g=getIddPrefix(o,void 0,l.metadata);if(g)return"".concat(g," ").concat(t," ").concat(formatNationalNumber(n,null,"INTERNATIONAL",l))}function ownKeys$3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),t.push.apply(t,o)}return t}function _objectSpread$3(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$3(Object(t),!0).forEach(function(o){_defineProperty$3(n,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ownKeys$3(Object(t)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(t,o))})}return n}function _defineProperty$3(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function _createClass(n,e,t){return e&&_defineProperties(n.prototype,e),t&&_defineProperties(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var PhoneNumber=function(){function n(e,t,o){if(_classCallCheck(this,n),!e)throw new TypeError("`country` or `countryCallingCode` not passed");if(!t)throw new TypeError("`nationalNumber` not passed");if(!o)throw new TypeError("`metadata` not passed");var l=new Metadata(o);isCountryCode(e)&&(this.country=e,l.country(e),e=l.countryCallingCode()),this.countryCallingCode=e,this.nationalNumber=t,this.number="+"+this.countryCallingCode+this.nationalNumber,this.metadata=o}return _createClass(n,[{key:"setExt",value:function(t){this.ext=t}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:getPossibleCountriesForNumber(this.countryCallingCode,this.nationalNumber,this.metadata)}},{key:"isPossible",value:function(){return isPossiblePhoneNumber(this,{v2:!0},this.metadata)}},{key:"isValid",value:function(){return isValidNumber(this,{v2:!0},this.metadata)}},{key:"isNonGeographic",value:function(){var t=new Metadata(this.metadata);return t.isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(t){return this.number===t.number&&this.ext===t.ext}},{key:"getType",value:function(){return getNumberType(this,{v2:!0},this.metadata)}},{key:"format",value:function(t,o){return formatNumber$1(this,t,o?_objectSpread$3(_objectSpread$3({},o),{},{v2:!0}):{v2:!0},this.metadata)}},{key:"formatNational",value:function(t){return this.format("NATIONAL",t)}},{key:"formatInternational",value:function(t){return this.format("INTERNATIONAL",t)}},{key:"getURI",value:function(t){return this.format("RFC3966",t)}}]),n}(),isCountryCode=function(e){return/^[A-Z]{2}$/.test(e)},CAPTURING_DIGIT_PATTERN=new RegExp("(["+VALID_DIGITS+"])");function stripIddPrefix(n,e,t,o){if(e){var l=new Metadata(o);l.selectNumberingPlan(e,t);var d=new RegExp(l.IDDPrefix());if(n.search(d)===0){n=n.slice(n.match(d)[0].length);var h=n.match(CAPTURING_DIGIT_PATTERN);if(!(h&&h[1]!=null&&h[1].length>0&&h[1]==="0"))return n}}}function extractNationalNumberFromPossiblyIncompleteNumber(n,e){if(n&&e.numberingPlan.nationalPrefixForParsing()){var t=new RegExp("^(?:"+e.numberingPlan.nationalPrefixForParsing()+")"),o=t.exec(n);if(o){var l,d,h=o.length-1,g=h>0&&o[h];if(e.nationalPrefixTransformRule()&&g)l=n.replace(t,e.nationalPrefixTransformRule()),h>1&&(d=o[1]);else{var m=o[0];l=n.slice(m.length),g&&(d=o[1])}var y;if(g){var b=n.indexOf(o[1]),w=n.slice(0,b);w===e.numberingPlan.nationalPrefix()&&(y=e.numberingPlan.nationalPrefix())}else y=o[0];return{nationalNumber:l,nationalPrefix:y,carrierCode:d}}}return{nationalNumber:n}}function extractNationalNumber(n,e){var t=extractNationalNumberFromPossiblyIncompleteNumber(n,e),o=t.carrierCode,l=t.nationalNumber;if(l!==n){if(!shouldHaveExtractedNationalPrefix(n,l,e))return{nationalNumber:n};if(e.possibleLengths()&&!isPossibleIncompleteNationalNumber(l,e))return{nationalNumber:n}}return{nationalNumber:l,carrierCode:o}}function shouldHaveExtractedNationalPrefix(n,e,t){return!(matchesEntirely(n,t.nationalNumberPattern())&&!matchesEntirely(e,t.nationalNumberPattern()))}function isPossibleIncompleteNationalNumber(n,e){switch(checkNumberLength(n,e)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}function extractCountryCallingCodeFromInternationalNumberWithoutPlusSign(n,e,t,o){var l=e?getCountryCallingCode(e,o):t;if(n.indexOf(l)===0){o=new Metadata(o),o.selectNumberingPlan(e,t);var d=n.slice(l.length),h=extractNationalNumber(d,o),g=h.nationalNumber,m=extractNationalNumber(n,o),y=m.nationalNumber;if(!matchesEntirely(y,o.nationalNumberPattern())&&matchesEntirely(g,o.nationalNumberPattern())||checkNumberLength(y,o)==="TOO_LONG")return{countryCallingCode:l,number:d}}return{number:n}}function extractCountryCallingCode(n,e,t,o){if(!n)return{};if(n[0]!=="+"){var l=stripIddPrefix(n,e,t,o);if(l&&l!==n)n="+"+l;else{if(e||t){var d=extractCountryCallingCodeFromInternationalNumberWithoutPlusSign(n,e,t,o),h=d.countryCallingCode,g=d.number;if(h)return{countryCallingCode:h,number:g}}return{number:n}}}if(n[1]==="0")return{};o=new Metadata(o);for(var m=2;m-1<=MAX_LENGTH_COUNTRY_CODE&&m<=n.length;){var y=n.slice(1,m);if(o.hasCallingCode(y))return o.selectNumberingPlan(y),{countryCallingCode:y,number:n.slice(m)};m++}return{}}function _createForOfIteratorHelperLoose(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=_unsupportedIterableToArray$1(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var o=0;return function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(n,e){if(n){if(typeof n=="string")return _arrayLikeToArray$1(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _arrayLikeToArray$1(n,e)}}function _arrayLikeToArray$1(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=n[t];return o}function getCountryByNationalNumber(n,e,t){t=new Metadata(t);for(var o=_createForOfIteratorHelperLoose(n),l;!(l=o()).done;){var d=l.value;if(t.country(d),t.leadingDigits()){if(e&&e.search(t.leadingDigits())===0)return d}else if(getNumberType({phone:e,country:d},void 0,t.metadata))return d}}var USE_NON_GEOGRAPHIC_COUNTRY_CODE=!1;function getCountryByCallingCode(n,e,t){if(USE_NON_GEOGRAPHIC_COUNTRY_CODE&&t.isNonGeographicCallingCode(n))return"001";var o=t.getCountryCodesForCallingCode(n);if(o)return o.length===1?o[0]:getCountryByNationalNumber(o,e,t.metadata)}var MAX_INPUT_STRING_LENGTH=250,PHONE_NUMBER_START_PATTERN=new RegExp("["+PLUS_CHARS+VALID_DIGITS+"]"),AFTER_PHONE_NUMBER_END_PATTERN=new RegExp("[^"+VALID_DIGITS+"#]+$");function parse$3(n,e,t){if(e=e||{},t=new Metadata(t),e.defaultCountry&&!t.hasCountry(e.defaultCountry))throw e.v2?new ParseError("INVALID_COUNTRY"):new Error("Unknown country: ".concat(e.defaultCountry));var o=parseInput(n,e.v2,e.extract),l=o.number,d=o.ext,h=o.error;if(!l){if(e.v2)throw h==="TOO_SHORT"?new ParseError("TOO_SHORT"):new ParseError("NOT_A_NUMBER");return{}}var g=parsePhoneNumber$1(l,e.defaultCountry,e.defaultCallingCode,t),m=g.country,y=g.nationalNumber,b=g.countryCallingCode,w=g.carrierCode;if(!t.hasSelectedNumberingPlan()){if(e.v2)throw new ParseError("INVALID_COUNTRY");return{}}if(!y||y.length<MIN_LENGTH_FOR_NSN){if(e.v2)throw new ParseError("TOO_SHORT");return{}}if(y.length>MAX_LENGTH_FOR_NSN){if(e.v2)throw new ParseError("TOO_LONG");return{}}if(e.v2){var E=new PhoneNumber(b,y,t.metadata);return m&&(E.country=m),w&&(E.carrierCode=w),d&&(E.ext=d),E}var P=(e.extended?t.hasSelectedNumberingPlan():m)?matchesEntirely(y,t.nationalNumberPattern()):!1;return e.extended?{country:m,countryCallingCode:b,carrierCode:w,valid:P,possible:P?!0:!!(e.extended===!0&&t.possibleLengths()&&isPossibleNumber(y,t)),phone:y,ext:d}:P?result(m,y,d):{}}function extractFormattedPhoneNumber(n,e,t){if(n){if(n.length>MAX_INPUT_STRING_LENGTH){if(t)throw new ParseError("TOO_LONG");return}if(e===!1)return n;var o=n.search(PHONE_NUMBER_START_PATTERN);if(!(o<0))return n.slice(o).replace(AFTER_PHONE_NUMBER_END_PATTERN,"")}}function parseInput(n,e,t){if(n&&n.indexOf("tel:")===0)return parseRFC3966(n);var o=extractFormattedPhoneNumber(n,t,e);if(!o)return{};if(!isViablePhoneNumber(o))return isViablePhoneNumberStart(o)?{error:"TOO_SHORT"}:{};var l=extractExtension(o);return l.ext?l:{number:o}}function result(n,e,t){var o={country:n,phone:e};return t&&(o.ext=t),o}function parsePhoneNumber$1(n,e,t,o){var l=extractCountryCallingCode(parseIncompletePhoneNumber(n),e,t,o.metadata),d=l.countryCallingCode,h=l.number,g;if(d)o.selectNumberingPlan(d);else if(h&&(e||t))o.selectNumberingPlan(e,t),e&&(g=e),d=t||getCountryCallingCode(e,o.metadata);else return{};if(!h)return{countryCallingCode:d};var m=extractNationalNumber(parseIncompletePhoneNumber(h),o),y=m.nationalNumber,b=m.carrierCode,w=getCountryByCallingCode(d,y,o);return w&&(g=w,w==="001"||o.country(g)),{country:g,countryCallingCode:d,nationalNumber:y,carrierCode:b}}function ownKeys$2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),t.push.apply(t,o)}return t}function _objectSpread$2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$2(Object(t),!0).forEach(function(o){_defineProperty$2(n,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ownKeys$2(Object(t)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(t,o))})}return n}function _defineProperty$2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function parsePhoneNumber(n,e,t){return parse$3(n,_objectSpread$2(_objectSpread$2({},e),{},{v2:!0}),t)}function _typeof$1(n){return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(n)}function ownKeys$1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),t.push.apply(t,o)}return t}function _objectSpread$1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(t),!0).forEach(function(o){_defineProperty$1(n,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ownKeys$1(Object(t)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(t,o))})}return n}function _defineProperty$1(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _slicedToArray(n,e){return _arrayWithHoles(n)||_iterableToArrayLimit(n,e)||_unsupportedIterableToArray(n,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(n,e){if(n){if(typeof n=="string")return _arrayLikeToArray(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _arrayLikeToArray(n,e)}}function _arrayLikeToArray(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=n[t];return o}function _iterableToArrayLimit(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var o=[],l=!0,d=!1,h,g;try{for(t=t.call(n);!(l=(h=t.next()).done)&&(o.push(h.value),!(e&&o.length===e));l=!0);}catch(m){d=!0,g=m}finally{try{!l&&t.return!=null&&t.return()}finally{if(d)throw g}}return o}}function _arrayWithHoles(n){if(Array.isArray(n))return n}function normalizeArguments(n){var e=Array.prototype.slice.call(n),t=_slicedToArray(e,4),o=t[0],l=t[1],d=t[2],h=t[3],g,m,y;if(typeof o=="string")g=o;else throw new TypeError("A text for parsing must be a string.");if(!l||typeof l=="string")h?(m=d,y=h):(m=void 0,y=d),l&&(m=_objectSpread$1({defaultCountry:l},m));else if(isObject$5(l))d?(m=l,y=d):y=l;else throw new Error("Invalid second argument: ".concat(l));return{text:g,options:m,metadata:y}}var isObject$5=function(e){return _typeof$1(e)==="object"};function ownKeys(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(o){_defineProperty(n,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(t,o))})}return n}function _defineProperty(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function parsePhoneNumberFromString$2(n,e,t){e&&e.defaultCountry&&!isSupportedCountry(e.defaultCountry,t)&&(e=_objectSpread(_objectSpread({},e),{},{defaultCountry:void 0}));try{return parsePhoneNumber(n,e,t)}catch(o){if(!(o instanceof ParseError))throw o}}function parsePhoneNumberFromString$1(){var n=normalizeArguments(arguments),e=n.text,t=n.options,o=n.metadata;return parsePhoneNumberFromString$2(e,t,o)}function parsePhoneNumberFromString(){return withMetadataArgument(parsePhoneNumberFromString$1,arguments)}class TextField extends InputElement{constructor(t){super();ge(this,"enterPressed",new UIEventSource(void 0));ge(this,"value");ge(this,"_actualField");ge(this,"_isValid");ge(this,"_rawValue");ge(this,"_isFocused",!1);ge(this,"_options");this._options=t??{},t=t??{},this.value=(t==null?void 0:t.value)??new UIEventSource(void 0),this._rawValue=new UIEventSource(""),this._isValid=t.isValid??(o=>!0)}static SetCursorPosition(t,o){t!=null&&(o===-1&&(o=t.value.length),t.focus(),t.setSelectionRange(o,o))}GetValue(){return this.value}GetRawValue(){return this._rawValue}IsValid(t){return t==null?!1:this._isValid(t)}InnerConstructElement(){const t=this._options,o=this;let l,d="";t.placeholder&&(typeof t.placeholder=="string"?(d=t.placeholder,l=void 0):(t.placeholder instanceof Store&&t.placeholder.data!==void 0?l=t.placeholder:t.placeholder instanceof Translation&&t.placeholder.translations!==void 0&&(l=Locale.language.map(y=>t.placeholder.textFor(y))),d=(l==null?void 0:l.data)??d??"")),this.SetClass("form-text-field");let h;if(t.htmlType==="area"){this.SetClass("w-full box-border max-w-full");const y=document.createElement("textarea");y.placeholder=d,y.rows=t.textAreaRows,y.cols=50,y.style.width="100%",y.dir="auto",h=y,l&&l.addCallbackAndRunD(b=>y.placeholder=b)}else{const y=document.createElement("input");y.type=t.htmlType??"text",y.inputMode=t.inputMode,y.placeholder=d,y.style.cssText=t.inputStyle??"width: 100%;",y.dir="auto",h=y,l&&l.addCallbackAndRunD(b=>y.placeholder=b)}const g=document.createElement("form");g.appendChild(h),g.onsubmit=()=>!1,t.label&&g.appendChild(t.label.ConstructElement());const m=h;return this.value.addCallbackAndRunD(y=>{m.value=y,o.IsValid(y)?o.RemoveClass("invalid"):o.SetClass("invalid")}),m.oninput=()=>{const y=m.value.substring(m.selectionEnd).replace(/ /g,"").length;let b=m.value;o._rawValue.setData(b),o.IsValid(b)?o.value.setData(b):o.value.setData(void 0),b=m.value;let w=b.length-y;for(;w>=0&&b.substr(w).replace(/ /g,"").length<y;)w--;TextField.SetCursorPosition(m,w)},m.addEventListener("keyup",function(y){y.key==="Enter"&&o.enterPressed.setData(m.value)}),this._isFocused&&m.focus(),this._actualField=m,g}focus(){this._actualField===void 0?this._isFocused=!0:this._actualField.focus()}}class CombinedInputElement extends InputElement{constructor(t,o,l,d){super();ge(this,"_a");ge(this,"_b");ge(this,"_combined");ge(this,"_value");ge(this,"_split");this._a=t,this._b=o,this._split=d,this._combined=new Combine([this._a,this._b]),this._value=this._a.GetValue().sync(h=>{var g,m;return l(h,(m=(g=this._b)==null?void 0:g.GetValue())==null?void 0:m.data)},[this._b.GetValue()],h=>{var y;const[g,m]=d(h);return(y=this._b.GetValue())==null||y.setData(m),g})}GetValue(){return this._value}IsValid(t){const[o,l]=this._split(t);return this._a.IsValid(o)&&this._b.IsValid(l)}InnerConstructElement(){return this._combined.ConstructElement()}}class SimpleDatePicker extends InputElement{constructor(t){super();ge(this,"IsSelected",new UIEventSource(!1));ge(this,"value");ge(this,"_element");this.value=t??new UIEventSource(void 0);const o=this,l=document.createElement("input");this._element=l,l.type="date",l.oninput=()=>{o.value.setData(l.value)},this.value.addCallbackAndRunD(d=>{l.value=d})}GetValue(){return this.value}IsValid(t){return!isNaN(new Date(t).getTime())}InnerConstructElement(){return this._element}}var opening_hoursExports={},opening_hours={get exports(){return opening_hoursExports},set exports(n){opening_hoursExports=n}},suncalcExports={},suncalc={get exports(){return suncalcExports},set exports(n){suncalcExports=n}},hasRequiredSuncalc;function requireSuncalc(){return hasRequiredSuncalc||(hasRequiredSuncalc=1,function(n,e){(function(){var t=Math.PI,o=Math.sin,l=Math.cos,d=Math.tan,h=Math.asin,g=Math.atan2,m=Math.acos,y=t/180,b=1e3*60*60*24,w=2440588,E=2451545;function P(Z){return Z.valueOf()/b-.5+w}function $(Z){return new Date((Z+.5-w)*b)}function C(Z){return P(Z)-E}var L=y*23.4397;function W(Z,$e){return g(o(Z)*l(L)-d($e)*o(L),l(Z))}function Y(Z,$e){return h(o($e)*l(L)+l($e)*o(L)*o(Z))}function D(Z,$e,Ne){return g(o(Z),l(Z)*o($e)-d(Ne)*l($e))}function k(Z,$e,Ne){return h(o($e)*o(Ne)+l($e)*l(Ne)*l(Z))}function F(Z,$e){return y*(280.16+360.9856235*Z)-$e}function ce(Z){return Z<0&&(Z=0),2967e-7/Math.tan(Z+.00312536/(Z+.08901179))}function q(Z){return y*(357.5291+.98560028*Z)}function te(Z){var $e=y*(1.9148*o(Z)+.02*o(2*Z)+3e-4*o(3*Z)),Ne=y*102.9372;return Z+$e+Ne+t}function Q(Z){var $e=q(Z),Ne=te($e);return{dec:Y(Ne,0),ra:W(Ne,0)}}var ie={};ie.getPosition=function(Z,$e,Ne){var Me=y*-Ne,Ee=y*$e,Ve=C(Z),qe=Q(Ve),_t=F(Ve,Me)-qe.ra;return{azimuth:D(_t,Ee,qe.dec),altitude:k(_t,Ee,qe.dec)}};var J=ie.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];ie.addTime=function(Z,$e,Ne){J.push([Z,$e,Ne])};var x=9e-4;function I(Z,$e){return Math.round(Z-x-$e/(2*t))}function R(Z,$e,Ne){return x+(Z+$e)/(2*t)+Ne}function B(Z,$e,Ne){return E+Z+.0053*o($e)-.0069*o(2*Ne)}function ee(Z,$e,Ne){return m((o(Z)-o($e)*o(Ne))/(l($e)*l(Ne)))}function ne(Z){return-2.076*Math.sqrt(Z)/60}function z(Z,$e,Ne,Me,Ee,Ve,qe){var _t=ee(Z,Ne,Me),Qe=R(_t,$e,Ee);return B(Qe,Ve,qe)}ie.getTimes=function(Z,$e,Ne,Me){Me=Me||0;var Ee=y*-Ne,Ve=y*$e,qe=ne(Me),_t=C(Z),Qe=I(_t,Ee),tt=R(0,Ee,Qe),st=q(tt),Oe=te(st),Tt=Y(Oe,0),yn=B(tt,st,Oe),St,de,U,H,pe,_e,De={solarNoon:$(yn),nadir:$(yn-.5)};for(St=0,de=J.length;St<de;St+=1)U=J[St],H=(U[0]+qe)*y,pe=z(H,Ee,Ve,Tt,Qe,st,Oe),_e=yn-(pe-yn),De[U[1]]=$(_e),De[U[2]]=$(pe);return De};function X(Z){var $e=y*(218.316+13.176396*Z),Ne=y*(134.963+13.064993*Z),Me=y*(93.272+13.22935*Z),Ee=$e+y*6.289*o(Ne),Ve=y*5.128*o(Me),qe=385001-20905*l(Ne);return{ra:W(Ee,Ve),dec:Y(Ee,Ve),dist:qe}}ie.getMoonPosition=function(Z,$e,Ne){var Me=y*-Ne,Ee=y*$e,Ve=C(Z),qe=X(Ve),_t=F(Ve,Me)-qe.ra,Qe=k(_t,Ee,qe.dec),tt=g(o(_t),d(Ee)*l(qe.dec)-o(qe.dec)*l(_t));return Qe=Qe+ce(Qe),{azimuth:D(_t,Ee,qe.dec),altitude:Qe,distance:qe.dist,parallacticAngle:tt}},ie.getMoonIllumination=function(Z){var $e=C(Z||new Date),Ne=Q($e),Me=X($e),Ee=149598e3,Ve=m(o(Ne.dec)*o(Me.dec)+l(Ne.dec)*l(Me.dec)*l(Ne.ra-Me.ra)),qe=g(Ee*o(Ve),Me.dist-Ee*l(Ve)),_t=g(l(Ne.dec)*o(Ne.ra-Me.ra),o(Ne.dec)*l(Me.dec)-l(Ne.dec)*o(Me.dec)*l(Ne.ra-Me.ra));return{fraction:(1+l(qe))/2,phase:.5+.5*qe*(_t<0?-1:1)/Math.PI,angle:_t}};function A(Z,$e){return new Date(Z.valueOf()+$e*b/24)}ie.getMoonTimes=function(Z,$e,Ne,Me){var Ee=new Date(Z);Me?Ee.setUTCHours(0,0,0,0):Ee.setHours(0,0,0,0);for(var Ve=.133*y,qe=ie.getMoonPosition(Ee,$e,Ne).altitude-Ve,_t,Qe,tt,st,Oe,Tt,yn,St,de,U,H,pe,_e,De=1;De<=24&&(_t=ie.getMoonPosition(A(Ee,De),$e,Ne).altitude-Ve,Qe=ie.getMoonPosition(A(Ee,De+1),$e,Ne).altitude-Ve,Oe=(qe+Qe)/2-_t,Tt=(Qe-qe)/2,yn=-Tt/(2*Oe),St=(Oe*yn+Tt)*yn+_t,de=Tt*Tt-4*Oe*_t,U=0,de>=0&&(_e=Math.sqrt(de)/(Math.abs(Oe)*2),H=yn-_e,pe=yn+_e,Math.abs(H)<=1&&U++,Math.abs(pe)<=1&&U++,H<-1&&(H=pe)),U===1?qe<0?tt=De+H:st=De+H:U===2&&(tt=De+(St<0?pe:H),st=De+(St<0?H:pe)),!(tt&&st));De+=2)qe=Qe;var Be={};return tt&&(Be.rise=A(Ee,tt)),st&&(Be.set=A(Ee,st)),!tt&&!st&&(Be[St>0?"alwaysUp":"alwaysDown"]=!0),Be},n.exports=ie})()}(suncalc)),suncalcExports}const require$$0$2=getAugmentedNamespace(_typeof$4);var classCallCheckExports={},classCallCheck={get exports(){return classCallCheckExports},set exports(n){classCallCheckExports=n}},hasRequiredClassCallCheck;function requireClassCallCheck(){return hasRequiredClassCallCheck||(hasRequiredClassCallCheck=1,function(n){function e(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(classCallCheck)),classCallCheckExports}var createClassExports={},createClass={get exports(){return createClassExports},set exports(n){createClassExports=n}},toPropertyKeyExports={},toPropertyKey={get exports(){return toPropertyKeyExports},set exports(n){toPropertyKeyExports=n}},_typeofExports={},_typeof={get exports(){return _typeofExports},set exports(n){_typeofExports=n}},hasRequired_typeof;function require_typeof(){return hasRequired_typeof||(hasRequired_typeof=1,function(n){function e(t){return n.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(_typeof)),_typeofExports}var toPrimitiveExports={},toPrimitive={get exports(){return toPrimitiveExports},set exports(n){toPrimitiveExports=n}},hasRequiredToPrimitive;function requireToPrimitive(){return hasRequiredToPrimitive||(hasRequiredToPrimitive=1,function(n){var e=require_typeof().default;function t(o,l){if(e(o)!=="object"||o===null)return o;var d=o[Symbol.toPrimitive];if(d!==void 0){var h=d.call(o,l||"default");if(e(h)!=="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(o)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(toPrimitive)),toPrimitiveExports}var hasRequiredToPropertyKey;function requireToPropertyKey(){return hasRequiredToPropertyKey||(hasRequiredToPropertyKey=1,function(n){var e=require_typeof().default,t=requireToPrimitive();function o(l){var d=t(l,"string");return e(d)==="symbol"?d:String(d)}n.exports=o,n.exports.__esModule=!0,n.exports.default=n.exports}(toPropertyKey)),toPropertyKeyExports}var hasRequiredCreateClass;function requireCreateClass(){return hasRequiredCreateClass||(hasRequiredCreateClass=1,function(n){var e=requireToPropertyKey();function t(l,d){for(var h=0;h<d.length;h++){var g=d[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(l,e(g.key),g)}}function o(l,d,h){return d&&t(l.prototype,d),h&&t(l,h),Object.defineProperty(l,"prototype",{writable:!1}),l}n.exports=o,n.exports.__esModule=!0,n.exports.default=n.exports}(createClass)),createClassExports}var assertThisInitializedExports={},assertThisInitialized={get exports(){return assertThisInitializedExports},set exports(n){assertThisInitializedExports=n}},hasRequiredAssertThisInitialized;function requireAssertThisInitialized(){return hasRequiredAssertThisInitialized||(hasRequiredAssertThisInitialized=1,function(n){function e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(assertThisInitialized)),assertThisInitializedExports}var inheritsExports={},inherits$b={get exports(){return inheritsExports},set exports(n){inheritsExports=n}},setPrototypeOfExports={},setPrototypeOf={get exports(){return setPrototypeOfExports},set exports(n){setPrototypeOfExports=n}},hasRequiredSetPrototypeOf;function requireSetPrototypeOf(){return hasRequiredSetPrototypeOf||(hasRequiredSetPrototypeOf=1,function(n){function e(t,o){return n.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,h){return d.__proto__=h,d},n.exports.__esModule=!0,n.exports.default=n.exports,e(t,o)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(setPrototypeOf)),setPrototypeOfExports}var hasRequiredInherits;function requireInherits(){return hasRequiredInherits||(hasRequiredInherits=1,function(n){var e=requireSetPrototypeOf();function t(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),l&&e(o,l)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(inherits$b)),inheritsExports}var possibleConstructorReturnExports={},possibleConstructorReturn={get exports(){return possibleConstructorReturnExports},set exports(n){possibleConstructorReturnExports=n}},hasRequiredPossibleConstructorReturn;function requirePossibleConstructorReturn(){return hasRequiredPossibleConstructorReturn||(hasRequiredPossibleConstructorReturn=1,function(n){var e=require_typeof().default,t=requireAssertThisInitialized();function o(l,d){if(d&&(e(d)==="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t(l)}n.exports=o,n.exports.__esModule=!0,n.exports.default=n.exports}(possibleConstructorReturn)),possibleConstructorReturnExports}var getPrototypeOfExports={},getPrototypeOf$1={get exports(){return getPrototypeOfExports},set exports(n){getPrototypeOfExports=n}},hasRequiredGetPrototypeOf;function requireGetPrototypeOf(){return hasRequiredGetPrototypeOf||(hasRequiredGetPrototypeOf=1,function(n){function e(t){return n.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(getPrototypeOf$1)),getPrototypeOfExports}const require$$7=getAugmentedNamespace(defineProperty);var toArrayExports={},toArray$2={get exports(){return toArrayExports},set exports(n){toArrayExports=n}},arrayWithHolesExports={},arrayWithHoles={get exports(){return arrayWithHolesExports},set exports(n){arrayWithHolesExports=n}},hasRequiredArrayWithHoles;function requireArrayWithHoles(){return hasRequiredArrayWithHoles||(hasRequiredArrayWithHoles=1,function(n){function e(t){if(Array.isArray(t))return t}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(arrayWithHoles)),arrayWithHolesExports}var iterableToArrayExports={},iterableToArray={get exports(){return iterableToArrayExports},set exports(n){iterableToArrayExports=n}},hasRequiredIterableToArray;function requireIterableToArray(){return hasRequiredIterableToArray||(hasRequiredIterableToArray=1,function(n){function e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(iterableToArray)),iterableToArrayExports}var unsupportedIterableToArrayExports={},unsupportedIterableToArray={get exports(){return unsupportedIterableToArrayExports},set exports(n){unsupportedIterableToArrayExports=n}},arrayLikeToArrayExports={},arrayLikeToArray={get exports(){return arrayLikeToArrayExports},set exports(n){arrayLikeToArrayExports=n}},hasRequiredArrayLikeToArray;function requireArrayLikeToArray(){return hasRequiredArrayLikeToArray||(hasRequiredArrayLikeToArray=1,function(n){function e(t,o){(o==null||o>t.length)&&(o=t.length);for(var l=0,d=new Array(o);l<o;l++)d[l]=t[l];return d}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(arrayLikeToArray)),arrayLikeToArrayExports}var hasRequiredUnsupportedIterableToArray;function requireUnsupportedIterableToArray(){return hasRequiredUnsupportedIterableToArray||(hasRequiredUnsupportedIterableToArray=1,function(n){var e=requireArrayLikeToArray();function t(o,l){if(o){if(typeof o=="string")return e(o,l);var d=Object.prototype.toString.call(o).slice(8,-1);if(d==="Object"&&o.constructor&&(d=o.constructor.name),d==="Map"||d==="Set")return Array.from(o);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return e(o,l)}}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(unsupportedIterableToArray)),unsupportedIterableToArrayExports}var nonIterableRestExports={},nonIterableRest={get exports(){return nonIterableRestExports},set exports(n){nonIterableRestExports=n}},hasRequiredNonIterableRest;function requireNonIterableRest(){return hasRequiredNonIterableRest||(hasRequiredNonIterableRest=1,function(n){function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(nonIterableRest)),nonIterableRestExports}var hasRequiredToArray;function requireToArray(){return hasRequiredToArray||(hasRequiredToArray=1,function(n){var e=requireArrayWithHoles(),t=requireIterableToArray(),o=requireUnsupportedIterableToArray(),l=requireNonIterableRest();function d(h){return e(h)||t(h)||o(h)||l()}n.exports=d,n.exports.__esModule=!0,n.exports.default=n.exports}(toArray$2)),toArrayExports}var i18next,hasRequiredI18next;function requireI18next(){if(hasRequiredI18next)return i18next;hasRequiredI18next=1;var n=require$$0$2,e=requireClassCallCheck(),t=requireCreateClass(),o=requireAssertThisInitialized(),l=requireInherits(),d=requirePossibleConstructorReturn(),h=requireGetPrototypeOf(),g=require$$7,m=requireToArray();function y(me){return me&&typeof me=="object"&&"default"in me?me:{default:me}}var b=y(n),w=y(e),E=y(t),P=y(o),$=y(l),C=y(d),L=y(h),W=y(g),Y=y(m);function D(me,le){var oe=Object.keys(me);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(me);le&&(re=re.filter(function(G){return Object.getOwnPropertyDescriptor(me,G).enumerable})),oe.push.apply(oe,re)}return oe}function k(me){for(var le=1;le<arguments.length;le++){var oe=arguments[le]!=null?arguments[le]:{};le%2?D(Object(oe),!0).forEach(function(re){W.default(me,re,oe[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(oe)):D(Object(oe)).forEach(function(re){Object.defineProperty(me,re,Object.getOwnPropertyDescriptor(oe,re))})}return me}var F={type:"logger",log:function(le){this.output("log",le)},warn:function(le){this.output("warn",le)},error:function(le){this.output("error",le)},output:function(le,oe){console&&console[le]&&console[le].apply(console,oe)}},ce=function(){function me(le){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};w.default(this,me),this.init(le,oe)}return E.default(me,[{key:"init",value:function(oe){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=re.prefix||"i18next:",this.logger=oe||F,this.options=re,this.debug=re.debug}},{key:"setDebug",value:function(oe){this.debug=oe}},{key:"log",value:function(){for(var oe=arguments.length,re=new Array(oe),G=0;G<oe;G++)re[G]=arguments[G];return this.forward(re,"log","",!0)}},{key:"warn",value:function(){for(var oe=arguments.length,re=new Array(oe),G=0;G<oe;G++)re[G]=arguments[G];return this.forward(re,"warn","",!0)}},{key:"error",value:function(){for(var oe=arguments.length,re=new Array(oe),G=0;G<oe;G++)re[G]=arguments[G];return this.forward(re,"error","")}},{key:"deprecate",value:function(){for(var oe=arguments.length,re=new Array(oe),G=0;G<oe;G++)re[G]=arguments[G];return this.forward(re,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(oe,re,G,se){return se&&!this.debug?null:(typeof oe[0]=="string"&&(oe[0]="".concat(G).concat(this.prefix," ").concat(oe[0])),this.logger[re](oe))}},{key:"create",value:function(oe){return new me(this.logger,k(k({},{prefix:"".concat(this.prefix,":").concat(oe,":")}),this.options))}},{key:"clone",value:function(oe){return oe=oe||this.options,oe.prefix=oe.prefix||this.prefix,new me(this.logger,oe)}}]),me}(),q=new ce,te=function(){function me(){w.default(this,me),this.observers={}}return E.default(me,[{key:"on",value:function(oe,re){var G=this;return oe.split(" ").forEach(function(se){G.observers[se]=G.observers[se]||[],G.observers[se].push(re)}),this}},{key:"off",value:function(oe,re){if(this.observers[oe]){if(!re){delete this.observers[oe];return}this.observers[oe]=this.observers[oe].filter(function(G){return G!==re})}}},{key:"emit",value:function(oe){for(var re=arguments.length,G=new Array(re>1?re-1:0),se=1;se<re;se++)G[se-1]=arguments[se];if(this.observers[oe]){var he=[].concat(this.observers[oe]);he.forEach(function(Ce){Ce.apply(void 0,G)})}if(this.observers["*"]){var Ie=[].concat(this.observers["*"]);Ie.forEach(function(Ce){Ce.apply(Ce,[oe].concat(G))})}}}]),me}();function Q(){var me,le,oe=new Promise(function(re,G){me=re,le=G});return oe.resolve=me,oe.reject=le,oe}function ie(me){return me==null?"":""+me}function J(me,le,oe){me.forEach(function(re){le[re]&&(oe[re]=le[re])})}function x(me,le,oe){function re(Ie){return Ie&&Ie.indexOf("###")>-1?Ie.replace(/###/g,"."):Ie}function G(){return!me||typeof me=="string"}for(var se=typeof le!="string"?[].concat(le):le.split(".");se.length>1;){if(G())return{};var he=re(se.shift());!me[he]&&oe&&(me[he]=new oe),Object.prototype.hasOwnProperty.call(me,he)?me=me[he]:me={}}return G()?{}:{obj:me,k:re(se.shift())}}function I(me,le,oe){var re=x(me,le,Object),G=re.obj,se=re.k;G[se]=oe}function R(me,le,oe,re){var G=x(me,le,Object),se=G.obj,he=G.k;se[he]=se[he]||[],re&&(se[he]=se[he].concat(oe)),re||se[he].push(oe)}function B(me,le){var oe=x(me,le),re=oe.obj,G=oe.k;if(re)return re[G]}function ee(me,le,oe){var re=B(me,oe);return re!==void 0?re:B(le,oe)}function ne(me,le,oe){for(var re in le)re!=="__proto__"&&re!=="constructor"&&(re in me?typeof me[re]=="string"||me[re]instanceof String||typeof le[re]=="string"||le[re]instanceof String?oe&&(me[re]=le[re]):ne(me[re],le[re],oe):me[re]=le[re]);return me}function z(me){return me.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var X={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function A(me){return typeof me=="string"?me.replace(/[&<>"'\/]/g,function(le){return X[le]}):me}var Z=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,$e=[" ",",","?","!",";"];function Ne(me,le,oe){le=le||"",oe=oe||"";var re=$e.filter(function(Ie){return le.indexOf(Ie)<0&&oe.indexOf(Ie)<0});if(re.length===0)return!0;var G=new RegExp("(".concat(re.map(function(Ie){return Ie==="?"?"\\?":Ie}).join("|"),")")),se=!G.test(me);if(!se){var he=me.indexOf(oe);he>0&&!G.test(me.substring(0,he))&&(se=!0)}return se}function Me(me,le){var oe=Object.keys(me);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(me);le&&(re=re.filter(function(G){return Object.getOwnPropertyDescriptor(me,G).enumerable})),oe.push.apply(oe,re)}return oe}function Ee(me){for(var le=1;le<arguments.length;le++){var oe=arguments[le]!=null?arguments[le]:{};le%2?Me(Object(oe),!0).forEach(function(re){W.default(me,re,oe[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(oe)):Me(Object(oe)).forEach(function(re){Object.defineProperty(me,re,Object.getOwnPropertyDescriptor(oe,re))})}return me}function Ve(me){var le=qe();return function(){var re=L.default(me),G;if(le){var se=L.default(this).constructor;G=Reflect.construct(re,arguments,se)}else G=re.apply(this,arguments);return C.default(this,G)}}function qe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _t(me,le){var oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(me){if(me[le])return me[le];for(var re=le.split(oe),G=me,se=0;se<re.length;++se){if(!G||typeof G[re[se]]=="string"&&se+1<re.length)return;if(G[re[se]]===void 0){for(var he=2,Ie=re.slice(se,se+he).join(oe),Ce=G[Ie];Ce===void 0&&re.length>se+he;)he++,Ie=re.slice(se,se+he).join(oe),Ce=G[Ie];if(Ce===void 0)return;if(Ce===null)return null;if(le.endsWith(Ie)){if(typeof Ce=="string")return Ce;if(Ie&&typeof Ce[Ie]=="string")return Ce[Ie]}var He=re.slice(se+he).join(oe);return He?_t(Ce,He,oe):void 0}G=G[re[se]]}return G}}var Qe=function(me){$.default(oe,me);var le=Ve(oe);function oe(re){var G,se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return w.default(this,oe),G=le.call(this),Z&&te.call(P.default(G)),G.data=re||{},G.options=se,G.options.keySeparator===void 0&&(G.options.keySeparator="."),G.options.ignoreJSONStructure===void 0&&(G.options.ignoreJSONStructure=!0),G}return E.default(oe,[{key:"addNamespaces",value:function(G){this.options.ns.indexOf(G)<0&&this.options.ns.push(G)}},{key:"removeNamespaces",value:function(G){var se=this.options.ns.indexOf(G);se>-1&&this.options.ns.splice(se,1)}},{key:"getResource",value:function(G,se,he){var Ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Ce=Ie.keySeparator!==void 0?Ie.keySeparator:this.options.keySeparator,He=Ie.ignoreJSONStructure!==void 0?Ie.ignoreJSONStructure:this.options.ignoreJSONStructure,Xe=[G,se];he&&typeof he!="string"&&(Xe=Xe.concat(he)),he&&typeof he=="string"&&(Xe=Xe.concat(Ce?he.split(Ce):he)),G.indexOf(".")>-1&&(Xe=G.split("."));var Fe=B(this.data,Xe);return Fe||!He||typeof he!="string"?Fe:_t(this.data&&this.data[G]&&this.data[G][se],he,Ce)}},{key:"addResource",value:function(G,se,he,Ie){var Ce=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},He=this.options.keySeparator;He===void 0&&(He=".");var Xe=[G,se];he&&(Xe=Xe.concat(He?he.split(He):he)),G.indexOf(".")>-1&&(Xe=G.split("."),Ie=se,se=Xe[1]),this.addNamespaces(se),I(this.data,Xe,Ie),Ce.silent||this.emit("added",G,se,he,Ie)}},{key:"addResources",value:function(G,se,he){var Ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var Ce in he)(typeof he[Ce]=="string"||Object.prototype.toString.apply(he[Ce])==="[object Array]")&&this.addResource(G,se,Ce,he[Ce],{silent:!0});Ie.silent||this.emit("added",G,se,he)}},{key:"addResourceBundle",value:function(G,se,he,Ie,Ce){var He=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},Xe=[G,se];G.indexOf(".")>-1&&(Xe=G.split("."),Ie=he,he=se,se=Xe[1]),this.addNamespaces(se);var Fe=B(this.data,Xe)||{};Ie?ne(Fe,he,Ce):Fe=Ee(Ee({},Fe),he),I(this.data,Xe,Fe),He.silent||this.emit("added",G,se,he)}},{key:"removeResourceBundle",value:function(G,se){this.hasResourceBundle(G,se)&&delete this.data[G][se],this.removeNamespaces(se),this.emit("removed",G,se)}},{key:"hasResourceBundle",value:function(G,se){return this.getResource(G,se)!==void 0}},{key:"getResourceBundle",value:function(G,se){return se||(se=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Ee(Ee({},{}),this.getResource(G,se)):this.getResource(G,se)}},{key:"getDataByLanguage",value:function(G){return this.data[G]}},{key:"hasLanguageSomeTranslations",value:function(G){var se=this.getDataByLanguage(G),he=se&&Object.keys(se)||[];return!!he.find(function(Ie){return se[Ie]&&Object.keys(se[Ie]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),oe}(te),tt={processors:{},addPostProcessor:function(le){this.processors[le.name]=le},handle:function(le,oe,re,G,se){var he=this;return le.forEach(function(Ie){he.processors[Ie]&&(oe=he.processors[Ie].process(oe,re,G,se))}),oe}};function st(me,le){var oe=Object.keys(me);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(me);le&&(re=re.filter(function(G){return Object.getOwnPropertyDescriptor(me,G).enumerable})),oe.push.apply(oe,re)}return oe}function Oe(me){for(var le=1;le<arguments.length;le++){var oe=arguments[le]!=null?arguments[le]:{};le%2?st(Object(oe),!0).forEach(function(re){W.default(me,re,oe[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(oe)):st(Object(oe)).forEach(function(re){Object.defineProperty(me,re,Object.getOwnPropertyDescriptor(oe,re))})}return me}function Tt(me){var le=yn();return function(){var re=L.default(me),G;if(le){var se=L.default(this).constructor;G=Reflect.construct(re,arguments,se)}else G=re.apply(this,arguments);return C.default(this,G)}}function yn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var St={},de=function(me){$.default(oe,me);var le=Tt(oe);function oe(re){var G,se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return w.default(this,oe),G=le.call(this),Z&&te.call(P.default(G)),J(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],re,P.default(G)),G.options=se,G.options.keySeparator===void 0&&(G.options.keySeparator="."),G.logger=q.create("translator"),G}return E.default(oe,[{key:"changeLanguage",value:function(G){G&&(this.language=G)}},{key:"exists",value:function(G){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(G==null)return!1;var he=this.resolve(G,se);return he&&he.res!==void 0}},{key:"extractFromKey",value:function(G,se){var he=se.nsSeparator!==void 0?se.nsSeparator:this.options.nsSeparator;he===void 0&&(he=":");var Ie=se.keySeparator!==void 0?se.keySeparator:this.options.keySeparator,Ce=se.ns||this.options.defaultNS||[],He=he&&G.indexOf(he)>-1,Xe=!this.options.userDefinedKeySeparator&&!se.keySeparator&&!this.options.userDefinedNsSeparator&&!se.nsSeparator&&!Ne(G,he,Ie);if(He&&!Xe){var Fe=G.match(this.interpolator.nestingRegexp);if(Fe&&Fe.length>0)return{key:G,namespaces:Ce};var Se=G.split(he);(he!==Ie||he===Ie&&this.options.ns.indexOf(Se[0])>-1)&&(Ce=Se.shift()),G=Se.join(Ie)}return typeof Ce=="string"&&(Ce=[Ce]),{key:G,namespaces:Ce}}},{key:"translate",value:function(G,se,he){var Ie=this;if(b.default(se)!=="object"&&this.options.overloadTranslationOptionHandler&&(se=this.options.overloadTranslationOptionHandler(arguments)),se||(se={}),G==null)return"";Array.isArray(G)||(G=[String(G)]);var Ce=se.returnDetails!==void 0?se.returnDetails:this.options.returnDetails,He=se.keySeparator!==void 0?se.keySeparator:this.options.keySeparator,Xe=this.extractFromKey(G[G.length-1],se),Fe=Xe.key,Se=Xe.namespaces,ct=Se[Se.length-1],Wt=se.lng||this.language,Ct=se.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(Wt&&Wt.toLowerCase()==="cimode"){if(Ct){var Bt=se.nsSeparator||this.options.nsSeparator;return Ce?(pt.res="".concat(ct).concat(Bt).concat(Fe),pt):"".concat(ct).concat(Bt).concat(Fe)}return Ce?(pt.res=Fe,pt):Fe}var pt=this.resolve(G,se),bt=pt&&pt.res,fn=pt&&pt.usedKey||Fe,cn=pt&&pt.exactUsedKey||Fe,Pn=Object.prototype.toString.apply(bt),Tn=["[object Number]","[object Function]","[object RegExp]"],Vn=se.joinArrays!==void 0?se.joinArrays:this.options.joinArrays,Zt=!this.i18nFormat||this.i18nFormat.handleAsObject,$n=typeof bt!="string"&&typeof bt!="boolean"&&typeof bt!="number";if(Zt&&bt&&$n&&Tn.indexOf(Pn)<0&&!(typeof Vn=="string"&&Pn==="[object Array]")){if(!se.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var qt=this.options.returnedObjectHandler?this.options.returnedObjectHandler(fn,bt,Oe(Oe({},se),{},{ns:Se})):"key '".concat(Fe," (").concat(this.language,")' returned an object instead of string.");return Ce?(pt.res=qt,pt):qt}if(He){var Rn=Pn==="[object Array]",Dt=Rn?[]:{},Sr=Rn?cn:fn;for(var xn in bt)if(Object.prototype.hasOwnProperty.call(bt,xn)){var Vt="".concat(Sr).concat(He).concat(xn);Dt[xn]=this.translate(Vt,Oe(Oe({},se),{joinArrays:!1,ns:Se})),Dt[xn]===Vt&&(Dt[xn]=bt[xn])}bt=Dt}}else if(Zt&&typeof Vn=="string"&&Pn==="[object Array]")bt=bt.join(Vn),bt&&(bt=this.extendTranslation(bt,G,se,he));else{var Cn=!1,cr=!1,Er=se.count!==void 0&&typeof se.count!="string",Ge=oe.hasDefaultValue(se),Ht=Er?this.pluralResolver.getSuffix(Wt,se.count,se):"",zt=se["defaultValue".concat(Ht)]||se.defaultValue;!this.isValidLookup(bt)&&Ge&&(Cn=!0,bt=zt),this.isValidLookup(bt)||(cr=!0,bt=Fe);var Zn=se.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,Kr=Zn&&cr?void 0:bt,Mn=Ge&&zt!==bt&&this.options.updateMissing;if(cr||Cn||Mn){if(this.logger.log(Mn?"updateKey":"missingKey",Wt,ct,Fe,Mn?zt:bt),He){var Ar=this.resolve(Fe,Oe(Oe({},se),{},{keySeparator:!1}));Ar&&Ar.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var M=[],V=this.languageUtils.getFallbackCodes(this.options.fallbackLng,se.lng||this.language);if(this.options.saveMissingTo==="fallback"&&V&&V[0])for(var ye=0;ye<V.length;ye++)M.push(V[ye]);else this.options.saveMissingTo==="all"?M=this.languageUtils.toResolveHierarchy(se.lng||this.language):M.push(se.lng||this.language);var we=function(Ae,be,Ue){var Ye=Ge&&Ue!==bt?Ue:Kr;Ie.options.missingKeyHandler?Ie.options.missingKeyHandler(Ae,ct,be,Ye,Mn,se):Ie.backendConnector&&Ie.backendConnector.saveMissing&&Ie.backendConnector.saveMissing(Ae,ct,be,Ye,Mn,se),Ie.emit("missingKey",Ae,ct,be,bt)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Er?M.forEach(function(fe){Ie.pluralResolver.getSuffixes(fe,se).forEach(function(Ae){we([fe],Fe+Ae,se["defaultValue".concat(Ae)]||zt)})}):we(M,Fe,zt))}bt=this.extendTranslation(bt,G,se,pt,he),cr&&bt===Fe&&this.options.appendNamespaceToMissingKey&&(bt="".concat(ct,":").concat(Fe)),(cr||Cn)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?bt=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(ct,":").concat(Fe):Fe,Cn?bt:void 0):bt=this.options.parseMissingKeyHandler(bt))}return Ce?(pt.res=bt,pt):bt}},{key:"extendTranslation",value:function(G,se,he,Ie,Ce){var He=this;if(this.i18nFormat&&this.i18nFormat.parse)G=this.i18nFormat.parse(G,Oe(Oe({},this.options.interpolation.defaultVariables),he),Ie.usedLng,Ie.usedNS,Ie.usedKey,{resolved:Ie});else if(!he.skipInterpolation){he.interpolation&&this.interpolator.init(Oe(Oe({},he),{interpolation:Oe(Oe({},this.options.interpolation),he.interpolation)}));var Xe=typeof G=="string"&&(he&&he.interpolation&&he.interpolation.skipOnVariables!==void 0?he.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),Fe;if(Xe){var Se=G.match(this.interpolator.nestingRegexp);Fe=Se&&Se.length}var ct=he.replace&&typeof he.replace!="string"?he.replace:he;if(this.options.interpolation.defaultVariables&&(ct=Oe(Oe({},this.options.interpolation.defaultVariables),ct)),G=this.interpolator.interpolate(G,ct,he.lng||this.language,he),Xe){var Wt=G.match(this.interpolator.nestingRegexp),Ct=Wt&&Wt.length;Fe<Ct&&(he.nest=!1)}he.nest!==!1&&(G=this.interpolator.nest(G,function(){for(var bt=arguments.length,fn=new Array(bt),cn=0;cn<bt;cn++)fn[cn]=arguments[cn];return Ce&&Ce[0]===fn[0]&&!he.context?(He.logger.warn("It seems you are nesting recursively key: ".concat(fn[0]," in key: ").concat(se[0])),null):He.translate.apply(He,fn.concat([se]))},he)),he.interpolation&&this.interpolator.reset()}var Bt=he.postProcess||this.options.postProcess,pt=typeof Bt=="string"?[Bt]:Bt;return G!=null&&pt&&pt.length&&he.applyPostProcessor!==!1&&(G=tt.handle(pt,G,se,this.options&&this.options.postProcessPassResolved?Oe({i18nResolved:Ie},he):he,this)),G}},{key:"resolve",value:function(G){var se=this,he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ie,Ce,He,Xe,Fe;return typeof G=="string"&&(G=[G]),G.forEach(function(Se){if(!se.isValidLookup(Ie)){var ct=se.extractFromKey(Se,he),Wt=ct.key;Ce=Wt;var Ct=ct.namespaces;se.options.fallbackNS&&(Ct=Ct.concat(se.options.fallbackNS));var Bt=he.count!==void 0&&typeof he.count!="string",pt=Bt&&!he.ordinal&&he.count===0&&se.pluralResolver.shouldUseIntlApi(),bt=he.context!==void 0&&(typeof he.context=="string"||typeof he.context=="number")&&he.context!=="",fn=he.lngs?he.lngs:se.languageUtils.toResolveHierarchy(he.lng||se.language,he.fallbackLng);Ct.forEach(function(cn){se.isValidLookup(Ie)||(Fe=cn,!St["".concat(fn[0],"-").concat(cn)]&&se.utils&&se.utils.hasLoadedNamespace&&!se.utils.hasLoadedNamespace(Fe)&&(St["".concat(fn[0],"-").concat(cn)]=!0,se.logger.warn('key "'.concat(Ce,'" for languages "').concat(fn.join(", "),`" won't get resolved as namespace "`).concat(Fe,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),fn.forEach(function(Pn){if(!se.isValidLookup(Ie)){Xe=Pn;var Tn=[Wt];if(se.i18nFormat&&se.i18nFormat.addLookupKeys)se.i18nFormat.addLookupKeys(Tn,Wt,Pn,cn,he);else{var Vn;Bt&&(Vn=se.pluralResolver.getSuffix(Pn,he.count,he));var Zt="".concat(se.options.pluralSeparator,"zero");if(Bt&&(Tn.push(Wt+Vn),pt&&Tn.push(Wt+Zt)),bt){var $n="".concat(Wt).concat(se.options.contextSeparator).concat(he.context);Tn.push($n),Bt&&(Tn.push($n+Vn),pt&&Tn.push($n+Zt))}}for(var qt;qt=Tn.pop();)se.isValidLookup(Ie)||(He=qt,Ie=se.getResource(Pn,cn,qt,he))}}))})}}),{res:Ie,usedKey:Ce,exactUsedKey:He,usedLng:Xe,usedNS:Fe}}},{key:"isValidLookup",value:function(G){return G!==void 0&&!(!this.options.returnNull&&G===null)&&!(!this.options.returnEmptyString&&G==="")}},{key:"getResource",value:function(G,se,he){var Ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(G,se,he,Ie):this.resourceStore.getResource(G,se,he,Ie)}}],[{key:"hasDefaultValue",value:function(G){var se="defaultValue";for(var he in G)if(Object.prototype.hasOwnProperty.call(G,he)&&se===he.substring(0,se.length)&&G[he]!==void 0)return!0;return!1}}]),oe}(te);function U(me){return me.charAt(0).toUpperCase()+me.slice(1)}var H=function(){function me(le){w.default(this,me),this.options=le,this.supportedLngs=this.options.supportedLngs||!1,this.logger=q.create("languageUtils")}return E.default(me,[{key:"getScriptPartFromCode",value:function(oe){if(!oe||oe.indexOf("-")<0)return null;var re=oe.split("-");return re.length===2||(re.pop(),re[re.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(re.join("-"))}},{key:"getLanguagePartFromCode",value:function(oe){if(!oe||oe.indexOf("-")<0)return oe;var re=oe.split("-");return this.formatLanguageCode(re[0])}},{key:"formatLanguageCode",value:function(oe){if(typeof oe=="string"&&oe.indexOf("-")>-1){var re=["hans","hant","latn","cyrl","cans","mong","arab"],G=oe.split("-");return this.options.lowerCaseLng?G=G.map(function(se){return se.toLowerCase()}):G.length===2?(G[0]=G[0].toLowerCase(),G[1]=G[1].toUpperCase(),re.indexOf(G[1].toLowerCase())>-1&&(G[1]=U(G[1].toLowerCase()))):G.length===3&&(G[0]=G[0].toLowerCase(),G[1].length===2&&(G[1]=G[1].toUpperCase()),G[0]!=="sgn"&&G[2].length===2&&(G[2]=G[2].toUpperCase()),re.indexOf(G[1].toLowerCase())>-1&&(G[1]=U(G[1].toLowerCase())),re.indexOf(G[2].toLowerCase())>-1&&(G[2]=U(G[2].toLowerCase()))),G.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?oe.toLowerCase():oe}},{key:"isSupportedCode",value:function(oe){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(oe=this.getLanguagePartFromCode(oe)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(oe)>-1}},{key:"getBestMatchFromCodes",value:function(oe){var re=this;if(!oe)return null;var G;return oe.forEach(function(se){if(!G){var he=re.formatLanguageCode(se);(!re.options.supportedLngs||re.isSupportedCode(he))&&(G=he)}}),!G&&this.options.supportedLngs&&oe.forEach(function(se){if(!G){var he=re.getLanguagePartFromCode(se);if(re.isSupportedCode(he))return G=he;G=re.options.supportedLngs.find(function(Ie){if(Ie.indexOf(he)===0)return Ie})}}),G||(G=this.getFallbackCodes(this.options.fallbackLng)[0]),G}},{key:"getFallbackCodes",value:function(oe,re){if(!oe)return[];if(typeof oe=="function"&&(oe=oe(re)),typeof oe=="string"&&(oe=[oe]),Object.prototype.toString.apply(oe)==="[object Array]")return oe;if(!re)return oe.default||[];var G=oe[re];return G||(G=oe[this.getScriptPartFromCode(re)]),G||(G=oe[this.formatLanguageCode(re)]),G||(G=oe[this.getLanguagePartFromCode(re)]),G||(G=oe.default),G||[]}},{key:"toResolveHierarchy",value:function(oe,re){var G=this,se=this.getFallbackCodes(re||this.options.fallbackLng||[],oe),he=[],Ie=function(He){He&&(G.isSupportedCode(He)?he.push(He):G.logger.warn("rejecting language code not found in supportedLngs: ".concat(He)))};return typeof oe=="string"&&oe.indexOf("-")>-1?(this.options.load!=="languageOnly"&&Ie(this.formatLanguageCode(oe)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&Ie(this.getScriptPartFromCode(oe)),this.options.load!=="currentOnly"&&Ie(this.getLanguagePartFromCode(oe))):typeof oe=="string"&&Ie(this.formatLanguageCode(oe)),se.forEach(function(Ce){he.indexOf(Ce)<0&&Ie(G.formatLanguageCode(Ce))}),he}}]),me}(),pe=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_e={1:function(le){return Number(le>1)},2:function(le){return Number(le!=1)},3:function(le){return 0},4:function(le){return Number(le%10==1&&le%100!=11?0:le%10>=2&&le%10<=4&&(le%100<10||le%100>=20)?1:2)},5:function(le){return Number(le==0?0:le==1?1:le==2?2:le%100>=3&&le%100<=10?3:le%100>=11?4:5)},6:function(le){return Number(le==1?0:le>=2&&le<=4?1:2)},7:function(le){return Number(le==1?0:le%10>=2&&le%10<=4&&(le%100<10||le%100>=20)?1:2)},8:function(le){return Number(le==1?0:le==2?1:le!=8&&le!=11?2:3)},9:function(le){return Number(le>=2)},10:function(le){return Number(le==1?0:le==2?1:le<7?2:le<11?3:4)},11:function(le){return Number(le==1||le==11?0:le==2||le==12?1:le>2&&le<20?2:3)},12:function(le){return Number(le%10!=1||le%100==11)},13:function(le){return Number(le!==0)},14:function(le){return Number(le==1?0:le==2?1:le==3?2:3)},15:function(le){return Number(le%10==1&&le%100!=11?0:le%10>=2&&(le%100<10||le%100>=20)?1:2)},16:function(le){return Number(le%10==1&&le%100!=11?0:le!==0?1:2)},17:function(le){return Number(le==1||le%10==1&&le%100!=11?0:1)},18:function(le){return Number(le==0?0:le==1?1:2)},19:function(le){return Number(le==1?0:le==0||le%100>1&&le%100<11?1:le%100>10&&le%100<20?2:3)},20:function(le){return Number(le==1?0:le==0||le%100>0&&le%100<20?1:2)},21:function(le){return Number(le%100==1?1:le%100==2?2:le%100==3||le%100==4?3:0)},22:function(le){return Number(le==1?0:le==2?1:(le<0||le>10)&&le%10==0?2:3)}},De=["v1","v2","v3"],Be={zero:0,one:1,two:2,few:3,many:4,other:5};function Re(){var me={};return pe.forEach(function(le){le.lngs.forEach(function(oe){me[oe]={numbers:le.nr,plurals:_e[le.fc]}})}),me}var nt=function(){function me(le){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};w.default(this,me),this.languageUtils=le,this.options=oe,this.logger=q.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Re()}return E.default(me,[{key:"addRule",value:function(oe,re){this.rules[oe]=re}},{key:"getRule",value:function(oe){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(oe,{type:re.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[oe]||this.rules[this.languageUtils.getLanguagePartFromCode(oe)]}},{key:"needsPlural",value:function(oe){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G=this.getRule(oe,re);return this.shouldUseIntlApi()?G&&G.resolvedOptions().pluralCategories.length>1:G&&G.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(oe,re){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(oe,G).map(function(se){return"".concat(re).concat(se)})}},{key:"getSuffixes",value:function(oe){var re=this,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},se=this.getRule(oe,G);return se?this.shouldUseIntlApi()?se.resolvedOptions().pluralCategories.sort(function(he,Ie){return Be[he]-Be[Ie]}).map(function(he){return"".concat(re.options.prepend).concat(he)}):se.numbers.map(function(he){return re.getSuffix(oe,he,G)}):[]}},{key:"getSuffix",value:function(oe,re){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},se=this.getRule(oe,G);return se?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(se.select(re)):this.getSuffixRetroCompatible(se,re):(this.logger.warn("no plural rule found for: ".concat(oe)),"")}},{key:"getSuffixRetroCompatible",value:function(oe,re){var G=this,se=oe.noAbs?oe.plurals(re):oe.plurals(Math.abs(re)),he=oe.numbers[se];this.options.simplifyPluralSuffix&&oe.numbers.length===2&&oe.numbers[0]===1&&(he===2?he="plural":he===1&&(he=""));var Ie=function(){return G.options.prepend&&he.toString()?G.options.prepend+he.toString():he.toString()};return this.options.compatibilityJSON==="v1"?he===1?"":typeof he=="number"?"_plural_".concat(he.toString()):Ie():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&oe.numbers.length===2&&oe.numbers[0]===1?Ie():this.options.prepend&&se.toString()?this.options.prepend+se.toString():se.toString()}},{key:"shouldUseIntlApi",value:function(){return!De.includes(this.options.compatibilityJSON)}}]),me}();function It(me,le){var oe=Object.keys(me);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(me);le&&(re=re.filter(function(G){return Object.getOwnPropertyDescriptor(me,G).enumerable})),oe.push.apply(oe,re)}return oe}function Yt(me){for(var le=1;le<arguments.length;le++){var oe=arguments[le]!=null?arguments[le]:{};le%2?It(Object(oe),!0).forEach(function(re){W.default(me,re,oe[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(oe)):It(Object(oe)).forEach(function(re){Object.defineProperty(me,re,Object.getOwnPropertyDescriptor(oe,re))})}return me}var dt=function(){function me(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};w.default(this,me),this.logger=q.create("interpolator"),this.options=le,this.format=le.interpolation&&le.interpolation.format||function(oe){return oe},this.init(le)}return E.default(me,[{key:"init",value:function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};oe.interpolation||(oe.interpolation={escapeValue:!0});var re=oe.interpolation;this.escape=re.escape!==void 0?re.escape:A,this.escapeValue=re.escapeValue!==void 0?re.escapeValue:!0,this.useRawValueToEscape=re.useRawValueToEscape!==void 0?re.useRawValueToEscape:!1,this.prefix=re.prefix?z(re.prefix):re.prefixEscaped||"{{",this.suffix=re.suffix?z(re.suffix):re.suffixEscaped||"}}",this.formatSeparator=re.formatSeparator?re.formatSeparator:re.formatSeparator||",",this.unescapePrefix=re.unescapeSuffix?"":re.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":re.unescapeSuffix||"",this.nestingPrefix=re.nestingPrefix?z(re.nestingPrefix):re.nestingPrefixEscaped||z("$t("),this.nestingSuffix=re.nestingSuffix?z(re.nestingSuffix):re.nestingSuffixEscaped||z(")"),this.nestingOptionsSeparator=re.nestingOptionsSeparator?re.nestingOptionsSeparator:re.nestingOptionsSeparator||",",this.maxReplaces=re.maxReplaces?re.maxReplaces:1e3,this.alwaysFormat=re.alwaysFormat!==void 0?re.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var oe="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(oe,"g");var re="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(re,"g");var G="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(G,"g")}},{key:"interpolate",value:function(oe,re,G,se){var he=this,Ie,Ce,He,Xe=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function Fe(Bt){return Bt.replace(/\$/g,"$$$$")}var Se=function(pt){if(pt.indexOf(he.formatSeparator)<0){var bt=ee(re,Xe,pt);return he.alwaysFormat?he.format(bt,void 0,G,Yt(Yt(Yt({},se),re),{},{interpolationkey:pt})):bt}var fn=pt.split(he.formatSeparator),cn=fn.shift().trim(),Pn=fn.join(he.formatSeparator).trim();return he.format(ee(re,Xe,cn),Pn,G,Yt(Yt(Yt({},se),re),{},{interpolationkey:cn}))};this.resetRegExp();var ct=se&&se.missingInterpolationHandler||this.options.missingInterpolationHandler,Wt=se&&se.interpolation&&se.interpolation.skipOnVariables!==void 0?se.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,Ct=[{regex:this.regexpUnescape,safeValue:function(pt){return Fe(pt)}},{regex:this.regexp,safeValue:function(pt){return he.escapeValue?Fe(he.escape(pt)):Fe(pt)}}];return Ct.forEach(function(Bt){for(He=0;Ie=Bt.regex.exec(oe);){var pt=Ie[1].trim();if(Ce=Se(pt),Ce===void 0)if(typeof ct=="function"){var bt=ct(oe,Ie,se);Ce=typeof bt=="string"?bt:""}else if(se&&se.hasOwnProperty(pt))Ce="";else if(Wt){Ce=Ie[0];continue}else he.logger.warn("missed to pass in variable ".concat(pt," for interpolating ").concat(oe)),Ce="";else typeof Ce!="string"&&!he.useRawValueToEscape&&(Ce=ie(Ce));var fn=Bt.safeValue(Ce);if(oe=oe.replace(Ie[0],fn),Wt?(Bt.regex.lastIndex+=Ce.length,Bt.regex.lastIndex-=Ie[0].length):Bt.regex.lastIndex=0,He++,He>=he.maxReplaces)break}}),oe}},{key:"nest",value:function(oe,re){var G=this,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},he,Ie,Ce=Yt({},se);Ce.applyPostProcessor=!1,delete Ce.defaultValue;function He(ct,Wt){var Ct=this.nestingOptionsSeparator;if(ct.indexOf(Ct)<0)return ct;var Bt=ct.split(new RegExp("".concat(Ct,"[ ]*{"))),pt="{".concat(Bt[1]);ct=Bt[0],pt=this.interpolate(pt,Ce);var bt=pt.match(/'/g),fn=pt.match(/"/g);(bt&&bt.length%2===0&&!fn||fn.length%2!==0)&&(pt=pt.replace(/'/g,'"'));try{Ce=JSON.parse(pt),Wt&&(Ce=Yt(Yt({},Wt),Ce))}catch(cn){return this.logger.warn("failed parsing options string in nesting for key ".concat(ct),cn),"".concat(ct).concat(Ct).concat(pt)}return delete Ce.defaultValue,ct}for(;he=this.nestingRegexp.exec(oe);){var Xe=[],Fe=!1;if(he[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(he[1])){var Se=he[1].split(this.formatSeparator).map(function(ct){return ct.trim()});he[1]=Se.shift(),Xe=Se,Fe=!0}if(Ie=re(He.call(this,he[1].trim(),Ce),Ce),Ie&&he[0]===oe&&typeof Ie!="string")return Ie;typeof Ie!="string"&&(Ie=ie(Ie)),Ie||(this.logger.warn("missed to resolve ".concat(he[1]," for nesting ").concat(oe)),Ie=""),Fe&&(Ie=Xe.reduce(function(ct,Wt){return G.format(ct,Wt,se.lng,Yt(Yt({},se),{},{interpolationkey:he[1].trim()}))},Ie.trim())),oe=oe.replace(he[0],Ie),this.regexp.lastIndex=0}return oe}}]),me}();function Kt(me,le){var oe=Object.keys(me);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(me);le&&(re=re.filter(function(G){return Object.getOwnPropertyDescriptor(me,G).enumerable})),oe.push.apply(oe,re)}return oe}function ke(me){for(var le=1;le<arguments.length;le++){var oe=arguments[le]!=null?arguments[le]:{};le%2?Kt(Object(oe),!0).forEach(function(re){W.default(me,re,oe[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(oe)):Kt(Object(oe)).forEach(function(re){Object.defineProperty(me,re,Object.getOwnPropertyDescriptor(oe,re))})}return me}function rn(me){var le=me.toLowerCase().trim(),oe={};if(me.indexOf("(")>-1){var re=me.split("(");le=re[0].toLowerCase().trim();var G=re[1].substring(0,re[1].length-1);if(le==="currency"&&G.indexOf(":")<0)oe.currency||(oe.currency=G.trim());else if(le==="relativetime"&&G.indexOf(":")<0)oe.range||(oe.range=G.trim());else{var se=G.split(";");se.forEach(function(he){if(he){var Ie=he.split(":"),Ce=Y.default(Ie),He=Ce[0],Xe=Ce.slice(1),Fe=Xe.join(":").trim().replace(/^'+|'+$/g,"");oe[He.trim()]||(oe[He.trim()]=Fe),Fe==="false"&&(oe[He.trim()]=!1),Fe==="true"&&(oe[He.trim()]=!0),isNaN(Fe)||(oe[He.trim()]=parseInt(Fe,10))}})}}return{formatName:le,formatOptions:oe}}function nn(me){var le={};return function(re,G,se){var he=G+JSON.stringify(se),Ie=le[he];return Ie||(Ie=me(G,se),le[he]=Ie),Ie(re)}}var Ot=function(){function me(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};w.default(this,me),this.logger=q.create("formatter"),this.options=le,this.formats={number:nn(function(oe,re){var G=new Intl.NumberFormat(oe,re);return function(se){return G.format(se)}}),currency:nn(function(oe,re){var G=new Intl.NumberFormat(oe,ke(ke({},re),{},{style:"currency"}));return function(se){return G.format(se)}}),datetime:nn(function(oe,re){var G=new Intl.DateTimeFormat(oe,ke({},re));return function(se){return G.format(se)}}),relativetime:nn(function(oe,re){var G=new Intl.RelativeTimeFormat(oe,ke({},re));return function(se){return G.format(se,re.range||"day")}}),list:nn(function(oe,re){var G=new Intl.ListFormat(oe,ke({},re));return function(se){return G.format(se)}})},this.init(le)}return E.default(me,[{key:"init",value:function(oe){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},G=re.interpolation;this.formatSeparator=G.formatSeparator?G.formatSeparator:G.formatSeparator||","}},{key:"add",value:function(oe,re){this.formats[oe.toLowerCase().trim()]=re}},{key:"addCached",value:function(oe,re){this.formats[oe.toLowerCase().trim()]=nn(re)}},{key:"format",value:function(oe,re,G,se){var he=this,Ie=re.split(this.formatSeparator),Ce=Ie.reduce(function(He,Xe){var Fe=rn(Xe),Se=Fe.formatName,ct=Fe.formatOptions;if(he.formats[Se]){var Wt=He;try{var Ct=se&&se.formatParams&&se.formatParams[se.interpolationkey]||{},Bt=Ct.locale||Ct.lng||se.locale||se.lng||G;Wt=he.formats[Se](He,Bt,ke(ke(ke({},ct),se),Ct))}catch(pt){he.logger.warn(pt)}return Wt}else he.logger.warn("there was no format function for ".concat(Se));return He},oe);return Ce}}]),me}();function ft(me,le){var oe=Object.keys(me);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(me);le&&(re=re.filter(function(G){return Object.getOwnPropertyDescriptor(me,G).enumerable})),oe.push.apply(oe,re)}return oe}function Ut(me){for(var le=1;le<arguments.length;le++){var oe=arguments[le]!=null?arguments[le]:{};le%2?ft(Object(oe),!0).forEach(function(re){W.default(me,re,oe[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(oe)):ft(Object(oe)).forEach(function(re){Object.defineProperty(me,re,Object.getOwnPropertyDescriptor(oe,re))})}return me}function dr(me){var le=vn();return function(){var re=L.default(me),G;if(le){var se=L.default(this).constructor;G=Reflect.construct(re,arguments,se)}else G=re.apply(this,arguments);return C.default(this,G)}}function vn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ln(me,le){me.pending[le]!==void 0&&(delete me.pending[le],me.pendingCount--)}var vr=function(me){$.default(oe,me);var le=dr(oe);function oe(re,G,se){var he,Ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return w.default(this,oe),he=le.call(this),Z&&te.call(P.default(he)),he.backend=re,he.store=G,he.services=se,he.languageUtils=se.languageUtils,he.options=Ie,he.logger=q.create("backendConnector"),he.waitingReads=[],he.maxParallelReads=Ie.maxParallelReads||10,he.readingCalls=0,he.maxRetries=Ie.maxRetries>=0?Ie.maxRetries:5,he.retryTimeout=Ie.retryTimeout>=1?Ie.retryTimeout:350,he.state={},he.queue=[],he.backend&&he.backend.init&&he.backend.init(se,Ie.backend,Ie),he}return E.default(oe,[{key:"queueLoad",value:function(G,se,he,Ie){var Ce=this,He={},Xe={},Fe={},Se={};return G.forEach(function(ct){var Wt=!0;se.forEach(function(Ct){var Bt="".concat(ct,"|").concat(Ct);!he.reload&&Ce.store.hasResourceBundle(ct,Ct)?Ce.state[Bt]=2:Ce.state[Bt]<0||(Ce.state[Bt]===1?Xe[Bt]===void 0&&(Xe[Bt]=!0):(Ce.state[Bt]=1,Wt=!1,Xe[Bt]===void 0&&(Xe[Bt]=!0),He[Bt]===void 0&&(He[Bt]=!0),Se[Ct]===void 0&&(Se[Ct]=!0)))}),Wt||(Fe[ct]=!0)}),(Object.keys(He).length||Object.keys(Xe).length)&&this.queue.push({pending:Xe,pendingCount:Object.keys(Xe).length,loaded:{},errors:[],callback:Ie}),{toLoad:Object.keys(He),pending:Object.keys(Xe),toLoadLanguages:Object.keys(Fe),toLoadNamespaces:Object.keys(Se)}}},{key:"loaded",value:function(G,se,he){var Ie=G.split("|"),Ce=Ie[0],He=Ie[1];se&&this.emit("failedLoading",Ce,He,se),he&&this.store.addResourceBundle(Ce,He,he),this.state[G]=se?-1:2;var Xe={};this.queue.forEach(function(Fe){R(Fe.loaded,[Ce],He),ln(Fe,G),se&&Fe.errors.push(se),Fe.pendingCount===0&&!Fe.done&&(Object.keys(Fe.loaded).forEach(function(Se){Xe[Se]||(Xe[Se]={});var ct=Fe.loaded[Se];ct.length&&ct.forEach(function(Wt){Xe[Se][Wt]===void 0&&(Xe[Se][Wt]=!0)})}),Fe.done=!0,Fe.errors.length?Fe.callback(Fe.errors):Fe.callback())}),this.emit("loaded",Xe),this.queue=this.queue.filter(function(Fe){return!Fe.done})}},{key:"read",value:function(G,se,he){var Ie=this,Ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,He=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,Xe=arguments.length>5?arguments[5]:void 0;if(!G.length)return Xe(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:G,ns:se,fcName:he,tried:Ce,wait:He,callback:Xe});return}return this.readingCalls++,this.backend[he](G,se,function(Fe,Se){if(Ie.readingCalls--,Ie.waitingReads.length>0){var ct=Ie.waitingReads.shift();Ie.read(ct.lng,ct.ns,ct.fcName,ct.tried,ct.wait,ct.callback)}if(Fe&&Se&&Ce<Ie.maxRetries){setTimeout(function(){Ie.read.call(Ie,G,se,he,Ce+1,He*2,Xe)},He);return}Xe(Fe,Se)})}},{key:"prepareLoading",value:function(G,se){var he=this,Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ce=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),Ce&&Ce();typeof G=="string"&&(G=this.languageUtils.toResolveHierarchy(G)),typeof se=="string"&&(se=[se]);var He=this.queueLoad(G,se,Ie,Ce);if(!He.toLoad.length)return He.pending.length||Ce(),null;He.toLoad.forEach(function(Xe){he.loadOne(Xe)})}},{key:"load",value:function(G,se,he){this.prepareLoading(G,se,{},he)}},{key:"reload",value:function(G,se,he){this.prepareLoading(G,se,{reload:!0},he)}},{key:"loadOne",value:function(G){var se=this,he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Ie=G.split("|"),Ce=Ie[0],He=Ie[1];this.read(Ce,He,"read",void 0,void 0,function(Xe,Fe){Xe&&se.logger.warn("".concat(he,"loading namespace ").concat(He," for language ").concat(Ce," failed"),Xe),!Xe&&Fe&&se.logger.log("".concat(he,"loaded namespace ").concat(He," for language ").concat(Ce),Fe),se.loaded(G,Xe,Fe)})}},{key:"saveMissing",value:function(G,se,he,Ie,Ce){var He=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(se)){this.logger.warn('did not save key "'.concat(he,'" as the namespace "').concat(se,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}he==null||he===""||(this.backend&&this.backend.create&&this.backend.create(G,se,he,Ie,null,Ut(Ut({},He),{},{isUpdate:Ce})),!(!G||!G[0])&&this.store.addResource(G[0],se,he,Ie))}}]),oe}(te);function un(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(le){var oe={};if(b.default(le[1])==="object"&&(oe=le[1]),typeof le[1]=="string"&&(oe.defaultValue=le[1]),typeof le[2]=="string"&&(oe.tDescription=le[2]),b.default(le[2])==="object"||b.default(le[3])==="object"){var re=le[3]||le[2];Object.keys(re).forEach(function(G){oe[G]=re[G]})}return oe},interpolation:{escapeValue:!0,format:function(le,oe,re,G){return le},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Lt(me){return typeof me.ns=="string"&&(me.ns=[me.ns]),typeof me.fallbackLng=="string"&&(me.fallbackLng=[me.fallbackLng]),typeof me.fallbackNS=="string"&&(me.fallbackNS=[me.fallbackNS]),me.supportedLngs&&me.supportedLngs.indexOf("cimode")<0&&(me.supportedLngs=me.supportedLngs.concat(["cimode"])),me}function En(me,le){var oe=Object.keys(me);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(me);le&&(re=re.filter(function(G){return Object.getOwnPropertyDescriptor(me,G).enumerable})),oe.push.apply(oe,re)}return oe}function ut(me){for(var le=1;le<arguments.length;le++){var oe=arguments[le]!=null?arguments[le]:{};le%2?En(Object(oe),!0).forEach(function(re){W.default(me,re,oe[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(oe)):En(Object(oe)).forEach(function(re){Object.defineProperty(me,re,Object.getOwnPropertyDescriptor(oe,re))})}return me}function Ke(me){var le=At();return function(){var re=L.default(me),G;if(le){var se=L.default(this).constructor;G=Reflect.construct(re,arguments,se)}else G=re.apply(this,arguments);return C.default(this,G)}}function At(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dn(){}function ht(me){var le=Object.getOwnPropertyNames(Object.getPrototypeOf(me));le.forEach(function(oe){typeof me[oe]=="function"&&(me[oe]=me[oe].bind(me))})}var Bn=function(me){$.default(oe,me);var le=Ke(oe);function oe(){var re,G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},se=arguments.length>1?arguments[1]:void 0;if(w.default(this,oe),re=le.call(this),Z&&te.call(P.default(re)),re.options=Lt(G),re.services={},re.logger=q,re.modules={external:[]},ht(P.default(re)),se&&!re.isInitialized&&!G.isClone){if(!re.options.initImmediate)return re.init(G,se),C.default(re,P.default(re));setTimeout(function(){re.init(G,se)},0)}return re}return E.default(oe,[{key:"init",value:function(){var G=this,se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},he=arguments.length>1?arguments[1]:void 0;typeof se=="function"&&(he=se,se={}),!se.defaultNS&&se.defaultNS!==!1&&se.ns&&(typeof se.ns=="string"?se.defaultNS=se.ns:se.ns.indexOf("translation")<0&&(se.defaultNS=se.ns[0]));var Ie=un();this.options=ut(ut(ut({},Ie),this.options),Lt(se)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=ut(ut({},Ie.interpolation),this.options.interpolation)),se.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=se.keySeparator),se.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=se.nsSeparator);function Ce(pt){return pt?typeof pt=="function"?new pt:pt:null}if(!this.options.isClone){this.modules.logger?q.init(Ce(this.modules.logger),this.options):q.init(null,this.options);var He;this.modules.formatter?He=this.modules.formatter:typeof Intl<"u"&&(He=Ot);var Xe=new H(this.options);this.store=new Qe(this.options.resources,this.options);var Fe=this.services;Fe.logger=q,Fe.resourceStore=this.store,Fe.languageUtils=Xe,Fe.pluralResolver=new nt(Xe,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),He&&(!this.options.interpolation.format||this.options.interpolation.format===Ie.interpolation.format)&&(Fe.formatter=Ce(He),Fe.formatter.init(Fe,this.options),this.options.interpolation.format=Fe.formatter.format.bind(Fe.formatter)),Fe.interpolator=new dt(this.options),Fe.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},Fe.backendConnector=new vr(Ce(this.modules.backend),Fe.resourceStore,Fe,this.options),Fe.backendConnector.on("*",function(pt){for(var bt=arguments.length,fn=new Array(bt>1?bt-1:0),cn=1;cn<bt;cn++)fn[cn-1]=arguments[cn];G.emit.apply(G,[pt].concat(fn))}),this.modules.languageDetector&&(Fe.languageDetector=Ce(this.modules.languageDetector),Fe.languageDetector.init(Fe,this.options.detection,this.options)),this.modules.i18nFormat&&(Fe.i18nFormat=Ce(this.modules.i18nFormat),Fe.i18nFormat.init&&Fe.i18nFormat.init(this)),this.translator=new de(this.services,this.options),this.translator.on("*",function(pt){for(var bt=arguments.length,fn=new Array(bt>1?bt-1:0),cn=1;cn<bt;cn++)fn[cn-1]=arguments[cn];G.emit.apply(G,[pt].concat(fn))}),this.modules.external.forEach(function(pt){pt.init&&pt.init(G)})}if(this.format=this.options.interpolation.format,he||(he=dn),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var Se=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);Se.length>0&&Se[0]!=="dev"&&(this.options.lng=Se[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var ct=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];ct.forEach(function(pt){G[pt]=function(){var bt;return(bt=G.store)[pt].apply(bt,arguments)}});var Wt=["addResource","addResources","addResourceBundle","removeResourceBundle"];Wt.forEach(function(pt){G[pt]=function(){var bt;return(bt=G.store)[pt].apply(bt,arguments),G}});var Ct=Q(),Bt=function(){var bt=function(cn,Pn){G.isInitialized&&!G.initializedStoreOnce&&G.logger.warn("init: i18next is already initialized. You should call init just once!"),G.isInitialized=!0,G.options.isClone||G.logger.log("initialized",G.options),G.emit("initialized",G.options),Ct.resolve(Pn),he(cn,Pn)};if(G.languages&&G.options.compatibilityAPI!=="v1"&&!G.isInitialized)return bt(null,G.t.bind(G));G.changeLanguage(G.options.lng,bt)};return this.options.resources||!this.options.initImmediate?Bt():setTimeout(Bt,0),Ct}},{key:"loadResources",value:function(G){var se=this,he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dn,Ie=he,Ce=typeof G=="string"?G:this.language;if(typeof G=="function"&&(Ie=G),!this.options.resources||this.options.partialBundledLanguages){if(Ce&&Ce.toLowerCase()==="cimode")return Ie();var He=[],Xe=function(ct){if(ct){var Wt=se.services.languageUtils.toResolveHierarchy(ct);Wt.forEach(function(Ct){He.indexOf(Ct)<0&&He.push(Ct)})}};if(Ce)Xe(Ce);else{var Fe=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);Fe.forEach(function(Se){return Xe(Se)})}this.options.preload&&this.options.preload.forEach(function(Se){return Xe(Se)}),this.services.backendConnector.load(He,this.options.ns,function(Se){!Se&&!se.resolvedLanguage&&se.language&&se.setResolvedLanguage(se.language),Ie(Se)})}else Ie(null)}},{key:"reloadResources",value:function(G,se,he){var Ie=Q();return G||(G=this.languages),se||(se=this.options.ns),he||(he=dn),this.services.backendConnector.reload(G,se,function(Ce){Ie.resolve(),he(Ce)}),Ie}},{key:"use",value:function(G){if(!G)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!G.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return G.type==="backend"&&(this.modules.backend=G),(G.type==="logger"||G.log&&G.warn&&G.error)&&(this.modules.logger=G),G.type==="languageDetector"&&(this.modules.languageDetector=G),G.type==="i18nFormat"&&(this.modules.i18nFormat=G),G.type==="postProcessor"&&tt.addPostProcessor(G),G.type==="formatter"&&(this.modules.formatter=G),G.type==="3rdParty"&&this.modules.external.push(G),this}},{key:"setResolvedLanguage",value:function(G){if(!(!G||!this.languages)&&!(["cimode","dev"].indexOf(G)>-1))for(var se=0;se<this.languages.length;se++){var he=this.languages[se];if(!(["cimode","dev"].indexOf(he)>-1)&&this.store.hasLanguageSomeTranslations(he)){this.resolvedLanguage=he;break}}}},{key:"changeLanguage",value:function(G,se){var he=this;this.isLanguageChangingTo=G;var Ie=Q();this.emit("languageChanging",G);var Ce=function(Se){he.language=Se,he.languages=he.services.languageUtils.toResolveHierarchy(Se),he.resolvedLanguage=void 0,he.setResolvedLanguage(Se)},He=function(Se,ct){ct?(Ce(ct),he.translator.changeLanguage(ct),he.isLanguageChangingTo=void 0,he.emit("languageChanged",ct),he.logger.log("languageChanged",ct)):he.isLanguageChangingTo=void 0,Ie.resolve(function(){return he.t.apply(he,arguments)}),se&&se(Se,function(){return he.t.apply(he,arguments)})},Xe=function(Se){!G&&!Se&&he.services.languageDetector&&(Se=[]);var ct=typeof Se=="string"?Se:he.services.languageUtils.getBestMatchFromCodes(Se);ct&&(he.language||Ce(ct),he.translator.language||he.translator.changeLanguage(ct),he.services.languageDetector&&he.services.languageDetector.cacheUserLanguage(ct)),he.loadResources(ct,function(Wt){He(Wt,ct)})};return!G&&this.services.languageDetector&&!this.services.languageDetector.async?Xe(this.services.languageDetector.detect()):!G&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(Xe):Xe(G),Ie}},{key:"getFixedT",value:function(G,se,he){var Ie=this,Ce=function He(Xe,Fe){var Se;if(b.default(Fe)!=="object"){for(var ct=arguments.length,Wt=new Array(ct>2?ct-2:0),Ct=2;Ct<ct;Ct++)Wt[Ct-2]=arguments[Ct];Se=Ie.options.overloadTranslationOptionHandler([Xe,Fe].concat(Wt))}else Se=ut({},Fe);Se.lng=Se.lng||He.lng,Se.lngs=Se.lngs||He.lngs,Se.ns=Se.ns||He.ns,Se.keyPrefix=Se.keyPrefix||he||He.keyPrefix;var Bt=Ie.options.keySeparator||".",pt=Se.keyPrefix?"".concat(Se.keyPrefix).concat(Bt).concat(Xe):Xe;return Ie.t(pt,Se)};return typeof G=="string"?Ce.lng=G:Ce.lngs=G,Ce.ns=se,Ce.keyPrefix=he,Ce}},{key:"t",value:function(){var G;return this.translator&&(G=this.translator).translate.apply(G,arguments)}},{key:"exists",value:function(){var G;return this.translator&&(G=this.translator).exists.apply(G,arguments)}},{key:"setDefaultNamespace",value:function(G){this.options.defaultNS=G}},{key:"hasLoadedNamespace",value:function(G){var se=this,he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var Ie=this.resolvedLanguage||this.languages[0],Ce=this.options?this.options.fallbackLng:!1,He=this.languages[this.languages.length-1];if(Ie.toLowerCase()==="cimode")return!0;var Xe=function(ct,Wt){var Ct=se.services.backendConnector.state["".concat(ct,"|").concat(Wt)];return Ct===-1||Ct===2};if(he.precheck){var Fe=he.precheck(this,Xe);if(Fe!==void 0)return Fe}return!!(this.hasResourceBundle(Ie,G)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||Xe(Ie,G)&&(!Ce||Xe(He,G)))}},{key:"loadNamespaces",value:function(G,se){var he=this,Ie=Q();return this.options.ns?(typeof G=="string"&&(G=[G]),G.forEach(function(Ce){he.options.ns.indexOf(Ce)<0&&he.options.ns.push(Ce)}),this.loadResources(function(Ce){Ie.resolve(),se&&se(Ce)}),Ie):(se&&se(),Promise.resolve())}},{key:"loadLanguages",value:function(G,se){var he=Q();typeof G=="string"&&(G=[G]);var Ie=this.options.preload||[],Ce=G.filter(function(He){return Ie.indexOf(He)<0});return Ce.length?(this.options.preload=Ie.concat(Ce),this.loadResources(function(He){he.resolve(),se&&se(He)}),he):(se&&se(),Promise.resolve())}},{key:"dir",value:function(G){if(G||(G=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!G)return"rtl";var se=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"];return se.indexOf(this.services.languageUtils.getLanguagePartFromCode(G))>-1||G.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var G=this,se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dn,Ie=ut(ut(ut({},this.options),se),{isClone:!0}),Ce=new oe(Ie);(se.debug!==void 0||se.prefix!==void 0)&&(Ce.logger=Ce.logger.clone(se));var He=["store","services","language"];return He.forEach(function(Xe){Ce[Xe]=G[Xe]}),Ce.services=ut({},this.services),Ce.services.utils={hasLoadedNamespace:Ce.hasLoadedNamespace.bind(Ce)},Ce.translator=new de(Ce.services,Ce.options),Ce.translator.on("*",function(Xe){for(var Fe=arguments.length,Se=new Array(Fe>1?Fe-1:0),ct=1;ct<Fe;ct++)Se[ct-1]=arguments[ct];Ce.emit.apply(Ce,[Xe].concat(Se))}),Ce.init(Ie,he),Ce.translator.options=Ce.options,Ce.translator.backendConnector.services.utils={hasLoadedNamespace:Ce.hasLoadedNamespace.bind(Ce)},Ce}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),oe}(te);W.default(Bn,"createInstance",function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},le=arguments.length>1?arguments[1]:void 0;return new Bn(me,le)});var Mt=Bn.createInstance();return Mt.createInstance=Bn.createInstance,i18next=Mt,i18next}(function(n,e){(function(t,o){n.exports=o(requireSuncalc(),requireI18next())})(commonjsGlobal,function(t,o){function l(Qe){return Qe&&typeof Qe=="object"&&"default"in Qe?Qe:{default:Qe}}var d=l(t),h=l(o),g={PH:[{name:"Ao Nuevo",fixed_date:[1,1]},{name:"Da Nacional de la Memoria por la Verdad y la Justicia",fixed_date:[3,24]},{name:"Da del Veterano y de los Cados en la Guerra de Malvinas",fixed_date:[4,2]},{name:"Da del Trabajador",fixed_date:[5,1]},{name:"Da de la Revolucin de Mayo",fixed_date:[5,25]},{name:"Paso a la Inmortalidad del General Manuel Belgrano",fixed_date:[6,20]},{name:"Da de la Independencia",fixed_date:[7,9]},{name:"Inmaculada Concepcin de Mara",fixed_date:[12,8]},{name:"Navidad",fixed_date:[12,25]}]};g.PH;var m={PH:[{name:"Neujahrstag",fixed_date:[1,1]},{name:"Heilige Drei Knige",fixed_date:[1,6]},{name:"Ostermontag",variable_date:"easter",offset:1},{name:"Staatsfeiertag",fixed_date:[5,1]},{name:"Christi Himmelfahrt",variable_date:"easter",offset:39},{name:"Pfingstmontag",variable_date:"easter",offset:50},{name:"Fronleichnam",variable_date:"easter",offset:60},{name:"Mari Himmelfahrt",fixed_date:[8,15]},{name:"Nationalfeiertag",fixed_date:[10,26]},{name:"Allerheiligen",fixed_date:[11,1]},{name:"Mari Empfngnis",fixed_date:[12,8]},{name:"Christtag",fixed_date:[12,25]},{name:"Stefanitag",fixed_date:[12,26]}],SH:[{2017:[4,8,4,18],2018:[3,24,4,3],2019:[4,13,4,23],2020:[4,4,4,14],2021:[3,27,4,6],2022:[4,9,4,19],2023:[4,1,4,11],2024:[3,23,4,2],name:"Osterferien"},{2017:[6,3,6,6],2018:[5,19,5,22],2019:[6,8,6,11],2020:[5,30,6,2],2021:[5,22,5,25],2022:[6,4,6,7],2023:[5,57,5,30],2024:[5,18,5,21],name:"Pfingstferien"},{2016:[11,2],2017:[11,2],2018:[11,2],2019:[11,2],2020:[11,2],2021:[11,2],2022:[11,2],2023:[11,2],name:"Allerseelen"},{2016:[12,24,1,7],2017:[12,24,1,6],2018:[12,24,1,6],2019:[12,23,1,6],2020:[12,24,1,6],2021:[12,24,1,6],2022:[12,24,1,6],2023:[12,24,1,6],name:"Weihnachtsferien"}],Burgenland:{_state_code:1,SH:[{2016:[2,8,2,13],2017:[2,13,2,18],2018:[2,12,2,17],2019:[2,11,2,16],2020:[2,10,2,15],2021:[2,8,2,13],name:"Semesterferien"},{2016:[7,2,9,3],2017:[7,1,9,3],2018:[6,30,9,2],2019:[6,29,9,1],2020:[7,4,9,6],2021:[7,3,9,4],name:"Sommerferien"}]},Krnten:{_state_code:2,SH:[{2016:[2,8,2,13],2017:[2,13,2,18],2018:[2,12,2,17],2019:[2,11,2,16],2020:[2,10,2,15],2021:[2,8,2,13],name:"Semesterferien"},{2016:[7,9,9,10],2017:[7,8,9,10],2018:[7,7,9,9],2019:[7,6,9,8],2020:[7,11,9,13],2021:[7,10,9,11],name:"Sommerferien"}]},Niedersterreich:{_state_code:3,SH:[{2016:[2,1,2,6],2017:[2,6,2,11],2018:[2,5,2,10],2019:[2,4,2,9],2020:[2,3,2,8],2021:[2,1,2,6],name:"Semesterferien"},{2016:[7,2,9,3],2017:[7,1,9,3],2018:[6,30,9,2],2019:[6,29,9,1],2020:[7,4,9,6],2021:[7,3,9,4],name:"Sommerferien"}]},Obersterreich:{_state_code:4,SH:[{2016:[2,15,2,20],2017:[2,20,2,25],2018:[2,19,2,24],2019:[2,18,2,23],2020:[2,17,2,22],2021:[2,15,2,20],name:"Semesterferien"},{2016:[7,9,9,10],2017:[7,8,9,10],2018:[7,7,9,9],2019:[7,6,9,8],2020:[7,11,9,13],2021:[7,10,9,11],name:"Sommerferien"}]},Salzburg:{_state_code:5,SH:[{2016:[2,8,2,13],2017:[2,13,2,18],2018:[2,12,2,17],2019:[2,11,2,16],2020:[2,10,2,15],2021:[2,8,2,13],name:"Semesterferien"},{2016:[7,9,9,10],2017:[7,8,9,10],2018:[7,7,9,9],2019:[7,6,9,8],2020:[7,11,9,13],2021:[7,10,9,11],name:"Sommerferien"}]},Steiermark:{_state_code:6,SH:[{2016:[2,15,2,20],2017:[2,20,2,25],2018:[2,19,2,24],2019:[2,18,2,23],2020:[2,17,2,22],2021:[2,15,2,20],name:"Semesterferien"},{2016:[7,9,9,10],2017:[7,8,9,10],2018:[7,7,9,9],2019:[7,6,9,8],2020:[7,11,9,13],2021:[7,10,9,12],name:"Sommerferien"}]},Tirol:{_state_code:7,SH:[{2016:[2,8,2,13],2017:[2,13,2,18],2018:[2,12,2,17],2019:[2,11,2,16],2020:[2,10,2,15],2021:[2,8,2,13],name:"Semesterferien"},{2016:[7,9,9,10],2017:[7,8,9,10],2018:[7,7,9,9],2019:[7,6,9,8],2020:[7,11,9,13],2021:[7,10,9,11],name:"Sommerferien"}]},Vorarlberg:{_state_code:8,SH:[{2016:[2,15,2,20],2017:[2,13,2,18],2018:[2,5,2,10],2019:[2,11,2,16],2020:[2,10,2,15],2021:[2,8,2,13],name:"Semesterferien"},{2016:[7,9,9,10],2017:[7,8,9,10],2018:[7,7,9,9],2019:[7,6,9,8],2020:[7,11,9,13],2021:[7,10,9,11],name:"Sommerferien"}]},Wien:{_state_code:9,SH:[{2016:[2,1,2,6],2017:[2,6,2,11],2018:[2,5,2,10],2019:[2,4,2,9],2020:[2,3,2,8],2021:[2,1,2,6],name:"Semesterferien"},{2016:[7,2,9,3],2017:[7,1,9,3],2018:[6,30,9,2],2019:[6,29,9,1],2020:[7,4,9,6],2021:[7,3,9,4],name:"Sommerferien"}]}};m.PH,m.SH,m.Burgenland,m.Salzburg,m.Steiermark,m.Tirol,m.Vorarlberg,m.Wien;var y={PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}],"Australian Capital Territory":{_state_code:"act",PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Canberra Day",variable_date:"firstMarchMonday",offset:7},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Saturday",variable_date:"easter",offset:-1},{name:"Easter Sunday",variable_date:"easter"},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"Reconciliation Day",variable_date:"lastMayMonday"},{name:"Queens Birthday",variable_date:"firstJuneMonday",offset:7},{name:"Family and Community Day",variable_date:"lastSeptemberMonday"},{name:"Labour Day",variable_date:"firstOctoberMonday"},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},"New South Wales":{_state_code:"nsw",PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Saturday",variable_date:"easter",offset:-1},{name:"Easter Sunday",variable_date:"easter"},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"Queens Birthday",variable_date:"firstJuneMonday",offset:7},{name:"Labour Day",variable_date:"firstOctoberMonday"},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},"Northern Territory":{_state_code:"nt",PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Saturday",variable_date:"easter",offset:-1},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"May Day",variable_date:"firstMayMonday"},{name:"Queens Birthday",variable_date:"firstJuneMonday",offset:7},{name:"Picnic Day",variable_date:"firstAugustMonday"},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},Queensland:{_state_code:"qld",PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Saturday",variable_date:"easter",offset:-1},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"Labour Day",variable_date:"firstMayMonday"},{name:"Queens Birthday",variable_date:"firstOctoberMonday"},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},"South Australia":{_state_code:"sa",PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Adelaide Cup",variable_date:"firstMarchMonday",offset:7},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Saturday",variable_date:"easter",offset:-1},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"Queens Birthday",variable_date:"firstJuneMonday",offset:7},{name:"Labour Day",variable_date:"firstOctoberMonday"},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},Tasmania:{_state_code:"tas",PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Eight Hours Day",variable_date:"firstMarchMonday",offset:7},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"Queens Birthday",variable_date:"firstJuneMonday",offset:7},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},Victoria:{_state_code:"vic",PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Labour Day",variable_date:"firstMarchMonday",offset:7},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Saturday",variable_date:"easter",offset:-1},{name:"Easter Sunday",variable_date:"easter"},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"Queens Birthday",variable_date:"firstJuneMonday",offset:7},{name:"AFL Grand Final",variable_date:"lastSeptemberFriday"},{name:"Melbourne Cup",variable_date:"firstNovemberTuesday"},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},"Western Australia":{_state_code:"wa",PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Labour Day",variable_date:"firstMarchMonday"},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"Western Australia Day",variable_date:"firstJuneMonday"},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]}};y.PH,y.Queensland,y.Tasmania,y.Victoria;var b={PH:[{name:"Nieuwjaar - Jour de l'an",fixed_date:[1,1]},{name:"Paasmaandag - Lundi de Pques",variable_date:"easter",offset:1},{name:"Dag van de Arbeid - Fte du Travail",fixed_date:[5,1]},{name:"Onze-Lieve-Heer-Hemelvaart - Jeudi de l'Ascensionn",variable_date:"easter",offset:39},{name:"Pinkstermaandag - Lundi de Pentecte",variable_date:"easter",offset:50},{name:"Nationale feestdag van Belgi - Fte nationale",fixed_date:[7,21]},{name:"Onze-Lieve-Vrouw-Hemelvaart - Assomption",fixed_date:[8,15]},{name:"Allerheiligen - Toussaint",fixed_date:[11,1]},{name:"Wapenstilstand - Armistice",fixed_date:[11,11]},{name:"Kerstmis - Nol",fixed_date:[12,25]}],SH:[{2020:[2,24,3,1],2021:[2,15,2,21],2022:[2,28,3,6],2023:[2,20,2,26],name:"Krokusvakantie - Vacances de carnaval"},{2020:[4,6,4,19],2021:[4,5,4,18],2022:[4,4,4,18],2023:[4,3,4,16],name:"Paasvakantie - Vacances de pques"},{2020:[7,1,8,31],2021:[7,1,8,31],2022:[7,1,8,31],2023:[7,1,8,31],name:"Zomervakantie - Vacances d't"},{2019:[10,28,11,3],2020:[11,2,11,15],2021:[11,1,11,7],2022:[10,31,11,6],name:"Herfstvakantie - Vacances automne"},{2019:[12,23,1,5],2020:[12,21,1,3],2021:[12,27,1,9],2022:[12,26,1,8],name:"Kerstvakantie - Vacances de Nol"}]};b.PH,b.SH;var w={PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}],Acre:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Dia do evanglico",fixed_date:[1,23]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Alusivo ao Dia Internacional da Mulher",fixed_date:[3,8]},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Aniversrio do estado",fixed_date:[6,15]},{name:"Dia da Amaznia",fixed_date:[9,5]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Assinatura do Tratado de Petrpolis",fixed_date:[11,17]},{name:"Natal",fixed_date:[12,25]}]},Alagoas:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"So Joo",fixed_date:[6,24]},{name:"So Pedro",fixed_date:[6,29]},{name:"Independncia",fixed_date:[9,7]},{name:"Emancipao poltica",fixed_date:[9,16]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Morte de Zumbi dos Palmares",fixed_date:[11,20]},{name:"Natal",fixed_date:[12,25]}]},Amap:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Dia de So Jos",fixed_date:[3,19]},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Data Magna do estado",fixed_date:[9,13]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Amazonas:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Data Magna do estado",fixed_date:[9,5]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Dia da Conscincia Negra",fixed_date:[11,20]},{name:"Natal",fixed_date:[12,25]}]},Bahia:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Data magna do estado",fixed_date:[2,7]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Cear:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Data magna do estado",fixed_date:[3,25]},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},"Distrito Federal":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Dia do evanglico",fixed_date:[11,30]},{name:"Natal",fixed_date:[12,25]}]},"Esprito Santo":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Data magna do estado",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Gois:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Maranho:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Data magna do estado",fixed_date:[7,28]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},"Mato Grosso":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Dia da Conscincia Negra",fixed_date:[11,20]},{name:"Natal",fixed_date:[12,25]}]},"Mato Grosso do Sul":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Criao do estado",fixed_date:[10,11]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},"Minas Gerais":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Data magna do estado",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Par:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Data magna do estado",fixed_date:[8,15]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Paraba:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Homenagem a Joo Pessoa",fixed_date:[7,26]},{name:"Data magna do estado",fixed_date:[8,5]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Paran:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Data magna do estado",fixed_date:[12,19]},{name:"Natal",fixed_date:[12,25]}]},Pernambuco:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Data magna do estado",variable_date:"firstMarchSunday"},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Piau:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Data magna do estado",fixed_date:[10,19]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},"Rio de Janeiro":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Dia da Conscincia Negra",fixed_date:[11,20]},{name:"Natal",fixed_date:[12,25]}]},"Rio Grande do Norte":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"So Jorge",fixed_date:[4,23]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Mrtires de Cunha e Uruau",fixed_date:[10,3]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},"Rio Grande do Sul":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Proclamao da Repblica Rio-Grandense",fixed_date:[9,20]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Rondnia:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Data magna do estado",fixed_date:[1,4]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Dia do evanglico",fixed_date:[6,18]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Roraima:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Data magna do estado",fixed_date:[10,5]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},"Santa Catarina":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Data magna do estado",fixed_date:[8,11]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Santa Catarina de Alexandria",fixed_date:[11,25]},{name:"Natal",fixed_date:[12,25]}]},"So Paulo":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Data magna do estado",fixed_date:[7,9]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Sergipe:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Aniversrio de Aracaju",fixed_date:[3,17]},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"So Joo",fixed_date:[6,24]},{name:"Data magna do estado",fixed_date:[7,8]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Nossa Senhora da Conceio",fixed_date:[12,8]},{name:"Natal",fixed_date:[12,25]}]},Tocantins:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Autonomia do estado",fixed_date:[3,18]},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora da Natividade",fixed_date:[9,8]},{name:"Criao do estado",fixed_date:[10,5]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]}};w.PH,w.Acre,w.Alagoas,w.Amazonas,w.Bahia,w.Pernambuco,w.Roraima,w.Sergipe,w.Tocantins;var E={PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Canada Day",variable_date:"canadaDay"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Christmas Day",fixed_date:[12,25]}],Alberta:{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Alberta Family Day",variable_date:"firstFebruaryMonday",offset:14},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"Heritage Day",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},"British Columbia":{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Family Day",variable_date:"firstFebruaryMonday",offset:7},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"British Columbia Day",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]}]},Manitoba:{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Louis Riel Day",variable_date:"firstFebruaryMonday",offset:14},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"Civic Holiday",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]}]},"New Brunswick":{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"New Brunswick Day",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},"Newfoundland and Labrador":{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Saint Patrick's Day",fixed_date:[3,17]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Saint George's Day",fixed_date:[4,23]},{name:"Discovery Day",fixed_date:[6,24]},{name:"Memorial Day",fixed_date:[7,1]},{name:"Orangemen's Day",fixed_date:[7,12]},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Armistice Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]}]},"Northwest Territories":{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"National Aboriginal Day",fixed_date:[6,21]},{name:"Canada Day",variable_date:"canadaDay"},{name:"Civic Holiday",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]}]},"Nova Scotia":{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"Natal Day",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},Nunavut:{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"Nunavut Day",fixed_date:[7,9]},{name:"Civic Holiday",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]}]},Ontario:{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Family Day",variable_date:"firstFebruaryMonday",offset:14},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"August Civic Public Holiday",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},"Prince Edward Island":{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Islander Day",variable_date:"firstFebruaryMonday",offset:14},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"Civic Holiday",variable_date:"firstAugustMonday"},{name:"Gold Cup Parade Day",variable_date:"firstAugustMonday",offset:18},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},Quebec:{PH:[{name:"Jour de l'an",fixed_date:[1,1]},{name:"Vendredi saint",variable_date:"easter",offset:-2},{name:"Lundi de Pques",variable_date:"easter",offset:1},{name:"Journe nationale des patriotes",variable_date:"victoriaDay"},{name:"Fte nationale du Qubec",fixed_date:[6,24]},{name:"Fte du Canada",variable_date:"canadaDay"},{name:"Fte du Travail",variable_date:"firstSeptemberMonday"},{name:"Jour de l'Action de grce",variable_date:"firstOctoberMonday",offset:7},{name:"Nol",fixed_date:[12,25]}]},Saskatchewan:{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Family Day",variable_date:"firstFebruaryMonday",offset:14},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"Saskatchewan Day",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]}]},Yukon:{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Heritage Day",variable_date:"lastFebruarySunday",offset:-2},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"Discovery Day",variable_date:"firstAugustMonday",offset:14},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]}};E.PH,E.Alberta,E.Manitoba,E.Nunavut,E.Ontario,E.Quebec,E.Saskatchewan,E.Yukon;var P={PH:[{name:"Neujahrstag/Nouvel an/Capo d'anno",fixed_date:[1,1]},{name:"Berchtoldstag/2 janvier",fixed_date:[1,2],only_states:["Zrich","Bern","Luzern","Obwalden","Nidwalden","Glarus","Zug","Freiburg","Solothurn","Schaffhausen","Graubnden","Aargau","Thurgau","Waadt","Neuenburg","Genf","Jura","Sankt Gallen","Wallis"]},{name:"Heilige Drei Knige/Epifania",fixed_date:[1,6],only_states:["Uri","Schwyz","Graubnden","Tessin"]},{name:"Instauration de la Rpublique",fixed_date:[3,1],only_states:["Neuenburg"]},{name:"Josefstag/Saint-Joseph/San Giuseppe",fixed_date:[3,19],only_states:["Luzern","Uri","Schwyz","Nidwalden","Zug","Graubnden","Tessin","Wallis"]},{name:"Karfreitag/Vendredi saint",variable_date:"easter",offset:-2,only_states:["Zrich","Bern","Luzern","Uri","Schwyz","Obwalden","Nidwalden","Glarus","Zug","Freiburg","Solothurn","Basel-Stadt","Basel-Landschaft","Schaffhausen","Appenzell Ausserrhoden","Appenzell Innerrhoden","Sankt Gallen","Graubnden","Aargau","Thurgau","Waadt","Neuenburg","Genf","Jura"]},{name:"Ostermontag/Lundi de Pques/Lunedi di Pasqua",variable_date:"easter",offset:1,only_states:["Zrich","Bern","Luzern","Uri","Schwyz","Obwalden","Nidwalden","Glarus","Zug","Freiburg","Solothurn","Basel-Stadt","Basel-Landschaft","Schaffhausen","Appenzell Ausserrhoden","Appenzell Innerrhoden","Sankt Gallen","Graubnden","Aargau","Thurgau","Tessin","Waadt","Neuenburg","Genf","Jura","Wallis"]},{name:"Tag der Arbeit/Festa dei lavoratori",fixed_date:[5,1],only_states:["Zrich","Freiburg","Solothurn","Basel-Stadt","Basel-Landschaft","Schaffhausen","Aargau","Thurgau","Tessin","Neuenburg","Jura"]},{name:"Auffahrt/Ascension/Ascensione",variable_date:"easter",offset:39},{name:"Pfingstmontag/Lundi de Pentecte/Lunedi di Pentecoste",variable_date:"easter",offset:50,only_states:["Zrich","Bern","Luzern","Uri","Schwyz","Obwalden","Nidwalden","Glarus","Zug","Freiburg","Solothurn","Basel-Stadt","Basel-Landschaft","Schaffhausen","Appenzell Ausserrhoden","Appenzell Innerrhoden","Sankt Gallen","Graubnden","Aargau","Thurgau","Tessin","Waadt","Neuenburg","Genf","Jura","Wallis"]},{name:"Fronleichnam/Fte-Dieu/Corpus domini",variable_date:"easter",offset:60,only_states:["Luzern","Uri","Schwyz","Obwalden","Nidwalden","Zug","Freiburg","Solothurn","Basel-Landschaft","Appenzell Innerrhoden","Graubnden","Aargau","Tessin","Wallis","Neuenburg","Jura"]},{name:"Commmoration du plbiscite jurassien",fixed_date:[6,23],only_states:["Jura"]},{name:"San Pietro e Paolo",fixed_date:[6,29],only_states:["Tessin"]},{name:"Bundesfeiertag/Jour de la fte nationale/Giorno festivo federale",fixed_date:[8,1]},{name:"Mari Himmelfahrt/Assomption/Assunzione",fixed_date:[8,15],only_states:["Luzern","Uri","Schwyz","Obwalden","Nidwalden","Zug","Freiburg","Solothurn","Basel-Landschaft","Appenzell Innerrhoden","Graubnden","Aargau","Tessin","Wallis","Jura"]},{name:"Mauritiustag",fixed_date:[9,22],only_states:["Appenzell Innerrhoden"]},{name:"Bruderklausenfest",fixed_date:[9,25],only_states:["Obwalden"]},{name:"Allerheiligen/Toussaint/Ognissanti",fixed_date:[11,1],only_states:["Luzern","Uri","Schwyz","Obwalden","Nidwalden","Glarus","Zug","Freiburg","Solothurn","Appenzell Innerrhoden","Sankt Gallen","Graubnden","Aargau","Tessin","Wallis","Jura"]},{name:"Mari Empfngnis/Immacule Conception/Ognissanti",fixed_date:[12,8],only_states:["Luzern","Uri","Schwyz","Obwalden","Nidwalden","Zug","Freiburg","Solothurn","Appenzell Innerrhoden","Graubnden","Aargau","Tessin","Wallis"]},{name:"Weihnachtstag/Nol/Natale",fixed_date:[12,25]},{name:"Stephanstag/Saint-Etienne/Santo Stefano",fixed_date:[12,26],only_states:["Zrich","Bern","Luzern","Uri","Schwyz","Obwalden","Nidwalden","Glarus","Zug","Freiburg","Solothurn","Basel-Stadt","Basel-Landschaft","Schaffhausen","Appenzell Ausserrhoden","Appenzell Innerrhoden","Sankt Gallen","Graubnden","Aargau","Thurgau","Tessin","Wallis"]},{name:"Restauration de la Rpublique",fixed_date:[12,31],only_states:["Genf"]}],Aargau:{_state_code:"ag"},"Appenzell Ausserrhoden":{_state_code:"ar"},"Appenzell Innerrhoden":{_state_code:"ai"},"Basel-Landschaft":{_state_code:"bl"},"Basel-Stadt":{_state_code:"bs"},Bern:{_state_code:"be"},Freiburg:{_state_code:"fr"},Genf:{_state_code:"ge"},Glarus:{_state_code:"gl"},Graubnden:{_state_code:"gr"},Jura:{_state_code:"ju"},Luzern:{_state_code:"lu"},Neuenburg:{_state_code:"ne"},Nidwalden:{_state_code:"nw"},Obwalden:{_state_code:"ow"},Schaffhausen:{_state_code:"sh"},Schwyz:{_state_code:"sz"},Solothurn:{_state_code:"so"},"Sankt Gallen":{_state_code:"sg"},Tessin:{_state_code:"ti"},Thurgau:{_state_code:"tg"},Uri:{_state_code:"ur"},Waadt:{_state_code:"vd"},Wallis:{_state_code:"vs"},Zug:{_state_code:"zg"},Zrich:{_state_code:"zh"}};P.PH,P.Aargau,P.Bern,P.Freiburg,P.Genf,P.Glarus,P.Jura,P.Luzern,P.Neuenburg,P.Nidwalden,P.Obwalden,P.Schaffhausen,P.Schwyz,P.Solothurn,P.Tessin,P.Thurgau,P.Uri,P.Waadt,P.Wallis,P.Zug;var $={PH:[{name:"Fte du 1 janvier",fixed_date:[1,1]},{name:"Lundi de Pques",variable_date:"easter",offset:1},{name:"Fte du travail",fixed_date:[5,1]},{name:"Lendemain de la Fte du travail",variable_date:"nextMo-Sa01May"},{name:"Jour de lAscension",variable_date:"easter",offset:39},{name:"Lundi de la Pentecte",variable_date:"easter",offset:50},{name:"Fte nationale",fixed_date:[8,7]},{name:"Lendemain de la Fte nationale",variable_date:"nextMo-Sa07August"},{name:"Fte de lAssomption",fixed_date:[8,15]},{name:"Fte de la Toussaint",fixed_date:[11,1]},{name:"Journe Nationale de la Paix",fixed_date:[11,15]},{name:"Fte de Nol",fixed_date:[12,25]},{name:"Lendemain de la Fte de Nol",variable_date:"nextMo-Sa25December"}]};$.PH;var C={PH:[{name:"Den obnovy samostatnho eskho sttu",fixed_date:[1,1]},{name:"Velk ptek",variable_date:"easter",offset:-2},{name:"Velikonon pondl",variable_date:"easter",offset:1},{name:"Svtek prce",fixed_date:[5,1]},{name:"Den vtzstv",fixed_date:[5,8]},{name:"Den slovanskch vrozvst Cyrila a Metodje",fixed_date:[7,5]},{name:"Den uplen mistra Jana Husa",fixed_date:[7,6]},{name:"Den esk sttnosti",fixed_date:[9,28]},{name:"Den vzniku samostatnho eskoslovenskho sttu",fixed_date:[10,28]},{name:"Den boje za svobodu a demokracii",fixed_date:[11,17]},{name:"tdr den",fixed_date:[12,24]},{name:"1. svtek vnon",fixed_date:[12,25]},{name:"2. svtek vnon",fixed_date:[12,26]}]};C.PH;var L={PH:[{name:"Neujahrstag",fixed_date:[1,1]},{name:"Heilige Drei Knige",fixed_date:[1,6],only_states:["Baden-Wrttemberg","Bayern","Sachsen-Anhalt"]},{name:"Frauentag",fixed_date:[3,8],only_states:["Berlin"]},{name:"Tag der Arbeit",fixed_date:[5,1]},{name:"Karfreitag",variable_date:"easter",offset:-2},{name:"Ostersonntag",variable_date:"easter",only_states:["Brandenburg"]},{name:"Ostermontag",variable_date:"easter",offset:1},{name:"Christi Himmelfahrt",variable_date:"easter",offset:39},{name:"Pfingstsonntag",variable_date:"easter",offset:49,only_states:["Brandenburg"]},{name:"Pfingstmontag",variable_date:"easter",offset:50},{name:"Fronleichnam",variable_date:"easter",offset:60,only_states:["Baden-Wrttemberg","Bayern","Hessen","Nordrhein-Westfalen","Rheinland-Pfalz","Saarland"]},{name:"Mari Himmelfahrt",fixed_date:[8,15],only_states:["Saarland"]},{name:"Weltkindertag",fixed_date:[9,20],only_states:["Thringen"]},{name:"Tag der Deutschen Einheit",fixed_date:[10,3]},{name:"Reformationstag",fixed_date:[10,31],only_states:["Brandenburg","Bremen","Hamburg","Mecklenburg-Vorpommern","Niedersachsen","Sachsen","Sachsen-Anhalt","Schleswig-Holstein","Thringen"]},{name:"Allerheiligen",fixed_date:[11,1],only_states:["Baden-Wrttemberg","Bayern","Nordrhein-Westfalen","Rheinland-Pfalz","Saarland"]},{name:"Bu- und Bettag",variable_date:"nextWednesday16Nov",only_states:["Sachsen"]},{name:"1. Weihnachtstag",fixed_date:[12,25]},{name:"2. Weihnachtstag",fixed_date:[12,26]}],"Baden-Wrttemberg":{_state_code:"bw",SH:[{2012:[4,2,4,13],2013:[3,25,4,5],2014:[4,14,4,25],2015:[3,30,4,10],2016:[3,24,3,24,3,29,4,2],2017:[4,10,4,21],2018:[3,26,4,6],2019:[4,15,4,27],2020:[4,6,4,18],name:"Osterferien"},{2012:[5,29,6,9],2013:[5,21,6,1],2014:[6,10,6,21],2015:[5,26,6,6],2016:[5,17,5,28],2017:[6,6,6,16],2018:[5,22,6,2],2019:[6,11,6,21],2020:[6,2,6,13],name:"Pfingstferien"},{2012:[7,26,9,8],2013:[7,25,9,7],2014:[7,31,9,13],2015:[7,30,9,12],2016:[7,28,9,10],2017:[7,27,9,9],2018:[7,26,9,8],2019:[7,29,9,10],2020:[7,30,9,12],2021:[7,29,9,11],2022:[7,28,9,10],2023:[7,27,9,9],2024:[7,25,9,7],name:"Sommerferien"},{2012:[10,29,11,2],2013:[10,28,10,30],2014:[10,27,10,30],2015:[10,31,10,31,11,2,11,6],2016:[10,31,10,31,11,2,11,4],2017:[10,30,11,3],2018:[10,29,11,2],2019:[10,28,10,30],name:"Herbstferien"},{2011:[12,23,1,5],2012:[12,24,1,5],2013:[12,23,1,4],2014:[12,22,1,5],2015:[12,23,1,9],2016:[12,23,1,7],2017:[12,22,1,5],2018:[12,24,1,5],2019:[12,23,1,4],name:"Weihnachtsferien"}]},Bayern:{_state_code:"by",SH:[{2012:[2,20,2,24],2013:[2,11,2,15],2014:[3,3,3,7],2015:[2,16,2,20],2016:[2,8,2,12],2017:[2,27,3,3],2018:[2,12,2,16],2019:[3,4,3,8],2020:[2,24,2,28],2021:[2,15,2,19],2022:[2,28,3,4],2023:[2,20,2,24],2024:[2,12,2,16],name:"Winterferien"},{2012:[4,2,4,14],2013:[3,25,4,6],2014:[4,14,4,26],2015:[3,30,4,11],2016:[3,21,4,1],2017:[4,10,4,22],2018:[3,26,4,7],2019:[4,15,4,27],2020:[4,6,4,18],2021:[3,29,4,10],2022:[4,11,4,23],2023:[4,3,4,15],2024:[3,25,4,6],name:"Osterferien"},{2012:[5,29,6,9],2013:[5,21,5,31],2014:[6,10,6,21],2015:[5,26,6,5],2016:[5,17,5,28],2017:[6,6,6,16],2018:[5,22,6,2],2019:[6,11,6,21],2020:[6,2,6,13],2021:[5,25,6,4],2022:[6,7,6,18],2023:[5,30,6,9],2024:[5,21,6,1],name:"Pfingstferien"},{2012:[8,1,9,12],2013:[7,31,9,11],2014:[7,30,9,15],2015:[8,1,9,14],2016:[7,30,9,12],2017:[7,29,9,11],2018:[7,30,9,10],2019:[7,29,9,9],2020:[7,27,9,7],2021:[7,30,9,13],2022:[8,1,9,12],2023:[7,31,9,11],2024:[7,29,9,9],name:"Sommerferien"},{2012:[10,29,11,3],2013:[10,28,10,31],2014:[10,27,10,31,11,19,11,19],2015:[11,2,11,7,11,18,11,18],2016:[10,31,11,4,11,16,11,16],2017:[10,30,11,3,11,22,11,22],2018:[10,29,11,2,11,21,11,21],2019:[10,28,10,31,11,20,11,20],2020:[10,31,11,6,11,18,11,18],2021:[11,2,11,5,11,17,11,17],2022:[10,31,11,4,11,16,11,16],2023:[10,30,11,3,11,22,11,22],name:"Herbstferien"},{2011:[12,27,1,5],2012:[12,24,1,5],2013:[12,23,1,4],2014:[12,24,1,5],2015:[12,24,1,5],2016:[12,24,1,5],2017:[12,23,1,5],2018:[12,22,1,5],2019:[12,23,1,4],2020:[12,23,1,9],2021:[12,24,1,8],2022:[12,24,1,7],2023:[12,23,1,5],name:"Weihnachtsferien"}]},Berlin:{_state_code:"be",SH:[{2012:[1,30,2,4],2013:[2,4,2,9],2014:[2,3,2,8],2015:[2,2,2,7],2016:[2,1,2,6],2017:[1,30,2,3],2018:[2,5,2,10],2019:[2,4,2,9],2020:[2,3,2,8],2021:[2,1,2,6],2022:[1,29,2,5],2023:[1,30,2,4],2024:[2,5,2,10],name:"Winterferien"},{2012:[4,2,4,14,4,30,4,30],2013:[3,25,4,6],2014:[4,14,4,26,5,2,5,2],2015:[3,30,4,11],2016:[3,21,4,2],2017:[4,10,4,18],2018:[3,26,4,6],2019:[4,15,4,26],2020:[4,6,4,17],2021:[3,29,4,10],2022:[4,11,4,23],2023:[4,3,4,14],2024:[3,25,4,5],name:"Osterferien"},{2012:[5,18,5,18],2013:[5,10,5,10,5,21,5,21],2014:[5,30,5,30],2015:[5,15,5,15,5,26,5,26],2016:[5,6,5,6,5,17,5,18],2017:[5,24,5,24,5,26,5,26,6,6,6,9],2018:[4,30,4,30,5,11,5,11,5,22,5,22],2019:[5,31,5,31,6,11,6,11],2020:[5,22,5,22],2021:[5,14,5,14],2022:[5,27,5,27,6,7,6,7],2023:[5,19,5,19,5,30,5,30],2024:[5,10,5,10],name:"Pfingstferien"},{2012:[6,20,8,3],2013:[6,19,8,2],2014:[7,9,8,22],2015:[7,16,8,28],2016:[7,21,9,2],2017:[7,20,9,1],2018:[7,5,8,17],2019:[6,20,8,2],2020:[6,25,8,7],2021:[6,24,8,6],2022:[7,7,8,19],2023:[7,13,8,25],2024:[7,18,8,30],name:"Sommerferien"},{2012:[10,1,10,13],2013:[9,30,10,12],2014:[10,20,11,1],2015:[10,19,10,31],2016:[10,17,10,28],2017:[10,2,10,2,10,23,11,4],2018:[10,22,11,2],2019:[10,4,10,4,10,7,10,19],2020:[10,12,10,24],2021:[10,11,10,23],2022:[10,24,11,5],2023:[10,2,10,2,10,23,11,4],name:"Herbstferien"},{2011:[12,23,1,3],2012:[12,24,1,4],2013:[12,23,1,3],2014:[12,22,1,2],2015:[12,23,1,2],2016:[12,23,1,3],2017:[12,21,1,2],2018:[12,22,1,5],2019:[12,23,1,4],2020:[12,21,1,2],2021:[12,23,12,31],2022:[12,22,1,2],2023:[12,23,1,5],name:"Weihnachtsferien"}]},Brandenburg:{_state_code:"bb",SH:[{2012:[1,30,2,4],2013:[2,4,2,9],2014:[2,3,2,8],2015:[2,2,2,7],2016:[2,1,2,6],2017:[1,30,2,4],2018:[2,5,2,10],2019:[2,4,2,9],2020:[2,3,2,8],2021:[2,1,2,6],2022:[1,31,2,5],2023:[1,30,2,3],2024:[2,5,2,9],name:"Winterferien"},{2012:[4,4,4,14,4,30,4,30],2013:[3,27,4,6],2014:[4,16,4,26,5,2,5,2],2015:[4,1,4,11],2016:[3,23,4,2],2017:[4,10,4,22],2018:[3,26,4,6],2019:[4,15,4,26],2020:[4,6,4,17],2021:[3,29,4,9],2022:[4,11,4,23],2023:[4,3,4,14],2024:[3,25,4,5],name:"Osterferien"},{2012:[5,18,5,18],2013:[5,10,5,10],2014:[5,30,5,30],2015:[5,15,5,15],2016:[5,6,5,6,5,17,5,17],2017:[5,26,5,26],2018:[4,30,4,30,5,11,5,11],2019:[5,31,5,31],2020:[5,22,5,22],2021:[5,14,5,14],2022:[5,27,5,27],2023:[5,19,5,19],2024:[5,10,5,10],name:"Pfingstferien"},{2012:[6,21,8,3],2013:[6,20,8,2],2014:[7,10,8,22],2015:[7,16,8,28],2016:[7,21,9,3],2017:[7,20,9,1],2018:[7,5,8,18],2019:[6,20,8,3],2020:[6,25,8,8],2021:[6,24,8,7],2022:[7,7,8,20],2023:[7,13,8,26],2024:[7,18,8,31],name:"Sommerferien"},{2012:[10,1,10,13],2013:[9,30,10,12,11,1,11,1],2014:[10,20,11,1],2015:[10,19,10,30],2016:[10,17,10,28],2017:[10,2,10,2,10,23,11,4],2018:[10,22,11,2],2019:[10,4,10,18,11,1,11,1],2020:[10,12,10,24],2021:[10,11,10,23],2022:[10,24,11,5],2023:[10,2,10,2,10,23,11,4],name:"Herbstferien"},{2011:[12,23,1,3],2012:[12,24,1,4],2013:[12,23,1,3],2014:[12,22,1,2],2015:[12,23,1,2],2016:[12,23,1,3],2017:[12,21,1,2],2018:[12,21,1,5],2019:[12,23,1,3],2020:[12,21,1,2],2021:[12,23,12,31],2022:[12,22,1,3],2023:[12,23,1,5],name:"Weihnachtsferien"}]},Bremen:{_state_code:"hb",SH:[{2012:[1,30,1,31],2013:[1,31,2,1],2014:[1,30,1,31],2015:[2,2,2,3],2016:[1,28,1,29],2017:[1,30,1,31],2018:[2,1,2,2],2019:[1,31,2,1],2020:[2,3,2,4],2021:[2,1,2,2],2022:[1,31,2,1],2023:[1,30,1,31],2024:[2,1,2,2],name:"Winterferien"},{2012:[3,26,4,11,4,30,4,30],2013:[3,16,4,2],2014:[4,3,4,22,5,2,5,2],2015:[3,25,4,10],2016:[3,18,4,2],2017:[4,10,4,22],2018:[3,19,4,3],2019:[4,6,4,23],2020:[3,28,4,14],2021:[3,27,4,10],2022:[4,4,4,19],2023:[3,27,4,11],2024:[3,18,4,2],name:"Osterferien"},{2012:[5,18,5,18,5,29,5,29],2013:[5,10,5,10,5,21,5,21],2014:[5,30,5,30,6,10,6,10],2015:[5,15,5,15,5,26,5,26],2016:[5,6,5,6,5,17,5,17],2017:[5,26,5,26,6,6,6,6],2018:[4,30,4,30,5,11,5,11,5,22,5,22],2019:[5,31,5,31,6,11,6,11],2020:[5,22,5,22,6,2,6,2],2021:[5,14,5,14,5,25,5,25],2022:[5,27,5,27,6,7,6,7],2023:[5,19,5,19,5,30,5,30],2024:[5,10,5,10,5,21,5,21],name:"Pfingstferien"},{2012:[7,23,8,31],2013:[6,27,8,7],2014:[7,31,9,10],2015:[7,23,9,2],2016:[6,23,8,3],2017:[6,22,8,2],2018:[6,28,8,8],2019:[7,4,8,14],2020:[7,16,8,26],2021:[7,22,9,1],2022:[7,14,8,24],2023:[7,6,8,16],2024:[6,24,8,2],name:"Sommerferien"},{2012:[10,22,11,3],2013:[10,4,10,18],2014:[10,27,11,8],2015:[10,19,10,31],2016:[10,4,10,15],2017:[10,2,10,14,10,30,10,30],2018:[10,1,10,13],2019:[10,4,10,18],2020:[10,12,10,24],2021:[10,18,10,30],2022:[10,17,10,29],2023:[10,2,10,2,10,16,10,28],name:"Herbstferien"},{2011:[12,23,1,4],2012:[12,24,1,5],2013:[12,23,1,3],2014:[12,22,1,5],2015:[12,23,1,6],2016:[12,21,1,6],2017:[12,22,1,6],2018:[12,24,1,4],2019:[12,21,1,6],2020:[12,23,1,8],2021:[12,23,1,8],2022:[12,23,1,6],2023:[12,23,1,5],name:"Weihnachtsferien"}]},Hamburg:{_state_code:"hh",SH:[{2012:[1,30,1,30],2013:[2,1,2,1],2014:[1,31,1,31],2015:[1,30,1,30],2016:[1,29,1,29],2017:[1,30,1,30],2018:[2,2,2,2],2019:[2,1,2,1],2020:[1,31,1,31],2021:[1,29,1,29],2022:[1,28,1,28],2023:[1,27,1,27],2024:[2,2,2,2],name:"Winterferien"},{2012:[3,5,3,16],2013:[3,4,3,15],2014:[3,3,3,14],2015:[3,2,3,13],2016:[3,7,3,18],2017:[3,6,3,17],2018:[3,5,3,16,4,30,4,30],2019:[3,4,3,15],2020:[3,2,3,13],2021:[3,1,3,12],2022:[3,7,3,18],2023:[3,6,3,17],2024:[3,18,3,28],name:"Osterferien"},{2012:[4,30,5,4,5,18,5,18],2013:[5,2,5,10],2014:[4,28,5,2,5,30,5,30],2015:[5,11,5,15],2016:[5,6,5,6,5,17,5,20],2017:[5,22,5,26],2018:[5,7,5,11],2019:[5,13,5,17,5,31,5,31],2020:[5,4,5,8],2021:[5,10,5,14],2022:[5,23,5,27],2023:[5,15,5,19],2024:[5,21,5,24],name:"Pfingstferien"},{2012:[6,21,8,1],2013:[6,20,7,31],2014:[7,10,8,20],2015:[7,16,8,26],2016:[7,21,8,31],2017:[7,20,8,30],2018:[7,5,8,15],2019:[6,27,8,7],2020:[6,25,8,5],2021:[6,24,8,4],2022:[7,7,8,17],2023:[7,13,8,23],2024:[7,18,8,28],name:"Sommerferien"},{2012:[10,1,10,12],2013:[9,30,10,11],2014:[10,13,10,24],2015:[10,19,10,30],2016:[10,17,10,28],2017:[10,2,10,2,10,16,10,27],2018:[10,1,10,12],2019:[10,4,10,18],2020:[10,5,10,16],2021:[10,4,10,15],2022:[10,10,10,21],2023:[10,2,10,2,10,16,10,27],name:"Herbstferien"},{2011:[12,27,1,6],2012:[12,21,1,4],2013:[12,19,1,3],2014:[12,22,1,6],2015:[12,21,1,1],2016:[12,27,1,6],2017:[12,22,1,5],2018:[12,20,1,4],2019:[12,23,1,3],2020:[12,21,1,4],2021:[12,23,1,4],2022:[12,23,1,6],2023:[12,22,1,5],name:"Weihnachtsferien"}]},Hessen:{_state_code:"he",SH:[{2012:[4,2,4,14],2013:[3,25,4,6],2014:[4,14,4,26],2015:[3,30,4,11],2016:[3,29,4,9],2017:[4,3,4,15],2018:[3,26,4,7],2019:[4,14,4,27],2020:[4,6,4,18],2021:[4,6,4,16],2022:[4,11,4,23],2023:[4,3,4,22],2024:[3,25,4,13],name:"Osterferien"},{2012:[7,2,8,10],2013:[7,8,8,16],2014:[7,28,9,5],2015:[7,27,9,4],2016:[7,18,8,26],2017:[7,3,8,11],2018:[6,25,8,3],2019:[7,1,8,9],2020:[7,6,8,14],2021:[7,19,8,27],2022:[7,25,9,2],2023:[7,24,9,1],2024:[7,15,8,23],name:"Sommerferien"},{2012:[10,15,10,27],2013:[10,14,10,26],2014:[10,20,11,1],2015:[10,19,10,31],2016:[10,17,10,29],2017:[10,9,10,21],2018:[10,1,10,13],2019:[9,30,10,12],2020:[10,5,10,17],2021:[10,11,10,23],2022:[10,24,10,29],2023:[10,23,10,28],name:"Herbstferien"},{2011:[12,21,1,6],2012:[12,24,1,12],2013:[12,23,1,11],2014:[12,22,1,10],2015:[12,23,1,9],2016:[12,22,1,7],2017:[12,24,1,13],2018:[12,24,1,12],2019:[12,23,1,11],2020:[12,21,1,9],2021:[12,23,1,8],2022:[12,22,1,7],2023:[12,27,1,13],name:"Weihnachtsferien"}]},"Mecklenburg-Vorpommern":{_state_code:"mv",SH:[{2012:[2,6,2,17],2013:[2,4,2,15],2014:[2,3,2,15],2015:[2,2,2,14],2016:[2,1,2,13],2017:[2,6,2,18],2018:[2,5,2,16],2019:[2,4,2,15],2020:[2,10,2,21],2021:[2,6,2,19],2022:[2,5,2,17],2023:[2,6,2,18],2024:[2,5,2,16],name:"Winterferien"},{2012:[4,2,4,11],2013:[3,25,4,3],2014:[4,14,4,23],2015:[3,30,4,8],2016:[3,21,3,30],2017:[4,10,4,19],2018:[3,26,4,4],2019:[4,15,4,24],2020:[4,6,4,15],2021:[3,29,4,7],2022:[4,11,4,20],2023:[4,3,4,12],2024:[3,25,4,3],name:"Osterferien"},{2012:[5,25,5,29],2013:[5,17,5,21],2014:[6,6,6,10],2015:[5,22,5,26],2016:[5,14,5,17],2017:[6,2,6,6],2018:[5,11,5,11,5,18,5,22],2019:[5,22,5,22,6,7,6,11],2020:[5,22,5,22,5,29,6,2],2021:[5,14,5,14,5,21,5,25],2022:[5,27,5,27,6,3,6,7],2023:[5,19,5,19,5,26,5,30],2024:[5,10,5,10,5,17,5,21],name:"Pfingstferien"},{2012:[6,23,8,4],2013:[6,22,8,3],2014:[7,14,8,23],2015:[7,20,8,29],2016:[7,25,9,3],2017:[7,24,9,2],2018:[7,9,8,18],2019:[7,1,8,10],2020:[6,22,8,1],2021:[6,21,7,31],2022:[7,4,8,13],2023:[7,17,8,26],2024:[7,22,8,31],name:"Sommerferien"},{2012:[10,1,10,5],2013:[10,14,10,19],2014:[10,20,10,25],2015:[10,24,10,30],2016:[10,24,10,28],2017:[10,2,10,2,10,23,10,30],2018:[10,8,10,13,11,1,11,2],2019:[10,4,10,4,10,7,10,12,11,1,11,1],2020:[10,5,10,10,11,2,11,3],2021:[10,2,10,9,11,1,11,2],2022:[10,10,10,14,11,1,11,2],2023:[10,9,10,14,10,30,10,30,11,1,11,1],name:"Herbstferien"},{2011:[12,23,1,3],2012:[12,21,1,4],2013:[12,23,1,3],2014:[12,22,1,2],2015:[12,21,1,2],2016:[12,22,1,2],2017:[12,21,1,3],2018:[12,24,1,5],2019:[12,23,1,4],2020:[12,21,1,2],2021:[12,22,12,31],2022:[12,22,1,2],2023:[12,21,1,3],name:"Weihnachtsferien"}]},Niedersachsen:{_state_code:"ni",SH:[{2012:[1,30,1,31],2013:[1,31,2,1],2014:[1,30,1,31],2015:[2,2,2,3],2016:[1,28,1,29],2017:[1,30,1,31],2018:[2,1,2,2],2019:[1,31,2,1],2020:[2,3,2,4],2021:[2,1,2,2],2022:[1,31,2,1],2023:[1,30,1,31],2024:[2,1,2,2],name:"Winterferien"},{2012:[3,26,4,11,4,30,4,30],2013:[3,16,4,2],2014:[4,3,4,22,5,2,5,2],2015:[3,25,4,10],2016:[3,18,4,2],2017:[4,10,4,22],2018:[3,19,4,3],2019:[4,8,4,23],2020:[3,30,4,14],2021:[3,29,4,9],2022:[4,4,4,19],2023:[3,27,4,11],2024:[3,18,4,2],name:"Osterferien"},{2012:[5,18,5,18,5,29,5,29],2013:[5,10,5,10,5,21,5,21],2014:[5,30,5,30,6,10,6,10],2015:[5,15,5,15,5,26,5,26],2016:[5,6,5,6,5,17,5,17],2017:[5,26,5,26,6,6,6,6],2018:[4,30,4,30,5,11,5,11,5,22,5,22],2019:[5,31,5,31,6,11,6,11],2020:[5,22,5,22,6,2,6,2],2021:[5,14,5,14,5,25,5,25],2022:[5,27,5,27,6,7,6,7],2023:[5,19,5,19,5,30,5,30],2024:[5,10,5,10,5,21,5,21],name:"Pfingstferien"},{2012:[7,23,8,31],2013:[6,27,8,7],2014:[7,31,9,10],2015:[7,23,9,2],2016:[6,23,8,3],2017:[6,22,8,2],2018:[6,28,8,8],2019:[7,4,8,14],2020:[7,16,8,26],2021:[7,22,9,1],2022:[7,14,8,24],2023:[7,6,8,16],2024:[6,24,8,2],name:"Sommerferien"},{2012:[10,22,11,3],2013:[10,4,10,18],2014:[10,27,11,8],2015:[10,19,10,31],2016:[10,4,10,15],2017:[10,2,10,13,10,30,10,30],2018:[10,1,10,12],2019:[10,4,10,18],2020:[10,12,10,23],2021:[10,18,10,29],2022:[10,17,10,28],2023:[10,2,10,2,10,16,10,27],name:"Herbstferien"},{2011:[12,23,1,4],2012:[12,24,1,5],2013:[12,23,1,3],2014:[12,22,1,5],2015:[12,23,1,6],2016:[12,21,1,6],2017:[12,22,1,5],2018:[12,24,1,4],2019:[12,23,1,6],2020:[12,23,1,8],2021:[12,23,1,7],2022:[12,23,1,6],2023:[12,27,1,5],name:"Weihnachtsferien"}]},"Nordrhein-Westfalen":{_state_code:"nw",SH:[{2012:[4,2,4,14],2013:[3,25,4,6],2014:[4,14,4,26],2015:[3,30,4,11],2016:[3,21,4,2],2017:[4,10,4,22],2018:[3,26,4,7],2019:[4,15,4,27],2020:[4,6,4,18],2021:[3,29,4,10],2022:[4,11,4,23],2023:[4,3,4,15],2024:[3,25,4,6],name:"Osterferien"},{2012:[5,29,5,29],2013:[5,21,5,21],2014:[6,10,6,10],2015:[5,26,5,26],2016:[5,17,5,17],2017:[6,6,6,6],2018:[5,22,5,25],2019:[6,11,6,11],2020:[6,2,6,2],2021:[5,25,5,25],2023:[5,30,5,30],2024:[5,21,5,21],name:"Pfingstferien"},{2012:[7,9,8,21],2013:[7,22,9,3],2014:[7,7,8,19],2015:[6,29,8,11],2016:[7,11,8,23],2017:[7,17,8,29],2018:[7,16,8,28],2019:[7,15,8,27],2020:[6,29,8,11],2021:[7,5,8,17],2022:[6,27,8,9],2023:[6,22,8,4],2024:[7,8,8,20],name:"Sommerferien"},{2012:[10,8,10,20],2013:[10,21,11,2],2014:[10,6,10,18],2015:[10,5,10,17],2016:[10,10,10,21],2017:[10,23,11,4],2018:[10,15,10,27],2019:[10,14,10,26],2020:[10,12,10,24],2021:[10,11,10,23],2022:[10,4,10,15],2023:[10,2,10,14],name:"Herbstferien"},{2011:[12,23,1,6],2012:[12,21,1,4],2013:[12,23,1,7],2014:[12,22,1,6],2015:[12,23,1,6],2016:[12,23,1,6],2017:[12,27,1,6],2018:[12,21,1,4],2019:[12,23,1,6],2020:[12,23,1,6],2021:[12,24,1,8],2022:[12,23,1,6],2023:[12,21,1,5],name:"Weihnachtsferien"}]},"Rheinland-Pfalz":{_state_code:"rp",SH:[{2019:[2,25,3,1],2020:[2,17,2,21],2022:[2,21,2,25],name:"Winterferien"},{2012:[3,29,4,13],2013:[3,20,4,5],2014:[4,11,4,25],2015:[3,26,4,10],2016:[3,18,4,1],2017:[4,10,4,21],2018:[3,26,4,6],2019:[4,23,4,30],2020:[4,9,4,17],2021:[3,29,4,6],2022:[4,13,4,22],2023:[4,3,4,6],2024:[3,25,4,2],name:"Osterferien"},{2021:[5,25,6,2],2023:[5,30,6,7],2024:[5,21,5,29],name:"Pfingstferien"},{2012:[7,2,8,10],2013:[7,8,8,16],2014:[7,28,9,5],2015:[7,27,9,4],2016:[7,18,8,26],2017:[7,3,8,11],2018:[6,25,8,3],2019:[7,1,8,9],2020:[7,6,8,14],2021:[7,19,8,27],2022:[7,25,9,2],2023:[7,24,9,1],2024:[7,15,8,23],name:"Sommerferien"},{2012:[10,1,10,12],2013:[10,4,10,18],2014:[10,20,10,31],2015:[10,19,10,30],2016:[10,10,10,21],2017:[10,2,10,13],2018:[10,1,10,12],2019:[9,30,10,11],2020:[10,12,10,23],2021:[10,11,10,22],2022:[10,17,10,31],2023:[10,16,10,27],name:"Herbstferien"},{2011:[12,22,1,6],2012:[12,20,1,4],2013:[12,23,1,7],2014:[12,22,1,7],2015:[12,23,1,8],2016:[12,22,1,6],2017:[12,22,1,9],2018:[12,20,1,4],2019:[12,23,1,6],2020:[12,21,12,31],2021:[12,23,12,31],2022:[12,23,1,2],2023:[12,27,1,5],name:"Weihnachtsferien"}]},Saarland:{_state_code:"sl",SH:[{2012:[2,20,2,25],2013:[2,11,2,16],2014:[3,3,3,8],2015:[2,16,2,21],2016:[2,8,2,13],2017:[2,27,3,4],2018:[2,12,2,17],2019:[2,25,3,5],2020:[2,17,2,25],2021:[2,15,2,19],2022:[2,21,3,1],2023:[2,20,2,24],2024:[2,12,2,16],name:"Winterferien"},{2012:[4,2,4,14],2013:[3,25,4,6],2014:[4,14,4,26],2015:[3,30,4,11],2016:[3,29,4,9],2017:[4,10,4,22],2018:[3,26,4,6],2019:[4,17,4,26],2020:[4,14,4,24],2021:[3,29,4,7],2022:[4,14,4,22],2023:[4,3,4,12],2024:[2,25,4,5],name:"Osterferien"},{2021:[5,25,5,28],2022:[6,7,6,10],2023:[5,30,6,2],2024:[5,21,5,24],name:"Pfingstferien"},{2012:[7,2,8,14],2013:[7,8,8,17],2014:[7,28,9,6],2015:[7,27,9,5],2016:[7,18,8,27],2017:[7,3,8,14],2018:[6,25,8,3],2019:[7,1,8,9],2020:[7,6,8,14],2021:[7,19,8,27],2022:[7,25,9,2],2023:[7,24,9,1],2024:[7,15,8,23],name:"Sommerferien"},{2012:[10,22,11,3],2013:[10,21,11,2],2014:[10,20,10,31],2015:[10,19,10,31],2016:[10,10,10,22],2017:[10,2,10,14],2018:[10,1,10,12],2019:[10,7,10,18],2020:[10,12,10,23],2021:[10,18,10,29],2022:[10,24,11,4],2023:[10,23,11,3],name:"Herbstferien"},{2011:[12,23,1,4],2012:[12,24,1,5],2013:[12,20,1,4],2014:[12,22,1,7],2015:[12,21,1,2],2016:[12,19,12,31],2017:[12,21,1,5],2018:[12,20,1,4],2019:[12,23,1,3],2020:[12,21,12,31],2021:[12,23,1,3],2022:[12,22,1,4],2023:[12,21,1,2],name:"Weihnachtsferien"}]},Sachsen:{_state_code:"sn",SH:[{2012:[2,13,2,25],2013:[2,4,2,15],2014:[2,17,3,1],2015:[2,9,2,21],2016:[2,8,2,20],2017:[2,13,2,24],2018:[2,12,2,23],2019:[2,18,3,2],2020:[2,10,2,22],2021:[2,8,2,20],2022:[2,12,2,26],2023:[2,13,2,24],2024:[2,12,2,23],name:"Winterferien"},{2012:[4,6,4,14],2013:[3,29,4,6],2014:[4,18,4,26],2015:[4,2,4,11],2016:[3,25,4,2],2017:[4,13,4,22],2018:[3,29,4,6],2019:[4,19,4,26],2020:[4,10,4,18],2021:[4,2,4,10],2022:[4,15,4,23],2023:[4,7,4,15],2024:[3,28,4,5],name:"Osterferien"},{2012:[5,18,5,18],2013:[5,10,5,10,5,18,5,22],2014:[5,30,5,30],2015:[5,15,5,15],2016:[5,6,5,6],2017:[5,26,5,26],2018:[5,11,5,11,5,19,5,22],2019:[5,31,5,31],2020:[5,22,5,22],2021:[5,14,5,14],2022:[5,27,5,27],2023:[5,19,5,19],2024:[5,10,5,10,5,18,5,21],name:"Pfingstferien"},{2012:[7,23,8,31],2013:[7,15,8,23],2014:[7,21,8,29],2015:[7,13,8,21],2016:[6,27,8,5],2017:[6,26,8,4],2018:[7,2,8,10],2019:[7,8,8,16],2020:[7,20,8,28],2021:[7,26,9,3],2022:[7,18,8,26],2023:[7,10,8,18],2024:[6,20,7,31],name:"Sommerferien"},{2012:[10,22,11,2],2013:[10,21,11,1],2014:[10,20,10,31],2015:[10,12,10,24],2016:[10,3,10,15],2017:[10,2,10,14,10,30,10,30],2018:[10,8,10,20],2019:[10,14,10,25],2020:[10,19,10,31],2021:[10,18,10,30],2022:[10,17,10,29],2023:[10,2,10,14,10,30,10,30],name:"Herbstferien"},{2011:[12,23,1,2],2012:[12,22,1,2],2013:[12,21,1,3],2014:[12,22,1,3],2015:[12,21,1,2],2016:[12,23,1,2],2017:[12,23,1,2],2018:[12,22,1,4],2019:[12,21,1,3],2020:[12,23,1,2],2021:[12,23,1,1],2022:[12,22,1,2],2023:[12,23,1,2],name:"Weihnachtsferien"}]},"Sachsen-Anhalt":{_state_code:"st",SH:[{2012:[2,4,2,11],2013:[2,1,2,8],2014:[2,1,2,12],2015:[2,2,2,14],2016:[2,1,2,10],2017:[2,4,2,11],2018:[2,5,2,9],2019:[2,11,2,15],2020:[2,10,2,14],2021:[2,8,2,13],2022:[2,12,2,19],2023:[2,6,2,11],2024:[2,5,2,10],name:"Winterferien"},{2012:[4,2,4,7],2013:[3,25,3,30],2014:[4,14,4,17],2015:[4,2,4,2],2016:[3,24,3,24],2017:[4,10,4,13],2018:[3,26,3,31,4,30,4,30],2019:[4,18,4,30],2020:[4,6,4,11],2021:[3,29,4,3],2022:[4,11,4,16],2023:[4,3,4,8],2024:[3,25,3,30],name:"Osterferien"},{2012:[5,18,5,25],2013:[5,10,5,18],2014:[5,30,6,7],2015:[5,15,5,23],2016:[5,6,5,14],2017:[5,26,5,26],2018:[5,11,5,19],2019:[5,31,6,1],2020:[5,18,5,30],2021:[5,10,5,22],2022:[5,23,5,28],2023:[5,15,5,19],2024:[5,21,5,24],name:"Pfingstferien"},{2012:[7,23,9,5],2013:[7,15,8,28],2014:[7,21,9,3],2015:[7,13,8,26],2016:[6,27,8,10],2017:[6,26,8,9],2018:[6,28,8,8],2019:[7,4,8,14],2020:[7,16,8,26],2021:[7,22,9,1],2022:[7,14,8,24],2023:[7,6,8,16],2024:[6,24,8,3],name:"Sommerferien"},{2012:[10,29,11,2],2013:[10,21,10,25],2014:[10,27,10,30],2015:[10,17,10,24],2016:[10,4,10,15],2017:[10,2,10,13,10,30,10,30],2018:[10,1,10,12],2019:[10,4,10,11,11,1,11,1],2020:[10,19,10,24],2021:[10,25,10,30],2022:[10,24,11,4],2023:[10,2,10,2,10,16,10,30],name:"Herbstferien"},{2011:[12,22,1,7],2012:[12,19,1,4],2013:[12,21,1,3],2014:[12,22,1,5],2015:[12,21,1,5],2016:[12,19,1,2],2017:[12,21,1,3],2018:[12,19,1,4],2019:[12,23,1,4],2020:[12,19,1,5],2021:[12,22,1,8],2022:[12,21,1,5],2023:[12,21,1,3],name:"Weihnachtsferien"}]},"Schleswig-Holstein":{_state_code:"sh",SH:[{2012:[3,30,4,13],2013:[3,25,4,9],2014:[4,16,5,2],2015:[4,1,4,17],2016:[3,24,4,9],2017:[4,7,4,21],2018:[3,29,4,13],2019:[4,4,4,18],2020:[3,30,4,17],2021:[4,1,4,16],2022:[4,4,4,16],2023:[4,6,4,22],2024:[4,2,4,19],name:"Osterferien"},{2012:[5,18,5,18],2013:[5,10,5,10],2014:[5,30,5,30],2015:[5,15,5,15],2016:[5,6,5,6],2017:[5,26,5,26],2018:[5,11,5,11],2019:[5,31,5,31],2020:[5,22,5,22],2021:[5,14,5,14],2022:[5,27,5,27],2023:[5,19,5,20],2024:[5,10,5,11],name:"Pfingstferien"},{2012:[6,25,8,4],2013:[6,24,8,3],2014:[7,14,8,23],2015:[7,20,8,29],2016:[7,25,9,3],2017:[7,24,9,2],2018:[7,9,8,18],2019:[7,1,8,10],2020:[6,29,8,8],2021:[6,21,7,31],2022:[7,4,8,13],2023:[7,17,8,26],2024:[7,22,8,31],name:"Sommerferien"},{2012:[10,4,10,19],2013:[10,4,10,18],2014:[10,13,10,25],2015:[10,19,10,31],2016:[10,17,10,29],2017:[10,16,10,27],2018:[10,1,10,19],2019:[10,4,10,18],2020:[10,5,10,17],2021:[10,4,10,16],2022:[10,10,10,21],2023:[10,16,10,27],name:"Herbstferien"},{2011:[12,23,1,6],2012:[12,24,1,5],2013:[12,23,1,6],2014:[12,22,1,6],2015:[12,21,1,6],2016:[12,23,1,6],2017:[12,21,1,6],2018:[12,21,1,4],2019:[12,23,1,6],2020:[12,21,1,6],2021:[12,23,1,8],2022:[12,23,1,7],2023:[12,27,1,6],name:"Weihnachtsferien"}]},Thringen:{_state_code:"th",SH:[{2012:[2,6,2,11],2013:[2,18,2,23],2014:[2,17,2,22],2015:[2,2,2,7],2016:[2,1,2,6],2017:[2,6,2,11],2018:[2,5,2,9],2019:[2,11,2,15],2020:[2,10,2,14],2021:[2,8,2,13],2022:[2,12,2,19],2023:[2,13,2,17],2024:[2,12,2,16],name:"Winterferien"},{2012:[4,2,4,13],2013:[3,25,4,6],2014:[4,19,5,2],2015:[3,30,4,11],2016:[3,24,4,2],2017:[4,10,4,21],2018:[3,26,4,7],2019:[4,15,4,27],2020:[4,6,4,18],2021:[3,29,4,10],2022:[4,11,4,23],2023:[4,3,4,15],2024:[3,25,4,6],name:"Osterferien"},{2012:[5,25,5,29],2013:[5,10,5,10],2014:[5,30,5,30],2015:[5,15,5,15],2016:[5,6,5,6],2017:[5,26,5,26],2018:[5,11,5,11],2019:[5,31,5,31],2020:[5,22,5,22],2021:[5,14,5,14],2022:[5,27,5,27],2023:[5,19,5,19],2024:[5,10,5,10],name:"Pfingstferien"},{2012:[7,23,8,31],2013:[7,15,8,23],2014:[7,21,8,29],2015:[7,13,8,21],2016:[6,27,8,10],2017:[6,26,8,9],2018:[7,2,8,11],2019:[7,8,8,17],2020:[7,20,8,29],2021:[7,26,9,4],2022:[7,18,8,27],2023:[7,10,8,19],2024:[6,20,7,31],name:"Sommerferien"},{2012:[10,22,11,3],2013:[10,21,11,2],2014:[10,6,10,18],2015:[10,5,10,17],2016:[10,10,10,22],2017:[10,2,10,14],2018:[10,1,10,13],2019:[10,7,10,19],2020:[10,17,10,30],2021:[10,25,11,6],2022:[10,17,10,29],2023:[10,2,10,14],name:"Herbstferien"},{2011:[12,23,1,1],2012:[12,24,1,5],2013:[12,23,1,4],2014:[12,22,1,3],2015:[12,23,1,2],2016:[12,23,12,31],2017:[12,22,1,5],2018:[12,21,1,4],2019:[12,21,1,3],2020:[12,23,1,2],2021:[12,23,12,31],2022:[12,22,1,3],2023:[12,22,1,5],name:"Weihnachtsferien"}]}};L.PH,L.Bayern,L.Berlin,L.Brandenburg,L.Bremen,L.Hamburg,L.Hessen,L.Niedersachsen,L.Saarland,L.Sachsen;var W={PH:[{name:"Nytrsdag",fixed_date:[1,1]},{name:"Skrtorsdag",variable_date:"easter",offset:-3},{name:"Langfredag",variable_date:"easter",offset:-2},{name:"Pskedag",variable_date:"easter"},{name:"2. Pskedag",variable_date:"easter",offset:1},{name:"Store Bededag",variable_date:"easter",offset:26},{name:"Kristi Himmelfartsdag",variable_date:"easter",offset:39},{name:"Pinsedag",variable_date:"easter",offset:49},{name:"2. Pinsedag",variable_date:"easter",offset:50},{name:"Grundlovsdag",fixed_date:[6,5]},{name:"Juleaftensdag",fixed_date:[12,24]},{name:"Juledag",fixed_date:[12,25]},{name:"2. Juledag",fixed_date:[12,26]}]};W.PH;var Y={PH:[{name:"Cap d'Any",fixed_date:[1,1],only_states:["Catalua"]},{name:"Ao Nuevo",fixed_date:[1,1]},{name:"Reis",fixed_date:[1,6],only_states:["Catalua"]},{name:"Epifana del Seor",fixed_date:[1,6]},{name:"Da de Andaluca",fixed_date:[2,28],only_states:["Andaluca"]},{name:"Dia de les Illes Balears",fixed_date:[3,1],only_states:["Islas Baleares"]},{name:"Sant Josep",fixed_date:[3,19],only_states:["Comunidad Valenciana"]},{name:"San Jos",fixed_date:[3,19],only_states:["Murcia"]},{name:"Jueve Santo",variable_date:"easter",offset:-3,only_states:["Andaluca","Aragn","Castilla y Len","Castilla-La Mancha","Canarias","Extremadura","Galicia","Islas Baleares","La Rioja","Comunidad de Madrid","Regin de Murcia","Navarra","Asturias","Pas Vasco","Cantabria","Ceuta","Melilla"]},{name:"Divendres Sant",variable_date:"easter",offset:-2,only_states:["Catalua","Comunidad Valenciana","Islas Baleares"]},{name:"Viernes Santo",variable_date:"easter",offset:-2},{name:"Dilluns de Pasqua Florida",variable_date:"easter",offset:1,only_states:["Catalua","Comunidad Valenciana","Islas Baleares"]},{name:"Lunes de Pascua de Resurreccin",variable_date:"easter",offset:1,only_states:["Pas Vasco","Navarra"]},{name:"Da de Aragn",fixed_date:[4,23],only_states:["Aragn"]},{name:"Da de Castilla y Len",fixed_date:[4,23],only_states:["Castilla y Len"]},{name:"Festa del Treball",fixed_date:[5,1],only_states:["Catalua","Comunidad Valenciana","Islas Baleares"]},{name:"Fiesta del Trabajo",fixed_date:[5,1]},{name:"Fiesta de la Comunidad de Madrid",fixed_date:[5,2],only_states:["Comunidad de Madrid"]},{name:"Da das Letras Galegas",fixed_date:[5,2],only_states:["Galicia"]},{name:"Da de Canarias",fixed_date:[5,30],only_states:["Canarias"]},{name:"Da de la Regin Castilla-La Mancha",fixed_date:[5,31],only_states:["Castilla-La Mancha"]},{name:"Da de la Regin de Murcia",fixed_date:[6,9],only_states:["Regin de Murcia"]},{name:"Da de la Rioja",fixed_date:[6,9],only_states:["La Rioja"]},{name:"San Antonio",fixed_date:[6,13],only_states:["Ceuta"]},{name:"Sant Joan",fixed_date:[6,24],only_states:["Catalua"]},{name:"San Juan",fixed_date:[6,24],only_states:["Ceuta"]},{name:"Santiago Apstol",fixed_date:[7,25],only_states:["Galicia"]},{name:"Santa Mara de frica",fixed_date:[8,6],only_states:["Ceuta"]},{name:"l'Assumpci",fixed_date:[8,15],only_states:["Catalua"]},{name:"Asuncin de la Virgen",fixed_date:[8,15]},{name:"Da de Ceuta",fixed_date:[9,2],only_states:["Ceuta"]},{name:"Da de Asturias",fixed_date:[9,8],only_states:["Asturias"]},{name:"Da de Extremadura",fixed_date:[9,8],only_states:["Extremadura"]},{name:"Diada Nacional de Catalunya",fixed_date:[9,11],only_states:["Catalua"]},{name:"Da de Cantabria",fixed_date:[9,17],only_states:["Cantabria"]},{name:"Da de Melilla",fixed_date:[9,15],only_states:["Melilla"]},{name:"Dia de la Comunitat Valenciana",fixed_date:[10,9],only_states:["Comunidad Valenciana"]},{name:"Festa Nacional d'Espanya",fixed_date:[10,12],only_states:["Catalua"]},{name:"Fiesta Nacional de Espaa",fixed_date:[10,12]},{name:"Euskadi Eguna",fixed_date:[10,25],only_states:["Pas Vasco"]},{name:"Tots Sants",fixed_date:[11,1],only_states:["Catalua","Comunidad Valenciana","Islas Baleares"]},{name:"Todos los Santos",fixed_date:[11,1]},{name:"Da de la Constitucin Espaola",fixed_date:[12,6]},{name:"La Purssima",fixed_date:[12,8],only_states:["Catalua","Comunidad Valenciana","Islas Baleares"]},{name:"La Immaculada Concepcin",fixed_date:[12,8]},{name:"Nadal",fixed_date:[12,25],only_states:["Catalua","Comunidad Valenciana","Islas Baleares"]},{name:"Natividad del Seor",fixed_date:[12,25]},{name:"Sant Esteve",fixed_date:[12,26],only_states:["Catalua"]}],Andaluca:{_state_code:"an"},Aragn:{_state_code:"ar"},"Castilla y Len":{_state_code:"cl"},"Castilla-La Mancha":{_state_code:"cm"},Canarias:{_state_code:"cn"},Catalua:{_state_code:"ct"},Extremadura:{_state_code:"ex"},Galicia:{_state_code:"ga"},"Islas Baleares":{_state_code:"ib"},"La Rioja":{_state_code:"ri"},"Comunidad de Madrid":{_state_code:"md"},"Regin de Murcia":{_state_code:"mc"},Navarra:{_state_code:"nc"},Asturias:{_state_code:"as"},"Pas Vasco":{_state_code:"pv"},Cantabria:{_state_code:"cb"},"Comunidad Valenciana":{_state_code:"vc"},Ceuta:{_state_code:"ce"},Melilla:{_state_code:"ml"}};Y.PH,Y.Canarias,Y.Extremadura,Y.Galicia,Y.Navarra,Y.Asturias,Y.Cantabria,Y.Ceuta,Y.Melilla;var D={PH:[{name:"uudenvuodenpiv - nyrsdagen",fixed_date:[1,1]},{name:"loppiainen - trettondedagen",fixed_date:[1,6]},{name:"pitkperjantai - lngfredagen",variable_date:"easter",offset:-2},{name:"psiispiv - pskdagen",variable_date:"easter"},{name:"toinen psiispiv - annandag psk",variable_date:"easter",offset:1},{name:"vappu - frsta maj",fixed_date:[5,1]},{name:"helluntai - pingst",variable_date:"easter",offset:49},{name:"juhannuspiv - midsommarafton",variable_date:"nextSaturday20Jun"},{name:"pyhinpiv - alla helgons dag",variable_date:"nextSaturday31Oct"},{name:"itsenisyyspiv - sjlvstndighetsdagen",fixed_date:[12,6]},{name:"joulupiv - juldagen",fixed_date:[12,25]},{name:"toinen joulupiv - annandag jul",fixed_date:[12,26]}]};D.PH;var k={PH:[{name:"Jour de l'an",fixed_date:[1,1]},{name:"Vendredi saint",variable_date:"easter",offset:-2,only_states:["Moselle","Bas-Rhin","Haut-Rhin","Guadeloupe","Martinique","Polynsie franaise"]},{name:"Lundi de Pques",variable_date:"easter",offset:1},{name:"Abolition de l'esclavage (Mayotte)",fixed_date:[4,27],only_states:["Mayotte"]},{name:"Saint-Pierre-Chanel",fixed_date:[4,28],only_states:["Wallis-et-Futuna"]},{name:"Fte du Travail",fixed_date:[5,1]},{name:"Fte de la Victoire",fixed_date:[5,8]},{name:"Abolition de l'esclavage (Martinique)",fixed_date:[5,22],only_states:["Martinique"]},{name:"Abolition de l'esclavage (Guadeloupe)",fixed_date:[5,27],only_states:["Guadeloupe"]},{name:"Abolition de l'esclavage (Saint-Martin)",fixed_date:[5,28],only_states:["Saint-Martin (France)"]},{name:"Jeudi de l'Ascension",variable_date:"easter",offset:39},{name:"Lundi de Pentecte",variable_date:"easter",offset:50},{name:"Abolition de l'esclavage (Guyane)",fixed_date:[6,10],only_states:["Guyane"]},{name:"Fte de l'autonomie",fixed_date:[6,29],only_states:["Polynsie franaise"]},{name:"Fte nationale",fixed_date:[7,14]},{name:"Fte Victor Schoelcher",fixed_date:[7,21],only_states:["Guadeloupe","Martinique"]},{name:"Fte du Territoire",fixed_date:[7,29],only_states:["Wallis-et-Futuna"]},{name:"Assomption",fixed_date:[8,15]},{name:"Fte de la citoyennet",fixed_date:[9,24],only_states:["Nouvelle-Caldonie"]},{name:"Abolition de l'esclavage (Saint-Barthlemy)",fixed_date:[10,9],only_states:["Saint-Barthlemy"]},{name:"Toussaint",fixed_date:[11,1]},{name:"Armistice",fixed_date:[11,11]},{name:"Abolition de l'esclavage (Runion)",fixed_date:[12,20],only_states:["Runion"]},{name:"Nol",fixed_date:[12,25]},{name:"Saint-tienne ",fixed_date:[12,26],only_states:["Moselle","Bas-Rhin","Haut-Rhin"]}],"Auvergne-Rhne-Alpes":{_state_code:"ara",SH:[{2018:[2,11,2,25],2019:[2,17,3,3],2020:[2,23,3,8],2021:[2,7,2,21],2022:[2,12,2,27],name:"Vacances d'Hiver"},{2018:[4,8,4,22],2019:[4,14,4,28],2020:[4,19,5,3],2021:[4,11,4,25],2022:[4,16,5,1],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,5,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},"Bourgogne-Franche-Comt":{_state_code:"bfc",SH:[{2018:[2,11,2,25],2019:[2,17,3,3],2020:[2,23,3,8],2021:[2,7,2,21],2022:[2,12,2,27],name:"Vacances d'Hiver"},{2018:[4,8,4,22],2019:[4,14,4,28],2020:[4,19,5,3],2021:[4,11,4,25],2022:[4,16,5,1],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,5,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},"Nouvelle-Aquitaine":{_state_code:"naq",SH:[{2018:[2,11,2,25],2019:[2,17,3,3],2020:[2,23,3,8],2021:[2,7,2,21],2022:[2,12,2,27],name:"Vacances d'Hiver"},{2018:[4,8,4,22],2019:[4,14,4,28],2020:[4,19,5,3],2021:[4,11,4,25],2022:[4,16,5,1],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,5,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},Bretagne:{_state_code:"bre",SH:[{2018:[2,25,3,11],2019:[2,10,2,24],2020:[2,16,3,1],2021:[2,21,3,7],2022:[2,5,2,20],name:"Vacances d'Hiver"},{2018:[4,22,5,6],2019:[4,7,4,22],2020:[4,12,4,26],2021:[4,11,4,25],2022:[4,9,4,24],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},"Centre-Val de Loire":{_state_code:"cvl",SH:[{2018:[2,25,3,11],2019:[2,10,2,24],2020:[2,16,3,1],2021:[2,21,3,7],2022:[2,5,2,20],name:"Vacances d'Hiver"},{2018:[4,22,5,6],2019:[4,7,4,22],2020:[4,12,4,26],2021:[4,11,4,25],2022:[4,9,4,24],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},"Grand Est":{_state_code:"ges",SH:[{2018:[2,25,3,11],2019:[2,10,2,24],2020:[2,16,3,1],2021:[2,21,3,7],2022:[2,5,2,20],name:"Vacances d'Hiver"},{2018:[4,22,5,6],2019:[4,7,4,22],2020:[4,12,4,26],2021:[4,11,4,25],2022:[4,9,4,24],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},"Hauts-de-France":{_state_code:"hdf",SH:[{2018:[2,25,3,11],2019:[2,10,2,24],2020:[2,16,3,1],2021:[2,21,3,7],2022:[2,5,2,20],name:"Vacances d'Hiver"},{2018:[4,22,5,6],2019:[4,7,4,22],2020:[4,12,4,26],2021:[4,11,4,25],2022:[4,9,4,24],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},Normandie:{_state_code:"nor",SH:[{2018:[2,25,3,11],2019:[2,10,2,24],2020:[2,16,3,1],2021:[2,21,3,7],2022:[2,5,2,20],name:"Vacances d'Hiver"},{2018:[4,22,5,6],2019:[4,7,4,22],2020:[4,12,4,26],2021:[4,11,4,25],2022:[4,9,4,24],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},"Pays de la Loire":{_state_code:"pdl",SH:[{2018:[2,25,3,11],2019:[2,10,2,24],2020:[2,16,3,1],2021:[2,21,3,7],2022:[2,5,2,20],name:"Vacances d'Hiver"},{2018:[4,22,5,6],2019:[4,7,4,22],2020:[4,12,4,26],2021:[4,11,4,25],2022:[4,9,4,24],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},"Provence-Alpes-Cte d'Azur":{_state_code:"pac",SH:[{2018:[2,25,3,11],2019:[2,10,2,24],2020:[2,16,3,1],2021:[2,21,3,7],2022:[2,5,2,20],name:"Vacances d'Hiver"},{2018:[4,22,5,6],2019:[4,7,4,22],2020:[4,12,4,26],2021:[4,11,4,25],2022:[4,9,4,24],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},"le-de-France":{_state_code:"idf",SH:[{2018:[2,18,3,4],2019:[2,24,3,10],2020:[2,9,2,23],2021:[2,14,2,28],2022:[2,19,3,6],name:"Vacances d'Hiver"},{2018:[4,15,4,29],2019:[4,21,5,5],2020:[4,5,4,19],2021:[4,11,4,25],2022:[4,23,5,8],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,28],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},Occitanie:{_state_code:"occ",SH:[{2018:[2,18,3,4],2019:[2,24,3,10],2020:[2,9,2,23],2021:[2,14,2,28],2022:[2,19,3,6],name:"Vacances d'Hiver"},{2018:[4,15,4,29],2019:[4,21,5,5],2020:[4,5,4,19],2021:[4,11,4,25],2022:[4,23,5,8],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,28],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},Corse:{_state_code:"cor",SH:[{2018:[2,27,3,11],2019:[2,24,3,10],2020:[2,16,3,1],2021:[2,14,2,28],2022:[2,19,3,6],name:"Vacances d'Hiver"},{2018:[4,24,5,6],2019:[4,21,5,5],2020:[4,19,5,3],2021:[4,11,4,25],2022:[4,23,5,8],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],name:"Pont de l'Ascension"},{2018:[7,11,9,4],2019:[7,7,9,2],2020:[7,5,8,31],2021:[7,8,8,30],2022:[7,8,8,31],name:"Vacances d't"},{2018:[10,24,11,4],2019:[10,20,11,3],2020:[10,18,11,1],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],name:"Vacances de Nol"}]},Guadeloupe:{_state_code:"gua",SH:[{2018:[2,9,2,21],2019:[2,24,3,10],2020:[2,16,3,1],2021:[2,10,2,21],2022:[2,19,3,6],name:"Vacances de Carnaval"},{2018:[3,25,4,8],2019:[4,19,5,1],2020:[4,9,4,22],2021:[3,28,4,11],2022:[4,13,4,24],name:"Vacances de Pques"},{2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,28,5,29],2022:[5,27,5,27],name:"Pont de l'Ascension"},{2018:[7,7,9,3],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,6,8,30],2022:[7,7,8,31],name:"Grandes Vacances"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,2],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],name:"Vacances de Nol"}]},"Saint-Martin (France)":{_state_code:"mf",SH:[{2018:[2,9,2,21],2019:[2,24,3,10],2020:[2,16,3,1],2021:[2,10,2,21],name:"Vacances de Carnaval"},{2018:[3,25,4,8],2019:[4,19,5,1],2020:[4,9,4,22],2021:[3,28,4,11],name:"Vacances de Pques"},{2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,25,5,27],name:"Pont de l'Ascension"},{2018:[7,7,9,3],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,6,8,30],name:"Grandes Vacances"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,2],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],name:"Vacances de Nol"}]},"Saint-Barthlemy":{_state_code:"bl",SH:[{2018:[2,9,2,21],2019:[2,24,3,10],2020:[2,16,3,1],2021:[2,10,2,21],name:"Vacances de Carnaval"},{2018:[3,25,4,8],2019:[4,19,5,1],2020:[4,9,4,22],2021:[3,28,4,11],name:"Vacances de Pques"},{2019:[5,30,6,2],2020:[5,21,5,24],name:"Pont de l'Ascension"},{2018:[7,7,9,3],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,6,8,30],name:"Grandes Vacances"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,2],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],name:"Vacances de Nol"}]},Guyane:{_state_code:"guf",SH:[{2018:[2,11,2,25],2019:[2,24,3,10],2020:[2,16,3,1],2021:[2,14,2,28],2022:[2,19,3,6],name:"Vacances de Carnaval"},{2018:[3,30,4,15],2019:[4,19,5,1],2020:[4,10,4,26],2021:[4,2,4,18],2022:[4,14,5,1],name:"Vacances de Pques"},{2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,13,5,16],2022:[5,25,5,29],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,9,9,1],2020:[7,5,8,31],2021:[7,4,8,31],2022:[7,9,8,31],name:"Grandes Vacances"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,25,11,8],name:"Vacances de la Toussaint"},{2018:[12,23,1,5],2019:[12,22,1,5],2020:[12,20,1,3],name:"Vacances de Nol"}]},Martinique:{_state_code:"mtq",SH:[{2018:[2,8,2,18],2019:[2,24,3,10],2020:[2,23,3,8],2021:[2,7,2,21],2022:[2,19,3,6],name:"Vacances de Carnaval"},{2018:[3,25,4,8],2019:[4,14,4,28],2020:[4,5,4,19],2021:[3,28,4,11],2022:[4,9,4,24],name:"Vacances de Pques"},{2018:[5,8,5,13],2019:[5,30,6,2],2020:[5,14,5,15],2022:[5,27,5,27],name:"Pont de l'Ascension"},{2018:[7,7,9,3],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,8,30],2022:[7,7,8,31],name:"Grandes Vacances"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,25,11,8],name:"Vacances de la Toussaint"},{2018:[12,23,1,5],2019:[12,22,1,5],2020:[12,20,1,3],name:"Vacances de Nol"}]},Mayotte:{_state_code:"may",SH:[{2018:[2,25,3,11],2019:[2,24,3,10],2020:[3,1,3,15],2021:[2,28,3,14],2022:[2,26,3,13],name:"Vacances de Carnaval"},{2018:[5,6,5,13],2019:[4,27,5,5],2020:[5,3,5,10],2021:[5,1,5,16],2022:[4,30,5,15],name:"Vacances de Pques"},{2020:[5,21,5,24],name:"Pont de l'Ascension"},{2018:[7,8,8,22],2019:[7,7,8,22],2020:[7,5,8,23],2021:[7,7,8,22],2022:[7,6,8,23],name:"Grandes Vacances"},{2018:[10,7,10,21],2019:[10,13,10,27],2020:[10,11,10,25],name:"Vacances de la Toussaint"},{2018:[12,9,1,6],2019:[12,15,1,12],2020:[12,13,1,10],name:"Vacances de Nol"}]},"La Runion":{_state_code:"lre",SH:[{2018:[3,11,3,25],2019:[3,10,3,24],2020:[3,8,3,22],2021:[3,7,3,21],2022:[3,12,3,27],name:"Vacances aprs 3me priode"},{2018:[5,6,5,16],2019:[5,8,5,19],2020:[5,1,5,13],2021:[5,5,5,16],2022:[5,14,5,29],name:"Vacances aprs 4me priode"},{2018:[7,8,8,16],2019:[7,7,8,15],2020:[7,8,8,15],2022:[7,9,8,15],name:"Vacances hiver austral"},{2018:[10,14,10,28],2019:[10,13,10,27],2020:[10,11,11,25],name:"Vacances aprs 1re priode"},{2018:[12,23,1,27],2019:[12,20,1,26],2020:[12,20,1,24],name:"Vacances t austral"}]},"Nouvelle-Caldonie":{_state_code:"nc",SH:[{2018:[4,7,4,15],2019:[4,6,4,14],2020:[4,4,4,13],2021:[4,3,4,18],2022:[4,2,4,16],name:"Vacances 1re priode"},{2018:[6,9,6,24],2019:[6,8,6,23],2020:[6,6,6,21],2021:[6,5,6,20],2022:[6,4,6,18],name:"Vacances 2me priode"},{2018:[8,11,8,26],2019:[8,10,8,25],2020:[8,8,8,23],2021:[8,7,8,22],2022:[8,6,8,20],name:"Vacances 3me priode"},{2018:[10,13,10,18],2019:[10,12,10,27],2020:[10,10,10,25],2021:[10,9,10,24],2022:[10,8,10,22],name:"Vacances 4me priode"},{2018:[12,15,2,17],2019:[12,14,2,16],2020:[12,18,2,14],2021:[12,18,2,13],2022:[12,17,2,12],name:"Vacances d't"}]},"Polynsie franaise":{_state_code:"pf",SH:[{2018:[2,18,2,25],2019:[2,17,2,24],2020:[2,16,2,23],2021:[2,21,2,28],2022:[2,19,2,27],2023:[2,19,2,26],name:"Vacances de fvrier"},{2018:[3,30,4,15],2019:[4,7,4,22],2020:[3,29,4,13],2021:[4,6,4,18],2022:[4,2,4,18],2023:[4,2,4,16],name:"Vacances d'avril"},{2018:[5,20,5,27],2019:[5,26,6,2],2020:[5,17,5,24],2021:[5,25,5,30],2022:[5,21,5,29],2023:[5,21,5,27],name:"Vacances de mai"},{2018:[7,7,8,15],2019:[7,7,8,13],2020:[7,5,8,9],2021:[7,3,8,8],2022:[7,2,8,7],2023:[7,2,8,7],name:"Grandes Vacances"},{2018:[9,16,9,23],2019:[9,15,9,22],2020:[9,13,9,20],2021:[9,12,9,19],2022:[9,10,9,18],name:"Vacances de septembre"},{2018:[10,28,11,11],2019:[10,27,11,11],2020:[10,25,11,8],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances d'octobre-novembre"},{2018:[12,16,1,13],2019:[12,15,1,12],2020:[12,13,1,10],2021:[12,12,1,9],2022:[12,10,1,8],name:"Vacances de Nol"}]},"Saint-Pierre-et-Miquelon":{_state_code:"pm",SH:[{2018:[2,24,3,11],2019:[2,16,3,3],2020:[2,22,3,8],2021:[2,19,3,7],name:"Vacances d'Hiver"},{2018:[4,28,5,13],2019:[4,20,5,5],2020:[4,18,5,3],2021:[4,24,5,9],2022:[4,15,5,1],name:"Vacances de Printemps"},{2020:[5,21,5,24],2021:[5,13,5,16],2022:[5,26,5,29],name:"Pont de l'Ascension"},{2018:[6,30,9,6],2019:[7,4,9,4],2020:[7,4,9,2],2021:[7,3,9,1],2022:[7,1,8,31],name:"Vacances d't"},{2018:[10,27,11,4],2019:[10,26,11,5],2020:[10,22,11,1],name:"Vacances de la Toussaint"},{2018:[12,22,1,6],2019:[12,21,1,5],2020:[12,19,1,3],name:"Vacances de Nol"}]},"Wallis-et-Futuna":{_state_code:"wf",SH:[{2018:[4,1,4,15],2019:[3,31,4,14],2020:[3,29,4,13],2021:[4,3,4,18],name:"Vacances 1re priode"},{2018:[6,8,6,24],2019:[6,9,6,23],2020:[6,5,6,21],2021:[6,5,6,20],name:"Vacances 2me priode"},{2018:[8,10,8,26],2019:[8,11,8,25],2020:[8,9,8,23],2021:[8,7,8,22],name:"Vacances 3me priode"},{2018:[10,14,10,28],2019:[10,13,10,27],2020:[10,11,10,25],2021:[10,9,10,24],name:"Vacances 4me priode"},{2018:[12,16,2,10],2019:[12,15,2,9],2020:[12,13,2,14],2021:[12,18,2,19],name:"Vacances d't"}]}};k.PH,k.Bretagne,k.Normandie,k.Occitanie,k.Corse,k.Guadeloupe,k.Guyane,k.Martinique,k.Mayotte;var F={England:{PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"Early May bank holiday",variable_date:"firstMayMonday"},{name:"Spring bank holiday",variable_date:"lastMayMonday"},{name:"Summer bank holiday",variable_date:"lastAugustMonday"},{name:"Christmas",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},Wales:{PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"Early May bank holiday",variable_date:"firstMayMonday"},{name:"Spring bank holiday",variable_date:"lastMayMonday"},{name:"Summer bank holiday",variable_date:"lastAugustMonday"},{name:"Christmas",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]}};F.England,F.Wales;var ce={PH:[{name:"",fixed_date:[1,1]},{name:"",fixed_date:[1,6]},{name:" ",variable_date:"orthodox easter",offset:-48},{name:"25 ",fixed_date:[3,25]},{name:" ",variable_date:"orthodox easter",offset:-2},{name:"",variable_date:"orthodox easter",offset:0},{name:"  ",variable_date:"orthodox easter",offset:1},{name:"",fixed_date:[5,1]},{name:"  ",fixed_date:[8,15]},{name:"28 ",fixed_date:[10,28]},{name:"",fixed_date:[12,25]},{name:"2  ",fixed_date:[12,26]}],SH:[{2019:[1,30,1,30],2020:[1,30,1,30],name:" "},{2019:[4,22,5,6],2020:[4,13,4,26],name:""},{2019:[6,17,6,17],2020:[6,8,6,8],name:" "},{2019:[7,1,8,31],2020:[7,1,8,31],name:""},{2019:[11,17,11,17],name:""},{2018:[12,24,1,7],2019:[12,24,1,7],2020:[12,24,1,7],name:""}]};ce.PH,ce.SH;var q={PH:[{name:"jv",fixed_date:[1,1]},{name:"az 1848-as forradalom nnepe",fixed_date:[3,15]},{name:"nagypntek",variable_date:"easter",offset:-2},{name:"hsvtvasrnap",variable_date:"easter"},{name:"hsvthtf",variable_date:"easter",offset:1},{name:"pnksdvasrnap",variable_date:"easter",offset:49},{name:"pnksdhtf",variable_date:"easter",offset:50},{name:"a munka nnepe",fixed_date:[5,1]},{name:"az llamalapts nnepe",fixed_date:[8,20]},{name:"az 1956-os forradalom nnepe",fixed_date:[10,23]},{name:"mindenszentek",fixed_date:[11,1]},{name:"karcsony",fixed_date:[12,25]},{name:"karcsony msnap",fixed_date:[12,26]}],SH:[{2015:[4,2,4,7],2016:[3,24,3,29],2017:[4,13,4,18],name:"tavaszi sznet"},{2015:[6,16,8,31],2016:[6,16,8,31],2017:[6,16,8,31],name:"nyri sznet"},{2014:[10,27,10,31],2015:[10,26,10,30],2016:[11,2,11,4],name:"szi sznet"},{2014:[12,22,1,2],2015:[12,21,12,31],2016:[12,22,1,2],name:"tli sznet"}]};q.PH,q.SH;var te={PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"St Patricks Day",fixed_date:[3,17]},{name:"St Patricks Day",variable_date:"nextMo-Fr17March"},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"May Bank Holiday",variable_date:"firstMayMonday"},{name:"June Bank Holiday",variable_date:"firstJuneMonday"},{name:"August Bank Holiday",variable_date:"firstAugustMonday"},{name:"October Bank Holiday (Halloween)",variable_date:"lastOctoberMonday"},{name:"Christmas",fixed_date:[12,25]},{name:"St Stephens Day",fixed_date:[12,26]},{name:"Bank Holiday",fixed_date:[12,27]}]};te.PH;var Q={PH:[{name:"Capodanno",fixed_date:[1,1]},{name:"Epifania",fixed_date:[1,6]},{name:"Liberazione dal nazifascismo (1945)",fixed_date:[4,25]},{name:"Pasqua",variable_date:"easter"},{name:"Luned di Pasqua",variable_date:"easter",offset:1},{name:"Festa del lavoro",fixed_date:[5,1]},{name:"Festa della Repubblica",fixed_date:[6,2]},{name:"Assunzione di Maria",fixed_date:[8,15]},{name:"Ognissanti",fixed_date:[11,1]},{name:"Immacolata Concezione",fixed_date:[12,8]},{name:"Natale di Ges",fixed_date:[12,25]},{name:"Santo Stefano",fixed_date:[12,26]}]};Q.PH;var ie={PH:[{name:"Nieuwjaarsdag",fixed_date:[1,1]},{name:"Goede vrijdag",variable_date:"easter",offset:-2},{name:"Tweede Paasdag",variable_date:"easter",offset:1},{name:"Koningsdag",fixed_date:[4,27]},{name:"Bevrijdingsdag",fixed_date:[5,5]},{name:"Hemelvaartsdag",variable_date:"easter",offset:39},{name:"Tweede Pinksterdag",variable_date:"easter",offset:50},{name:"Eerste Kerstdag",fixed_date:[12,25]},{name:"Tweede Kerstdag",fixed_date:[12,26]}]};ie.PH;var J={PH:[{name:"Nyttrsdag",fixed_date:[1,1]},{name:"Skjrtorsdag",variable_date:"easter",offset:-3},{name:"Langfredag",variable_date:"easter",offset:-2},{name:"Pskedag",variable_date:"easter"},{name:"2. Pskedag",variable_date:"easter",offset:1},{name:"1. Mai",fixed_date:[5,1]},{name:"Grunnlovsdagen",fixed_date:[5,17]},{name:"Kristi Himmelfartsdag",variable_date:"easter",offset:39},{name:"Pinsedag",variable_date:"easter",offset:49},{name:"2. Pinsedag",variable_date:"easter",offset:50},{name:"Juledag",fixed_date:[12,25]},{name:"2. Juledag",fixed_date:[12,26]}]};J.PH;var x={PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Day after New Year's Day",fixed_date:[1,2]},{name:"Waitangi Day",fixed_date:[2,6]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"Anzac Day",fixed_date:[4,25]},{name:"Queen's Birthday",variable_date:"firstJuneMonday"},{name:"Labour Day",variable_date:"firstOctoberMonday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]};x.PH;var I={PH:[{name:"Nowy Rok",fixed_date:[1,1]},{name:"wito Trzech Krli",fixed_date:[1,6]},{name:"Wielkanoc",variable_date:"easter"},{name:"Lany Poniedziaek - drugi dzie Wielkiej Nocy",variable_date:"easter",offset:1},{name:"Pierwszy Maja",fixed_date:[5,1]},{name:"Trzeci Maja",fixed_date:[5,3]},{name:"Zielone witki",variable_date:"easter",offset:49},{name:"Boe Ciao",variable_date:"easter",offset:60},{name:"Wniebowzicie Najwitszej Maryi Panny",fixed_date:[8,15]},{name:"Wszystkich witych",fixed_date:[11,1]},{name:"wito Niepodlegoci",fixed_date:[11,11]},{name:"pierwszy dzie Boego Narodzenia",fixed_date:[12,25]},{name:"drugi dzie Boego Narodzenia",fixed_date:[12,26]}]};I.PH;var R={PH:[{name:"Anul Nou",fixed_date:[1,1]},{name:"A doua zi de Anul Nou",fixed_date:[1,2]},{name:"Ziua Unirii Principatelor Romne (Ziua Unirii)",fixed_date:[1,24]},{name:"Patele ortodox",variable_date:"orthodox easter"},{name:"A doua zi de Pate ortodox",variable_date:"orthodox easter",offset:1},{name:"Ziua Muncii",fixed_date:[5,1]},{name:"Rusaliile",variable_date:"orthodox easter",offset:50},{name:"A doua zi de Rusalii",variable_date:"orthodox easter",offset:51},{name:"Adormirea Maicii Domnului",fixed_date:[8,15]},{name:"Sfntul Apostol Andrei",fixed_date:[11,30]},{name:"Ziua Naional (Ziua Marii Uniri)",fixed_date:[12,1]},{name:"Crciunul",fixed_date:[12,25]},{name:"A doua zi de Crciun",fixed_date:[12,26]}],SH:[{2015:[1,31,2,8],2016:[1,30,2,7],2021:[1,30,2,7],name:"Vacana intersemestrial"},{2015:[4,11,4,19],2016:[4,23,5,3],2021:[4,30,5,9],name:"Vacana de primvar"},{2015:[6,20,9,13],2016:[6,18,9,4],2021:[6,26,9,13],name:"Vacana de var"},{2014:[12,20,1,4],2015:[12,19,1,3],2020:[12,23,1,10],2021:[12,23,1,9],name:"Vacana de iarn"}]};R.PH,R.SH;var B={PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]}],:{_state_code:"tatarstan",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"-",fixed_date:[7,28]},{name:"  ",fixed_date:[8,30]},{name:"-",fixed_date:[10,4]},{name:"   ",fixed_date:[11,6]}]},:{_state_code:"bashkortostan",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"-",fixed_date:[7,28]},{name:"-",fixed_date:[10,4]},{name:"  ",fixed_date:[10,11]},{name:"  ",fixed_date:[12,24]}]},:{_state_code:"chuvashia",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"  ",fixed_date:[6,24]}]},"  ()":{_state_code:"sakha",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"  ",fixed_date:[4,27]},{name:"",fixed_date:[6,23]},{name:"   ",fixed_date:[9,27]}]},:{_state_code:"kalmykia",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:" ",fixed_date:[1,14]},{name:"    ()  ",fixed_date:[4,5]},{name:"   ",fixed_date:[6,6]},{name:"",fixed_date:[12,15]},{name:"     ",fixed_date:[12,28]}]}," ":{_state_code:"buryatia",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"",fixed_date:[1,14]}]}," ":{_state_code:"karelia",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"  ",fixed_date:[6,8]},{name:"     ",fixed_date:[9,30]}]},"  ":{_state_code:"udmurtia",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"   ",fixed_date:[5,31]}]},:{_state_code:"adygea",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"-",fixed_date:[7,28]},{name:"-",fixed_date:[10,4]},{name:"   ",fixed_date:[10,5]}]},:{_state_code:"dagestan",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"   ",fixed_date:[7,26]},{name:"-",fixed_date:[7,28]},{name:"   ",fixed_date:[9,15]},{name:"-",fixed_date:[10,4]}]},:{_state_code:"ingushetia",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"   ",fixed_date:[6,4]},{name:"-",fixed_date:[7,28]},{name:"-",fixed_date:[10,4]}]},"-":{_state_code:"karachay_cherkess",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"   ",fixed_date:[5,3]},{name:"-",fixed_date:[7,28]},{name:"-",fixed_date:[10,4]}]},:{_state_code:"chechnya",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"    ",fixed_date:[4,16]},{name:"-",fixed_date:[7,28]},{name:"-",fixed_date:[10,4]}]},"-":{_state_code:"kabardino_balkaria",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"   ",fixed_date:[3,28]},{name:"  ",fixed_date:[5,21]},{name:"-",fixed_date:[7,28]},{name:"  - ",fixed_date:[9,1]},{name:"-",fixed_date:[10,4]}]}," ":{_state_code:"altai",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"-",fixed_date:[1,14]}]}," ":{_state_code:"tuva",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"  ",fixed_date:[1,14]},{name:"  ",fixed_date:[8,15]}]}," ":{_state_code:"saratov",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"",fixed_date:[4,29]}]}," ":{_state_code:"bryansk",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"",fixed_date:[4,29]},{name:"   ",fixed_date:[9,17]}]}," ":{_state_code:"komi",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"  ",fixed_date:[8,22]}]}};B.PH;var ee={PH:[{name:"nyrsdagen",fixed_date:[1,1]},{name:"trettondedag jul",fixed_date:[1,6]},{name:"lngfredagen",variable_date:"easter",offset:-2},{name:"pskdagen",variable_date:"easter"},{name:"annandag psk",variable_date:"easter",offset:1},{name:"frsta maj",fixed_date:[5,1]},{name:"pingstdagen",variable_date:"easter",offset:49},{name:"nationaldagen",fixed_date:[6,6]},{name:"midsommardagen",variable_date:"nextSaturday20Jun"},{name:"alla helgons dag",variable_date:"nextSaturday31Oct"},{name:"juldagen",fixed_date:[12,25]},{name:"annandag jul",fixed_date:[12,26]}]};ee.PH;var ne={PH:[{name:"novo leto",fixed_date:[1,1]},{name:"Preernov dan, slovenski kulturni praznik",fixed_date:[2,8]},{name:"velikonona nedelja",variable_date:"easter"},{name:"velikononi ponedeljek",variable_date:"easter",offset:1},{name:"dan upora proti okupatorju",fixed_date:[4,27]},{name:"praznik dela 1",fixed_date:[5,1]},{name:"praznik dela 2",fixed_date:[5,2]},{name:"binkotna nedelja - binkoti",variable_date:"easter",offset:49},{name:"dan dravnosti",fixed_date:[6,25]},{name:"Marijino vnebovzetje",fixed_date:[8,15]},{name:"dan reformacije",fixed_date:[10,31]},{name:"dan spomina na mrtve",fixed_date:[11,1]},{name:"boi",fixed_date:[12,25]},{name:"dan samostojnosti in enotnosti",fixed_date:[12,26]}]};ne.PH;var z={PH:[{name:"De vzniku Slovenskej republiky",fixed_date:[1,1]},{name:"Zjavenie Pna",fixed_date:[1,6]},{name:"Vek piatok",variable_date:"easter",offset:-2},{name:"Vekonon nedea",variable_date:"easter"},{name:"Vekonon pondelok",variable_date:"easter",offset:1},{name:"Sviatok prce",fixed_date:[5,1]},{name:"De vazstva nad faizmom",fixed_date:[5,8]},{name:"Sviatok svtho Cyrila a Metoda",fixed_date:[7,5]},{name:"Vroie Slovenskho nrodnho povstania",fixed_date:[8,29]},{name:"De stavy Slovenskej republiky",fixed_date:[9,1]},{name:"Sviatok Panny Mrie Sedembolestnej",fixed_date:[9,15]},{name:"Sviatok vetkch svtch",fixed_date:[11,1]},{name:"De boja za slobodu a demokraciu",fixed_date:[11,17]},{name:"tedr de",fixed_date:[12,24]},{name:"Prv sviatok vianon",fixed_date:[12,25]},{name:"Druh sviatok vianon",fixed_date:[12,26]}]};z.PH;var X={PH:[{name:" ",fixed_date:[1,1]},{name:"",fixed_date:[1,7]},{name:"  ",fixed_date:[3,8]},{name:"",variable_date:"orthodox easter",offset:1},{name:"  1",fixed_date:[5,1]},{name:"  2",fixed_date:[5,2]},{name:" ",fixed_date:[5,9]},{name:"  ",fixed_date:[6,28]},{name:"  ",fixed_date:[8,24]}]};X.PH;var A={PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}],Alabama:{_state_code:"al",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Robert E. Lee/Martin Luther King Birthday",variable_date:"firstJanuaryMonday",offset:14},{name:"George Washington/Thomas Jefferson Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Confederate Memorial Day",variable_date:"firstAprilMonday",offset:21},{name:"Jefferson Davis' Birthday",variable_date:"firstJuneMonday"}]},Alaska:{_state_code:"ak",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Seward's Day",variable_date:"lastMarchMonday"},{name:"Alaska Day",fixed_date:[10,18]}]},Arizona:{_state_code:"az",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Dr. Martin Luther King Jr./Civil Rights Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Arkansas:{_state_code:"ar",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Dr. Martin Luther King Jr. and Robert E. Lee's Birthdays",variable_date:"firstJanuaryMonday",offset:14},{name:"George Washington's Birthday and Daisy Gatson Bates Day",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Eve",fixed_date:[12,24]},{name:"Christmas Day",fixed_date:[12,25]}]},California:{_state_code:"ca",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Csar Chvez Day",fixed_date:[3,31]}]},Colorado:{_state_code:"co",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Connecticut:{_state_code:"ct",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Lincoln's Birthday",fixed_date:[2,12]},{name:"Good Friday",variable_date:"easter",offset:-2}]},Delaware:{_state_code:"de",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Day After Thanksgiving",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Day",fixed_date:[12,25]},{name:"Good Friday",variable_date:"easter",offset:-2}]},"District of Columbia":{_state_code:"dc",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Emancipation Day",fixed_date:[4,16]}]},Florida:{_state_code:"fl",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Friday after Thanksgiving",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Day",fixed_date:[12,25]}]},Georgia:{_state_code:"ga",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Robert E. Lee's Birthday",variable_date:"firstNovemberThursday",offset:22},{name:"Washington's Birthday",fixed_date:[12,24]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Confederate Memorial Day",variable_date:"lastAprilMonday"}]},Guam:{_state_code:"gu",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Guam Discovery Day",fixed_date:[3,5]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Liberation Day",fixed_date:[7,21]},{name:"All Souls' Day",fixed_date:[11,2]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Lady of Camarin Day",fixed_date:[12,8]},{name:"Christmas Day",fixed_date:[12,25]}]},Hawaii:{_state_code:"hi",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Prince Jonah Kuhio Kalanianaole Day",fixed_date:[3,26]},{name:"Kamehameha Day",fixed_date:[6,11]},{name:"Statehood Day",variable_date:"firstAugustFriday",offset:14},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1}]},Idaho:{_state_code:"id",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr.-Idaho Human Rights Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Illinois:{_state_code:"il",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Lincoln's Birthday",fixed_date:[2,12]},{name:"Casimir Pulaski Day",variable_date:"firstMarchMonday"},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1}]},Indiana:{_state_code:"in",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Lincoln's Birthday",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Day",fixed_date:[12,25]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Primary Election Day",variable_date:"firstMayMonday",offset:1},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1}]},Iowa:{_state_code:"ia",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Lincoln's Birthday",fixed_date:[2,12]}]},Kansas:{_state_code:"ks",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Kentucky:{_state_code:"ky",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Eve",fixed_date:[12,24]},{name:"Christmas Day",fixed_date:[12,25]},{name:"New Year's Eve",fixed_date:[12,31]},{name:"Good Friday",variable_date:"easter",offset:-2}]},Louisiana:{_state_code:"la",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Mardi Gras",variable_date:"easter",offset:-47},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1}]},Maine:{_state_code:"me",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Patriots' Day",variable_date:"firstAprilMonday",offset:14}]},Maryland:{_state_code:"md",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Native American Heritage Day",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Day",fixed_date:[12,25]}]},Massachusetts:{_state_code:"ma",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Patriots' Day",variable_date:"firstAprilMonday",offset:14}]},Michigan:{_state_code:"mi",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Eve",fixed_date:[12,24]},{name:"Christmas Day",fixed_date:[12,25]},{name:"New Year's Eve",fixed_date:[12,31]}]},Minnesota:{_state_code:"mn",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Mississippi:{_state_code:"ms",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King's and Robert E. Lee's Birthdays",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Confederate Memorial Day",variable_date:"lastAprilMonday"}]},Missouri:{_state_code:"mo",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Truman Day",fixed_date:[5,8]}]},Montana:{_state_code:"mt",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1},{name:"Christmas Eve",fixed_date:[12,24]},{name:"New Year's Eve",fixed_date:[12,31]}]},Nebraska:{_state_code:"ne",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Arbor Day",variable_date:"lastAprilFriday"}]},Nevada:{_state_code:"nv",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Nevada Day",variable_date:"lastOctoberFriday"},{name:"Family Day",variable_date:"firstNovemberThursday",offset:22}]},"New Hampshire":{_state_code:"nh",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Civil Rights Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Day after Thanksgiving",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Day",fixed_date:[12,25]},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1}]},"New Jersey":{_state_code:"nj",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Lincoln's Birthday",fixed_date:[2,12]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1}]},"New Mexico":{_state_code:"nm",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Day after Thanksgiving",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Day",fixed_date:[12,25]}]},"New York":{_state_code:"ny",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Lincoln's Birthday",fixed_date:[2,12]},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1}]},"North Carolina":{_state_code:"nc",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Day after Thanksgiving",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Eve",fixed_date:[12,24]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Day after Christmas",fixed_date:[12,26]},{name:"Good Friday",variable_date:"easter",offset:-2}]},"North Dakota":{_state_code:"nd",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Ohio:{_state_code:"oh",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Oklahoma:{_state_code:"ok",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Day after Thanksgiving",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Day",fixed_date:[12,25]}]},Oregon:{_state_code:"or",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Pennsylvania:{_state_code:"pa",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Flag Day",fixed_date:[6,14]}]},"Puerto Rico":{_state_code:"pr",PH:[{name:"Da de Ao Nuevo",fixed_date:[1,1]},{name:"Da de Reyes",fixed_date:[1,6]},{name:"Natalicio de Eugenio Mara de Hostos",variable_date:"firstJanuaryMonday",offset:7},{name:"Natalicio de Martin Luther King, Jr.",variable_date:"firstJanuaryMonday",offset:14},{name:"Da de los Presidentes",variable_date:"firstFebruaryMonday",offset:14},{name:"Da de la Abolicin de Esclavitud",fixed_date:[3,22]},{name:"Viernes Santo",variable_date:"easter",offset:-2},{name:"Natalicio de Jos de Diego",variable_date:"firstAprilMonday",offset:14},{name:"Recordacin de los Muertos de la Guerra",variable_date:"lastMayMonday"},{name:"Da de la Independencia",fixed_date:[7,4]},{name:"Constitucin de Puerto Rico",fixed_date:[7,25]},{name:"Natalicio de Dr. Jos Celso Barbosa",fixed_date:[7,27]},{name:"Da del Trabajo",variable_date:"firstSeptemberMonday"},{name:"Da de la Raza Descubrimiento de Amrica",variable_date:"firstOctoberMonday",offset:7},{name:"Da del Veterano",fixed_date:[11,11]},{name:"Da del Descubrimiento de Puerto Rico",fixed_date:[11,19]},{name:"Da de Accin de Gracias",variable_date:"firstNovemberThursday",offset:21},{name:"Noche Buena",fixed_date:[12,24]},{name:"Da de Navidad",fixed_date:[12,25]}]},"Rhode Island":{_state_code:"ri",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Victory Day",variable_date:"firstAugustMonday",offset:7}]},"South Carolina":{_state_code:"sc",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Confederate Memorial Day",fixed_date:[5,10]}]},"South Dakota":{_state_code:"sd",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Native American Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Tennessee:{_state_code:"tn",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Eve",fixed_date:[12,24]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Good Friday",variable_date:"easter",offset:-2}]},Texas:{_state_code:"tx",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Friday after Thanksgiving",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Eve",fixed_date:[12,24]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Day after Christmas",fixed_date:[12,26]}]},"United States Virgin Islands":{_state_code:"vi",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Virgin Islands-Puerto Rico Friendship Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Three Kings Day",fixed_date:[1,6]},{name:"Transfer Day",fixed_date:[3,31]},{name:"Holy Thursday",variable_date:"easter",offset:-3},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"Emancipation Day",fixed_date:[7,3]},{name:"Hurricane Supplication Day",variable_date:"firstJulyMonday",offset:21},{name:"Hurricane Thanksgiving",fixed_date:[10,25]},{name:"Liberty Day",fixed_date:[11,1]},{name:"Christmas Second Day",fixed_date:[12,26]},{name:"New Year's Eve",fixed_date:[12,31]}]},Utah:{_state_code:"ut",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Pioneer Day",fixed_date:[7,24]}]},Vermont:{_state_code:"vt",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Town Meeting Day",variable_date:"firstMarchTuesday"},{name:"Battle of Bennington",variable_date:"firstAugustMonday",offset:14}]},Virginia:{_state_code:"va",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Washington:{_state_code:"wa",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},"West Virginia":{_state_code:"wv",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"West Virginia Day",fixed_date:[6,20]},{name:"Lincoln's Day",variable_date:"firstNovemberThursday",offset:22}]},Wisconsin:{_state_code:"wi",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Primary Election Day",variable_date:"firstAugustTuesday",offset:7},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1}]},Wyoming:{_state_code:"wy",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]}};A.PH,A.Alabama,A.Alaska,A.Arizona,A.Arkansas,A.California,A.Colorado,A.Connecticut,A.Delaware,A.Florida,A.Georgia,A.Guam,A.Hawaii,A.Idaho,A.Illinois,A.Indiana,A.Iowa,A.Kansas,A.Kentucky,A.Louisiana,A.Maine,A.Maryland,A.Massachusetts,A.Michigan,A.Minnesota,A.Mississippi,A.Missouri,A.Montana,A.Nebraska,A.Nevada,A.Ohio,A.Oklahoma,A.Oregon,A.Pennsylvania,A.Tennessee,A.Texas,A.Utah,A.Vermont,A.Virginia,A.Washington,A.Wisconsin,A.Wyoming;var Z={PH:[{name:"Tt Dng Lch",fixed_date:[1,1]},{name:"Ngy Quc t Ph n",fixed_date:[3,8]},{name:"Ngy thnh lp on Thanh nin Cng sn H Ch Minh",fixed_date:[3,26]},{name:"Ngy Quc t Thiu nhi",fixed_date:[6,1]},{name:"Ngy Nh gio Vit Nam",fixed_date:[11,20]},{name:"Ngy Gii phng min Nam, Thng nht t nc",fixed_date:[4,30]},{name:"Ngy Quc t lao ng",fixed_date:[5,1]},{name:"Quc Khnh",fixed_date:[9,2]},{name:"L Ging Sinh",fixed_date:[12,25]}]};Z.PH;var $e={PH:[{name:"New Year",fixed_date:[1,1]}],SH:[{2020:[6,21,9,23],2021:[6,21,9,23],2022:[6,21,9,23],2023:[6,21,9,23],2024:[6,21,9,23],2025:[6,21,9,23],2026:[6,21,9,23],2027:[6,21,9,23],2028:[6,21,9,23],2029:[6,21,9,23],2030:[6,21,9,23],2031:[6,21,9,23],2032:[6,21,9,23],name:"Summer"}]};$e.PH,$e.SH;var Ne=Object.freeze({__proto__:null,ar:g,at:m,au:y,be:b,br:w,ca:E,ch:P,ci:$,cz:C,de:L,dk:W,es:Y,fi:D,fr:k,gb:F,gr:ce,hu:q,ie:te,it:Q,nl:ie,no:J,nz:x,pl:I,ro:R,ru:B,se:ee,si:ne,sk:z,ua:X,us:A,vn:Z,xa:$e}),Me={"assuming ok for ko":{daytime:"sunrise-sunset",spring:"Mar-May",summer:"Jun-Aug",autumn:"Sep-Nov",winter:"Dec-Feb",_:"-","=":"-",frhling:"Mar-May",frhjahr:"Mar-May",sommer:"Jun-Aug",herbst:"Sep-Nov",gesloten:"off",feestdag:"PH",feestdagen:"PH",m:"Mo",w:"We",f:"Fr",primavera:"Mar-May",estate:"Jun-Aug",autunno:"Sep-Nov",inverno:"Dec-Feb"},"please use English written ok for ko":{"(?:an )?feiertag(?:s|en?)?":"PH"},"please use off for ko":{"ruhetage?":"off",geschlossen:"off",geschl:"off",except:"off"},"please use ok for workday":{wd:"Mo-Fr","on work days?":"Mo-Fr","weekdays?":"Mo-Fr","werktags?":"Mo-Sa",vardagar:"Mo-Fr"},"omit hour keyword":{h:""},"omit ko":{season:"",hs:"",hrs:"",hours:"",uhr:"",geffnet:"",zwischen:"",ist:"",durchgehend:"","ffnungszeit(?:en)?:?":""},"omit tag key":{"opening_hours\\s*=":""},"omit wrong keyword open end":{from:"",ab:"",von:""},"assuming open end for ko":{"(?:bis|till?|-|)? ?(?:open ?end|late)":"+"},"please use ok for uncertainty":{"~":"-","":"-"},"please use fallback rule":{otherwise:"||"},"please use ok for missing data":{"\\?":""},"please use ok for ko":{"":"-","":"-","":"-",:"-",to:"-",:"-",a:"-",as:"-",:"-",s:"-",s:"-",ate:"-","till?":"-",until:"-",through:"-",and:",","&":",","":":","'":'"',always:"24/7","always open":"24/7","always closed":"closed",nonstop:"24/7","24x7":"24/7",anytime:"24/7","all day":"24/7",daily:"Mo-Su",everyday:"Mo-Su","every day":"Mo-Su","all days":"Mo-Su","7j/7":"Mo-Su","7/7":"Mo-Su","7days":"Mo-Su","7 days":"Mo-Su","7 days a week":"Mo-Su","7 days/week":"Mo-Su","24 hours 7 days a week":"24/7","24 hours":"00:00-24:00",midday:"12:00",midnight:"00:00","(?:public )?holidays?":"PH","(?:one )?day after public holiday":"PH +1 day","(?:one )?day before public holiday":"PH -1 day","school ?holidays?":"SH","weekends?":"Sa,Su",daylight:"sunrise-sunset","on(?:_| )?appointments?":'"on appointment"',"by(?:_| )?appointments?":'"by appointment"',"nach(?: |_)vereinbarung":'"Nach Vereinbarung"',"nach(?: |_)absprache":'"Nach Absprache"',bis:"-",tglich:"Mo-Su","(?:schul)?ferien":"SH","(?:an|nur)? ?sonn-?(?: und |/)feiertag(?:s|en?)?":"PH,Su",und:",",u:",",auch:",",ferm:"off",et:",",:"-","jours fris":"PH",sundown:"sunset",morgendmmerung:"dawn",abenddmmerung:"dusk",sonnenaufgang:"sunrise",sonnenuntergang:"sunset",ostern:"easter"},"please use English abbreviation ok for so":{so:"Su"},"please use English abbreviation ok for ko":{sun:"Su","sundays?":"Su",mon:"Mo","mondays?":"Mo","tues?":"Tu","tuesdays?":"Tu","weds?":"We","wednesdays?":"We",thu:"Th","thurs?":"Th","thursdays?":"Th",fri:"Fr","fridays?":"Fr",sat:"Sa","saturdays?":"Sa",son:"Su","sonn-":"Su","sonntags?":"Su","montags?":"Mo",di:"Tu","die?":"Tu","dienstags?":"Tu",mi:"We","mit?":"We","mittwochs?":"We","don?":"Th","donnerstags?":"Th",fre:"Fr","freitags?":"Fr",sam:"Sa","samstags?":"Sa",dim:"Su",dimanche:"Su","lun?":"Mo",lundi:"Mo",mardi:"Tu",mer:"We",mercredi:"We","jeu?":"Th",jeudi:"Th","ven?":"Fr",vendredi:"Fr",samedi:"Sa","zon?":"Su",zontag:"Su",zondag:"Su",maandag:"Mo",din:"Tu",dinsdag:"Tu","woe?":"We",woensdag:"We",donderdag:"Th","vri?":"Fr",vrijdag:"Fr","zat?":"Sa",zaterdag:"Sa",nedle:"Su",ne:"Su",pondl:"Mo",po:"Mo",ter:"Tu",t:"Tu",steda:"We",st:"We",tvrtek:"Th",t:"Th",ptek:"Fr",p:"Fr",sobota:"Sa",martes:"Tu",mircoles:"We",jueves:"Th",viernes:"Fr",sbado:"Sa",domingo:"Su",lunes:"Mo",selasa:"Su",rabu:"Mo",kami:"Tu",jumat:"We",sabtu:"Th",minggu:"Fr",senin:"Sa",sndag:"Su",sndagar:"Su",mndag:"Mo",ma:"Mo",tisdag:"Tu",onsdag:"We",torsdag:"Th",fredag:"Fr",lrdag:"Sa",lrdagar:"Sa",niedziela:"Su",niedz:"Su",n:"Su",ndz:"Su",poniedziaek:"Mo",poniedzialek:"Mo",pon:"Mo",pn:"Mo",wtorek:"Tu",wt:"Tu",roda:"We",sroda:"We",r:"We",sr:"We",czwartek:"Th",czw:"Th",cz:"Th",pitek:"Fr",piatek:"Fr",pt:"Fr",sob:"Sa",:"Su",:"Su","voskresen'ye":"Su",:"Mo",:"Mo","ponedel'nik":"Mo",:"Tu",vtornik:"Tu",:"We",sreda:"We",:"Th",chetverk:"Th",:"Fr",pyatnitsa:"Fr",:"Sa",subbota:"Sa",sndag:"Su",mandag:"Mo",tirsdag:"Tu",lrdag:"Sa",dom:"Su","domenica?":"Su","domeniche?":"Su",lun:"Mo","luned?":"Mo","mar?":"Tu","marted?":"Tu","mer?":"We","mercoled?":"We",gio:"Th","gioved?":"Th",ven:"Fr","venerd?":"Fr",sab:"Sa","sabato?":"Sa",jnner:"Jan",january:"Jan",february:"Feb",march:"Mar",april:"Apr","june?":"Jun","july?":"Jul",august:"Aug",september:"Sep",sept:"Sep",october:"Oct",november:"Nov",december:"Dec",januar:"Jan",februar:"Feb","mrz?":"Mar",maerz:"Mar",mai:"May",juni:"Jun",juli:"Jul",okt:"Oct",oktober:"Oct",dez:"Dec",dezember:"Dec",janvier:"Jan",fvrier:"Feb",fv:"Feb",mars:"Mar",avril:"Apr",avr:"Apr",juin:"Jun",juillet:"Jul",aot:"Aug",ao:"Aug",septembre:"Sep",octobre:"Oct",novembre:"Nov",dcembre:"Dec",januari:"Jan",februari:"Feb",maart:"Mar",mei:"May",augustus:"Aug",gennaio:"Jan",febbraio:"Feb",marzo:"Mar",aprile:"Apr","giugno?":"Jun","luglio?":"Jul",agosto:"Aug",settembre:"Sep",ottobre:"Oct",dicembre:"Dec"},"please use ok for similar looking ko":{ff:"off"},"please use 24 hours time for ko":{pm:"pm","p.m.":"pm",:"pm",am:"am","a.m.":"am",:"am"},"please use restriction comment time for ko":{damen:'open "Damen"',herren:'open "Herren"'},"please use ok for typographically correct":{"":"-","":'"',"":'"',"":'"',"":'"',"":'"',"":'"',"":'"',"":'"',"":'"',"":'"',"":'"',"":'"'}},Ee={"unexpected token":'Unexpected token: "{{token}}" This means that the syntax is not valid at that point or it is currently not supported.',"no string":"The value (first parameter) is not a string.",nothing:"The value contains nothing meaningful which can be parsed.","nothing useful":"This rule does not contain anything useful. Please remove this empty rule.","combine rules":'Separate rules detected each of which only consists of a time selector. These rules should be written as one rule by combining them using "{{ok}}".',"value ends with token":'The value ends with "{{token}}". Please either continue after "{{token}}" or remove "{{token}}".',"programmers joke":"Might it be possible that you are a programmer and adding a semicolon after each statement is hardwired in your muscle memory ;) ? The thing is that the semicolon in the opening_hours syntax is defined as rule separator. So for compatibility reasons you should omit this last semicolon.","interpreted as year":'The number {{number}} will be interpreted as year. This is probably not intended. Times can be specified as "12:00".',"rule before fallback empty":"Rule before fallback rule does not contain anything useful","hour min separator":'Please use ":" as hour/minute-separator',"warnings severity":'The parameter optional_conf_parm["warnings_severity"] must be an integer number between 0 and 7 (inclusive). Given {{severity}}, expected one of the following numbers: {{allowed}}.',"optional conf parm type":"The optional_conf_parm parameter is of unknown type. Given {{given}}","conf param tag key missing":'The optional_conf_parm["tag_key"] is missing, required by optional_conf_parm["map_value"].',"conf param mode invalid":'The optional_conf_parm["mode"] parameter is a invalid number. Gave {{given}}, expected one of the following numbers: {{allowed}}.',"conf param unknown type":'The optional_conf_parm["{{key}}"] parameter is of unknown type. Given {{given}}, expected {{expected}}.',"library bug":'An error occurred during evaluation of the value "{{value}}". Please file a bug report or pull request: {{url}}.{{message}}',"library bug PR only":'An error occurred during evaluation of the value "{{value}}". Please submit a pull request: {{url}}.{{message}}',"use multi":'You have used {{count}} {{part2}} Rules can be separated by ";".',"selector multi 2a":"{{what}} in one rule. You may only use one in one rule.","selector multi 2b":'not connected {{what}} in one rule. This is probably an error. Equal selector types can (and should) always be written in conjunction separated by comma. Example for time ranges "12:00-13:00,15:00-18:00". Example for weekdays "Mo-We,Fr".',"selector state":"state keywords",comments:"comments","holiday ranges":"holiday ranges",months:"months",weekdays:"weekdays",ranges:"ranges","default state":"This rule which changes the default state (which is closed) for all following rules is not the first rule. The rule will overwrite all previous rules. It can be legitimate to change the default state to open for example and then only specify for which times the facility is closed.",vague:'This rule is not very explicit because there is no time selector being used. A time selector is the part specifying hours when the object is opened, for example "10:00-19:00". Please add a time selector to this rule or use a comment to make it more explicit.',"empty comment":"You have used an empty comment. Please either write something in the comment or use the keyword unknown instead.",separator_for_readability:"You have used the optional symbol <separator_for_readability> in the wrong place. Please check the syntax specification to see where it could be used or remove it.","strange 24/7":'You used 24/7 in a way that is probably not interpreted as "24 hours 7 days a week". For correctness you might want to use "open" or "closed" for this rule and then write your exceptions which should achieve the same goal and is more clear e.g. "open; Mo 12:00-14:00 off".',"public holiday":'There was no PH (public holiday) specified. This is not very explicit.{{part2}} Please either append a "PH off" rule if the amenity is closed on all public holidays or use something like "Sa,Su,PH 12:00-16:00" to say that on Saturdays, Sundays and on public holidays the amenity is open 12:00-16:00. If the amenity is open everyday including public holidays then you can make this explicit by writing "Mo-Su,PH". If you are not certain try to find it out. If you cant then do not add PH to the value and ignore this warning.',"public holiday part2":' Unfortunately the tag key (e.g. "opening_hours", or "lit") is unknown to opening_hours.js. This warning only applies to the key {{keys}}. If your value is for that key than read on. If not you can ignore the following.',"additional_rule_separator not used after time wrapping midnight":'This rule overwrites parts of the previous rule. This happens because normal rules apply to the whole day and overwrite any definition made by previous rules. You can make this rule an additional rule by using a "," instead of the normal ";" to separate the rules. Note that the overwriting can also be desirable in which case you can ignore this warning.',"additional rule which evaluates to closed":'This rule will be evaluated as closed but it was specified as additional rule. It should be specified as normal rule using ";" as rule separator. See https://wiki.openstreetmap.org/wiki/Key:opening_hours/specification#explain:rule_modifier:closed.',switched:'The selector "{{first}}" was switched with the selector "{{second}}" for readability and compatibility reasons.',"no colon after":'Please dont use ":" after {{token}}.',"number -5 to 5":"Number between -5 and 5 (except 0) expected.","one weekday constraint":"You can not use more than one constrained weekday in a month range","range constrained weekdays":"You can not use a range of constrained weekdays in a month range",expected:'"{{symbol}}" expected.',"range zero":"You can not use {{type}} ranges with period equals zero.","period one year+":'Please dont use {{type}} ranges with period equals one. If you want to express that a facility is open starting from a year without limit use "<year>+".',"period one":"Please dont use {{type}} ranges with period equals one.","month 31":"The day for {{month}} must be between 1 and 31.","month 30":"Month {{month}} doesn't have 31 days. The last day of {{month}} is day 30.","month feb":"Month {{month}} either has 28 or 29 days (leap years).","point in time":"hyphen (-) or open end (+) in time range {{calc}}expected. For working with points in time, the mode for {{libraryname}} has to be altered. Maybe wrong tag?",calculation:"calculation","time range continue":"Time range does not continue as expected","period continue":'Time period does not continue as expected. Example "/01:30".',"time range mode":'{{libraryname}} is running in "time range mode". Found point in time.',"point in time mode":'{{libraryname}} is running in "points in time mode". Found time range.',"outside current day":"Time range starts outside of the current day","two midnights":"Time spanning more than two midnights not supported","without minutes":'Time range without minutes specified. Not very explicit! Please use this syntax instead "{{syntax}}".',"outside day":"Time range starts outside of the current day","zero calculation":'Adding zero in a variable time calculation does not change the variable time. Please omit the calculation (example: "sunrise-(sunset-00:00)").',"calculation syntax":"Calculation with variable time is not in the right syntax",missing:'Missing "{{symbol}}"',"(time)":"(time)","bad range":"Bad range: {{from}}-{{to}}","] or more numbers":'"]" or more numbers expected.',"additional rule no sense":'An additional rule does not make sense here. Just use a ";" as rule separator. See https://wiki.openstreetmap.org/wiki/Key:opening_hours/specification#explain:additional_rule_separator',"unexpected token weekday range":"Unexpected token in weekday range: {{token}}","max differ":"There should be no reason to differ more than {{maxdiffer}} days from a {{name}}. If so tell us ","adding 0":"Adding 0 does not change the date. Please omit this.","unexpected token holiday":"Unexpected token (holiday parser): {{token}}","no holiday definition":"There are no holidays ({{name}}) defined for country {{cc}}.","no holiday definition state":"There are no holidays ({{name}}) defined for country {{cc}} and state {{state}}.","no country code":"Country code missing which is needed to select the correct holidays (see README how to provide it)","no SH definition":"School holiday {{name}}not defined for the year {{year}}.","movable no formula":"Movable day {{name}} can not not be calculated. Please add the formula how to calculate it.","movable not in year":"The movable day {{name}} plus {{days}} days is not in the year of the movable day anymore. Currently not supported.","year range one year":'A year range in which the start year is equal to the end year does not make sense. Please remove the end year. E.g. "{{year}} May 23"',"year range reverse":"A year range in which the start year is greater than the end year does not make sense. Please turn it over.","year past":"The year is in the past.","unexpected token year range":"Unexpected token in year range: {{token}}","week range reverse":"You have specified a week range in reverse order or leaping over a year. This is (currently) not supported.","week negative":"You have specified a week date less then one. A valid week date range is 1-53.","week exceed":"You have specified a week date greater then 53. A valid week date range is 1-53.","week period less than 2":'You have specified a week period which is less than two. If you want to select the whole range from week {{weekfrom}} to week {{weekto}} then just omit the "/{{period}}".',"week period greater than 26":'You have specified a week period which is greater than 26. 26.5 is the half of the maximum 53 week dates per year so a week date period greater than 26 would only apply once per year. Please specify the week selector as "week {{weekfrom}}" if that is what you want to express.',"unexpected token week range":"Unexpected token in week range: {{token}}","unexpected token month range":"Unexpected token in month range: {{token}}","day range reverse":"Range in wrong order. From day is greater than to day.","open end":"Specified as open end. Closing time was guessed.","date parameter needed":"Date parameter needed.","assuming ok for ko":'Assuming "{{ok}}" for "{{ko}}".',"please use ok for ko":'Please use notation "{{ok}}" for "{{ko}}".',"please use ok for similar looking ko":'Please use notation "{{ok}}" for "{{ko}}". Those characters look very similar but are not the same!',"rant degree sign used for zero":"Note that this is not a (superscript) zero but a degree sign which is misused as zero. A superscript zero is defined in Unicode () and would have been more appropriate/uniform here. But note that the use of none-ASCII digits is not allowed.","please use English written ok for ko":'Please use the English written "{{ok}}" for "{{ko}}".',"please use English abbreviation ok for ko":'Please use the English abbreviation "{{ok}}" for "{{ko}}".',"please use English abbreviation ok for so":'Please use the English abbreviation "{{ok}}" for "{{ko}}". Note that it might also mean Saturday in Polish.',"please use off for ko":'Please use "{{ok}}" for "{{ko}}". Example: "Mo-Fr 08:00-12:00; Tu off".',"please use ok for workday":'Assuming "{{ok}}" for "{{ko}}". Please avoid using "workday": https://wiki.openstreetmap.org/wiki/Talk:Key:opening_hours#need_syntax_for_holidays_and_workingdays',"omit hour keyword":'Please omit "{{ko}}" or use a colon instead. Example: "12:00-14:00".',"omit ko":'Please omit "{{ko}}".',"omit tag key":'Please omit "{{ko}}". The tag key must not be in the tag value.',"omit wrong keyword open end":'Please omit "{{ko}}". The tag key must not be in the tag value.',"assuming open end for ko":'Assuming "{{ok}}" (open end time) for "{{ko}}". Example: "12:00+".',"please use ok for uncertainty":'Please use notation "{{ok}}" for "{{ko}}". If there is reason to suspect uncertainty consider adding a comment. Example: 12:00-14:00 "only on sunshine".',"please use fallback rule":'Please use notation "{{ok}}" (Fallback rule) for "{{ko}}". Example: Mo-Fr 12:00-14:00; PH off || "by appointment"',"please use ok for missing data":"Please consider adding a FIXME tag instead.","please use 24 hours time for ko":"Please use time format in 24 hours notation instead of the legacy 12 hours variant. If the 12 hours variant is used you might have to convert the hours to the 24 hours notation.","please use restriction comment time for ko":'It looks like you might want to define additional restrictions. If that is the case and they can not be expressed by other syntax elements then you could use a comment together with the `open` keyword. Example: open "female only"',"please use ok for typographically correct":'Please use notation "{{ok}}" for "{{ko}}". Although using "{{ko}}" is typographical correct, it is not defined in the opening_hours syntax. Correct typography should be done on application level '},Ve={en:{opening_hours:{pretty:{off:"closed",SH:"school holidays",PH:"public holidays"}}},de:{opening_hours:{texts:{"unexpected token":'Unerwartetes Zeichen: "{{token}}" Das bedeutet, dass die Syntax an dieser Stelle nicht erkannt werden konnte.',"no string":"Der Wert (erster Parameter) ist kein String",nothing:"Der Wert enthlt nichts, was ausgewertet werden knnte.","nothing useful":"Diese Regel enthlt nichts ntzliches. Bitte entferne diese leere Regel.","combine rules":'Getrennte Regeln erkannt welche jeweils nur aus einer Zeit Bereichsdefinition bestehen. Diese Regeln sollten mittels "{{ok}}" zu einer Regel kombiniert werden.',"value ends with token":'Der Wert endet mit "{{token}}". Bitte ergnze den Wert nach "{{token}}" oder lsche "{{token}}".',"programmers joke":"Kann es sein, dass du ein Programmierer bist und das Hinzufgen eines Semikolons nach jedem Statement ist zwanghaft ;) ? Es ist so, dass das Semikolon in der opening_hours-Syntax als Trenner fr Regeln definiert ist. Bitte verzichte an dieser Stelle auf ein Semikolon.","interpreted as year":'Die Zahl {{number}} wird als Jahr interpretiert. Vermutlich ist das nicht beabsichtigt. Uhrzeiten werden als "12:00" angegeben.',"rule before fallback empty":"Die Regel vor der Fallback-Regel enthlt nichts ntzliches","hour min separator":'Bitte benutze ":" als Stunden/Minuten-Trenner',"warnings severity":'Der Parameter optional_conf_parm["warnings_severity"] muss eine ganze Zahl zwischen (einschlielich) 0 und (einschlielich) 7 sein. Gegeben: {{severity}}, erwartet: Eine der Zahlen: {{allowed}}.',"optional conf parm type":"Der optional_conf_parm Parameter hat einen unbekannten Typ. Gegeben: {{given}}","conf param tag key missing":'Der optional_conf_parm["tag_key"] fehlt, ist aber notwendig wegen optional_conf_parm["map_value"].',"conf param mode invalid":'Der optional_conf_parm["mode"]-Parameter ist eine ungltige Zahl. Gegeben: {{given}}, erwartet: Eine der Zahlen: {{allowed}}.',"conf param unknown type":'Der optional_conf_parm["{{key}}"] Parameter hat einen unbekannten Typ. Gegeben: {{given}}, erwartet: {{expected}}.',"library bug":'Bei der Auswertung des Wertes "{{value}}" ist ein Fehler aufgetreten. Bitte melde diesen Fehler oder korrigiere diesen mittels eines Pull Requests oder Patches: {{-url}}.{{message}}',"library bug PR only":'Bei der Auswertung des Wertes "{{value}}" ist ein Fehler aufgetreten. Du kannst dies korrigieren, indem du das Problem lst und in Form eines Pull Requests oder Patches zum Projekt beitrgst: {{-url}}.{{message}}',"use multi":'Du hast {{count}} {{-part2}} Einzelne Regeln knnen mit ";" getrennt werden.',"selector multi 2a":"{{what}} in einer Regel benutzt. Du kannst nur einen davon je Regel verwenden","selector multi 2b":'nicht verbundene {{what}} in einer Regel benutzt. Das ist vermutlich ein Fehler. Gleiche Selektoren knnen (und sollten) immer zusammen und durch Kommas getrennt geschrieben werden. Beispiel fr Zeitspannen "12:00-13:00,15:00-18:00". Beispiel fr Wochentage "Mo-We,Fr".',"selector state":"Status-Schlsselwrter (offen, geschlossen)",comments:"Kommentare",months:"Monate",weekdays:"Wochentage",ranges:"Zeitspannen","default state":"Diese Regel, welche den Standard-Status (d.h. geschlossen) fr alle folgenden Regeln ndert, ist nicht die erste Regel. Diese Regel berschreibt alle vorherigen Regeln. Es kann legitim sein, den Standard-Status z.B. auf geffnet festzulegen und dann nur die Zeiten, zu denen geschlossen ist, anzugeben.",vague:'Diese Regel ist nicht sehr aussagekrftig, da kein Zeit Selektor angegeben wurde. Ein Zeit Selektor ist die Komponente die angibt, zu welcher Tageszeit ein Objekt geffnet hat, zum Beispiel "10:00-19:00". Bitte fge eine Zeitangabe oder einen Kommentar hinzu, um dies zu verbessern.',"empty comment":'Du hast einen leeren Kommentar verwendet." Bitte schreibe entweder einen Kommentar-Text oder benutze stattdessen das Schlsselwort "unknown".',separator_for_readability:"Du hast das optionale Symbol <separator_for_readability> an der falschen Stelle benutzt. Bitte lies die Syntax-Spezifikation um zu sehen, wo es verwendet werden kann, oder entferne es.","strange 24/7":'Du hast 24/7 in einer Art verwendet, welche wahrscheinlich nicht als "24 Stunden, 7 Tage die Woche" interpretiert wird. Der Richtigkeit halber solltest du "open" oder "closed" fr diese Regel verwenden und dann die Ausnahmen angeben um das selbe Ziel zu erreichen. So ist es klarer  zum Beispiel "open; Mo 12:00-14:00 off".',"public holiday":'Es wurde keine Regel fr "PH" (feiertags) angegeben. Dies ist nicht sehr aussagekrftig.{{-part2}} Bitte fge die Regel "PH off" an, wenn die Einrichtung an allen Feiertagen geschlossen ist oder schreibe "Sa,Su,PH 12:00-16:00" um auszudrcken, dass Samstags, Sonntags und feiertags von 12:00-16:00 geffnet ist. Falls die Einrichtung tglich und an Feiertagen geffnet ist, kann dies explizit mittels "Mo-Su,PH" ausgedrckt werden. Wenn du dir im Unklaren bist, versuche die ffnungszeit zu klren. Falls das nicht mglich ist, lass die Angabe weg und ignoriere diese Warnung.',"public holiday part2":' Leider ist der "tag key" (beispielsweise "opening_hours", oder "lit") in opening_hours.js nicht bekannt. Diese Warnung betrifft nur die Keys: {{keys}}. Falls deine Angabe nicht fr einen dieser ist, ignoriere bitte folgenden Hinweis:',"additional_rule_separator not used after time wrapping midnight":'Diese Regel berschreibt Teile der vorherigen Regel. Der Grund dafr ist, dass normale Regeln auf den ganzen Tag zutreffen und alle Definitionen von vorhergehenden Regeln fr diesen Tag berschreiben. Du kannst diese Regel als additive Regel deklarieren indem du ein "," anstelle des blichen ";" fr diese Regel verwendest. Beachte das die berschreibung auch gewnscht sein kann und in so einem Fall diese Warnung ignoriert werden kann.',"additional rule which evaluates to closed":'Diese Regel wird als geschlossen ausgewertet aber wurde als additive Regel angegeben. Sie sollte als normale Regel mittels ";" definiert sein. Siehe https://wiki.openstreetmap.org/wiki/DE:Key:opening_hours/specification#explain:rule_modifier:closed.',switched:'Der Selektor "{{first}}" wurde fr eine bessere Lesbarkeit und der Vollstndigkeit halber mit "{{second}}" getauscht.',"no colon after":'Bitte Benutze kein ":" nach dem Token {{token}}.',"number -5 to 5":"Zahl zwischen -5 und 5 (auer 0) erwartet.","one weekday constraint":"Du kannst hchstens einen beschrnkten Wochentag in einer Monats-Spanne verwenden","range constrained weekdays":"Du kannst keine Wochentags-Spanne als Beschrnkung in einer Monats-Spanne verwenden",expected:'"{{-symbol}}" erwartet.',"range zero":'Du kannst keine {{type}}-Spanne mit Periode "0" verwenden.',"period one year+":'Bitte verwende keine {{type}}-Spannen mit Periode "1". Wenn du ausdrcken willst, das eine Einrichtung ab einem bestimmten Jahr immer offen ist, benutze bitte "<year>+".',"period one":'Bitte verwende keine {{type}}-Spannen mit Periode "1".',"month 31":"Die Tagesangabe fr {{month}} muss zwischen 1 und 31 liegen.","month 30":"Der Monat {{month}} hat keine 31 Tage. Der letzte Tag von {{month}} ist Tag 30.","month feb":'"Der Monat {{month}} hat entweder 28 oder 29 Tage (Schaltjahre)."',"point in time":"Erwarte Bindestrich (-) oder offenes Ende (+) in der Zeitspanne {{calc}}. Um mit Zeitpunkten zu arbeiten, muss der Modus fr  {{libraryname}} umgestellt werden. Vielleicht falsches OSM-tag verwendet?",calculation:"Berechnung","time range continue":"Die Zeitspanne geht nicht wie erwartet weiter","period continue":'Die Zeitspannen-Periode geht nicht wie erwartet weiter. Beispiel "/01:30".',"time range mode":'{{libraryname}} wurde im "Zeitspannen-Modus" aufgerufen. Zeitpunkt gefunden.',"time ranges":"Zeitspannen","holiday ranges":"Feiertagen","point in time mode":'{{libraryname}} wurde im "Zeitpunkt-Modus" aufgerufen. Zeitspanne gefunden.',"outside current day":"Zeitspanne beginnt auerhalb des aktuellen Tages","two midnights":"Zeitspanne welche mehrmals Mitternacht beinhaltet wird nicht untersttzt","without minutes":'Zeitspanne ohne Minutenangabe angegeben. Das ist nicht sehr eindeutig! Bitte verwende stattdessen folgende Syntax "{{syntax}}".',"outside day":"Die Zeitspanne beginnt auerhalb des aktuellen Tages","zero calculation":'Das Hinzufgen von 0 in einer variablen Zeitberechnung ndert die variable Zeit nicht. Bitte entferne die Zeitberechnung (Beispiel: "sunrise-(sunset-00:00)").',"calculation syntax":"Berechnung mit variabler Zeit hat nicht die korrekte Syntax",missing:'Fehlendes "{{symbol}}"',"(time)":"(Zeit)","bad range":"Ungltige Zeitspanne: {{from}}-{{to}}","] or more numbers":'"]" oder weitere Zahlen erwartet.',"additional rule no sense":'Eine weitere Regel an dieser Stelle ergibt keinen Sinn. Benutze einfach ";" als Trenner fr Regeln. Siehe https://wiki.openstreetmap.org/wiki/Key:opening_hours/specification#explain:additional_rule_separator',"unexpected token weekday range":"Unerwartes Token in Tages-Spanne: {{token}}","max differ":"Es sollte keinen Grund geben, mehr als {{maxdiffer}} Tage von einem {{name}} abzuweichen. Wenn ntig, teile uns dies bitte mit ","adding 0":"Addition von 0 verndert das Datum nicht. Bitte weglassen.","unexpected token holiday":"Unerwarteter Token (in Feiertags-Auswertung): {{token}}","no holiday definition":"{{name}} ist fr das Land {{cc}} nicht definiert.","no holiday definition state":"{{name}} ist fr das Land {{cc}} und Bundesland {{state}} nicht definiert.","no country code":"Der Lndercode fehlt. Dieser wird bentigt um die korrekten Feiertage zu bestimmen (siehe in der README wie dieser anzugeben ist)","no SH definition":"Die Schulferien {{name}}sind fr das Jahr {{year}} nicht definiert","movable no formula":"Der bewegliche Feiertag {{name}} kann nicht berechnet werden. Bitte fge eine entsprechende Formel hinzu.","movable not in year":"Der bewegliche Feiertag {{name}} plus {{days}} Tage befindet sich nicht mehr im selben Jahr. Aktuell nicht untersttzt.","year range one year":'Eine Jahres-Spanne mit gleichem Jahr als Beginn und Ende ergibt keinen Sinn. Bitte entferne das Ende-Jahr. zum Beispiel: "{{year}} May 23"',"year range reverse":"Eine Jahres-Spanne mit Beginn grer als Ende ergibt keinen Sinn. Bitte umdrehen.","year past":"Das Jahr liegt in der Vergangenheit.","unexpected token year range":"Unerwartetes Token in der Jahres-Spanne: {{token}}","week range reverse":"Du hast eine Wochen-Spanne in umgekehrter Reihenfolge oder mehrere Jahre umfassende angegeben. Dies ist aktuell nicht untersttzt.","week negative":"Du hast eine Kalenderwoche kleiner 1 angegeben. Korrekte Angaben sind 1-53.","week exceed":"Du hast eine Kalenderwoche grer als 53 angegeben. Korrekte Angaben sind 1-53.","week period less than 2":'Du hast eine Wochenperiode kleiner 2 angegeben. Wenn du die gesamte Spanne von {{weekfrom}} bis {{weekto}} angeben willst, lasse "/{{period}}" einfach weg.',"week period greater than 26":'Du hast eine Wochen-Periode grer als 26 angegeben. 26,5 ist die Hlfte des Maximums von 53 Wochen pro Jahr. Damit wrde eine Periode grer als 26 nur einmal pro Jahr auftreten. Bitte gibt den Wochen-Selektor als "week {{weekfrom}}" an, wenn es das ist, was du ausdrcken mchtest.',"unexpected token week range":"Unerwartetes Token in Wochen-Spanne: {{token}}","unexpected token month range":"Unerwartetes Token in Monats-Spanne: {{token}}","day range reverse":"Zeitspanne in falscher Reihenfolge. Beginn ist grer als Ende.","open end":'Angegeben als "open end". Schliezeit wurde geraten.',"date parameter needed":"Datumsparameter ntig.","assuming ok for ko":'"{{ko}}" wird als "{{ok}}" interpretiert.',"please use ok for ko":'Bitte verwende "{{-ok}}" anstelle von "{{-ko}}".',"please use ok for similar looking ko":'Please use notation "{{ok}}" for "{{ko}}". Those characters look very similar but are not the same!',"rant degree sign used for zero":"Beachte das dies ein Gradzeichen ist, welches als (hochgestellte) Null missbraucht wurde. Eine hochgestellte Null ist in Unicode definiert () und wre angebrachter/einheitlicher an dieser Stelle. Allerdings ist die Verwendung von nicht ASCII Ziffern nicht erlaubt.","please use English written ok for ko":'Bitte benutze die englische Schreibweise "{{ok}}" fr "{{ko}}".',"please use English abbreviation ok for ko":'Bitte benutze die englische Abkrzung "{{ok}}" fr "{{ko}}".',"please use English abbreviation ok for so":'Bitte benutze die englische Abkrzung "{{ok}}" fr "{{ko}}". Beachte das Samstag in Polnisch gemeint sein kann.',"please use off for ko":'Bitte benutze "{{ok}}" fr "{{ko}}". Beispiel: "Mo-Fr 08:00-12:00; Tu off".',"please use ok for workday":'"{{ko}}" wird als "{{ok}}" interpretiert. Werktag sollte nicht verwendet werden. Siehe https://wiki.openstreetmap.org/wiki/Talk:Key:opening_hours#need_syntax_for_holidays_and_workingdays',"omit hour keyword":'Bitte lasse "{{ko}}" weg oder verwende einen Doppelpunkt. Beispiel: "12:00-14:00".',"omit ko":'Bitte verzichte auf "{{ko}}".',"omit tag key":'Bitte lasse "{{ko}}" weg. Der Tag Schlssel darf nicht im Tag Wert sein.',"omit wrong keyword open end":'Bitte lasse "{{ko}}" weg. Falls du "open end" ausdrcken mchtest verwende bitte ein "+". Beispiel: "12:00+".',"assuming open end for ko":'"{{ko}}" wird als "{{ok}}" ("open end") interpretiert. Example: "12:00+".',"please use ok for uncertainty":'Bitte verwende "{{ok}}" fr "{{ko}}". Falls der begrndete Verdacht der Ungewissheit vorliegt ziehe die Verwendung eines Kommentars in Betracht. Beispiel: 12:00-14:00 "only on sunshine".',"please use fallback rule":'Bitte verwende "{{ok}}" (Fallback Regel) fr "{{ko}}". Beispiel: Mo-Fr 12:00-14:00; PH off || "nach Vereinbarung"',"please use ok for missing data":"Bitte verwende eine FIXME Notiz.","please use 24 hours time for ko":"Bitte verwende 24 Stunden Zeitangaben anstelle der veralteten 12 Stunden Variante. Falls die 12 Stunden Variante verwendet wird ist eventuelle eine Konvertierung notwendig.","please use restriction comment time for ko":'Es sieht so aus also mchtest du zustzliche Einschrnkungen fr eine ffnungszeit geben. Falls sich dies nicht mit der Syntax ausdrcken lsst knnen Kommentare verwendet werden. Zustzlich sollte eventuell das Schlsselwort `open` benutzt werden. Beispiel: open "Nur Frauen".',"please use ok for typographically correct":'Bitte verwende "{{-ok}}" fr "{{ko}}". Auch wenn "{{ko}}" typografisch korrekt ist, ist dies in der opening_hours Syntax nicht definiert. Korrekte Typographie sollte auf Anwendungsebene sichergestellt werden '},pretty:{off:"geschlossen",SH:"Schulferien",PH:"Feiertags"}}},eo:{opening_hours:{texts:{"assuming ok for ko":'"{{ko}}" estas interpretita kiel "{{ok}}".',"please use ok for ko":'Bonvolu uzi la esprimon "{{-ok}}" anstata "{{ko}}".',"please use English abbreviation ok for ko":'Bonvolu uzi la anglan mallongigon "{{ok}}" fr "{{ko}}".'},pretty:{off:"fermita",SH:"lernejaj ferioj",PH:"festotagoj"}}},fi:{opening_hours:{pretty:{off:"suljettu",SH:"koululomat",PH:"lailliset vapaapivt"}}},fr:{opening_hours:{texts:{"assuming ok for ko":`S'il vous plat utiliser "<ok>" pour "<ko>".`,"please use ok for ko":`S'il vous plat utiliser "{{-ok}}" pour "{{ko}}".`,"please use English abbreviation ok for ko":`S'il vous plat utiliser l'abrviation "{{-ok}}" pour "{{ko}}".`},pretty:{off:"ferm",SH:"vacances scolaires",PH:"vacances publiques"}}},nl:{opening_hours:{texts:{"please use English abbreviation ok for ko":'Neem de engelse afkorting "{{ok}}" voor "{{ko}}" alstublieft.'},pretty:{off:"gesloten",SH:"schoolvakantie",PH:"feestdagen"}}},ru:{opening_hours:{pretty:{off:"",SH:"",PH:""}}}};if(Ve.en,Ve.de,Ve.eo,Ve.fi,Ve.fr,Ve.nl,Ve.ru,!h.default.isInitialized)h.default.init({fallbackLng:"en",resources:Ve,getAsync:!0,useCookie:!0});else for(var qe in Ve)h.default.addResourceBundle(qe,"opening_hours",Ve[qe].opening_hours,!0);function _t(Qe,tt,st){var Oe={dawn:330,sunrise:360,sunset:1080,dusk:1110},Tt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],yn=["Su","Mo","Tu","We","Th","Fr","Sa"],St={su:[0,"weekday"],mo:[1,"weekday"],tu:[2,"weekday"],we:[3,"weekday"],th:[4,"weekday"],fr:[5,"weekday"],sa:[6,"weekday"],jan:[0,"month"],feb:[1,"month"],mar:[2,"month"],apr:[3,"month"],may:[4,"month"],jun:[5,"month"],jul:[6,"month"],aug:[7,"month"],sep:[8,"month"],oct:[9,"month"],nov:[10,"month"],dec:[11,"month"],day:["day","calcday"],days:["days","calcday"],sunrise:["sunrise","timevar"],sunset:["sunset","timevar"],dawn:["dawn","timevar"],dusk:["dusk","timevar"],easter:["easter","event"],week:["week","week"],open:["open","state"],closed:["closed","state"],off:["off","state"],unknown:["unknown","state"]},de={zero_pad_hour:!0,one_zero_if_hour_zero:!1,leave_off_closed:!0,keyword_for_off_closed:"off",rule_sep_string:" ",print_semicolon:!0,leave_weekday_sep_one_day_betw:!0,sep_one_day_between:",",zero_pad_month_and_week_numbers:!0,locale:"en"},U={opening_hours:{mode:0,warn_for_PH_missing:!0},collection_times:{mode:2},"opening_hours:.+":{mode:0},".+:opening_hours":{mode:0},".+:opening_hours:.+":{mode:0},smoking_hours:{mode:0},service_times:{mode:2},happy_hours:{mode:0},lit:{mode:0,map:{yes:'sunset-sunrise open "specified as yes: At night (unknown time schedule or daylight detection)"',automatic:'unknown "specified as automatic: When someone enters the way the lights are turned on."',no:'off "specified as no: There are no lights installed."',interval:'unknown "specified as interval"',limited:'unknown "specified as limited"'}}},H=60*24,pe=1e3*60*H,_e="opening_hours.js",De="https://github.com/opening-hours/"+_e,Be="en";typeof h.default=="object"&&(Be=h.default.language);var Re=function(M,V){if(typeof h.default=="object"&&typeof h.default.t=="function"&&typeof Be=="string"&&["de"].indexOf(Be)!==-1){var ye;h.default.language!==Be?ye=h.default.getFixedT(Be):ye=h.default.t;var we=ye("opening_hours:texts."+M,V);return we}var we=Ee[M];return typeof we>"u"&&(we=M),we.replace(/{{([^{}]*)}}/g,function(fe,Ae){return typeof V[Ae]<"u"?V[Ae]:fe})},nt,It,Yt,dt;if(typeof tt=="object"&&tt!==null)typeof tt.address=="object"&&(typeof tt.address.country_code=="string"&&(nt=tt.address.country_code),typeof tt.address.state=="string"?It=tt.address.state:typeof tt.address.county=="string"&&(It=tt.address.county)),typeof tt.lon=="string"&&typeof tt.lat=="string"&&(Yt=tt.lat,dt=tt.lon);else if(tt===null)nt="de",It="Baden-Wrttemberg",Yt="49.5400039",dt="9.7937133";else if(typeof tt<"u")throw"The nominatim_object parameter is of unknown type. Given "+typeof tt+", expected object.";var Kt=4,ke,rn=!1,nn,Ot;if(typeof st=="number")ke=st;else if(typeof st=="object"){if(typeof st.locale=="string"&&(Be=st.locale.split("-")[0]),re("mode","number")&&(ke=st.mode),re("warnings_severity","number")&&(Kt=st.warnings_severity,[0,1,2,3,4,5,6,7].indexOf(Kt)===-1))throw Re("warnings severity",{severity:Kt,allowed:"[ 0, 1, 2, 3, 4, 5, 6, 7 ]"});re("tag_key","string")&&(nn=st.tag_key),re("map_value","boolean")&&(rn=st.map_value)}else if(typeof st<"u")throw Re("optional conf parm type",{given:typeof st});if(typeof nn=="string")Ot=oe(nn),rn&&typeof U[Ot]=="object"&&typeof U[Ot].map=="object"&&typeof U[Ot].map[Qe]=="string"&&(Qe=U[Ot].map[Qe]);else if(rn)throw Re("conf param tag key missing");if(typeof ke>"u")typeof nn=="string"&&U[Ot]!==void 0&&typeof U[Ot].mode=="number"?ke=U[Ot].mode:ke=0;else if([0,1,2].indexOf(ke)===-1)throw Re("conf param mode invalid",{given:ke,allowed:"[ 0, 1, 2 ]"});if(typeof Qe!="string")throw Re("no string");if(/^(?:\s*;?)+$/.test(Qe))throw Re("nothing");for(var ft=[],Ut=!1,dr=!1,vn=!1,ln=he(Qe),vr="",un=!0,Lt=[],En={},ut=[],Ke=0;Ke<ln.length;Ke++){if(ln[Ke][0].length===0){ft.push([Ke,-1,Re("nothing useful")+(Ke===ln.length-1&&Ke>0&&!ln[Ke][1]?" "+Re("programmers joke"):"")]);continue}var At=0,dn=!1;do{if(At===ln[Ke][0].length)break;var ht={time:[],wraptime:[],weekday:[],holiday:[],week:[],month:[],monthday:[],year:[],date:[],fallback:ln[Ke][1],additional:!!At,meaning:!0,unknown:!1,comment:void 0,build_from_token_rule:void 0};ht.build_from_token_rule=[Ke,At,ut.length],At=Wt(ln[Ke][0],At,ht,Ke),typeof At=="object"?At=At[0]:At=0,ut.push([ln[Ke][0].slice(ht.build_from_token_rule[1],At===0?ln[Ke][0].length:At),ln[Ke][1],ln[Ke][2]]),dn&&ut.length>1&&ut[ut.length-1][0].unshift(ut[ut.length-2][0].pop()),dn=At!==0;var Bn=["year","holiday","month","monthday","week","weekday"];if(Bn.forEach(function(M){ht[M].length>0&&(ht.date.push(ht[M]),ht[M]=[])}),Lt.push(ht),ht.wraptime.length>0){for(var Mt={time:ht.wraptime,date:[],meaning:ht.meaning,unknown:ht.unknown,comment:ht.comment,wrapped:!0,build_from_token_rule:ht.build_from_token_rule},me=0;me<ht.date.length;me++){Mt.date.push([]);for(var le=0;le<ht.date[me].length;le++)Mt.date[Mt.date.length-1].push(ct(ht.date[me][le],-pe))}Lt.push(Mt)}}while(At)}function oe(M){var V,ye=!1;return Object.keys(U).forEach(function(we){ye!==!0&&(M===we?(V=we,ye=!0):new RegExp(we).test(M)&&(V=we))}),V}function re(M,V){if(typeof st[M]===V)return!0;if(typeof st[M]<"u")throw Re("conf param unknown type",{key:M,given:typeof st[M],expected:V});return!1}function G(M,V,ye,we){if(typeof we>"u"&&(we=ln),typeof M=="number"){var fe=0;return M===-1?fe=Qe.length-V:typeof we[M][0][V]>"u"?typeof we[M][0]&&V===-1?(fe=Qe.length,typeof we[M+1]=="object"&&typeof we[M+1][2]=="number"?fe-=we[M+1][2]:typeof we[M][2]=="number"&&(fe-=we[M][2])):(se("Bug in warning generation code which could not determine the exact position of the warning or error in value."),fe=Qe.length,typeof we[M][2]=="number"&&(fe-=we[M][2],console.warn("Last token for rule: "+JSON.stringify(we[M])),console.log(Qe.substring(0,fe)+" <--- ("+ye+")"),console.log(`
`)),console.warn("tokens_to_use[nrule][2] is undefined. This is ok if nrule is the last rule.")):(fe=Qe.length,typeof we[M][0][V+1]=="object"?fe-=we[M][0][V+1][2]:typeof we[M][2]=="number"&&(fe-=we[M][2])),Qe.substring(0,fe)+" <--- ("+ye+")"}else if(typeof M=="string")return M.substring(0,V)+" <--- ("+ye+")"}function se(M,V){return typeof M>"u"?M="":M=" "+M,typeof V!="string"&&(V="library bug"),M=Re(V,{value:Qe,url:De,message:M}),console.error(M),M}function he(M){for(var V=[],ye=[],we=!1;M!=="";){var fe=M.match(/^([a-z]{2,})\b((?:[.]| before| after)?)/i),Ae=void 0;if(fe&&fe[2]===""&&(Ae=St[fe[1].toLowerCase()]),typeof Ae=="object")ye.push(Ae.concat([M.length])),M=M.substr(fe[1].length);else if(fe=M.match(/^\s+/))M=M.substr(fe[0].length);else if(fe=M.match(/^24\/7/))ye.push([fe[0],fe[0],M.length]),M=M.substr(fe[0].length);else if(/^;/.test(M))V.push([ye,we,M.length]),M=M.substr(1),ye=[],we=!1;else if(/^[:.]/.test(M))M[0]==="."&&!Ut&&ft.push([-1,M.length-1,Re("hour min separator")]),ye.push([":","timesep",M.length]),M=M.substr(1);else if(fe=M.match(/^(?:PH|SH)/i))ye.push([fe[0].toUpperCase(),"holiday",M.length]),M=M.substr(2);else if(fe=M.match(/^[\u2070-\u209F\u00B2\u00B3\u00B9]{1,2}/)){var be={176:0,8304:0,185:1,178:2,179:3},Ue=fe[0].split("").map(function(We){var at=We.charCodeAt(0);if(typeof be[at]=="number")return be[at];if(8308<=at&&at<=8313)return at-8304;if(8320<=at&&at<=8329)return at-8320}).join(""),Ye="";if(ye.length>0&&Se(ye,ye.length-1,"number")&&(Ye+=":"),Ye+=Ue,!Ut){for(var ot=0;ot<=fe[0].length;ot++)M.charCodeAt(ot)===176&&ft.push([-1,M.length-(1+ot),Re("rant degree sign used for zero")]);ft.push([-1,M.length-fe[0].length,Re("please use ok for ko",{ko:fe[0],ok:Ye})])}M=Ye+M.substr(fe[0].length)}else if(fe=M.match(/^(&|_||||||=||ffnungszeit(?:en)?:?|opening_hours\s*=|\?|~|||always (?:open|closed)|24x7|24 hours 7 days a week|24 hours|7 ?days(?:(?: a |\/)week)?|7j?\/7|all days?|every day|(?:bis|till?|-|)? ?(?:open ?end|late)|(?:(?:one )?day (?:before|after) )?(?:school|public) holidays?|days?\b||||jours fris|on work days?|sonntags?|(?:nur |an )?sonn-?(?:(?: und |\/)feiertag(?:s|en?)?)?|(?:an )?feiertag(?:s|en?)?|(?:nach|on|by) (?:appointments?|vereinbarung|absprache)|p\.m\.|a\.m\.|[_a-z]+\b|||mo|tu|we|th|fr|sa|su|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)(\.?)/i)){var je=Ie(fe[1].toLowerCase(),M.length);if(typeof je=="object")ye.push([je[0],je[1],M.length]),M=M.substr(fe[0].length);else if(typeof je=="string"){if(je==="am"||je==="pm"){var lt=ye.length-1,Nt;lt>=0&&(lt-2>=0&&Se(ye,lt-2,"number","timesep","number")?(lt-=2,Nt=ye[lt]):Se(ye,lt,"number")&&(Nt=ye[lt]),typeof Nt=="object"&&(je==="pm"&&Nt[0]<12&&(Nt[0]+=12),je==="am"&&Nt[0]===12&&(Nt[0]=0),ye[lt]=Nt)),je=""}var vt=he(je)[0];if(vt[1]===!0)throw se();for(var ot=0;ot<vt[0].length;ot++)ye.push([vt[0][ot][0],vt[0][ot][1],M.length]);M=M.substr(fe[0].length)}else ye.push([M[0].toLowerCase(),M[0].toLowerCase(),M.length-1]),M=M.substr(1);typeof fe[2]=="string"&&fe[2]!==""&&!Ut&&ft.push([-1,M.length,Re("omit ko",{ko:fe[2]})])}else if(fe=M.match(/^(\d+)(?:([.])([^\d]))?/))Number(fe[1])>1900?(ye.push([Number(fe[1]),"year",M.length]),Number(fe[1])>=2100&&ft.push([-1,M.length-1,Re("interpreted as year",{number:Number(fe[1])})])):ye.push([Number(fe[1]),"number",M.length]),M=M.substr(fe[1].length+(typeof fe[2]=="string"?fe[2].length:0)),typeof fe[2]=="string"&&fe[2]!==""&&!Ut&&ft.push([-1,M.length,Re("omit ko",{ko:fe[2]})]);else if(/^\|\|/.test(M)){if(ye.length===0)throw G(-1,M.length-2,Re("rule before fallback empty"));V.push([ye,we,M.length]),ye=[],M=M.substr(2),we=!0}else if(fe=M.match(/^"([^"]+)"/))ye.push([fe[1],"comment",M.length]),M=M.substr(fe[0].length);else if(fe=M.match(/^(["'])([^"';|]*)(["'])/)){for(var rt=1;rt<=3;rt+=2){var je=Ie(fe[rt],M.length-(rt===3?fe[1].length+fe[2].length:0));if(typeof je!="string"&&fe[rt]!=='"')throw se("A character for error tolerance was allowed in the regular expression but is not covered by word_error_correction which is needed to format a proper message for the user.")}ye.push([fe[2],"comment",M.length]),M=M.substr(fe[0].length)}else/^(?:|\s)/.test(M)||ye.push([M[0].toLowerCase(),M[0].toLowerCase(),M.length]),M=M.substr(1)}return V.push([ye,we]),V}function Ie(M,V){var ye,we=St[M];return typeof we=="object"?we:(Object.keys(Me).forEach(function(fe){ye||Object.keys(Me[fe]).forEach(function(Ae){if(!ye&&new RegExp("^"+Ae+"$").test(M)){var be=Me[fe][Ae];Ut||ft.push([-1,V-M.length,Re(fe,{ko:M,ok:be})]),ye=be}})}),ye)}function Ce(M){if(Kt<4)return[];if(!Ut&&typeof M=="object"){for(var V=["year","month","week","holiday"],ye=["weekday","time","24/7","state","comment"],we=[],fe=[],Ae={},be=0;be<ut.length;be++)if(ut[be][0].length!==0){var Ue=[0,0,void 0];we[be]={},fe[be]=[];do{Ue=Xe(ut[be][0],Ue[1]);for(var Ye=0;Ye<=Ue[1];Ye++)typeof ut[be][0][Ye]=="object"&&ut[be][0][Ye][0]==="PH"&&(Ae.PH=!0);Ue[0]===Ue[1]&&ut[be][0][Ue[0]][0]==="24/7"&&(Ae["24/7"]=!0),typeof we[be][Ue[2]]!="object"?we[be][Ue[2]]=[Ue[1]]:we[be][Ue[2]].push(Ue[1]),fe[be].push(Ue[2]),Ue[1]++}while(Ue[1]<ut[be][0].length)}for(var be=0;be<we.length;be++){Object.keys(we[be]).forEach(function(it){we[be][it].length>1&&(ft.push([be,we[be][it][we[be][it].length-1],Re("use multi",{count:we[be][it].length,part2:/^(?:comment|state)/.test(it)?Re("selector multi 2a",{what:Re(it==="state"?"selector state":"comments")}):Re("selector multi 2b",{what:Re(it+(/^(?:month|weekday)$/.test(it)?"s":" ranges"))})})]),dr=!0)}),typeof we[be].state=="object"&&Object.keys(we[be]).length===1?be!==0&&ft.push([be,ut[be][0].length-1,Re("default state")]):typeof we[be].time>"u"&&(typeof we[be].state=="object"&&ut[be][0][we[be].state[0]][0]==="open"&&typeof we[be].comment>"u"||typeof we[be].comment>"u"&&typeof we[be].state>"u"&&typeof we[be]["24/7"]>"u")&&ft.push([be,ut[be][0].length-1,Re("vague")]),typeof we[be].comment=="object"&&ut[be][0][we[be].comment[0]][0].length===0&&ft.push([be,we[be].comment[0],Re("empty comment")]);for(var ot=0;ot<fe[be].length-1;ot++){var je=fe[be][ot],lt=fe[be][ot+1];(V.indexOf(je)!==-1&&V.indexOf(lt)!==-1||ye.indexOf(je)!==-1&&ye.indexOf(lt)!==-1)&&ut[be][0][we[be][je][0]][0]===":"&&ft.push([be,we[be][je][0],Re("separator_for_readability")])}if(typeof En[be]=="object"&&typeof En[be].time_wraps_over_midnight=="boolean"&&En[be].time_wraps_over_midnight===!0&&typeof we[be+1]=="object"&&typeof we[be+1]["rule separator"]>"u"&&ut[be+1][1]===!1){var Nt=[be,be+1].map(function(it){for(var Ze=0;Ze<V.length-1;Ze++)if(typeof we[it][V[Ze]]=="object")return!0;return!1}),vt=Nt.filter(function(it){return it}).length,rt=!1;if(typeof En[be]=="object"&&typeof En[be]=="object"&&typeof En[be].week_days=="object"&&typeof En[be+1]=="object"&&typeof En[be+1].week_days=="object")for(var ot=0;ot<En[be].week_days.length;ot++){var We=En[be].week_days[ot];if(En[be+1].week_days.indexOf(We===6?0:We+1)!==-1){rt=!0;break}}else rt=!0;var at=(st||{}).additional_rule_separator!==!1;vt<2&&rt&&at&&ft.push([be+1,ut[be+1][0].length-1,Re("additional_rule_separator not used after time wrapping midnight"),ut])}typeof ut[be][0][0]=="object"&&ut[be][0][0][0]===","&&ut[be][0][0][1]==="rule separator"&&typeof we[be].state=="object"&&(ut[be][0][we[be].state[0]][0]==="closed"||ut[be][0][we[be].state[0]][0]==="off")&&ft.push([be,ut[be][0].length-1,Re("additional rule which evaluates to closed"),ut])}var Rt=M.advance();if(Rt===!0&&Ae["24/7"]&&!Ut&&ft.push([-1,0,Re("strange 24/7")]),Kt>=5&&!Ae.PH&&!Ae["24/7"]&&!Ut&&(typeof nn=="string"&&U[Ot].warn_for_PH_missing||typeof nn!="string")){var Pt=[];Object.keys(U).forEach(function(xt){U[xt].warn_for_PH_missing&&Pt.push(xt)}),ft.push([-1,0,Re("public holiday",{part2:typeof nn!="string"?Re("public holiday part2",{keys:Pt.join(", ")}):""})])}fe.length>1&&fe.filter(function(xt){return xt.length===1&&xt[0]==="time"}).length===fe.length&&ft.push([-1,0,Re("combine rules",{ok:","})]),Fe()}Ut=!0;for(var hn=[],ot=0;ot<ft.length;ot++)hn.push(G(ft[ot][0],ft[ot][1],ft[ot][2],ft[ot][3]));return hn}function He(M,V){return typeof M[V][3]=="string"?3:M[V][1]==="comment"||M[V][1]==="state"||M[V][1]==="24/7"||M[V][1]==="rule separator"?1:!1}function Xe(M,V){for(var ye=V,we,fe;ye>=0&&(fe=He(M,ye),!fe);ye--);if(we=ye,fe===1)return we+1<M.length&&M[we+1][0]===":"&&we++,[ye,we,M[ye][fe]];for(we++;we<M.length;we++)if(He(M,we))return[ye,we-1,M[ye][fe]];return[ye,we-1,M[ye][fe]]}function Fe(M){var V={},ye=!1,we;vr="";var fe=[];typeof M=="object"&&(typeof M.conf=="object"&&(V=M.conf),typeof M.rule_index=="number"&&(we=M.rule_index),M.get_internals===!0&&(ye=!0)),Object.keys(de).forEach(function(it){typeof V[it]>"u"&&(V[it]=de[it])});for(var Ae=V.locale==="en"||V.locale==="all",be=Ae?Tt:[1,2,3,4,5,6,7,8,9,10,11,12].map(function(it){return new Date(2018,it-1,1).toLocaleString(V.locale,{month:"short"})}),Ue=Ae?yn:[1,2,3,4,5,6,7].map(function(it){return new Date(2017,0,it).toLocaleString(V.locale,{weekday:"short"})}),Ye=0;Ye<ut.length;Ye++)if(ut[Ye][0].length!==0){if(typeof we=="number"){if(we!==Ye)continue}else Ye!==0&&(vr+=ut[Ye][1]?V.rule_sep_string+"|| ":(ut[Ye][0][0][1]==="rule separator"?",":V.print_semicolon?";":"")+V.rule_sep_string);var ot=[0,0,void 0],je=[],lt=0;do{if(ot=Xe(ut[Ye][0],ot[1]),lt>50)throw se("Infinite loop.");ot[2]!=="rule separator"&&je.push([ot,Ar(ut[Ye][0],ot[0],ot[1],ot[2],V)]),ot[1]++,lt++}while(ot[1]<ut[Ye][0].length);var Nt=je.slice();dr||je.sort(function(it,Ze){var Et=["year","month","week","holiday","weekday","time","24/7","state","comment"];return Et.indexOf(it[0][2])-Et.indexOf(Ze[0][2])});var vt=vr.length;if(typeof V.locale=="string"&&V.locale!=="en"){var rt;h.default.language!==V.locale?rt=h.default.getFixedT(V.locale):rt=h.default.t;for(var We=0;We<je.length;We++){var at=je[We][0][2];if(at==="weekday")yn.forEach(function(it,Ze){je[We][1]=je[We][1].replace(new RegExp(it,"g"),Ue[Ze])});else if(at==="month")Tt.forEach(function(it,Ze){je[We][1]=je[We][1].replace(new RegExp(it,"g"),be[Ze])});else{var Rt=je[We][1].indexOf(":")===-1;Rt&&(je[We][1]=rt(["opening_hours:pretty."+je[We][1],je[We][1]]))}}}if(vr+=je.map(function(it){return it[1]}).join(" "),fe.push(je),!vn){for(var We=0,Pt=Nt.length;We<Pt;We++)if(Nt[We]!==je[We]){for(var hn=We+vt,xt=0;xt<=We;xt++)hn+=je[xt][1].length;ft.push([vr,hn,Re("switched",{first:je[We][0][2],second:Nt[We][0][2]})])}}}return vn=!0,ye?[fe,ut]:vr}function Se(M,V){if(V+arguments.length-2>M.length)return!1;for(var ye=0;ye<arguments.length-2;ye++)if(M[V+ye][1]!==arguments[ye+2])return!1;return!0}function ct(M,V){return function(ye){var we=M(new Date(ye.getTime()+V));return typeof we[1]>"u"?we:[we[0],new Date(we[1].getTime()-V)]}}function Wt(M,V,ye,we){for(var fe=!1,Ae=[];V<M.length;){if(Se(M,V,"weekday"))V=$n(M,V,ye,void 0,we);else if(Se(M,V,"24/7"))ye.time.push(function(){return[!0]}),V++;else if(Se(M,V,"holiday"))Se(M,V+1,",")?V=Rn(M,V,ye,!0):V=Rn(M,V,ye,!1),un=!1;else if(Se(M,V,"month","number")||Se(M,V,"month","weekday")||Se(M,V,"year","month","number")||Se(M,V,"year","event")||Se(M,V,"event"))V=Mn(M,V,we),un=!1;else if(Se(M,V,"year"))V=cr(M,V),un=!1;else if(Se(M,V,"month"))V=Zn(M,V);else if(Se(M,V,"week"))M[V][3]="week",V=Er(M,V);else if(V!==0&&V!==M.length-1&&M[V][0]===":"&&!(typeof Ae[1]=="string"&&Ae[1]==="time"))!Ut&&Se(M,V-1,"holiday")&&ft.push([we,V,Re("no colon after",{token:M[V-1][1]})]),V++;else if(Se(M,V,"number","timesep")||Se(M,V,"timevar")||Se(M,V,"(","timevar")||Se(M,V,"number","-"))V=Tn(M,V,ye,!1,we),Ae=[V,"time"];else if(Se(M,V,"state"))M[V][0]==="open"?ye.meaning=!0:M[V][0]==="closed"||M[V][0]==="off"?ye.meaning=!1:(ye.meaning=!1,ye.unknown=!0),fe=!0,V++,typeof M[V]=="object"&&M[V][0]===","&&(V=[V+1]);else if(Se(M,V,"comment"))ye.comment=M[V][0],fe||(ye.meaning=!1,ye.unknown=!0),fe=!0,V++,typeof M[V]=="object"&&M[V][0]===","&&(V=[V+1]);else if((V===0||V===M.length-1)&&Se(M,V,"rule separator"))V++;else{var be=Ce();throw G(we,V,Re("unexpected token",{token:M[V][1]}))+(be?" "+be.join("; "):"")}if(typeof V=="object"){M[V[0]-1][1]="rule separator";break}typeof Ae[0]=="number"&&Ae[0]!==V&&(Ae=[])}return V}function Ct(M,V){return new Date(M.getFullYear(),M.getMonth(),M.getDate(),0,V)}function Bt(M,V){var ye=V-M.getDay();return new Date(M.getFullYear(),M.getMonth(),M.getDate()+ye+(ye<0?7:0))}function pt(M,V,ye){for(;V<M.length;V++){if(Se(M,V,"number","-","number"))ye(M[V][0],M[V+2][0],V),V+=3;else if(Se(M,V,"-","number"))ye(-M[V+1][0],-M[V+1][0],V),V+=2;else if(Se(M,V,"number"))ye(M[V][0],M[V][0],V),V++;else throw G(Ke,V+Se(M,V,"-"),"Unexpected token in number range: "+M[V][1]);if(!Se(M,V,","))break}return V}function bt(M,V){for(var ye=0,we=pt(M,V,function(Ae,be,Ue){if(Ae===0||Ae<-5||Ae>5)throw G(Ke,Ue,Re("number -5 to 5"));if(Ae===be){if(ye!==0)throw G(Ke,Ue,Re("one weekday constraint"));ye=Ae}else throw G(Ke,Ue+2,Re("range constrained weekdays"))}),fe=V;fe<we;fe++)M[fe][4]="positive_number";if(!Se(M,we,"]"))throw G(Ke,we,Re("expected",{symbol:"]"}));return[ye,we+1]}function fn(M,V,ye,we){if(!Ut){if(V===0)throw G(Ke,M,Re("range zero",{type:ye}));V===1&&(typeof we=="string"&&we==="no_end_year"?ft.push([Ke,M,Re("period one year+",{type:ye})]):ft.push([Ke,M,Re("period one",{type:ye})]))}}function cn(M,V,ye,we,fe){var Ae=Bt(new Date(M,V+(we[0]>0?0:1),1),ye);return Ae.setDate(Ae.getDate()+(we[0]+(we[0]>0?-1:0))*7),typeof fe=="object"&&fe[1]&&Ae.setDate(Ae.getDate()+fe[0]),Ae}function Pn(M,V,ye,we){if(V<1||V>31)throw G(ye,we,Re("month 31",{month:Tt[M]}));if((M===3||M===5||M===8||M===10)&&V===31)throw G(ye,we,Re("month 30",{month:Tt[M]}));if(M===1&&V===30)throw G(ye,we,Re("month feb",{month:Tt[M]}))}function Tn(M,V,ye,we,fe){for(we||(M[V][3]="time");V<M.length;V++){var Ae=[],be=[];be[0]=Se(M,V,"number","timesep","number"),Ae[0]=Se(M,V,"(","timevar");var Ue,Ye;if(be[0]||Se(M,V,"timevar")||Ae[0]){var ot=!1,je=!1,lt=[0,0],Nt=[],vt;be[0]?Ue=Vn(M,fe,V+Ae[0]):(Nt[0]=M[V+Ae[0]][0],Ue=Oe[Nt[0]],Ae[0]&&(lt[0]=Zt(M,V),Ue+=lt[0]));var rt=V+(be[0]?3:Ae[0]?7:1)+1;if(!Se(M,rt-1,"-"))if(Se(M,rt-1,"+"))je=!0;else{if(ke===0)throw G(fe,V+(be[0]?typeof M[V+3]=="object"?3:2:Ae[0]?2:typeof M[V+1]=="object"?1:0),Re("point in time",{calc:Ae[0]?Re("calculation")+" ":"",libraryname:_e}));Ye=Ue+1,ot=!0}if(je)we===1&&(Ue+=H),Ue>=22*60?Ye=Ue+8*60:Ue>=17*60?Ye=Ue+10*60:Ye=H;else if(!ot){if(be[1]=Se(M,rt,"number","timesep","number"),Ae[1]=Se(M,rt,"(","timevar"),!be[1]&&!Se(M,rt,"timevar")&&!Ae[1])throw G(fe,rt-(typeof M[rt]=="object"?0:1),Re("time range continue"));be[1]?Ye=Vn(M,fe,rt):(Nt[1]=M[rt+Ae[1]][0],Ye=Oe[Nt[1]]),Ae[1]&&(lt[1]=Zt(M,rt),Ye+=lt[1])}if(V=rt+(ot?-1:be[1]?3:Ae[1]?7:!je),Se(M,V,"/","number")){if(Se(M,V+2,"timesep","number"))vt=Vn(M,fe,V+1),V+=4;else if(vt=M[V+1][0],V+=2,Se(M,V,"timesep"))throw G(fe,V,Re("period continue"));if(ke===0)throw G(fe,V-1,Re("time range mode",{libraryname:_e}));ot=!0}else if(Se(M,V,"+"))Tn(M,rt,ye,Ye<Ue?1:!0,fe),V++;else if(ke===1&&!ot)throw G(fe,rt,Re("point in time mode",{libraryname:_e}));if(typeof Yt=="string"?(!be[0]||!(be[1]||je||ot))&&(un=!1):Nt=[],!we&&Ue>=H)throw G(fe,rt-2,Re("outside current day"));if((Ye<Ue||be[0]&&be[1]&&Ue===Ye)&&(Ye+=H),Ye>H*2)throw G(fe,rt+(be[1]?4:Ae[1]?7:1)-2,Re("two midnights"));Ue===0&&Ye===H?ye.time.push(function(){return[!0]}):Ye>H?(ye.time.push(function(We,at,Rt,Pt,hn,xt,it,Ze){return function(Et){var Xt=Et.getHours()*60+Et.getMinutes();if(Rt[0]){var kt=d.default.getTimes(Et,Yt,dt)[Rt[0]];We=kt.getHours()*60+kt.getMinutes()+Pt[0]}if(Rt[1]){var Qt=d.default.getTimes(Et,Yt,dt)[Rt[1]];at=Qt.getHours()*60+Qt.getMinutes()+Pt[1],at+=H}else xt&&typeof it!="number"&&(at=We+1);if(typeof it=="number"){if(Xt<We)return[!1,Ct(Et,We)];if(Xt<=at)for(var Gt=We;Xt+it>=Gt;Gt+=it){if(Gt===Xt)return[!0,Ct(Et,Xt+1)];if(Xt<Gt)return[!1,Ct(Et,Gt)]}return[!1,Ct(Et,H)]}else return Xt<We?[!1,Ct(Et,We)]:[!0,Ct(Et,at),hn,Ze]}}(Ue,Ye,Nt,lt,je,ot,vt,we)),Ye-H>0&&(typeof En[fe]>"u"&&(En[fe]={}),En[fe].time_wraps_over_midnight=!0,ye.wraptime.push(function(We,at,Rt,Pt,hn,xt){return function(it){var Ze=it.getHours()*60+it.getMinutes();if(at[1]){var Et=d.default.getTimes(it,Yt,dt)[at[1]];We=Et.getHours()*60+Et.getMinutes()+Rt[1]}if(typeof hn=="number"){if(Ze<=We)for(var Xt=0;Ze+hn>=Xt;Xt+=hn){if(Xt===Ze)return[!0,Ct(it,Ze+1)];if(Ze<Xt)return[!1,Ct(it,Xt)]}}else if(Ze<We)return[!0,Ct(it,We),Pt,xt];return[!1,void 0]}}(Ye-H,Nt,lt,je,vt,we)))):ye.time.push(function(We,at,Rt,Pt,hn,xt,it){return function(Ze){var Et=Ze.getHours()*60+Ze.getMinutes();if(Rt[0]){var Xt=d.default.getTimes(Ze,Yt,dt)[Rt[0]];We=Xt.getHours()*60+Xt.getMinutes()+Pt[0]}if(Rt[1]){var kt=d.default.getTimes(Ze,Yt,dt)[Rt[1]];at=kt.getHours()*60+kt.getMinutes()+Pt[1]}else xt&&typeof it!="number"&&(at=We+1);if(typeof it=="number"){if(Et<We)return[!1,Ct(Ze,We)];if(Et<=at)for(var Qt=We;Et+it>=Qt;Qt+=it){if(Qt===Et)return[!0,Ct(Ze,Et+1)];if(Et<Qt)return[!1,Ct(Ze,Qt)]}return[!1,Ct(Ze,H)]}else return Et<We?[!1,Ct(Ze,We)]:Et<at?[!0,Ct(Ze,at),hn]:[!1,Ct(Ze,We+H)]}}(Ue,Ye,Nt,lt,je,ot,vt))}else if(Se(M,V,"number","-","number")){if(Ue=M[V][0]*60,Ye=M[V+2][0]*60,Ut||ft.push([fe,V+2,Re("without minutes",{syntax:(M[V][0]<10?"0":"")+M[V][0]+":00-"+(M[V+2][0]<10?"0":"")+M[V+2][0]+":00"})]),Ue>=H)throw G(fe,V,Re("outside day"));if(Ye<Ue&&(Ye+=H),Ye>H*2)throw G(fe,V+2,Re("two midnights"));Ye>H?(ye.time.push(function(We,at){return function(Rt){var Pt=Rt.getHours()*60+Rt.getMinutes();return Pt<We?[!1,Ct(Rt,We)]:[!0,Ct(Rt,at)]}}(Ue,Ye)),Ye-H>0&&(typeof En[fe]>"u"&&(En[fe]={}),En[fe].time_wraps_over_midnight=!0,ye.wraptime.push(function(We){return function(at){var Rt=at.getHours()*60+at.getMinutes();return Rt<We?[!0,Ct(at,We)]:[!1,void 0]}}(Ye-H)))):ye.time.push(function(We,at){return function(Rt){var Pt=Rt.getHours()*60+Rt.getMinutes();return Pt<We?[!1,Ct(Rt,We)]:Pt<at?[!0,Ct(Rt,at),je]:[!1,Ct(Rt,We+H)]}}(Ue,Ye)),V+=3}else{if(Se(M,V,"("))throw G(fe,V,'Missing variable time (e.g. sunrise) after: "'+M[V][1]+'"');if(Se(M,V,"number","timesep"))throw G(fe,V+1,'Missing minutes in time range after: "'+M[V+1][1]+'"');if(Se(M,V,"number"))throw G(fe,V+(typeof M[V+1]=="object"?1:0),'Missing time separator in time range after: "'+M[V][1]+'"');return[V]}if(!Se(M,V,","))break;typeof M[V+1]>"u"&&!Ut&&ft.push([fe,V,Re("value ends with token",{token:M[V][1]})])}return V}function Vn(M,V,ye){if(M[ye+2][0]>59)throw G(V,ye+2,"Minutes are greater than 59.");return M[ye][0]*60+M[ye+2][0]}function Zt(M,V){var ye;if(Se(M,V+2,"+")||Se(M,V+2,"-"))if(Se(M,V+3,"number","timesep","number"))if(Se(M,V+6,")")){var we=M[V+2][0]==="+"?"1":"-1",fe=Vn(M,Ke,V+3)*we;return fe===0&&ft.push([Ke,V+5,Re("zero calculation")]),fe}else ye=[V+6,". "+Re("missing",{symbol:")"})+"."];else ye=[V+5," "+Re("(time)")+"."];else ye=[V+2,". "+Re("expected",{symbol:'+" or "-'})];if(ye)throw G(Ke,ye[0],Re("calculation syntax")+ye[1])}function $n(M,V,ye,we,fe){for(we||(we=!0,M[V][3]="weekday");V<M.length;V++){if(Se(M,V,"weekday","[")){var Ae=[],be=pt(M,V+2,function(We,at,Rt){if(We===0||We<-5||We>5)throw G(fe,Rt,Re("number -5 to 5"));if(We===at)Ae.push(We);else if(We<at)for(var Pt=We;Pt<=at;Pt++){if(Pt===0||Pt<-5||Pt>5)throw G(fe,Rt+2,Re("number -5 to 5"));Ae.push(Pt)}else throw G(fe,Rt+2,Re("bad range",{from:We,to:at}))});if(!Se(M,be,"]"))throw G(fe,be+(typeof M[be]=="object"?0:-1),Re("] or more numbers"));var Ue=qt(M,be+1,6,"constrained weekdays");un=!1;for(var Ye=0;Ye<Ae.length;Ye++)ye.weekday.push(function(We,at,Rt){return function(Pt){var hn=Dt(Pt,!1),xt=new Date(Pt.getFullYear(),Pt.getMonth(),1),it=new Date(Pt.getFullYear(),Pt.getMonth()+1,1),Ze;Ze=cn(Pt.getFullYear(),Pt.getMonth(),We,[at]);var Et=new Date(Ze.getFullYear(),Ze.getMonth(),Ze.getDate()+Rt);if(Et.getTime()<xt.getTime())if(Ze.getTime()>=xt.getTime())Et=Bt(new Date(Pt.getFullYear(),Pt.getMonth()+(at>0?0:1)+1,1),We),Ze.setDate(Et.getDate()+(at+(at>0?-1:0))*7+Rt);else return[!1,it];else if(Et.getTime()>=it.getTime()&&Ze.getTime()>=it.getTime())return[!1,it];var Xt;if(Rt>0){if(Xt=Bt(new Date(Pt.getFullYear(),Pt.getMonth()+(at>0?0:1)-1,1),We),Xt.setDate(Xt.getDate()+(at+(at>0?-1:0))*7+Rt),hn===Dt(Xt,!1))return[!0,Ct(Pt,H)]}else if(Rt<0)if(Xt=Bt(new Date(Pt.getFullYear(),Pt.getMonth()+(at>0?0:1)+1,1),We),Xt.setDate(Xt.getDate()+(at+(at>0?-1:0))*7+Rt),Xt.getTime()>=it.getTime()){if(Et.getTime()>=it.getTime())return[!1,Xt]}else{if(Et.getTime()<it.getTime()&&Dt(Et,!1)===hn)return[!0,Ct(Pt,H)];Et=Xt}return Pt.getDate()===Et.getDate()?[!0,Ct(Pt,H)]:Pt.getDate()<Et.getDate()?[!1,Et]:[!1,it]}}(M[V][0],Ae[Ye],Ue[0]));V=be+1+Ue[1]}else if(Se(M,V,"weekday")){var ot=Se(M,V+1,"-","weekday"),je=M[V][0],lt=ot?M[V+2][0]:je,Nt=!0;if(lt<je){var vt=lt;lt=je-1,je=vt+1,Nt=!1}var rt=Array.apply(0,Array(lt-je+1)).map(function(We,at){return at+lt});typeof En[fe]>"u"&&(En[fe]={}),typeof En[fe].week_days=="object"?Array.prototype.push.apply(En[fe].week_days,rt):En[fe].week_days=rt,lt<je?ye.weekday.push(function(){return[!0]}):ye.weekday.push(function(We,at,Rt){return function(Pt){var hn=Pt.getDay();return hn<We||hn>at?[!Rt,Bt(Pt,We)]:[Rt,Bt(Pt,at+1)]}}(je,lt,Nt)),V+=ot?3:1}else{if(Se(M,V,"holiday"))return un=!1,Rn(M,V,ye,!0,we);throw Se(M,V-1,",")?G(fe,V-1,Re("additional rule no sense")):G(fe,V,Re("unexpected token weekday range",{token:M[V][1]}))}if(!Se(M,V,","))break}return V}function qt(M,V,ye,we){var fe=[0,0];if(fe[0]=Se(M,V,"+")||(Se(M,V,"-")?-1:0),fe[0]!==0&&Se(M,V+1,"number","calcday")){if(M[V+1][0]>ye)throw G(Ke,V+2,Re("max differ",{maxdiffer:ye,name:we}));fe[0]*=M[V+1][0],fe[0]===0&&!Ut&&ft.push([Ke,V+2,Re("adding 0")]),fe[1]=3}else fe[0]=0;return fe}function Rn(M,V,ye,we,fe){for(fe||(we?M[V][3]="weekday":M[V][3]="holiday");V<M.length;V++){if(Se(M,V,"holiday")){if(M[V][0]==="PH"){var Ae=xn(M[V][0]),be=qt(M,V+1,1,"public holiday"),Ue=function(Ye,ot){return function(je){for(var lt=Cn(Ye,je.getFullYear(),ot),Nt=Dt(je,!0),vt=0;vt<lt.length;vt++){var rt=Dt(lt[vt][0],!0);if(Nt<rt){if(ot[0]>0){var We=Cn(Ye,je.getFullYear()-1,ot),at=We[We.length-1],Rt=Dt(at[0],!0);if(Nt<Rt)return[!1,at[0]];if(Nt===Rt)return[!0,Ct(at[0],H),"Day after "+at[1]]}return[!1,lt[vt][0]]}else if(Nt===rt)return[!0,new Date(je.getFullYear(),je.getMonth(),je.getDate()+1),(ot[0]>0?"Day after ":ot[0]<0?"Day before ":"")+lt[vt][1]]}if(ot[0]<0){var Pt=Cn(Ye,je.getFullYear()+1,ot),hn=Pt[0],xt=Dt(hn[0],!0);if(Nt===xt)return[!0,Ct(hn[0],H),"Day before "+hn[1]]}return[!1,new Date(lt[0][0].getFullYear()+1,lt[0][0].getMonth(),lt[0][0].getDate())]}}(Ae,be);we?ye.weekday.push(Ue):ye.holiday.push(Ue),V+=1+be[1]}else if(M[V][0]==="SH"){var Ae=xn(M[V][0]),Ue=function(je){return function(lt){for(var Nt=Dt(lt),vt=0;vt<je.length;vt++){var rt=Sr(je[vt],lt.getFullYear(),!1);if(!(typeof rt>"u"))for(var We=0;We<rt.length;We+=4){var at=new Date(lt.getFullYear(),rt[2+We]-1,rt[3+We]+1),Rt=(rt[0+We]-1)*100+rt[1+We],Pt=(rt[2+We]-1)*100+rt[3+We];at=Dt(at);var hn=Pt<Rt;if(Nt<Rt){var xt=Sr(je[je.length-1],lt.getFullYear()-1,!1);if(typeof xt=="object"){var it=(xt[xt.length-4]-1)*100+xt[xt.length-3],Ze=(xt[xt.length-2]-1)*100+xt[xt.length-1];return it>Ze&&Nt<=Ze?[!0,new Date(lt.getFullYear(),xt[xt.length-2]-1,xt[xt.length-1]+1),je[je.length-1].name]:[!1,new Date(lt.getFullYear(),rt[0+We]-1,rt[1+We])]}else return[!1,new Date(lt.getFullYear(),rt[0+We]-1,rt[1+We])]}else{if(Rt<=Nt&&(Nt<=Pt||hn))return[!0,new Date(lt.getFullYear()+hn,rt[2+We]-1,rt[3+We]+1),je[vt].name];if(at===Nt)return We+4<rt.length?(We+=4,[!1,new Date(lt.getFullYear(),rt[0+We]-1,rt[1+We])]):[!1,new Date(lt.getFullYear(),rt[2+We]-1,rt[3+We]+2)]}}}throw se(Re("no SH definition",{name:"",year:lt.getFullYear()}),"library bug PR only")}}(Ae);we?ye.weekday.push(Ue):ye.holiday.push(Ue),V+=1}}else{if(Se(M,V,"weekday"))return $n(M,V,ye,!0,Ke);throw Se(M,V-1,",")?G(Ke,V-1,Re("additional rule no sense")):G(Ke,V,Re("unexpected token holiday",{token:M[V][1]}))}if(!Se(M,V,","))break}return V}function Dt(M,V){return(V?M.getFullYear()*1e4:0)+M.getMonth()*100+M.getDate()}function Sr(M,V,ye){typeof ye!="boolean"&&(ye=!0);var we=M[V];if(typeof we>"u"&&(we=M.default,typeof we>"u")){if(ye)throw se(Re("no SH definition",{name:M.name+" ",year:V}),"library bug PR only");return}return we}function xn(M){if(typeof nt!="string")throw Re("no country code");if(!Ne[nt])throw se(Re("no holiday definition",{name:M,cc:nt}),"library bug PR only");var V=[];if(typeof It=="string"&&typeof Ne[nt][It]=="object"&&typeof Ne[nt][It][M]=="object"){var ye=Ne[nt][M]||[],we=Ne[nt][It][M];if(M==="PH")V=we;else if(!ye.length)V=we;else{var fe=ye.map(function(Ue){return Ue.name}),V=[];V.push.apply(V,ye),V.push.apply(V,we.filter(function(Ye){return fe.indexOf(Ye.name)===-1})),V.sort(function(Ue,Ye){var ot=Object.keys(Ue).find(function(vt){return vt!=="name"}),je=Object.keys(Ye).find(function(vt){return vt!=="name"}),lt=Ue[ot],Nt=Ye[je];return lt[0]-Nt[0]||lt[1]-Nt[1]})}}else if(Ne[nt][M]){var Ae=Ne[nt][M];switch(M){case"PH":Ae.forEach(function(be){"only_states"in be&&be.only_states.indexOf(It)===-1||V.push(be)});break;case"SH":V=Ae;break}}else throw se(Re("no holiday definition state",{name:M,cc:nt,state:It}),"library bug PR only");if(V.length===0)throw se(Re("no holiday definition",{name:M,cc:nt}),"library bug PR only");return V}function Vt(M){var V=Math.floor(M/100),ye=M-19*Math.floor(M/19),we=Math.floor((V-17)/25),fe=V-Math.floor(V/4)-Math.floor((V-we)/3)+19*ye+15;fe=fe-30*Math.floor(fe/30),fe=fe-Math.floor(fe/28)*(1-Math.floor(fe/28)*Math.floor(29/(fe+1))*Math.floor((21-ye)/11));var Ae=M+Math.floor(M/4)+fe+2-V+Math.floor(V/4);Ae=Ae-7*Math.floor(Ae/7);var be=fe-Ae,Ue=3+Math.floor((be+40)/44),Ye=be+28-31*Math.floor(Ue/4),ot=M%4,je=M%7,lt=M%19,Nt=(19*lt+15)%30,vt=(2*ot+4*je-Nt+34)%7,rt=Nt+vt,We;rt<9?We=new Date(M,4-1,rt+4):rt+4<31?We=new Date(M,4-1,rt+4):We=new Date(M,5-1,rt-26);var at=new Date(M,2,0),Rt=at.getDate()-at.getDay(),Pt=new Date(M,4,24),hn=24-(6+Pt.getDay())%7,xt=new Date(M,6,1),it=xt.getDay()===0?2:1;function Ze(Qt,Gt){var sn=new Date(M,Qt,1);return 1+(7+Gt-sn.getDay())%7}function Et(Qt,Gt){var sn=new Date(M,Qt+1,0),Kn=(7+sn.getDay()-Gt)%7;return sn.getDate()-Kn}function Xt(Qt,Gt){var sn=Qt-Gt.getDay();return sn<0&&(sn+=7),Gt.setDate(Gt.getDate()+sn),Gt}function kt(Qt,Gt,sn){if(Qt>=Gt)throw se("Not implemented yet.");if(Qt<=sn.getDay()&&sn.getDay()<=Gt)return sn;var Kn=Qt-sn.getDay();return Kn<0&&(Kn+=7),sn.setDate(sn.getDate()+Kn),sn}return{easter:new Date(M,Ue-1,Ye),"orthodox easter":We,victoriaDay:new Date(M,4,hn),canadaDay:new Date(M,6,it),firstJanuaryMonday:new Date(M,0,Ze(0,1)),firstFebruaryMonday:new Date(M,1,Ze(1,1)),lastFebruarySunday:new Date(M,1,Rt),firstMarchMonday:new Date(M,2,Ze(2,1)),firstAprilMonday:new Date(M,3,Ze(3,1)),firstMayMonday:new Date(M,4,Ze(4,1)),firstJuneMonday:new Date(M,5,Ze(5,1)),firstJulyMonday:new Date(M,6,Ze(6,1)),firstAugustMonday:new Date(M,7,Ze(7,1)),firstSeptemberMonday:new Date(M,8,Ze(8,1)),firstSeptemberTuesday:new Date(M,8,Ze(8,2)),firstSeptemberSunday:new Date(M,8,Ze(8,0)),firstOctoberMonday:new Date(M,9,Ze(9,1)),firstNovemberMonday:new Date(M,10,Ze(10,1)),firstNovemberTuesday:new Date(M,10,Ze(10,2)),firstMarchTuesday:new Date(M,2,Ze(2,2)),firstAugustTuesday:new Date(M,7,Ze(7,2)),firstAugustFriday:new Date(M,7,Ze(7,5)),firstNovemberThursday:new Date(M,10,Ze(10,4)),lastMayMonday:new Date(M,4,Et(4,1)),lastMarchMonday:new Date(M,2,Et(2,1)),lastAprilMonday:new Date(M,3,Et(3,1)),lastAprilFriday:new Date(M,3,Et(3,5)),lastAugustMonday:new Date(M,7,Et(7,1)),lastSeptemberMonday:new Date(M,8,Et(8,1)),lastSeptemberFriday:new Date(M,8,Et(8,5)),lastOctoberMonday:new Date(M,9,Et(9,1)),lastOctoberFriday:new Date(M,9,Et(9,5)),nextSaturday20Jun:Xt(6,new Date(M,5,20)),nextSaturday31Oct:Xt(6,new Date(M,9,31)),nextWednesday16Nov:Xt(3,new Date(M,10,16)),"nextMo-Fr17March":kt(1,5,new Date(M,2,17)),"nextMo-Sa01May":kt(1,6,new Date(M,4,1)),"nextMo-Sa07August":kt(1,6,new Date(M,7,7)),"nextMo-Sa25December":kt(1,6,new Date(M,11,25))}}function Cn(M,V,ye){var we=Vt(V),fe=[],Ae;return M.forEach(function(be){if("fixed_date"in be)Ae=new Date(V,be.fixed_date[0]-1,be.fixed_date[1]);else if("variable_date"in be){var Ue=we[be.variable_date];if(!Ue)throw Re("movable no formula",{name:be.name});var Ye=0;if("offset"in be&&(Ye=be.offset),Ae=new Date(Ue.getFullYear(),Ue.getMonth(),Ue.getDate()+Ye),V!==Ae.getFullYear())throw Re("movable not in year",{name:be.variable_date,days:Ye})}else throw se("Unexpected object: "+JSON.stringify(be,null,"    "));ye[0]&&Ae.setDate(Ae.getDate()+ye[0]),fe.push([Ae,be.name])}),fe=fe.sort(function(be,Ue){return be[0].getTime()<Ue[0].getTime()?-1:be[0].getTime()>Ue[0].getTime()?1:0}),fe}function cr(M,V){for(M[V][3]="year";V<M.length;V++){if(Se(M,V,"year")){var ye=!1,we,fe;Se(M,V+1,"-","year","/","number")?(ye=!0,we=!0,fe=parseInt(M[V+4][0]),fn(V+4,fe,"year")):(ye=Se(M,V+1,"-","year"),we=Se(M,V+1,"/","number"),we?(fe=parseInt(M[V+2][0]),fn(V+2,fe,"year","no_end_year")):Se(M,V+1,"+")&&(fe=1,we=2));var Ae=parseInt(M[V][0]);if(ye&&M[V+2][0]<=Ae)throw M[V+2][0]===Ae?G(Ke,V,Re("year range one year",{year:Ae})):G(Ke,V,Re("year range reverse"));!ye&&Ae<new Date().getFullYear()&&ft.push([Ke,V,Re("year past")]),ye&&M[V+2][0]<new Date().getFullYear()&&ft.push([Ke,V+2,Re("year past")]),ht.year.push(function(be,Ue,Ye,ot,je,lt){return function(Nt){var vt=Nt.getFullYear(),rt=ot?parseInt(be[Ue+2][0]):Ye;if(vt<Ye)return[!1,new Date(Ye,0,1)];if(je){if(Ye<=vt){if(ot&&vt>rt)return[!1];if(lt>0)return(vt-Ye)%lt===0?[!0,new Date(vt+1,0,1)]:[!1,new Date(vt+lt-1,0,1)]}}else if(ot){if(vt<=rt)return[!0,new Date(rt+1,0,1)]}else if(vt===Ye)return[!0];return[!1]}}(M,V,Ae,ye,we,fe)),V+=1+(ye?2:0)+(we?we===2?1:2:0)}else throw Se(M,V-1,",")?G(Ke,V-1,Re("additional rule no sense")):G(Ke,V,Re("unexpected token year range",{token:M[V][1]}));if(!Se(M,V,","))break}return V}function Er(M,V){for(;V<M.length;V++){if(Se(M,V,"week")&&V++,Se(M,V,"number")){var ye=Se(M,V+1,"-","number"),we=0,fe=M[V][0],Ae=ye?M[V+2][0]:fe;if(fe>Ae)throw G(Ke,V+2,Re("week range reverse"));if(fe<1)throw G(Ke,V,Re("week negative"));if(Ae>53)throw G(Ke,ye?V+2:V,Re("week exceed"));if(ye&&(we=Se(M,V+3,"/","number"),we)){if(we=M[V+4][0],M[V+4][4]="positive_number",we<2)throw G(Ke,V+4,Re("week period less than 2",{weekfrom:fe,weekto:Ae,period:we}));if(we>26)throw G(Ke,V+4,Re("week period greater than 26",{weekfrom:fe}))}un&&(!(fe<=1&&Ae>=53)||we)&&(un=!1),!we&&fe===1&&Ae===53?ht.week.push(function(){return[!0]}):ht.week.push(function(be,Ue,Ye){return function(ot){var je=Ge(ot);if(je<be)return[!1,zt(be,ot)];if(je>Ue)return[!1,zt(be,ot)];if(Ye){var lt=(je-be)%Ye===0;return lt?[!0,zt(je+1,ot)]:[!1,zt(je+Ye-1,ot)]}return[!0,zt(Ue===53?1:Ue+1,ot)]}}(fe,Ae,we)),V+=1+(ye?2:0)+(we?2:0)}else throw Se(M,V-1,",")?G(Ke,V-1,Re("additional rule no sense")):G(Ke,V,Re("unexpected token week range",{token:M[V][1]}));if(!Se(M,V,","))break}return V}function Ge(M){M=new Date(+M),M.setHours(0,0,0,0),M.setDate(M.getDate()+4-(M.getDay()||7));var V=new Date(M.getFullYear(),0,1);return Math.ceil(((M-V)/864e5+1)/7)}function Ht(M,V){var ye=new Date(V,0,1+(M-1)*7),we=ye.getDay(),fe=ye;return we<=4?fe.setDate(ye.getDate()-ye.getDay()+1):fe.setDate(ye.getDate()+8-ye.getDay()),fe}function zt(M,V){for(var ye,we=-1;we<=1;we++)if(ye=Ht(M,V.getFullYear()+we),ye.getTime()>V.getTime())return ye;throw se()}function Zn(M,V,ye,we){for(we||(M[V][3]="month");V<M.length;V++){if(Se(M,V,"month","number")&&!Se(M,V+2,"timesep","number"))return Mn(M,V,Ke,!0);if(Se(M,V,"month")){var fe=Se(M,V+1,"-","month"),Ae=M[V][0],be=fe?M[V+2][0]:Ae;fe&&un?Ae!==(be+1)%12&&(un=!1):un=!1;var Ue=!0;if(be<Ae){var Ye=be;be=Ae-1,Ae=Ye+1,Ue=!1}var ot=function(je,lt,Nt){return function(vt){var rt=vt.getMonth();return lt<je?[!Nt]:rt<je||rt>lt?[!Nt,Kr(vt,je)]:[Nt,Kr(vt,lt+1)]}}(Ae,be,Ue);ye===!0?ht.monthday.push(ot):ht.month.push(ot),V+=fe?3:1}else throw G(Ke,V,Re("unexpected token month range",{token:M[V][1]}));if(!Se(M,V,","))break}return V}function Kr(M,V){return new Date(M.getFullYear(),V<M.getMonth()?V+12:V)}function Mn(M,V,ye,we){for(we||(M[V][3]="month");V<M.length;V++){var fe=[],Ae=[],be=[],Ue=[],Ye=[];fe[0]=Se(M,V,"year"),Ae[0]=Se(M,V+fe[0],"month","number"),be[0]=Se(M,V+fe[0],"event"),be[0]&&(Ue[0]=qt(M,V+fe[0]+1,200,"event like easter"));var ot;Se(M,V+fe[0],"month","weekday","[")?(Ye[0]=bt(M,V+fe[0]+3),Ue[0]=qt(M,Ye[0][1],6,"constrained weekdays"),ot=Ye[0][1]+(typeof Ue[0]=="object"&&Ue[0][1]?3:0)):ot=V+fe[0]+(be[0]?typeof Ue[0]=="object"&&Ue[0][1]?4:1:2);var je;if((Ae[0]||be[0]||Ye[0])&&Se(M,ot,"-")&&(fe[1]=Se(M,ot+1,"year"),je=ot+1+fe[1],Ae[1]=Se(M,je,"month","number"),Ae[1]||(be[1]=Se(M,je,"event"),be[1]?Ue[1]=qt(M,je+1,366,"event like easter"):Se(M,je,"month","weekday","[")&&(Ye[1]=bt(M,je+3),Ue[1]=qt(M,Ye[1][1],6,"constrained weekdays")))),fe[0]===fe[1]&&(Ae[1]||be[1]||Ye[1])){Ae[0]&&Pn(M[V+fe[0]][0],M[V+fe[0]+1][0],ye,V+fe[0]+1),Ae[1]&&Pn(M[je][0],M[je+1][0],ye,je+1);var lt=function(xt,it,Ze,Et,Xt,kt,Qt,Gt){return function(sn){var Kn=new Date(sn.getFullYear()+1,0,1),Nr,Gn;if(Xt[0]){if(Nr=Vt(Et[0]?parseInt(xt[it][0]):sn.getFullYear()),Gn=Nr[xt[it+Et[0]][0]],typeof kt[0]=="object"&&kt[0][1]){var ar=Gn.getFullYear();if(Gn.setDate(Gn.getDate()+kt[0][0]),ar!==Gn.getFullYear())throw G(Ze,it+Et[0]+kt[0][1]*3,Re("movable not in year",{name:xt[it+Et[0]][0],days:kt[0][0]}))}}else Gt[0]?Gn=cn(Et[0]?xt[it][0]:sn.getFullYear(),xt[it+Et[0]][0],xt[it+Et[0]+1][0],Gt[0],kt[0]):Gn=new Date(Et[0]?xt[it][0]:sn.getFullYear(),xt[it+Et[0]][0],xt[it+Et[0]+1][0]);var Jn;if(Xt[1]){if(Nr=Vt(Et[1]?parseInt(xt[Qt-1][0]):sn.getFullYear()),Jn=Nr[xt[Qt][0]],typeof kt[1]=="object"&&kt[1][1]){var Ii=Jn.getFullYear();if(Jn.setDate(Jn.getDate()+kt[1][0]),Ii!==Jn.getFullYear())throw G(Ze,Qt+kt[1][1],Re("movable not in year",{name:xt[Qt][0],days:kt[1][0]}))}}else Gt[1]?Jn=cn(Et[1]?xt[Qt-1][0]:sn.getFullYear(),xt[Qt][0],xt[Qt+1][0],Gt[1],kt[1]):Jn=new Date(Et[1]?xt[Qt-1][0]:sn.getFullYear(),xt[Qt][0],xt[Qt+1][0]+1);var an=!0;if(Jn<Gn){var pr=Jn;Jn=Gn,Gn=pr,an=!1}return sn.getTime()<Gn.getTime()?[!an,Gn]:sn.getTime()<Jn.getTime()?[an,Jn]:Et[0]?[!an]:[!an,Kn]}}(M,V,ye,fe,be,Ue,je,Ye);we===!0?ht.month.push(lt):ht.monthday.push(lt),V=(Ye[1]?Ye[1][1]:je+(be[1]?1:2))+(typeof Ue[1]=="object"?Ue[1][1]:0)}else if(Ae[0]){fe=fe[0];var Nt=M[V][0],vt=M[V+fe][0],rt=!0;do{var We=M[V+1+fe][0],at=Se(M,V+2+fe,"-","number"),Rt=void 0,Pt=M[V+fe+(at?3:1)][0]+1;if(at&&Se(M,V+fe+4,"/","number")&&(Rt=M[V+fe+5][0],M[V+fe+5][4]="positive_number",fn(V+fe+5,Rt,"day")),rt){var hn=V+fe+1+(at?2:0)+(Rt?2:0)+!(at||Rt);if(Se(M,hn,"timesep","number")&&(Se(M,hn+2,"+")||Se(M,hn+2,"-")||ke!==0))return Zn(M,V,!0,!0)}if(Pt<We)throw G(ye,V+fe+3,Re("day range reverse"));Pn(vt,We,ye,V+1+fe),Pn(vt,Pt-1,ye,V+fe+(at?3:1));var lt=function(it,Ze,Et,Xt,kt,Qt){return function(Gt){var sn=new Date(Gt.getFullYear()+1,0,1),Kn=new Date(Ze?it:Gt.getFullYear(),Et,Xt);if(Et===1&&Xt!==Kn.getDate())return[!1];var Nr=new Date(Kn.getFullYear(),Et,kt);if(Et===1&&at&&kt!==Nr.getDate())return[!1];if(Gt.getTime()<Kn.getTime())return[!1,Kn];if(Gt.getTime()>=Nr.getTime())return[!1,sn];if(!Qt)return[!0,Nr];var Gn=Math.floor((Gt.getTime()-Kn.getTime())/pe),ar=Gn%Qt;return ar===0?[!0,new Date(Gt.getFullYear(),Gt.getMonth(),Gt.getDate()+1)]:[!1,new Date(Gt.getFullYear(),Gt.getMonth(),Gt.getDate()+Qt-ar)]}}(Nt,fe,vt,We,Pt,Rt);we===!0?ht.month.push(lt):ht.monthday.push(lt),V+=2+fe+(at?2:0)+(Rt?2:0),rt=!1}while(Se(M,V,",","number"))}else if(be[0]){var lt=function(it,Ze,Et,Xt,kt){return function(Qt){var Gt=Vt(Xt?it[Ze][0]:Qt.getFullYear()),sn=Gt[it[Ze+Xt][0]];if(!sn)throw Re("movable no formula",{name:it[Ze+Xt][0]});if(kt[0]&&(sn.setDate(sn.getDate()+kt[0]),Qt.getFullYear()!==sn.getFullYear()))throw G(Et,Ze+Xt+kt[1],Re("movable not in year",{name:it[Ze+Xt][0],days:kt[0]}));return Qt.getTime()<sn.getTime()?[!1,sn]:sn.getMonth()*100+sn.getDate()===Qt.getMonth()*100+Qt.getDate()?[!0,new Date(Qt.getFullYear(),Qt.getMonth(),Qt.getDate()+1)]:[!1,new Date(Qt.getFullYear()+1,0,1)]}}(M,V,ye,fe[0],Ue[0]);we===!0?ht.month.push(lt):ht.monthday.push(lt),V+=fe[0]+be[0]+(typeof Ue[0][1]=="number"&&Ue[0][1]?3:0)}else if(Ye[0])V=Zn(M,V);else return Se(M,V,"month")?Zn(M,V,!0,!0):V;if(!Se(M,V,","))break}return V}this.getStatePair=function(M){for(var V=!1,ye,we=!1,fe,Ae,be=[],Ue=0;Ue<Lt.length;Ue++){for(var Ye=!0,ot=0;ot<Lt[Ue].date.length;ot++){for(var je=Lt[Ue].date[ot],lt=!1,Nt=0;Nt<je.length;Nt++){var vt=je[Nt](M);vt[0]&&(lt=!0,typeof vt[2]=="string"&&(fe=[vt[2],Ue])),(typeof ye>"u"||typeof vt[1]=="object"&&vt[1].getTime()<ye.getTime())&&(ye=vt[1])}if(!lt){Ye=!1;break}}Ye&&((Lt[Ue].date.length>0||Ue>0&&Lt[Ue].meaning&&Lt[Ue-1].date.length===0)&&(Lt[Ue].meaning||Lt[Ue].unknown)&&!Lt[Ue].wrapped&&!Lt[Ue].additional&&!Lt[Ue].fallback&&(be=[]),be.push(Ue))}for(var Ue=0;Ue<be.length;Ue++){var rt=be[Ue];Lt[rt].time.length===0&&(!Lt[rt].fallback||Lt[rt].fallback&&!(V||we))&&(V=Lt[rt].meaning,we=Lt[rt].unknown,Ae=rt);for(var We=0;We<Lt[rt].time.length;We++){var vt=Lt[rt].time[We](M);if(vt[0]&&(!Lt[rt].fallback||Lt[rt].fallback&&!(V||we))){if(V=Lt[rt].meaning,we=Lt[rt].unknown,Ae=rt,typeof fe=="object"&&fe[0]===Re("open end")&&(fe=void 0),vt[2]===!0&&(V||we)&&(fe=[Re("open end"),Ae],V=!1,we=!0,typeof Lt[rt].time[We+1]=="function")){var at=Lt[rt].time[We+1](M);!at[0]&&typeof at[1]=="object"&&Lt[rt].time[We](new Date(M.getTime()-1))[0]&&(V=!1,we=!1)}Lt[rt].fallback&&(typeof ye>"u"||typeof vt[1]<"u"&&vt[1]<ye)&&(ye=vt[1])}(typeof ye>"u"||typeof vt[1]=="object"&&vt[1]<ye)&&(ye=vt[1])}}return typeof Lt[Ae]=="object"&&typeof Lt[Ae].comment=="string"?fe=Lt[Ae].comment:typeof fe=="object"&&(fe[1]===Ae?fe=fe[0]:fe=void 0),[V,ye,we,fe,Ae]};function Ar(M,V,ye,we,fe){for(var Ae="",be=V;be<=ye;)Se(M,be,"weekday")?(!fe.leave_weekday_sep_one_day_betw&&be-V>1&&(Se(M,be-1,",")||Se(M,be-1,"-"))&&Se(M,be-2,"weekday")&&M[be][0]===(M[be-2][0]+1)%7&&(Ae=Ae.substring(0,Ae.length-1)+fe.sep_one_day_between),Ae+=yn[M[be][0]]):be-V>0&&we==="time"&&Se(M,be-1,"timesep")&&Se(M,be,"number")?Ae+=(M[be][0]<10?"0":"")+M[be][0].toString():we==="time"&&fe.zero_pad_hour&&be!==M.length&&Se(M,be,"number")&&Se(M,be+1,"timesep")?Ae+=(M[be][0]<10?M[be][0]===0&&fe.one_zero_if_hour_zero?"":"0":"")+M[be][0].toString():we==="time"&&be+2<=ye&&Se(M,be,"number")&&Se(M,be+1,"-")&&Se(M,be+2,"number")?(Ae+=(M[be][0]<10?M[be][0]===0&&fe.one_zero_if_hour_zero?"":"0":"")+M[be][0].toString(),Ae+=":00-"+(M[be+2][0]<10?"0":"")+M[be+2][0].toString()+":00",be+=2):Se(M,be,"comment")?Ae+='"'+M[be][0].toString()+'"':Se(M,be,"closed")?Ae+=fe.leave_off_closed?M[be][0]:fe.keyword_for_off_closed:be-V>0&&Se(M,be,"number")&&(we==="month"||we==="week")?Ae+=(Se(M,be-1,"month")||Se(M,be-1,"week")?" ":"")+(fe.zero_pad_month_and_week_numbers&&M[be][4]!=="positive_number"&&M[be][0]<10?"0":"")+M[be][0]:be-V>0&&Se(M,be,"month")&&Se(M,be-1,"year")?Ae+=" "+Tt[[M[be][0]]]:be-V>0&&Se(M,be,"event")&&Se(M,be-1,"year")?Ae+=" "+M[be][0]:Se(M,be,"month")?(Ae+=Tt[[M[be][0]]],be+1<=ye&&Se(M,be+1,"weekday")&&(Ae+=" ")):be+2<=ye&&(Se(M,be,"-")||Se(M,be,"+"))&&Se(M,be+1,"number","calcday")?(Ae+=" "+M[be][0]+M[be+1][0]+" day"+(Math.abs(M[be+1][0])===1?"":"s"),be+=2):be===ye&&we==="weekday"&&M[be][0]===":"||be===ye&&we==="time"&&M[be][0]===","||(Ae+=M[be][0].toString()),be++;return Ae}this.getState=function(M){var V=this.getIterator(M);return V.getState()},this.getUnknown=function(M){var V=this.getIterator(M);return V.getUnknown()},this.getStateString=function(M,V){var ye=this.getIterator(M);return ye.getStateString(V)},this.getComment=function(M){var V=this.getIterator(M);return V.getComment()},this.getMatchingRule=function(M){var V=this.getIterator(M);return V.getMatchingRule()},this.getWarnings=function(){var M=this.getIterator();return Ce(M)},this.prettifyValue=function(M){return this.getWarnings(),Fe(M)},this.getNextChange=function(M,V){var ye=this.getIterator(M);if(ye.advance(V))return ye.getDate()},this.isWeekStable=function(){return un},this.isEqualTo=function(M,V){if(typeof V>"u")var V=new Date;var ye;this.isWeekStable()&&M.isWeekStable()?ye=new Date(V.getTime()+pe*10):ye=new Date(V.getTime()+pe*366*5);for(var we=this.getIterator(V),fe=M.getIterator(V);we.advance(ye);){fe.advance(ye);var Ae=[];if(we.getDate().getTime()!==fe.getDate().getTime()&&Ae.push("getDate"),we.getState()!==fe.getState()&&Ae.push("getState"),we.getUnknown()!==fe.getUnknown()&&Ae.push("getUnknown"),we.getComment()!==fe.getComment()&&Ae.push("getComment"),Ae.length){var be={};return be[we.getDate().getTime()]=Ae,[!1,{matching_rule:we.getMatchingRule(),matching_rule_other:fe.getMatchingRule(),deviation_for_time:be}]}}return[!0]},this.getOpenIntervals=function(M,V){var ye=[],we=this.getIterator(M);for((we.getState()||we.getUnknown())&&ye.push([M,void 0,we.getUnknown(),we.getComment()]);we.advance(V);)we.getState()||we.getUnknown()?(ye.length!==0&&typeof ye[ye.length-1][1]>"u"&&(ye[ye.length-1][1]=we.getDate()),ye.push([we.getDate(),void 0,we.getUnknown(),we.getComment()])):ye.length!==0&&typeof ye[ye.length-1][1]>"u"&&(ye[ye.length-1][1]=we.getDate());return ye.length>0&&typeof ye[ye.length-1][1]>"u"&&(ye[ye.length-1][1]=V),ye},this.getOpenDuration=function(M,V){for(var ye=0,we=0,fe=this.getIterator(M),Ae=fe.getState()||fe.getUnknown()?M:void 0,be=fe.getState(),Ue=fe.getUnknown();fe.advance(V);)fe.getState()||fe.getUnknown()?(typeof Ae=="object"&&(Ue?we+=fe.getDate().getTime()-Ae.getTime():be&&(ye+=fe.getDate().getTime()-Ae.getTime())),Ae=fe.getDate(),be=fe.getState(),Ue=fe.getUnknown()):typeof Ae=="object"&&(Ue?we+=fe.getDate().getTime()-Ae.getTime():ye+=fe.getDate().getTime()-Ae.getTime(),Ae=void 0);return typeof Ae=="object"&&(Ue?we+=V.getTime()-Ae.getTime():ye+=V.getTime()-Ae.getTime()),[ye,we]},this.getIterator=function(M){return new function(V){typeof M>"u"&&(M=new Date);var ye=[void 0,M,void 0,void 0,void 0],we=V.getStatePair(M);this.getDate=function(){return ye[1]},this.setDate=function(fe){if(typeof fe!="object")throw Re("date parameter needed");ye=[void 0,fe,void 0,void 0,void 0],we=V.getStatePair(fe)},this.getState=function(){return we[0]},this.getUnknown=function(){return we[2]},this.getStateString=function(fe){return we[0]?"open":we[2]?"unknown":fe?"closed":"close"},this.getComment=function(){return we[3]},this.getMatchingRule=function(){if(!(typeof we[4]>"u"))return Lt[we[4]].build_from_token_rule[2]},this.advance=function(fe){if(typeof fe>"u")fe=new Date(ye[1].getTime()+pe*366*5);else if(fe.getTime()<=ye[1].getTime())return!1;do{if(typeof we[1]>"u")return!1;if(we[1].getTime()<=ye[1].getTime())throw"Fatal: infinite loop in nextChange";if(we[1].getTime()>=fe.getTime())return!1;ye=we,we=V.getStatePair(ye[1])}while(we[0]===ye[0]&&we[2]===ye[2]&&we[3]===ye[3]);return!0}}(this)}}return _t})})(opening_hours);const tn=class{static hhmm(e,t){return e==24?"00:00":Utils.TwoDigits(e)+":"+Utils.TwoDigits(t)}static ToString(e){if(e.length==0)return"";const t=[[],[],[],[],[],[],[]];for(const y of e)t[y.weekday].push(tn.hhmm(y.startHour,y.startMinutes)+"-"+tn.hhmm(y.endHour,y.endMinutes));const o=t.map(y=>y.sort().join(", ")),l=[];let d=0,h=0;function g(){const y=o[d];y!==""&&(d==h-1?l.push(`${tn.days[d]} ${y}`):l.push(`${tn.days[d]}-${tn.days[h-1]} ${y}`))}for(;h<7;h++)o[d]!=o[h]&&(g(),d=h);g();const m=l.join("; ");return m==="Mo-Su 00:00-00:00"?"24/7":m}static MergeTimes(e){const t=e.map(l=>{if(l.endHour===0&&l.endMinutes===0){const d={...l};return d.endHour=24,d}return l}),o=[];for(;t.length>0;){let l=t.pop(),d=!0;l.weekday==null&&(d=!1);for(let h=o.length-1;h>=0&&d;h--){let g=o[h];if(l.weekday==g.weekday){if(tn.startTimeLiesInRange(l,g)&&tn.endTimeLiesInRange(l,g)){d=!1;break}if(tn.startTimeLiesInRange(g,l)&&tn.endTimeLiesInRange(g,l)){o.splice(h,1);break}if(tn.startTimeLiesInRange(l,g)||tn.endTimeLiesInRange(l,g)||tn.startTimeLiesInRange(g,l)||tn.endTimeLiesInRange(g,l)){o.splice(h,1);let m=g.startHour,y=g.startMinutes;tn.startTime(l)<tn.startTime(g)&&(m=l.startHour,y=l.startMinutes);let b=g.endHour,w=g.endMinutes;tn.endTime(l)>tn.endTime(g)&&(b=l.endHour,w=l.endMinutes),t.push({startHour:m,startMinutes:y,endHour:b,endMinutes:w,weekday:g.weekday}),d=!1;break}}}d&&o.push(l)}return o.length!==e.length?o:e}static startTime(e){return e.startHour+e.startMinutes/60}static endTime(e){return e.endHour+e.endMinutes/60}static startTimeLiesInRange(e,t){return tn.startTime(t)<=tn.startTime(e)&&tn.startTime(e)<=tn.endTime(t)}static endTimeLiesInRange(e,t){return tn.startTime(t)<=tn.endTime(e)&&tn.endTime(e)<=tn.endTime(t)}static parseHHMMRange(e){if(e=="off")return null;const t=e.split("-"),o=tn.parseHHMM(t[0]),l=tn.parseHHMM(t[1]);return{startHour:o.hours,startMinutes:o.minutes,endHour:l.hours,endMinutes:l.minutes}}static ParseRule(e){try{if(e.trim()=="24/7")return tn.multiply([0,1,2,3,4,5,6],[{startHour:0,startMinutes:0,endHour:24,endMinutes:0}]);const t=e.trim().replace(/, */g,",").split(" ");if(t.length==1){let o=tn.ParseHhmmRanges(e),l=[0,1,2,3,4,5,6];return tn.multiply(l,o)}if(t.length==2){const o=tn.ParseWeekdayRanges(t[0]),l=tn.ParseHhmmRanges(t[1]);return tn.multiply(o,l)}return null}catch{return console.log("Could not parse weekday rule ",e),null}}static ParsePHRule(e){if(e==null||(e=e.trim(),!e.startsWith("PH")))return null;if(e=e.trim(),e.toLowerCase()==="ph off")return{mode:"off"};if(e.toLowerCase()==="ph open")return{mode:"open"};if(!e.startsWith("PH "))return null;try{const t=tn.parseHHMMRange(e.substring(2));return t===null?null:{mode:" ",start:tn.hhmm(t.startHour,t.startMinutes),end:tn.hhmm(t.endHour,t.endMinutes)}}catch{return null}}static simplify(e){return tn.ToString(tn.MergeTimes(tn.Parse(e)))}static Parse(e){if(e===void 0||e==="")return[];const t=[],o=e.split(";");for(const l of o)if(l!=="")try{const d=tn.ParseRule(l);d!==null&&t.push(...d)}catch(d){console.error("Could not parse ",l,": ",d)}return t}static allChangeMoments(e){const t=[],o=[],l=[],d=[];for(const h of e)for(const g of h){if(!g.isOpen&&!g.isSpecial)continue;const m=new Date(g.startDate);m.setHours(0,0,0,0);const y=(g.startDate-m)/1e3;t.indexOf(y)<0&&(t.push(y),o.push(tn.hhmm(g.startDate.getHours(),g.startDate.getMinutes())));let b=(g.endDate-m)/1e3;b>=24*60*60?l.indexOf(b)<0&&(l.push(b),d.push(tn.hhmm(g.endDate.getHours(),g.endDate.getMinutes()))):t.indexOf(b)<0&&(t.push(b),o.push(tn.hhmm(g.endDate.getHours(),g.endDate.getMinutes())))}return o.sort(),t.sort(),d.sort(),l.sort(),o.push(...d),t.push(...l),[t,o]}static CreateOhObject(e,t){return new opening_hoursExports(t,{lat:e._lat,lon:e._lon,address:{country_code:e._country.toLowerCase(),state:void 0}},{tag_key:"opening_hours"})}static GetRanges(e,t,o){const l=[[],[],[],[],[],[],[]],d=new Date(t);d.setDate(t.getDate()-1);const h=e.getIterator(d);let g;for(;h.advance(o);){g&&(g.endDate=h.getDate());const m=new Date(h.getDate());m.setHours(0,0,0,0),m.setDate(m.getDate()+1);const y={isSpecial:h.getUnknown(),isOpen:h.getState(),comment:h.getComment(),startDate:h.getDate(),endDate:m};g=y,!(y.comment===void 0&&!y.isOpen&&!y.isSpecial)&&(y.startDate<t||l[(y.startDate.getDay()+6)%7].push(y))}return l}static parseHHMM(e){if(e===void 0||e==null)return null;const t=e.trim().split(":");if(t.length!=2)return null;const o={hours:Number(t[0].trim()),minutes:Number(t[1].trim())};return isNaN(o.hours)||isNaN(o.minutes)?null:o}static ParseHhmmRanges(e){return e==="off"?[]:e.split(",").map(t=>t.trim()).filter(t=>t!=="").map(tn.parseHHMMRange).filter(t=>t!=null)}static ParseWeekday(e){return tn.daysIndexed[e.trim().toLowerCase()]}static ParseWeekdayRange(e){const t=e.split("-");if(t.length==1){const o=tn.ParseWeekday(e);return o==null?null:[o]}else if(t.length==2){let o=tn.ParseWeekday(t[0]),l=tn.ParseWeekday(t[1]);if((o??null)===null||(l??null)===null)return null;let d=[];for(let h=o;h<=l;h++)d.push(h);return d}else return null}static ParseWeekdayRanges(e){let t=[],o=e.split(",");for(const l of o){const d=tn.ParseWeekdayRange(l);if(d==null)return null;t.push(...d)}return t}static multiply(e,t){if((e??null)==null||(t??null)==null)return null;const o=[];for(const l of t)for(const d of e)o.push({weekday:d,startHour:l.startHour,startMinutes:l.startMinutes,endHour:l.endHour,endMinutes:l.endMinutes});return o}static getMondayBefore(e){e=new Date(e);const t=e.getDay(),o=e.getDate()-t+(t==0?-6:1);return new Date(e.setDate(o))}};let OH=tn;ge(OH,"days",["Mo","Tu","We","Th","Fr","Sa","Su"]),ge(OH,"daysIndexed",{mo:0,tu:1,we:2,th:3,fr:4,sa:5,su:6});class OpeningHoursRange extends BaseUIElement{constructor(t,o){super();ge(this,"_oh");ge(this,"_onDelete");this._oh=t,this._onDelete=o,this.SetClass("oh-timerange")}InnerConstructElement(){const t=this.getHeight(),o=this._oh,l=new FixedUiElement(Utils.TwoDigits(o.startHour)+":"+Utils.TwoDigits(o.startMinutes)),d=new FixedUiElement(Utils.TwoDigits(o.endHour)+":"+Utils.TwoDigits(o.endMinutes)),h=Svg.delete_icon_ui().SetClass("rounded-full w-6 h-6 block bg-black").onClick(()=>{this._onDelete()});let g;t>2?g=new Combine([l,h,d]).SetClass("flex flex-col h-full justify-between"):g=new Combine([h]).SetClass("flex flex-col h-full").SetStyle("flex-content: center; overflow-x: unset;");const m=new Combine([g]).ConstructElement();return m.style.top=`${100*OH.startTime(o)/24}%`,m.style.height=`${100*this.getHeight()/24}%`,m}getHeight(){const t=this._oh;let o=t.endHour;return t.endHour==0&&t.endMinutes==0&&(o=24),o-t.startHour+(t.endMinutes-t.startMinutes)/60}}const Fs=class extends InputElement{constructor(t){super();ge(this,"weekdayElements",Utils.TimesT(7,()=>document.createElement("div")));ge(this,"source");this.source=t??new UIEventSource([]),this.SetStyle("width:100%;height:100%;display:block;")}IsValid(t){return!0}GetValue(){return this.source}InnerConstructElement(){const t=document.createElement("table");t.classList.add("oh-table"),t.classList.add("relative");const o=14,l=document.createElement("tr");l.appendChild(document.createElement("th")),l.classList.add("relative");for(let L=0;L<Fs.days.length;L++){let W=Fs.days[L].Clone();const Y=document.createElement("th");Y.style.width="14%",Y.appendChild(W.ConstructElement());const D=this.weekdayElements[L];D.classList.add("w-full","relative"),D.style.height=o*48+"px";const k=new VariableUiElement(this.source.map(ce=>(ce??[]).filter(q=>q.weekday===L)).map(ce=>new Combine(ce.map(q=>new OpeningHoursRange(q,()=>{this.source.data.splice(this.source.data.indexOf(q),1),this.source.ping()})))));D.appendChild(k.ConstructElement());const F=document.createElement("div");F.classList.add("absolute"),F.style.zIndex="10",F.style.width="13.5%",F.style.pointerEvents="none",F.appendChild(D),Y.appendChild(F),l.appendChild(Y)}t.appendChild(l);const d=this;for(let L=0;L<24;L++){const W=Utils.TwoDigits(L),Y=document.createElement("td");Y.rowSpan=2,Y.classList.add("oh-left-col","oh-timecell-full","border-box"),Y.appendChild(new FixedUiElement(W+":00").ConstructElement());const D=document.createElement("tr");D.appendChild(Y);for(let F=0;F<7;F++){const ce=document.createElement("td");ce.classList.add("oh-timecell","oh-timecell-full",`oh-timecell-${F}`),D.appendChild(ce)}D.style.height=o+"px",D.style.maxHeight=D.style.height,D.style.minHeight=D.style.height,t.appendChild(D);const k=document.createElement("tr");for(let F=0;F<7;F++){const ce=document.createElement("td");ce.classList.add("oh-timecell","oh-timecell-half",`oh-timecell-${F}`),k.appendChild(ce)}k.style.minHeight=D.style.height,k.style.maxHeight=D.style.height,t.appendChild(k)}let h=!1,g,m;function y(L){return Math.floor(L/2)}function b(L){return L%2*30}function w(L,W){h=!0,g=[L,W],m=[L,W]}function E(){var F,ce,q;if(g===void 0||!h)return;h=!1;const L=Math.min(g[1],m[1]),W=Math.max(g[1],m[1]),Y=Math.min(g[0],m[0])-1,D=Math.max(g[0],m[0])-1;for(let te=L;te<=W;te++){const Q={weekday:te,startHour:y(Y),startMinutes:b(Y),endHour:y(D+1),endMinutes:b(D+1)};Q.endHour>23&&(Q.endHour=24,Q.endMinutes=0),d.source.data.push(Q)}d.source.ping();let k=t.rows[0];for(let te=1;te<k.cells.length;te++)(F=k.cells[te].classList)==null||F.remove("oh-timecol-selected");for(let te=1;te<t.rows.length;te++){let Q=t.rows[te];for(let ie=0;ie<Q.cells.length;ie++){let J=Q.cells[ie];(ce=J==null?void 0:J.classList)==null||ce.remove("oh-timecell-selected"),(q=Q.classList)==null||q.remove("oh-timerow-selected")}}}t.onmouseup=()=>{E()},t.onmouseleave=()=>{E()};let P,$;function C(L,W){var F,ce,q,te,Q,ie,J,x,I,R;if(P===L&&$===W)return;P=L,$=W;let Y=g[0],D=g[1];if(Y>L){const B=Y;Y=L,L=B}if(D>W){const B=D;D=W,W=B}let k=t.rows[0];for(let B=1;B<k.cells.length;B++){let ee=k.cells[B];(F=ee.classList)==null||F.remove("oh-timecol-selected-round-left"),(ce=ee.classList)==null||ce.remove("oh-timecol-selected-round-right"),D+1<=B&&B<=W+1?((q=ee.classList)==null||q.add("oh-timecol-selected"),D+1==B&&((te=ee.classList)==null||te.add("oh-timecol-selected-round-left")),W+1==B&&((Q=ee.classList)==null||Q.add("oh-timecol-selected-round-right"))):(ie=ee.classList)==null||ie.remove("oh-timecol-selected")}for(let B=1;B<t.rows.length;B++){let ee=t.rows[B];Y<=B&&B<=L?(J=ee.classList)==null||J.add("oh-timerow-selected"):(x=ee.classList)==null||x.remove("oh-timerow-selected");for(let ne=0;ne<ee.cells.length;ne++){let z=ee.cells[ne];if(z===void 0)continue;let X=0;if(B%2==1){if(ne==0)continue;X=-1}Y<=B&&B<=L&&D<=ne+X&&ne+X<=W?(I=z==null?void 0:z.classList)==null||I.add("oh-timecell-selected"):(R=z==null?void 0:z.classList)==null||R.remove("oh-timecell-selected")}}}for(let L=1;L<t.rows.length;L++){let W=t.rows[L];for(let Y=0;Y<W.cells.length;Y++){let D=W.cells[Y],k=0;if(L%2==1){if(Y==0)continue;k=-1}D.onmousedown=F=>{F.preventDefault(),w(L,Y+k),C(L,Y+k)},D.ontouchstart=F=>{F.preventDefault(),w(L,Y+k),C(L,Y+k)},D.onmouseenter=()=>{h&&(m=[L,Y+k],C(L,Y+k))},D.ontouchmove=F=>{F.preventDefault();for(const ce in F.targetTouches){const q=F.targetTouches[ce];if(q.clientX===void 0||q.clientY===void 0)continue;const Q=document.elementFromPoint(q.clientX,q.clientY).onmouseenter;Q&&Q()}},D.ontouchend=F=>{F.preventDefault(),E()}}}return t}};let OpeningHoursPickerTable=Fs;ge(OpeningHoursPickerTable,"days",[Translations.t.general.weekdays.abbreviations.monday,Translations.t.general.weekdays.abbreviations.tuesday,Translations.t.general.weekdays.abbreviations.wednesday,Translations.t.general.weekdays.abbreviations.thursday,Translations.t.general.weekdays.abbreviations.friday,Translations.t.general.weekdays.abbreviations.saturday,Translations.t.general.weekdays.abbreviations.sunday]);class OpeningHoursPicker extends InputElement{constructor(t=new UIEventSource([])){super();ge(this,"IsSelected",new UIEventSource(!1));ge(this,"_ohs");ge(this,"_backgroundTable");this._ohs=t,t.addCallback(o=>{t.setData(OH.MergeTimes(o))}),this._backgroundTable=new OpeningHoursPickerTable(this._ohs),this._backgroundTable.ConstructElement()}InnerRender(){return this._backgroundTable}GetValue(){return this._ohs}IsValid(t){return!0}InnerConstructElement(){return this._backgroundTable.ConstructElement()}}class PublicHolidayInput extends InputElement{constructor(t=new UIEventSource("")){super();ge(this,"IsSelected",new UIEventSource(!1));ge(this,"_value");this._value=t}GetValue(){return this._value}IsValid(t){return!0}InnerConstructElement(){const t=new DropDown(Translations.t.general.opening_hours.open_during_ph.Clone(),[{shown:Translations.t.general.opening_hours.ph_not_known.Clone(),value:""},{shown:Translations.t.general.opening_hours.ph_closed.Clone(),value:"off"},{shown:Translations.t.general.opening_hours.ph_open_as_usual.Clone(),value:"open"},{shown:Translations.t.general.opening_hours.ph_open.Clone(),value:" "}]).SetClass("inline-block"),o=t.GetValue(),l=new TextField({placeholder:"starthour",htmlType:"time"}).SetClass("inline-block"),d=new TextField({placeholder:"starthour",htmlType:"time"}).SetClass("inline-block"),h=new Toggle(new Combine([Translations.t.general.opening_hours.opensAt.Clone(),l,Translations.t.general.opening_hours.openTill.Clone(),d]),void 0,o.map(g=>g===" "));return this.SetupDataSync(o,l.GetValue(),d.GetValue()),new Combine([t,h]).ConstructElement()}SetupDataSync(t,o,l){const d=this._value;d.map(h=>OH.ParsePHRule(h)).addCallbackAndRunD(h=>{h!==null&&(t.setData(h.mode),o.setData(h.start),l.setData(h.end))}),t.map(h=>{if(h===void 0||h===""){d.setData(void 0);return}if(h==="off"){d.setData("PH off");return}if(h==="open"){d.setData("PH open");return}if(o.data===void 0||l.data===void 0){d.setData(void 0);return}const g=`PH ${o.data}-${l.data}`;d.setData(g)},[o,l])}}class OpeningHoursInput extends InputElement{constructor(t=new UIEventSource(""),o="",l=""){var P;super();ge(this,"IsSelected",new UIEventSource(!1));ge(this,"_value");ge(this,"_element");this._value=t;let d=t;o!==""&&l!==""&&(d=t.sync($=>{if($!==void 0)return $===""?"":$.startsWith(o)&&$.endsWith(l)?$.substring(o.length,$.length-l.length):$},[],$=>{if($!==void 0)return $===""?"":$.startsWith(o)&&$.endsWith(l)?$:o+$+l}));const h=d.map($=>{if($===void 0)return[];const C=[],L=$.split(";");for(const W of L)OH.ParseRule(W)===null&&OH.ParsePHRule(W)===null&&C.push(W);return C});let g="";const m=((P=d.data)==null?void 0:P.split(";"))??[];for(const $ of m)if(OH.ParsePHRule($)!==null){g=$;break}const y=new PublicHolidayInput(new UIEventSource(g)),b=d.sync($=>OH.Parse($),[h,y.GetValue()],($,C)=>{let L=OH.ToString($)+";";const W=y.GetValue().data;return W&&(L+=W+";"),L+=h.data.join(";")+";",L=L.trim(),L.endsWith(";")&&(L=L.substring(0,L.length-1)),L.startsWith(";")&&(L=L.substring(1)),L.trim(),L===C?C:L}),w=new VariableUiElement(h.map($=>$.length==0?"":new Combine([Translations.t.general.opening_hours.not_all_rules_parsed,new FixedUiElement($.map(C=>`${C}<br/>`).join("")).SetClass("subtle")]))),E=new OpeningHoursPicker(b);this._element=new Combine([w,E,y])}GetValue(){return this._value}IsValid(t){return!0}InnerConstructElement(){return this._element.ConstructElement()}}class DirectionInput extends InputElement{constructor(t,o,l){super();ge(this,"IsSelected",new UIEventSource(!1));ge(this,"_location");ge(this,"value");ge(this,"background");this._location=o,this.value=l??new UIEventSource(void 0),this.background=t}GetValue(){return this.value}IsValid(t){const o=Number(t);return!isNaN(o)&&o>=0&&o<=360}InnerConstructElement(){let t=new FixedUiElement("");Utils.runningFromConsole||(t=Minimap.createMiniMap({background:this.background,allowMoving:!1,location:this._location}));const o=new Combine([Svg.direction_stroke_svg().SetStyle(`position: absolute;top: 0;left: 0;width: 100%;height: 100%;transform:rotate(${this.value.data??0}deg);`).SetClass("direction-svg relative").SetStyle("z-index: 1000"),t.SetStyle("position: absolute;top: 0;left: 0;width: 100%;height: 100%;")]).SetStyle("width: min(100%, 25em); height: 0; padding-bottom: 100%").SetClass("relative block bg-white border border-black overflow-hidden rounded-full").ConstructElement();return this.value.addCallbackAndRunD(l=>{const d=o.getElementsByClassName("direction-svg")[0];d.style.transform=`rotate(${l}deg)`}),this.RegisterTriggers(o),o.style.overflow="hidden",o.style.display="block",o}RegisterTriggers(t){const o=this;function l(h,g){const m=t.getBoundingClientRect(),y=-(m.left+m.right)/2+h,b=(m.top+m.bottom)/2-g,w=180*Math.atan2(b,y)/Math.PI,E=Math.floor((450-w)%360);o.value.setData(""+E)}t.ontouchmove=h=>{l(h.touches[0].clientX,h.touches[0].clientY),h.preventDefault()},t.ontouchstart=h=>{l(h.touches[0].clientX,h.touches[0].clientY)};let d=!1;t.onmousedown=h=>{d=!0,l(h.clientX,h.clientY),h.preventDefault()},t.onmouseup=h=>{d=!1,h.preventDefault()},t.onmousemove=h=>{d&&l(h.clientX,h.clientY),h.preventDefault()}}}class ColorPicker extends InputElement{constructor(t=new UIEventSource(void 0)){super();ge(this,"IsSelected",new UIEventSource(!1));ge(this,"value");ge(this,"_element");this.value=t;const o=document.createElement("input");this._element=o,o.type="color",this.value.addCallbackAndRunD(l=>{o.value=l}),o.oninput=()=>{const l=o.value;t.setData(l)}}GetValue(){return this.value}IsValid(t){return!1}InnerConstructElement(){return this._element}}class LengthInput extends InputElement{constructor(t,o,l){super();ge(this,"_location");ge(this,"value");ge(this,"background");this._location=o,this.value=l??new UIEventSource(void 0),this.background=t,this.SetClass("block")}GetValue(){return this.value}IsValid(t){const o=Number(t);return!isNaN(o)&&o>=0}InnerConstructElement(){let t,o;Utils.runningFromConsole||(t=Minimap.createMiniMap({background:this.background,allowMoving:!1,location:this._location,attribution:!0,leafletOptions:{tap:!0}}),o=new BackgroundMapSwitch({locationControl:this._location,backgroundLayer:this.background},this.background,{allowedCategories:["map","photo"]}));const l=new Combine([Svg.length_crosshair_svg().SetStyle(`position: absolute;top: 0;left: 0;transform:rotate(${this.value.data??0}deg);`)]).SetClass("block length-crosshair-svg relative pointer-events-none").SetStyle("z-index: 1000; visibility: hidden"),d=new Combine([l,o==null?void 0:o.SetStyle("position: absolute; bottom: 0.25rem; left: 0.25rem; z-index: 1000"),t==null?void 0:t.SetClass("w-full h-full block absolute top-0 left-O overflow-hidden")]).SetClass("relative block bg-white border border-black rounded-xl overflow-hidden").ConstructElement();return this.RegisterTriggers(t==null?void 0:t.ConstructElement(),t==null?void 0:t.leafletMap,l.ConstructElement()),d.style.overflow="hidden",d.style.display="block",d}RegisterTriggers(t,o,l){let d,h;const g=this;function m(y,b,w,E){if(y===void 0||b===void 0){d=void 0,h=void 0;return}const P=t.getBoundingClientRect(),$=y-P.left,C=b-P.top;if(w&&(h===void 0&&d===void 0?d=[$,C]:d!==void 0&&h===void 0?h=[$,C]:d!==void 0&&h!==void 0&&(d=[$,C],h=void 0)),d===void 0){l.style.visibility="hidden";return}const L=Math.sqrt((C-d[1])*(C-d[1])+($-d[0])*($-d[0]));if(E)L>15&&(h=[$,C]);else if(h!==void 0)return;l.style.visibility="unset",l.style.left=d[0]+"px",l.style.top=d[1]+"px";const Y=(180*Math.atan2(d[1]-C,d[0]-$)/Math.PI+270)%360,D=l.firstChild;D.style.transform=`rotate(${Y}deg)`,D.style.width=L*2+"px",D.style.marginLeft=-L+"px",D.style.marginTop=-L+"px";const k=o==null?void 0:o.data;if(k){const F=k.layerPointToLatLng(d),ce=k.layerPointToLatLng([$,C]),q=Math.floor(GeoOperations.distanceBetween([F.lng,F.lat],[ce.lng,ce.lat])*10)/10;g.value.setData(""+q)}}t.ontouchstart=y=>{m(y.touches[0].clientX,y.touches[0].clientY,!0),y.preventDefault()},t.ontouchmove=y=>{m(y.touches[0].clientX,y.touches[0].clientY,!1),y.preventDefault()},t.ontouchend=y=>{m(void 0,void 0,!1,!0),y.preventDefault()},t.onmousedown=y=>{m(y.clientX,y.clientY,!0),y.preventDefault()},t.onmouseup=y=>{m(y.clientX,y.clientY,!1,!0),y.preventDefault()},t.onmousemove=y=>{m(y.clientX,y.clientY,!1),y.preventDefault()}}}class FixedInputElement extends InputElement{constructor(t,o,l=void 0){var h;super();ge(this,"value");ge(this,"_comparator");ge(this,"_el");this._comparator=l??((g,m)=>g==m),o instanceof UIEventSource?this.value=o:this.value=new UIEventSource(o),this._el=document.createElement("span");const d=(h=Translations.W(t))==null?void 0:h.ConstructElement();d&&this._el.appendChild(d)}GetValue(){return this.value}IsValid(t){return this._comparator(t,this.value.data)}InnerConstructElement(){return this._el}}var utils$o={shortLang:n=>n.toLowerCase().split("_")[0],forceArray:n=>(typeof n=="string"&&(n=[n]),n||[]),isPlainObject:n=>!(!n||typeof n!="object"||n instanceof Array),fixedEncodeURIComponent:n=>encodeURIComponent(n).replace(/[!'()*]/g,encodeCharacter),replaceSpaceByUnderscores:n=>n.replace(/\s/g,"_"),uniq:n=>Array.from(new Set(n))};const encodeCharacter=n=>"%"+n.charCodeAt(0).toString(16),simplifyTextAttributes=n=>e=>{const t={};return Object.keys(e).forEach(o=>{const l=e[o];l!=null?t[o]=n?l.map(getValue):l.value:t[o]=n?[]:null}),t},getValue=n=>n.value,singleValue=simplifyTextAttributes(!1);var simplify_text_attributes={labels:singleValue,descriptions:singleValue,aliases:simplifyTextAttributes(!0),lemmas:singleValue,representations:singleValue,glosses:singleValue},wikibase_time_to_date_object=n=>{typeof n=="object"&&(n=n.time);const e=n[0];let[t,o]=n.slice(1).split("T");t=t.replace(/-00/g,"-01");const l=`${t}T${o}`;return fullDateData(e,l)};const fullDateData=(n,e)=>{const t=e.split("-")[0];return n==="-"||t.length>4?expandedYearDate(n,e,t):new Date(e)},expandedYearDate=(n,e,t)=>{let o;return t.length===4?o=`${n}00${e}`:t.length===5?o=`${n}0${e}`:o=n+e,new Date(o)},toDateObject=wikibase_time_to_date_object,helpers$4={};helpers$4.isNumericId=n=>/^[1-9][0-9]*$/.test(n);helpers$4.isEntityId=n=>/^((Q|P|L)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)$/.test(n);helpers$4.isEntitySchemaId=n=>/^E[1-9][0-9]*$/.test(n);helpers$4.isItemId=n=>/^Q[1-9][0-9]*$/.test(n);helpers$4.isPropertyId=n=>/^P[1-9][0-9]*$/.test(n);helpers$4.isLexemeId=n=>/^L[1-9][0-9]*$/.test(n);helpers$4.isFormId=n=>/^L[1-9][0-9]*-F[1-9][0-9]*$/.test(n);helpers$4.isSenseId=n=>/^L[1-9][0-9]*-S[1-9][0-9]*$/.test(n);helpers$4.isGuid=n=>/^((Q|P|L)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)\$[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(n);helpers$4.isHash=n=>/^[0-9a-f]{40}$/.test(n);helpers$4.isPropertyClaimsId=n=>{const[e,t]=n.split("#");return helpers$4.isEntityId(e)&&helpers$4.isPropertyId(t)};helpers$4.isRevisionId=n=>/^\d+$/.test(n);helpers$4.isEntityPageTitle=n=>{if(typeof n!="string")return!1;let[e,t]=n.split(":");return e&&t?isEntityNamespace(e)&&helpers$4[`is${e}Id`](t):(t=e,helpers$4.isItemId(t))};const entityNamespaces=["Item","Property","Lexeme"],isEntityNamespace=n=>entityNamespaces.includes(n),isNonNestedEntityId=n=>/^(Q|P|L)[1-9][0-9]*$/.test(n);helpers$4.getNumericId=n=>{if(!isNonNestedEntityId(n))throw new Error(`invalid entity id: ${n}`);return n.replace(/^(Q|P|L)/,"")};helpers$4.wikibaseTimeToDateObject=toDateObject;const bestEffort=n=>e=>{try{return n(e)}catch{e=e.time||e;const o=e[0];let[l,d]=e.slice(1).split("T");return l=l.replace(/-00/g,"-01"),`${o}${l}T${d}`}},toEpochTime=n=>toDateObject(n).getTime(),toISOString=n=>toDateObject(n).toISOString(),toSimpleDay=n=>{if(typeof n=="object"){const{time:e,precision:t}=n;t===9?n=e.replace("-01-01T","-00-00T"):t===10?n=e.replace("-01T","-00T"):n=e}return n.split("T")[0].replace(/^\+/,"").replace(/^(-?)0+/,"$1").replace(/-00$/,"").replace(/-00$/,"")};helpers$4.wikibaseTimeToEpochTime=bestEffort(toEpochTime);helpers$4.wikibaseTimeToISOString=bestEffort(toISOString);helpers$4.wikibaseTimeToSimpleDay=bestEffort(toSimpleDay);helpers$4.getImageUrl=(n,e)=>{let t=`https://commons.wikimedia.org/wiki/Special:FilePath/${n}`;return typeof e=="number"&&(t+=`?width=${e}`),t};helpers$4.getEntityIdFromGuid=n=>{const e=n.split(/[$-]/);if(e.length===6)return e[0].toUpperCase();if(e.length===7)return e.slice(0,2).join("-").toUpperCase();throw new Error(`invalid guid: ${n}`)};var helpers_1=helpers$4;const{wikibaseTimeToISOString,wikibaseTimeToEpochTime,wikibaseTimeToSimpleDay}=helpers_1,simple=n=>n.value,monolingualtext=(n,e)=>e.keepRichValues?n.value:n.value.text,entity=(n,e)=>prefixedId(n,e.entityPrefix),entityLetter={item:"Q",lexeme:"L",property:"P"},prefixedId=(n,e)=>{const{value:t}=n,o=t.id||entityLetter[t["entity-type"]]+t["numeric-id"];return typeof e=="string"?`${e}:${o}`:o},quantity=(n,e)=>{const{value:t}=n,o=parseFloat(t.amount);if(e.keepRichValues){const l={amount:parseFloat(t.amount),unit:t.unit.replace(/^https?:\/\/.*\/entity\//,"")};return t.upperBound!=null&&(l.upperBound=parseFloat(t.upperBound)),t.lowerBound!=null&&(l.lowerBound=parseFloat(t.lowerBound)),l}else return o},coordinate=(n,e)=>e.keepRichValues?n.value:[n.value.latitude,n.value.longitude],time=(n,e)=>{let t;if(typeof e.timeConverter=="function"?t=e.timeConverter(n.value):t=getTimeConverter(e.timeConverter)(n.value),e.keepRichValues){const{timezone:o,before:l,after:d,precision:h,calendarmodel:g}=n.value;return{time:t,timezone:o,before:l,after:d,precision:h,calendarmodel:g}}else return t},getTimeConverter=(n="iso")=>{const e=timeConverters[n];if(!e)throw new Error(`invalid converter key: ${JSON.stringify(n).substring(0,100)}`);return e},timeConverters={iso:wikibaseTimeToISOString,epoch:wikibaseTimeToEpochTime,"simple-day":wikibaseTimeToSimpleDay,none:n=>n.time||n},parsers$1={commonsMedia:simple,"external-id":simple,"geo-shape":simple,"globe-coordinate":coordinate,math:simple,monolingualtext,"musical-notation":simple,quantity,string:simple,"tabular-data":simple,time,url:simple,"wikibase-entityid":entity,"wikibase-form":entity,"wikibase-item":entity,"wikibase-lexeme":entity,"wikibase-property":entity,"wikibase-sense":entity};var parse_claim={parsers:parsers$1,parse:(n,e,t,o)=>{n=n||e.type,n=n.replace(" ","-");try{return parsers$1[n](e,t)}catch(l){throw l.message==="parsers[datatype] is not a function"&&(l.message=`${n} claim parser isn't implemented
        Claim id: ${o}
        Please report to https://github.com/maxlath/wikibase-sdk/issues`),l}}};const truthyPropertyClaims$1=n=>{const e=n.reduce(aggregatePerRank,{});return e.preferred||e.normal||[]},nonDeprecatedPropertyClaims$1=n=>n.filter(e=>e.rank!=="deprecated"),aggregatePerRank=(n,e)=>{const{rank:t}=e;return n[t]||(n[t]=[]),n[t].push(e),n},truthyClaims=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]=truthyPropertyClaims$1(n[t])}),e};var rank={truthyClaims,truthyPropertyClaims:truthyPropertyClaims$1,nonDeprecatedPropertyClaims:nonDeprecatedPropertyClaims$1};const{parse:parseClaim}=parse_claim,{uniq}=utils$o,{truthyPropertyClaims,nonDeprecatedPropertyClaims}=rank,simplifyClaims$2=(n,...e)=>{const{propertyPrefix:t}=parseOptions(e),o={};for(let l in n){const d=n[l];t&&(l=t+":"+l),o[l]=simplifyPropertyClaims(d,...e)}return o},simplifyPropertyClaims=(n,...e)=>{if(n==null||n.length===0)return[];const{keepNonTruthy:t,keepNonDeprecated:o,areSubSnaks:l}=parseOptions(e);return o?n=nonDeprecatedPropertyClaims(n):t||l||(n=truthyPropertyClaims(n)),n=n.map(d=>simplifyClaim(d,...e)).filter(defined$1),n[0]&&typeof n[0]!="object"?uniq(n):n},defined$1=n=>n!==void 0,simplifyClaim=(n,...e)=>{e=parseOptions(e);const{keepQualifiers:t,keepReferences:o,keepIds:l,keepHashes:d,keepTypes:h,keepSnaktypes:g,keepRanks:m}=parseKeepOptions(e),{mainsnak:y,rank:b}=n;let w,E,P,$,C,L;if(y?(E=y.datatype,P=y.datavalue,$=y.snaktype):(P=n.datavalue,E=n.datatype,$=n.snaktype,n.hash?C=!0:L=!0),P)w=parseClaim(E,P,e,n.id);else if($==="somevalue")w=e.somevalueValue;else if($==="novalue")w=e.novalueValue;else throw new Error("no datavalue or special snaktype found");if(C){if(!(d||h||g))return w;const D={value:w};return d&&(D.hash=n.hash),h&&(D.type=E),g&&(D.snaktype=$),D}if(L)return h?{type:E,value:w}:w;if(!(t||o||l||h||g||m))return w;const W={value:w};h&&(W.type=E),g&&(W.snaktype=$),m&&(W.rank=b);const Y=getSubSnakOptions(e);return Y.keepHashes=d,t&&(W.qualifiers=simplifyQualifiers(n.qualifiers,Y)),o&&(n.references=n.references||[],W.references=simplifyReferences(n.references,Y)),l&&(W.id=n.id),W},parseOptions=n=>{if(n==null)return{};if(n[0]&&typeof n[0]=="object")return n[0];const[e,t,o]=n;return{entityPrefix:e,propertyPrefix:t,keepQualifiers:o}},simplifyQualifiers=(n,e)=>simplifyClaims$2(n,getSubSnakOptions(e)),simplifyPropertyQualifiers=(n,e)=>simplifyPropertyClaims(n,getSubSnakOptions(e)),simplifyReferences=(n,e)=>n.map(t=>simplifyReferenceRecord(t,e)),simplifyReferenceRecord=(n,e)=>{const t=getSubSnakOptions(e),o=simplifyClaims$2(n.snaks,t);return t.keepHashes?{snaks:o,hash:n.hash}:o},getSubSnakOptions=(n={})=>n.areSubSnaks?n:Object.assign({},n,{areSubSnaks:!0}),keepOptions=["keepQualifiers","keepReferences","keepIds","keepHashes","keepTypes","keepSnaktypes","keepRanks","keepRichValues"],parseKeepOptions=n=>(n.keepAll&&keepOptions.forEach(e=>{n[e]==null&&(n[e]=!0)}),n);var simplify_claims={simplifyClaims:simplifyClaims$2,simplifyPropertyClaims,simplifyClaim,simplifyQualifiers,simplifyPropertyQualifiers,simplifyQualifier:simplifyClaim,simplifyReferences};const{isFormId}=helpers_1,{representations:simplifyRepresentations}=simplify_text_attributes,{simplifyClaims:simplifyClaims$1}=simplify_claims,simplifyForm=(n,e)=>{const{id:t,representations:o,grammaticalFeatures:l,claims:d}=n;if(!isFormId(t))throw new Error("invalid form object");return{id:t,representations:simplifyRepresentations(o),grammaticalFeatures:l,claims:simplifyClaims$1(d,e)}},simplifyForms=(n,e)=>n.map(t=>simplifyForm(t,e));var simplify_forms={simplifyForm,simplifyForms};const{isSenseId}=helpers_1,{glosses:simplifyGlosses}=simplify_text_attributes,{simplifyClaims}=simplify_claims,simplifySense=(n,e)=>{const{id:t,glosses:o,claims:l}=n;if(!isSenseId(t))throw new Error("invalid sense object");return{id:t,glosses:simplifyGlosses(o),claims:simplifyClaims(l,e)}},simplifySenses=(n,e)=>n.map(t=>simplifySense(t,e));var simplify_senses={simplifySense,simplifySenses},sitelinks_languages=["aa","ab","ace","ady","af","ak","als","alt","ami","am","ang","an","arc","ar","ary","arz","ast","as","atj","avk","av","awa","ay","azb","az","ban","bar","bat_smg","ba","bcl","be_x_old","be","bg","bh","bi","bjn","bm","bn","bo","bpy","br","bs","bug","bxr","ca","cbk_zam","cdo","ceb","ce","cho","chr","ch","chy","ckb","co","crh","cr","csb","cs","cu","cv","cy","dag","da","de","din","diq","dsb","dty","dv","dz","ee","el","eml","en","eo","es","et","eu","ext","fa","ff","fiu_vro","fi","fj","fo","frp","frr","fr","fur","fy","gag","gan","ga","gcr","gd","glk","gl","gn","gom","gor","got","gu","gv","hak","ha","haw","he","hif","hi","ho","hr","hsb","ht","hu","hy","hyw","hz","ia","id","ie","ig","ii","ik","ilo","inh","io","is","it","iu","jam","ja","jbo","jv","kaa","kab","ka","kbd","kbp","kg","ki","kj","kk","kl","km","kn","koi","ko","krc","kr","ksh","ks","ku","kv","kw","ky","lad","la","lbe","lb","lez","lfn","lg","lij","li","lld","lmo","ln","lo","lrc","ltg","lt","lv","mad","mai","map_bms","mdf","mg","mhr","mh","min","mi","mk","ml","mni","mn","mnw","mo","mrj","mr","ms","mt","mus","mwl","myv","my","mzn","nah","nap","na","nds_nl","nds","ne","new","ng","nia","nl","nn","nov","no","nqo","nrm","nso","nv","ny","oc","olo","om","or","os","pag","pam","pap","pa","pcd","pdc","pfl","pih","pi","pl","pms","pnb","pnt","ps","pt","pwn","qu","rm","rmy","rn","roa_rup","roa_tara","ro","rue","ru","rw","sah","sat","sa","scn","sco","sc","sd","se","sg","shi","shn","sh","shy","simple","si","skr","sk","sl","smn","sm","sn","sources","so","sq","srn","sr","ss","stq","st","su","sv","sw","szl","szy","ta","tay","tcy","tet","te","tg","th","ti","tk","tl","tn","to","tpi","trv","tr","ts","tt","tum","tw","tyv","ty","udm","ug","uk","ur","uz","vec","vep","ve","vi","vls","vo","war","wa","wo","wuu","xal","xh","xmf","yi","yo","yue","za","zea","zh_classical","zh_min_nan","zh_yue","zh","zu"];const{fixedEncodeURIComponent,replaceSpaceByUnderscores,isPlainObject:isPlainObject$2}=utils$o,{isPropertyId}=helpers_1,wikidataBase="https://www.wikidata.org/wiki/",languages=sitelinks_languages,getSitelinkUrl$1=(n,e)=>{if(isPlainObject$2(n)&&(e=n.title,n=n.site),!n)throw new Error("missing a site");if(!e)throw new Error("missing a title");const t=n.replace(/wiki$/,""),o=siteUrlBuilders[t]||siteUrlBuilders[n];if(o)return o(e);const{lang:l,project:d}=getSitelinkData(n);return e=fixedEncodeURIComponent(replaceSpaceByUnderscores(e)),`https://${l}.${d}.org/wiki/${e}`},wikimediaSite=n=>e=>`https://${n}.wikimedia.org/wiki/${e}`,siteUrlBuilders={commons:wikimediaSite("commons"),mediawiki:n=>`https://www.mediawiki.org/wiki/${n}`,meta:wikimediaSite("meta"),species:wikimediaSite("species"),wikidata:n=>isPropertyId(n)?`${wikidataBase}Property:${n}`:`${wikidataBase}${n}`,wikimania:wikimediaSite("wikimania")},sitelinkUrlPattern=/^https?:\/\/([\w-]{2,10})\.(\w+)\.org\/\w+\/(.*)/,getSitelinkData=n=>{if(n.startsWith("http")){const e=n,t=e.match(sitelinkUrlPattern);if(!t)throw new Error(`invalid sitelink url: ${e}`);let[o,l,d]=t.slice(1);d=decodeURIComponent(d);let h;return o==="www"?(o="en",h=l):o==="commons"?(o="en",l=h="commons"):h=`${o}${l}`.replace("wikipedia","wiki"),{lang:o,project:l,key:h,title:d,url:e}}else{const e=n,t=specialSites[e];if(t)return{lang:"en",project:t,key:e};const[o,l,d]=e.split("wik");if(d!=null)throw new Error(`invalid sitelink key: ${e}`);if(languages.indexOf(o)===-1)throw new Error(`sitelink lang not found: ${o}`);const h=projectsBySuffix[l];if(!h)throw new Error(`sitelink project not found: ${h}`);return{lang:o,project:h,key:e}}},specialSites={commonswiki:"commons",mediawikiwiki:"mediawiki",metawiki:"meta",specieswiki:"specieswiki",wikidatawiki:"wikidata",wikimaniawiki:"wikimania"},isSitelinkKey=n=>{try{return getSitelinkData(n),!0}catch{return!1}},projectsBySuffix={i:"wikipedia",isource:"wikisource",iquote:"wikiquote",tionary:"wiktionary",ibooks:"wikibooks",iversity:"wikiversity",ivoyage:"wikivoyage",inews:"wikinews"};var sitelinks$1={getSitelinkUrl:getSitelinkUrl$1,getSitelinkData,isSitelinkKey};const{getSitelinkUrl}=sitelinks$1;var simplify_sitelinks=(n,e={})=>{const{addUrl:t}=e;return Object.keys(n).reduce(aggregateValues(n,t),{})};const aggregateValues=(n,e)=>(t,o)=>{if(n[o]==null)return t[o]=n[o],t;const{title:l}=n[o];return e?t[o]={title:l,url:getSitelinkUrl(o,l)}:t[o]=l,t};var simplify_sparql_results=(n,e={})=>{typeof n=="string"&&(n=JSON.parse(n));const{vars:t}=n.head,o=n.results.bindings;if(t.length===1&&e.minimize===!0){const g=t[0];return o.map(m=>parseValue$1(m[g])).filter(m=>m!=null)}const{richVars:l,associatedVars:d,standaloneVars:h}=identifyVars(t);return o.map(getSimplifiedResult(l,d,h))};const parseValue$1=n=>{if(!n)return;let{datatype:e}=n;return e=e&&e.replace("http://www.w3.org/2001/XMLSchema#",""),(parsers[n.type]||getDatatypesParsers(e))(n)},parsers={uri:n=>parseUri(n.value),bnode:()=>null},numberParser=n=>parseFloat(n.value),getDatatypesParsers=n=>(n=n&&n.replace("http://www.w3.org/2001/XMLSchema#",""),datatypesParsers[n]||passValue),datatypesParsers={decimal:numberParser,integer:numberParser,float:numberParser,double:numberParser,boolean:n=>n.value==="true"},passValue=n=>n.value,parseUri=n=>n.match(/http.*\/entity\/statement\//)?convertStatementUriToGuid(n):n.replace(/^https?:\/\/.*\/entity\//,"").replace(/^https?:\/\/.*\/prop\/direct\//,""),convertStatementUriToGuid=n=>{n=n.replace(/^https?:\/\/.*\/entity\/statement\//,"");const e=n.split("-");return e[0]+"$"+e.slice(1).join("-")},identifyVars=n=>{let e=n.filter(d=>n.some(isAssociatedVar(d)));e=e.filter(d=>!e.some(h=>d!==h&&d.startsWith(h)));const t=new RegExp(`^(${e.join("|")})[A-Z]`),o=n.filter(d=>t.test(d)),l=n.filter(d=>!e.includes(d)&&!t.test(d));return{richVars:e,associatedVars:o,standaloneVars:l}},isAssociatedVar=n=>{const e=new RegExp(`^${n}[A-Z]\\w+`);return e.test.bind(e)},getSimplifiedResult=(n,e,t)=>o=>{const l={};for(const d of n){const h={},g=parseValue$1(o[d]);g!=null&&(h.value=g);for(const m of e)m.startsWith(d)&&addAssociatedValue(o,d,m,h);Object.keys(h).length>0&&(l[d]=h)}for(const d of t)l[d]=parseValue$1(o[d]);return l},addAssociatedValue=(n,e,t,o)=>{let l=t.split(e)[1];l=l[0].toLowerCase()+l.slice(1),l=specialNames[l]||l;const d=n[t];d!=null&&(o[l]=d.value)},specialNames={altLabel:"aliases"},{labels,descriptions,aliases,lemmas,glosses}=simplify_text_attributes,{simplifyClaim:claim,simplifyPropertyClaims:propertyClaims,simplifyClaims:claims,simplifyQualifier:qualifier,simplifyPropertyQualifiers:propertyQualifiers,simplifyQualifiers:qualifiers,simplifyReferences:references}=simplify_claims,{simplifyForm:form,simplifyForms:forms}=simplify_forms,{simplifySense:sense,simplifySenses:senses}=simplify_senses,sitelinks=simplify_sitelinks,sparqlResults=simplify_sparql_results;var simplify$4={labels,descriptions,aliases,claim,propertyClaims,claims,qualifier,propertyQualifiers,qualifiers,references,sitelinks,snak:claim,propertySnaks:propertyClaims,snaks:claims,lemmas,glosses,form,forms,sense,senses,sparqlResults};const simplify$3=simplify$4,simplifyEntity$1=(n,e)=>{const{type:t}=n,o={id:n.id,type:t,modified:n.modified};return n.datatype&&(o.datatype=n.datatype),t==="item"?(simplifyIfDefined(n,o,"labels"),simplifyIfDefined(n,o,"descriptions"),simplifyIfDefined(n,o,"aliases"),simplifyIfDefined(n,o,"claims",e),simplifyIfDefined(n,o,"sitelinks",e)):t==="property"?(o.datatype=n.datatype,simplifyIfDefined(n,o,"labels"),simplifyIfDefined(n,o,"descriptions"),simplifyIfDefined(n,o,"aliases"),simplifyIfDefined(n,o,"claims",e)):t==="lexeme"&&(simplifyIfDefined(n,o,"lemmas"),o.lexicalCategory=n.lexicalCategory,o.language=n.language,simplifyIfDefined(n,o,"claims",e),simplifyIfDefined(n,o,"forms",e),simplifyIfDefined(n,o,"senses",e)),o},simplifyIfDefined=(n,e,t,o)=>{n[t]!=null&&(e[t]=simplify$3[t](n[t],o))},simplifyEntities=(n,e={})=>{n.entities&&(n=n.entities);const{entityPrefix:t}=e;return Object.keys(n).reduce((o,l)=>{const d=n[l];return t&&(l=`${t}:${l}`),o[l]=simplifyEntity$1(d,e),o},{})};simplify$3.entity=simplifyEntity$1;simplify$3.entities=simplifyEntities;var simplify_entity={simplifyEntity:simplifyEntity$1,simplifyEntities};const{simplifyEntity}=simplify_entity,wb={entities:n=>{n=n.body||n;const{entities:e}=n;return Object.keys(e).forEach(t=>{e[t]=simplifyEntity(e[t])}),e},pagesTitles:n=>(n=n.body||n,n.query.search.map(e=>e.title))};var parse_responses={wb,wd:wb},build_url,hasRequiredBuild_url;function requireBuild_url(){if(hasRequiredBuild_url)return build_url;hasRequiredBuild_url=1;const n=typeof location<"u"&&typeof document<"u";let e;return n?e=t=>new URLSearchParams(t).toString():e=require$$0$3.stringify,build_url=t=>o=>(n&&(o.origin="*"),Object.keys(o).forEach(l=>{o[l]==null&&delete o[l]}),t+"?"+e(o)),build_url}var search_entities,hasRequiredSearch_entities;function requireSearch_entities(){if(hasRequiredSearch_entities)return search_entities;hasRequiredSearch_entities=1;const{isPlainObject:n}=utils$o,e=["item","property","lexeme","form","sense"];return search_entities=t=>(o,l,d,h,g)=>{let m,y;if(n(o)){const b=o;o=b.search,l=b.language,d=b.limit,y=b.continue,h=b.format,g=b.uselang,m=b.type}if(!(o&&o.length>0))throw new Error("search can't be empty");if(l=l||"en",g=g||l,d=d||"20",h=h||"json",m=m||"item",y=y||"0",!e.includes(m))throw new Error(`invalid type: ${m}`);return t({action:"wbsearchentities",search:o,language:l,limit:d,continue:y,format:h,uselang:g,type:m})},search_entities}var cirrus_search,hasRequiredCirrus_search;function requireCirrus_search(){if(hasRequiredCirrus_search)return cirrus_search;hasRequiredCirrus_search=1;const{isPlainObject:n}=utils$o,e=/^\d+[|\d]*$/;return cirrus_search=t=>o=>{if(!n(o))throw new Error(`expected parameters to be passed as an object, got ${o} (${typeof o})`);for(const $ in o)if($.startsWith("sr")){const C=$.replace(/^sr/,"");if(o[C]!=null)throw new Error(`${C} and ${$} are the same`);o[C]=o[$]}const{search:l,haswbstatement:d,format:h="json",limit:g,offset:m,profile:y,sort:b}=o;let{namespace:w,prop:E}=o;if(!(l||d))throw new Error('missing "search" or "haswbstatement" parameter');let P="";if(l&&(P+=l),d){const $=d instanceof Array?d:[d];for(const C of $)C[0]==="-"?P+=` -haswbstatement:${C.slice(1)}`:P+=` haswbstatement:${C}`}if(g!=null&&(typeof g!="number"||g<1))throw new Error(`invalid limit: ${g}`);if(m!=null&&(typeof m!="number"||m<0))throw new Error(`invalid offset: ${m}`);if(w instanceof Array?w=w.join("|"):typeof w=="number"&&(w=w.toString()),w&&!e.test(w))throw new Error(`invalid namespace: ${w}`);if(y!=null&&typeof y!="string")throw new Error(`invalid profile: ${y} (${typeof y}, expected string)`);if(b!=null&&typeof b!="string")throw new Error(`invalid sort: ${b} (${typeof b}, expected string)`);if(E!=null&&(w instanceof Array&&(E=E.join("|")),typeof E!="string"))throw new Error(`invalid prop: ${E} (${typeof E}, expected string)`);return t({action:"query",list:"search",srsearch:P.trim(),format:h,srnamespace:w,srlimit:g,sroffset:m,srqiprofile:y,srsort:b,srprop:E})},cirrus_search}var validate_1,hasRequiredValidate;function requireValidate(){if(hasRequiredValidate)return validate_1;hasRequiredValidate=1;const n=helpers_1,e=(t,o)=>l=>{if(!n[o](l))throw new Error(`invalid ${t}: ${l}`)};return validate_1={entityId:e("entity id","isEntityId"),propertyId:e("property id","isPropertyId"),entityPageTitle:e("entity page title","isEntityPageTitle"),revisionId:e("revision id","isRevisionId")},validate_1}var get_entities,hasRequiredGet_entities;function requireGet_entities(){if(hasRequiredGet_entities)return get_entities;hasRequiredGet_entities=1;const{isPlainObject:n,forceArray:e,shortLang:t}=utils$o,o=requireValidate();return get_entities=l=>(d,h,g,m,y)=>{if(n(d)&&({ids:d,languages:h,props:g,format:m,redirects:y}=d),m=m||"json",!(d&&d.length>0))throw new Error("no id provided");d=e(d),d.forEach(o.entityId),d.length>50&&console.warn(`getEntities accepts 50 ids max to match Wikidata API limitations:
      this request won't get all the desired entities.
      You can use getManyEntities instead to generate several request urls
      to work around this limitation`);const b={action:"wbgetentities",ids:d.join("|"),format:m};return y===!1&&(b.redirects="no"),h&&(h=e(h).map(t),b.languages=h.join("|")),g&&g.length>0&&(b.props=e(g).join("|")),l(b)},get_entities}var get_many_entities,hasRequiredGet_many_entities;function requireGet_many_entities(){if(hasRequiredGet_many_entities)return get_many_entities;hasRequiredGet_many_entities=1;const{isPlainObject:n}=utils$o;get_many_entities=t=>{const o=requireGet_entities()(t);return(l,d,h,g,m)=>{if(n(l)&&({ids:l,languages:d,props:h,format:g,redirects:m}=l),!(l instanceof Array))throw new Error("getManyEntities expects an array of ids");return e(l).map(y=>o(y,d,h,g,m))}};const e=t=>{const o=[];for(;t.length>0;){const l=t.slice(0,50);t=t.slice(50),o.push(l)}return o};return get_many_entities}var get_revisions,hasRequiredGet_revisions;function requireGet_revisions(){if(hasRequiredGet_revisions)return get_revisions;hasRequiredGet_revisions=1;const{forceArray:n}=utils$o,e=requireValidate();get_revisions=l=>(d,h={})=>{d=n(d),d.forEach(e.entityPageTitle);const g=d.length===1,m={action:"query",prop:"revisions"};m.titles=d.join("|"),m.format=h.format||"json",g&&(m.rvlimit=h.limit||"max"),g&&h.start&&(m.rvstart=t(h.start)),g&&h.end&&(m.rvend=t(h.end));const{prop:y,user:b,excludeuser:w,tag:E}=h;return y?m.rvprop=n(y).join("|"):m.rvprop="ids|flags|timestamp|user|userid|size|slotsize|sha1|slotsha1|contentmodel|comment|parsedcomment|content|tags|roles|oresscores",m.rvslots="*",b&&(m.rvuser=b),w&&(m.rvexcludeuser=w),E&&(m.rvtag=E),l(m)};const t=l=>typeof l=="number"&&l<o?l:Math.trunc(new Date(l).getTime()/1e3),o=new Date("2000-01-01").getTime();return get_revisions}var get_entity_revision,hasRequiredGet_entity_revision;function requireGet_entity_revision(){if(hasRequiredGet_entity_revision)return get_entity_revision;hasRequiredGet_entity_revision=1;const n=requireValidate(),{isPlainObject:e}=utils$o;return get_entity_revision=(t,o)=>(l,d)=>(e(l)&&(d=l.revision,l=l.id),n.entityId(l),n.revisionId(d),`${t}/${o}/index.php?title=Special:EntityData/${l}.json&revision=${d}`),get_entity_revision}var get_entities_from_sitelinks,hasRequiredGet_entities_from_sitelinks;function requireGet_entities_from_sitelinks(){if(hasRequiredGet_entities_from_sitelinks)return get_entities_from_sitelinks;hasRequiredGet_entities_from_sitelinks=1;const{isPlainObject:n,forceArray:e,shortLang:t}=utils$o;get_entities_from_sitelinks=l=>(d,h,g,m,y,b)=>{if(n(d)){const E=d;d=E.titles,h=E.sites,g=E.languages,m=E.props,y=E.format,b=E.redirects}if(y=y||"json",!(d&&d.length>0))throw new Error("no titles provided");h&&h.length>0||(h=["enwiki"]),d=e(d),h=e(h).map(o),m=e(m);const w={action:"wbgetentities",titles:d.join("|"),sites:h.join("|"),format:y};return h.length===1&&d.length===1&&(w.normalize=!0),g&&(g=e(g).map(t),w.languages=g.join("|")),m&&m.length>0&&(w.props=m.join("|")),b===!1&&(w.redirects="no"),l(w)};const o=l=>l.length===2?`${l}wiki`:l;return get_entities_from_sitelinks}var sparql_query,hasRequiredSparql_query;function requireSparql_query(){if(hasRequiredSparql_query)return sparql_query;hasRequiredSparql_query=1;const{fixedEncodeURIComponent:n}=utils$o;return sparql_query=e=>t=>{const o=n(t);return`${e}?format=json&query=${o}`},sparql_query}var get_reverse_claims,hasRequiredGet_reverse_claims;function requireGet_reverse_claims(){if(hasRequiredGet_reverse_claims)return get_reverse_claims;hasRequiredGet_reverse_claims=1;const{forceArray:n}=utils$o,{isItemId:e}=helpers_1,t=requireValidate(),o="FILTER NOT EXISTS { ?subject rdf:type wikibase:Property . } ";get_reverse_claims=y=>{const b=requireSparql_query()(y);return(w,E,P={})=>{const{limit:$,caseInsensitive:C,keepProperties:L}=P,W=C?g:h,Y=L?"":o;let D=n(w);D.forEach(t.propertyId),D=D.map(m).join("|");let F=`SELECT DISTINCT ?subject WHERE { ${l(E,W,D,Y)} }`;return $&&(F+=` LIMIT ${$}`),b(F)}};const l=(y,b,w,E)=>y instanceof Array?"{ "+y.map(d).map($=>b(w,$,E)).join("} UNION {")+" }":b(w,d(y),E),d=y=>(e(y)?y=`wd:${y}`:typeof y=="string"&&(y=`'${y}'`),y),h=(y,b,w,E)=>`?subject ${y} ${b} .
    ${w}`,g=(y,b,w,E)=>`?subject ${y} ?value .
    FILTER (lcase(?value) = ${b.toLowerCase()})
    ${w}`,m=y=>"wdt:"+y;return get_reverse_claims}const{isPlainObject:isPlainObject$1}=utils$o,simplify$2=simplify$4,parse$2=parse_responses,helpers$3=helpers_1,sitelinksHelpers=sitelinks$1,rankHelpers=rank,tip=`Tip: if you just want to access functions that don't need an instance or a sparqlEndpoint,
those are also exposed directly on the module object. Exemple:
const { isItemId, simplify } = require('wikibase-sdk')`,common$6=Object.assign({simplify:simplify$2,parse:parse$2},helpers$3,sitelinksHelpers,rankHelpers),WBK=n=>{if(!isPlainObject$1(n))throw new Error("invalid config");const{instance:e,sparqlEndpoint:t}=n;let{wgScriptPath:o="w"}=n;if(o=o.replace(/^\//,""),!(e||t))throw new Error(`one of instance or sparqlEndpoint should be set at initialization.
${tip}`);let l,d,h;if(e){validateEndpoint("instance",e),d=e.replace(/\/$/,"").replace(`/${o}/api.php`,""),h=`${d}/${o}/api.php`;const y=requireBuild_url()(h);l={searchEntities:requireSearch_entities()(y),cirrusSearchPages:requireCirrus_search()(y),getEntities:requireGet_entities()(y),getManyEntities:requireGet_many_entities()(y),getRevisions:requireGet_revisions()(y),getEntityRevision:requireGet_entity_revision()(e,o),getEntitiesFromSitelinks:requireGet_entities_from_sitelinks()(y)}}else l={searchEntities:missingInstance("searchEntities"),cirrusSearchPages:missingInstance("cirrusSearchPages"),getEntities:missingInstance("getEntities"),getManyEntities:missingInstance("getManyEntities"),getRevisions:missingInstance("getRevisions"),getEntityRevision:missingInstance("getEntityRevision"),getEntitiesFromSitelinks:missingInstance("getEntitiesFromSitelinks")};let g;return t?(validateEndpoint("sparqlEndpoint",t),g={sparqlQuery:requireSparql_query()(t),getReverseClaims:requireGet_reverse_claims()(t)}):g={sparqlQuery:missingSparqlEndpoint("sparqlQuery"),getReverseClaims:missingSparqlEndpoint("getReverseClaims")},Object.assign({instance:{root:d,apiEndpoint:h}},common$6,l,g)};Object.assign(WBK,common$6);const validateEndpoint=(n,e)=>{if(!(typeof e=="string"&&e.startsWith("http")))throw new Error(`invalid ${n}: ${e}`)},missingConfig=n=>e=>()=>{throw new Error(`${e} requires ${n} to be set at initialization`)},missingSparqlEndpoint=missingConfig("a sparqlEndpoint"),missingInstance=missingConfig("an instance");var wikibaseSdk=WBK,wikidataSdk=wikibaseSdk({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"});class WikidataResponse{constructor(e,t,o,l,d,h){ge(this,"id");ge(this,"labels");ge(this,"descriptions");ge(this,"claims");ge(this,"wikisites");ge(this,"commons");this.id=e,this.labels=t,this.descriptions=o,this.claims=l,this.wikisites=d,this.commons=h}static fromJson(e){const t=new Map;for(const g in e.labels)t.set(g,e.labels[g].value);const o=new Map;for(const g in e.descriptions)o.set(g,e.descriptions[g].value);const l=new Map;for(const g in e.sitelinks){const m=g.substring(0,g.length-4),y=e.sitelinks[g].title;l.set(m,y)}const d=l.get("commons");l.delete("commons");const h=WikidataResponse.extractClaims(e.claims);return new WikidataResponse(e.id,t,o,h,l,d)}static extractClaims(e){const t=wikidataSdk.simplify.claims(e,{timeConverter:"simple-day"}),o=new Map;for(const l in t){const d=t[l];o.set(l,new Set(d))}return o}}class WikidataLexeme{constructor(e){ge(this,"id");ge(this,"lemma");ge(this,"senses");ge(this,"claims");this.id=e.id,this.claims=WikidataResponse.extractClaims(e.claims),this.lemma=new Map;for(const t in e.lemmas)this.lemma.set(t,e.lemmas[t].value);this.senses=new Map;for(const t of e.senses){const o=t.glosses;for(const l in o){let d=this.senses.get(l);d===void 0?d="":d=d+"; ",this.senses.set(l,d+o[l].value)}}}asWikidataResponse(){return new WikidataResponse(this.id,this.lemma,this.senses,this.claims,new Map,void 0)}}const ii=class{static LoadWikidataEntry(e){const t=this.ExtractKey(e),o=ii._cache.get(t);if(o!==void 0)return o;const l=UIEventSource.FromPromiseWithErr(ii.LoadWikidataEntryAsync(t));return ii._cache.set(t,l),l}static async searchAdvanced(e,t){let o="";(t==null?void 0:t.instanceOf)!==void 0&&t.instanceOf.length>0&&(o="{"+t.instanceOf.map(b=>`{ ?item wdt:P31/wdt:P279* wd:Q${b}. }`).join(" UNION ")+"}");const d=((t==null?void 0:t.notInstanceOf)??[]).concat([17379835]).map(y=>`MINUS {?item wdt:P31/wdt:P279* wd:Q${y} .}`),h=`SELECT * WHERE {
            SERVICE wikibase:mwapi {
                bd:serviceParam wikibase:api "EntitySearch" .
                bd:serviceParam wikibase:endpoint "www.wikidata.org" .
                bd:serviceParam mwapi:search "${e}" .
                bd:serviceParam mwapi:language "${t.lang}" .
                ?item wikibase:apiOutputItem mwapi:item .
                ?num wikibase:apiOrdinal true .
                bd:serviceParam wikibase:limit ${Math.round((t.maxCount??20)*1.5)} .
                ?label wikibase:apiOutput mwapi:label .
                ?description wikibase:apiOutput "@description" .
            }
            ${o}
            ${d.join(`
    `)}
        } ORDER BY ASC(?num) LIMIT ${t.maxCount??20}`,g=wikidataSdk.sparqlQuery(h);return(await Utils.downloadJson(g)).results.bindings.map(({item:y,label:b,description:w,num:E})=>({relevance:E==null?void 0:E.value,id:y==null?void 0:y.value,label:b==null?void 0:b.value,description:w==null?void 0:w.value}))}static async search(e,t,o=1){const l=(t==null?void 0:t.maxCount)??20;let d=Math.min(l,50);const h=o*d-d,g=(t==null?void 0:t.lang)??"en",m="https://www.wikidata.org/w/api.php?action=wbsearchentities&search="+e+"&language="+g+"&limit="+d+"&continue="+h+"&format=json&uselang="+g+"&type=item&origin=*&props=",b=(await Utils.downloadJsonCached(m,1e4)).search;if(b.length<d)return b;if(b.length<l){const w={...t};w.maxCount=l-b.length,b.push(...await ii.search(e,w,o+1))}return b}static async searchAndFetch(e,t){const o=await ii.searchAdvanced(e,t),l=await Promise.all(o.map(async d=>{try{return console.log("Loading ",d.id),await ii.LoadWikidataEntry(d.id).AsPromise()}catch(h){console.error(h);return}}));return Utils.NoNull(l.map(d=>d.success))}static ExtractKey(e){if(typeof e=="number")return"Q"+e;if(e===void 0){console.error("ExtractKey: value is undefined");return}e=e.trim().toLowerCase();for(const t of ii._prefixesToRemove)e.startsWith(t)&&(e=e.substring(t.length));if(!(e.startsWith("http")&&e==="")){for(const t of ii._identifierPrefixes)if(e.startsWith(t)){const o=e.substring(t.length);if(o==="")return;const l=Number(o);return isNaN(l)?void 0:e.toUpperCase()}if(e!==""&&!isNaN(Number(e)))return"Q"+e}}static QIdToNumber(e){if(e==null)return;if(typeof e=="number")return e;if(e=e.trim(),!e.startsWith("Q"))return;e=e.substr(1);const t=Number(e);if(!isNaN(t))return t}static IdToArticle(e){if(e.startsWith("Q"))return"https://wikidata.org/wiki/"+e;if(e.startsWith("L"))return"https://wikidata.org/wiki/Lexeme:"+e;throw"Unknown id type: "+e}static async Sparql(e,t){const o="SELECT "+e.map(h=>h.startsWith("?")?h:"?"+h).join(" ")+`
WHERE
{
`+t.map(h=>h.endsWith(".")?h:h+".").join(`
`)+`  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE]". }
}`,l=wikidataSdk.sparqlQuery(o);return(await Utils.downloadJsonCached(l,24*60*60*1e3)).results.bindings}static async LoadWikidataEntryAsync(e){const t=ii.ExtractKey(e);if(t===void 0){console.warn("Could not extract a wikidata entry from",e);return}const o="https://www.wikidata.org/wiki/Special:EntityData/"+t+".json",l=(await Utils.downloadJsonCached(o,1e4)).entities,d=Array.from(Object.keys(l))[0],h=l[d];return t.startsWith("L")?new WikidataLexeme(h).asWikidataResponse():WikidataResponse.fromJson(h)}};let Wikidata=ii;ge(Wikidata,"_identifierPrefixes",["Q","L"].map(e=>e.toLowerCase())),ge(Wikidata,"_prefixesToRemove",["https://www.wikidata.org/wiki/Lexeme:","https://www.wikidata.org/wiki/","http://www.wikidata.org/entity/","Lexeme:"].map(e=>e.toLowerCase())),ge(Wikidata,"_cache",new Map);class ImageProvider{GetRelevantUrls(e,t){const o=(t==null?void 0:t.prefixes)??this.defaultKeyPrefixes;if(o===void 0)throw"No `defaultKeyPrefixes` defined by this image provider";const l=new UIEventSource([]),d=new Set;return e.addCallbackAndRunD(h=>{var g,m;for(const y in h){if(!o.some(w=>y.startsWith(w)))continue;const b=Utils.NoEmpty(((m=(g=h[y])==null?void 0:g.split(";"))==null?void 0:m.map(w=>w.trim()))??[]);for(const w of b)d.has(w)||(d.add(w),this.ExtractUrls(y,w).then(E=>{for(const P of E??[])P!==void 0&&P.then($=>{$!==void 0&&(l.data.push($),l.ping())})}))}}),l}}class LicenseInfo{constructor(){ge(this,"title","");ge(this,"artist","");ge(this,"license");ge(this,"licenseShortName","");ge(this,"usageTerms","");ge(this,"attributionRequired",!1);ge(this,"copyrighted",!1);ge(this,"credit","");ge(this,"description","");ge(this,"informationLocation")}}class Wikimedia{static async GetCategoryContents(e,t=10,o=void 0){var y;if(e==null||e==="")return[];e.startsWith("Category:")||(e="Category:"+e);let l="https://commons.wikimedia.org/w/api.php?action=query&list=categorymembers&format=json&&origin=*&cmtitle="+encodeURIComponent(e);o!==void 0&&(l=`${l}&cmcontinue=${o}`);const d=await Utils.downloadJson(l),g=(((y=d.query)==null?void 0:y.categorymembers)??[]).map(b=>b.title);if(d.continue===void 0)return g;if(t-g.length<=0)return console.debug(`Recursive wikimedia category load stopped for ${e}`),g;const m=await Wikimedia.GetCategoryContents(e,t-g.length,d.continue.cmcontinue);return g.push(...m),g}}const ai=class extends ImageProvider{constructor(){super();ge(this,"commons_key","wikimedia_commons");ge(this,"defaultKeyPrefixes",[this.commons_key,"image"])}static ExtractFileName(t){if(!t.startsWith("http"))return t;const o=new URL(t).pathname;return o.substring(o.lastIndexOf("/")+1)}static PrepareUrl(t){return t.toLowerCase().startsWith("https://commons.wikimedia.org/wiki/")?t:`https://commons.wikimedia.org/wiki/Special:FilePath/${encodeURIComponent(t)}?width=500&height=400`}static startsWithCommonsPrefix(t){return ai.commonsPrefixes.some(o=>t.startsWith(o))}static removeCommonsPrefix(t){if(t.startsWith("https://upload.wikimedia.org/"))return t=t.substring(t.lastIndexOf("/")+1),t=decodeURIComponent(t),t.startsWith("File:")||(t="File:"+t),t;for(const o of ai.commonsPrefixes)if(t.startsWith(o)){let l=t.substr(o.length);return o.startsWith("http")&&(l=decodeURIComponent(l)),l}return t}SourceIcon(t){const o=Svg.wikimedia_commons_white_svg().SetStyle("width:2em;height: 2em");return t===void 0?o:new Link(Svg.wikimedia_commons_white_img,`https://commons.wikimedia.org/wiki/${t}`,!0)}PrepUrl(t){return ai.startsWithCommonsPrefix(t),t=ai.removeCommonsPrefix(t),t.startsWith("File:")?this.UrlForImage(t):this.UrlForImage("File:"+t)}async ExtractUrls(t,o){const l=ai.startsWithCommonsPrefix(o);return t!==void 0&&t!==this.commons_key&&!l?[]:(o=ai.removeCommonsPrefix(o),o.startsWith("Category:")?(await Wikimedia.GetCategoryContents(o)).filter(h=>h.startsWith("File:")).map(h=>Promise.resolve(this.UrlForImage(h))):o.startsWith("File:")?[Promise.resolve(this.UrlForImage(o))]:o.startsWith("http")?[]:[Promise.resolve(this.UrlForImage("File:"+o))])}async DownloadAttribution(t){var y,b,w,E,P,$,C,L,W;if(t=ai.ExtractFileName(t),t==="")return;const o="https://en.wikipedia.org/w/api.php?action=query&prop=imageinfo&iiprop=extmetadata&titles="+t+"&format=json&origin=*",l=await Utils.downloadJsonCached(o,365*24*60*60),d=new LicenseInfo,h=l.query.pages[-1];if(h===void 0)return;const g=(y=(h.imageinfo??[])[0])==null?void 0:y.extmetadata;if(g===void 0){console.warn("The file",t,"has no usable metedata or license attached... Please fix the license info file yourself!");return}let m=h.title;return m.startsWith("File:")&&(m=m.substr(5)),(m.endsWith(".jpg")||m.endsWith(".png"))&&(m=m.substring(0,m.length-4)),d.title=m,d.artist=(b=g.Artist)==null?void 0:b.value,d.license=(w=g.License)==null?void 0:w.value,d.copyrighted=(E=g.Copyrighted)==null?void 0:E.value,d.attributionRequired=(P=g.AttributionRequired)==null?void 0:P.value,d.usageTerms=($=g.UsageTerms)==null?void 0:$.value,d.licenseShortName=(C=g.LicenseShortName)==null?void 0:C.value,d.credit=(L=g.Credit)==null?void 0:L.value,d.description=(W=g.ImageDescription)==null?void 0:W.value,d.informationLocation=new URL("https://en.wikipedia.org/wiki/"+h.title),d}UrlForImage(t){return t.startsWith("File:")||(t="File:"+t),{url:ai.PrepareUrl(t),key:void 0,provider:this}}};let WikimediaImageProvider=ai;ge(WikimediaImageProvider,"singleton",new ai),ge(WikimediaImageProvider,"commonsPrefixes",["https://commons.wikimedia.org/wiki/","https://upload.wikimedia.org","File:"]);const Wi=class extends VariableUiElement{constructor(e,t){let o=!1;const l=e.stabilized(250).bind(d=>d===void 0||d===""||d==="Q"?null:(o=!0,Wikidata.LoadWikidataEntry(d)));super(l.map(d=>{if(d===null||!o)return t==null?void 0:t.whileLoading;if(d===void 0)return new Loading(Translations.t.general.loading);if(d.error!==void 0)return new FixedUiElement(d.error).SetClass("alert");const h=d.success;return Wi.WikidataResponsePreview(h,t)}))}static WikidataResponsePreview(e,t){var h,g,m;let o=(h=new Link(new Combine([e.id,t!=null&&t.noImages?e.id:Svg.wikidata_svg().SetStyle("width: 2.5rem").SetClass("block")]).SetClass("flex"),Wikidata.IdToArticle(e.id),!0))==null?void 0:h.SetClass("must-link"),l=new Combine([new Combine([(g=Translation.fromMap(e.labels))==null?void 0:g.SetClass("font-bold"),o]).SetClass("flex justify-between"),Translation.fromMap(e.descriptions),Wi.QuickFacts(e,t),...(t==null?void 0:t.extraItems)??[]]).SetClass("flex flex-col link-underline"),d;return((m=e.claims.get("P18"))==null?void 0:m.size)>0&&(d=Array.from(e.claims.get("P18"))[0]),d&&!(t!=null&&t.noImages)&&(d=WikimediaImageProvider.singleton.PrepUrl(d).url,l=new Combine([new Img(d).SetStyle((t==null?void 0:t.imageStyle)??"max-width: 5rem; width: unset; height: 4rem").SetClass("rounded-xl mr-2"),l.SetClass("w-full")]).SetClass("flex")),l.SetClass("p-2 w-full"),l}static QuickFacts(e,t){var l,d,h;const o=[];for(const g of Wi.extraProperties){let m=!0;for(const $ of g.requires){if(!((l=e.claims)!=null&&l.has("P"+$.p))){m=!1;break}if(!((d=e.claims)!=null&&d.get("P"+$.p).has("Q"+$.q))){m=!1;break}}if(!m)continue;const y=g.property,b=(t!=null&&t.noImages?g.textMode:g.display)??g.display;if(((h=e.claims)==null?void 0:h.get(y))===void 0)continue;const w=Array.from(e.claims.get(y));if(b instanceof Translation){o.push(b.Subs({value:w.join(", ")}).SetClass("m-2"));continue}const P=Utils.NoNull(w.map($=>b.get($))).map($=>typeof $=="string"?new FixedUiElement($):$());o.push(new Combine(P).SetClass("flex m-2"))}if(o.length!==0)return new Combine(o).SetClass("flex")}};let WikidataPreviewBox=Wi;ge(WikidataPreviewBox,"isHuman",[{p:31,q:5}]),ge(WikidataPreviewBox,"extraProperties",[{requires:Wi.isHuman,property:"P21",display:new Map([["Q6581097",()=>Svg.gender_male_svg().SetStyle("width: 1rem; height: auto")],["Q6581072",()=>Svg.gender_female_svg().SetStyle("width: 1rem; height: auto")],["Q1097630",()=>Svg.gender_inter_svg().SetStyle("width: 1rem; height: auto")],["Q1052281",()=>Svg.gender_trans_svg().SetStyle("width: 1rem; height: auto")],["Q2449503",()=>Svg.gender_trans_svg().SetStyle("width: 1rem; height: auto")],["Q48270",()=>Svg.gender_queer_svg().SetStyle("width: 1rem; height: auto")]]),textMode:new Map([["Q6581097",""],["Q6581072",""],["Q1097630",""],["Q1052281",""],["Q2449503",""],["Q48270"," "]])},{property:"P569",requires:Wi.isHuman,display:Translations.t.general.wikipedia.previewbox.born},{property:"P570",requires:Wi.isHuman,display:Translations.t.general.wikipedia.previewbox.died}]);const ca=class{constructor(e){ge(this,"backend");this.backend=ca.getBackendUrl(e??{})}static extractLanguageAndName(e){const t=e.match("([^:]+):(.*)");if(t==null)return;const[o,l,d]=t;return{language:l,pageName:d}}extractPageName(e){if(!e.startsWith(this.backend))return;e=e.substring(this.backend.length);const t=e.match("/?wiki/(.+)");if(t==null)return;const[o,l]=t;return l}static getBackendUrl(e){let t="en.wikipedia.org";return e.backend?t=e.backend:e.language&&(t=`${e.language??"en"}.wikipedia.org`),t.startsWith("http")||(t="https://"+t),t}GetArticle(e,t){const o=this.backend+":"+e+":"+(t.firstParagraphOnly??!1),l=ca._cache.get(o);if(l!==void 0)return l;const d=UIEventSource.FromPromiseWithErr(this.GetArticleAsync(e,t));return ca._cache.set(o,d),d}getDataUrl(e){return`${this.backend}/w/api.php?action=parse&format=json&origin=*&prop=text&page=`+e}getPageUrl(e){return`${this.backend}/wiki/${e}`}async search(e){const t=this.backend+"/w/api.php?action=query&format=json&list=search&srsearch="+encodeURIComponent(e);return(await Utils.downloadJson(t)).query.search}async searchViaIndex(e){var g,m;const t=`${this.backend}/w/index.php?search=${encodeURIComponent(e)}&ns0=1`,o=await Utils.downloadAdvanced(t);if(o.redirect){const y=o.redirect;return[{title:(g=this.extractPageName(y))==null?void 0:g.trim(),url:y,snippet:""}]}if(o.error)throw"Could not download: "+JSON.stringify(o);const l=document.createElement("html");l.innerHTML=o.content.replace(/href="\//g,'href="'+this.backend+"/");const d=l.getElementsByClassName("mw-search-results");return Array.from(((m=d[0])==null?void 0:m.getElementsByClassName("mw-search-result"))??[]).map(y=>{const b=Array.from(y.getElementsByClassName("searchalttitle"));for(const w of b)w.parentElement.removeChild(w);return{title:y.getElementsByClassName("mw-search-result-heading")[0].textContent.trim(),url:y.getElementsByTagName("a")[0].href,snippet:y.getElementsByClassName("searchresult")[0].textContent}})}async GetArticleAsync(e,t){var m,y,b;const o=await Utils.downloadJson(this.getDataUrl(e));if(((m=o==null?void 0:o.parse)==null?void 0:m.text)===void 0)return;const l=o.parse.text["*"];if(l===void 0)return;const d=document.createElement("div");d.innerHTML=l;const h=Array.from(d.children)[0];for(const w of ca.classesToRemove){const E=h.getElementsByClassName(w);for(const P of Array.from(E))(y=P.parentElement)==null||y.removeChild(P)}for(const w of ca.idsToRemove){const E=h.querySelector("#"+w);(b=E==null?void 0:E.parentElement)==null||b.removeChild(E)}return Array.from(h.getElementsByTagName("a")).filter(w=>{var E;return((E=w.getAttribute("href"))==null?void 0:E.startsWith("/"))??!1}).forEach(w=>{w.target="_blank",w.href=`${this.backend}${w.getAttribute("href")}`}),t!=null&&t.firstParagraphOnly?h.getElementsByTagName("p").item(0).innerHTML:h.innerHTML}};let Wikipedia=ca;ge(Wikipedia,"classesToRemove",["shortdescription","sidebar","infobox","infobox_v2","noprint","ambox","mw-editsection","mw-selflink","mw-empty-elt","hatnote"]),ge(Wikipedia,"idsToRemove",["sjabloon_zie"]),ge(Wikipedia,"_cache",new Map);class TabbedComponent extends Combine{constructor(e,t=0,o){const l=typeof t=="number"?new UIEventSource(t):t??new UIEventSource(0),d=[o==null?void 0:o.leftOfHeader],h=[];for(let y=0;y<e.length;y++){let b=e[y];const w=Translations.W(b.header).onClick(()=>l.setData(y));l.addCallbackAndRun($=>{$>=e.length&&($=0),$===y?(w.SetClass("tab-active"),w.RemoveClass("tab-non-active")):(w.SetClass("tab-non-active"),w.RemoveClass("tab-active"))});const E=Translations.W(b.content);E.SetClass("relative w-full inline-block"),h.push(E);const P=w.SetClass("block tab-single-header");d.push(P)}const g=new Combine(d).SetClass("tabs-header-bar");o!=null&&o.styleHeader&&o.styleHeader(g);const m=new VariableUiElement(l.map(y=>h[y])).SetStyle("max-height: inherit; height: inherit");super([g,m])}}class Paragraph extends BaseUIElement{constructor(t){super();ge(this,"content");this.content=t??""}AsMarkdown(){let t;return typeof this.content!="string"?t=this.content.AsMarkdown():t=this.content,`

`+t+`

`}InnerConstructElement(){const t=document.createElement("p");return typeof this.content!="string"?t.appendChild(this.content.ConstructElement()):t.innerHTML=this.content,t}}class WikipediaBox extends Combine{constructor(e,t){const o=[];t=t??{addHeader:!1,firstParagraphOnly:!0,noImages:!1};const l=e.map(d=>WikipediaBox.createLinkedContent(d.trim(),t));if(e.length==1){const d=l[0];o.push(new Combine([new Combine([t.noImages?void 0:Svg.wikipedia_ui().SetStyle("width: 1.5rem").SetClass("inline-block mr-3"),d.titleElement]).SetClass("flex"),d.linkElement]).SetClass("flex justify-between align-middle")),o.push(d.contents.SetClass("overflow-auto normal-background rounded-lg"))}else if(e.length>1){const d=new TabbedComponent(l.map(h=>{const g=h.contents.SetClass("overflow-auto normal-background rounded-lg block").SetStyle("max-height: inherit; height: inherit; padding-bottom: 3.3rem");return{header:h.titleElement.SetClass("pl-2 pr-2"),content:new Combine([h.linkElement.SetStyle("top: 2rem; right: 2.5rem;").SetClass("absolute subtle-background rounded-full p-3 opacity-50 hover:opacity-100 transition-opacity"),g]).SetStyle("max-height: inherit; height: inherit").SetClass("relative")}}),0,{leftOfHeader:t.noImages?void 0:Svg.wikipedia_svg().SetStyle("width: 1.5rem; align-self: center;").SetClass("mr-4"),styleHeader:h=>h.SetClass("subtle-background").SetStyle("height: 3.3rem")});d.SetStyle("height: inherit; max-height: inherit; overflow: hidden"),o.push(d)}super(o),this.SetClass("block rounded-xl subtle-background m-1 p-2 flex flex-col").SetStyle("max-height: inherit")}static createLinkedContent(e,t){return e.match("[qQ][0-9]+")?WikipediaBox.createWikidatabox(e,t):WikipediaBox.createWikipediabox(e,t)}static createWikipediabox(e,t){const o=Translations.t.general.wikipedia,l=Wikipedia.extractLanguageAndName(e);if(l===void 0)return{titleElement:void 0,contents:o.noWikipediaPage,linkElement:void 0};const d=new Wikipedia({language:l.language}),h=d.getPageUrl(l.pageName),g=new Link(Svg.pop_out_svg().SetStyle("width: 1.2rem").SetClass("block  "),h,!0).SetClass("flex items-center enable-links");return{titleElement:new Title$1(l.pageName,3),contents:WikipediaBox.createContents(l.pageName,d,t),linkElement:g}}static createWikidatabox(e,t){const o=Translations.t.general.wikipedia,l=Wikidata.LoadWikidataEntry(e).map(m=>{if(m===void 0)return"loading";if(m.error!==void 0)return"failed";const y=m.success;if(y===void 0)return"failed";if(y.wikisites.size===0)return["no page",y];const b=[Locale.language.data,"en",Array.from(y.wikisites.keys())[0]];let w,E,P=0;do w=b[P],E=y.wikisites.get(w),P++;while(E===void 0);return[E,w,y]},[Locale.language]),d=new VariableUiElement(l.map(m=>{var $;if(m==="loading")return new Loading(o.loading.Clone()).SetClass("pl-6 pt-2");if(m==="failed")return o.failed.Clone().SetClass("alert p-4");if(m[0]=="no page"){const[C,L]=m;return($=t.currentState)==null||$.setData("loaded"),new Combine([WikidataPreviewBox.WikidataResponsePreview(L),o.noWikipediaPage.Clone().SetClass("subtle")]).SetClass("flex flex-col p-4")}const[y,b,w]=m,E=new Wikipedia({language:b}),P=WikidataPreviewBox.QuickFacts(w);return WikipediaBox.createContents(y,E,{topBar:P,...t})})),h=new VariableUiElement(l.map(m=>{if(typeof m!="string"){const[y,b]=m;if(y==="no page"){const w=m[1];return new Title$1(Translation.fromMap(w.labels),3)}return new Title$1(y,3)}return new Link(new Title$1(e,3),"https://www.wikidata.org/wiki/"+e,!0)})),g=new VariableUiElement(l.map(m=>{if(typeof m!="string"){const[y,b]=m,w=t.noImages?"Source":Svg.pop_out_svg().SetStyle("width: 1.2rem").SetClass("block");if(y==="no page"){const P=m[1];return new Link(w,"https://www.wikidata.org/wiki/"+P.id,!0)}const E=`https://${b}.wikipedia.org/wiki/${y}`;return new Link(w,E,!0)}})).SetClass("flex items-center enable-links");return{contents:d,linkElement:g,titleElement:h}}static createContents(e,t,o){var g;const l=t.GetArticle(e,o),d=Translations.t.general.wikipedia,h=new VariableUiElement(l.map(m=>{if(m===void 0)return new Loading(d.loading.Clone());if(m.success!==void 0){let y=new FixedUiElement(m.success);return o!=null&&o.addHeader&&(y=new Combine([new Paragraph(new Link(d.fromWikipedia,t.getPageUrl(e),!0)),new Paragraph(y)])),y.SetClass("wikipedia-article")}if(m.error)return console.warn("Loading wikipage failed due to",m.error),d.failed.Clone().SetClass("alert p-4")}));return l.addCallbackAndRunD(m=>{var y,b,w;m.success!==void 0?(y=o.currentState)==null||y.setData("loaded"):m.error!==void 0?(b=o.currentState)==null||b.setData("error"):(w=o.currentState)==null||w.setData("loading")}),new Combine([(g=o==null?void 0:o.topBar)==null?void 0:g.SetClass("border-2 border-grey rounded-lg m-1 mb-0"),h.SetClass("block pl-6 pt-2")])}}const Bs=class extends InputElement{constructor(t){super();ge(this,"IsSelected",new UIEventSource(!1));ge(this,"wikidataId");ge(this,"searchText");ge(this,"instanceOf");ge(this,"notInstanceOf");this.searchText=t==null?void 0:t.searchText,this.wikidataId=(t==null?void 0:t.value)??new UIEventSource(void 0),this.instanceOf=t==null?void 0:t.instanceOf,this.notInstanceOf=t==null?void 0:t.notInstanceOf}GetValue(){return this.wikidataId}IsValid(t){return t.startsWith("Q")&&!isNaN(Number(t.substring(1)))}InnerConstructElement(){const t=new TextField({placeholder:Translations.t.general.wikipedia.searchWikidata,value:this.searchText,inputStyle:"width: calc(100% - 0.5rem); border: 1px solid black"}),o=this.wikidataId,l=new ImmutableStore({success:void 0}),d=t.GetValue().bind(m=>{if(m.length<3)return l;const y=Locale.language.data,b=y+":"+m;let w=Bs._searchCache.get(b);return w===void 0&&(w=Wikidata.searchAndFetch(m,{lang:y,maxCount:5,notInstanceOf:this.notInstanceOf,instanceOf:this.instanceOf}),Bs._searchCache.set(b,w)),Stores.FromPromiseWithErr(w)}),h=new VariableUiElement(d.map(m=>{if(t.GetValue().data.length===0)return Translations.t.general.wikipedia.doSearch;if(t.GetValue().data.length<3)return Translations.t.general.wikipedia.searchToShort;if(m===void 0)return new Loading(Translations.t.general.loading);if(m.error!==void 0)return new Combine([Translations.t.general.wikipedia.failed.Clone().SetClass("alert"),m.error]);const y=m.success;return y.length===0?Translations.t.general.wikipedia.noResults.Subs({search:t.GetValue().data??""}):new Combine(y.map(b=>{const w=WikidataPreviewBox.WikidataResponsePreview(b).SetClass("rounded-xl p-1 sm:p-2 md:p-3 m-px border-2 sm:border-4 transition-colors");return w.onClick(()=>{o.setData(b.id)}),o.addCallbackAndRunD(E=>{E===b.id?w.SetClass("subtle-background border-attention"):(w.RemoveClass("subtle-background"),w.RemoveClass("border-attention"))}),w})).SetClass("flex flex-col")},[t.GetValue()])),g=new Combine([new Title$1(Translations.t.general.wikipedia.searchWikidata,3).SetClass("m-2"),new Combine([Svg.search_ui().SetStyle("width: 1.5rem"),t.SetClass("m-2 w-full")]).SetClass("flex"),h]).SetClass("flex flex-col border-2 border-black rounded-xl m-2 p-2");return new Combine([new VariableUiElement(o.map(m=>{if(m!==void 0)return new WikipediaBox(m.split(";"))})).SetStyle("max-height:12.5rem"),g]).ConstructElement()}};let WikidataSearchBox=Bs;ge(WikidataSearchBox,"_searchCache",new Map);class InputElementMap extends InputElement{constructor(t,o,l,d,h=[]){super();ge(this,"_inputElement");ge(this,"isSame");ge(this,"fromX");ge(this,"toX");ge(this,"_value");this.isSame=o,this.fromX=d,this.toX=l,this._inputElement=t;const g=this;this._value=t.GetValue().sync(m=>{var w;const y=l(m),b=(w=g.GetValue())==null?void 0:w.data;return o(b,y)?b:y},h,m=>d(m))}GetValue(){return this._value}IsValid(t){if(t===void 0)return!1;const o=this.fromX(t);return o===void 0?!1:this._inputElement.IsValid(o)}InnerConstructElement(){return this._inputElement.ConstructElement()}}class TextFieldDef{constructor(e,t){ge(this,"name");ge(this,"explanation");ge(this,"inputmode");this.name=e,this.name.endsWith("textfield")&&(this.name=this.name.substr(0,this.name.length-9)),this.name.endsWith("textfielddef")&&(this.name=this.name.substr(0,this.name.length-12)),typeof t=="string"?this.explanation=t:this.explanation=t.AsMarkdown()}getFeedback(e){const t=Translations.t.validation[this.name];if(t!==void 0)return t.feedback}ConstructInputElement(e={}){var h,g;e.placeholder===void 0&&(e.placeholder=((h=Translations.t.validation[this.name])==null?void 0:h.description)??this.name),e.textArea=this.name==="text",this.name==="text"&&(e.htmlType="area");const t=this;e.unit!==void 0?e.isValid=m=>{const y=e.unit.findDenomination(m,e==null?void 0:e.country);if(y===void 0)return!1;const b=y[0];return t.isValid(b,e.country)}:e.isValid=m=>t.isValid(m,e.country),e.cssText="width: 100%;",e.inputMode=this.inputmode,this.inputmode==="text"&&(e.htmlType="area",e.textAreaRows=4);const o=new TextField(e);let l=o;if(e.feedback&&o.GetRawValue().addCallback(m=>{t.isValid(m,e.country)?e.feedback.setData(void 0):e.feedback.setData(t.getFeedback(m))}),this.reformat&&e.unit===void 0&&l.GetValue().addCallbackAndRun(m=>{if(!e.isValid(m,e.country))return;const y=this.reformat(m,e.country);l.GetValue().setData(y)}),e.unit){const m=e.unit,y=l.GetValue().map(E=>(E==null?void 0:E.trim())==="1"),b=m.denominations.length===1?new FixedInputElement(m.denominations[0].getToggledHuman(y),m.denominations[0]):new DropDown("",m.denominations.map(E=>({shown:E.getToggledHuman(y),value:E})));b.GetValue().setData(m.getDefaultInput(e.country)),b.SetClass("w-min");const w=m.denominations.length===1?m.denominations[0]:void 0;l=new CombinedInputElement(l,b,(E,P)=>P===void 0?E:P==null?void 0:P.canonicalValue(E,!0),E=>{const P=m.findDenomination(E,e==null?void 0:e.country);if(P===void 0)return[void 0,w];const[$,C]=P;return $===void 0?[void 0,w]:[$,C]}).SetClass("flex")}const d=(g=this.inputHelper(l.GetValue(),{location:e.location,mapBackgroundLayer:e.mapBackgroundLayer,args:e.args,feature:e.feature}))==null?void 0:g.SetClass("block");return d!==void 0&&(l=new CombinedInputElement(l,d,(m,y)=>m,m=>[m,m]).SetClass("block w-full")),this.postprocess!==void 0&&(l=new InputElementMap(l,(m,y)=>m===y,this.postprocess,this.undoPostprocess)),l}isValid(e,t){return!0}reformat(e,t){return e}postprocess(e){return e}undoPostprocess(e){return e}inputHelper(e,t){}}class WikidataTextField extends TextFieldDef{constructor(){super("wikidata",new Combine(["A wikidata identifier, e.g. Q42.",new Title$1("Helper arguments"),new Table(["name","doc"],[["key","the value of this tag will initialize search (default: name)"],["options",new Combine(["A JSON-object of type `{ removePrefixes: string[], removePostfixes: string[] }`.",new Table(["subarg","doc"],[["removePrefixes","remove these snippets of text from the start of the passed string to search. This is either a list OR a hash of languages to a list. The individual strings are interpreted as case ignoring regexes"],["removePostfixes","remove these snippets of text from the end of the passed string to search. This is either a list OR a hash of languages to a list. The individual strings are interpreted as case ignoring regexes."],["instanceOf","A list of Q-identifier which indicates that the search results _must_ be an entity of this type, e.g. [`Q5`](https://www.wikidata.org/wiki/Q5) for humans"],["notInstanceof","A list of Q-identifiers which indicates that the search results _must not_ be an entity of this type, e.g. [`Q79007`](https://www.wikidata.org/wiki/Q79007) to filter away all streets from the search results"]])])]]),new Title$1("Example usage"),`The following is the 'freeform'-part of a layer config which will trigger a search for the wikidata item corresponding with the name of the selected feature. It will also remove '-street', '-square', ... if found at the end of the name

\`\`\`json
"freeform": {
    "key": "name:etymology:wikidata",
    "type": "wikidata",
    "helperArgs": [
        "name",
        {
            "removePostfixes": {"en": [
                "street",
                "boulevard",
                "path",
                "square",
                "plaza",
            ],
             "nl": ["straat","plein","pad","weg",laan"],
             "fr":["route (de|de la|de l'| de le)"]
             },

            "#": "Remove streets and parks from the search results:"
             "notInstanceOf": ["Q79007","Q22698"]
        }

    ]
}
\`\`\`

Another example is to search for species and trees:

\`\`\`json
 "freeform": {
        "key": "species:wikidata",
        "type": "wikidata",
        "helperArgs": [
          "species",
          {
          "instanceOf": [10884, 16521]
        }]
      }
\`\`\`
`]))}isValid(e){return e===void 0||e.length<=2?!1:!e.split(";").some(t=>Wikidata.ExtractKey(t)===void 0)}reformat(e){if(e===void 0)return;let t=e.split(";").map(o=>Wikidata.ExtractKey(o)).join("; ");return e.endsWith(";")&&(t=t+";"),t}inputHelper(e,t){var b,w;const o=t.args??[],l=o[0]??"name",d=((w=(b=t.feature)==null?void 0:b.properties[l])==null?void 0:w.toLowerCase())??"";let h=new UIEventSource(d);const g=o[1];if(d!==void 0&&g!==void 0){const E=g.removePrefixes??[],P=g.removePostfixes??[];Locale.language.map(C=>{const L=(Array.isArray(E)?E:E[C]??[]).map(D=>new RegExp("^"+D,"i")),W=(Array.isArray(P)?P:P[C]??[]).map(D=>new RegExp(D+"$","i"));let Y=d;for(const D of W){const k=d.match(D);if(k!==null){Y=d.substring(0,d.length-k[0].length);break}}for(const D of L){const k=d.match(D);if(k!==null){Y=d.substring(k[0].length);break}}return Y}).addCallbackAndRun(C=>h.setData(C))}let m=Utils.NoNull(((g==null?void 0:g.instanceOf)??[]).map(E=>Wikidata.QIdToNumber(E))),y=Utils.NoNull(((g==null?void 0:g.notInstanceOf)??[]).map(E=>Wikidata.QIdToNumber(E)));return new WikidataSearchBox({value:e,searchText:h,instanceOf:m,notInstanceOf:y})}}class OpeningHoursTextField extends TextFieldDef{constructor(){super("opening_hours",new Combine(["Has extra elements to easily input when a POI is opened.",new Title$1("Helper arguments"),new Table(["name","doc"],[["options",new Combine(["A JSON-object of type `{ prefix: string, postfix: string }`. ",new Table(["subarg","doc"],[["prefix","Piece of text that will always be added to the front of the generated opening hours. If the OSM-data does not start with this, it will fail to parse."],["postfix","Piece of text that will always be added to the end of the generated opening hours"]])])]]),new Title$1("Example usage"),`To add a conditional (based on time) access restriction:

\`\`\`

"freeform": {
    "key": "access:conditional",
    "type": "opening_hours",
    "helperArgs": [
        {
          "prefix":"no @ (",
          "postfix":")"
        }
    ]
}
\`\`\`

*Don't forget to pass the prefix and postfix in the rendering as well*: \`{opening_hours_table(opening_hours,yes @ &LPARENS, &RPARENS )\``]))}isValid(){return!0}reformat(e){return e}inputHelper(e,t){const o=(t.args??[])[0],l=(o==null?void 0:o.prefix)??"",d=(o==null?void 0:o.postfix)??"";return new OpeningHoursInput(e,l,d)}}class UrlTextfieldDef extends TextFieldDef{constructor(){super("url","The validatedTextField will format URLs to always be valid and have a https://-header (even though the 'https'-part will be hidden from the user")}postprocess(e){if(e!==void 0)return!e.startsWith("http://")||!e.startsWith("https://")?"https://"+e:e}undoPostprocess(e){if(e!==void 0)return e.startsWith("http://")?e.substr(7):e.startsWith("https://")?e.substr(8):e}reformat(e){try{let t;!e.startsWith("http://")&&!e.startsWith("https://")&&!e.startsWith("http:")?t=new URL("https://"+e):t=new URL(e);const o=["fbclid","gclid","cmpid","agid","utm","utm_source","utm_medium","campaignid","campaign","AdGroupId","AdGroup","TargetId","msclkid"];for(const d of o)t.searchParams.delete(d.toLowerCase());let l=t.toString();return l.endsWith("/")&&!e.endsWith("/")&&(l=l.substr(0,l.length-1)),l.startsWith("https://")&&(l=l.substr(8)),l}catch(t){console.error(t);return}}isValid(e){try{!e.startsWith("http://")&&!e.startsWith("https://")&&!e.startsWith("http:")&&(e="https://"+e);const t=new URL(e);return t.host.indexOf(".")>0&&t.host[t.host.length-1]!=="."}catch{return!1}}}class StringTextField extends TextFieldDef{constructor(){super("string","A simple piece of text")}}class TextTextField extends TextFieldDef{constructor(){super("text","A longer piece of text. Uses an textArea instead of a textField")}}class DateTextField extends TextFieldDef{constructor(){super("date","A date with date picker");ge(this,"isValid",t=>!isNaN(new Date(t).getTime()))}reformat(t){const o=new Date(t);let l=""+(o.getMonth()+1),d=""+o.getDate();const h=o.getFullYear();return l.length<2&&(l="0"+l),d.length<2&&(d="0"+d),[h,l,d].join("-")}inputHelper(t){return new SimpleDatePicker(t)}}class LengthTextField extends TextFieldDef{constructor(){super("distance",'A geographical distance in meters (rounded at two points). Will give an extra minimap with a measurement tool. Arguments: [ zoomlevel, preferredBackgroundMapType (comma separated) ], e.g. `["21", "map,photo"]');ge(this,"inputMode");ge(this,"isValid",t=>{const o=Number(t);return!isNaN(o)});ge(this,"inputHelper",(t,o)=>{o=o??{},o.location=o.location??[0,0];const l=o.args??[];let d=19;if(l[0]&&(d=Number(l[0]),isNaN(d)&&(console.error("Invalid zoom level for argument at 'length'-input. The offending argument is: ",l[0]," (using 19 instead)"),d=19)),(o==null?void 0:o.feature)!==void 0&&o.feature.geometry.type!=="Point"){const y=[...o.location];y.reverse(),o.location=GeoOperations.nearestPoint(o.feature,y).geometry.coordinates,o.location.reverse()}const h=new UIEventSource({lat:o.location[0],lon:o.location[1],zoom:d});l[1]&&(o.mapBackgroundLayer=AvailableBaseLayers.SelectBestLayerAccordingTo(h,new UIEventSource(l[1].split(","))));const g=o==null?void 0:o.mapBackgroundLayer,m=new LengthInput(new UIEventSource(g.data),h,t);return m.SetStyle("height: 20rem;"),m})}}class FloatTextField extends TextFieldDef{constructor(t,o){super(t??"float",o??"A decimal");ge(this,"inputmode","decimal")}isValid(t){return!isNaN(Number(t))&&!t.endsWith(".")&&!t.endsWith(",")}reformat(t){return""+Number(t)}getFeedback(t){if(isNaN(Number(t)))return Translations.t.validation.nat.notANumber}}class IntTextField extends FloatTextField{constructor(t,o){super(t??"int",o??"A number");ge(this,"inputMode","numeric")}isValid(t){return t=""+t,t!==void 0&&t.indexOf(".")<0&&!isNaN(Number(t))}getFeedback(t){const o=Number(t);if(isNaN(o))return Translations.t.validation.nat.notANumber;if(Math.floor(o)!==o)return Translations.t.validation.nat.mustBeWhole}}class NatTextField extends IntTextField{constructor(t,o){super(t??"nat",o??"A positive number or zero");ge(this,"inputMode","numeric")}isValid(t){return t===void 0?!1:(t=""+t,t.indexOf(".")<0&&!isNaN(Number(t))&&Number(t)>=0)}getFeedback(t){const o=super.getFeedback(t);if(o!==void 0)return o;if(Number(t)<0)return Translations.t.validation.nat.mustBePositive}}class PNatTextField extends NatTextField{constructor(){super("pnat","A strict positive number");ge(this,"inputmode","numeric");ge(this,"isValid",t=>super.isValid(t)?Number(t)>0:!1)}getFeedback(t){const o=super.getFeedback(t);if(o!==void 0)return o;if(Number(t)===0)return Translations.t.validation.pnat.noZero}}class PFloatTextField extends FloatTextField{constructor(){super("pfloat","A positive decimal (inclusive zero)");ge(this,"inputmode","decimal");ge(this,"isValid",t=>!isNaN(Number(t))&&Number(t)>=0&&!t.endsWith(".")&&!t.endsWith(","))}getFeedback(t){const o=super.getFeedback(t);if(o!==void 0)return o;if(Number(t)<0)return Translations.t.validation.nat.mustBePositive}}class EmailTextField extends TextFieldDef{constructor(){super("email","An email adress");ge(this,"inputmode","email");ge(this,"isValid",t=>t===void 0?!1:(t=t.trim(),t.startsWith("mailto:")&&(t=t.substring(7)),validate(t)));ge(this,"reformat",t=>{if(t!==void 0)return t=t.trim(),t.startsWith("mailto:")&&(t=t.substring(7)),t})}getFeedback(t){return t.indexOf("@")<0?Translations.t.validation.email.noAt:super.getFeedback(t)}}class PhoneTextField extends TextFieldDef{constructor(){super("phone","A phone number");ge(this,"inputmode","tel");ge(this,"reformat",(t,o)=>{var l,d;return t.startsWith("tel:")&&(t=t.substring(4)),(d=parsePhoneNumberFromString(t,(l=o())==null?void 0:l.toUpperCase()))==null?void 0:d.formatInternational()})}isValid(t,o){var d,h;if(t===void 0)return!1;t.startsWith("tel:")&&(t=t.substring(4));let l;return o!==void 0&&(l=(d=o())==null?void 0:d.toUpperCase()),((h=parsePhoneNumberFromString(t,l))==null?void 0:h.isValid())??!1}}class ColorTextField extends TextFieldDef{constructor(){super("color","Shows a color picker");ge(this,"inputHelper",t=>new ColorPicker(t.map(o=>Utils.ColourNameToHex(o??""),[],o=>Utils.HexToColourName(o))))}}class DirectionTextField extends IntTextField{constructor(){super("direction","A geographical direction, in degrees. 0 is north, 90 is east, ... Will return a value between 0 (incl) and 360 (excl)");ge(this,"inputMode","numeric");ge(this,"inputHelper",(t,o)=>{const l=o.args??[];o.location=o.location??[0,0];let d=19;if(l[0]&&(d=Number(l[0]),isNaN(d)))throw"Invalid zoom level for argument at 'length'-input";const h=new UIEventSource({lat:o.location[0],lon:o.location[1],zoom:d});l[1]&&(o.mapBackgroundLayer=AvailableBaseLayers.SelectBestLayerAccordingTo(h,new UIEventSource(l[1].split(","))));const g=new DirectionInput(o.mapBackgroundLayer,h,t);return g.SetStyle("max-width: 25rem;"),g})}reformat(t){return""+Number(t)%360}}const fa=class{static ForType(e="string"){const t=fa.allTypes.get(e);return t===void 0?(console.warn("Something tried to load a validated text field named",e,"but this type does not exist"),this.ForType()):t}static HelpText(){const e=fa.AllTextfieldDefs.map(t=>new Combine([new Title$1(t.name,3),t.explanation]).SetClass("flex flex-col"));return new Combine([new Title$1("Available types for text fields",1),"The listed types here trigger a special input element. Use them in `tagrendering.freeform.type` of your tagrendering to activate them",...e]).SetClass("flex flex-col")}static AvailableTypes(){return fa.AllTextfieldDefs.map(e=>e.name)}static allTypesDict(){const e=new Map;for(const t of fa.AllTextfieldDefs)e[t.name]=t,e.set(t.name,t);return e}};let ValidatedTextField=fa;ge(ValidatedTextField,"AllTextfieldDefs",[new StringTextField,new TextTextField,new DateTextField,new NatTextField,new IntTextField,new LengthTextField,new DirectionTextField,new WikidataTextField,new PNatTextField,new FloatTextField,new PFloatTextField,new EmailTextField,new UrlTextfieldDef,new PhoneTextField,new OpeningHoursTextField,new ColorTextField]),ge(ValidatedTextField,"allTypes",fa.allTypesDict());var lodash_customExports={},lodash_custom={get exports(){return lodash_customExports},set exports(n){lodash_customExports=n}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,o="4.15.0",l=200,d="Expected a function",h="__lodash_hash_undefined__",g=1,m=2,y=1/0,b=9007199254740991,w="[object Arguments]",E="[object Array]",P="[object Boolean]",$="[object Date]",C="[object Error]",L="[object Function]",W="[object GeneratorFunction]",Y="[object Map]",D="[object Number]",k="[object Object]",F="[object Promise]",ce="[object RegExp]",q="[object Set]",te="[object String]",Q="[object Symbol]",ie="[object WeakMap]",J="[object ArrayBuffer]",x="[object DataView]",I="[object Float32Array]",R="[object Float64Array]",B="[object Int8Array]",ee="[object Int16Array]",ne="[object Int32Array]",z="[object Uint8Array]",X="[object Uint8ClampedArray]",A="[object Uint16Array]",Z="[object Uint32Array]",$e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ne=/^\w*$/,Me=/^\./,Ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ve=/[\\^$.*+?()[\]{}|]/g,qe=/\\(\\)?/g,_t=/\w*$/,Qe=/^\[object .+?Constructor\]$/,tt=/^(?:0|[1-9]\d*)$/,st={};st[I]=st[R]=st[B]=st[ee]=st[ne]=st[z]=st[X]=st[A]=st[Z]=!0,st[w]=st[E]=st[J]=st[P]=st[x]=st[$]=st[C]=st[L]=st[Y]=st[D]=st[k]=st[ce]=st[q]=st[te]=st[ie]=!1;var Oe={};Oe[w]=Oe[E]=Oe[J]=Oe[x]=Oe[P]=Oe[$]=Oe[I]=Oe[R]=Oe[B]=Oe[ee]=Oe[ne]=Oe[Y]=Oe[D]=Oe[k]=Oe[ce]=Oe[q]=Oe[te]=Oe[Q]=Oe[z]=Oe[X]=Oe[A]=Oe[Z]=!0,Oe[C]=Oe[L]=Oe[ie]=!1;var Tt=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,yn=typeof self=="object"&&self&&self.Object===Object&&self,St=Tt||yn||Function("return this")(),de=e&&!e.nodeType&&e,U=de&&!0&&n&&!n.nodeType&&n,H=U&&U.exports===de,pe=H&&Tt.process,_e=function(){try{return pe&&pe.binding("util")}catch{}}(),De=_e&&_e.isTypedArray;function Be(T,ue){return T.set(ue[0],ue[1]),T}function Re(T,ue){return T.add(ue),T}function nt(T,ue,xe){switch(xe.length){case 0:return T.call(ue);case 1:return T.call(ue,xe[0]);case 2:return T.call(ue,xe[0],xe[1]);case 3:return T.call(ue,xe[0],xe[1],xe[2])}return T.apply(ue,xe)}function It(T,ue){for(var xe=-1,Le=T?T.length:0;++xe<Le&&ue(T[xe],xe,T)!==!1;);return T}function Yt(T,ue){for(var xe=-1,Le=ue.length,gt=T.length;++xe<Le;)T[gt+xe]=ue[xe];return T}function dt(T,ue,xe,Le){var gt=-1,et=T?T.length:0;for(Le&&et&&(xe=T[++gt]);++gt<et;)xe=ue(xe,T[gt],gt,T);return xe}function Kt(T,ue){for(var xe=-1,Le=T?T.length:0;++xe<Le;)if(ue(T[xe],xe,T))return!0;return!1}function ke(T){return function(ue){return ue==null?t:ue[T]}}function rn(T,ue){for(var xe=-1,Le=Array(T);++xe<T;)Le[xe]=ue(xe);return Le}function nn(T){return function(ue){return T(ue)}}function Ot(T,ue){return T==null?t:T[ue]}function ft(T){var ue=!1;if(T!=null&&typeof T.toString!="function")try{ue=!!(T+"")}catch{}return ue}function Ut(T){var ue=-1,xe=Array(T.size);return T.forEach(function(Le,gt){xe[++ue]=[gt,Le]}),xe}function dr(T,ue){return function(xe){return T(ue(xe))}}function vn(T){var ue=-1,xe=Array(T.size);return T.forEach(function(Le){xe[++ue]=Le}),xe}var ln=Array.prototype,vr=Function.prototype,un=Object.prototype,Lt=St["__core-js_shared__"],En=function(){var T=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}(),ut=vr.toString,Ke=un.hasOwnProperty,At=ut.call(Object),dn=un.toString,ht=RegExp("^"+ut.call(Ke).replace(Ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bn=H?St.Buffer:t,Mt=St.Symbol,me=St.Uint8Array,le=dr(Object.getPrototypeOf,Object),oe=Object.create,re=un.propertyIsEnumerable,G=ln.splice,se=Object.getOwnPropertySymbols,he=Bn?Bn.isBuffer:t,Ie=dr(Object.keys,Object),Ce=Math.max,He=oi(St,"DataView"),Xe=oi(St,"Map"),Fe=oi(St,"Promise"),Se=oi(St,"Set"),ct=oi(St,"WeakMap"),Wt=oi(Object,"create"),Ct=!re.call({valueOf:1},"valueOf"),Bt=Ur(He),pt=Ur(Xe),bt=Ur(Fe),fn=Ur(Se),cn=Ur(ct),Pn=Mt?Mt.prototype:t,Tn=Pn?Pn.valueOf:t,Vn=Pn?Pn.toString:t;function Zt(){}function $n(T){var ue=-1,xe=T?T.length:0;for(this.clear();++ue<xe;){var Le=T[ue];this.set(Le[0],Le[1])}}function qt(){this.__data__=Wt?Wt(null):{}}function Rn(T){return this.has(T)&&delete this.__data__[T]}function Dt(T){var ue=this.__data__;if(Wt){var xe=ue[T];return xe===h?t:xe}return Ke.call(ue,T)?ue[T]:t}function Sr(T){var ue=this.__data__;return Wt?ue[T]!==t:Ke.call(ue,T)}function xn(T,ue){var xe=this.__data__;return xe[T]=Wt&&ue===t?h:ue,this}$n.prototype.clear=qt,$n.prototype.delete=Rn,$n.prototype.get=Dt,$n.prototype.has=Sr,$n.prototype.set=xn;function Vt(T){var ue=-1,xe=T?T.length:0;for(this.clear();++ue<xe;){var Le=T[ue];this.set(Le[0],Le[1])}}function Cn(){this.__data__=[]}function cr(T){var ue=this.__data__,xe=vt(ue,T);if(xe<0)return!1;var Le=ue.length-1;return xe==Le?ue.pop():G.call(ue,xe,1),!0}function Er(T){var ue=this.__data__,xe=vt(ue,T);return xe<0?t:ue[xe][1]}function Ge(T){return vt(this.__data__,T)>-1}function Ht(T,ue){var xe=this.__data__,Le=vt(xe,T);return Le<0?xe.push([T,ue]):xe[Le][1]=ue,this}Vt.prototype.clear=Cn,Vt.prototype.delete=cr,Vt.prototype.get=Er,Vt.prototype.has=Ge,Vt.prototype.set=Ht;function zt(T){var ue=-1,xe=T?T.length:0;for(this.clear();++ue<xe;){var Le=T[ue];this.set(Le[0],Le[1])}}function Zn(){this.__data__={hash:new $n,map:new(Xe||Vt),string:new $n}}function Kr(T){return mr(this,T).delete(T)}function Mn(T){return mr(this,T).get(T)}function Ar(T){return mr(this,T).has(T)}function M(T,ue){return mr(this,T).set(T,ue),this}zt.prototype.clear=Zn,zt.prototype.delete=Kr,zt.prototype.get=Mn,zt.prototype.has=Ar,zt.prototype.set=M;function V(T){var ue=-1,xe=T?T.length:0;for(this.__data__=new zt;++ue<xe;)this.add(T[ue])}function ye(T){return this.__data__.set(T,h),this}function we(T){return this.__data__.has(T)}V.prototype.add=V.prototype.push=ye,V.prototype.has=we;function fe(T){this.__data__=new Vt(T)}function Ae(){this.__data__=new Vt}function be(T){return this.__data__.delete(T)}function Ue(T){return this.__data__.get(T)}function Ye(T){return this.__data__.has(T)}function ot(T,ue){var xe=this.__data__;if(xe instanceof Vt){var Le=xe.__data__;if(!Xe||Le.length<l-1)return Le.push([T,ue]),this;xe=this.__data__=new zt(Le)}return xe.set(T,ue),this}fe.prototype.clear=Ae,fe.prototype.delete=be,fe.prototype.get=Ue,fe.prototype.has=Ye,fe.prototype.set=ot;function je(T,ue){var xe=er(T)||Wr(T)?rn(T.length,String):[],Le=xe.length,gt=!!Le;for(var et in T)(ue||Ke.call(T,et))&&!(gt&&(et=="length"||Ki(et,Le)))&&xe.push(et);return xe}function lt(T,ue,xe){(xe!==t&&!li(T[ue],xe)||typeof ue=="number"&&xe===t&&!(ue in T))&&(T[ue]=xe)}function Nt(T,ue,xe){var Le=T[ue];(!(Ke.call(T,ue)&&li(Le,xe))||xe===t&&!(ue in T))&&(T[ue]=xe)}function vt(T,ue){for(var xe=T.length;xe--;)if(li(T[xe][0],ue))return xe;return-1}function rt(T,ue){return T&&Nn(ue,or(ue),T)}function We(T,ue,xe,Le,gt,et,wt){var $t;if(Le&&($t=et?Le(T,gt,et,wt):Le(T)),$t!==t)return $t;if(!yt(T))return T;var en=er(T);if(en){if($t=xi(T),!ue)return sr(T,$t)}else{var mn=br(T),_n=mn==L||mn==W;if(tr(T))return Vi(T,ue);if(mn==k||mn==w||_n&&!et){if(ft(T))return et?T:{};if($t=ya(_n?{}:T),!ue)return Ai(T,rt($t,T))}else{if(!Oe[mn])return et?T:{};$t=Mi(T,mn,We,ue)}}wt||(wt=new fe);var On=wt.get(T);if(On)return On;if(wt.set(T,$t),!en)var kn=xe?vi(T):or(T);return It(kn||T,function(nr,Un){kn&&(Un=nr,nr=T[Un]),Nt($t,Un,We(nr,ue,xe,Le,Un,T,wt))}),$t}function at(T){return yt(T)?oe(T):{}}var Rt=ji(hn),Pt=si();function hn(T,ue){return T&&Pt(T,ue,or)}function xt(T,ue){ue=wi(ue,T)?[ue]:Jr(ue);for(var xe=0,Le=ue.length;T!=null&&xe<Le;)T=T[Hn(ue[xe++])];return xe&&xe==Le?T:t}function it(T,ue,xe){var Le=ue(T);return er(T)?Le:Yt(Le,xe(T))}function Ze(T){return dn.call(T)}function Et(T,ue){return T!=null&&ue in Object(T)}function Xt(T,ue,xe,Le,gt){return T===ue?!0:T==null||ue==null||!yt(T)&&!Xn(ue)?T!==T&&ue!==ue:kt(T,ue,Xt,xe,Le,gt)}function kt(T,ue,xe,Le,gt,et){var wt=er(T),$t=er(ue),en=E,mn=E;wt||(en=br(T),en=en==w?k:en),$t||(mn=br(ue),mn=mn==w?k:mn);var _n=en==k&&!ft(T),On=mn==k&&!ft(ue),kn=en==mn;if(kn&&!_n)return et||(et=new fe),wt||Xr(T)?Mr(T,ue,xe,Le,gt,et):Ni(T,ue,en,xe,Le,gt,et);if(!(gt&m)){var nr=_n&&Ke.call(T,"__wrapped__"),Un=On&&Ke.call(ue,"__wrapped__");if(nr||Un){var Zr=nr?T.value():T,xr=Un?ue.value():ue;return et||(et=new fe),xe(Zr,xr,Le,gt,et)}}return kn?(et||(et=new fe),Dr(T,ue,xe,Le,gt,et)):!1}function Qt(T,ue,xe,Le){var gt=xe.length,et=gt,wt=!Le;if(T==null)return!et;for(T=Object(T);gt--;){var $t=xe[gt];if(wt&&$t[2]?$t[1]!==T[$t[0]]:!($t[0]in T))return!1}for(;++gt<et;){$t=xe[gt];var en=$t[0],mn=T[en],_n=$t[1];if(wt&&$t[2]){if(mn===t&&!(en in T))return!1}else{var On=new fe;if(Le)var kn=Le(mn,_n,en,T,ue,On);if(!(kn===t?Xt(_n,mn,Le,g|m,On):kn))return!1}}return!0}function Gt(T){if(!yt(T)||va(T))return!1;var ue=Tr(T)||ft(T)?ht:Qe;return ue.test(Ur(T))}function sn(T){return Xn(T)&&Si(T.length)&&!!st[dn.call(T)]}function Kn(T){return typeof T=="function"?T:T==null?Di:typeof T=="object"?er(T)?Jn(T[0],T[1]):ar(T):ur(T)}function Nr(T){if(!Hr(T))return Ie(T);var ue=[];for(var xe in Object(T))Ke.call(T,xe)&&xe!="constructor"&&ue.push(xe);return ue}function Gn(T){if(!yt(T))return xa(T);var ue=Hr(T),xe=[];for(var Le in T)Le=="constructor"&&(ue||!Ke.call(T,Le))||xe.push(Le);return xe}function ar(T){var ue=pa(T);return ue.length==1&&ue[0][2]?Ji(ue[0][0],ue[0][1]):function(xe){return xe===T||Qt(xe,T,ue)}}function Jn(T,ue){return wi(T)&&ba(ue)?Ji(Hn(T),ue):function(xe){var Le=Jt(xe,T);return Le===t&&Le===ue?wn(xe,T):Xt(ue,Le,t,g|m)}}function Ii(T,ue,xe,Le,gt){if(T!==ue){if(!(er(ue)||Xr(ue)))var et=Gn(ue);It(et||ue,function(wt,$t){if(et&&($t=wt,wt=ue[$t]),yt(wt))gt||(gt=new fe),an(T,ue,$t,xe,Ii,Le,gt);else{var en=Le?Le(T[$t],wt,$t+"",T,ue,gt):t;en===t&&(en=wt),lt(T,$t,en)}})}}function an(T,ue,xe,Le,gt,et,wt){var $t=T[xe],en=ue[xe],mn=wt.get(en);if(mn){lt(T,xe,mn);return}var _n=et?et($t,en,xe+"",T,ue,wt):t,On=_n===t;On&&(_n=en,er(en)||Xr(en)?er($t)?_n=$t:fr($t)?_n=sr($t):(On=!1,_n=We(en,!0)):Ln(en)||Wr(en)?Wr($t)?_n=Zi($t):!yt($t)||Le&&Tr($t)?(On=!1,_n=We(en,!0)):_n=$t:On=!1),On&&(wt.set(en,_n),gt(_n,en,Le,et,wt),wt.delete(en)),lt(T,xe,_n)}function pr(T){return function(ue){return xt(ue,T)}}function zi(T,ue){return ue=Ce(ue===t?T.length-1:ue,0),function(){for(var xe=arguments,Le=-1,gt=Ce(xe.length-ue,0),et=Array(gt);++Le<gt;)et[Le]=xe[ue+Le];Le=-1;for(var wt=Array(ue+1);++Le<ue;)wt[Le]=xe[Le];return wt[ue]=et,nt(T,this,wt)}}function ha(T){if(typeof T=="string")return T;if(hr(T))return Vn?Vn.call(T):"";var ue=T+"";return ue=="0"&&1/T==-y?"-0":ue}function Jr(T){return er(T)?T:Ta(T)}function Vi(T,ue){if(ue)return T.slice();var xe=new T.constructor(T.length);return T.copy(xe),xe}function Qn(T){var ue=new T.constructor(T.byteLength);return new me(ue).set(new me(T)),ue}function Gi(T,ue){var xe=ue?Qn(T.buffer):T.buffer;return new T.constructor(xe,T.byteOffset,T.byteLength)}function Yr(T,ue,xe){var Le=ue?xe(Ut(T),!0):Ut(T);return dt(Le,Be,new T.constructor)}function qi(T){var ue=new T.constructor(T.source,_t.exec(T));return ue.lastIndex=T.lastIndex,ue}function yi(T,ue,xe){var Le=ue?xe(vn(T),!0):vn(T);return dt(Le,Re,new T.constructor)}function Pi(T){return Tn?Object(Tn.call(T)):{}}function Je(T,ue){var xe=ue?Qn(T.buffer):T.buffer;return new T.constructor(xe,T.byteOffset,T.length)}function sr(T,ue){var xe=-1,Le=T.length;for(ue||(ue=Array(Le));++xe<Le;)ue[xe]=T[xe];return ue}function Nn(T,ue,xe,Le){xe||(xe={});for(var gt=-1,et=ue.length;++gt<et;){var wt=ue[gt],$t=Le?Le(xe[wt],T[wt],wt,xe,T):t;Nt(xe,wt,$t===t?T[wt]:$t)}return xe}function Ai(T,ue){return Nn(T,ma(T),ue)}function ga(T){return zi(function(ue,xe){var Le=-1,gt=xe.length,et=gt>1?xe[gt-1]:t,wt=gt>2?xe[2]:t;for(et=T.length>3&&typeof et=="function"?(gt--,et):t,wt&&Br(xe[0],xe[1],wt)&&(et=gt<3?t:et,gt=1),ue=Object(ue);++Le<gt;){var $t=xe[Le];$t&&T(ue,$t,Le,et)}return ue})}function ji(T,ue){return function(xe,Le){if(xe==null)return xe;if(!Yn(xe))return T(xe,Le);for(var gt=xe.length,et=ue?gt:-1,wt=Object(xe);(ue?et--:++et<gt)&&Le(wt[et],et,wt)!==!1;);return xe}}function si(T){return function(ue,xe,Le){for(var gt=-1,et=Object(ue),wt=Le(ue),$t=wt.length;$t--;){var en=wt[T?$t:++gt];if(xe(et[en],en,et)===!1)break}return ue}}function Mr(T,ue,xe,Le,gt,et){var wt=gt&m,$t=T.length,en=ue.length;if($t!=en&&!(wt&&en>$t))return!1;var mn=et.get(T);if(mn&&et.get(ue))return mn==ue;var _n=-1,On=!0,kn=gt&g?new V:t;for(et.set(T,ue),et.set(ue,T);++_n<$t;){var nr=T[_n],Un=ue[_n];if(Le)var Zr=wt?Le(Un,nr,_n,ue,T,et):Le(nr,Un,_n,T,ue,et);if(Zr!==t){if(Zr)continue;On=!1;break}if(kn){if(!Kt(ue,function(xr,Rr){if(!kn.has(Rr)&&(nr===xr||xe(nr,xr,Le,gt,et)))return kn.add(Rr)})){On=!1;break}}else if(!(nr===Un||xe(nr,Un,Le,gt,et))){On=!1;break}}return et.delete(T),et.delete(ue),On}function Ni(T,ue,xe,Le,gt,et,wt){switch(xe){case x:if(T.byteLength!=ue.byteLength||T.byteOffset!=ue.byteOffset)return!1;T=T.buffer,ue=ue.buffer;case J:return!(T.byteLength!=ue.byteLength||!Le(new me(T),new me(ue)));case P:case $:case D:return li(+T,+ue);case C:return T.name==ue.name&&T.message==ue.message;case ce:case te:return T==ue+"";case Y:var $t=Ut;case q:var en=et&m;if($t||($t=vn),T.size!=ue.size&&!en)return!1;var mn=wt.get(T);if(mn)return mn==ue;et|=g,wt.set(T,ue);var _n=Mr($t(T),$t(ue),Le,gt,et,wt);return wt.delete(T),_n;case Q:if(Tn)return Tn.call(T)==Tn.call(ue)}return!1}function Dr(T,ue,xe,Le,gt,et){var wt=gt&m,$t=or(T),en=$t.length,mn=or(ue),_n=mn.length;if(en!=_n&&!wt)return!1;for(var On=en;On--;){var kn=$t[On];if(!(wt?kn in ue:Ke.call(ue,kn)))return!1}var nr=et.get(T);if(nr&&et.get(ue))return nr==ue;var Un=!0;et.set(T,ue),et.set(ue,T);for(var Zr=wt;++On<en;){kn=$t[On];var xr=T[kn],Rr=ue[kn];if(Le)var ta=wt?Le(Rr,xr,kn,ue,T,et):Le(xr,Rr,kn,T,ue,et);if(!(ta===t?xr===Rr||xe(xr,Rr,Le,gt,et):ta)){Un=!1;break}Zr||(Zr=kn=="constructor")}if(Un&&!Zr){var on=T.constructor,Ti=ue.constructor;on!=Ti&&"constructor"in T&&"constructor"in ue&&!(typeof on=="function"&&on instanceof on&&typeof Ti=="function"&&Ti instanceof Ti)&&(Un=!1)}return et.delete(T),et.delete(ue),Un}function vi(T){return it(T,or,ma)}function bi(){var T=Zt.iteratee||Cr;return T=T===Cr?Kn:T,arguments.length?T(arguments[0],arguments[1]):T}function mr(T,ue){var xe=T.__data__;return ui(ue)?xe[typeof ue=="string"?"string":"hash"]:xe.map}function pa(T){for(var ue=or(T),xe=ue.length;xe--;){var Le=ue[xe],gt=T[Le];ue[xe]=[Le,gt,ba(gt)]}return ue}function oi(T,ue){var xe=Ot(T,ue);return Gt(xe)?xe:t}var ma=se?dr(se,Object):Ei,br=Ze;(He&&br(new He(new ArrayBuffer(1)))!=x||Xe&&br(new Xe)!=Y||Fe&&br(Fe.resolve())!=F||Se&&br(new Se)!=q||ct&&br(new ct)!=ie)&&(br=function(T){var ue=dn.call(T),xe=ue==k?T.constructor:t,Le=xe?Ur(xe):t;if(Le)switch(Le){case Bt:return x;case pt:return Y;case bt:return F;case fn:return q;case cn:return ie}return ue});function yr(T,ue,xe){ue=wi(ue,T)?[ue]:Jr(ue);for(var Le,gt=-1,wt=ue.length;++gt<wt;){var et=Hn(ue[gt]);if(!(Le=T!=null&&xe(T,et)))break;T=T[et]}if(Le)return Le;var wt=T?T.length:0;return!!wt&&Si(wt)&&Ki(et,wt)&&(er(T)||Wr(T))}function xi(T){var ue=T.length,xe=T.constructor(ue);return ue&&typeof T[0]=="string"&&Ke.call(T,"index")&&(xe.index=T.index,xe.input=T.input),xe}function ya(T){return typeof T.constructor=="function"&&!Hr(T)?at(le(T)):{}}function Mi(T,ue,xe,Le){var gt=T.constructor;switch(ue){case J:return Qn(T);case P:case $:return new gt(+T);case x:return Gi(T,Le);case I:case R:case B:case ee:case ne:case z:case X:case A:case Z:return Je(T,Le);case Y:return Yr(T,Le,xe);case D:case te:return new gt(T);case ce:return qi(T);case q:return yi(T,Le,xe);case Q:return Pi(T)}}function Ki(T,ue){return ue=ue??b,!!ue&&(typeof T=="number"||tt.test(T))&&T>-1&&T%1==0&&T<ue}function Br(T,ue,xe){if(!yt(xe))return!1;var Le=typeof ue;return(Le=="number"?Yn(xe)&&Ki(ue,xe.length):Le=="string"&&ue in xe)?li(xe[ue],T):!1}function wi(T,ue){if(er(T))return!1;var xe=typeof T;return xe=="number"||xe=="symbol"||xe=="boolean"||T==null||hr(T)?!0:Ne.test(T)||!$e.test(T)||ue!=null&&T in Object(ue)}function ui(T){var ue=typeof T;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?T!=="__proto__":T===null}function va(T){return!!En&&En in T}function Hr(T){var ue=T&&T.constructor,xe=typeof ue=="function"&&ue.prototype||un;return T===xe}function ba(T){return T===T&&!yt(T)}function Ji(T,ue){return function(xe){return xe==null?!1:xe[T]===ue&&(ue!==t||T in Object(xe))}}function xa(T){var ue=[];if(T!=null)for(var xe in Object(T))ue.push(xe);return ue}var Ta=_i(function(T){T=Qi(T);var ue=[];return Me.test(T)&&ue.push(""),T.replace(Ee,function(xe,Le,gt,et){ue.push(gt?et.replace(qe,"$1"):Le||xe)}),ue});function Hn(T){if(typeof T=="string"||hr(T))return T;var ue=T+"";return ue=="0"&&1/T==-y?"-0":ue}function Ur(T){if(T!=null){try{return ut.call(T)}catch{}try{return T+""}catch{}}return""}function Yi(T){for(var ue=-1,xe=T?T.length:0,Le=0,gt=[];++ue<xe;){var et=T[ue];et&&(gt[Le++]=et)}return gt}function Xi(T,ue){var xe=er(T)?It:Rt;return xe(T,bi(ue,3))}function _i(T,ue){if(typeof T!="function"||ue&&typeof ue!="function")throw new TypeError(d);var xe=function(){var Le=arguments,gt=ue?ue.apply(this,Le):Le[0],et=xe.cache;if(et.has(gt))return et.get(gt);var wt=T.apply(this,Le);return xe.cache=et.set(gt,wt),wt};return xe.cache=new(_i.Cache||zt),xe}_i.Cache=zt;function Oa(T){return We(T,!1,!0)}function li(T,ue){return T===ue||T!==T&&ue!==ue}function Wr(T){return fr(T)&&Ke.call(T,"callee")&&(!re.call(T,"callee")||dn.call(T)==w)}var er=Array.isArray;function Yn(T){return T!=null&&Si(T.length)&&!Tr(T)}function fr(T){return Xn(T)&&Yn(T)}var tr=he||ea;function di(T){if(Yn(T)&&(er(T)||typeof T=="string"||typeof T.splice=="function"||tr(T)||Wr(T)))return!T.length;var ue=br(T);if(ue==Y||ue==q)return!T.size;if(Ct||Hr(T))return!Ie(T).length;for(var xe in T)if(Ke.call(T,xe))return!1;return!0}function Tr(T){var ue=yt(T)?dn.call(T):"";return ue==L||ue==W}function Si(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=b}function yt(T){var ue=typeof T;return!!T&&(ue=="object"||ue=="function")}function Xn(T){return!!T&&typeof T=="object"}function Ln(T){if(!Xn(T)||dn.call(T)!=k||ft(T))return!1;var ue=le(T);if(ue===null)return!0;var xe=Ke.call(ue,"constructor")&&ue.constructor;return typeof xe=="function"&&xe instanceof xe&&ut.call(xe)==At}function hr(T){return typeof T=="symbol"||Xn(T)&&dn.call(T)==Q}var Xr=De?nn(De):sn;function Zi(T){return Nn(T,qn(T))}function Qi(T){return T==null?"":ha(T)}function Jt(T,ue,xe){var Le=T==null?t:xt(T,ue);return Le===t?xe:Le}function wn(T,ue){return T!=null&&yr(T,ue,Et)}function or(T){return Yn(T)?je(T):Nr(T)}function qn(T){return Yn(T)?je(T,!0):Gn(T)}var ci=ga(function(T,ue,xe){Ii(T,ue,xe)});function Di(T){return T}function Cr(T){return Kn(typeof T=="function"?T:We(T,!0))}function ur(T){return wi(T)?ke(Hn(T)):pr(T)}function Ei(){return[]}function ea(){return!1}Zt.compact=Yi,Zt.iteratee=Cr,Zt.keys=or,Zt.keysIn=qn,Zt.memoize=_i,Zt.merge=ci,Zt.property=ur,Zt.toPlainObject=Zi,Zt.clone=Oa,Zt.eq=li,Zt.forEach=Xi,Zt.get=Jt,Zt.hasIn=wn,Zt.identity=Di,Zt.isArguments=Wr,Zt.isArray=er,Zt.isArrayLike=Yn,Zt.isArrayLikeObject=fr,Zt.isBuffer=tr,Zt.isEmpty=di,Zt.isFunction=Tr,Zt.isLength=Si,Zt.isObject=yt,Zt.isObjectLike=Xn,Zt.isPlainObject=Ln,Zt.isSymbol=hr,Zt.isTypedArray=Xr,Zt.stubArray=Ei,Zt.stubFalse=ea,Zt.toString=Qi,Zt.each=Xi,Zt.VERSION=o,U&&((U.exports=Zt)._=Zt,de._=Zt)}).call(commonjsGlobal)})(lodash_custom,lodash_customExports);var geojsonRewind=rewind$1;function rewind$1(n,e){var t=n&&n.type,o;if(t==="FeatureCollection")for(o=0;o<n.features.length;o++)rewind$1(n.features[o],e);else if(t==="GeometryCollection")for(o=0;o<n.geometries.length;o++)rewind$1(n.geometries[o],e);else if(t==="Feature")rewind$1(n.geometry,e);else if(t==="Polygon")rewindRings(n.coordinates,e);else if(t==="MultiPolygon")for(o=0;o<n.coordinates.length;o++)rewindRings(n.coordinates[o],e);return n}function rewindRings(n,e){if(n.length!==0){rewindRing(n[0],e);for(var t=1;t<n.length;t++)rewindRing(n[t],!e)}}function rewindRing(n,e){for(var t=0,o=0,l=0,d=n.length,h=d-1;l<d;h=l++){var g=(n[l][0]-n[h][0])*(n[h][1]+n[l][1]),m=t+g;o+=Math.abs(t)>=Math.abs(g)?t-m+g:g-m+t,t=m}t+o>=0!=!!e&&n.reverse()}var osmPolygonFeaturesExports={},osmPolygonFeatures={get exports(){return osmPolygonFeaturesExports},set exports(n){osmPolygonFeaturesExports=n}};const require$$0$1=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];(function(n){n.exports=require$$0$1})(osmPolygonFeatures);var _=lodash_customExports,rewind=geojsonRewind,polygonFeatures={};osmPolygonFeaturesExports.forEach(function(n){if(n.polygon==="all")polygonFeatures[n.key]=!0;else{var e=n.polygon==="whitelist"?"included_values":"excluded_values",t={};n.values.forEach(function(o){t[o]=!0}),polygonFeatures[n.key]={},polygonFeatures[n.key][e]=t}});function default_deduplicator(n,e){return(n.version||e.version)&&n.version!==e.version?(+n.version||0)>(+e.version||0)?n:e:_.merge(n,e)}var osmtogeojson={};osmtogeojson=function(n,e,t){e=_.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures,deduplicator:default_deduplicator},e);var o;return typeof XMLDocument<"u"&&n instanceof XMLDocument||typeof XMLDocument>"u"&&n.childNodes?o=d(n):o=l(n),o;function l(m){var y=new Array,b=new Array,w=new Array;function E(F){var ce=_.clone(F);ce.lat=F.center.lat,ce.lon=F.center.lon,ce.__is_center_placeholder=!0,y.push(ce)}function P(F){var ce=_.clone(F);ce.nodes=[];function q(te,Q,ie){var J={type:"node",id:"_"+ce.type+"/"+ce.id+"bounds"+ie,lat:te,lon:Q};ce.nodes.push(J.id),y.push(J)}q(ce.bounds.minlat,ce.bounds.minlon,1),q(ce.bounds.maxlat,ce.bounds.minlon,2),q(ce.bounds.maxlat,ce.bounds.maxlon,3),q(ce.bounds.minlat,ce.bounds.maxlon,4),ce.nodes.push(ce.nodes[0]),ce.__is_bounds_placeholder=!0,b.push(ce)}function $(F){function ce(q,te,Q){var ie={type:"node",id:Q,lat:q,lon:te};y.push(ie)}_.isArray(F.nodes)||(F.nodes=F.geometry.map(function(q){return q!==null?"_anonymous@"+q.lat+"/"+q.lon:"_anonymous@unknown_location"})),F.geometry.forEach(function(q,te){q&&ce(q.lat,q.lon,F.nodes[te])})}function C(F){function ce(te,Q,ie){var J={type:"node",id:ie,lat:te,lon:Q};y.push(J)}function q(te,Q){if(b.some(function(x){return x.type=="way"&&x.id==Q}))return;var ie={type:"way",id:Q,nodes:[]};function J(x,I){var R={type:"node",id:"_anonymous@"+x+"/"+I,lat:x,lon:I};ie.nodes.push(R.id),y.push(R)}te.forEach(function(x){x?J(x.lat,x.lon):ie.nodes.push(void 0)}),b.push(ie)}F.members.forEach(function(te,Q){te.type=="node"?te.lat&&ce(te.lat,te.lon,te.ref):te.type=="way"&&te.geometry&&(te.ref="_fullGeom"+te.ref,q(te.geometry,te.ref))})}for(var L=0;L<m.elements.length;L++)switch(m.elements[L].type){case"node":var W=m.elements[L];y.push(W);break;case"way":var Y=_.clone(m.elements[L]);Y.nodes=_.clone(Y.nodes),b.push(Y),Y.center&&E(Y),Y.geometry?$(Y):Y.bounds&&P(Y);break;case"relation":var D=_.clone(m.elements[L]);D.members=_.clone(D.members),w.push(D);var k=D.members&&D.members.some(function(F){return F.type=="node"&&F.lat||F.type=="way"&&F.geometry&&F.geometry.length>0});D.center&&E(D),k?C(D):D.bounds&&P(D);break}return h(y,b,w)}function d(m){var y=new Array,b=new Array,w=new Array;function E(D,k,F){D.hasAttribute(F)&&(k[F]=D.getAttribute(F))}function P(D,k){var F=_.clone(D);E(k,F,"lat"),E(k,F,"lon"),F.__is_center_placeholder=!0,y.push(F)}function $(D,k){var F=_.clone(D);F.nodes=[];function ce(q,te,Q){var ie={type:"node",id:"_"+F.type+"/"+F.id+"bounds"+Q,lat:q,lon:te};F.nodes.push(ie.id),y.push(ie)}ce(k.getAttribute("minlat"),k.getAttribute("minlon"),1),ce(k.getAttribute("maxlat"),k.getAttribute("minlon"),2),ce(k.getAttribute("maxlat"),k.getAttribute("maxlon"),3),ce(k.getAttribute("minlat"),k.getAttribute("maxlon"),4),F.nodes.push(F.nodes[0]),F.__is_bounds_placeholder=!0,b.push(F)}function C(D,k){function F(ce,q,te){var Q={type:"node",id:te,lat:ce,lon:q};return y.push(Q),Q.id}_.isArray(D.nodes)||(D.nodes=[],_.each(k,function(ce,q){D.nodes.push("_anonymous@"+ce.getAttribute("lat")+"/"+ce.getAttribute("lon"))})),_.each(k,function(ce,q){ce.getAttribute("lat")&&F(ce.getAttribute("lat"),ce.getAttribute("lon"),D.nodes[q])})}function L(D,k){function F(q,te,Q){var ie={type:"node",id:Q,lat:q,lon:te};y.push(ie)}function ce(q,te){if(b.some(function(J){return J.type=="way"&&J.id==te}))return;var Q={type:"way",id:te,nodes:[]};function ie(J,x){var I={type:"node",id:"_anonymous@"+J+"/"+x,lat:J,lon:x};Q.nodes.push(I.id),y.push(I)}_.each(q,function(J){J.getAttribute("lat")?ie(J.getAttribute("lat"),J.getAttribute("lon")):Q.nodes.push(void 0)}),b.push(Q)}_.each(k,function(q,te){D.members[te].type=="node"?q.getAttribute("lat")&&F(q.getAttribute("lat"),q.getAttribute("lon"),D.members[te].ref):D.members[te].type=="way"&&q.getElementsByTagName("nd").length>0&&(D.members[te].ref="_fullGeom"+D.members[te].ref,ce(q.getElementsByTagName("nd"),D.members[te].ref))})}_.each(m.getElementsByTagName("node"),function(D,k){var F={};_.each(D.getElementsByTagName("tag"),function(q){F[q.getAttribute("k")]=q.getAttribute("v")});var ce={type:"node"};E(D,ce,"id"),E(D,ce,"lat"),E(D,ce,"lon"),E(D,ce,"version"),E(D,ce,"timestamp"),E(D,ce,"changeset"),E(D,ce,"uid"),E(D,ce,"user"),_.isEmpty(F)||(ce.tags=F),y.push(ce)});var W,Y;return _.each(m.getElementsByTagName("way"),function(D,k){var F={},ce=[];_.each(D.getElementsByTagName("tag"),function(Q){F[Q.getAttribute("k")]=Q.getAttribute("v")});var q=!1;_.each(D.getElementsByTagName("nd"),function(Q,ie){var J;(J=Q.getAttribute("ref"))&&(ce[ie]=J),!q&&Q.getAttribute("lat")&&(q=!0)});var te={type:"way"};E(D,te,"id"),E(D,te,"version"),E(D,te,"timestamp"),E(D,te,"changeset"),E(D,te,"uid"),E(D,te,"user"),ce.length>0&&(te.nodes=ce),_.isEmpty(F)||(te.tags=F),(W=D.getElementsByTagName("center")[0])&&P(te,W),q?C(te,D.getElementsByTagName("nd")):(Y=D.getElementsByTagName("bounds")[0])&&$(te,Y),b.push(te)}),_.each(m.getElementsByTagName("relation"),function(D,k){var F={},ce=[];_.each(D.getElementsByTagName("tag"),function(Q){F[Q.getAttribute("k")]=Q.getAttribute("v")});var q=!1;_.each(D.getElementsByTagName("member"),function(Q,ie){ce[ie]={},E(Q,ce[ie],"ref"),E(Q,ce[ie],"role"),E(Q,ce[ie],"type"),(!q&&ce[ie].type=="node"&&Q.getAttribute("lat")||ce[ie].type=="way"&&Q.getElementsByTagName("nd").length>0)&&(q=!0)});var te={type:"relation"};E(D,te,"id"),E(D,te,"version"),E(D,te,"timestamp"),E(D,te,"changeset"),E(D,te,"uid"),E(D,te,"user"),ce.length>0&&(te.members=ce),_.isEmpty(F)||(te.tags=F),(W=D.getElementsByTagName("center")[0])&&P(te,W),q?L(te,D.getElementsByTagName("member")):(Y=D.getElementsByTagName("bounds")[0])&&$(te,Y),w.push(te)}),h(y,b,w)}function h(m,y,b){function w($e,Ne){if(typeof Ne!="object"&&(Ne={}),typeof e.uninterestingTags=="function")return!e.uninterestingTags($e,Ne);for(var Me in $e)if(e.uninterestingTags[Me]!==!0&&!(Ne[Me]===!0||Ne[Me]===$e[Me]))return!0;return!1}function E($e){var Ne={timestamp:$e.timestamp,version:$e.version,changeset:$e.changeset,user:$e.user,uid:$e.uid};for(var Me in Ne)Ne[Me]===void 0&&delete Ne[Me];return Ne}for(var P=new Object,$=new Object,C=0;C<m.length;C++){var L=m[C];P[L.id]!==void 0&&(L=e.deduplicator(L,P[L.id])),P[L.id]=L,typeof L.tags<"u"&&w(L.tags)&&($[L.id]=!0)}for(var C=0;C<b.length;C++)if(_.isArray(b[C].members))for(var W=0;W<b[C].members.length;W++)b[C].members[W].type=="node"&&($[b[C].members[W].ref]=!0);for(var Y=new Object,D=new Object,C=0;C<y.length;C++){var k=y[C];if(Y[k.id]&&(k=e.deduplicator(k,Y[k.id])),Y[k.id]=k,_.isArray(k.nodes))for(var W=0;W<k.nodes.length;W++)typeof k.nodes[W]!="object"&&(D[k.nodes[W]]=!0,k.nodes[W]=P[k.nodes[W]])}var F=new Array;for(var ce in P){var L=P[ce];(!D[ce]||$[ce])&&F.push(L)}for(var q=new Array,C=0;C<b.length;C++){var te=b[C];q[te.id]&&(te=e.deduplicator(te,q[te.id])),q[te.id]=te}var Q={node:{},way:{},relation:{}};for(var ce in q){var te=q[ce];if(!_.isArray(te.members)){e.verbose&&console.warn("Relation",te.type+"/"+te.id,"ignored because it has no members");continue}for(var W=0;W<te.members.length;W++){var ie=te.members[W].type,J=te.members[W].ref;if(typeof J!="number"&&(J=J.replace("_fullGeom","")),!Q[ie]){e.verbose&&console.warn("Relation",te.type+"/"+te.id,"member",ie+"/"+J,"ignored because it has an invalid type");continue}typeof Q[ie][J]>"u"&&(Q[ie][J]=[]),Q[ie][J].push({role:te.members[W].role,rel:te.id,reltags:te.tags})}}var x,I=[];for(C=0;C<F.length;C++){if(typeof F[C].lon>"u"||typeof F[C].lat>"u"){e.verbose&&console.warn("POI",F[C].type+"/"+F[C].id,"ignored because it lacks coordinates");continue}var R={type:"Feature",id:F[C].type+"/"+F[C].id,properties:{type:F[C].type,id:F[C].id,tags:F[C].tags||{},relations:Q.node[F[C].id]||[],meta:E(F[C])},geometry:{type:"Point",coordinates:[+F[C].lon,+F[C].lat]}};F[C].__is_center_placeholder&&(R.properties.geometry="center"),t?t(R):I.push(R)}for(var B=[],ee=[],C=0;C<b.length;C++)if(q[b[C].id]===b[C]){if(typeof b[C].tags<"u"&&(b[C].tags.type=="route"||b[C].tags.type=="waterway")){let Ne=function(Me){var Ee=!1,Ve;Ve=Me.members.filter(function(tt){return tt.type==="way"}),Ve=Ve.map(function(tt){var st=Y[tt.ref];if(st===void 0||st.nodes===void 0){e.verbose&&console.warn("Route "+Me.type+"/"+Me.id,"tainted by a missing or incomplete  way",tt.type+"/"+tt.ref),Ee=!0;return}return{id:tt.ref,role:tt.role,way:st,nodes:st.nodes.filter(function(Oe){return Oe!==void 0?!0:(Ee=!0,e.verbose&&console.warn("Route",Me.type+"/"+Me.id,"tainted by a way",tt.type+"/"+tt.ref,"with a missing node"),!1)})}}),Ve=_.compact(Ve);var qe;qe=join(Ve);var _t=[];if(_t=_.compact(qe.map(function(tt){return _.compact(tt.map(function(st){return[+st.lon,+st.lat]}))})),_t.length==0)return e.verbose&&console.warn("Route",Me.type+"/"+Me.id,"contains no coordinates"),!1;var Qe={type:"Feature",id:Me.type+"/"+Me.id,properties:{type:Me.type,id:Me.id,tags:Me.tags||{},relations:Q[Me.type][Me.id]||[],meta:E(Me)},geometry:{type:_t.length===1?"LineString":"MultiLineString",coordinates:_t.length===1?_t[0]:_t}};return Ee&&(e.verbose&&console.warn("Route",Me.type+"/"+Me.id,"is tainted"),Qe.properties.tainted=!0),Qe};if(!_.isArray(b[C].members)){e.verbose&&console.warn("Route",b[C].type+"/"+b[C].id,"ignored because it has no members");continue}if(b[C].members.forEach(function(Me){Y[Me.ref]&&!w(Y[Me.ref].tags)&&(Y[Me.ref].is_skippablerelationmember=!0)}),R=Ne(b[C]),R===!1){e.verbose&&console.warn("Route relation",b[C].type+"/"+b[C].id,"ignored because it has invalid geometry");continue}t?t(rewind(R)):ee.push(R)}if(typeof b[C].tags<"u"&&(b[C].tags.type=="multipolygon"||b[C].tags.type=="boundary")){let Me=function(Ee,Ve){var qe=!1,_t=z?"way":"relation",Qe=typeof Ee.id=="number"?Ee.id:+Ee.id.replace("_fullGeom",""),tt;tt=Ve.members.filter(function(_e){return _e.type==="way"}),tt=tt.map(function(_e){var De=Y[_e.ref];if(De===void 0||De.nodes===void 0){e.verbose&&console.warn("Multipolygon",_t+"/"+Qe,"tainted by a missing or incomplete way",_e.type+"/"+_e.ref),qe=!0;return}return{id:_e.ref,role:_e.role||"outer",way:De,nodes:De.nodes.filter(function(Be){return Be!==void 0?!0:(qe=!0,e.verbose&&console.warn("Multipolygon",_t+"/"+Qe,"tainted by a way",_e.type+"/"+_e.ref,"with a missing node"),!1)})}}),tt=_.compact(tt);var st,Oe;st=join(tt.filter(function(_e){return _e.role==="outer"})),Oe=join(tt.filter(function(_e){return _e.role==="inner"}));var Tt;function yn(_e){var De=function(Yt,dt){for(var Kt=0;Kt<dt.length;Kt++)if(Re(dt[Kt],Yt))return!0;return!1},Be=function(Yt){return Yt.map(function(dt){return[+dt.lat,+dt.lon]})},Re=function(Yt,dt){for(var Kt=Yt[0],ke=Yt[1],rn=!1,nn=0,Ot=dt.length-1;nn<dt.length;Ot=nn++){var ft=dt[nn][0],Ut=dt[nn][1],dr=dt[Ot][0],vn=dt[Ot][1],ln=Ut>ke!=vn>ke&&Kt<(dr-ft)*(ke-Ut)/(vn-Ut)+ft;ln&&(rn=!rn)}return rn},nt,It;for(_e=Be(_e),nt=0;nt<st.length;nt++)if(It=Be(st[nt]),De(It,_e))return nt}Tt=st.map(function(_e){return[_e]});for(var St=0;St<Oe.length;St++){var de=yn(Oe[St]);de!==void 0?Tt[de].push(Oe[St]):e.verbose&&console.warn("Multipolygon",_t+"/"+Qe,"contains an inner ring with no containing outer")}var U=[];if(U=_.compact(Tt.map(function(_e){var De=_.compact(_e.map(function(Be){if(Be.length<4){e.verbose&&console.warn("Multipolygon",_t+"/"+Qe,"contains a ring with less than four nodes");return}return _.compact(Be.map(function(Re){return[+Re.lon,+Re.lat]}))}));if(De.length==0){e.verbose&&console.warn("Multipolygon",_t+"/"+Qe,"contains an empty ring cluster");return}return De})),U.length==0)return e.verbose&&console.warn("Multipolygon",_t+"/"+Qe,"contains no coordinates"),!1;var H="MultiPolygon";U.length===1&&(H="Polygon",U=U[0]);var pe={type:"Feature",id:Ee.type+"/"+Qe,properties:{type:Ee.type,id:Qe,tags:Ee.tags||{},relations:Q[Ee.type][Ee.id]||[],meta:E(Ee)},geometry:{type:H,coordinates:U}};return qe&&(e.verbose&&console.warn("Multipolygon",_t+"/"+Qe,"is tainted"),pe.properties.tainted=!0),pe};if(!_.isArray(b[C].members)){e.verbose&&console.warn("Multipolygon",b[C].type+"/"+b[C].id,"ignored because it has no members");continue}for(var ne=0,W=0;W<b[C].members.length;W++)b[C].members[W].role=="outer"?ne++:e.verbose&&b[C].members[W].role!="inner"&&console.warn("Multipolygon",b[C].type+"/"+b[C].id,"member",b[C].members[W].type+"/"+b[C].members[W].ref,'ignored because it has an invalid role: "'+b[C].members[W].role+'"');if(b[C].members.forEach(function(Ee){Y[Ee.ref]&&(Ee.role==="outer"&&!w(Y[Ee.ref].tags,b[C].tags)&&(Y[Ee.ref].is_skippablerelationmember=!0),Ee.role==="inner"&&!w(Y[Ee.ref].tags)&&(Y[Ee.ref].is_skippablerelationmember=!0))}),ne==0){e.verbose&&console.warn("Multipolygon relation",b[C].type+"/"+b[C].id,"ignored because it has no outer ways");continue}var z=!1;ne==1&&!w(b[C].tags,{type:!0})&&(z=!0);var R=null;if(!z)R=Me(b[C],b[C]);else{var X=b[C].members.filter(function(Ee){return Ee.role==="outer"})[0];if(X=Y[X.ref],X===void 0){e.verbose&&console.warn("Multipolygon relation",b[C].type+"/"+b[C].id,"ignored because outer way",X.type+"/"+X.ref,"is missing");continue}X.is_skippablerelationmember=!0,R=Me(X,b[C])}if(R===!1){e.verbose&&console.warn("Multipolygon relation",b[C].type+"/"+b[C].id,"ignored because it has invalid geometry");continue}t?t(rewind(R)):ee.push(R)}}for(var C=0;C<y.length;C++)if(Y[y[C].id]===y[C]){if(!_.isArray(y[C].nodes)){e.verbose&&console.warn("Way",y[C].type+"/"+y[C].id,"ignored because it has no nodes");continue}if(!y[C].is_skippablerelationmember){typeof y[C].id!="number"&&(y[C].id=+y[C].id.replace("_fullGeom","")),y[C].tainted=!1,y[C].hidden=!1;var A=new Array;for(W=0;W<y[C].nodes.length;W++)typeof y[C].nodes[W]=="object"?A.push([+y[C].nodes[W].lon,+y[C].nodes[W].lat]):(e.verbose&&console.warn("Way",y[C].type+"/"+y[C].id,"is tainted by an invalid node"),y[C].tainted=!0);if(A.length<=1){e.verbose&&console.warn("Way",y[C].type+"/"+y[C].id,"ignored because it contains too few nodes");continue}var Z="LineString";typeof y[C].nodes[0]<"u"&&typeof y[C].nodes[y[C].nodes.length-1]<"u"&&y[C].nodes[0].id===y[C].nodes[y[C].nodes.length-1].id&&(typeof y[C].tags<"u"&&g(y[C].tags)||y[C].__is_bounds_placeholder)&&(Z="Polygon",A=[A]);var R={type:"Feature",id:y[C].type+"/"+y[C].id,properties:{type:y[C].type,id:y[C].id,tags:y[C].tags||{},relations:Q.way[y[C].id]||[],meta:E(y[C])},geometry:{type:Z,coordinates:A}};y[C].tainted&&(e.verbose&&console.warn("Way",y[C].type+"/"+y[C].id,"is tainted"),R.properties.tainted=!0),y[C].__is_bounds_placeholder&&(R.properties.geometry="bounds"),t?t(rewind(R)):Z=="LineString"?B.push(R):ee.push(R)}}return t?!0:(x={type:"FeatureCollection",features:[]},x.features=x.features.concat(ee),x.features=x.features.concat(B),x.features=x.features.concat(I),e.flatProperties&&x.features.forEach(function($e){$e.properties=_.merge($e.properties.meta,$e.properties.tags,{id:$e.properties.type+"/"+$e.properties.id})}),x=rewind(x),x)}function g(m){var y=e.polygonFeatures;if(typeof y=="function")return y(m);if(m.area==="no")return!1;for(var b in m){var w=m[b],E=y[b];if(!(typeof E>"u")&&w!=="no"&&(E===!0||E.included_values&&E.included_values[w]===!0||E.excluded_values&&E.excluded_values[w]!==!0))return!0}return!1}};function join(n){for(var e=function(w){return w[0]},t=function(w){return w[w.length-1]},o=function(w,E){return w!==void 0&&E!==void 0&&w.id===E.id},l=[],d,h,g,m,y,b;n.length;)for(d=n.pop().nodes.slice(),l.push(d);n.length&&!o(e(d),t(d));){for(h=e(d),g=t(d),m=0;m<n.length;m++)if(b=n[m].nodes,o(g,e(b))){y=d.push,b=b.slice(1);break}else if(o(g,t(b))){y=d.push,b=b.slice(0,-1).reverse();break}else if(o(h,t(b))){y=d.unshift,b=b.slice(0,-1);break}else if(o(h,e(b))){y=d.unshift,b=b.slice(1).reverse();break}else b=y=null;if(!b)break;n.splice(m,1),y.apply(d,b)}return l}osmtogeojson.toGeojson=osmtogeojson;var osmtogeojson_1=osmtogeojson,dist$1={},CountryCoder$1={},turfExports={},turf$1={get exports(){return turfExports},set exports(n){turfExports=n}},turfHelpers={};function feature$1(n,e){return{type:"Feature",properties:e||{},geometry:n}}turfHelpers.feature=feature$1;turfHelpers.point=function(n,e){if(!Array.isArray(n))throw new Error("Coordinates must be an array");if(n.length<2)throw new Error("Coordinates must be at least 2 numbers long");return feature$1({type:"Point",coordinates:n.slice()},e)};turfHelpers.polygon=function(n,e){if(!n)throw new Error("No coordinates passed");for(var t=0;t<n.length;t++){var o=n[t];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<o[o.length-1].length;l++)if(o[o.length-1][l]!==o[0][l])throw new Error("First and last Position are not equivalent.")}return feature$1({type:"Polygon",coordinates:n},e)};turfHelpers.lineString=function(n,e){if(!n)throw new Error("No coordinates passed");return feature$1({type:"LineString",coordinates:n},e)};turfHelpers.featureCollection=function(n){return{type:"FeatureCollection",features:n}};turfHelpers.multiLineString=function(n,e){if(!n)throw new Error("No coordinates passed");return feature$1({type:"MultiLineString",coordinates:n},e)};turfHelpers.multiPoint=function(n,e){if(!n)throw new Error("No coordinates passed");return feature$1({type:"MultiPoint",coordinates:n},e)};turfHelpers.multiPolygon=function(n,e){if(!n)throw new Error("No coordinates passed");return feature$1({type:"MultiPolygon",coordinates:n},e)};turfHelpers.geometryCollection=function(n,e){return feature$1({type:"GeometryCollection",geometries:n},e)};var factors={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373};turfHelpers.radiansToDistance=function(n,e){var t=factors[e||"kilometers"];if(t===void 0)throw new Error("Invalid unit");return n*t};turfHelpers.distanceToRadians=function(n,e){var t=factors[e||"kilometers"];if(t===void 0)throw new Error("Invalid unit");return n/t};turfHelpers.distanceToDegrees=function(n,e){var t=factors[e||"kilometers"];if(t===void 0)throw new Error("Invalid unit");return n/t*57.2958};var polygon$7=turfHelpers.polygon,featurecollection$5=turfHelpers.featureCollection,turfTin=function(n,e){return featurecollection$5(triangulate(n.features.map(function(t){var o={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e&&(o.z=t.properties[e]),o})).map(function(t){return polygon$7([[[t.a.x,t.a.y],[t.b.x,t.b.y],[t.c.x,t.c.y],[t.a.x,t.a.y]]],{a:t.a.z,b:t.b.z,c:t.c.z})}))};function Triangle(n,e,t){this.a=n,this.b=e,this.c=t;var o=e.x-n.x,l=e.y-n.y,d=t.x-n.x,h=t.y-n.y,g=o*(n.x+e.x)+l*(n.y+e.y),m=d*(n.x+t.x)+h*(n.y+t.y),y=2*(o*(t.y-e.y)-l*(t.x-e.x)),b,w,E,P;Math.abs(y)<1e-6?(b=Math.min(n.x,e.x,t.x),w=Math.min(n.y,e.y,t.y),E=(Math.max(n.x,e.x,t.x)-b)*.5,P=(Math.max(n.y,e.y,t.y)-w)*.5,this.x=b+E,this.y=w+P,this.r=E*E+P*P):(this.x=(h*g-l*m)/y,this.y=(o*m-d*g)/y,E=this.x-n.x,P=this.y-n.y,this.r=E*E+P*P)}function byX(n,e){return e.x-n.x}function dedup(n){var e=n.length,t,o,l,d,h;e:for(;e;)for(o=n[--e],t=n[--e],l=e;l;)if(h=n[--l],d=n[--l],t===d&&o===h||t===h&&o===d){n.splice(e,2),n.splice(l,2),e-=2;continue e}}function triangulate(n){if(n.length<3)return[];n.sort(byX);for(var e=n.length-1,t=n[e].x,o=n[0].x,l=n[e].y,d=l;e--;)n[e].y<l&&(l=n[e].y),n[e].y>d&&(d=n[e].y);var h=o-t,g=d-l,m=h>g?h:g,y=(o+t)*.5,b=(d+l)*.5,w=[new Triangle({x:y-20*m,y:b-m,__sentinel:!0},{x:y,y:b+20*m,__sentinel:!0},{x:y+20*m,y:b-m,__sentinel:!0})],E=[],P=[],$,C,L;for(e=n.length;e--;){for(P.length=0,$=w.length;$--;){if(h=n[e].x-w[$].x,h>0&&h*h>w[$].r){E.push(w[$]),w.splice($,1);continue}g=n[e].y-w[$].y,!(h*h+g*g>w[$].r)&&(P.push(w[$].a,w[$].b,w[$].b,w[$].c,w[$].c,w[$].a),w.splice($,1))}for(dedup(P),$=P.length;$;)L=P[--$],C=P[--$],w.push(new Triangle(C,L,n[e]))}for(Array.prototype.push.apply(E,w),e=E.length;e--;)(E[e].a.__sentinel||E[e].b.__sentinel||E[e].c.__sentinel)&&E.splice(e,1);return E}var turfInvariant={};function getCoord$3(n){if(Array.isArray(n)&&typeof n[0]=="number"&&typeof n[1]=="number")return n;if(n){if(n.type==="Feature"&&n.geometry&&n.geometry.type==="Point"&&Array.isArray(n.geometry.coordinates))return n.geometry.coordinates;if(n.type==="Point"&&Array.isArray(n.coordinates))return n.coordinates}throw new Error("A coordinate, feature, or point geometry is required")}function geojsonType(n,e,t){if(!e||!t)throw new Error("type and name required");if(!n||n.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+n.type)}function featureOf(n,e,t){if(!t)throw new Error(".featureOf() requires a name");if(!n||n.type!=="Feature"||!n.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!n.geometry||n.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+n.geometry.type)}function collectionOf(n,e,t){if(!t)throw new Error(".collectionOf() requires a name");if(!n||n.type!=="FeatureCollection")throw new Error("Invalid input to "+t+", FeatureCollection required");for(var o=0;o<n.features.length;o++){var l=n.features[o];if(!l||l.type!=="Feature"||!l.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!l.geometry||l.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+l.geometry.type)}}turfInvariant.geojsonType=geojsonType;turfInvariant.collectionOf=collectionOf;turfInvariant.featureOf=featureOf;turfInvariant.getCoord=getCoord$3;var invariant=turfInvariant,turfInside=function(e,t){var o=invariant.getCoord(e),l=t.geometry.coordinates;t.geometry.type==="Polygon"&&(l=[l]);for(var d=0,h=!1;d<l.length&&!h;d++)if(inRing(o,l[d][0])){for(var g=!1,m=1;m<l[d].length&&!g;)inRing(o,l[d][m])&&(g=!0),m++;g||(h=!0)}return h};function inRing(n,e){for(var t=!1,o=0,l=e.length-1;o<e.length;l=o++){var d=e[o][0],h=e[o][1],g=e[l][0],m=e[l][1],y=h>n[1]!=m>n[1]&&n[0]<(g-d)*(n[1]-h)/(m-h)+d;y&&(t=!t)}return t}var isArray$2=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},turfPoint=function(n,e){if(!isArray$2(n))throw new Error("Coordinates must be an array");if(n.length<2)throw new Error("Coordinates must be at least 2 numbers long");return{type:"Feature",geometry:{type:"Point",coordinates:n},properties:e||{}}},point$c=turfPoint,turfGrid=function(n,e){var t=n[0],o=n[1],l=n[2];n[3];for(var d=(l-t)/e,h={type:"FeatureCollection",features:[]},g=0;g<=e;g++)for(var m=0;m<=e;m++)h.features.push(point$c([g*d+t,m*d+o]));return h},turfMeta={};function coordEach$1(n,e,t){var o,l,d,h,g,m,y,b,w,E=0,P,$=n.type==="FeatureCollection",C=n.type==="Feature",L=$?n.features.length:1;for(o=0;o<L;o++)for(w=$?n.features[o].geometry:C?n.geometry:n,P=w.type==="GeometryCollection",y=P?w.geometries.length:1,h=0;h<y;h++)if(m=P?w.geometries[h]:w,b=m.coordinates,E=t&&(m.type==="Polygon"||m.type==="MultiPolygon")?1:0,m.type==="Point")e(b);else if(m.type==="LineString"||m.type==="MultiPoint")for(l=0;l<b.length;l++)e(b[l]);else if(m.type==="Polygon"||m.type==="MultiLineString")for(l=0;l<b.length;l++)for(d=0;d<b[l].length-E;d++)e(b[l][d]);else if(m.type==="MultiPolygon")for(l=0;l<b.length;l++)for(d=0;d<b[l].length;d++)for(g=0;g<b[l][d].length-E;g++)e(b[l][d][g]);else throw new Error("Unknown Geometry Type")}turfMeta.coordEach=coordEach$1;function coordReduce(n,e,t,o){return coordEach$1(n,function(l){t=e(t,l)},o),t}turfMeta.coordReduce=coordReduce;function propEach(n,e){var t;switch(n.type){case"FeatureCollection":for(t=0;t<n.features.length;t++)e(n.features[t].properties);break;case"Feature":e(n.properties);break}}turfMeta.propEach=propEach;function propReduce(n,e,t){return propEach(n,function(o){t=e(t,o)}),t}turfMeta.propReduce=propReduce;function featureEach(n,e){if(n.type==="Feature")e(n);else if(n.type==="FeatureCollection")for(var t=0;t<n.features.length;t++)e(n.features[t])}turfMeta.featureEach=featureEach;function coordAll(n){var e=[];return coordEach$1(n,function(t){e.push(t)}),e}turfMeta.coordAll=coordAll;var each$c=turfMeta.coordEach,turfBbox=function(n){var e=[1/0,1/0,-1/0,-1/0];return each$c(n,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e},turfPlanepoint=function(n,e){var t=n.geometry.coordinates[0],o=n.geometry.coordinates[1],l=e.geometry.coordinates[0][0][0],d=e.geometry.coordinates[0][0][1],h=e.properties.a,g=e.geometry.coordinates[0][1][0],m=e.geometry.coordinates[0][1][1],y=e.properties.b,b=e.geometry.coordinates[0][2][0],w=e.geometry.coordinates[0][2][1],E=e.properties.c,P=(E*(t-l)*(o-m)+h*(t-g)*(o-w)+y*(t-b)*(o-d)-y*(t-l)*(o-w)-E*(t-g)*(o-d)-h*(t-b)*(o-m))/((t-l)*(o-m)+(t-g)*(o-w)+(t-b)*(o-d)-(t-l)*(o-w)-(t-g)*(o-d)-(t-b)*(o-m));return P},getCoord$2=turfInvariant.getCoord,radiansToDistance=turfHelpers.radiansToDistance,turfDistance=function(n,e,t){var o=Math.PI/180,l=getCoord$2(n),d=getCoord$2(e),h=o*(d[1]-l[1]),g=o*(d[0]-l[0]),m=o*l[1],y=o*d[1],b=Math.pow(Math.sin(h/2),2)+Math.pow(Math.sin(g/2),2)*Math.cos(m)*Math.cos(y);return radiansToDistance(2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b)),t)},distance$a=turfDistance,turfSquare=function(n){var e=distance$a(n.slice(0,2),[n[2],n[1]],"miles"),t=distance$a(n.slice(0,2),[n[0],n[3]],"miles");if(e>=t){var o=(n[1]+n[3])/2;return[n[0],o-(n[2]-n[0])/2,n[2],o+(n[2]-n[0])/2]}else{var l=(n[0]+n[2])/2;return[l-(n[3]-n[1])/2,n[1],l+(n[3]-n[1])/2,n[3]]}},conrec=Conrec$1,EPSILON$1=1e-10;function pointsEqual(n,e){var t=n.x-e.x,o=n.y-e.y;return t*t+o*o<EPSILON$1}function reverseList(n){for(var e=n.head;e;){var t=e.next;e.next=e.prev,e.prev=t,e=t}var t=n.head;n.head=n.tail,n.tail=t}function ContourBuilder(n){this.level=n,this.s=null,this.count=0}ContourBuilder.prototype.remove_seq=function(n){n.prev?n.prev.next=n.next:this.s=n.next,n.next&&(n.next.prev=n.prev),--this.count};ContourBuilder.prototype.addSegment=function(n,e){for(var t=this.s,o=null,l=null,d=!1,h=!1;t&&(o==null&&(pointsEqual(n,t.head.p)?(o=t,d=!0):pointsEqual(n,t.tail.p)&&(o=t)),l==null&&(pointsEqual(e,t.head.p)?(l=t,h=!0):pointsEqual(e,t.tail.p)&&(l=t)),!(l!=null&&o!=null));)t=t.next;var g=(o!=null?1:0)|(l!=null?2:0);switch(g){case 0:var m={p:n,prev:null},y={p:e,next:null};m.next=y,y.prev=m,o={head:m,tail:y,next:this.s,prev:null,closed:!1},this.s&&(this.s.prev=o),this.s=o,++this.count;break;case 1:var b={p:e};d?(b.next=o.head,b.prev=null,o.head.prev=b,o.head=b):(b.next=null,b.prev=o.tail,o.tail.next=b,o.tail=b);break;case 2:var b={p:n};h?(b.next=l.head,b.prev=null,l.head.prev=b,l.head=b):(b.next=null,b.prev=l.tail,l.tail.next=b,l.tail=b);break;case 3:if(o===l){var b={p:o.tail.p,next:o.head,prev:null};o.head.prev=b,o.head=b,o.closed=!0;break}switch((d?1:0)|(h?2:0)){case 0:reverseList(o);case 1:l.tail.next=o.head,o.head.prev=l.tail,l.tail=o.tail,this.remove_seq(o);break;case 3:reverseList(o);case 2:o.tail.next=l.head,l.head.prev=o.tail,o.tail=l.tail,this.remove_seq(l);break}}};function Conrec$1(n){if(n)this.drawContour=n;else{var e=this;e.contours={},this.drawContour=function(t,o,l,d,h,g){var m=e.contours[g];m||(m=e.contours[g]=new ContourBuilder(h)),m.addSegment({x:t,y:o},{x:l,y:d})},this.contourList=function(){var t=[],o=e.contours;for(var l in o)for(var d=o[l].s,h=o[l].level;d;){var g=d.head,m=[];for(m.level=h,m.k=l;g&&g.p;)m.push(g.p),g=g.next;t.push(m),d=d.next}return t.sort(function(y,b){return y.k-b.k}),t}}this.h=new Array(5),this.sh=new Array(5),this.xh=new Array(5),this.yh=new Array(5)}Conrec$1.prototype.contour=function(n,e,t,o,l,d,h,g,m){var y=this.h,b=this.sh,w=this.xh,E=this.yh,P=this.drawContour;this.contours={};for(var $=function(X,A){return(y[A]*w[X]-y[X]*w[A])/(y[A]-y[X])},C=function(X,A){return(y[A]*E[X]-y[X]*E[A])/(y[A]-y[X])},L,W,Y,D,k,F,ce=0,q=0,te=0,Q=0,ie=[0,1,1,0],J=[0,0,1,1],x=[[[0,0,8],[0,2,5],[7,6,9]],[[0,3,4],[1,3,1],[4,3,0]],[[9,6,7],[5,2,0],[8,0,0]]],I=l-1;I>=o;I--)for(var R=e;R<=t-1;R++){var B,ee;if(B=Math.min(n[R][I],n[R][I+1]),ee=Math.min(n[R+1][I],n[R+1][I+1]),k=Math.min(B,ee),B=Math.max(n[R][I],n[R][I+1]),ee=Math.max(n[R+1][I],n[R+1][I+1]),F=Math.max(B,ee),F>=m[0]&&k<=m[g-1]){for(var ne=0;ne<g;ne++)if(m[ne]>=k&&m[ne]<=F){for(var z=4;z>=0;z--)z>0?(y[z]=n[R+ie[z-1]][I+J[z-1]]-m[ne],w[z]=d[R+ie[z-1]],E[z]=h[I+J[z-1]]):(y[0]=.25*(y[1]+y[2]+y[3]+y[4]),w[0]=.5*(d[R]+d[R+1]),E[0]=.5*(h[I]+h[I+1])),y[z]>EPSILON$1?b[z]=1:y[z]<-EPSILON$1?b[z]=-1:b[z]=0;for(z=1;z<=4;z++)if(L=z,W=0,z!=4?Y=z+1:Y=1,D=x[b[L]+1][b[W]+1][b[Y]+1],D!=0){switch(D){case 1:ce=w[L],te=E[L],q=w[W],Q=E[W];break;case 2:ce=w[W],te=E[W],q=w[Y],Q=E[Y];break;case 3:ce=w[Y],te=E[Y],q=w[L],Q=E[L];break;case 4:ce=w[L],te=E[L],q=$(W,Y),Q=C(W,Y);break;case 5:ce=w[W],te=E[W],q=$(Y,L),Q=C(Y,L);break;case 6:ce=w[Y],te=E[Y],q=$(L,W),Q=C(L,W);break;case 7:ce=$(L,W),te=C(L,W),q=$(W,Y),Q=C(W,Y);break;case 8:ce=$(W,Y),te=C(W,Y),q=$(Y,L),Q=C(Y,L);break;case 9:ce=$(Y,L),te=C(Y,L),q=$(L,W),Q=C(L,W);break}P(ce,te,q,Q,m[ne],ne)}}}}};var tin$1=turfTin,inside$4=turfInside,grid=turfGrid,bbox$2=turfBbox,planepoint=turfPlanepoint,featurecollection$4=turfHelpers.featureCollection,linestring$2=turfHelpers.lineString,square=turfSquare,Conrec=conrec,turfIsolines=function(n,e,t,o){for(var l=tin$1(n,e),d=bbox$2(n),h=square(d),g=grid(h,t),m=[],y=0;y<g.features.length;y++)for(var b=g.features[y],w=0;w<l.features.length;w++){var E=l.features[w];inside$4(b,E)&&(b.properties={},b.properties[e]=planepoint(b,E))}for(var P=Math.sqrt(g.features.length),$=0;$<P;$++){for(var C=g.features.slice($*P,($+1)*P),L=[],W=0;W<C.length;W++)C[W].properties?L.push(C[W].properties[e]):L.push(0);m.push(L)}for(var Y=(h[2]-h[0])/P,D=[],k=[],F=0;F<P;F++)D.push(F*Y+h[0]),k.push(F*Y+h[1]);var ce=new Conrec;ce.contour(m,0,t,0,t,D,k,o.length,o);var q=ce.contourList(),te=featurecollection$4([]);return q.forEach(function(Q){if(Q.length>2){var ie=[];Q.forEach(function(x){ie.push([x.x,x.y])});var J=linestring$2(ie);J.properties={},J.properties[e]=Q.level,te.features.push(J)}}),te},ch1d=convexHull1d$1;function convexHull1d$1(n){for(var e=0,t=0,o=1;o<n.length;++o)n[o][0]<n[e][0]&&(e=o),n[o][0]>n[t][0]&&(t=o);return e<t?[[e],[t]]:e>t?[[t],[e]]:[[e]]}var orientationExports={},orientation={get exports(){return orientationExports},set exports(n){orientationExports=n}},twoProduct_1=twoProduct$1,SPLITTER=+(Math.pow(2,27)+1);function twoProduct$1(n,e,t){var o=n*e,l=SPLITTER*n,d=l-n,h=l-d,g=n-h,m=SPLITTER*e,y=m-e,b=m-y,w=e-b,E=o-h*b,P=E-g*b,$=P-h*w,C=g*w-$;return t?(t[0]=C,t[1]=o,t):[C,o]}var robustSum=linearExpansionSum;function scalarScalar$1(n,e){var t=n+e,o=t-n,l=t-o,d=e-o,h=n-l,g=h+d;return g?[g,t]:[t]}function linearExpansionSum(n,e){var t=n.length|0,o=e.length|0;if(t===1&&o===1)return scalarScalar$1(n[0],e[0]);var l=t+o,d=new Array(l),h=0,g=0,m=0,y=Math.abs,b=n[g],w=y(b),E=e[m],P=y(E),$,C;w<P?(C=b,g+=1,g<t&&(b=n[g],w=y(b))):(C=E,m+=1,m<o&&(E=e[m],P=y(E))),g<t&&w<P||m>=o?($=b,g+=1,g<t&&(b=n[g],w=y(b))):($=E,m+=1,m<o&&(E=e[m],P=y(E)));for(var L=$+C,W=L-$,Y=C-W,D=Y,k=L,F,ce,q,te,Q;g<t&&m<o;)w<P?($=b,g+=1,g<t&&(b=n[g],w=y(b))):($=E,m+=1,m<o&&(E=e[m],P=y(E))),C=D,L=$+C,W=L-$,Y=C-W,Y&&(d[h++]=Y),F=k+L,ce=F-k,q=F-ce,te=L-ce,Q=k-q,D=Q+te,k=F;for(;g<t;)$=b,C=D,L=$+C,W=L-$,Y=C-W,Y&&(d[h++]=Y),F=k+L,ce=F-k,q=F-ce,te=L-ce,Q=k-q,D=Q+te,k=F,g+=1,g<t&&(b=n[g]);for(;m<o;)$=E,C=D,L=$+C,W=L-$,Y=C-W,Y&&(d[h++]=Y),F=k+L,ce=F-k,q=F-ce,te=L-ce,Q=k-q,D=Q+te,k=F,m+=1,m<o&&(E=e[m]);return D&&(d[h++]=D),k&&(d[h++]=k),h||(d[h++]=0),d.length=h,d}var twoSum$1=fastTwoSum;function fastTwoSum(n,e,t){var o=n+e,l=o-n,d=o-l,h=e-l,g=n-d;return t?(t[0]=g+h,t[1]=o,t):[g+h,o]}var twoProduct=twoProduct_1,twoSum=twoSum$1,robustScale=scaleLinearExpansion;function scaleLinearExpansion(n,e){var t=n.length;if(t===1){var o=twoProduct(n[0],e);return o[0]?o:[o[1]]}var l=new Array(2*t),d=[.1,.1],h=[.1,.1],g=0;twoProduct(n[0],e,d),d[0]&&(l[g++]=d[0]);for(var m=1;m<t;++m){twoProduct(n[m],e,h);var y=d[1];twoSum(y,h[0],d),d[0]&&(l[g++]=d[0]);var b=h[1],w=d[1],E=b+w,P=E-b,$=w-P;d[1]=E,$&&(l[g++]=$)}return d[1]&&(l[g++]=d[1]),g===0&&(l[g++]=0),l.length=g,l}var robustDiff=robustSubtract;function scalarScalar(n,e){var t=n+e,o=t-n,l=t-o,d=e-o,h=n-l,g=h+d;return g?[g,t]:[t]}function robustSubtract(n,e){var t=n.length|0,o=e.length|0;if(t===1&&o===1)return scalarScalar(n[0],-e[0]);var l=t+o,d=new Array(l),h=0,g=0,m=0,y=Math.abs,b=n[g],w=y(b),E=-e[m],P=y(E),$,C;w<P?(C=b,g+=1,g<t&&(b=n[g],w=y(b))):(C=E,m+=1,m<o&&(E=-e[m],P=y(E))),g<t&&w<P||m>=o?($=b,g+=1,g<t&&(b=n[g],w=y(b))):($=E,m+=1,m<o&&(E=-e[m],P=y(E)));for(var L=$+C,W=L-$,Y=C-W,D=Y,k=L,F,ce,q,te,Q;g<t&&m<o;)w<P?($=b,g+=1,g<t&&(b=n[g],w=y(b))):($=E,m+=1,m<o&&(E=-e[m],P=y(E))),C=D,L=$+C,W=L-$,Y=C-W,Y&&(d[h++]=Y),F=k+L,ce=F-k,q=F-ce,te=L-ce,Q=k-q,D=Q+te,k=F;for(;g<t;)$=b,C=D,L=$+C,W=L-$,Y=C-W,Y&&(d[h++]=Y),F=k+L,ce=F-k,q=F-ce,te=L-ce,Q=k-q,D=Q+te,k=F,g+=1,g<t&&(b=n[g]);for(;m<o;)$=E,C=D,L=$+C,W=L-$,Y=C-W,Y&&(d[h++]=Y),F=k+L,ce=F-k,q=F-ce,te=L-ce,Q=k-q,D=Q+te,k=F,m+=1,m<o&&(E=-e[m]);return D&&(d[h++]=D),k&&(d[h++]=k),h||(d[h++]=0),d.length=h,d}(function(n){var e=twoProduct_1,t=robustSum,o=robustScale,l=robustDiff,d=5,h=11102230246251565e-32,g=(3+16*h)*h,m=(7+56*h)*h;function y(D,k,F,ce){return function(te,Q,ie){var J=D(D(k(Q[1],ie[0]),k(-ie[1],Q[0])),D(k(te[1],Q[0]),k(-Q[1],te[0]))),x=D(k(te[1],ie[0]),k(-ie[1],te[0])),I=ce(J,x);return I[I.length-1]}}function b(D,k,F,ce){return function(te,Q,ie,J){var x=D(D(F(D(k(ie[1],J[0]),k(-J[1],ie[0])),Q[2]),D(F(D(k(Q[1],J[0]),k(-J[1],Q[0])),-ie[2]),F(D(k(Q[1],ie[0]),k(-ie[1],Q[0])),J[2]))),D(F(D(k(Q[1],J[0]),k(-J[1],Q[0])),te[2]),D(F(D(k(te[1],J[0]),k(-J[1],te[0])),-Q[2]),F(D(k(te[1],Q[0]),k(-Q[1],te[0])),J[2])))),I=D(D(F(D(k(ie[1],J[0]),k(-J[1],ie[0])),te[2]),D(F(D(k(te[1],J[0]),k(-J[1],te[0])),-ie[2]),F(D(k(te[1],ie[0]),k(-ie[1],te[0])),J[2]))),D(F(D(k(Q[1],ie[0]),k(-ie[1],Q[0])),te[2]),D(F(D(k(te[1],ie[0]),k(-ie[1],te[0])),-Q[2]),F(D(k(te[1],Q[0]),k(-Q[1],te[0])),ie[2])))),R=ce(x,I);return R[R.length-1]}}function w(D,k,F,ce){return function(te,Q,ie,J,x){var I=D(D(D(F(D(F(D(k(J[1],x[0]),k(-x[1],J[0])),ie[2]),D(F(D(k(ie[1],x[0]),k(-x[1],ie[0])),-J[2]),F(D(k(ie[1],J[0]),k(-J[1],ie[0])),x[2]))),Q[3]),D(F(D(F(D(k(J[1],x[0]),k(-x[1],J[0])),Q[2]),D(F(D(k(Q[1],x[0]),k(-x[1],Q[0])),-J[2]),F(D(k(Q[1],J[0]),k(-J[1],Q[0])),x[2]))),-ie[3]),F(D(F(D(k(ie[1],x[0]),k(-x[1],ie[0])),Q[2]),D(F(D(k(Q[1],x[0]),k(-x[1],Q[0])),-ie[2]),F(D(k(Q[1],ie[0]),k(-ie[1],Q[0])),x[2]))),J[3]))),D(F(D(F(D(k(ie[1],J[0]),k(-J[1],ie[0])),Q[2]),D(F(D(k(Q[1],J[0]),k(-J[1],Q[0])),-ie[2]),F(D(k(Q[1],ie[0]),k(-ie[1],Q[0])),J[2]))),-x[3]),D(F(D(F(D(k(J[1],x[0]),k(-x[1],J[0])),Q[2]),D(F(D(k(Q[1],x[0]),k(-x[1],Q[0])),-J[2]),F(D(k(Q[1],J[0]),k(-J[1],Q[0])),x[2]))),te[3]),F(D(F(D(k(J[1],x[0]),k(-x[1],J[0])),te[2]),D(F(D(k(te[1],x[0]),k(-x[1],te[0])),-J[2]),F(D(k(te[1],J[0]),k(-J[1],te[0])),x[2]))),-Q[3])))),D(D(F(D(F(D(k(Q[1],x[0]),k(-x[1],Q[0])),te[2]),D(F(D(k(te[1],x[0]),k(-x[1],te[0])),-Q[2]),F(D(k(te[1],Q[0]),k(-Q[1],te[0])),x[2]))),J[3]),D(F(D(F(D(k(Q[1],J[0]),k(-J[1],Q[0])),te[2]),D(F(D(k(te[1],J[0]),k(-J[1],te[0])),-Q[2]),F(D(k(te[1],Q[0]),k(-Q[1],te[0])),J[2]))),-x[3]),F(D(F(D(k(ie[1],J[0]),k(-J[1],ie[0])),Q[2]),D(F(D(k(Q[1],J[0]),k(-J[1],Q[0])),-ie[2]),F(D(k(Q[1],ie[0]),k(-ie[1],Q[0])),J[2]))),te[3]))),D(F(D(F(D(k(ie[1],J[0]),k(-J[1],ie[0])),te[2]),D(F(D(k(te[1],J[0]),k(-J[1],te[0])),-ie[2]),F(D(k(te[1],ie[0]),k(-ie[1],te[0])),J[2]))),-Q[3]),D(F(D(F(D(k(Q[1],J[0]),k(-J[1],Q[0])),te[2]),D(F(D(k(te[1],J[0]),k(-J[1],te[0])),-Q[2]),F(D(k(te[1],Q[0]),k(-Q[1],te[0])),J[2]))),ie[3]),F(D(F(D(k(Q[1],ie[0]),k(-ie[1],Q[0])),te[2]),D(F(D(k(te[1],ie[0]),k(-ie[1],te[0])),-Q[2]),F(D(k(te[1],Q[0]),k(-Q[1],te[0])),ie[2]))),-J[3]))))),R=D(D(D(F(D(F(D(k(J[1],x[0]),k(-x[1],J[0])),ie[2]),D(F(D(k(ie[1],x[0]),k(-x[1],ie[0])),-J[2]),F(D(k(ie[1],J[0]),k(-J[1],ie[0])),x[2]))),te[3]),F(D(F(D(k(J[1],x[0]),k(-x[1],J[0])),te[2]),D(F(D(k(te[1],x[0]),k(-x[1],te[0])),-J[2]),F(D(k(te[1],J[0]),k(-J[1],te[0])),x[2]))),-ie[3])),D(F(D(F(D(k(ie[1],x[0]),k(-x[1],ie[0])),te[2]),D(F(D(k(te[1],x[0]),k(-x[1],te[0])),-ie[2]),F(D(k(te[1],ie[0]),k(-ie[1],te[0])),x[2]))),J[3]),F(D(F(D(k(ie[1],J[0]),k(-J[1],ie[0])),te[2]),D(F(D(k(te[1],J[0]),k(-J[1],te[0])),-ie[2]),F(D(k(te[1],ie[0]),k(-ie[1],te[0])),J[2]))),-x[3]))),D(D(F(D(F(D(k(ie[1],x[0]),k(-x[1],ie[0])),Q[2]),D(F(D(k(Q[1],x[0]),k(-x[1],Q[0])),-ie[2]),F(D(k(Q[1],ie[0]),k(-ie[1],Q[0])),x[2]))),te[3]),F(D(F(D(k(ie[1],x[0]),k(-x[1],ie[0])),te[2]),D(F(D(k(te[1],x[0]),k(-x[1],te[0])),-ie[2]),F(D(k(te[1],ie[0]),k(-ie[1],te[0])),x[2]))),-Q[3])),D(F(D(F(D(k(Q[1],x[0]),k(-x[1],Q[0])),te[2]),D(F(D(k(te[1],x[0]),k(-x[1],te[0])),-Q[2]),F(D(k(te[1],Q[0]),k(-Q[1],te[0])),x[2]))),ie[3]),F(D(F(D(k(Q[1],ie[0]),k(-ie[1],Q[0])),te[2]),D(F(D(k(te[1],ie[0]),k(-ie[1],te[0])),-Q[2]),F(D(k(te[1],Q[0]),k(-Q[1],te[0])),ie[2]))),-x[3])))),B=ce(I,R);return B[B.length-1]}}function E(D){var k=D===3?y:D===4?b:w;return k(t,e,o,l)}var P=E(3),$=E(4),C=[function(){return 0},function(){return 0},function(k,F){return F[0]-k[0]},function(k,F,ce){var q=(k[1]-ce[1])*(F[0]-ce[0]),te=(k[0]-ce[0])*(F[1]-ce[1]),Q=q-te,ie;if(q>0){if(te<=0)return Q;ie=q+te}else if(q<0){if(te>=0)return Q;ie=-(q+te)}else return Q;var J=g*ie;return Q>=J||Q<=-J?Q:P(k,F,ce)},function(k,F,ce,q){var te=k[0]-q[0],Q=F[0]-q[0],ie=ce[0]-q[0],J=k[1]-q[1],x=F[1]-q[1],I=ce[1]-q[1],R=k[2]-q[2],B=F[2]-q[2],ee=ce[2]-q[2],ne=Q*I,z=ie*x,X=ie*J,A=te*I,Z=te*x,$e=Q*J,Ne=R*(ne-z)+B*(X-A)+ee*(Z-$e),Me=(Math.abs(ne)+Math.abs(z))*Math.abs(R)+(Math.abs(X)+Math.abs(A))*Math.abs(B)+(Math.abs(Z)+Math.abs($e))*Math.abs(ee),Ee=m*Me;return Ne>Ee||-Ne>Ee?Ne:$(k,F,ce,q)}];function L(D){var k=C[D.length];return k||(k=C[D.length]=E(D.length)),k.apply(void 0,D)}function W(D,k,F,ce,q,te,Q){return function(J,x,I,R,B){switch(arguments.length){case 0:case 1:return 0;case 2:return ce(J,x);case 3:return q(J,x,I);case 4:return te(J,x,I,R);case 5:return Q(J,x,I,R,B)}for(var ee=new Array(arguments.length),ne=0;ne<arguments.length;++ne)ee[ne]=arguments[ne];return D(ee)}}function Y(){for(;C.length<=d;)C.push(E(C.length));n.exports=W.apply(void 0,[L].concat(C));for(var D=0;D<=d;++D)n.exports[D]=C[D]}Y()})(orientation);var monotoneConvexHull2d=monotoneConvexHull2D,orient$2=orientationExports[3];function monotoneConvexHull2D(n){var e=n.length;if(e<3){for(var y=new Array(e),t=0;t<e;++t)y[t]=t;return e===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:y}for(var o=new Array(e),t=0;t<e;++t)o[t]=t;o.sort(function(P,$){var C=n[P][0]-n[$][0];return C||n[P][1]-n[$][1]});for(var l=[o[0],o[1]],d=[o[0],o[1]],t=2;t<e;++t){for(var h=o[t],g=n[h],m=l.length;m>1&&orient$2(n[l[m-2]],n[l[m-1]],g)<=0;)m-=1,l.pop();for(l.push(h),m=d.length;m>1&&orient$2(n[d[m-2]],n[d[m-1]],g)>=0;)m-=1,d.pop();d.push(h)}for(var y=new Array(d.length+l.length-2),b=0,t=0,w=l.length;t<w;++t)y[b++]=l[t];for(var E=d.length-2;E>0;--E)y[b++]=d[E];return y}var ch2d=convexHull2D,monotoneHull=monotoneConvexHull2d;function convexHull2D(n){var e=monotoneHull(n),t=e.length;if(t<=2)return[];for(var o=new Array(t),l=e[t-1],d=0;d<t;++d){var h=e[d];o[d]=[l,h],l=h}return o}var topology={},twiddle={},INT_BITS=32;twiddle.INT_BITS=INT_BITS;twiddle.INT_MAX=2147483647;twiddle.INT_MIN=-1<<INT_BITS-1;twiddle.sign=function(n){return(n>0)-(n<0)};twiddle.abs=function(n){var e=n>>INT_BITS-1;return(n^e)-e};twiddle.min=function(n,e){return e^(n^e)&-(n<e)};twiddle.max=function(n,e){return n^(n^e)&-(n<e)};twiddle.isPow2=function(n){return!(n&n-1)&&!!n};twiddle.log2=function(n){var e,t;return e=(n>65535)<<4,n>>>=e,t=(n>255)<<3,n>>>=t,e|=t,t=(n>15)<<2,n>>>=t,e|=t,t=(n>3)<<1,n>>>=t,e|=t,e|n>>1};twiddle.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0};twiddle.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};function countTrailingZeros(n){var e=32;return n&=-n,n&&e--,n&65535&&(e-=16),n&16711935&&(e-=8),n&252645135&&(e-=4),n&858993459&&(e-=2),n&1431655765&&(e-=1),e}twiddle.countTrailingZeros=countTrailingZeros;twiddle.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1};twiddle.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)};twiddle.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var REVERSE_TABLE=new Array(256);(function(n){for(var e=0;e<256;++e){var t=e,o=e,l=7;for(t>>>=1;t;t>>>=1)o<<=1,o|=t&1,--l;n[e]=o<<l&255}})(REVERSE_TABLE);twiddle.reverse=function(n){return REVERSE_TABLE[n&255]<<24|REVERSE_TABLE[n>>>8&255]<<16|REVERSE_TABLE[n>>>16&255]<<8|REVERSE_TABLE[n>>>24&255]};twiddle.interleave2=function(n,e){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1};twiddle.deinterleave2=function(n,e){return n=n>>>e&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16};twiddle.interleave3=function(n,e,t){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,n|=e<<1,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,n|t<<2};twiddle.deinterleave3=function(n,e){return n=n>>>e&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22};twiddle.nextCombination=function(n){var e=n|n-1;return e+1|(~e&-~e)-1>>>countTrailingZeros(n)+1};var unionFind=UnionFind$1;function UnionFind$1(n){this.roots=new Array(n),this.ranks=new Array(n);for(var e=0;e<n;++e)this.roots[e]=e,this.ranks[e]=0}var proto$1=UnionFind$1.prototype;Object.defineProperty(proto$1,"length",{get:function(){return this.roots.length}});proto$1.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n};proto$1.find=function(n){for(var e=n,t=this.roots;t[n]!==n;)n=t[n];for(;t[e]!==n;){var o=t[e];t[e]=n,e=o}return n};proto$1.link=function(n,e){var t=this.find(n),o=this.find(e);if(t!==o){var l=this.ranks,d=this.roots,h=l[t],g=l[o];h<g?d[t]=o:g<h?d[o]=t:(d[o]=t,++l[t])}};var bits=twiddle,UnionFind=unionFind;function dimension(n){for(var e=0,t=Math.max,o=0,l=n.length;o<l;++o)e=t(e,n[o].length);return e-1}topology.dimension=dimension;function countVertices(n){for(var e=-1,t=Math.max,o=0,l=n.length;o<l;++o)for(var d=n[o],h=0,g=d.length;h<g;++h)e=t(e,d[h]);return e+1}topology.countVertices=countVertices;function cloneCells(n){for(var e=new Array(n.length),t=0,o=n.length;t<o;++t)e[t]=n[t].slice(0);return e}topology.cloneCells=cloneCells;function compareCells(n,e){var t=n.length,o=n.length-e.length,l=Math.min;if(o)return o;switch(t){case 0:return 0;case 1:return n[0]-e[0];case 2:var y=n[0]+n[1]-e[0]-e[1];return y||l(n[0],n[1])-l(e[0],e[1]);case 3:var d=n[0]+n[1],h=e[0]+e[1];if(y=d+n[2]-(h+e[2]),y)return y;var g=l(n[0],n[1]),m=l(e[0],e[1]),y=l(g,n[2])-l(m,e[2]);return y||l(g+n[2],d)-l(m+e[2],h);default:var b=n.slice(0);b.sort();var w=e.slice(0);w.sort();for(var E=0;E<t;++E)if(o=b[E]-w[E],o)return o;return 0}}topology.compareCells=compareCells;function compareZipped(n,e){return compareCells(n[0],e[0])}function normalize$2(n,e){if(e){for(var t=n.length,o=new Array(t),l=0;l<t;++l)o[l]=[n[l],e[l]];o.sort(compareZipped);for(var l=0;l<t;++l)n[l]=o[l][0],e[l]=o[l][1];return n}else return n.sort(compareCells),n}topology.normalize=normalize$2;function unique(n){if(n.length===0)return[];for(var e=1,t=n.length,o=1;o<t;++o){var l=n[o];if(compareCells(l,n[o-1])){if(o===e){e++;continue}n[e++]=l}}return n.length=e,n}topology.unique=unique;function findCell(n,e){for(var t=0,o=n.length-1,l=-1;t<=o;){var d=t+o>>1,h=compareCells(n[d],e);h<=0?(h===0&&(l=d),t=d+1):h>0&&(o=d-1)}return l}topology.findCell=findCell;function incidence(n,e){for(var t=new Array(n.length),o=0,l=t.length;o<l;++o)t[o]=[];for(var d=[],o=0,h=e.length;o<h;++o)for(var g=e[o],m=g.length,y=1,b=1<<m;y<b;++y){d.length=bits.popCount(y);for(var w=0,E=0;E<m;++E)y&1<<E&&(d[w++]=g[E]);var P=findCell(n,d);if(!(P<0))for(;t[P++].push(o),!(P>=n.length||compareCells(n[P],d)!==0););}return t}topology.incidence=incidence;function dual(n,e){if(!e)return incidence(unique(skeleton(n,0)),n);for(var t=new Array(e),o=0;o<e;++o)t[o]=[];for(var o=0,l=n.length;o<l;++o)for(var d=n[o],h=0,g=d.length;h<g;++h)t[d[h]].push(o);return t}topology.dual=dual;function explode$1(n){for(var e=[],t=0,o=n.length;t<o;++t)for(var l=n[t],d=l.length|0,h=1,g=1<<d;h<g;++h){for(var m=[],y=0;y<d;++y)h>>>y&1&&m.push(l[y]);e.push(m)}return normalize$2(e)}topology.explode=explode$1;function skeleton(n,e){if(e<0)return[];for(var t=[],o=(1<<e+1)-1,l=0;l<n.length;++l)for(var d=n[l],h=o;h<1<<d.length;h=bits.nextCombination(h)){for(var g=new Array(e+1),m=0,y=0;y<d.length;++y)h&1<<y&&(g[m++]=d[y]);t.push(g)}return normalize$2(t)}topology.skeleton=skeleton;function boundary(n){for(var e=[],t=0,o=n.length;t<o;++t)for(var l=n[t],d=0,h=l.length;d<h;++d){for(var g=new Array(l.length-1),m=0,y=0;m<h;++m)m!==d&&(g[y++]=l[m]);e.push(g)}return normalize$2(e)}topology.boundary=boundary;function connectedComponents_dense(n,e){for(var t=new UnionFind(e),o=0;o<n.length;++o)for(var l=n[o],d=0;d<l.length;++d)for(var h=d+1;h<l.length;++h)t.link(l[d],l[h]);for(var g=[],m=t.ranks,o=0;o<m.length;++o)m[o]=-1;for(var o=0;o<n.length;++o){var y=t.find(n[o][0]);m[y]<0?(m[y]=g.length,g.push([n[o].slice(0)])):g[m[y]].push(n[o].slice(0))}return g}function connectedComponents_sparse(n){for(var e=unique(normalize$2(skeleton(n,0))),t=new UnionFind(e.length),o=0;o<n.length;++o)for(var l=n[o],d=0;d<l.length;++d)for(var h=findCell(e,[l[d]]),g=d+1;g<l.length;++g)t.link(h,findCell(e,[l[g]]));for(var m=[],y=t.ranks,o=0;o<y.length;++o)y[o]=-1;for(var o=0;o<n.length;++o){var b=t.find(findCell(e,[n[o][0]]));y[b]<0?(y[b]=m.length,m.push([n[o].slice(0)])):m[y[b]].push(n[o].slice(0))}return m}function connectedComponents(n,e){return e?connectedComponents_dense(n,e):connectedComponents_sparse(n)}topology.connectedComponents=connectedComponents;var ich$1=incrementalConvexHull,orient$1=orientationExports,compareCell=topology.compareCells;function Simplex(n,e,t){this.vertices=n,this.adjacent=e,this.boundary=t,this.lastVisited=-1}Simplex.prototype.flip=function(){var n=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=n;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};function GlueFacet(n,e,t){this.vertices=n,this.cell=e,this.index=t}function compareGlue(n,e){return compareCell(n.vertices,e.vertices)}function bakeOrient(n){for(var e=["function orient(){var tuple=this.tuple;return test("],t=0;t<=n;++t)t>0&&e.push(","),e.push("tuple[",t,"]");e.push(")}return orient");var o=new Function("test",e.join("")),l=orient$1[n+1];return l||(l=orient$1),o(l)}var BAKED=[];function Triangulation(n,e,t){this.dimension=n,this.vertices=e,this.simplices=t,this.interior=t.filter(function(d){return!d.boundary}),this.tuple=new Array(n+1);for(var o=0;o<=n;++o)this.tuple[o]=this.vertices[o];var l=BAKED[n];l||(l=BAKED[n]=bakeOrient(n)),this.orient=l}var proto=Triangulation.prototype;proto.handleBoundaryDegeneracy=function(n,e){var t=this.dimension,o=this.vertices.length-1,l=this.tuple,d=this.vertices,h=[n];for(n.lastVisited=-o;h.length>0;){n=h.pop(),n.vertices;for(var g=n.adjacent,m=0;m<=t;++m){var y=g[m];if(!(!y.boundary||y.lastVisited<=-o)){for(var b=y.vertices,w=0;w<=t;++w){var E=b[w];E<0?l[w]=e:l[w]=d[E]}var P=this.orient();if(P>0)return y;y.lastVisited=-o,P===0&&h.push(y)}}}return null};proto.walk=function(n,e){var t=this.vertices.length-1,o=this.dimension,l=this.vertices,d=this.tuple,h=e?this.interior.length*Math.random()|0:this.interior.length-1,g=this.interior[h];e:for(;!g.boundary;){for(var m=g.vertices,y=g.adjacent,b=0;b<=o;++b)d[b]=l[m[b]];g.lastVisited=t;for(var b=0;b<=o;++b){var w=y[b];if(!(w.lastVisited>=t)){var E=d[b];d[b]=n;var P=this.orient();if(d[b]=E,P<0){g=w;continue e}else w.boundary?w.lastVisited=-t:w.lastVisited=t}}return}return g};proto.addPeaks=function(n,e){var t=this.vertices.length-1,o=this.dimension,l=this.vertices,d=this.tuple,h=this.interior,g=this.simplices,m=[e];e.lastVisited=t,e.vertices[e.vertices.indexOf(-1)]=t,e.boundary=!1,h.push(e);for(var y=[];m.length>0;){var e=m.pop(),b=e.vertices,w=e.adjacent,E=b.indexOf(t);if(!(E<0)){for(var P=0;P<=o;++P)if(P!==E){var $=w[P];if(!(!$.boundary||$.lastVisited>=t)){var C=$.vertices;if($.lastVisited!==-t){for(var L=0,W=0;W<=o;++W)C[W]<0?(L=W,d[W]=n):d[W]=l[C[W]];var Y=this.orient();if(Y>0){C[L]=t,$.boundary=!1,h.push($),m.push($),$.lastVisited=t;continue}else $.lastVisited=-t}var D=$.adjacent,k=b.slice(),F=w.slice(),ce=new Simplex(k,F,!0);g.push(ce);var q=D.indexOf(e);if(!(q<0)){D[q]=ce,F[E]=$,k[P]=-1,F[P]=e,w[P]=ce,ce.flip();for(var W=0;W<=o;++W){var te=k[W];if(!(te<0||te===t)){for(var Q=new Array(o-1),ie=0,J=0;J<=o;++J){var x=k[J];x<0||J===W||(Q[ie++]=x)}y.push(new GlueFacet(Q,ce,W))}}}}}}}y.sort(compareGlue);for(var P=0;P+1<y.length;P+=2){var I=y[P],R=y[P+1],B=I.index,ee=R.index;B<0||ee<0||(I.cell.adjacent[I.index]=R.cell,R.cell.adjacent[R.index]=I.cell)}};proto.insert=function(n,e){var t=this.vertices;t.push(n);var o=this.walk(n,e);if(o){for(var l=this.dimension,d=this.tuple,h=0;h<=l;++h){var g=o.vertices[h];g<0?d[h]=n:d[h]=t[g]}var m=this.orient(d);m<0||m===0&&(o=this.handleBoundaryDegeneracy(o,n),!o)||this.addPeaks(n,o)}};proto.boundary=function(){for(var n=this.dimension,e=[],t=this.simplices,o=t.length,l=0;l<o;++l){var d=t[l];if(d.boundary){for(var h=new Array(n),g=d.vertices,m=0,y=0,b=0;b<=n;++b)g[b]>=0?h[m++]=g[b]:y=b&1;if(y===(n&1)){var w=h[0];h[0]=h[1],h[1]=w}e.push(h)}}return e};function incrementalConvexHull(n,e){var t=n.length;if(t===0)throw new Error("Must have at least d+1 points");var o=n[0].length;if(t<=o)throw new Error("Must input at least d+1 points");var l=n.slice(0,o+1),d=orient$1.apply(void 0,l);if(d===0)throw new Error("Input not in general position");for(var h=new Array(o+1),g=0;g<=o;++g)h[g]=g;d<0&&(h[0]=1,h[1]=0);for(var m=new Simplex(h,new Array(o+1),!1),y=m.adjacent,b=new Array(o+2),g=0;g<=o;++g){for(var w=h.slice(),E=0;E<=o;++E)E===g&&(w[E]=-1);var P=w[0];w[0]=w[1],w[1]=P;var $=new Simplex(w,new Array(o+1),!0);y[g]=$,b[g]=$}b[o+1]=m;for(var g=0;g<=o;++g)for(var w=y[g].vertices,C=y[g].adjacent,E=0;E<=o;++E){var L=w[E];if(L<0){C[E]=m;continue}for(var W=0;W<=o;++W)y[W].vertices.indexOf(L)<0&&(C[E]=y[W])}for(var Y=new Triangulation(o,l,b),D=!!e,g=o+1;g<t;++g)Y.insert(n[g],D);return Y.boundary()}var aff$1=affineHull,orient=orientationExports;function linearlyIndependent(n,e){for(var t=new Array(e+1),o=0;o<n.length;++o)t[o]=n[o];for(var o=0;o<=n.length;++o){for(var l=n.length;l<=e;++l){for(var d=new Array(e),h=0;h<e;++h)d[h]=Math.pow(l+1-o,h);t[l]=d}var g=orient.apply(void 0,t);if(g)return!0}return!1}function affineHull(n){var e=n.length;if(e===0)return[];if(e===1)return[0];for(var t=n[0].length,o=[n[0]],l=[0],d=1;d<e;++d){if(o.push(n[d]),!linearlyIndependent(o,t)){o.pop();continue}if(l.push(d),l.length===t+1)return l}return l}var chnd=convexHullnD,ich=ich$1,aff=aff$1;function permute(n,e){for(var t=n.length,o=new Array(t),l=0;l<e.length;++l)o[l]=n[e[l]];for(var d=e.length,l=0;l<t;++l)e.indexOf(l)<0&&(o[d++]=n[l]);return o}function invPermute(n,e){for(var t=n.length,o=e.length,l=0;l<t;++l)for(var d=n[l],h=0;h<d.length;++h){var g=d[h];if(g<o)d[h]=e[g];else{g=g-o;for(var m=0;m<o;++m)g>=e[m]&&(g+=1);d[h]=g}}return n}function convexHullnD(n,e){try{return ich(n,!0)}catch{var t=aff(n);if(t.length<=e)return[];var o=permute(n,t),l=ich(o,!0);return invPermute(l,t)}}var convexHull1d=ch1d,convexHull2d=ch2d,convexHullnd=chnd,ch=convexHull$1;function convexHull$1(n){var e=n.length;if(e===0)return[];if(e===1)return[[0]];var t=n[0].length;return t===0?[]:t===1?convexHull1d(n):t===2?convexHull2d(n):convexHullnd(n,t)}var each$b=turfMeta.coordEach,convexHull=ch,polygon$6=turfHelpers.polygon,turfConvex=function(n){var e=[];each$b(n,function(d){e.push(d)});var t=convexHull(e);if(t.length>0){for(var o=[],l=0;l<t.length;l++)o.push(e[t[l][0]]);return o.push(e[t[t.length-1][1]]),polygon$6([o])}},inside$3=turfInside,featureCollection$4=turfHelpers.featureCollection,turfWithin=function(n,e){for(var t=featureCollection$4([]),o=0;o<e.features.length;o++)for(var l=0;l<n.features.length;l++){var d=inside$3(n.features[l],e.features[o]);d&&t.features.push(n.features[l])}return t},jsts_minExports={},jsts_min={get exports(){return jsts_minExports},set exports(n){jsts_minExports=n}};(function(n,e){(function(t,o){o(e)})(commonjsGlobal,function(t){function o(a,u){for(var c in u)u.hasOwnProperty(c)&&(a[c]=u[c])}function l(){}function d(){}function h(){}function g(){}function m(){}function y(){}function b(){}function w(a){this.message=a}function E(a,u){a.prototype=Object.create(u.prototype),a.prototype.constructor=a}function P(){if(arguments.length===0)w.call(this);else if(arguments.length===1){var a=arguments[0];w.call(this,a)}}function $(){}function C(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)C.call(this,0,0);else if(arguments.length===1){var a=arguments[0];C.call(this,a.x,a.y,a.z)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];C.call(this,u,c,C.NULL_ORDINATE)}else if(arguments.length===3){var p=arguments[0],v=arguments[1],S=arguments[2];this.x=p,this.y=v,this.z=S}}function L(){if(this.dimensionsToTest=2,arguments.length===0)L.call(this,2);else if(arguments.length===1){var a=arguments[0];if(a!==2&&a!==3)throw new d;this.dimensionsToTest=a}}function W(){}function Y(){}function D(a){this.message=a||""}function k(){}function F(a){this.message=a||""}function ce(a){this.message=a||""}function q(){this.array_=[],arguments[0]instanceof Y&&this.addAll(arguments[0])}function te(){if(q.apply(this),arguments.length!==0){if(arguments.length===1){var a=arguments[0];this.ensureCapacity(a.length),this.add(a,!0)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.ensureCapacity(u.length),this.add(u,c)}}}function Q(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof C){var a=arguments[0];this.init(a.x,a.x,a.y,a.y)}else if(arguments[0]instanceof Q){var u=arguments[0];this.init(u)}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];this.init(c.x,p.x,c.y,p.y)}else if(arguments.length===4){var v=arguments[0],S=arguments[1],N=arguments[2],O=arguments[3];this.init(v,S,N,O)}}function ie(){}function J(){ie.call(this,"Projective point not representable on the Cartesian plane.")}function x(){}function I(a,u){return a.interfaces_&&a.interfaces_().indexOf(u)>-1}function R(){}function B(a){this.str=a}function ee(a){this.value=a}function ne(){}function z(){if(this.hi=0,this.lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var a=arguments[0];this.init(a)}else if(arguments[0]instanceof z){var u=arguments[0];this.init(u)}else if(typeof arguments[0]=="string"){var c=arguments[0];z.call(this,z.parse(c))}}else if(arguments.length===2){var p=arguments[0],v=arguments[1];this.init(p,v)}}function X(){}function A(){}function Z(){}function $e(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var a=arguments[0];this.x=a.x,this.y=a.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],c=arguments[1];this.x=u,this.y=c,this.w=1}else if(arguments[0]instanceof $e&&arguments[1]instanceof $e){var p=arguments[0],v=arguments[1];this.x=p.y*v.w-v.y*p.w,this.y=v.x*p.w-p.x*v.w,this.w=p.x*v.y-v.x*p.y}else if(arguments[0]instanceof C&&arguments[1]instanceof C){var S=arguments[0],N=arguments[1];this.x=S.y-N.y,this.y=N.x-S.x,this.w=S.x*N.y-N.x*S.y}}else if(arguments.length===3){var O=arguments[0],ae=arguments[1],ve=arguments[2];this.x=O,this.y=ae,this.w=ve}else if(arguments.length===4){var Pe=arguments[0],Te=arguments[1],ze=arguments[2],mt=arguments[3],Ft=Pe.y-Te.y,jt=Te.x-Pe.x,In=Pe.x*Te.y-Te.x*Pe.y,Fn=ze.y-mt.y,jr=mt.x-ze.x,ua=ze.x*mt.y-mt.x*ze.y;this.x=jt*ua-jr*In,this.y=Fn*In-Ft*ua,this.w=Ft*jr-Fn*jt}}function Ne(){}function Me(){}function Ee(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var a=arguments[0];this.factory=a,this.SRID=a.getSRID()}function Ve(){}function qe(){}function _t(){}function Qe(){}function tt(){}function st(){}function Oe(){}function Tt(){}function yn(){}function St(){}function de(){}function U(){}function H(){this.array_=[],arguments[0]instanceof Y&&this.addAll(arguments[0])}function pe(a){return a==null?gi:a.color}function _e(a){return a==null?null:a.parent}function De(a,u){a!==null&&(a.color=u)}function Be(a){return a==null?null:a.left}function Re(a){return a==null?null:a.right}function nt(){this.root_=null,this.size_=0}function It(){}function Yt(){}function dt(){this.array_=[],arguments[0]instanceof Y&&this.addAll(arguments[0])}function Kt(){}function ke(){}function rn(){}function nn(){}function Ot(){this.geometries=null;var a=arguments[0],u=arguments[1];if(Ee.call(this,u),a===null&&(a=[]),Ee.hasNullElements(a))throw new d;this.geometries=a}function ft(){var a=arguments[0],u=arguments[1];Ot.call(this,a,u)}function Ut(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,arguments.length===1){var a=arguments[0];Ut.call(this,a,qe.MOD2_BOUNDARY_RULE)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.geom=u,this.geomFact=u.getFactory(),this.bnRule=c}}function dr(){this.count=null}function vn(){}function ln(){}function vr(){}function un(){}function Lt(){}function En(){}function ut(){}function Ke(){}function At(){this.points=null;var a=arguments[0],u=arguments[1];Ee.call(this,u),this.init(a)}function dn(){}function ht(){this.coordinates=null;var a=arguments[0],u=arguments[1];Ee.call(this,u),this.init(a)}function Bn(){}function Mt(){this.shell=null,this.holes=null;var a=arguments[0],u=arguments[1],c=arguments[2];if(Ee.call(this,c),a===null&&(a=this.getFactory().createLinearRing()),u===null&&(u=[]),Ee.hasNullElements(u))throw new d;if(a.isEmpty()&&Ee.hasNonEmptyElements(u))throw new d;this.shell=a,this.holes=u}function me(){var a=arguments[0],u=arguments[1];Ot.call(this,a,u)}function le(){if(arguments[0]instanceof C&&arguments[1]instanceof Dt){var a=arguments[0],u=arguments[1];le.call(this,u.getCoordinateSequenceFactory().create(a),u)}else if(I(arguments[0],A)&&arguments[1]instanceof Dt){var c=arguments[0],p=arguments[1];At.call(this,c,p),this.validateConstruction()}}function oe(){var a=arguments[0],u=arguments[1];Ot.call(this,a,u)}function re(){if(this.factory=null,this.isUserDataCopied=!1,arguments.length!==0){if(arguments.length===1){var a=arguments[0];this.factory=a}}}function G(){}function se(){}function he(){}function Ie(){}function Ce(){if(this.dimension=3,this.coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var a=arguments[0];Ce.call(this,a,3)}else if(Number.isInteger(arguments[0])){var u=arguments[0];this.coordinates=new Array(u).fill(null);for(var c=0;u>c;c++)this.coordinates[c]=new C}else if(I(arguments[0],A)){var p=arguments[0];if(p===null)return this.coordinates=new Array(0).fill(null),null;this.dimension=p.getDimension(),this.coordinates=new Array(p.size()).fill(null);for(var c=0;c<this.coordinates.length;c++)this.coordinates[c]=p.getCoordinateCopy(c)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var v=arguments[0],S=arguments[1];this.coordinates=v,this.dimension=S,v===null&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var N=arguments[0],O=arguments[1];this.coordinates=new Array(N).fill(null),this.dimension=O;for(var c=0;N>c;c++)this.coordinates[c]=new C}}}function He(){}function Xe(a,u){return a===u||a!==a&&u!==u}function Fe(a,u){function c(p){return this&&this.constructor===c?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=u,void(p&&Se.call(this,p))):new c(p)}return u||co(a,"size",{get:Vn}),a.constructor=c,c.prototype=a,c}function Se(a){this.add?a.forEach(this.add,this):a.forEach(function(u){this.set(u[0],u[1])},this)}function ct(a){return this.has(a)&&(this._keys.splice(ni,1),this._values.splice(ni,1),this._itp.forEach(function(u){ni<u[0]&&u[0]--})),ni>-1}function Wt(a){return this.has(a)?this._values[ni]:void 0}function Ct(a,u){if(this.objectOnly&&u!==Object(u))throw new TypeError("Invalid value used as weak collection key");if(u!==u||u===0)for(ni=a.length;ni--&&!Xe(a[ni],u););else ni=a.indexOf(u);return ni>-1}function Bt(a){return Ct.call(this,this._keys,a)}function pt(a,u){return this.has(a)?this._values[ni]=u:this._values[this._keys.push(a)-1]=u,this}function bt(){(this._keys||0).length=this._values.length=0}function fn(){return Tn(this._itp,this._keys)}function cn(){return Tn(this._itp,this._values)}function Pn(){return Tn(this._itp,this._keys,this._values)}function Tn(a,u,c){var p=[0],v=!1;return a.push(p),{next:function(){var S,N=p[0];return!v&&N<u.length?(S=c?[u[N],c[N]]:u[N],p[0]++):(v=!0,a.splice(a.indexOf(p),1)),{done:v,value:S}}}}function Vn(){return this._values.length}function Zt(a,u){for(var c=this.entries();;){var p=c.next();if(p.done)break;a.call(u,p.value[1],p.value[0],this)}}function $n(){this.map_=new ho}function qt(){if(this.modelType=null,this.scale=null,arguments.length===0)this.modelType=qt.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Rn){var a=arguments[0];this.modelType=a,a===qt.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var u=arguments[0];this.modelType=qt.FIXED,this.setScale(u)}else if(arguments[0]instanceof qt){var c=arguments[0];this.modelType=c.modelType,this.scale=c.scale}}}function Rn(){this.name=null;var a=arguments[0];this.name=a,Rn.nameToTypeMap.put(a,this)}function Dt(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,arguments.length===0)Dt.call(this,new qt,0);else if(arguments.length===1){if(I(arguments[0],Ne)){var a=arguments[0];Dt.call(this,new qt,0,a)}else if(arguments[0]instanceof qt){var u=arguments[0];Dt.call(this,u,0,Dt.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];Dt.call(this,c,p,Dt.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var v=arguments[0],S=arguments[1],N=arguments[2];this.precisionModel=v,this.coordinateSequenceFactory=N,this.SRID=S}}function Sr(a){this.geometryFactory=a||new Dt}function xn(a){this.parser=new Sr(a)}function Vt(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new C,this.intPt[1]=new C,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function Cn(){Vt.apply(this)}function cr(){}function Er(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var a=arguments[0];this.p=a}function Ge(){}function Ht(){if(this.p0=null,this.p1=null,arguments.length===0)Ht.call(this,new C,new C);else if(arguments.length===1){var a=arguments[0];Ht.call(this,a.p0,a.p1)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.p0=u,this.p1=c}else if(arguments.length===4){var p=arguments[0],v=arguments[1],S=arguments[2],N=arguments[3];Ht.call(this,new C(p,v),new C(S,N))}}function zt(){if(this.matrix=null,arguments.length===0)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(ke.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var a=arguments[0];zt.call(this),this.set(a)}else if(arguments[0]instanceof zt){var u=arguments[0];zt.call(this),this.matrix[x.INTERIOR][x.INTERIOR]=u.matrix[x.INTERIOR][x.INTERIOR],this.matrix[x.INTERIOR][x.BOUNDARY]=u.matrix[x.INTERIOR][x.BOUNDARY],this.matrix[x.INTERIOR][x.EXTERIOR]=u.matrix[x.INTERIOR][x.EXTERIOR],this.matrix[x.BOUNDARY][x.INTERIOR]=u.matrix[x.BOUNDARY][x.INTERIOR],this.matrix[x.BOUNDARY][x.BOUNDARY]=u.matrix[x.BOUNDARY][x.BOUNDARY],this.matrix[x.BOUNDARY][x.EXTERIOR]=u.matrix[x.BOUNDARY][x.EXTERIOR],this.matrix[x.EXTERIOR][x.INTERIOR]=u.matrix[x.EXTERIOR][x.INTERIOR],this.matrix[x.EXTERIOR][x.BOUNDARY]=u.matrix[x.EXTERIOR][x.BOUNDARY],this.matrix[x.EXTERIOR][x.EXTERIOR]=u.matrix[x.EXTERIOR][x.EXTERIOR]}}}function Zn(){this.areaBasePt=null,this.triangleCent3=new C,this.areasum2=0,this.cg3=new C,this.lineCentSum=new C,this.totalLength=0,this.ptCount=0,this.ptCentSum=new C;var a=arguments[0];this.areaBasePt=null,this.add(a)}function Kr(a){this.message=a||""}function Mn(){this.array_=[]}function Ar(){this.treeSet=new dt,this.list=new q}function M(){if(this.geomFactory=null,this.inputPts=null,arguments.length===1){var a=arguments[0];M.call(this,M.extractCoordinates(a),a.getFactory())}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.inputPts=Ar.filterCoordinates(u),this.geomFactory=c}}function V(){this.origin=null;var a=arguments[0];this.origin=a}function ye(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function we(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new Ht,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof At&&typeof arguments[1]=="number"){var a=arguments[0],u=arguments[1];we.call(this,a.getCoordinates(),u)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var c=arguments[0],p=arguments[1];this.srcPts=c,this._isClosed=we.isClosed(c),this.snapTolerance=p}}function fe(){this.srcGeom=null;var a=arguments[0];this.srcGeom=a}function Ae(){if(ye.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,arguments.length===2){var a=arguments[0],u=arguments[1];this.snapTolerance=a,this.snapPts=u}else if(arguments.length===3){var c=arguments[0],p=arguments[1],v=arguments[2];this.snapTolerance=c,this.snapPts=p,this.isSelfSnap=v}}function be(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function Ue(){this.commonCoord=null,this.ccFilter=new Ye}function Ye(){this.commonBitsX=new be,this.commonBitsY=new be}function ot(){this.trans=null;var a=arguments[0];this.trans=a}function je(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var a=arguments[0];this.parent=a,this.atStart=!0,this.index=0,this.max=a.getNumGeometries()}function lt(){if(this.boundaryRule=qe.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,arguments.length!==0){if(arguments.length===1){var a=arguments[0];if(a===null)throw new d;this.boundaryRule=a}}}function Nt(){}function vt(){}function rt(){this.pts=null,this.data=null;var a=arguments[0],u=arguments[1];this.pts=a,this.data=u}function We(){}function at(){this.bounds=null,this.item=null;var a=arguments[0],u=arguments[1];this.bounds=a,this.item=u}function Rt(){this._size=null,this.items=null,this._size=0,this.items=new q,this.items.add(null)}function Pt(){}function hn(){}function xt(){if(this.childBoundables=new q,this.bounds=null,this.level=null,arguments.length!==0){if(arguments.length===1){var a=arguments[0];this.level=a}}}function it(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var a=arguments[0],u=arguments[1],c=arguments[2];this.boundable1=a,this.boundable2=u,this.itemDistance=c,this._distance=this.distance()}function Ze(){if(this.root=null,this.built=!1,this.itemBoundables=new q,this.nodeCapacity=null,arguments.length===0)Ze.call(this,Ze.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var a=arguments[0];$.isTrue(a>1,"Node capacity must be greater than 1"),this.nodeCapacity=a}}function Et(){}function Xt(){}function kt(){if(arguments.length===0)kt.call(this,kt.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var a=arguments[0];Ze.call(this,a)}}function Qt(){var a=arguments[0];xt.call(this,a)}function Gt(){}function sn(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var a=arguments[0],u=arguments[1],c=arguments[2],p=arguments[3];this.segString=a,this.coord=new C(u),this.segmentIndex=c,this.segmentOctant=p,this._isInterior=!u.equals2D(a.getCoordinate(c))}function Kn(){this.nodeMap=new nt,this.edge=null;var a=arguments[0];this.edge=a}function Nr(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var a=arguments[0];this.nodeList=a,this.edge=a.getEdge(),this.nodeIt=a.iterator(),this.readNextNode()}function Gn(){}function ar(){this.nodeList=new Kn(this),this.pts=null,this.data=null;var a=arguments[0],u=arguments[1];this.pts=a,this.data=u}function Jn(){this.tempEnv1=new Q,this.tempEnv2=new Q,this.overlapSeg1=new Ht,this.overlapSeg2=new Ht}function Ii(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var a=arguments[0],u=arguments[1],c=arguments[2],p=arguments[3];this.pts=a,this.start=u,this.end=c,this.context=p}function an(){}function pr(){}function zi(){}function ha(){if(this.segInt=null,arguments.length!==0){if(arguments.length===1){var a=arguments[0];this.setSegmentIntersector(a)}}}function Jr(){if(this.monoChains=new q,this.index=new kt,this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,arguments.length!==0){if(arguments.length===1){var a=arguments[0];ha.call(this,a)}}}function Vi(){Jn.apply(this),this.si=null;var a=arguments[0];this.si=a}function Qn(){if(this.pt=null,arguments.length===1){var a=arguments[0];w.call(this,a)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];w.call(this,Qn.msgWithCoord(u,c)),this.pt=new C(c)}}function Gi(){}function Yr(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new q,this.intersectionCount=0,this.keepIntersections=!0;var a=arguments[0];this.li=a,this.interiorIntersection=null}function qi(){this.li=new Cn,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var a=arguments[0];this.segStrings=a}function yi(){this.nv=null;var a=arguments[0];this.nv=new qi(yi.toSegmentStrings(a))}function Pi(){this.mapOp=null;var a=arguments[0];this.mapOp=a}function Je(){}function sr(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var a=arguments[0];this.init(a.length)}else if(Number.isInteger(arguments[0])){var u=arguments[0];this.init(1),this.location[Je.ON]=u}else if(arguments[0]instanceof sr){var c=arguments[0];if(this.init(c.location.length),c!==null)for(var p=0;p<this.location.length;p++)this.location[p]=c.location[p]}}else if(arguments.length===3){var v=arguments[0],S=arguments[1],N=arguments[2];this.init(3),this.location[Je.ON]=v,this.location[Je.LEFT]=S,this.location[Je.RIGHT]=N}}function Nn(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var a=arguments[0];this.elt[0]=new sr(a),this.elt[1]=new sr(a)}else if(arguments[0]instanceof Nn){var u=arguments[0];this.elt[0]=new sr(u.elt[0]),this.elt[1]=new sr(u.elt[1])}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];this.elt[0]=new sr(x.NONE),this.elt[1]=new sr(x.NONE),this.elt[c].setLocation(p)}else if(arguments.length===3){var v=arguments[0],S=arguments[1],N=arguments[2];this.elt[0]=new sr(v,S,N),this.elt[1]=new sr(v,S,N)}else if(arguments.length===4){var O=arguments[0],ae=arguments[1],ve=arguments[2],Pe=arguments[3];this.elt[0]=new sr(x.NONE,x.NONE,x.NONE),this.elt[1]=new sr(x.NONE,x.NONE,x.NONE),this.elt[O].setLocations(ae,ve,Pe)}}function Ai(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new q,this.pts=new q,this.label=new Nn(x.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new q,this.geometryFactory=null;var a=arguments[0],u=arguments[1];this.geometryFactory=u,this.computePoints(a),this.computeRing()}function ga(){var a=arguments[0],u=arguments[1];Ai.call(this,a,u)}function ji(){var a=arguments[0],u=arguments[1];Ai.call(this,a,u)}function si(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var a=arguments[0];this.label=a}}}function Mr(){si.apply(this),this.coord=null,this.edges=null;var a=arguments[0],u=arguments[1];this.coord=a,this.edges=u,this.label=new Nn(0,x.NONE)}function Ni(){this.nodeMap=new nt,this.nodeFact=null;var a=arguments[0];this.nodeFact=a}function Dr(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,arguments.length===1){var a=arguments[0];this.edge=a}else if(arguments.length===3){var u=arguments[0],c=arguments[1],p=arguments[2];Dr.call(this,u,c,p,null)}else if(arguments.length===4){var v=arguments[0],S=arguments[1],N=arguments[2],O=arguments[3];Dr.call(this,v),this.init(S,N),this.label=O}}function vi(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var a=arguments[0],u=arguments[1];if(Dr.call(this,a),this._isForward=u,u)this.init(a.getCoordinate(0),a.getCoordinate(1));else{var c=a.getNumPoints()-1;this.init(a.getCoordinate(c),a.getCoordinate(c-1))}this.computeDirectedLabel()}function bi(){}function mr(){if(this.edges=new q,this.nodes=null,this.edgeEndList=new q,arguments.length===0)this.nodes=new Ni(new bi);else if(arguments.length===1){var a=arguments[0];this.nodes=new Ni(a)}}function pa(){this.geometryFactory=null,this.shellList=new q;var a=arguments[0];this.geometryFactory=a}function oi(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new q,this.resultLineList=new q;var a=arguments[0],u=arguments[1],c=arguments[2];this.op=a,this.geometryFactory=u,this.ptLocator=c}function ma(){this.op=null,this.geometryFactory=null,this.resultPointList=new q;var a=arguments[0],u=arguments[1];this.op=a,this.geometryFactory=u}function br(){}function yr(){this.geom=null;var a=arguments[0];this.geom=a}function xi(){this.edgeMap=new nt,this.edgeList=null,this.ptInAreaLocation=[x.NONE,x.NONE]}function ya(){xi.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function Mi(){bi.apply(this)}function Ki(){this.mce=null,this.chainIndex=null;var a=arguments[0],u=arguments[1];this.mce=a,this.chainIndex=u}function Br(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,arguments.length===2){var a=arguments[0],u=arguments[1];this.eventType=Br.DELETE,this.xValue=a,this.insertEvent=u}else if(arguments.length===3){var c=arguments[0],p=arguments[1],v=arguments[2];this.eventType=Br.INSERT,this.label=c,this.xValue=p,this.obj=v}}function wi(){}function ui(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var a=arguments[0],u=arguments[1],c=arguments[2];this.li=a,this.includeProper=u,this.recordIsolated=c}function va(){wi.apply(this),this.events=new q,this.nOverlaps=null}function Hr(){this.min=h.POSITIVE_INFINITY,this.max=h.NEGATIVE_INFINITY}function ba(){}function Ji(){Hr.apply(this),this.item=null;var a=arguments[0],u=arguments[1],c=arguments[2];this.min=a,this.max=u,this.item=c}function xa(){Hr.apply(this),this.node1=null,this.node2=null;var a=arguments[0],u=arguments[1];this.node1=a,this.node2=u,this.buildExtent(this.node1,this.node2)}function Ta(){this.leaves=new q,this.root=null,this.level=0}function Hn(){if(this.lines=null,this.isForcedToLineString=!1,arguments.length===1){var a=arguments[0];this.lines=a}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.lines=u,this.isForcedToLineString=c}}function Ur(){this.items=new q}function Yi(){this.index=null;var a=arguments[0];if(!I(a,Bn))throw new d;this.index=new _i(a)}function Xi(){this.counter=null;var a=arguments[0];this.counter=a}function _i(){this.index=new Ta;var a=arguments[0];this.init(a)}function Oa(){this.coord=null,this.segmentIndex=null,this.dist=null;var a=arguments[0],u=arguments[1],c=arguments[2];this.coord=new C(a),this.segmentIndex=u,this.dist=c}function li(){this.nodeMap=new nt,this.edge=null;var a=arguments[0];this.edge=a}function Wr(){}function er(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Q,this.env2=new Q;var a=arguments[0];this.e=a,this.pts=a.getCoordinates();var u=new Wr;this.startIndex=u.getChainStartIndices(this.pts)}function Yn(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var a=0;2>a;a++)for(var u=0;3>u;u++)this.depth[a][u]=Yn.NULL_VALUE}function fr(){if(si.apply(this),this.pts=null,this.env=null,this.eiList=new li(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new Yn,this.depthDelta=0,arguments.length===1){var a=arguments[0];fr.call(this,a,null)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.pts=u,this.label=c}}function tr(){if(mr.apply(this),this.parentGeom=null,this.lineEdgeMap=new $n,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new lt,arguments.length===2){var a=arguments[0],u=arguments[1];tr.call(this,a,u,qe.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var c=arguments[0],p=arguments[1],v=arguments[2];this.argIndex=c,this.parentGeom=p,this.boundaryNodeRule=v,p!==null&&this.add(p)}}function di(){if(this.li=new Cn,this.resultPrecisionModel=null,this.arg=null,arguments.length===1){var a=arguments[0];this.setComputationPrecision(a.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new tr(0,a)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];di.call(this,u,c,qe.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var p=arguments[0],v=arguments[1],S=arguments[2];p.getPrecisionModel().compareTo(v.getPrecisionModel())>=0?this.setComputationPrecision(p.getPrecisionModel()):this.setComputationPrecision(v.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new tr(0,p,S),this.arg[1]=new tr(1,v,S)}}function Tr(){this.pts=null,this._orientation=null;var a=arguments[0];this.pts=a,this._orientation=Tr.orientation(a)}function Si(){this.edges=new q,this.ocaMap=new nt}function yt(){this.ptLocator=new lt,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new Si,this.resultPolyList=new q,this.resultLineList=new q,this.resultPointList=new q;var a=arguments[0],u=arguments[1];di.call(this,a,u),this.graph=new mr(new Mi),this.geomFact=a.getFactory()}function Xn(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var a=arguments[0],u=arguments[1];this.geom[0]=a,this.geom[1]=u,this.computeSnapTolerance()}function Ln(){this.geom=new Array(2).fill(null);var a=arguments[0],u=arguments[1];this.geom[0]=a,this.geom[1]=u}function hr(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var a=arguments[0];this.factory=a.getFactory(),this.add(a)}function Xr(){this.poly=null,this.centreY=null,this.hiY=h.MAX_VALUE,this.loY=-h.MAX_VALUE;var a=arguments[0];this.poly=a,this.hiY=a.getEnvelopeInternal().getMaxY(),this.loY=a.getEnvelopeInternal().getMinY(),this.centreY=hr.avg(this.loY,this.hiY)}function Zi(){this.centroid=null,this.minDistance=h.MAX_VALUE,this.interiorPoint=null;var a=arguments[0];this.centroid=a.getCentroid().getCoordinate(),this.addInterior(a),this.interiorPoint===null&&this.addEndpoints(a)}function Qi(){this.centroid=null,this.minDistance=h.MAX_VALUE,this.interiorPoint=null;var a=arguments[0];this.centroid=a.getCentroid().getCoordinate(),this.add(a)}function Jt(){}function wn(){this.p0=null,this.p1=null,this.p2=null;var a=arguments[0],u=arguments[1],c=arguments[2];this.p0=a,this.p1=u,this.p2=c}function or(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var a=arguments[0];this.input=a}function qn(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new Ht,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,arguments.length===1){var a=arguments[0];qn.call(this,a,!1)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.inputGeom=u,this.isConvex=c}}function ci(){this.inputGeom=null,this.distanceTolerance=null;var a=arguments[0];this.inputGeom=a}function Di(){ye.apply(this),this.distanceTolerance=null;var a=arguments[0];this.distanceTolerance=a}function Cr(){this._orig=null,this._sym=null,this._next=null;var a=arguments[0];this._orig=a}function ur(){this._isMarked=!1;var a=arguments[0];Cr.call(this,a)}function Ei(){this.vertexMap=new $n}function ea(){this._isStart=!1;var a=arguments[0];ur.call(this,a)}function T(){Ei.apply(this)}function ue(){this.result=null,this.factory=null,this.graph=null,this.lines=new q,this.nodeEdgeStack=new Mn,this.ringStartEdge=null,this.graph=new T}function xe(){this.items=new q,this.subnode=new Array(4).fill(null)}function Le(){}function gt(a,u){var c,p,v,S,N={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},O={32:8,64:11}[a];if(S||(c=0>u||0>1/u,isFinite(u)||(S=N[a],c&&(S.d+=1<<a/4-1),p=Math.pow(2,O)-1,v=0)),!S){for(p={32:127,64:1023}[a],v=Math.abs(u);v>=2;)p++,v/=2;for(;1>v&&p>0;)p--,v*=2;0>=p&&(v/=2),a===32&&p>254&&(S={d:c?255:127,c:128,b:0,a:0},p=Math.pow(2,O)-1,v=0)}return p}function et(){this.pt=new C,this.level=0,this.env=null;var a=arguments[0];this.computeKey(a)}function wt(){xe.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var a=arguments[0],u=arguments[1];this.env=a,this.level=u,this.centrex=(a.getMinX()+a.getMaxX())/2,this.centrey=(a.getMinY()+a.getMaxY())/2}function $t(){}function en(){xe.apply(this)}function mn(){this.root=null,this.minExtent=1,this.root=new en}function _n(a){this.geometryFactory=a||new Dt}function On(a){this.geometryFactory=a||new Dt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new _n(this.geometryFactory)}function kn(){this.parser=new _n(this.geometryFactory)}function nr(a){this.geometryFactory=a||new Dt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Sr(this.geometryFactory)}function Un(a){return[a.x,a.y]}function Zr(a){this.geometryFactory=a||new Dt}function xr(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,arguments.length===2){var a=arguments[0],u=arguments[1];xr.call(this,a,u,0,0)}else if(arguments.length===4){var c=arguments[0],p=arguments[1];this.noder=c,this.scaleFactor=p,this.isScaled=!this.isIntegerPrecision()}}function Rr(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,arguments.length===1){var a=arguments[0];this.inputGeom=a}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.inputGeom=u,this.isClosedEndpointsInInterior=!c.isInBoundary(2)}}function ta(){this.pt=null,this.isClosed=null,this.degree=null;var a=arguments[0];this.pt=a,this.isClosed=!1,this.degree=0}function on(){if(this.quadrantSegments=on.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=on.CAP_ROUND,this.joinStyle=on.JOIN_ROUND,this.mitreLimit=on.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=on.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var a=arguments[0];this.setQuadrantSegments(a)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.setQuadrantSegments(u),this.setEndCapStyle(c)}else if(arguments.length===4){var p=arguments[0],v=arguments[1],S=arguments[2],N=arguments[3];this.setQuadrantSegments(p),this.setEndCapStyle(v),this.setJoinStyle(S),this.setMitreLimit(N)}}}function Ti(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function os(){this.array_=[]}function Ws(){this.finder=null,this.dirEdgeList=new q,this.nodes=new q,this.rightMostCoord=null,this.env=null,this.finder=new Ti}function rr(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=Ge.COUNTERCLOCKWISE;var a=arguments[0];this.inputLine=a}function Ra(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new q}function Qr(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new Ht,this.seg1=new Ht,this.offset0=new Ht,this.offset1=new Ht,this.side=0,this._hasNarrowConcaveAngle=!1;var a=arguments[0],u=arguments[1],c=arguments[2];this.precisionModel=a,this.bufParams=u,this.li=new Cn,this.filletAngleQuantum=Math.PI/2/u.getQuadrantSegments(),u.getQuadrantSegments()>=8&&u.getJoinStyle()===on.JOIN_ROUND&&(this.closingSegLengthFactor=Qr.MAX_CLOSING_SEG_LEN_FACTOR),this.init(c)}function La(){this.distance=0,this.precisionModel=null,this.bufParams=null;var a=arguments[0],u=arguments[1];this.precisionModel=a,this.bufParams=u}function us(){this.subgraphs=null,this.seg=new Ht,this.cga=new Ge;var a=arguments[0];this.subgraphs=a}function ls(){this.upwardSeg=null,this.leftDepth=null;var a=arguments[0],u=arguments[1];this.upwardSeg=new Ht(a),this.leftDepth=u}function zs(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new q;var a=arguments[0],u=arguments[1],c=arguments[2];this.inputGeom=a,this.distance=u,this.curveBuilder=c}function ka(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var a=arguments[0];this.li=a}function Oi(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new Si;var a=arguments[0];this.bufParams=a}function Fa(){this.li=new Cn,this.segStrings=null;var a=arguments[0];this.segStrings=a}function wa(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var a=arguments[0],u=arguments[1],c=arguments[2];if(this.originalPt=a,this.pt=a,this.scaleFactor=u,this.li=c,0>=u)throw new d;u!==1&&(this.pt=new C(this.scale(a.x),this.scale(a.y)),this.p0Scaled=new C,this.p1Scaled=new C),this.initCorners(this.pt)}function Ri(){this.tempEnv1=new Q,this.selectedSegment=new Ht}function ds(){this.index=null;var a=arguments[0];this.index=a}function Ba(){Ri.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var a=arguments[0],u=arguments[1],c=arguments[2];this.hotPixel=a,this.parentEdge=u,this.hotPixelVertexIndex=c}function Vs(){this.li=null,this.interiorIntersections=null;var a=arguments[0];this.li=a,this.interiorIntersections=new q}function Gs(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var a=arguments[0];this.pm=a,this.li=new Cn,this.li.setPrecisionModel(a),this.scaleFactor=a.getScale()}function ir(){if(this.argGeom=null,this.distance=null,this.bufParams=new on,this.resultGeometry=null,this.saveException=null,arguments.length===1){var a=arguments[0];this.argGeom=a}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.argGeom=u,this.bufParams=c}}function na(){this.comps=null;var a=arguments[0];this.comps=a}function wr(){if(this.component=null,this.segIndex=null,this.pt=null,arguments.length===2){var a=arguments[0],u=arguments[1];wr.call(this,a,wr.INSIDE_AREA,u)}else if(arguments.length===3){var c=arguments[0],p=arguments[1],v=arguments[2];this.component=c,this.segIndex=p,this.pt=v}}function ra(){this.pts=null;var a=arguments[0];this.pts=a}function Ha(){this.locations=null;var a=arguments[0];this.locations=a}function zr(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new lt,this.minDistanceLocation=null,this.minDistance=h.MAX_VALUE,arguments.length===2){var a=arguments[0],u=arguments[1];zr.call(this,a,u,0)}else if(arguments.length===3){var c=arguments[0],p=arguments[1],v=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=c,this.geom[1]=p,this.terminateDistance=v}}function qs(){this.factory=null,this.directedEdges=new q,this.coordinates=null;var a=arguments[0];this.factory=a}function Lr(){this._isMarked=!1,this._isVisited=!1,this.data=null}function $r(){Lr.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var a=arguments[0],u=arguments[1],c=arguments[2],p=arguments[3];this.from=a,this.to=u,this.edgeDirection=p,this.p0=a.getCoordinate(),this.p1=c;var v=this.p1.x-this.p0.x,S=this.p1.y-this.p0.y;this.quadrant=an.quadrant(v,S),this.angle=Math.atan2(S,v)}function Ua(){var a=arguments[0],u=arguments[1],c=arguments[2],p=arguments[3];$r.call(this,a,u,c,p)}function ei(){if(Lr.apply(this),this.dirEdge=null,arguments.length!==0){if(arguments.length===2){var a=arguments[0],u=arguments[1];this.setDirectedEdges(a,u)}}}function js(){this.outEdges=new q,this.sorted=!1}function fi(){if(Lr.apply(this),this.pt=null,this.deStar=null,arguments.length===1){var a=arguments[0];fi.call(this,a,new js)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.pt=u,this.deStar=c}}function cs(){ei.apply(this),this.line=null;var a=arguments[0];this.line=a}function Ks(){this.nodeMap=new nt}function _a(){this.edges=new H,this.dirEdges=new H,this.nodeMap=new Ks}function fs(){_a.apply(this)}function Js(){this.graph=new fs,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function Wa(){this.edgeRing=null,this.next=null,this.label=-1;var a=arguments[0],u=arguments[1],c=arguments[2],p=arguments[3];$r.call(this,a,u,c,p)}function hs(){ei.apply(this),this.line=null;var a=arguments[0];this.line=a}function Vr(){this.factory=null,this.deList=new q,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var a=arguments[0];this.factory=a}function Ys(){}function zn(){_a.apply(this),this.factory=null;var a=arguments[0];this.factory=a}function _r(){if(this.lineStringAdder=new gs(this),this.graph=null,this.dangles=new q,this.cutEdges=new q,this.invalidRingLines=new q,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,arguments.length===0)_r.call(this,!1);else if(arguments.length===1){var a=arguments[0];this.extractOnlyPolygonal=a}}function gs(){this.p=null;var a=arguments[0];this.p=a}function ps(){}function za(){if(this.edgeEnds=new q,arguments.length===1){var a=arguments[0];za.call(this,null,a)}else if(arguments.length===2){var u=arguments[1];Dr.call(this,u.getEdge(),u.getCoordinate(),u.getDirectedCoordinate(),new Nn(u.getLabel())),this.insert(u)}}function ms(){xi.apply(this)}function ys(){var a=arguments[0],u=arguments[1];Mr.call(this,a,u)}function Va(){bi.apply(this)}function vs(){this.li=new Cn,this.ptLocator=new lt,this.arg=null,this.nodes=new Ni(new Va),this.im=null,this.isolatedEdges=new q,this.invalidPoint=null;var a=arguments[0];this.arg=a}function Ga(){this.rectEnv=null;var a=arguments[0];this.rectEnv=a.getEnvelopeInternal()}function Xs(){this.li=new Cn,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var a=arguments[0];this.rectEnv=a,this.diagUp0=new C(a.getMinX(),a.getMinY()),this.diagUp1=new C(a.getMaxX(),a.getMaxY()),this.diagDown0=new C(a.getMinX(),a.getMaxY()),this.diagDown1=new C(a.getMaxX(),a.getMinY())}function Li(){this._isDone=!1}function Sa(){this.rectangle=null,this.rectEnv=null;var a=arguments[0];this.rectangle=a,this.rectEnv=a.getEnvelopeInternal()}function bs(){Li.apply(this),this.rectEnv=null,this._intersects=!1;var a=arguments[0];this.rectEnv=a}function xs(){Li.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var a=arguments[0];this.rectSeq=a.getExteriorRing().getCoordinateSequence(),this.rectEnv=a.getEnvelopeInternal()}function ws(){Li.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new C,this.p1=new C;var a=arguments[0];this.rectEnv=a.getEnvelopeInternal(),this.rectIntersector=new Xs(this.rectEnv)}function pn(){if(this._relate=null,arguments.length===2){var a=arguments[0],u=arguments[1];di.call(this,a,u),this._relate=new vs(this.arg)}else if(arguments.length===3){var c=arguments[0],p=arguments[1],v=arguments[2];di.call(this,c,p,v),this._relate=new vs(this.arg)}}function Ir(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var a=arguments[0];this.geomFactory=Ir.extractFactory(a),this.inputGeoms=a}function qa(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var a=arguments[0],u=arguments[1];this.pointGeom=a,this.otherGeom=u,this.geomFact=u.getFactory()}function ki(){this.sortIndex=-1,this.comps=null;var a=arguments[0],u=arguments[1];this.sortIndex=a,this.comps=u}function kr(){this.inputPolys=null,this.geomFactory=null;var a=arguments[0];this.inputPolys=a,this.inputPolys===null&&(this.inputPolys=new q)}function Fi(){if(this.polygons=new q,this.lines=new q,this.points=new q,this.geomFact=null,arguments.length===1){if(I(arguments[0],Y)){var a=arguments[0];this.extract(a)}else if(arguments[0]instanceof Ee){var u=arguments[0];this.extract(u)}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];this.geomFact=p,this.extract(c)}}function ja(){this.geometryFactory=new Dt,this.geomGraph=null,this.disconnectedRingcoord=null;var a=arguments[0];this.geomGraph=a}function ti(){this.items=new q,this.subnode=[null,null]}function hi(){if(this.min=null,this.max=null,arguments.length===0)this.min=0,this.max=0;else if(arguments.length===1){var a=arguments[0];this.init(a.min,a.max)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.init(u,c)}}function Ka(){this.pt=0,this.level=0,this.interval=null;var a=arguments[0];this.computeKey(a)}function Ci(){ti.apply(this),this.interval=null,this.centre=null,this.level=null;var a=arguments[0],u=arguments[1];this.interval=a,this.level=u,this.centre=(a.getMin()+a.getMax())/2}function Ea(){ti.apply(this)}function Ca(){this.root=null,this.minExtent=1,this.root=new Ea}function Zs(){}function _s(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new hi;var a=arguments[0];this.ring=a,this.buildIndex()}function Ja(){Ri.apply(this),this.mcp=null,this.p=null;var a=arguments[0],u=arguments[1];this.mcp=a,this.p=u}function Qs(){this.nodes=new Ni(new Va)}function eo(){this.li=new Cn,this.geomGraph=null,this.nodeGraph=new Qs,this.invalidPoint=null;var a=arguments[0];this.geomGraph=a}function no(){this.graph=null,this.rings=new q,this.totalEnv=new Q,this.index=null,this.nestedPt=null;var a=arguments[0];this.graph=a}function gn(){if(this.errorType=null,this.pt=null,arguments.length===1){var a=arguments[0];gn.call(this,a,null)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.errorType=u,c!==null&&(this.pt=c.copy())}}function Fr(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var a=arguments[0];this.parentGeometry=a}function Ss(){re.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var a=arguments[0],u=arguments[1];this.targetPM=a,this.removeCollapsed=u}function ia(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var a=arguments[0];this.targetPM=a}function Ya(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new Ht;var a=arguments[0];this.pts=a}function $a(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var a=arguments[0];this.inputGeom=a}function Xa(){ye.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var a=arguments[0],u=arguments[1];this.isEnsureValidTopology=a,this.distanceTolerance=u}function Za(){if(this.parent=null,this.index=null,arguments.length===2){var a=arguments[0],u=arguments[1];Za.call(this,a,u,null,-1)}else if(arguments.length===4){var c=arguments[0],p=arguments[1],v=arguments[2],S=arguments[3];Ht.call(this,c,p),this.parent=v,this.index=S}}function $i(){if(this.parentLine=null,this.segs=null,this.resultSegs=new q,this.minimumSize=null,arguments.length===1){var a=arguments[0];$i.call(this,a,2)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.parentLine=u,this.minimumSize=c,this.init()}}function Ia(){this.index=new mn}function ro(){this.querySeg=null,this.items=new q;var a=arguments[0];this.querySeg=a}function Qa(){this.li=new Cn,this.inputIndex=new Ia,this.outputIndex=new Ia,this.line=null,this.linePts=null,this.distanceTolerance=0;var a=arguments[0],u=arguments[1];this.inputIndex=a,this.outputIndex=u}function io(){this.inputIndex=new Ia,this.outputIndex=new Ia,this.distanceTolerance=0}function aa(){this.inputGeom=null,this.lineSimplifier=new io,this.linestringMap=null;var a=arguments[0];this.inputGeom=a}function es(){ye.apply(this),this.linestringMap=null;var a=arguments[0];this.linestringMap=a}function Es(){this.tps=null;var a=arguments[0];this.tps=a}function Pa(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var a=arguments[0];this.seg=a,this.segLen=a.getLength()}function ao(){}function ts(){}function An(){}function Sn(){if(this.p=null,arguments.length===1){var a=arguments[0];this.p=new C(a)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.p=new C(u,c)}else if(arguments.length===3){var p=arguments[0],v=arguments[1],S=arguments[2];this.p=new C(p,v,S)}}function Bi(){this._isOnConstraint=null,this.constraint=null;var a=arguments[0];Sn.call(this,a)}function Dn(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function ns(){this.subdiv=null,this.isUsingTolerance=!1;var a=arguments[0];this.subdiv=a,this.isUsingTolerance=a.getTolerance()>0}function so(){}function Cs(){this.subdiv=null,this.lastEdge=null;var a=arguments[0];this.subdiv=a,this.init()}function Aa(){if(this.seg=null,arguments.length===1){if(typeof arguments[0]=="string"){var a=arguments[0];w.call(this,a)}else if(arguments[0]instanceof Ht){var u=arguments[0];w.call(this,"Locate failed to converge (at edge: "+u+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new Ht(u)}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];w.call(this,Aa.msgWithSpatial(c,p)),this.seg=new Ht(p)}}function Na(){}function Pr(){this.visitedKey=0,this.quadEdges=new q,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new Ht,this.triEdges=new Array(3).fill(null);var a=arguments[0],u=arguments[1];this.tolerance=u,this.edgeCoincidenceTolerance=u/Pr.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(a),this.startingEdge=this.initSubdiv(),this.locator=new Cs(this)}function $s(){}function Is(){this.triList=new q}function Ps(){this.triList=new q}function As(){this.coordList=new te,this.triCoords=new q}function sa(){if(this.ls=null,this.data=null,arguments.length===2){var a=arguments[0],u=arguments[1];this.ls=new Ht(a,u)}else if(arguments.length===3){var c=arguments[0],p=arguments[1],v=arguments[2];this.ls=new Ht(c,p),this.data=v}else if(arguments.length===6){var S=arguments[0],N=arguments[1],O=arguments[2],ae=arguments[3],ve=arguments[4],Pe=arguments[5];sa.call(this,new C(S,N,O),new C(ae,ve,Pe))}else if(arguments.length===7){var Te=arguments[0],ze=arguments[1],mt=arguments[2],Ft=arguments[3],jt=arguments[4],In=arguments[5],Fn=arguments[6];sa.call(this,new C(Te,ze,mt),new C(Ft,jt,In),Fn)}}function rs(){}function Ns(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,arguments.length===2){var a=arguments[0],u=arguments[1];this.p=new C(a),this.left=null,this.right=null,this.count=1,this.data=u}else if(arguments.length===3){var c=arguments[0],p=arguments[1],v=arguments[2];this.p=new C(c,p),this.left=null,this.right=null,this.count=1,this.data=v}}function oa(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,arguments.length===0)oa.call(this,0);else if(arguments.length===1){var a=arguments[0];this.tolerance=a}}function Ms(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var a=arguments[0],u=arguments[1];this.p=a,this.tolerance=u}function Hi(){this.initialVertices=null,this.segVertices=null,this.segments=new q,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new ts,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var a=arguments[0],u=arguments[1];this.initialVertices=new q(a),this.tolerance=u,this.kdt=new oa(u)}function lr(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function Ma(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new nt}function is(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function Ds(){}Array.prototype.fill||(Array.prototype.fill=function(a){for(var u=Object(this),c=parseInt(u.length,10),p=arguments[1],v=parseInt(p,10)||0,S=0>v?Math.max(c+v,0):Math.min(v,c),N=arguments[2],O=N===void 0?c:parseInt(N,10)||0,ae=0>O?Math.max(c+O,0):Math.min(O,c);ae>S;S++)u[S]=a;return u}),Number.isFinite=Number.isFinite||function(a){return typeof a=="number"&&isFinite(a)},Number.isInteger=Number.isInteger||function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(a){return a!==a},Math.trunc=Math.trunc||function(a){return 0>a?Math.ceil(a):Math.floor(a)},o(l.prototype,{interfaces_:function(){return[]},getClass:function(){return l}}),l.equalsWithTolerance=function(a,u,c){return Math.abs(a-u)<=c},h.isNaN=function(a){return Number.isNaN(a)},h.doubleToLongBits=function(a){return a},h.longBitsToDouble=function(a){return a},h.isInfinite=function(a){return!Number.isFinite(a)},h.MAX_VALUE=Number.MAX_VALUE,E(P,w),o(P.prototype,{interfaces_:function(){return[]},getClass:function(){return P}}),o($.prototype,{interfaces_:function(){return[]},getClass:function(){return $}}),$.shouldNeverReachHere=function(){if(arguments.length===0)$.shouldNeverReachHere(null);else if(arguments.length===1){var a=arguments[0];throw new P("Should never reach here"+(a!==null?": "+a:""))}},$.isTrue=function(){if(arguments.length===1){var a=arguments[0];$.isTrue(a,null)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];if(!u)throw c===null?new P:new P(c)}},$.equals=function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];$.equals(a,u,null)}else if(arguments.length===3){var c=arguments[0],p=arguments[1],v=arguments[2];if(!p.equals(c))throw new P("Expected "+c+" but encountered "+p+(v!==null?": "+v:""))}},o(C.prototype,{setOrdinate:function(a,u){switch(a){case C.X:this.x=u;break;case C.Y:this.y=u;break;case C.Z:this.z=u;break;default:throw new d}},equals2D:function(){if(arguments.length===1){var a=arguments[0];return this.x!==a.x?!1:this.y===a.y}if(arguments.length===2){var u=arguments[0],c=arguments[1];return l.equalsWithTolerance(this.x,u.x,c)?!!l.equalsWithTolerance(this.y,u.y,c):!1}},getOrdinate:function(a){switch(a){case C.X:return this.x;case C.Y:return this.y;case C.Z:return this.z}throw new d},equals3D:function(a){return this.x===a.x&&this.y===a.y&&(this.z===a.z||h.isNaN(this.z)&&h.isNaN(a.z))},equals:function(a){return a instanceof C?this.equals2D(a):!1},equalInZ:function(a,u){return l.equalsWithTolerance(this.z,a.z,u)},compareTo:function(a){var u=a;return this.x<u.x?-1:this.x>u.x?1:this.y<u.y?-1:this.y>u.y?1:0},clone:function(){try{var a=null;return a}catch(u){if(u instanceof CloneNotSupportedException)return $.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw u}finally{}},copy:function(){return new C(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(a){var u=this.x-a.x,c=this.y-a.y,p=this.z-a.z;return Math.sqrt(u*u+c*c+p*p)},distance:function(a){var u=this.x-a.x,c=this.y-a.y;return Math.sqrt(u*u+c*c)},hashCode:function(){var a=17;return a=37*a+C.hashCode(this.x),a=37*a+C.hashCode(this.y)},setCoordinate:function(a){this.x=a.x,this.y=a.y,this.z=a.z},interfaces_:function(){return[g,m,b]},getClass:function(){return C}}),C.hashCode=function(){if(arguments.length===1){var a=arguments[0],u=h.doubleToLongBits(a);return Math.trunc(u^u>>>32)}},o(L.prototype,{compare:function(a,u){var c=a,p=u,v=L.compare(c.x,p.x);if(v!==0)return v;var S=L.compare(c.y,p.y);if(S!==0)return S;if(this.dimensionsToTest<=2)return 0;var N=L.compare(c.z,p.z);return N},interfaces_:function(){return[y]},getClass:function(){return L}}),L.compare=function(a,u){return u>a?-1:a>u?1:h.isNaN(a)?h.isNaN(u)?0:-1:h.isNaN(u)?1:0},C.DimensionalComparator=L,C.serialVersionUID=6683108902428367e3,C.NULL_ORDINATE=h.NaN,C.X=0,C.Y=1,C.Z=2,W.prototype.hasNext=function(){},W.prototype.next=function(){},W.prototype.remove=function(){},Y.prototype.add=function(){},Y.prototype.addAll=function(){},Y.prototype.isEmpty=function(){},Y.prototype.iterator=function(){},Y.prototype.size=function(){},Y.prototype.toArray=function(){},Y.prototype.remove=function(){},D.prototype=new Error,D.prototype.name="IndexOutOfBoundsException",k.prototype=Object.create(Y.prototype),k.prototype.constructor=k,k.prototype.get=function(){},k.prototype.set=function(){},k.prototype.isEmpty=function(){},F.prototype=new Error,F.prototype.name="NoSuchElementException",ce.prototype=new Error,ce.prototype.name="OperationNotSupported",q.prototype=Object.create(k.prototype),q.prototype.constructor=q,q.prototype.ensureCapacity=function(){},q.prototype.interfaces_=function(){return[k,Y]},q.prototype.add=function(a){return this.array_.push(a),!0},q.prototype.clear=function(){this.array_=[]},q.prototype.addAll=function(a){for(var u=a.iterator();u.hasNext();)this.add(u.next());return!0},q.prototype.set=function(a,u){var c=this.array_[a];return this.array_[a]=u,c},q.prototype.iterator=function(){return new as(this)},q.prototype.get=function(a){if(0>a||a>=this.size())throw new D;return this.array_[a]},q.prototype.isEmpty=function(){return this.array_.length===0},q.prototype.size=function(){return this.array_.length},q.prototype.toArray=function(){for(var a=[],u=0,c=this.array_.length;c>u;u++)a.push(this.array_[u]);return a},q.prototype.remove=function(a){for(var u=!1,c=0,p=this.array_.length;p>c;c++)if(this.array_[c]===a){this.array_.splice(c,1),u=!0;break}return u};var as=function(a){this.arrayList_=a,this.position_=0};as.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new F;return this.arrayList_.get(this.position_++)},as.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},as.prototype.set=function(a){return this.arrayList_.set(this.position_-1,a)},as.prototype.remove=function(){throw new ce},E(te,q),o(te.prototype,{getCoordinate:function(a){return this.get(a)},addAll:function(){if(arguments.length===2){for(var a=arguments[0],u=arguments[1],c=!1,p=a.iterator();p.hasNext();)this.add(p.next(),u),c=!0;return c}return q.prototype.addAll.apply(this,arguments)},clone:function(){for(var u=q.prototype.clone.call(this),c=0;c<this.size();c++)u.add(c,this.get(c).copy());return u},toCoordinateArray:function(){return this.toArray(te.coordArrayType)},add:function(){if(arguments.length===1){var a=arguments[0];q.prototype.add.call(this,a)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var u=arguments[0],c=arguments[1];return this.add(u,c,!0),!0}if(arguments[0]instanceof C&&typeof arguments[1]=="boolean"){var p=arguments[0],v=arguments[1];if(!v&&this.size()>=1){var S=this.get(this.size()-1);if(S.equals2D(p))return null}q.prototype.add.call(this,p)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var N=arguments[0],O=arguments[1];return this.add(N,O),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var ae=arguments[0],ve=arguments[1],Pe=arguments[2];if(Pe)for(var Te=0;Te<ae.length;Te++)this.add(ae[Te],ve);else for(var Te=ae.length-1;Te>=0;Te--)this.add(ae[Te],ve);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof C){var ze=arguments[0],mt=arguments[1],Ft=arguments[2];if(!Ft){var jt=this.size();if(jt>0){if(ze>0){var In=this.get(ze-1);if(In.equals2D(mt))return null}if(jt>ze){var Fn=this.get(ze);if(Fn.equals2D(mt))return null}}}q.prototype.add.call(this,ze,mt)}}else if(arguments.length===4){var jr=arguments[0],ua=arguments[1],Rs=arguments[2],Ls=arguments[3],ks=1;Rs>Ls&&(ks=-1);for(var Te=Rs;Te!==Ls;Te+=ks)this.add(jr[Te],ua);return!0}},closeRing:function(){this.size()>0&&this.add(new C(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return te}}),te.coordArrayType=new Array(0).fill(null),o(Q.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(a){if(!(a instanceof Q))return!1;var u=a;return this.isNull()?u.isNull():this.maxx===u.getMaxX()&&this.maxy===u.getMaxY()&&this.minx===u.getMinX()&&this.miny===u.getMinY()},intersection:function(a){if(this.isNull()||a.isNull()||!this.intersects(a))return new Q;var u=this.minx>a.minx?this.minx:a.minx,c=this.miny>a.miny?this.miny:a.miny,p=this.maxx<a.maxx?this.maxx:a.maxx,v=this.maxy<a.maxy?this.maxy:a.maxy;return new Q(u,p,c,v)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(arguments.length===1){if(arguments[0]instanceof C){var a=arguments[0];return this.covers(a.x,a.y)}if(arguments[0]instanceof Q){var u=arguments[0];return this.isNull()||u.isNull()?!1:u.getMinX()>=this.minx&&u.getMaxX()<=this.maxx&&u.getMinY()>=this.miny&&u.getMaxY()<=this.maxy}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];return this.isNull()?!1:c>=this.minx&&c<=this.maxx&&p>=this.miny&&p<=this.maxy}},intersects:function(){if(arguments.length===1){if(arguments[0]instanceof Q){var a=arguments[0];return this.isNull()||a.isNull()?!1:!(a.minx>this.maxx||a.maxx<this.minx||a.miny>this.maxy||a.maxy<this.miny)}if(arguments[0]instanceof C){var u=arguments[0];return this.intersects(u.x,u.y)}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];return this.isNull()?!1:!(c>this.maxx||c<this.minx||p>this.maxy||p<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(arguments.length===1){if(arguments[0]instanceof C){var a=arguments[0];this.expandToInclude(a.x,a.y)}else if(arguments[0]instanceof Q){var u=arguments[0];if(u.isNull())return null;this.isNull()?(this.minx=u.getMinX(),this.maxx=u.getMaxX(),this.miny=u.getMinY(),this.maxy=u.getMaxY()):(u.minx<this.minx&&(this.minx=u.minx),u.maxx>this.maxx&&(this.maxx=u.maxx),u.miny<this.miny&&(this.miny=u.miny),u.maxy>this.maxy&&(this.maxy=u.maxy))}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];this.isNull()?(this.minx=c,this.maxx=c,this.miny=p,this.maxy=p):(c<this.minx&&(this.minx=c),c>this.maxx&&(this.maxx=c),p<this.miny&&(this.miny=p),p>this.maxy&&(this.maxy=p))}},minExtent:function(){if(this.isNull())return 0;var a=this.getWidth(),u=this.getHeight();return u>a?a:u},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(a){var u=a;return this.isNull()?u.isNull()?0:-1:u.isNull()?1:this.minx<u.minx?-1:this.minx>u.minx?1:this.miny<u.miny?-1:this.miny>u.miny?1:this.maxx<u.maxx?-1:this.maxx>u.maxx?1:this.maxy<u.maxy?-1:this.maxy>u.maxy?1:0},translate:function(a,u){return this.isNull()?null:void this.init(this.getMinX()+a,this.getMaxX()+a,this.getMinY()+u,this.getMaxY()+u)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var a=this.getWidth(),u=this.getHeight();return a>u?a:u},expandBy:function(){if(arguments.length===1){var a=arguments[0];this.expandBy(a,a)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];if(this.isNull())return null;this.minx-=u,this.maxx+=u,this.miny-=c,this.maxy+=c,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(arguments.length===1){if(arguments[0]instanceof Q){var a=arguments[0];return this.covers(a)}if(arguments[0]instanceof C){var u=arguments[0];return this.covers(u)}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];return this.covers(c,p)}},centre:function(){return this.isNull()?null:new C((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof C){var a=arguments[0];this.init(a.x,a.x,a.y,a.y)}else if(arguments[0]instanceof Q){var u=arguments[0];this.minx=u.minx,this.maxx=u.maxx,this.miny=u.miny,this.maxy=u.maxy}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];this.init(c.x,p.x,c.y,p.y)}else if(arguments.length===4){var v=arguments[0],S=arguments[1],N=arguments[2],O=arguments[3];S>v?(this.minx=v,this.maxx=S):(this.minx=S,this.maxx=v),O>N?(this.miny=N,this.maxy=O):(this.miny=O,this.maxy=N)}},getMaxY:function(){return this.maxy},distance:function(a){if(this.intersects(a))return 0;var u=0;this.maxx<a.minx?u=a.minx-this.maxx:this.minx>a.maxx&&(u=this.minx-a.maxx);var c=0;return this.maxy<a.miny?c=a.miny-this.maxy:this.miny>a.maxy&&(c=this.miny-a.maxy),u===0?c:c===0?u:Math.sqrt(u*u+c*c)},hashCode:function(){var a=17;return a=37*a+C.hashCode(this.minx),a=37*a+C.hashCode(this.maxx),a=37*a+C.hashCode(this.miny),a=37*a+C.hashCode(this.maxy)},interfaces_:function(){return[g,b]},getClass:function(){return Q}}),Q.intersects=function(){if(arguments.length===3){var a=arguments[0],u=arguments[1],c=arguments[2];return c.x>=(a.x<u.x?a.x:u.x)&&c.x<=(a.x>u.x?a.x:u.x)&&c.y>=(a.y<u.y?a.y:u.y)&&c.y<=(a.y>u.y?a.y:u.y)}if(arguments.length===4){var p=arguments[0],v=arguments[1],S=arguments[2],N=arguments[3],O=Math.min(S.x,N.x),ae=Math.max(S.x,N.x),ve=Math.min(p.x,v.x),Pe=Math.max(p.x,v.x);return ve>ae||O>Pe?!1:(O=Math.min(S.y,N.y),ae=Math.max(S.y,N.y),ve=Math.min(p.y,v.y),Pe=Math.max(p.y,v.y),ve>ae?!1:!(O>Pe))}},Q.serialVersionUID=5873921885273102e3,E(J,ie),o(J.prototype,{interfaces_:function(){return[]},getClass:function(){return J}}),o(x.prototype,{interfaces_:function(){return[]},getClass:function(){return x}}),x.toLocationSymbol=function(a){switch(a){case x.EXTERIOR:return"e";case x.BOUNDARY:return"b";case x.INTERIOR:return"i";case x.NONE:return"-"}throw new d},x.INTERIOR=0,x.BOUNDARY=1,x.EXTERIOR=2,x.NONE=-1,o(R.prototype,{interfaces_:function(){return[]},getClass:function(){return R}}),R.log10=function(a){var u=Math.log(a);return h.isInfinite(u)||h.isNaN(u)?u:u/R.LOG_10},R.min=function(a,u,c,p){var v=a;return v>u&&(v=u),v>c&&(v=c),v>p&&(v=p),v},R.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var a=arguments[0],u=arguments[1],c=arguments[2];return u>a?u:a>c?c:a}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var p=arguments[0],v=arguments[1],S=arguments[2];return v>p?v:p>S?S:p}},R.wrap=function(a,u){return 0>a?u- -a%u:a%u},R.max=function(){if(arguments.length===3){var a=arguments[0],u=arguments[1],c=arguments[2],p=a;return u>p&&(p=u),c>p&&(p=c),p}if(arguments.length===4){var v=arguments[0],S=arguments[1],N=arguments[2],O=arguments[3],p=v;return S>p&&(p=S),N>p&&(p=N),O>p&&(p=O),p}},R.average=function(a,u){return(a+u)/2},R.LOG_10=Math.log(10),B.prototype.append=function(a){this.str+=a},B.prototype.setCharAt=function(a,u){return this.str.substr(0,a)+u+this.str.substr(a+1)},B.prototype.toString=function(a){return this.str},ee.prototype.intValue=function(){return this.value},ee.prototype.compareTo=function(a){return this.value<a?-1:this.value>a?1:0},ee.isNaN=function(a){return Number.isNaN(a)},ne.isWhitespace=function(a){return 32>=a&&a>=0||a==127},ne.toUpperCase=function(a){return a.toUpperCase()},o(z.prototype,{le:function(a){return this.hi<a.hi||this.hi===a.hi&&this.lo<=a.lo},extractSignificantDigits:function(a,u){var c=this.abs(),p=z.magnitude(c.hi),v=z.TEN.pow(p);c=c.divide(v),c.gt(z.TEN)?(c=c.divide(z.TEN),p+=1):c.lt(z.ONE)&&(c=c.multiply(z.TEN),p-=1);for(var S=p+1,N=new B,O=z.MAX_PRINT_DIGITS-1,ae=0;O>=ae;ae++){a&&ae===S&&N.append(".");var ve=Math.trunc(c.hi);if(0>ve)break;var Pe=!1,Te=0;ve>9?(Pe=!0,Te="9"):Te="0"+ve,N.append(Te),c=c.subtract(z.valueOf(ve)).multiply(z.TEN),Pe&&c.selfAdd(z.TEN);var ze=!0,mt=z.magnitude(c.hi);if(0>mt&&Math.abs(mt)>=O-ae&&(ze=!1),!ze)break}return u[0]=p,N.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof z){var a=arguments[0];return this.add(a.negate())}if(typeof arguments[0]=="number"){var u=arguments[0];return this.add(-u)}},equals:function(){if(arguments.length===1){var a=arguments[0];return this.hi===a.hi&&this.lo===a.lo}},isZero:function(){return this.hi===0&&this.lo===0},selfSubtract:function(){if(arguments[0]instanceof z){var a=arguments[0];return this.isNaN()?this:this.selfAdd(-a.hi,-a.lo)}if(typeof arguments[0]=="number"){var u=arguments[0];return this.isNaN()?this:this.selfAdd(-u,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(a){return this.le(a)?this:a},selfDivide:function(){if(arguments.length===1){if(arguments[0]instanceof z){var a=arguments[0];return this.selfDivide(a.hi,a.lo)}if(typeof arguments[0]=="number"){var u=arguments[0];return this.selfDivide(u,0)}}else if(arguments.length===2){var c=arguments[0],p=arguments[1],v=null,S=null,N=null,O=null,ae=null,ve=null,Pe=null,Te=null;return ae=this.hi/c,ve=z.SPLIT*ae,v=ve-ae,Te=z.SPLIT*c,v=ve-v,S=ae-v,N=Te-c,Pe=ae*c,N=Te-N,O=c-N,Te=v*N-Pe+v*O+S*N+S*O,ve=(this.hi-Pe-Te+this.lo-ae*p)/c,Te=ae+ve,this.hi=Te,this.lo=ae-Te+ve,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof z){var a=arguments[0],u=null,c=null,p=null,v=null,S=null,N=null,O=null,ae=null;S=this.hi/a.hi,N=z.SPLIT*S,u=N-S,ae=z.SPLIT*a.hi,u=N-u,c=S-u,p=ae-a.hi,O=S*a.hi,p=ae-p,v=a.hi-p,ae=u*p-O+u*v+c*p+c*v,N=(this.hi-O-ae+this.lo-S*a.lo)/a.hi,ae=S+N;var ve=ae,Pe=S-ae+N;return new z(ve,Pe)}if(typeof arguments[0]=="number"){var Te=arguments[0];return h.isNaN(Te)?z.createNaN():z.copy(this).selfDivide(Te,0)}},ge:function(a){return this.hi>a.hi||this.hi===a.hi&&this.lo>=a.lo},pow:function(a){if(a===0)return z.valueOf(1);var u=new z(this),c=z.valueOf(1),p=Math.abs(a);if(p>1)for(;p>0;)p%2===1&&c.selfMultiply(u),p/=2,p>0&&(u=u.sqr());else c=u;return 0>a?c.reciprocal():c},ceil:function(){if(this.isNaN())return z.NaN;var a=Math.ceil(this.hi),u=0;return a===this.hi&&(u=Math.ceil(this.lo)),new z(a,u)},compareTo:function(a){var u=a;return this.hi<u.hi?-1:this.hi>u.hi?1:this.lo<u.lo?-1:this.lo>u.lo?1:0},rint:function(){if(this.isNaN())return this;var a=this.add(.5);return a.floor()},setValue:function(){if(arguments[0]instanceof z){var a=arguments[0];return this.init(a),this}if(typeof arguments[0]=="number"){var u=arguments[0];return this.init(u),this}},max:function(a){return this.ge(a)?this:a},sqrt:function(){if(this.isZero())return z.valueOf(0);if(this.isNegative())return z.NaN;var a=1/Math.sqrt(this.hi),u=this.hi*a,c=z.valueOf(u),p=this.subtract(c.sqr()),v=p.hi*(.5*a);return c.add(v)},selfAdd:function(){if(arguments.length===1){if(arguments[0]instanceof z){var a=arguments[0];return this.selfAdd(a.hi,a.lo)}if(typeof arguments[0]=="number"){var u=arguments[0],c=null,p=null,v=null,S=null,N=null,O=null;return v=this.hi+u,N=v-this.hi,S=v-N,S=u-N+(this.hi-S),O=S+this.lo,c=v+O,p=O+(v-c),this.hi=c+p,this.lo=p+(c-this.hi),this}}else if(arguments.length===2){var ae=arguments[0],ve=arguments[1],c=null,p=null,Pe=null,Te=null,v=null,S=null,N=null,O=null;v=this.hi+ae,Pe=this.lo+ve,N=v-this.hi,O=Pe-this.lo,S=v-N,Te=Pe-O,S=ae-N+(this.hi-S),Te=ve-O+(this.lo-Te),N=S+Pe,c=v+N,p=N+(v-c),N=Te+p;var ze=c+N,mt=N+(c-ze);return this.hi=ze,this.lo=mt,this}},selfMultiply:function(){if(arguments.length===1){if(arguments[0]instanceof z){var a=arguments[0];return this.selfMultiply(a.hi,a.lo)}if(typeof arguments[0]=="number"){var u=arguments[0];return this.selfMultiply(u,0)}}else if(arguments.length===2){var c=arguments[0],p=arguments[1],v=null,S=null,N=null,O=null,ae=null,ve=null;ae=z.SPLIT*this.hi,v=ae-this.hi,ve=z.SPLIT*c,v=ae-v,S=this.hi-v,N=ve-c,ae=this.hi*c,N=ve-N,O=c-N,ve=v*N-ae+v*O+S*N+S*O+(this.hi*p+this.lo*c);var Pe=ae+ve;v=ae-Pe;var Te=ve+v;return this.hi=Pe,this.lo=Te,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return z.NaN;var a=Math.floor(this.hi),u=0;return a===this.hi&&(u=Math.floor(this.lo)),new z(a,u)},negate:function(){return this.isNaN()?this:new z(-this.hi,-this.lo)},clone:function(){try{return null}catch(a){if(a instanceof CloneNotSupportedException)return null;throw a}finally{}},multiply:function(){if(arguments[0]instanceof z){var a=arguments[0];return a.isNaN()?z.createNaN():z.copy(this).selfMultiply(a)}if(typeof arguments[0]=="number"){var u=arguments[0];return h.isNaN(u)?z.createNaN():z.copy(this).selfMultiply(u,0)}},isNaN:function(){return h.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var a=z.magnitude(this.hi);return a>=-3&&20>=a?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var a=this.getSpecialNumberString();if(a!==null)return a;var u=new Array(1).fill(null),c=this.extractSignificantDigits(!0,u),p=u[0]+1,v=c;if(c.charAt(0)===".")v="0"+c;else if(0>p)v="0."+z.stringOfChar("0",-p)+c;else if(c.indexOf(".")===-1){var S=p-c.length,N=z.stringOfChar("0",S);v=c+N+".0"}return this.isNegative()?"-"+v:v},reciprocal:function(){var a=null,u=null,c=null,p=null,v=null,S=null,N=null,O=null;v=1/this.hi,S=z.SPLIT*v,a=S-v,O=z.SPLIT*this.hi,a=S-a,u=v-a,c=O-this.hi,N=v*this.hi,c=O-c,p=this.hi-c,O=a*c-N+a*p+u*c+u*p,S=(1-N-O-v*this.lo)/this.hi;var ae=v+S,ve=v-ae+S;return new z(ae,ve)},toSciNotation:function(){if(this.isZero())return z.SCI_NOT_ZERO;var a=this.getSpecialNumberString();if(a!==null)return a;var u=new Array(1).fill(null),c=this.extractSignificantDigits(!1,u),p=z.SCI_NOT_EXPONENT_CHAR+u[0];if(c.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+c);var v="";c.length>1&&(v=c.substring(1));var S=c.charAt(0)+"."+v;return this.isNegative()?"-"+S+p:S+p},abs:function(){return this.isNaN()?z.NaN:this.isNegative()?this.negate():new z(this)},isPositive:function(){return this.hi>0||this.hi===0&&this.lo>0},lt:function(a){return this.hi<a.hi||this.hi===a.hi&&this.lo<a.lo},add:function(){if(arguments[0]instanceof z){var a=arguments[0];return z.copy(this).selfAdd(a)}if(typeof arguments[0]=="number"){var u=arguments[0];return z.copy(this).selfAdd(u)}},init:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var a=arguments[0];this.hi=a,this.lo=0}else if(arguments[0]instanceof z){var u=arguments[0];this.hi=u.hi,this.lo=u.lo}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];this.hi=c,this.lo=p}},gt:function(a){return this.hi>a.hi||this.hi===a.hi&&this.lo>a.lo},isNegative:function(){return this.hi<0||this.hi===0&&this.lo<0},trunc:function(){return this.isNaN()?z.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0},interfaces_:function(){return[b,g,m]},getClass:function(){return z}}),z.sqr=function(a){return z.valueOf(a).selfMultiply(a)},z.valueOf=function(){if(typeof arguments[0]=="string"){var a=arguments[0];return z.parse(a)}if(typeof arguments[0]=="number"){var u=arguments[0];return new z(u)}},z.sqrt=function(a){return z.valueOf(a).sqrt()},z.parse=function(a){for(var u=0,c=a.length;ne.isWhitespace(a.charAt(u));)u++;var p=!1;if(c>u){var v=a.charAt(u);v!=="-"&&v!=="+"||(u++,v==="-"&&(p=!0))}for(var S=new z,N=0,O=0,ae=0;!(u>=c);){var ve=a.charAt(u);if(u++,ne.isDigit(ve)){var Pe=ve-"0";S.selfMultiply(z.TEN),S.selfAdd(Pe),N++}else{if(ve!=="."){if(ve==="e"||ve==="E"){var Te=a.substring(u);try{ae=ee.parseInt(Te)}catch(jt){throw jt instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+Te+" in string "+a):jt}finally{}break}throw new NumberFormatException("Unexpected character '"+ve+"' at position "+u+" in string "+a)}O=N}}var ze=S,mt=N-O-ae;if(mt===0)ze=S;else if(mt>0){var Ft=z.TEN.pow(mt);ze=S.divide(Ft)}else if(0>mt){var Ft=z.TEN.pow(-mt);ze=S.multiply(Ft)}return p?ze.negate():ze},z.createNaN=function(){return new z(h.NaN,h.NaN)},z.copy=function(a){return new z(a)},z.magnitude=function(a){var u=Math.abs(a),c=Math.log(u)/Math.log(10),p=Math.trunc(Math.floor(c)),v=Math.pow(10,p);return u>=10*v&&(p+=1),p},z.stringOfChar=function(a,u){for(var c=new B,p=0;u>p;p++)c.append(a);return c.toString()},z.PI=new z(3.141592653589793,12246467991473532e-32),z.TWO_PI=new z(6.283185307179586,24492935982947064e-32),z.PI_2=new z(1.5707963267948966,6123233995736766e-32),z.E=new z(2.718281828459045,14456468917292502e-32),z.NaN=new z(h.NaN,h.NaN),z.EPS=123259516440783e-46,z.SPLIT=134217729,z.MAX_PRINT_DIGITS=32,z.TEN=z.valueOf(10),z.ONE=z.valueOf(1),z.SCI_NOT_EXPONENT_CHAR="E",z.SCI_NOT_ZERO="0.0E0",o(X.prototype,{interfaces_:function(){return[]},getClass:function(){return X}}),X.orientationIndex=function(a,u,c){var p=X.orientationIndexFilter(a,u,c);if(1>=p)return p;var v=z.valueOf(u.x).selfAdd(-a.x),S=z.valueOf(u.y).selfAdd(-a.y),N=z.valueOf(c.x).selfAdd(-u.x),O=z.valueOf(c.y).selfAdd(-u.y);return v.selfMultiply(O).selfSubtract(S.selfMultiply(N)).signum()},X.signOfDet2x2=function(a,u,c,p){var v=a.multiply(p).selfSubtract(u.multiply(c));return v.signum()},X.intersection=function(a,u,c,p){var v=z.valueOf(p.y).selfSubtract(c.y).selfMultiply(z.valueOf(u.x).selfSubtract(a.x)),S=z.valueOf(p.x).selfSubtract(c.x).selfMultiply(z.valueOf(u.y).selfSubtract(a.y)),N=v.subtract(S),O=z.valueOf(p.x).selfSubtract(c.x).selfMultiply(z.valueOf(a.y).selfSubtract(c.y)),ae=z.valueOf(p.y).selfSubtract(c.y).selfMultiply(z.valueOf(a.x).selfSubtract(c.x)),ve=O.subtract(ae),Pe=ve.selfDivide(N).doubleValue(),Te=z.valueOf(a.x).selfAdd(z.valueOf(u.x).selfSubtract(a.x).selfMultiply(Pe)).doubleValue(),ze=z.valueOf(u.x).selfSubtract(a.x).selfMultiply(z.valueOf(a.y).selfSubtract(c.y)),mt=z.valueOf(u.y).selfSubtract(a.y).selfMultiply(z.valueOf(a.x).selfSubtract(c.x)),Ft=ze.subtract(mt),jt=Ft.selfDivide(N).doubleValue(),In=z.valueOf(c.y).selfAdd(z.valueOf(p.y).selfSubtract(c.y).selfMultiply(jt)).doubleValue();return new C(Te,In)},X.orientationIndexFilter=function(a,u,c){var p=null,v=(a.x-c.x)*(u.y-c.y),S=(a.y-c.y)*(u.x-c.x),N=v-S;if(v>0){if(0>=S)return X.signum(N);p=v+S}else{if(!(0>v)||S>=0)return X.signum(N);p=-v-S}var O=X.DP_SAFE_EPSILON*p;return N>=O||-N>=O?X.signum(N):2},X.signum=function(a){return a>0?1:0>a?-1:0},X.DP_SAFE_EPSILON=1e-15,o(A.prototype,{setOrdinate:function(a,u,c){},size:function(){},getOrdinate:function(a,u){},getCoordinate:function(){},getCoordinateCopy:function(a){},getDimension:function(){},getX:function(a){},clone:function(){},expandEnvelope:function(a){},copy:function(){},getY:function(a){},toCoordinateArray:function(){},interfaces_:function(){return[m]},getClass:function(){return A}}),A.X=0,A.Y=1,A.Z=2,A.M=3,Z.arraycopy=function(a,u,c,p,v){for(var S=0,N=u;u+v>N;N++)c[p+S]=a[N],S++},Z.getProperty=function(a){return{"line.separator":`
`}[a]},o($e.prototype,{getY:function(){var a=this.y/this.w;if(h.isNaN(a)||h.isInfinite(a))throw new J;return a},getX:function(){var a=this.x/this.w;if(h.isNaN(a)||h.isInfinite(a))throw new J;return a},getCoordinate:function(){var a=new C;return a.x=this.getX(),a.y=this.getY(),a},interfaces_:function(){return[]},getClass:function(){return $e}}),$e.intersection=function(a,u,c,p){var v=a.y-u.y,S=u.x-a.x,N=a.x*u.y-u.x*a.y,O=c.y-p.y,ae=p.x-c.x,ve=c.x*p.y-p.x*c.y,Pe=S*ve-ae*N,Te=O*N-v*ve,ze=v*ae-O*S,mt=Pe/ze,Ft=Te/ze;if(h.isNaN(mt)||h.isInfinite(mt)||h.isNaN(Ft)||h.isInfinite(Ft))throw new J;return new C(mt,Ft)},o(Ne.prototype,{create:function(){arguments.length===1&&(arguments[0]instanceof Array||I(arguments[0],A))},interfaces_:function(){return[]},getClass:function(){return Ne}}),o(Me.prototype,{filter:function(a){},interfaces_:function(){return[]},getClass:function(){return Me}}),o(Ee.prototype,{isGeometryCollection:function(){return this.getSortIndex()===Ee.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(a){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(arguments.length===1){if(arguments[0]instanceof Ee){var a=arguments[0];return a===null?!1:this.equalsTopo(a)}if(arguments[0]instanceof Object){var u=arguments[0];if(!(u instanceof Ee))return!1;var c=u;return this.equalsExact(c)}}},equalsExact:function(a){return this===a||this.equalsExact(a,0)},geometryChanged:function(){this.apply(Ee.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(a){return a===null?!1:this.norm().equalsExact(a.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(arguments.length===1){var a=arguments[0],u=a;return this.getSortIndex()!==u.getSortIndex()?this.getSortIndex()-u.getSortIndex():this.isEmpty()&&u.isEmpty()?0:this.isEmpty()?-1:u.isEmpty()?1:this.compareToSameClass(a)}if(arguments.length===2){var c=arguments[0],p=arguments[1],u=c;return this.getSortIndex()!==u.getSortIndex()?this.getSortIndex()-u.getSortIndex():this.isEmpty()&&u.isEmpty()?0:this.isEmpty()?-1:u.isEmpty()?1:this.compareToSameClass(c,p)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(a){if(a.getSortIndex()===Ee.SORTINDEX_GEOMETRYCOLLECTION)throw new d},equal:function(a,u,c){return c===0?a.equals(u):a.distance(u)<=c},norm:function(){var a=this.copy();return a.normalize(),a},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return this.envelope===null&&(this.envelope=this.computeEnvelopeInternal()),new Q(this.envelope)},setSRID:function(a){this.SRID=a},setUserData:function(a){this.userData=a},compare:function(a,u){for(var c=a.iterator(),p=u.iterator();c.hasNext()&&p.hasNext();){var v=c.next(),S=p.next(),N=v.compareTo(S);if(N!==0)return N}return c.hasNext()?1:p.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===Ee.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Ee.SORTINDEX_MULTIPOINT||this.getSortIndex()===Ee.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Ee.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[m,g,b]},getClass:function(){return Ee}}),Ee.hasNonEmptyElements=function(a){for(var u=0;u<a.length;u++)if(!a[u].isEmpty())return!0;return!1},Ee.hasNullElements=function(a){for(var u=0;u<a.length;u++)if(a[u]===null)return!0;return!1},Ee.serialVersionUID=8763622679187377e3,Ee.SORTINDEX_POINT=0,Ee.SORTINDEX_MULTIPOINT=1,Ee.SORTINDEX_LINESTRING=2,Ee.SORTINDEX_LINEARRING=3,Ee.SORTINDEX_MULTILINESTRING=4,Ee.SORTINDEX_POLYGON=5,Ee.SORTINDEX_MULTIPOLYGON=6,Ee.SORTINDEX_GEOMETRYCOLLECTION=7,Ee.geometryChangedFilter={interfaces_:function(){return[Me]},filter:function(a){a.geometryChangedAction()}},o(Ve.prototype,{filter:function(a){},interfaces_:function(){return[]},getClass:function(){return Ve}}),o(qe.prototype,{isInBoundary:function(a){},interfaces_:function(){return[]},getClass:function(){return qe}}),o(_t.prototype,{isInBoundary:function(a){return a%2===1},interfaces_:function(){return[qe]},getClass:function(){return _t}}),o(Qe.prototype,{isInBoundary:function(a){return a>0},interfaces_:function(){return[qe]},getClass:function(){return Qe}}),o(tt.prototype,{isInBoundary:function(a){return a>1},interfaces_:function(){return[qe]},getClass:function(){return tt}}),o(st.prototype,{isInBoundary:function(a){return a===1},interfaces_:function(){return[qe]},getClass:function(){return st}}),qe.Mod2BoundaryNodeRule=_t,qe.EndPointBoundaryNodeRule=Qe,qe.MultiValentEndPointBoundaryNodeRule=tt,qe.MonoValentEndPointBoundaryNodeRule=st,qe.MOD2_BOUNDARY_RULE=new _t,qe.ENDPOINT_BOUNDARY_RULE=new Qe,qe.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new tt,qe.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new st,qe.OGC_SFS_BOUNDARY_RULE=qe.MOD2_BOUNDARY_RULE,o(Oe.prototype,{interfaces_:function(){return[]},getClass:function(){return Oe}}),Oe.isRing=function(a){return a.length<4?!1:!!a[0].equals2D(a[a.length-1])},Oe.ptNotInList=function(a,u){for(var c=0;c<a.length;c++){var p=a[c];if(Oe.indexOf(p,u)<0)return p}return null},Oe.scroll=function(a,u){var c=Oe.indexOf(u,a);if(0>c)return null;var p=new Array(a.length).fill(null);Z.arraycopy(a,c,p,0,a.length-c),Z.arraycopy(a,0,p,a.length-c,c),Z.arraycopy(p,0,a,0,a.length)},Oe.equals=function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];if(a===u)return!0;if(a===null||u===null||a.length!==u.length)return!1;for(var c=0;c<a.length;c++)if(!a[c].equals(u[c]))return!1;return!0}if(arguments.length===3){var p=arguments[0],v=arguments[1],S=arguments[2];if(p===v)return!0;if(p===null||v===null||p.length!==v.length)return!1;for(var c=0;c<p.length;c++)if(S.compare(p[c],v[c])!==0)return!1;return!0}},Oe.intersection=function(a,u){for(var c=new te,p=0;p<a.length;p++)u.intersects(a[p])&&c.add(a[p],!0);return c.toCoordinateArray()},Oe.hasRepeatedPoints=function(a){for(var u=1;u<a.length;u++)if(a[u-1].equals(a[u]))return!0;return!1},Oe.removeRepeatedPoints=function(a){if(!Oe.hasRepeatedPoints(a))return a;var u=new te(a,!1);return u.toCoordinateArray()},Oe.reverse=function(a){for(var u=a.length-1,c=Math.trunc(u/2),p=0;c>=p;p++){var v=a[p];a[p]=a[u-p],a[u-p]=v}},Oe.removeNull=function(a){for(var u=0,c=0;c<a.length;c++)a[c]!==null&&u++;var p=new Array(u).fill(null);if(u===0)return p;for(var v=0,c=0;c<a.length;c++)a[c]!==null&&(p[v++]=a[c]);return p},Oe.copyDeep=function(){if(arguments.length===1){for(var a=arguments[0],u=new Array(a.length).fill(null),c=0;c<a.length;c++)u[c]=new C(a[c]);return u}if(arguments.length===5)for(var p=arguments[0],v=arguments[1],S=arguments[2],N=arguments[3],O=arguments[4],c=0;O>c;c++)S[N+c]=new C(p[v+c])},Oe.isEqualReversed=function(a,u){for(var c=0;c<a.length;c++){var p=a[c],v=u[a.length-c-1];if(p.compareTo(v)!==0)return!1}return!0},Oe.envelope=function(a){for(var u=new Q,c=0;c<a.length;c++)u.expandToInclude(a[c]);return u},Oe.toCoordinateArray=function(a){return a.toArray(Oe.coordArrayType)},Oe.atLeastNCoordinatesOrNothing=function(a,u){return u.length>=a?u:[]},Oe.indexOf=function(a,u){for(var c=0;c<u.length;c++)if(a.equals(u[c]))return c;return-1},Oe.increasingDirection=function(a){for(var u=0;u<Math.trunc(a.length/2);u++){var c=a.length-1-u,p=a[u].compareTo(a[c]);if(p!==0)return p}return 1},Oe.compare=function(a,u){for(var c=0;c<a.length&&c<u.length;){var p=a[c].compareTo(u[c]);if(p!==0)return p;c++}return c<u.length?-1:c<a.length?1:0},Oe.minCoordinate=function(a){for(var u=null,c=0;c<a.length;c++)(u===null||u.compareTo(a[c])>0)&&(u=a[c]);return u},Oe.extract=function(a,u,c){u=R.clamp(u,0,a.length),c=R.clamp(c,-1,a.length);var p=c-u+1;0>c&&(p=0),u>=a.length&&(p=0),u>c&&(p=0);var v=new Array(p).fill(null);if(p===0)return v;for(var S=0,N=u;c>=N;N++)v[S++]=a[N];return v},o(Tt.prototype,{compare:function(a,u){var c=a,p=u;return Oe.compare(c,p)},interfaces_:function(){return[y]},getClass:function(){return Tt}}),o(yn.prototype,{compare:function(a,u){var c=a,p=u;if(c.length<p.length)return-1;if(c.length>p.length)return 1;if(c.length===0)return 0;var v=Oe.compare(c,p),S=Oe.isEqualReversed(c,p);return S?0:v},OLDcompare:function(a,u){var c=a,p=u;if(c.length<p.length)return-1;if(c.length>p.length)return 1;if(c.length===0)return 0;for(var v=Oe.increasingDirection(c),S=Oe.increasingDirection(p),N=v>0?0:c.length-1,O=S>0?0:c.length-1,ae=0;ae<c.length;ae++){var ve=c[N].compareTo(p[O]);if(ve!==0)return ve;N+=v,O+=S}return 0},interfaces_:function(){return[y]},getClass:function(){return yn}}),Oe.ForwardComparator=Tt,Oe.BidirectionalComparator=yn,Oe.coordArrayType=new Array(0).fill(null),St.prototype.get=function(){},St.prototype.put=function(){},St.prototype.size=function(){},St.prototype.values=function(){},St.prototype.entrySet=function(){},de.prototype=new St,U.prototype=new Y,U.prototype.contains=function(){},H.prototype=new U,H.prototype.contains=function(a){for(var u=0,c=this.array_.length;c>u;u++){var p=this.array_[u];if(p===a)return!0}return!1},H.prototype.add=function(a){return this.contains(a)?!1:(this.array_.push(a),!0)},H.prototype.addAll=function(a){for(var u=a.iterator();u.hasNext();)this.add(u.next());return!0},H.prototype.remove=function(a){throw new javascript.util.OperationNotSupported},H.prototype.size=function(){return this.array_.length},H.prototype.isEmpty=function(){return this.array_.length===0},H.prototype.toArray=function(){for(var a=[],u=0,c=this.array_.length;c>u;u++)a.push(this.array_[u]);return a},H.prototype.iterator=function(){return new Ts(this)};var Ts=function(a){this.hashSet_=a,this.position_=0};Ts.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new F;return this.hashSet_.array_[this.position_++]},Ts.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},Ts.prototype.remove=function(){throw new ce};var gi=0,Ui=1;nt.prototype=new de,nt.prototype.get=function(a){for(var u=this.root_;u!==null;){var c=a.compareTo(u.key);if(0>c)u=u.left;else{if(!(c>0))return u.value;u=u.right}}return null},nt.prototype.put=function(a,u){if(this.root_===null)return this.root_={key:a,value:u,left:null,right:null,parent:null,color:gi,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var c,p,v=this.root_;do if(c=v,p=a.compareTo(v.key),0>p)v=v.left;else{if(!(p>0)){var S=v.value;return v.value=u,S}v=v.right}while(v!==null);var N={key:a,left:null,right:null,value:u,parent:c,color:gi,getValue:function(){return this.value},getKey:function(){return this.key}};return 0>p?c.left=N:c.right=N,this.fixAfterInsertion(N),this.size_++,null},nt.prototype.fixAfterInsertion=function(a){for(a.color=Ui;a!=null&&a!=this.root_&&a.parent.color==Ui;)if(_e(a)==Be(_e(_e(a)))){var u=Re(_e(_e(a)));pe(u)==Ui?(De(_e(a),gi),De(u,gi),De(_e(_e(a)),Ui),a=_e(_e(a))):(a==Re(_e(a))&&(a=_e(a),this.rotateLeft(a)),De(_e(a),gi),De(_e(_e(a)),Ui),this.rotateRight(_e(_e(a))))}else{var u=Be(_e(_e(a)));pe(u)==Ui?(De(_e(a),gi),De(u,gi),De(_e(_e(a)),Ui),a=_e(_e(a))):(a==Be(_e(a))&&(a=_e(a),this.rotateRight(a)),De(_e(a),gi),De(_e(_e(a)),Ui),this.rotateLeft(_e(_e(a))))}this.root_.color=gi},nt.prototype.values=function(){var a=new q,u=this.getFirstEntry();if(u!==null)for(a.add(u.value);(u=nt.successor(u))!==null;)a.add(u.value);return a},nt.prototype.entrySet=function(){var a=new H,u=this.getFirstEntry();if(u!==null)for(a.add(u);(u=nt.successor(u))!==null;)a.add(u);return a},nt.prototype.rotateLeft=function(a){if(a!=null){var u=a.right;a.right=u.left,u.left!=null&&(u.left.parent=a),u.parent=a.parent,a.parent==null?this.root_=u:a.parent.left==a?a.parent.left=u:a.parent.right=u,u.left=a,a.parent=u}},nt.prototype.rotateRight=function(a){if(a!=null){var u=a.left;a.left=u.right,u.right!=null&&(u.right.parent=a),u.parent=a.parent,a.parent==null?this.root_=u:a.parent.right==a?a.parent.right=u:a.parent.left=u,u.right=a,a.parent=u}},nt.prototype.getFirstEntry=function(){var a=this.root_;if(a!=null)for(;a.left!=null;)a=a.left;return a},nt.successor=function(a){if(a===null)return null;if(a.right!==null){for(var u=a.right;u.left!==null;)u=u.left;return u}for(var u=a.parent,c=a;u!==null&&c===u.right;)c=u,u=u.parent;return u},nt.prototype.size=function(){return this.size_},o(It.prototype,{interfaces_:function(){return[]},getClass:function(){return It}}),Yt.prototype=new U,dt.prototype=new Yt,dt.prototype.contains=function(a){for(var u=0,c=this.array_.length;c>u;u++){var p=this.array_[u];if(p.compareTo(a)===0)return!0}return!1},dt.prototype.add=function(a){if(this.contains(a))return!1;for(var u=0,c=this.array_.length;c>u;u++){var p=this.array_[u];if(p.compareTo(a)===1)return this.array_.splice(u,0,a),!0}return this.array_.push(a),!0},dt.prototype.addAll=function(a){for(var u=a.iterator();u.hasNext();)this.add(u.next());return!0},dt.prototype.remove=function(a){throw new ce},dt.prototype.size=function(){return this.array_.length},dt.prototype.isEmpty=function(){return this.array_.length===0},dt.prototype.toArray=function(){for(var a=[],u=0,c=this.array_.length;c>u;u++)a.push(this.array_[u]);return a},dt.prototype.iterator=function(){return new Os(this)};var Os=function(a){this.treeSet_=a,this.position_=0};Os.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new F;return this.treeSet_.array_[this.position_++]},Os.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Os.prototype.remove=function(){throw new ce},Kt.sort=function(){var a,u,c,p,v=arguments[0];if(arguments.length===1)return p=function(N,O){return N.compareTo(O)},void v.sort(p);if(arguments.length===2)c=arguments[1],p=function(N,O){return c.compare(N,O)},v.sort(p);else{if(arguments.length===3){u=v.slice(arguments[1],arguments[2]),u.sort();var S=v.slice(0,arguments[1]).concat(u,v.slice(arguments[2],v.length));for(v.splice(0,v.length),a=0;a<S.length;a++)v.push(S[a]);return}if(arguments.length===4){for(u=v.slice(arguments[1],arguments[2]),c=arguments[3],p=function(N,O){return c.compare(N,O)},u.sort(p),S=v.slice(0,arguments[1]).concat(u,v.slice(arguments[2],v.length)),v.splice(0,v.length),a=0;a<S.length;a++)v.push(S[a]);return}}},Kt.asList=function(a){for(var u=new q,c=0,p=a.length;p>c;c++)u.add(a[c]);return u},o(ke.prototype,{interfaces_:function(){return[]},getClass:function(){return ke}}),ke.toDimensionSymbol=function(a){switch(a){case ke.FALSE:return ke.SYM_FALSE;case ke.TRUE:return ke.SYM_TRUE;case ke.DONTCARE:return ke.SYM_DONTCARE;case ke.P:return ke.SYM_P;case ke.L:return ke.SYM_L;case ke.A:return ke.SYM_A}throw new d},ke.toDimensionValue=function(a){switch(ne.toUpperCase(a)){case ke.SYM_FALSE:return ke.FALSE;case ke.SYM_TRUE:return ke.TRUE;case ke.SYM_DONTCARE:return ke.DONTCARE;case ke.SYM_P:return ke.P;case ke.SYM_L:return ke.L;case ke.SYM_A:return ke.A}throw new d},ke.P=0,ke.L=1,ke.A=2,ke.FALSE=-1,ke.TRUE=-2,ke.DONTCARE=-3,ke.SYM_FALSE="F",ke.SYM_TRUE="T",ke.SYM_DONTCARE="*",ke.SYM_P="0",ke.SYM_L="1",ke.SYM_A="2",o(rn.prototype,{filter:function(a){},interfaces_:function(){return[]},getClass:function(){return rn}}),o(nn.prototype,{filter:function(a,u){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return nn}}),E(Ot,Ee),o(Ot.prototype,{computeEnvelopeInternal:function(){for(var a=new Q,u=0;u<this.geometries.length;u++)a.expandToInclude(this.geometries[u].getEnvelopeInternal());return a},getGeometryN:function(a){return this.geometries[a]},getSortIndex:function(){return Ee.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var a=new Array(this.getNumPoints()).fill(null),u=-1,c=0;c<this.geometries.length;c++)for(var p=this.geometries[c].getCoordinates(),v=0;v<p.length;v++)u++,a[u]=p[v];return a},getArea:function(){for(var a=0,u=0;u<this.geometries.length;u++)a+=this.geometries[u].getArea();return a},equalsExact:function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];if(!this.isEquivalentClass(a))return!1;var c=a;if(this.geometries.length!==c.geometries.length)return!1;for(var p=0;p<this.geometries.length;p++)if(!this.geometries[p].equalsExact(c.geometries[p],u))return!1;return!0}return Ee.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var a=0;a<this.geometries.length;a++)this.geometries[a].normalize();Kt.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var a=ke.FALSE,u=0;u<this.geometries.length;u++)a=Math.max(a,this.geometries[u].getBoundaryDimension());return a},getDimension:function(){for(var a=ke.FALSE,u=0;u<this.geometries.length;u++)a=Math.max(a,this.geometries[u].getDimension());return a},getLength:function(){for(var a=0,u=0;u<this.geometries.length;u++)a+=this.geometries[u].getLength();return a},getNumPoints:function(){for(var a=0,u=0;u<this.geometries.length;u++)a+=this.geometries[u].getNumPoints();return a},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var a=this.geometries.length,u=new Array(a).fill(null),c=0;c<this.geometries.length;c++)u[c]=this.geometries[c].reverse();return this.getFactory().createGeometryCollection(u)},compareToSameClass:function(){if(arguments.length===1){var a=arguments[0],u=new dt(Kt.asList(this.geometries)),c=new dt(Kt.asList(a.geometries));return this.compare(u,c)}if(arguments.length===2){for(var p=arguments[0],v=arguments[1],S=p,N=this.getNumGeometries(),O=S.getNumGeometries(),ae=0;N>ae&&O>ae;){var ve=this.getGeometryN(ae),Pe=S.getGeometryN(ae),Te=ve.compareToSameClass(Pe,v);if(Te!==0)return Te;ae++}return N>ae?1:O>ae?-1:0}},apply:function(){if(I(arguments[0],Ve))for(var a=arguments[0],u=0;u<this.geometries.length;u++)this.geometries[u].apply(a);else if(I(arguments[0],nn)){var c=arguments[0];if(this.geometries.length===0)return null;for(var u=0;u<this.geometries.length&&(this.geometries[u].apply(c),!c.isDone());u++);c.isGeometryChanged()&&this.geometryChanged()}else if(I(arguments[0],rn)){var p=arguments[0];p.filter(this);for(var u=0;u<this.geometries.length;u++)this.geometries[u].apply(p)}else if(I(arguments[0],Me)){var v=arguments[0];v.filter(this);for(var u=0;u<this.geometries.length;u++)this.geometries[u].apply(v)}},getBoundary:function(){return this.checkNotGeometryCollection(this),$.shouldNeverReachHere(),null},clone:function(){var a=Ee.prototype.clone.call(this);a.geometries=new Array(this.geometries.length).fill(null);for(var u=0;u<this.geometries.length;u++)a.geometries[u]=this.geometries[u].clone();return a},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var a=new Array(this.geometries.length).fill(null),u=0;u<a.length;u++)a[u]=this.geometries[u].copy();return new Ot(a,this.factory)},isEmpty:function(){for(var a=0;a<this.geometries.length;a++)if(!this.geometries[a].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return Ot}}),Ot.serialVersionUID=-5694727726395021e3,E(ft,Ot),o(ft.prototype,{getSortIndex:function(){return Ee.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];return this.isEquivalentClass(a)?Ot.prototype.equalsExact.call(this,a,u):!1}return Ot.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?ke.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var a=0;a<this.geometries.length;a++)if(!this.geometries[a].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var a=this.geometries.length,u=new Array(a).fill(null),c=0;c<this.geometries.length;c++)u[a-1-c]=this.geometries[c].reverse();return this.getFactory().createMultiLineString(u)},getBoundary:function(){return new Ut(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var a=new Array(this.geometries.length).fill(null),u=0;u<a.length;u++)a[u]=this.geometries[u].copy();return new ft(a,this.factory)},interfaces_:function(){return[It]},getClass:function(){return ft}}),ft.serialVersionUID=8166665132445434e3,o(Ut.prototype,{boundaryMultiLineString:function(a){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var u=this.computeBoundaryCoordinates(a);return u.length===1?this.geomFact.createPoint(u[0]):this.geomFact.createMultiPointFromCoords(u)},getBoundary:function(){return this.geom instanceof At?this.boundaryLineString(this.geom):this.geom instanceof ft?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(a){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(a.isClosed()){var u=this.bnRule.isInBoundary(2);return u?a.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([a.getStartPoint(),a.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(a){var u=new q;this.endpointMap=new nt;for(var c=0;c<a.getNumGeometries();c++){var p=a.getGeometryN(c);p.getNumPoints()!==0&&(this.addEndpoint(p.getCoordinateN(0)),this.addEndpoint(p.getCoordinateN(p.getNumPoints()-1)))}for(var v=this.endpointMap.entrySet().iterator();v.hasNext();){var S=v.next(),N=S.getValue(),O=N.count;this.bnRule.isInBoundary(O)&&u.add(S.getKey())}return Oe.toCoordinateArray(u)},addEndpoint:function(a){var u=this.endpointMap.get(a);u===null&&(u=new dr,this.endpointMap.put(a,u)),u.count++},interfaces_:function(){return[]},getClass:function(){return Ut}}),Ut.getBoundary=function(){if(arguments.length===1){var a=arguments[0],u=new Ut(a);return u.getBoundary()}if(arguments.length===2){var c=arguments[0],p=arguments[1],u=new Ut(c,p);return u.getBoundary()}},o(dr.prototype,{interfaces_:function(){return[]},getClass:function(){return dr}}),o(ut.prototype,{interfaces_:function(){return[]},getClass:function(){return ut}}),ut.chars=function(a,u){for(var c=new Array(u).fill(null),p=0;u>p;p++)c[p]=a;return new String(c)},ut.getStackTrace=function(){if(arguments.length===1){var a=arguments[0],u=new un,c=new vn;return a.printStackTrace(c),u.toString()}if(arguments.length===2){for(var p=arguments[0],v=arguments[1],S="",N=new ln(ut.getStackTrace(p)),O=new En,ae=0;v>ae;ae++)try{S+=O.readLine()+ut.NEWLINE}catch(ve){if(!(ve instanceof Lt))throw ve;$.shouldNeverReachHere()}finally{}return S}},ut.split=function(a,u){for(var c=u.length,p=new q,v=""+a,S=v.indexOf(u);S>=0;){var N=v.substring(0,S);p.add(N),v=v.substring(S+c),S=v.indexOf(u)}v.length>0&&p.add(v);for(var O=new Array(p.size()).fill(null),ae=0;ae<O.length;ae++)O[ae]=p.get(ae);return O},ut.toString=function(){if(arguments.length===1){var a=arguments[0];return ut.SIMPLE_ORDINATE_FORMAT.format(a)}},ut.spaces=function(a){return ut.chars(" ",a)},ut.NEWLINE=Z.getProperty("line.separator"),ut.SIMPLE_ORDINATE_FORMAT=new vr,o(Ke.prototype,{interfaces_:function(){return[]},getClass:function(){return Ke}}),Ke.copyCoord=function(a,u,c,p){for(var v=Math.min(a.getDimension(),c.getDimension()),S=0;v>S;S++)c.setOrdinate(p,S,a.getOrdinate(u,S))},Ke.isRing=function(a){var u=a.size();return u===0?!0:3>=u?!1:a.getOrdinate(0,A.X)===a.getOrdinate(u-1,A.X)&&a.getOrdinate(0,A.Y)===a.getOrdinate(u-1,A.Y)},Ke.isEqual=function(a,u){var c=a.size(),p=u.size();if(c!==p)return!1;for(var v=Math.min(a.getDimension(),u.getDimension()),S=0;c>S;S++)for(var N=0;v>N;N++){var O=a.getOrdinate(S,N),ae=u.getOrdinate(S,N);if(!(a.getOrdinate(S,N)===u.getOrdinate(S,N)||h.isNaN(O)&&h.isNaN(ae)))return!1}return!0},Ke.extend=function(a,u,c){var p=a.create(c,u.getDimension()),v=u.size();if(Ke.copy(u,0,p,0,v),v>0)for(var S=v;c>S;S++)Ke.copy(u,v-1,p,S,1);return p},Ke.reverse=function(a){for(var u=a.size()-1,c=Math.trunc(u/2),p=0;c>=p;p++)Ke.swap(a,p,u-p)},Ke.swap=function(a,u,c){if(u===c)return null;for(var p=0;p<a.getDimension();p++){var v=a.getOrdinate(u,p);a.setOrdinate(u,p,a.getOrdinate(c,p)),a.setOrdinate(c,p,v)}},Ke.copy=function(a,u,c,p,v){for(var S=0;v>S;S++)Ke.copyCoord(a,u+S,c,p+S)},Ke.toString=function(){if(arguments.length===1){var a=arguments[0],u=a.size();if(u===0)return"()";var c=a.getDimension(),p=new B;p.append("(");for(var v=0;u>v;v++){v>0&&p.append(" ");for(var S=0;c>S;S++)S>0&&p.append(","),p.append(ut.toString(a.getOrdinate(v,S)))}return p.append(")"),p.toString()}},Ke.ensureValidRing=function(a,u){var c=u.size();if(c===0)return u;if(3>=c)return Ke.createClosedRing(a,u,4);var p=u.getOrdinate(0,A.X)===u.getOrdinate(c-1,A.X)&&u.getOrdinate(0,A.Y)===u.getOrdinate(c-1,A.Y);return p?u:Ke.createClosedRing(a,u,c+1)},Ke.createClosedRing=function(a,u,c){var p=a.create(c,u.getDimension()),v=u.size();Ke.copy(u,0,p,0,v);for(var S=v;c>S;S++)Ke.copy(u,0,p,S,1);return p},E(At,Ee),o(At.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new Q:this.points.expandEnvelope(new Q)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return Ee.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];if(!this.isEquivalentClass(a))return!1;var c=a;if(this.points.size()!==c.points.size())return!1;for(var p=0;p<this.points.size();p++)if(!this.equal(this.points.getCoordinate(p),c.points.getCoordinate(p),u))return!1;return!0}return Ee.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var a=0;a<Math.trunc(this.points.size()/2);a++){var u=this.points.size()-1-a;if(!this.points.getCoordinate(a).equals(this.points.getCoordinate(u)))return this.points.getCoordinate(a).compareTo(this.points.getCoordinate(u))>0&&Ke.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?ke.FALSE:0},isClosed:function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return Ge.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var a=this.points.copy();Ke.reverse(a);var u=this.getFactory().createLineString(a);return u},compareToSameClass:function(){if(arguments.length===1){for(var a=arguments[0],u=a,c=0,p=0;c<this.points.size()&&p<u.points.size();){var v=this.points.getCoordinate(c).compareTo(u.points.getCoordinate(p));if(v!==0)return v;c++,p++}return c<this.points.size()?1:p<u.points.size()?-1:0}if(arguments.length===2){var S=arguments[0],N=arguments[1],u=S;return N.compare(this.points,u.points)}},apply:function(){if(I(arguments[0],Ve))for(var a=arguments[0],u=0;u<this.points.size();u++)a.filter(this.points.getCoordinate(u));else if(I(arguments[0],nn)){var c=arguments[0];if(this.points.size()===0)return null;for(var u=0;u<this.points.size()&&(c.filter(this.points,u),!c.isDone());u++);c.isGeometryChanged()&&this.geometryChanged()}else if(I(arguments[0],rn)){var p=arguments[0];p.filter(this)}else if(I(arguments[0],Me)){var v=arguments[0];v.filter(this)}},getBoundary:function(){return new Ut(this).getBoundary()},isEquivalentClass:function(a){return a instanceof At},clone:function(){var a=Ee.prototype.clone.call(this);return a.points=this.points.clone(),a},getCoordinateN:function(a){return this.points.getCoordinate(a)},getGeometryType:function(){return"LineString"},copy:function(){return new At(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return this.points.size()===0},init:function(a){if(a===null&&(a=this.getFactory().getCoordinateSequenceFactory().create([])),a.size()===1)throw new d("Invalid number of points in LineString (found "+a.size()+" - must be 0 or >= 2)");this.points=a},isCoordinate:function(a){for(var u=0;u<this.points.size();u++)if(this.points.getCoordinate(u).equals(a))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(a){return this.getFactory().createPoint(this.points.getCoordinate(a))},interfaces_:function(){return[It]},getClass:function(){return At}}),At.serialVersionUID=0x2b2b51ba435c8e00,o(dn.prototype,{interfaces_:function(){return[]},getClass:function(){return dn}}),E(ht,Ee),o(ht.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new Q;var a=new Q;return a.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),a},getSortIndex:function(){return Ee.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];return this.isEquivalentClass(a)?this.isEmpty()&&a.isEmpty()?!0:this.isEmpty()!==a.isEmpty()?!1:this.equal(a.getCoordinate(),this.getCoordinate(),u):!1}return Ee.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return this.coordinates.size()!==0?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return ke.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(arguments.length===1){var a=arguments[0],u=a;return this.getCoordinate().compareTo(u.getCoordinate())}if(arguments.length===2){var c=arguments[0],p=arguments[1],u=c;return p.compare(this.coordinates,u.coordinates)}},apply:function(){if(I(arguments[0],Ve)){var a=arguments[0];if(this.isEmpty())return null;a.filter(this.getCoordinate())}else if(I(arguments[0],nn)){var u=arguments[0];if(this.isEmpty())return null;u.filter(this.coordinates,0),u.isGeometryChanged()&&this.geometryChanged()}else if(I(arguments[0],rn)){var c=arguments[0];c.filter(this)}else if(I(arguments[0],Me)){var p=arguments[0];p.filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var a=Ee.prototype.clone.call(this);return a.coordinates=this.coordinates.clone(),a},getGeometryType:function(){return"Point"},copy:function(){return new ht(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return this.coordinates.size()===0},init:function(a){a===null&&(a=this.getFactory().getCoordinateSequenceFactory().create([])),$.isTrue(a.size()<=1),this.coordinates=a},isSimple:function(){return!0},interfaces_:function(){return[dn]},getClass:function(){return ht}}),ht.serialVersionUID=4902022702746615e3,o(Bn.prototype,{interfaces_:function(){return[]},getClass:function(){return Bn}}),E(Mt,Ee),o(Mt.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return Ee.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var a=new Array(this.getNumPoints()).fill(null),u=-1,c=this.shell.getCoordinates(),p=0;p<c.length;p++)u++,a[u]=c[p];for(var v=0;v<this.holes.length;v++)for(var S=this.holes[v].getCoordinates(),N=0;N<S.length;N++)u++,a[u]=S[N];return a},getArea:function(){var a=0;a+=Math.abs(Ge.signedArea(this.shell.getCoordinateSequence()));for(var u=0;u<this.holes.length;u++)a-=Math.abs(Ge.signedArea(this.holes[u].getCoordinateSequence()));return a},isRectangle:function(){if(this.getNumInteriorRing()!==0||this.shell===null||this.shell.getNumPoints()!==5)return!1;for(var a=this.shell.getCoordinateSequence(),u=this.getEnvelopeInternal(),c=0;5>c;c++){var p=a.getX(c);if(p!==u.getMinX()&&p!==u.getMaxX())return!1;var v=a.getY(c);if(v!==u.getMinY()&&v!==u.getMaxY())return!1}for(var S=a.getX(0),N=a.getY(0),c=1;4>=c;c++){var p=a.getX(c),v=a.getY(c),O=p!==S,ae=v!==N;if(O===ae)return!1;S=p,N=v}return!0},equalsExact:function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];if(!this.isEquivalentClass(a))return!1;var c=a,p=this.shell,v=c.shell;if(!p.equalsExact(v,u)||this.holes.length!==c.holes.length)return!1;for(var S=0;S<this.holes.length;S++)if(!this.holes[S].equalsExact(c.holes[S],u))return!1;return!0}return Ee.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(arguments.length===0){this.normalize(this.shell,!0);for(var a=0;a<this.holes.length;a++)this.normalize(this.holes[a],!1);Kt.sort(this.holes)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];if(u.isEmpty())return null;var p=new Array(u.getCoordinates().length-1).fill(null);Z.arraycopy(u.getCoordinates(),0,p,0,p.length);var v=Oe.minCoordinate(u.getCoordinates());Oe.scroll(p,v),Z.arraycopy(p,0,u.getCoordinates(),0,p.length),u.getCoordinates()[p.length]=p[0],Ge.isCCW(u.getCoordinates())===c&&Oe.reverse(u.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var a=0;a+=this.shell.getLength();for(var u=0;u<this.holes.length;u++)a+=this.holes[u].getLength();return a},getNumPoints:function(){for(var a=this.shell.getNumPoints(),u=0;u<this.holes.length;u++)a+=this.holes[u].getNumPoints();return a},reverse:function(){var a=this.copy();a.shell=this.shell.copy().reverse(),a.holes=new Array(this.holes.length).fill(null);for(var u=0;u<this.holes.length;u++)a.holes[u]=this.holes[u].copy().reverse();return a},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(arguments.length===1){var a=arguments[0],u=this.shell,c=a.shell;return u.compareToSameClass(c)}if(arguments.length===2){var p=arguments[0],v=arguments[1],S=p,u=this.shell,c=S.shell,N=u.compareToSameClass(c,v);if(N!==0)return N;for(var O=this.getNumInteriorRing(),ae=S.getNumInteriorRing(),ve=0;O>ve&&ae>ve;){var Pe=this.getInteriorRingN(ve),Te=S.getInteriorRingN(ve),ze=Pe.compareToSameClass(Te,v);if(ze!==0)return ze;ve++}return O>ve?1:ae>ve?-1:0}},apply:function(){if(I(arguments[0],Ve)){var a=arguments[0];this.shell.apply(a);for(var u=0;u<this.holes.length;u++)this.holes[u].apply(a)}else if(I(arguments[0],nn)){var c=arguments[0];if(this.shell.apply(c),!c.isDone())for(var u=0;u<this.holes.length&&(this.holes[u].apply(c),!c.isDone());u++);c.isGeometryChanged()&&this.geometryChanged()}else if(I(arguments[0],rn)){var p=arguments[0];p.filter(this)}else if(I(arguments[0],Me)){var v=arguments[0];v.filter(this),this.shell.apply(v);for(var u=0;u<this.holes.length;u++)this.holes[u].apply(v)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var a=new Array(this.holes.length+1).fill(null);a[0]=this.shell;for(var u=0;u<this.holes.length;u++)a[u+1]=this.holes[u];return a.length<=1?this.getFactory().createLinearRing(a[0].getCoordinateSequence()):this.getFactory().createMultiLineString(a)},clone:function(){var a=Ee.prototype.clone.call(this);a.shell=this.shell.clone(),a.holes=new Array(this.holes.length).fill(null);for(var u=0;u<this.holes.length;u++)a.holes[u]=this.holes[u].clone();return a},getGeometryType:function(){return"Polygon"},copy:function(){for(var a=this.shell.copy(),u=new Array(this.holes.length).fill(null),c=0;c<u.length;c++)u[c]=this.holes[c].copy();return new Mt(a,u,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(a){return this.holes[a]},interfaces_:function(){return[Bn]},getClass:function(){return Mt}}),Mt.serialVersionUID=-0x307ffefd8dc97200,E(me,Ot),o(me.prototype,{getSortIndex:function(){return Ee.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];return this.isEquivalentClass(a)?Ot.prototype.equalsExact.call(this,a,u):!1}return Ot.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(arguments.length===1){var a=arguments[0];return this.geometries[a].getCoordinate()}return Ot.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return ke.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var a=new Array(this.geometries.length).fill(null),u=0;u<a.length;u++)a[u]=this.geometries[u].copy();return new me(a,this.factory)},interfaces_:function(){return[dn]},getClass:function(){return me}}),me.serialVersionUID=-8048474874175356e3,E(le,At),o(le.prototype,{getSortIndex:function(){return Ee.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return ke.FALSE},isClosed:function(){return this.isEmpty()?!0:At.prototype.isClosed.call(this)},reverse:function(){var a=this.points.copy();Ke.reverse(a);var u=this.getFactory().createLinearRing(a);return u},validateConstruction:function(){if(!this.isEmpty()&&!At.prototype.isClosed.call(this))throw new d;if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<le.MINIMUM_VALID_SIZE)throw new d("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new le(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return le}}),le.MINIMUM_VALID_SIZE=4,le.serialVersionUID=-0x3b229e262367a600,E(oe,Ot),o(oe.prototype,{getSortIndex:function(){return Ee.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];return this.isEquivalentClass(a)?Ot.prototype.equalsExact.call(this,a,u):!1}return Ot.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var a=this.geometries.length,u=new Array(a).fill(null),c=0;c<this.geometries.length;c++)u[c]=this.geometries[c].reverse();return this.getFactory().createMultiPolygon(u)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var a=new q,u=0;u<this.geometries.length;u++)for(var c=this.geometries[u],p=c.getBoundary(),v=0;v<p.getNumGeometries();v++)a.add(p.getGeometryN(v));var S=new Array(a.size()).fill(null);return this.getFactory().createMultiLineString(a.toArray(S))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var a=new Array(this.geometries.length).fill(null),u=0;u<a.length;u++)a[u]=this.geometries[u].copy();return new oe(a,this.factory)},interfaces_:function(){return[Bn]},getClass:function(){return oe}}),oe.serialVersionUID=-0x7a5aa1369171980,o(re.prototype,{setCopyUserData:function(a){this.isUserDataCopied=a},edit:function(a,u){if(a===null)return null;var c=this.editInternal(a,u);return this.isUserDataCopied&&c.setUserData(a.getUserData()),c},editInternal:function(a,u){return this.factory===null&&(this.factory=a.getFactory()),a instanceof Ot?this.editGeometryCollection(a,u):a instanceof Mt?this.editPolygon(a,u):a instanceof ht?u.edit(a,this.factory):a instanceof At?u.edit(a,this.factory):($.shouldNeverReachHere("Unsupported Geometry class: "+a.getClass().getName()),null)},editGeometryCollection:function(a,u){for(var c=u.edit(a,this.factory),p=new q,v=0;v<c.getNumGeometries();v++){var S=this.edit(c.getGeometryN(v),u);S===null||S.isEmpty()||p.add(S)}return c.getClass()===me?this.factory.createMultiPoint(p.toArray([])):c.getClass()===ft?this.factory.createMultiLineString(p.toArray([])):c.getClass()===oe?this.factory.createMultiPolygon(p.toArray([])):this.factory.createGeometryCollection(p.toArray([]))},editPolygon:function(a,u){var c=u.edit(a,this.factory);if(c===null&&(c=this.factory.createPolygon(null)),c.isEmpty())return c;var p=this.edit(c.getExteriorRing(),u);if(p===null||p.isEmpty())return this.factory.createPolygon();for(var v=new q,S=0;S<c.getNumInteriorRing();S++){var N=this.edit(c.getInteriorRingN(S),u);N===null||N.isEmpty()||v.add(N)}return this.factory.createPolygon(p,v.toArray([]))},interfaces_:function(){return[]},getClass:function(){return re}}),re.GeometryEditorOperation=G,o(se.prototype,{edit:function(a,u){return a},interfaces_:function(){return[G]},getClass:function(){return se}}),o(he.prototype,{edit:function(a,u){if(a instanceof le)return u.createLinearRing(this.editCoordinates(a.getCoordinates(),a));if(a instanceof At)return u.createLineString(this.editCoordinates(a.getCoordinates(),a));if(a instanceof ht){var c=this.editCoordinates(a.getCoordinates(),a);return c.length>0?u.createPoint(c[0]):u.createPoint()}return a},interfaces_:function(){return[G]},getClass:function(){return he}}),o(Ie.prototype,{edit:function(a,u){return a instanceof le?u.createLinearRing(this.edit(a.getCoordinateSequence(),a)):a instanceof At?u.createLineString(this.edit(a.getCoordinateSequence(),a)):a instanceof ht?u.createPoint(this.edit(a.getCoordinateSequence(),a)):a},interfaces_:function(){return[G]},getClass:function(){return Ie}}),re.NoOpGeometryOperation=se,re.CoordinateOperation=he,re.CoordinateSequenceOperation=Ie,o(Ce.prototype,{setOrdinate:function(a,u,c){switch(u){case A.X:this.coordinates[a].x=c;break;case A.Y:this.coordinates[a].y=c;break;case A.Z:this.coordinates[a].z=c;break;default:throw new d}},size:function(){return this.coordinates.length},getOrdinate:function(a,u){switch(u){case A.X:return this.coordinates[a].x;case A.Y:return this.coordinates[a].y;case A.Z:return this.coordinates[a].z}return h.NaN},getCoordinate:function(){if(arguments.length===1){var a=arguments[0];return this.coordinates[a]}if(arguments.length===2){var u=arguments[0],c=arguments[1];c.x=this.coordinates[u].x,c.y=this.coordinates[u].y,c.z=this.coordinates[u].z}},getCoordinateCopy:function(a){return new C(this.coordinates[a])},getDimension:function(){return this.dimension},getX:function(a){return this.coordinates[a].x},clone:function(){for(var a=new Array(this.size()).fill(null),u=0;u<this.coordinates.length;u++)a[u]=this.coordinates[u].clone();return new Ce(a,this.dimension)},expandEnvelope:function(a){for(var u=0;u<this.coordinates.length;u++)a.expandToInclude(this.coordinates[u]);return a},copy:function(){for(var a=new Array(this.size()).fill(null),u=0;u<this.coordinates.length;u++)a[u]=this.coordinates[u].copy();return new Ce(a,this.dimension)},toString:function(){if(this.coordinates.length>0){var a=new B(17*this.coordinates.length);a.append("("),a.append(this.coordinates[0]);for(var u=1;u<this.coordinates.length;u++)a.append(", "),a.append(this.coordinates[u]);return a.append(")"),a.toString()}return"()"},getY:function(a){return this.coordinates[a].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[A,b]},getClass:function(){return Ce}}),Ce.serialVersionUID=-0xcb44a778db18e00,o(He.prototype,{readResolve:function(){return He.instance()},create:function(){if(arguments.length===1){if(arguments[0]instanceof Array){var a=arguments[0];return new Ce(a)}if(I(arguments[0],A)){var u=arguments[0];return new Ce(u)}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];return p>3&&(p=3),2>p?new Ce(c):new Ce(c,p)}},interfaces_:function(){return[Ne,b]},getClass:function(){return He}}),He.instance=function(){return He.instanceObject},He.serialVersionUID=-0x38e49fa6cf6f2e00,He.instanceObject=new He;var ni,co=Object.defineProperty,fo=Fe({delete:ct,has:Bt,get:Wt,set:pt,keys:fn,values:cn,entries:Pn,forEach:Zt,clear:bt}),ho=typeof Map<"u"&&Map.prototype.values?Map:fo;$n.prototype=new St,$n.prototype.get=function(a){return this.map_.get(a)||null},$n.prototype.put=function(a,u){return this.map_.set(a,u),u},$n.prototype.values=function(){for(var a=new q,u=this.map_.values(),c=u.next();!c.done;)a.add(c.value),c=u.next();return a},$n.prototype.entrySet=function(){var a=new H;return this.map_.entries().forEach(function(u){return a.add(u)}),a},$n.prototype.size=function(){return this.map_.size()},o(qt.prototype,{equals:function(a){if(!(a instanceof qt))return!1;var u=a;return this.modelType===u.modelType&&this.scale===u.scale},compareTo:function(a){var u=a,c=this.getMaximumSignificantDigits(),p=u.getMaximumSignificantDigits();return new ee(c).compareTo(new ee(p))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===qt.FLOATING||this.modelType===qt.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var a="UNKNOWN";return this.modelType===qt.FLOATING?a="Floating":this.modelType===qt.FLOATING_SINGLE?a="Floating-Single":this.modelType===qt.FIXED&&(a="Fixed (Scale="+this.getScale()+")"),a},makePrecise:function(){if(typeof arguments[0]=="number"){var a=arguments[0];if(h.isNaN(a))return a;if(this.modelType===qt.FLOATING_SINGLE){var u=a;return u}return this.modelType===qt.FIXED?Math.round(a*this.scale)/this.scale:a}if(arguments[0]instanceof C){var c=arguments[0];if(this.modelType===qt.FLOATING)return null;c.x=this.makePrecise(c.x),c.y=this.makePrecise(c.y)}},getMaximumSignificantDigits:function(){var a=16;return this.modelType===qt.FLOATING?a=16:this.modelType===qt.FLOATING_SINGLE?a=6:this.modelType===qt.FIXED&&(a=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),a},setScale:function(a){this.scale=Math.abs(a)},interfaces_:function(){return[b,g]},getClass:function(){return qt}}),qt.mostPrecise=function(a,u){return a.compareTo(u)>=0?a:u},o(Rn.prototype,{readResolve:function(){return Rn.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[b]},getClass:function(){return Rn}}),Rn.serialVersionUID=-552860263173159e4,Rn.nameToTypeMap=new $n,qt.Type=Rn,qt.serialVersionUID=7777263578777804e3,qt.FIXED=new Rn("FIXED"),qt.FLOATING=new Rn("FLOATING"),qt.FLOATING_SINGLE=new Rn("FLOATING SINGLE"),qt.maximumPreciseValue=9007199254740992,o(Dt.prototype,{toGeometry:function(a){return a.isNull()?this.createPoint(null):a.getMinX()===a.getMaxX()&&a.getMinY()===a.getMaxY()?this.createPoint(new C(a.getMinX(),a.getMinY())):a.getMinX()===a.getMaxX()||a.getMinY()===a.getMaxY()?this.createLineString([new C(a.getMinX(),a.getMinY()),new C(a.getMaxX(),a.getMaxY())]):this.createPolygon(this.createLinearRing([new C(a.getMinX(),a.getMinY()),new C(a.getMinX(),a.getMaxY()),new C(a.getMaxX(),a.getMaxY()),new C(a.getMaxX(),a.getMinY()),new C(a.getMinX(),a.getMinY())]),null)},createLineString:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var a=arguments[0];return this.createLineString(a!==null?this.getCoordinateSequenceFactory().create(a):null)}if(I(arguments[0],A)){var u=arguments[0];return new At(u,this)}}},createMultiLineString:function(){if(arguments.length===0)return new ft(null,this);if(arguments.length===1){var a=arguments[0];return new ft(a,this)}},buildGeometry:function(a){for(var u=null,c=!1,p=!1,v=a.iterator();v.hasNext();){var S=v.next(),N=S.getClass();u===null&&(u=N),N!==u&&(c=!0),S.isGeometryCollectionOrDerived()&&(p=!0)}if(u===null)return this.createGeometryCollection();if(c||p)return this.createGeometryCollection(Dt.toGeometryArray(a));var O=a.iterator().next(),ae=a.size()>1;if(ae){if(O instanceof Mt)return this.createMultiPolygon(Dt.toPolygonArray(a));if(O instanceof At)return this.createMultiLineString(Dt.toLineStringArray(a));if(O instanceof ht)return this.createMultiPoint(Dt.toPointArray(a));$.shouldNeverReachHere("Unhandled class: "+O.getClass().getName())}return O},createMultiPointFromCoords:function(a){return this.createMultiPoint(a!==null?this.getCoordinateSequenceFactory().create(a):null)},createPoint:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof C){var a=arguments[0];return this.createPoint(a!==null?this.getCoordinateSequenceFactory().create([a]):null)}if(I(arguments[0],A)){var u=arguments[0];return new ht(u,this)}}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(arguments.length===0)return new Mt(null,null,this);if(arguments.length===1){if(I(arguments[0],A)){var a=arguments[0];return this.createPolygon(this.createLinearRing(a))}if(arguments[0]instanceof Array){var u=arguments[0];return this.createPolygon(this.createLinearRing(u))}if(arguments[0]instanceof le){var c=arguments[0];return this.createPolygon(c,null)}}else if(arguments.length===2){var p=arguments[0],v=arguments[1];return new Mt(p,v,this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){if(arguments.length===0)return new Ot(null,this);if(arguments.length===1){var a=arguments[0];return new Ot(a,this)}},createGeometry:function(a){var u=new re(this);return u.edit(a,{edit:function(){if(arguments.length===2){var c=arguments[0];return this.coordinateSequenceFactory.create(c)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var a=arguments[0];return this.createLinearRing(a!==null?this.getCoordinateSequenceFactory().create(a):null)}if(I(arguments[0],A)){var u=arguments[0];return new le(u,this)}}},createMultiPolygon:function(){if(arguments.length===0)return new oe(null,this);if(arguments.length===1){var a=arguments[0];return new oe(a,this)}},createMultiPoint:function(){if(arguments.length===0)return new me(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var a=arguments[0];return new me(a,this)}if(arguments[0]instanceof Array){var u=arguments[0];return this.createMultiPoint(u!==null?this.getCoordinateSequenceFactory().create(u):null)}if(I(arguments[0],A)){var c=arguments[0];if(c===null)return this.createMultiPoint(new Array(0).fill(null));for(var p=new Array(c.size()).fill(null),v=0;v<c.size();v++){var S=this.getCoordinateSequenceFactory().create(1,c.getDimension());Ke.copy(c,v,S,0,1),p[v]=this.createPoint(S)}return this.createMultiPoint(p)}}},interfaces_:function(){return[b]},getClass:function(){return Dt}}),Dt.toMultiPolygonArray=function(a){var u=new Array(a.size()).fill(null);return a.toArray(u)},Dt.toGeometryArray=function(a){if(a===null)return null;var u=new Array(a.size()).fill(null);return a.toArray(u)},Dt.getDefaultCoordinateSequenceFactory=function(){return He.instance()},Dt.toMultiLineStringArray=function(a){var u=new Array(a.size()).fill(null);return a.toArray(u)},Dt.toLineStringArray=function(a){var u=new Array(a.size()).fill(null);return a.toArray(u)},Dt.toMultiPointArray=function(a){var u=new Array(a.size()).fill(null);return a.toArray(u)},Dt.toLinearRingArray=function(a){var u=new Array(a.size()).fill(null);return a.toArray(u)},Dt.toPointArray=function(a){var u=new Array(a.size()).fill(null);return a.toArray(u)},Dt.toPolygonArray=function(a){var u=new Array(a.size()).fill(null);return a.toArray(u)},Dt.createPointFromInternalCoord=function(a,u){return u.getPrecisionModel().makePrecise(a),u.getFactory().createPoint(a)},Dt.serialVersionUID=-6820524753094096e3;var Gr={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};o(Sr.prototype,{read:function(a){var u,c,p;a=a.replace(/[\n\r]/g," ");var v=Gr.typeStr.exec(a);if(a.search("EMPTY")!==-1&&(v=Gr.emptyTypeStr.exec(a),v[2]=void 0),v&&(c=v[1].toLowerCase(),p=v[2],Da[c]&&(u=Da[c].apply(this,[p]))),u===void 0)throw new Error("Could not parse WKT "+a);return u},write:function(a){return this.extractGeometry(a)},extractGeometry:function(a){var u=a.getGeometryType().toLowerCase();if(!pi[u])return null;var c=u.toUpperCase();return a.isEmpty()?c+" EMPTY":c+"("+pi[u].apply(this,[a])+")"}});var pi={coordinate:function(a){return a.x+" "+a.y},point:function(a){return pi.coordinate.call(this,a.coordinates.coordinates[0])},multipoint:function(a){for(var u=[],c=0,p=a.geometries.length;p>c;++c)u.push("("+pi.point.apply(this,[a.geometries[c]])+")");return u.join(",")},linestring:function(a){for(var u=[],c=0,p=a.points.coordinates.length;p>c;++c)u.push(pi.coordinate.apply(this,[a.points.coordinates[c]]));return u.join(",")},linearring:function(a){for(var u=[],c=0,p=a.points.coordinates.length;p>c;++c)u.push(pi.coordinate.apply(this,[a.points.coordinates[c]]));return u.join(",")},multilinestring:function(a){for(var u=[],c=0,p=a.geometries.length;p>c;++c)u.push("("+pi.linestring.apply(this,[a.geometries[c]])+")");return u.join(",")},polygon:function(a){var u=[];u.push("("+pi.linestring.apply(this,[a.shell])+")");for(var c=0,p=a.holes.length;p>c;++c)u.push("("+pi.linestring.apply(this,[a.holes[c]])+")");return u.join(",")},multipolygon:function(a){for(var u=[],c=0,p=a.geometries.length;p>c;++c)u.push("("+pi.polygon.apply(this,[a.geometries[c]])+")");return u.join(",")},geometrycollection:function(a){for(var u=[],c=0,p=a.geometries.length;p>c;++c)u.push(this.extractGeometry(a.geometries[c]));return u.join(",")}},Da={point:function(a){if(a===void 0)return this.geometryFactory.createPoint();var u=a.trim().split(Gr.spaces);return this.geometryFactory.createPoint(new C(Number.parseFloat(u[0]),Number.parseFloat(u[1])))},multipoint:function(a){if(a===void 0)return this.geometryFactory.createMultiPoint();for(var u,c=a.trim().split(","),p=[],v=0,S=c.length;S>v;++v)u=c[v].replace(Gr.trimParens,"$1"),p.push(Da.point.apply(this,[u]));return this.geometryFactory.createMultiPoint(p)},linestring:function(a){if(a===void 0)return this.geometryFactory.createLineString();for(var u,c=a.trim().split(","),p=[],v=0,S=c.length;S>v;++v)u=c[v].trim().split(Gr.spaces),p.push(new C(Number.parseFloat(u[0]),Number.parseFloat(u[1])));return this.geometryFactory.createLineString(p)},linearring:function(a){if(a===void 0)return this.geometryFactory.createLinearRing();for(var u,c=a.trim().split(","),p=[],v=0,S=c.length;S>v;++v)u=c[v].trim().split(Gr.spaces),p.push(new C(Number.parseFloat(u[0]),Number.parseFloat(u[1])));return this.geometryFactory.createLinearRing(p)},multilinestring:function(a){if(a===void 0)return this.geometryFactory.createMultiLineString();for(var u,c=a.trim().split(Gr.parenComma),p=[],v=0,S=c.length;S>v;++v)u=c[v].replace(Gr.trimParens,"$1"),p.push(Da.linestring.apply(this,[u]));return this.geometryFactory.createMultiLineString(p)},polygon:function(a){if(a===void 0)return this.geometryFactory.createPolygon();for(var u,c,p,v,S=a.trim().split(Gr.parenComma),N=[],O=0,ae=S.length;ae>O;++O)u=S[O].replace(Gr.trimParens,"$1"),c=Da.linestring.apply(this,[u]),p=this.geometryFactory.createLinearRing(c.points),O===0?v=p:N.push(p);return this.geometryFactory.createPolygon(v,N)},multipolygon:function(a){if(a===void 0)return this.geometryFactory.createMultiPolygon();for(var u,c=a.trim().split(Gr.doubleParenComma),p=[],v=0,S=c.length;S>v;++v)u=c[v].replace(Gr.trimParens,"$1"),p.push(Da.polygon.apply(this,[u]));return this.geometryFactory.createMultiPolygon(p)},geometrycollection:function(a){if(a===void 0)return this.geometryFactory.createGeometryCollection();a=a.replace(/,\s*([A-Za-z])/g,"|$1");for(var u=a.trim().split("|"),c=[],p=0,v=u.length;v>p;++p)c.push(this.read(u[p]));return this.geometryFactory.createGeometryCollection(c)}};o(xn.prototype,{write:function(a){return this.parser.write(a)}}),o(xn,{toLineString:function(a,u){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+a.x+" "+a.y+", "+u.x+" "+u.y+" )"}}),o(Vt.prototype,{getIndexAlongSegment:function(a,u){return this.computeIntLineIndex(),this.intLineIndex[a][u]},getTopologySummary:function(){var a=new B;return this.isEndPoint()&&a.append(" endpoint"),this._isProper&&a.append(" proper"),this.isCollinear()&&a.append(" collinear"),a.toString()},computeIntersection:function(a,u,c,p){this.inputLines[0][0]=a,this.inputLines[0][1]=u,this.inputLines[1][0]=c,this.inputLines[1][1]=p,this.result=this.computeIntersect(a,u,c,p)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(arguments.length===0)this.intLineIndex===null&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var a=arguments[0],u=this.getEdgeDistance(a,0),c=this.getEdgeDistance(a,1);u>c?(this.intLineIndex[a][0]=0,this.intLineIndex[a][1]=1):(this.intLineIndex[a][0]=1,this.intLineIndex[a][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(a){this.precisionModel=a},isInteriorIntersection:function(){if(arguments.length===0)return this.isInteriorIntersection(0)?!0:!!this.isInteriorIntersection(1);if(arguments.length===1){for(var a=arguments[0],u=0;u<this.result;u++)if(!this.intPt[u].equals2D(this.inputLines[a][0])&&!this.intPt[u].equals2D(this.inputLines[a][1]))return!0;return!1}},getIntersection:function(a){return this.intPt[a]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==Vt.NO_INTERSECTION},getEdgeDistance:function(a,u){var c=Vt.computeEdgeDistance(this.intPt[u],this.inputLines[a][0],this.inputLines[a][1]);return c},isCollinear:function(){return this.result===Vt.COLLINEAR_INTERSECTION},toString:function(){return xn.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+xn.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(a,u){return this.inputLines[a][u]},isIntersection:function(a){for(var u=0;u<this.result;u++)if(this.intPt[u].equals2D(a))return!0;return!1},getIntersectionAlongSegment:function(a,u){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[a][u]]},interfaces_:function(){return[]},getClass:function(){return Vt}}),Vt.computeEdgeDistance=function(a,u,c){var p=Math.abs(c.x-u.x),v=Math.abs(c.y-u.y),S=-1;if(a.equals(u))S=0;else if(a.equals(c))S=p>v?p:v;else{var N=Math.abs(a.x-u.x),O=Math.abs(a.y-u.y);S=p>v?N:O,S!==0||a.equals(u)||(S=Math.max(N,O))}return $.isTrue(!(S===0&&!a.equals(u)),"Bad distance calculation"),S},Vt.nonRobustComputeEdgeDistance=function(a,u,c){var p=a.x-u.x,v=a.y-u.y,S=Math.sqrt(p*p+v*v);return $.isTrue(!(S===0&&!a.equals(u)),"Invalid distance calculation"),S},Vt.DONT_INTERSECT=0,Vt.DO_INTERSECT=1,Vt.COLLINEAR=2,Vt.NO_INTERSECTION=0,Vt.POINT_INTERSECTION=1,Vt.COLLINEAR_INTERSECTION=2,E(Cn,Vt),o(Cn.prototype,{isInSegmentEnvelopes:function(a){var u=new Q(this.inputLines[0][0],this.inputLines[0][1]),c=new Q(this.inputLines[1][0],this.inputLines[1][1]);return u.contains(a)&&c.contains(a)},computeIntersection:function(){if(arguments.length!==3)return Vt.prototype.computeIntersection.apply(this,arguments);var a=arguments[0],u=arguments[1],c=arguments[2];return this._isProper=!1,Q.intersects(u,c,a)&&Ge.orientationIndex(u,c,a)===0&&Ge.orientationIndex(c,u,a)===0?(this._isProper=!0,(a.equals(u)||a.equals(c))&&(this._isProper=!1),this.result=Vt.POINT_INTERSECTION,null):void(this.result=Vt.NO_INTERSECTION)},normalizeToMinimum:function(a,u,c,p,v){v.x=this.smallestInAbsValue(a.x,u.x,c.x,p.x),v.y=this.smallestInAbsValue(a.y,u.y,c.y,p.y),a.x-=v.x,a.y-=v.y,u.x-=v.x,u.y-=v.y,c.x-=v.x,c.y-=v.y,p.x-=v.x,p.y-=v.y},safeHCoordinateIntersection:function(a,u,c,p){var v=null;try{v=$e.intersection(a,u,c,p)}catch(S){if(!(S instanceof J))throw S;v=Cn.nearestEndpoint(a,u,c,p)}finally{}return v},intersection:function(a,u,c,p){var v=this.intersectionWithNormalization(a,u,c,p);return this.isInSegmentEnvelopes(v)||(v=new C(Cn.nearestEndpoint(a,u,c,p))),this.precisionModel!==null&&this.precisionModel.makePrecise(v),v},smallestInAbsValue:function(a,u,c,p){var v=a,S=Math.abs(v);return Math.abs(u)<S&&(v=u,S=Math.abs(u)),Math.abs(c)<S&&(v=c,S=Math.abs(c)),Math.abs(p)<S&&(v=p),v},checkDD:function(a,u,c,p,v){var S=X.intersection(a,u,c,p),N=this.isInSegmentEnvelopes(S);Z.out.println("DD in env = "+N+"  --------------------- "+S),v.distance(S)>1e-4&&Z.out.println("Distance = "+v.distance(S))},intersectionWithNormalization:function(a,u,c,p){var v=new C(a),S=new C(u),N=new C(c),O=new C(p),ae=new C;this.normalizeToEnvCentre(v,S,N,O,ae);var ve=this.safeHCoordinateIntersection(v,S,N,O);return ve.x+=ae.x,ve.y+=ae.y,ve},computeCollinearIntersection:function(a,u,c,p){var v=Q.intersects(a,u,c),S=Q.intersects(a,u,p),N=Q.intersects(c,p,a),O=Q.intersects(c,p,u);return v&&S?(this.intPt[0]=c,this.intPt[1]=p,Vt.COLLINEAR_INTERSECTION):N&&O?(this.intPt[0]=a,this.intPt[1]=u,Vt.COLLINEAR_INTERSECTION):v&&N?(this.intPt[0]=c,this.intPt[1]=a,!c.equals(a)||S||O?Vt.COLLINEAR_INTERSECTION:Vt.POINT_INTERSECTION):v&&O?(this.intPt[0]=c,this.intPt[1]=u,!c.equals(u)||S||N?Vt.COLLINEAR_INTERSECTION:Vt.POINT_INTERSECTION):S&&N?(this.intPt[0]=p,this.intPt[1]=a,!p.equals(a)||v||O?Vt.COLLINEAR_INTERSECTION:Vt.POINT_INTERSECTION):S&&O?(this.intPt[0]=p,this.intPt[1]=u,!p.equals(u)||v||N?Vt.COLLINEAR_INTERSECTION:Vt.POINT_INTERSECTION):Vt.NO_INTERSECTION},normalizeToEnvCentre:function(a,u,c,p,v){var S=a.x<u.x?a.x:u.x,N=a.y<u.y?a.y:u.y,O=a.x>u.x?a.x:u.x,ae=a.y>u.y?a.y:u.y,ve=c.x<p.x?c.x:p.x,Pe=c.y<p.y?c.y:p.y,Te=c.x>p.x?c.x:p.x,ze=c.y>p.y?c.y:p.y,mt=S>ve?S:ve,Ft=Te>O?O:Te,jt=N>Pe?N:Pe,In=ze>ae?ae:ze,Fn=(mt+Ft)/2,jr=(jt+In)/2;v.x=Fn,v.y=jr,a.x-=v.x,a.y-=v.y,u.x-=v.x,u.y-=v.y,c.x-=v.x,c.y-=v.y,p.x-=v.x,p.y-=v.y},computeIntersect:function(a,u,c,p){if(this._isProper=!1,!Q.intersects(a,u,c,p))return Vt.NO_INTERSECTION;var v=Ge.orientationIndex(a,u,c),S=Ge.orientationIndex(a,u,p);if(v>0&&S>0||0>v&&0>S)return Vt.NO_INTERSECTION;var N=Ge.orientationIndex(c,p,a),O=Ge.orientationIndex(c,p,u);if(N>0&&O>0||0>N&&0>O)return Vt.NO_INTERSECTION;var ae=v===0&&S===0&&N===0&&O===0;return ae?this.computeCollinearIntersection(a,u,c,p):(v===0||S===0||N===0||O===0?(this._isProper=!1,a.equals2D(c)||a.equals2D(p)?this.intPt[0]=a:u.equals2D(c)||u.equals2D(p)?this.intPt[0]=u:v===0?this.intPt[0]=new C(c):S===0?this.intPt[0]=new C(p):N===0?this.intPt[0]=new C(a):O===0&&(this.intPt[0]=new C(u))):(this._isProper=!0,this.intPt[0]=this.intersection(a,u,c,p)),Vt.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return Cn}}),Cn.nearestEndpoint=function(a,u,c,p){var v=a,S=Ge.distancePointLine(a,c,p),N=Ge.distancePointLine(u,c,p);return S>N&&(S=N,v=u),N=Ge.distancePointLine(c,a,u),S>N&&(S=N,v=c),N=Ge.distancePointLine(p,a,u),S>N&&(S=N,v=p),v},o(cr.prototype,{interfaces_:function(){return[]},getClass:function(){return cr}}),cr.orientationIndex=function(a,u,c){var p=u.x-a.x,v=u.y-a.y,S=c.x-u.x,N=c.y-u.y;return cr.signOfDet2x2(p,v,S,N)},cr.signOfDet2x2=function(a,u,c,p){var v=null,S=null,N=null;if(v=1,a===0||p===0)return u===0||c===0?0:u>0?c>0?-v:v:c>0?v:-v;if(u===0||c===0)return p>0?a>0?v:-v:a>0?-v:v;if(u>0?p>0?p>=u||(v=-v,S=a,a=c,c=S,S=u,u=p,p=S):-p>=u?(v=-v,c=-c,p=-p):(S=a,a=-c,c=S,S=u,u=-p,p=S):p>0?p>=-u?(v=-v,a=-a,u=-u):(S=-a,a=c,c=S,S=-u,u=p,p=S):u>=p?(a=-a,u=-u,c=-c,p=-p):(v=-v,S=-a,a=-c,c=S,S=-u,u=-p,p=S),a>0){if(!(c>0)||!(c>=a))return v}else{if(c>0||!(a>=c))return-v;v=-v,a=-a,c=-c}for(;;){if(N=Math.floor(c/a),c-=N*a,p-=N*u,0>p)return-v;if(p>u)return v;if(a>c+c){if(p+p>u)return v}else{if(u>p+p)return-v;c=a-c,p=u-p,v=-v}if(p===0)return c===0?0:-v;if(c===0||(N=Math.floor(a/c),a-=N*c,u-=N*p,0>u))return v;if(u>p)return-v;if(c>a+a){if(u+u>p)return-v}else{if(p>u+u)return v;a=c-a,u=p-u,v=-v}if(u===0)return a===0?0:v;if(a===0)return-v}},o(Er.prototype,{countSegment:function(a,u){if(a.x<this.p.x&&u.x<this.p.x)return null;if(this.p.x===u.x&&this.p.y===u.y)return this.isPointOnSegment=!0,null;if(a.y===this.p.y&&u.y===this.p.y){var c=a.x,p=u.x;return c>p&&(c=u.x,p=a.x),this.p.x>=c&&this.p.x<=p&&(this.isPointOnSegment=!0),null}if(a.y>this.p.y&&u.y<=this.p.y||u.y>this.p.y&&a.y<=this.p.y){var v=a.x-this.p.x,S=a.y-this.p.y,N=u.x-this.p.x,O=u.y-this.p.y,ae=cr.signOfDet2x2(v,S,N,O);if(ae===0)return this.isPointOnSegment=!0,null;S>O&&(ae=-ae),ae>0&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==x.EXTERIOR},getLocation:function(){return this.isPointOnSegment?x.BOUNDARY:this.crossingCount%2===1?x.INTERIOR:x.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return Er}}),Er.locatePointInRing=function(){if(arguments[0]instanceof C&&I(arguments[1],A)){for(var a=arguments[0],u=arguments[1],c=new Er(a),p=new C,v=new C,S=1;S<u.size();S++)if(u.getCoordinate(S,p),u.getCoordinate(S-1,v),c.countSegment(p,v),c.isOnSegment())return c.getLocation();return c.getLocation()}if(arguments[0]instanceof C&&arguments[1]instanceof Array){for(var N=arguments[0],O=arguments[1],c=new Er(N),S=1;S<O.length;S++){var p=O[S],v=O[S-1];if(c.countSegment(p,v),c.isOnSegment())return c.getLocation()}return c.getLocation()}},o(Ge.prototype,{interfaces_:function(){return[]},getClass:function(){return Ge}}),Ge.orientationIndex=function(a,u,c){return X.orientationIndex(a,u,c)},Ge.signedArea=function(){if(arguments[0]instanceof Array){var a=arguments[0];if(a.length<3)return 0;for(var u=0,c=a[0].x,p=1;p<a.length-1;p++){var v=a[p].x-c,S=a[p+1].y,N=a[p-1].y;u+=v*(N-S)}return u/2}if(I(arguments[0],A)){var O=arguments[0],ae=O.size();if(3>ae)return 0;var ve=new C,Pe=new C,Te=new C;O.getCoordinate(0,Pe),O.getCoordinate(1,Te);var c=Pe.x;Te.x-=c;for(var u=0,p=1;ae-1>p;p++)ve.y=Pe.y,Pe.x=Te.x,Pe.y=Te.y,O.getCoordinate(p+1,Te),Te.x-=c,u+=Pe.x*(ve.y-Te.y);return u/2}},Ge.distanceLineLine=function(a,u,c,p){if(a.equals(u))return Ge.distancePointLine(a,c,p);if(c.equals(p))return Ge.distancePointLine(p,a,u);var v=!1;if(Q.intersects(a,u,c,p)){var S=(u.x-a.x)*(p.y-c.y)-(u.y-a.y)*(p.x-c.x);if(S===0)v=!0;else{var N=(a.y-c.y)*(p.x-c.x)-(a.x-c.x)*(p.y-c.y),O=(a.y-c.y)*(u.x-a.x)-(a.x-c.x)*(u.y-a.y),ae=O/S,ve=N/S;(0>ve||ve>1||0>ae||ae>1)&&(v=!0)}}else v=!0;return v?R.min(Ge.distancePointLine(a,c,p),Ge.distancePointLine(u,c,p),Ge.distancePointLine(c,a,u),Ge.distancePointLine(p,a,u)):0},Ge.isPointInRing=function(a,u){return Ge.locatePointInRing(a,u)!==x.EXTERIOR},Ge.computeLength=function(a){var u=a.size();if(1>=u)return 0;var c=0,p=new C;a.getCoordinate(0,p);for(var v=p.x,S=p.y,N=1;u>N;N++){a.getCoordinate(N,p);var O=p.x,ae=p.y,ve=O-v,Pe=ae-S;c+=Math.sqrt(ve*ve+Pe*Pe),v=O,S=ae}return c},Ge.isCCW=function(a){var u=a.length-1;if(3>u)throw new d;for(var c=a[0],p=0,v=1;u>=v;v++){var S=a[v];S.y>c.y&&(c=S,p=v)}var N=p;do N-=1,0>N&&(N=u);while(a[N].equals2D(c)&&N!==p);var O=p;do O=(O+1)%u;while(a[O].equals2D(c)&&O!==p);var ae=a[N],ve=a[O];if(ae.equals2D(c)||ve.equals2D(c)||ae.equals2D(ve))return!1;var Pe=Ge.computeOrientation(ae,c,ve);return Pe===0?ae.x>ve.x:Pe>0},Ge.locatePointInRing=function(a,u){return Er.locatePointInRing(a,u)},Ge.distancePointLinePerpendicular=function(a,u,c){var p=(c.x-u.x)*(c.x-u.x)+(c.y-u.y)*(c.y-u.y),v=((u.y-a.y)*(c.x-u.x)-(u.x-a.x)*(c.y-u.y))/p;return Math.abs(v)*Math.sqrt(p)},Ge.computeOrientation=function(a,u,c){return Ge.orientationIndex(a,u,c)},Ge.distancePointLine=function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];if(u.length===0)throw new d;for(var c=a.distance(u[0]),p=0;p<u.length-1;p++){var v=Ge.distancePointLine(a,u[p],u[p+1]);c>v&&(c=v)}return c}if(arguments.length===3){var S=arguments[0],N=arguments[1],O=arguments[2];if(N.x===O.x&&N.y===O.y)return S.distance(N);var ae=(O.x-N.x)*(O.x-N.x)+(O.y-N.y)*(O.y-N.y),ve=((S.x-N.x)*(O.x-N.x)+(S.y-N.y)*(O.y-N.y))/ae;if(0>=ve)return S.distance(N);if(ve>=1)return S.distance(O);var Pe=((N.y-S.y)*(O.x-N.x)-(N.x-S.x)*(O.y-N.y))/ae;return Math.abs(Pe)*Math.sqrt(ae)}},Ge.isOnLine=function(a,u){for(var c=new Cn,p=1;p<u.length;p++){var v=u[p-1],S=u[p];if(c.computeIntersection(a,v,S),c.hasIntersection())return!0}return!1},Ge.CLOCKWISE=-1,Ge.RIGHT=Ge.CLOCKWISE,Ge.COUNTERCLOCKWISE=1,Ge.LEFT=Ge.COUNTERCLOCKWISE,Ge.COLLINEAR=0,Ge.STRAIGHT=Ge.COLLINEAR,o(Ht.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof Ht){var a=arguments[0],u=Ge.orientationIndex(this.p0,this.p1,a.p0),c=Ge.orientationIndex(this.p0,this.p1,a.p1);return u>=0&&c>=0||0>=u&&0>=c?Math.max(u,c):0}if(arguments[0]instanceof C){var p=arguments[0];return Ge.orientationIndex(this.p0,this.p1,p)}},toGeometry:function(a){return a.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(a){if(!(a instanceof Ht))return!1;var u=a;return this.p0.equals(u.p0)&&this.p1.equals(u.p1)},intersection:function(a){var u=new Cn;return u.computeIntersection(this.p0,this.p1,a.p0,a.p1),u.hasIntersection()?u.getIntersection(0):null},project:function(){if(arguments[0]instanceof C){var a=arguments[0];if(a.equals(this.p0)||a.equals(this.p1))return new C(a);var u=this.projectionFactor(a),c=new C;return c.x=this.p0.x+u*(this.p1.x-this.p0.x),c.y=this.p0.y+u*(this.p1.y-this.p0.y),c}if(arguments[0]instanceof Ht){var p=arguments[0],v=this.projectionFactor(p.p0),S=this.projectionFactor(p.p1);if(v>=1&&S>=1||0>=v&&0>=S)return null;var N=this.project(p.p0);0>v&&(N=this.p0),v>1&&(N=this.p1);var O=this.project(p.p1);return 0>S&&(O=this.p0),S>1&&(O=this.p1),new Ht(N,O)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(a){return a===0?this.p0:this.p1},distancePerpendicular:function(a){return Ge.distancePointLinePerpendicular(a,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return Ht.midPoint(this.p0,this.p1)},projectionFactor:function(a){if(a.equals(this.p0))return 0;if(a.equals(this.p1))return 1;var u=this.p1.x-this.p0.x,c=this.p1.y-this.p0.y,p=u*u+c*c;if(0>=p)return h.NaN;var v=((a.x-this.p0.x)*u+(a.y-this.p0.y)*c)/p;return v},closestPoints:function(a){var u=this.intersection(a);if(u!==null)return[u,u];var c=new Array(2).fill(null),p=h.MAX_VALUE,v=null,S=this.closestPoint(a.p0);p=S.distance(a.p0),c[0]=S,c[1]=a.p0;var N=this.closestPoint(a.p1);v=N.distance(a.p1),p>v&&(p=v,c[0]=N,c[1]=a.p1);var O=a.closestPoint(this.p0);v=O.distance(this.p0),p>v&&(p=v,c[0]=this.p0,c[1]=O);var ae=a.closestPoint(this.p1);return v=ae.distance(this.p1),p>v&&(p=v,c[0]=this.p1,c[1]=ae),c},closestPoint:function(a){var u=this.projectionFactor(a);if(u>0&&1>u)return this.project(a);var c=this.p0.distance(a),p=this.p1.distance(a);return p>c?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(a){var u=a,c=this.p0.compareTo(u.p0);return c!==0?c:this.p1.compareTo(u.p1)},reverse:function(){var a=this.p0;this.p0=this.p1,this.p1=a},equalsTopo:function(a){return this.p0.equals(a.p0)&&this.p1.equals(a.p1)||this.p0.equals(a.p1)&&this.p1.equals(a.p0)},lineIntersection:function(a){try{var u=$e.intersection(this.p0,this.p1,a.p0,a.p1);return u}catch(c){if(!(c instanceof J))throw c}finally{}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(a,u){var c=this.p0.x+a*(this.p1.x-this.p0.x),p=this.p0.y+a*(this.p1.y-this.p0.y),v=this.p1.x-this.p0.x,S=this.p1.y-this.p0.y,N=Math.sqrt(v*v+S*S),O=0,ae=0;if(u!==0){if(0>=N)throw new IllegalStateException("Cannot compute offset from zero-length line segment");O=u*v/N,ae=u*S/N}var ve=c-ae,Pe=p+O,Te=new C(ve,Pe);return Te},setCoordinates:function(){if(arguments.length===1){var a=arguments[0];this.setCoordinates(a.p0,a.p1)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.p0.x=u.x,this.p0.y=u.y,this.p1.x=c.x,this.p1.y=c.y}},segmentFraction:function(a){var u=this.projectionFactor(a);return 0>u?u=0:(u>1||h.isNaN(u))&&(u=1),u},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof Ht){var a=arguments[0];return Ge.distanceLineLine(this.p0,this.p1,a.p0,a.p1)}if(arguments[0]instanceof C){var u=arguments[0];return Ge.distancePointLine(u,this.p0,this.p1)}},pointAlong:function(a){var u=new C;return u.x=this.p0.x+a*(this.p1.x-this.p0.x),u.y=this.p0.y+a*(this.p1.y-this.p0.y),u},hashCode:function(){var a=java.lang.Double.doubleToLongBits(this.p0.x);a^=31*java.lang.Double.doubleToLongBits(this.p0.y);var u=Math.trunc(a)^Math.trunc(a>>32),c=java.lang.Double.doubleToLongBits(this.p1.x);c^=31*java.lang.Double.doubleToLongBits(this.p1.y);var p=Math.trunc(c)^Math.trunc(c>>32);return u^p},interfaces_:function(){return[g,b]},getClass:function(){return Ht}}),Ht.midPoint=function(a,u){return new C((a.x+u.x)/2,(a.y+u.y)/2)},Ht.serialVersionUID=0x2d2172135f411c00,o(zt.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){var a=zt.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])||zt.isTrue(this.matrix[x.INTERIOR][x.BOUNDARY])||zt.isTrue(this.matrix[x.BOUNDARY][x.INTERIOR])||zt.isTrue(this.matrix[x.BOUNDARY][x.BOUNDARY]);return a&&this.matrix[x.EXTERIOR][x.INTERIOR]===ke.FALSE&&this.matrix[x.EXTERIOR][x.BOUNDARY]===ke.FALSE},isCoveredBy:function(){var a=zt.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])||zt.isTrue(this.matrix[x.INTERIOR][x.BOUNDARY])||zt.isTrue(this.matrix[x.BOUNDARY][x.INTERIOR])||zt.isTrue(this.matrix[x.BOUNDARY][x.BOUNDARY]);return a&&this.matrix[x.INTERIOR][x.EXTERIOR]===ke.FALSE&&this.matrix[x.BOUNDARY][x.EXTERIOR]===ke.FALSE},set:function(){if(arguments.length===1)for(var a=arguments[0],u=0;u<a.length;u++){var c=Math.trunc(u/3),p=u%3;this.matrix[c][p]=ke.toDimensionValue(a.charAt(u))}else if(arguments.length===3){var v=arguments[0],S=arguments[1],N=arguments[2];this.matrix[v][S]=N}},isContains:function(){return zt.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&this.matrix[x.EXTERIOR][x.INTERIOR]===ke.FALSE&&this.matrix[x.EXTERIOR][x.BOUNDARY]===ke.FALSE},setAtLeast:function(){if(arguments.length===1)for(var a=arguments[0],u=0;u<a.length;u++){var c=Math.trunc(u/3),p=u%3;this.setAtLeast(c,p,ke.toDimensionValue(a.charAt(u)))}else if(arguments.length===3){var v=arguments[0],S=arguments[1],N=arguments[2];this.matrix[v][S]<N&&(this.matrix[v][S]=N)}},setAtLeastIfValid:function(a,u,c){a>=0&&u>=0&&this.setAtLeast(a,u,c)},isWithin:function(){return zt.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&this.matrix[x.INTERIOR][x.EXTERIOR]===ke.FALSE&&this.matrix[x.BOUNDARY][x.EXTERIOR]===ke.FALSE},isTouches:function(a,u){return a>u?this.isTouches(u,a):a===ke.A&&u===ke.A||a===ke.L&&u===ke.L||a===ke.L&&u===ke.A||a===ke.P&&u===ke.A||a===ke.P&&u===ke.L?this.matrix[x.INTERIOR][x.INTERIOR]===ke.FALSE&&(zt.isTrue(this.matrix[x.INTERIOR][x.BOUNDARY])||zt.isTrue(this.matrix[x.BOUNDARY][x.INTERIOR])||zt.isTrue(this.matrix[x.BOUNDARY][x.BOUNDARY])):!1},isOverlaps:function(a,u){return a===ke.P&&u===ke.P||a===ke.A&&u===ke.A?zt.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&zt.isTrue(this.matrix[x.INTERIOR][x.EXTERIOR])&&zt.isTrue(this.matrix[x.EXTERIOR][x.INTERIOR]):a===ke.L&&u===ke.L?this.matrix[x.INTERIOR][x.INTERIOR]===1&&zt.isTrue(this.matrix[x.INTERIOR][x.EXTERIOR])&&zt.isTrue(this.matrix[x.EXTERIOR][x.INTERIOR]):!1},isEquals:function(a,u){return a!==u?!1:zt.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&this.matrix[x.INTERIOR][x.EXTERIOR]===ke.FALSE&&this.matrix[x.BOUNDARY][x.EXTERIOR]===ke.FALSE&&this.matrix[x.EXTERIOR][x.INTERIOR]===ke.FALSE&&this.matrix[x.EXTERIOR][x.BOUNDARY]===ke.FALSE},toString:function(){for(var a=new B("123456789"),u=0;3>u;u++)for(var c=0;3>c;c++)a.setCharAt(3*u+c,ke.toDimensionSymbol(this.matrix[u][c]));return a.toString()},setAll:function(a){for(var u=0;3>u;u++)for(var c=0;3>c;c++)this.matrix[u][c]=a},get:function(a,u){return this.matrix[a][u]},transpose:function(){var a=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=a,a=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=a,a=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=a,this},matches:function(a){if(a.length!==9)throw new d;for(var u=0;3>u;u++)for(var c=0;3>c;c++)if(!zt.matches(this.matrix[u][c],a.charAt(3*u+c)))return!1;return!0},add:function(a){for(var u=0;3>u;u++)for(var c=0;3>c;c++)this.setAtLeast(u,c,a.get(u,c))},isDisjoint:function(){return this.matrix[x.INTERIOR][x.INTERIOR]===ke.FALSE&&this.matrix[x.INTERIOR][x.BOUNDARY]===ke.FALSE&&this.matrix[x.BOUNDARY][x.INTERIOR]===ke.FALSE&&this.matrix[x.BOUNDARY][x.BOUNDARY]===ke.FALSE},isCrosses:function(a,u){return a===ke.P&&u===ke.L||a===ke.P&&u===ke.A||a===ke.L&&u===ke.A?zt.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&zt.isTrue(this.matrix[x.INTERIOR][x.EXTERIOR]):a===ke.L&&u===ke.P||a===ke.A&&u===ke.P||a===ke.A&&u===ke.L?zt.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&zt.isTrue(this.matrix[x.EXTERIOR][x.INTERIOR]):a===ke.L&&u===ke.L?this.matrix[x.INTERIOR][x.INTERIOR]===0:!1},interfaces_:function(){return[m]},getClass:function(){return zt}}),zt.matches=function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var a=arguments[0],u=arguments[1];return u===ke.SYM_DONTCARE||u===ke.SYM_TRUE&&(a>=0||a===ke.TRUE)||u===ke.SYM_FALSE&&a===ke.FALSE||u===ke.SYM_P&&a===ke.P||u===ke.SYM_L&&a===ke.L?!0:u===ke.SYM_A&&a===ke.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var c=arguments[0],p=arguments[1],v=new zt(c);return v.matches(p)}},zt.isTrue=function(a){return a>=0||a===ke.TRUE};var go=Object.freeze({Coordinate:C,CoordinateList:te,Envelope:Q,LineSegment:Ht,GeometryFactory:Dt,Geometry:Ee,Point:ht,LineString:At,LinearRing:le,Polygon:Mt,GeometryCollection:Ot,MultiPoint:me,MultiLineString:ft,MultiPolygon:oe,Dimension:ke,IntersectionMatrix:zt});o(Zn.prototype,{addPoint:function(a){this.ptCount+=1,this.ptCentSum.x+=a.x,this.ptCentSum.y+=a.y},setBasePoint:function(a){this.areaBasePt===null&&(this.areaBasePt=a)},addLineSegments:function(a){for(var u=0,c=0;c<a.length-1;c++){var p=a[c].distance(a[c+1]);if(p!==0){u+=p;var v=(a[c].x+a[c+1].x)/2;this.lineCentSum.x+=p*v;var S=(a[c].y+a[c+1].y)/2;this.lineCentSum.y+=p*S}}this.totalLength+=u,u===0&&a.length>0&&this.addPoint(a[0])},addHole:function(a){for(var u=Ge.isCCW(a),c=0;c<a.length-1;c++)this.addTriangle(this.areaBasePt,a[c],a[c+1],u);this.addLineSegments(a)},getCentroid:function(){var a=new C;if(Math.abs(this.areasum2)>0)a.x=this.cg3.x/3/this.areasum2,a.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)a.x=this.lineCentSum.x/this.totalLength,a.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;a.x=this.ptCentSum.x/this.ptCount,a.y=this.ptCentSum.y/this.ptCount}return a},addShell:function(a){a.length>0&&this.setBasePoint(a[0]);for(var u=!Ge.isCCW(a),c=0;c<a.length-1;c++)this.addTriangle(this.areaBasePt,a[c],a[c+1],u);this.addLineSegments(a)},addTriangle:function(a,u,c,p){var v=p?1:-1;Zn.centroid3(a,u,c,this.triangleCent3);var S=Zn.area2(a,u,c);this.cg3.x+=v*S*this.triangleCent3.x,this.cg3.y+=v*S*this.triangleCent3.y,this.areasum2+=v*S},add:function(){if(arguments[0]instanceof Mt){var a=arguments[0];this.addShell(a.getExteriorRing().getCoordinates());for(var u=0;u<a.getNumInteriorRing();u++)this.addHole(a.getInteriorRingN(u).getCoordinates())}else if(arguments[0]instanceof Ee){var c=arguments[0];if(c.isEmpty())return null;if(c instanceof ht)this.addPoint(c.getCoordinate());else if(c instanceof At)this.addLineSegments(c.getCoordinates());else if(c instanceof Mt){var p=c;this.add(p)}else if(c instanceof Ot)for(var v=c,u=0;u<v.getNumGeometries();u++)this.add(v.getGeometryN(u))}},interfaces_:function(){return[]},getClass:function(){return Zn}}),Zn.area2=function(a,u,c){return(u.x-a.x)*(c.y-a.y)-(c.x-a.x)*(u.y-a.y)},Zn.centroid3=function(a,u,c,p){return p.x=a.x+u.x+c.x,p.y=a.y+u.y+c.y,null},Zn.getCentroid=function(a){var u=new Zn(a);return u.getCentroid()},Kr.prototype=new Error,Kr.prototype.name="EmptyStackException",Mn.prototype=new k,Mn.prototype.add=function(a){return this.array_.push(a),!0},Mn.prototype.get=function(a){if(0>a||a>=this.size())throw new IndexOutOfBoundsException;return this.array_[a]},Mn.prototype.push=function(a){return this.array_.push(a),a},Mn.prototype.pop=function(a){if(this.array_.length===0)throw new Kr;return this.array_.pop()},Mn.prototype.peek=function(){if(this.array_.length===0)throw new Kr;return this.array_[this.array_.length-1]},Mn.prototype.empty=function(){return this.array_.length===0},Mn.prototype.isEmpty=function(){return this.empty()},Mn.prototype.search=function(a){return this.array_.indexOf(a)},Mn.prototype.size=function(){return this.array_.length},Mn.prototype.toArray=function(){for(var a=[],u=0,c=this.array_.length;c>u;u++)a.push(this.array_[u]);return a},o(Ar.prototype,{filter:function(a){this.treeSet.contains(a)||(this.list.add(a),this.treeSet.add(a))},getCoordinates:function(){var a=new Array(this.list.size()).fill(null);return this.list.toArray(a)},interfaces_:function(){return[Ve]},getClass:function(){return Ar}}),Ar.filterCoordinates=function(a){for(var u=new Ar,c=0;c<a.length;c++)u.filter(a[c]);return u.getCoordinates()},o(M.prototype,{preSort:function(a){for(var u=null,c=1;c<a.length;c++)(a[c].y<a[0].y||a[c].y===a[0].y&&a[c].x<a[0].x)&&(u=a[0],a[0]=a[c],a[c]=u);return Kt.sort(a,1,a.length,new V(a[0])),a},computeOctRing:function(a){var u=this.computeOctPts(a),c=new te;return c.add(u,!1),c.size()<3?null:(c.closeRing(),c.toCoordinateArray())},lineOrPolygon:function(a){if(a=this.cleanRing(a),a.length===3)return this.geomFactory.createLineString([a[0],a[1]]);var u=this.geomFactory.createLinearRing(a);return this.geomFactory.createPolygon(u,null)},cleanRing:function(a){$.equals(a[0],a[a.length-1]);for(var u=new q,c=null,p=0;p<=a.length-2;p++){var v=a[p],S=a[p+1];v.equals(S)||c!==null&&this.isBetween(c,v,S)||(u.add(v),c=v)}u.add(a[a.length-1]);var N=new Array(u.size()).fill(null);return u.toArray(N)},isBetween:function(a,u,c){return Ge.computeOrientation(a,u,c)!==0?!1:a.x!==c.x&&(a.x<=u.x&&u.x<=c.x||c.x<=u.x&&u.x<=a.x)||a.y!==c.y&&(a.y<=u.y&&u.y<=c.y||c.y<=u.y&&u.y<=a.y)},reduce:function(a){var u=this.computeOctRing(a);if(u===null)return a;for(var c=new dt,p=0;p<u.length;p++)c.add(u[p]);for(var p=0;p<a.length;p++)Ge.isPointInRing(a[p],u)||c.add(a[p]);var v=Oe.toCoordinateArray(c);return v.length<3?this.padArray3(v):v},getConvexHull:function(){if(this.inputPts.length===0)return this.geomFactory.createGeometryCollection(null);if(this.inputPts.length===1)return this.geomFactory.createPoint(this.inputPts[0]);if(this.inputPts.length===2)return this.geomFactory.createLineString(this.inputPts);var a=this.inputPts;this.inputPts.length>50&&(a=this.reduce(this.inputPts));var u=this.preSort(a),c=this.grahamScan(u),p=this.toCoordinateArray(c);return this.lineOrPolygon(p)},padArray3:function(a){for(var u=new Array(3).fill(null),c=0;c<u.length;c++)c<a.length?u[c]=a[c]:u[c]=a[0];return u},computeOctPts:function(a){for(var u=new Array(8).fill(null),c=0;c<u.length;c++)u[c]=a[0];for(var p=1;p<a.length;p++)a[p].x<u[0].x&&(u[0]=a[p]),a[p].x-a[p].y<u[1].x-u[1].y&&(u[1]=a[p]),a[p].y>u[2].y&&(u[2]=a[p]),a[p].x+a[p].y>u[3].x+u[3].y&&(u[3]=a[p]),a[p].x>u[4].x&&(u[4]=a[p]),a[p].x-a[p].y>u[5].x-u[5].y&&(u[5]=a[p]),a[p].y<u[6].y&&(u[6]=a[p]),a[p].x+a[p].y<u[7].x+u[7].y&&(u[7]=a[p]);return u},toCoordinateArray:function(a){for(var u=new Array(a.size()).fill(null),c=0;c<a.size();c++){var p=a.get(c);u[c]=p}return u},grahamScan:function(a){var u=null,c=new Mn;u=c.push(a[0]),u=c.push(a[1]),u=c.push(a[2]);for(var p=3;p<a.length;p++){for(u=c.pop();!c.empty()&&Ge.computeOrientation(c.peek(),u,a[p])>0;)u=c.pop();u=c.push(u),u=c.push(a[p])}return u=c.push(a[0]),c},interfaces_:function(){return[]},getClass:function(){return M}}),M.extractCoordinates=function(a){var u=new Ar;return a.apply(u),u.getCoordinates()},o(V.prototype,{compare:function(a,u){var c=a,p=u;return V.polarCompare(this.origin,c,p)},interfaces_:function(){return[y]},getClass:function(){return V}}),V.polarCompare=function(a,u,c){var p=u.x-a.x,v=u.y-a.y,S=c.x-a.x,N=c.y-a.y,O=Ge.computeOrientation(a,u,c);if(O===Ge.COUNTERCLOCKWISE)return 1;if(O===Ge.CLOCKWISE)return-1;var ae=p*p+v*v,ve=S*S+N*N;return ve>ae?-1:ae>ve?1:0},M.RadialComparator=V,o(ye.prototype,{transformPoint:function(a,u){return this.factory.createPoint(this.transformCoordinates(a.getCoordinateSequence(),a))},transformPolygon:function(a,u){var c=!0,p=this.transformLinearRing(a.getExteriorRing(),a);p!==null&&p instanceof le&&!p.isEmpty()||(c=!1);for(var v=new q,S=0;S<a.getNumInteriorRing();S++){var N=this.transformLinearRing(a.getInteriorRingN(S),a);N===null||N.isEmpty()||(N instanceof le||(c=!1),v.add(N))}if(c)return this.factory.createPolygon(p,v.toArray([]));var O=new q;return p!==null&&O.add(p),O.addAll(v),this.factory.buildGeometry(O)},createCoordinateSequence:function(a){return this.factory.getCoordinateSequenceFactory().create(a)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(a,u){for(var c=new q,p=0;p<a.getNumGeometries();p++){var v=this.transformLineString(a.getGeometryN(p),a);v!==null&&(v.isEmpty()||c.add(v))}return this.factory.buildGeometry(c)},transformCoordinates:function(a,u){return this.copy(a)},transformLineString:function(a,u){return this.factory.createLineString(this.transformCoordinates(a.getCoordinateSequence(),a))},transformMultiPoint:function(a,u){for(var c=new q,p=0;p<a.getNumGeometries();p++){var v=this.transformPoint(a.getGeometryN(p),a);v!==null&&(v.isEmpty()||c.add(v))}return this.factory.buildGeometry(c)},transformMultiPolygon:function(a,u){for(var c=new q,p=0;p<a.getNumGeometries();p++){var v=this.transformPolygon(a.getGeometryN(p),a);v!==null&&(v.isEmpty()||c.add(v))}return this.factory.buildGeometry(c)},copy:function(a){return a.copy()},transformGeometryCollection:function(a,u){for(var c=new q,p=0;p<a.getNumGeometries();p++){var v=this.transform(a.getGeometryN(p));v!==null&&(this.pruneEmptyGeometry&&v.isEmpty()||c.add(v))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(Dt.toGeometryArray(c)):this.factory.buildGeometry(c)},transform:function(a){if(this.inputGeom=a,this.factory=a.getFactory(),a instanceof ht)return this.transformPoint(a,null);if(a instanceof me)return this.transformMultiPoint(a,null);if(a instanceof le)return this.transformLinearRing(a,null);if(a instanceof At)return this.transformLineString(a,null);if(a instanceof ft)return this.transformMultiLineString(a,null);if(a instanceof Mt)return this.transformPolygon(a,null);if(a instanceof oe)return this.transformMultiPolygon(a,null);if(a instanceof Ot)return this.transformGeometryCollection(a,null);throw new d("Unknown Geometry subtype: "+a.getClass().getName())},transformLinearRing:function(a,u){var c=this.transformCoordinates(a.getCoordinateSequence(),a);if(c===null)return this.factory.createLinearRing(null);var p=c.size();return p>0&&4>p&&!this.preserveType?this.factory.createLineString(c):this.factory.createLinearRing(c)},interfaces_:function(){return[]},getClass:function(){return ye}}),o(we.prototype,{snapVertices:function(a,u){for(var c=this._isClosed?a.size()-1:a.size(),p=0;c>p;p++){var v=a.get(p),S=this.findSnapForVertex(v,u);S!==null&&(a.set(p,new C(S)),p===0&&this._isClosed&&a.set(a.size()-1,new C(S)))}},findSnapForVertex:function(a,u){for(var c=0;c<u.length;c++){if(a.equals2D(u[c]))return null;if(a.distance(u[c])<this.snapTolerance)return u[c]}return null},snapTo:function(a){var u=new te(this.srcPts);this.snapVertices(u,a),this.snapSegments(u,a);var c=u.toCoordinateArray();return c},snapSegments:function(a,u){if(u.length===0)return null;var c=u.length;u[0].equals2D(u[u.length-1])&&(c=u.length-1);for(var p=0;c>p;p++){var v=u[p],S=this.findSegmentIndexToSnap(v,a);S>=0&&a.add(S+1,new C(v),!1)}},findSegmentIndexToSnap:function(a,u){for(var c=h.MAX_VALUE,p=-1,v=0;v<u.size()-1;v++){if(this.seg.p0=u.get(v),this.seg.p1=u.get(v+1),this.seg.p0.equals2D(a)||this.seg.p1.equals2D(a)){if(this.allowSnappingToSourceVertices)continue;return-1}var S=this.seg.distance(a);S<this.snapTolerance&&c>S&&(c=S,p=v)}return p},setAllowSnappingToSourceVertices:function(a){this.allowSnappingToSourceVertices=a},interfaces_:function(){return[]},getClass:function(){return we}}),we.isClosed=function(a){return a.length<=1?!1:a[0].equals2D(a[a.length-1])},o(fe.prototype,{snapTo:function(a,u){var c=this.extractTargetCoordinates(a),p=new Ae(u,c);return p.transform(this.srcGeom)},snapToSelf:function(a,u){var c=this.extractTargetCoordinates(this.srcGeom),p=new Ae(a,c,!0),v=p.transform(this.srcGeom),S=v;return u&&I(S,Bn)&&(S=v.buffer(0)),S},computeSnapTolerance:function(a){var u=this.computeMinimumSegmentLength(a),c=u/10;return c},extractTargetCoordinates:function(a){for(var u=new dt,c=a.getCoordinates(),p=0;p<c.length;p++)u.add(c[p]);return u.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(a){for(var u=h.MAX_VALUE,c=0;c<a.length-1;c++){var p=a[c].distance(a[c+1]);u>p&&(u=p)}return u},interfaces_:function(){return[]},getClass:function(){return fe}}),fe.snap=function(a,u,c){var p=new Array(2).fill(null),v=new fe(a);p[0]=v.snapTo(u,c);var S=new fe(u);return p[1]=S.snapTo(p[0],c),p},fe.computeOverlaySnapTolerance=function(){if(arguments.length===1){var a=arguments[0],u=fe.computeSizeBasedSnapTolerance(a),c=a.getPrecisionModel();if(c.getType()===qt.FIXED){var p=1/c.getScale()*2/1.415;p>u&&(u=p)}return u}if(arguments.length===2){var v=arguments[0],S=arguments[1];return Math.min(fe.computeOverlaySnapTolerance(v),fe.computeOverlaySnapTolerance(S))}},fe.computeSizeBasedSnapTolerance=function(a){var u=a.getEnvelopeInternal(),c=Math.min(u.getHeight(),u.getWidth()),p=c*fe.SNAP_PRECISION_FACTOR;return p},fe.snapToSelf=function(a,u,c){var p=new fe(a);return p.snapToSelf(u,c)},fe.SNAP_PRECISION_FACTOR=1e-9,E(Ae,ye),o(Ae.prototype,{snapLine:function(a,u){var c=new we(a,this.snapTolerance);return c.setAllowSnappingToSourceVertices(this.isSelfSnap),c.snapTo(u)},transformCoordinates:function(a,u){var c=a.toCoordinateArray(),p=this.snapLine(c,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(p)},interfaces_:function(){return[]},getClass:function(){return Ae}}),o(be.prototype,{getCommon:function(){return h.longBitsToDouble(this.commonBits)},add:function(a){var u=h.doubleToLongBits(a);if(this.isFirst)return this.commonBits=u,this.commonSignExp=be.signExpBits(this.commonBits),this.isFirst=!1,null;var c=be.signExpBits(u);return c!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=be.numCommonMostSigMantissaBits(this.commonBits,u),void(this.commonBits=be.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(arguments.length===1){var a=arguments[0],u=h.longBitsToDouble(a),c=Long.toBinaryString(a),p="0000000000000000000000000000000000000000000000000000000000000000"+c,v=p.substring(p.length-64),S=v.substring(0,1)+"  "+v.substring(1,12)+"(exp) "+v.substring(12)+" [ "+u+" ]";return S}},interfaces_:function(){return[]},getClass:function(){return be}}),be.getBit=function(a,u){var c=1<<u;return a&c?1:0},be.signExpBits=function(a){return a>>52},be.zeroLowerBits=function(a,u){var c=(1<<u)-1,p=~c,v=a&p;return v},be.numCommonMostSigMantissaBits=function(a,u){for(var c=0,p=52;p>=0;p--){if(be.getBit(a,p)!==be.getBit(u,p))return c;c++}return 52},o(Ue.prototype,{addCommonBits:function(a){var u=new ot(this.commonCoord);a.apply(u),a.geometryChanged()},removeCommonBits:function(a){if(this.commonCoord.x===0&&this.commonCoord.y===0)return a;var u=new C(this.commonCoord);u.x=-u.x,u.y=-u.y;var c=new ot(u);return a.apply(c),a.geometryChanged(),a},getCommonCoordinate:function(){return this.commonCoord},add:function(a){a.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return Ue}}),o(Ye.prototype,{filter:function(a){this.commonBitsX.add(a.x),this.commonBitsY.add(a.y)},getCommonCoordinate:function(){return new C(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[Ve]},getClass:function(){return Ye}}),o(ot.prototype,{filter:function(a,u){var c=a.getOrdinate(u,0)+this.trans.x,p=a.getOrdinate(u,1)+this.trans.y;a.setOrdinate(u,0,c),a.setOrdinate(u,1,p)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[nn]},getClass:function(){return ot}}),Ue.CommonCoordinateFilter=Ye,Ue.Translater=ot,o(je.prototype,{next:function(){if(this.atStart)return this.atStart=!1,je.isAtomic(this.parent)&&this.index++,this.parent;if(this.subcollectionIterator!==null){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new F;var a=this.parent.getGeometryN(this.index++);return a instanceof Ot?(this.subcollectionIterator=new je(a),this.subcollectionIterator.next()):a},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(this.subcollectionIterator!==null){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[W]},getClass:function(){return je}}),je.isAtomic=function(a){return!(a instanceof Ot)},o(lt.prototype,{locateInternal:function(){if(arguments[0]instanceof C&&arguments[1]instanceof Mt){var a=arguments[0],u=arguments[1];if(u.isEmpty())return x.EXTERIOR;var c=u.getExteriorRing(),p=this.locateInPolygonRing(a,c);if(p===x.EXTERIOR)return x.EXTERIOR;if(p===x.BOUNDARY)return x.BOUNDARY;for(var v=0;v<u.getNumInteriorRing();v++){var S=u.getInteriorRingN(v),N=this.locateInPolygonRing(a,S);if(N===x.INTERIOR)return x.EXTERIOR;if(N===x.BOUNDARY)return x.BOUNDARY}return x.INTERIOR}if(arguments[0]instanceof C&&arguments[1]instanceof At){var O=arguments[0],ae=arguments[1];if(!ae.getEnvelopeInternal().intersects(O))return x.EXTERIOR;var ve=ae.getCoordinates();return ae.isClosed()||!O.equals(ve[0])&&!O.equals(ve[ve.length-1])?Ge.isOnLine(O,ve)?x.INTERIOR:x.EXTERIOR:x.BOUNDARY}if(arguments[0]instanceof C&&arguments[1]instanceof ht){var Pe=arguments[0],Te=arguments[1],ze=Te.getCoordinate();return ze.equals2D(Pe)?x.INTERIOR:x.EXTERIOR}},locateInPolygonRing:function(a,u){return u.getEnvelopeInternal().intersects(a)?Ge.locatePointInRing(a,u.getCoordinates()):x.EXTERIOR},intersects:function(a,u){return this.locate(a,u)!==x.EXTERIOR},updateLocationInfo:function(a){a===x.INTERIOR&&(this.isIn=!0),a===x.BOUNDARY&&this.numBoundaries++},computeLocation:function(a,u){if(u instanceof ht&&this.updateLocationInfo(this.locateInternal(a,u)),u instanceof At)this.updateLocationInfo(this.locateInternal(a,u));else if(u instanceof Mt)this.updateLocationInfo(this.locateInternal(a,u));else if(u instanceof ft)for(var c=u,p=0;p<c.getNumGeometries();p++){var v=c.getGeometryN(p);this.updateLocationInfo(this.locateInternal(a,v))}else if(u instanceof oe)for(var S=u,p=0;p<S.getNumGeometries();p++){var N=S.getGeometryN(p);this.updateLocationInfo(this.locateInternal(a,N))}else if(u instanceof Ot)for(var O=new je(u);O.hasNext();){var ae=O.next();ae!==u&&this.computeLocation(a,ae)}},locate:function(a,u){return u.isEmpty()?x.EXTERIOR:u instanceof At?this.locateInternal(a,u):u instanceof Mt?this.locateInternal(a,u):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(a,u),this.boundaryRule.isInBoundary(this.numBoundaries)?x.BOUNDARY:this.numBoundaries>0||this.isIn?x.INTERIOR:x.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return lt}}),o(Nt.prototype,{interfaces_:function(){return[]},getClass:function(){return Nt}}),Nt.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var a=arguments[0],u=arguments[1];if(a===0&&u===0)throw new d;var c=Math.abs(a),p=Math.abs(u);return a>=0?u>=0?c>=p?0:1:c>=p?7:6:u>=0?c>=p?3:2:c>=p?4:5}if(arguments[0]instanceof C&&arguments[1]instanceof C){var v=arguments[0],S=arguments[1],N=S.x-v.x,O=S.y-v.y;if(N===0&&O===0)throw new d;return Nt.octant(N,O)}},o(vt.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(a){},isClosed:function(){},setData:function(a){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return vt}}),o(rt.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(a){return this.pts[a]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(a){return a===this.pts.length-1?-1:Nt.octant(this.getCoordinate(a),this.getCoordinate(a+1))},setData:function(a){this.data=a},getData:function(){return this.data},toString:function(){return xn.toLineString(new Ce(this.pts))},interfaces_:function(){return[vt]},getClass:function(){return rt}}),o(We.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return We}}),o(at.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[We,b]},getClass:function(){return at}}),o(Rt.prototype,{poll:function(){if(this.isEmpty())return null;var a=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),a},size:function(){return this._size},reorder:function(a){for(var u=null,c=this.items.get(a);2*a<=this._size&&(u=2*a,u!==this._size&&this.items.get(u+1).compareTo(this.items.get(u))<0&&u++,this.items.get(u).compareTo(c)<0);a=u)this.items.set(a,this.items.get(u));this.items.set(a,c)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return this._size===0},add:function(a){this.items.add(null),this._size+=1;var u=this._size;for(this.items.set(0,a);a.compareTo(this.items.get(Math.trunc(u/2)))<0;u/=2)this.items.set(u,this.items.get(Math.trunc(u/2)));this.items.set(u,a)},interfaces_:function(){return[]},getClass:function(){return Rt}}),o(Pt.prototype,{visitItem:function(a){},interfaces_:function(){return[]},getClass:function(){return Pt}}),o(hn.prototype,{insert:function(a,u){},remove:function(a,u){},query:function(){},interfaces_:function(){return[]},getClass:function(){return hn}}),o(xt.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(a){$.isTrue(this.bounds===null),this.childBoundables.add(a)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return this.bounds===null&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[We,b]},getClass:function(){return xt}}),xt.serialVersionUID=6493722185909574e3;var ri={reverseOrder:function(){return{compare:function(a,u){return u.compareTo(a)}}},min:function(a){return ri.sort(a),a.get(0)},sort:function(a,u){var c=a.toArray();u?Kt.sort(c,u):Kt.sort(c);for(var p=a.iterator(),v=0,S=c.length;S>v;v++)p.next(),p.set(c[v])},singletonList:function(a){var u=new q;return u.add(a),u}};o(it.prototype,{expandToQueue:function(a,u){var c=it.isComposite(this.boundable1),p=it.isComposite(this.boundable2);if(c&&p)return it.area(this.boundable1)>it.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,a,u),null):(this.expand(this.boundable2,this.boundable1,a,u),null);if(c)return this.expand(this.boundable1,this.boundable2,a,u),null;if(p)return this.expand(this.boundable2,this.boundable1,a,u),null;throw new d},isLeaves:function(){return!(it.isComposite(this.boundable1)||it.isComposite(this.boundable2))},compareTo:function(a){var u=a;return this._distance<u._distance?-1:this._distance>u._distance?1:0},expand:function(a,u,c,p){for(var v=a.getChildBoundables(),S=v.iterator();S.hasNext();){var N=S.next(),O=new it(N,u,this.itemDistance);O.getDistance()<p&&c.add(O)}},getBoundable:function(a){return a===0?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[g]},getClass:function(){return it}}),it.area=function(a){return a.getBounds().getArea()},it.isComposite=function(a){return a instanceof xt},o(Ze.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(a){return a.get(a.size()-1)},size:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this.root));if(arguments.length===1){for(var u=arguments[0],c=0,p=u.getChildBoundables().iterator();p.hasNext();){var v=p.next();v instanceof xt?c+=this.size(v):v instanceof at&&(c+=1)}return c}},removeItem:function(a,u){for(var c=null,p=a.getChildBoundables().iterator();p.hasNext();){var v=p.next();v instanceof at&&v.getItem()===u&&(c=v)}return c!==null?(a.getChildBoundables().remove(c),!0):!1},itemsTree:function(){if(arguments.length===0){this.build();var a=this.itemsTree(this.root);return a===null?new q:a}if(arguments.length===1){for(var u=arguments[0],c=new q,p=u.getChildBoundables().iterator();p.hasNext();){var v=p.next();if(v instanceof xt){var S=this.itemsTree(v);S!==null&&c.add(S)}else v instanceof at?c.add(v.getItem()):$.shouldNeverReachHere()}return c.size()<=0?null:c}},insert:function(a,u){$.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new at(a,u))},boundablesAtLevel:function(){if(arguments.length===1){var a=arguments[0],u=new q;return this.boundablesAtLevel(a,this.root,u),u}if(arguments.length===3){var c=arguments[0],p=arguments[1],v=arguments[2];if($.isTrue(c>-2),p.getLevel()===c)return v.add(p),null;for(var S=p.getChildBoundables().iterator();S.hasNext();){var N=S.next();N instanceof xt?this.boundablesAtLevel(c,N,v):($.isTrue(N instanceof at),c===-1&&v.add(N))}return null}},query:function(){if(arguments.length===1){var a=arguments[0];this.build();var u=new q;return this.isEmpty()||this.getIntersectsOp().intersects(this.root.getBounds(),a)&&this.query(a,this.root,u),u}if(arguments.length===2){var c=arguments[0],p=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),c)&&this.query(c,this.root,p)}else if(arguments.length===3){if(I(arguments[2],Pt)&&arguments[0]instanceof Object&&arguments[1]instanceof xt)for(var v=arguments[0],S=arguments[1],N=arguments[2],O=S.getChildBoundables(),ae=0;ae<O.size();ae++){var ve=O.get(ae);this.getIntersectsOp().intersects(ve.getBounds(),v)&&(ve instanceof xt?this.query(v,ve,N):ve instanceof at?N.visitItem(ve.getItem()):$.shouldNeverReachHere())}else if(I(arguments[2],k)&&arguments[0]instanceof Object&&arguments[1]instanceof xt)for(var Pe=arguments[0],Te=arguments[1],ze=arguments[2],O=Te.getChildBoundables(),ae=0;ae<O.size();ae++){var ve=O.get(ae);this.getIntersectsOp().intersects(ve.getBounds(),Pe)&&(ve instanceof xt?this.query(Pe,ve,ze):ve instanceof at?ze.add(ve.getItem()):$.shouldNeverReachHere())}}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];return this.build(),this.getIntersectsOp().intersects(this.root.getBounds(),a)?this.remove(a,this.root,u):!1}if(arguments.length===3){var c=arguments[0],p=arguments[1],v=arguments[2],S=this.removeItem(p,v);if(S)return!0;for(var N=null,O=p.getChildBoundables().iterator();O.hasNext();){var ae=O.next();if(this.getIntersectsOp().intersects(ae.getBounds(),c)&&ae instanceof xt&&(S=this.remove(c,ae,v))){N=ae;break}}return N!==null&&N.getChildBoundables().isEmpty()&&p.getChildBoundables().remove(N),S}},createHigherLevels:function(a,u){$.isTrue(!a.isEmpty());var c=this.createParentBoundables(a,u+1);return c.size()===1?c.get(0):this.createHigherLevels(c,u+1)},depth:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(arguments.length===1){for(var a=arguments[0],u=0,c=a.getChildBoundables().iterator();c.hasNext();){var p=c.next();if(p instanceof xt){var v=this.depth(p);v>u&&(u=v)}}return u+1}},createParentBoundables:function(a,u){$.isTrue(!a.isEmpty());var c=new q;c.add(this.createNode(u));var p=new q(a);ri.sort(p,this.getComparator());for(var v=p.iterator();v.hasNext();){var S=v.next();this.lastNode(c).getChildBoundables().size()===this.getNodeCapacity()&&c.add(this.createNode(u)),this.lastNode(c).addChildBoundable(S)}return c},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[b]},getClass:function(){return Ze}}),Ze.compareDoubles=function(a,u){return a>u?1:u>a?-1:0},Ze.IntersectsOp=Et,Ze.serialVersionUID=-3886435814360241e3,Ze.DEFAULT_NODE_CAPACITY=10,o(Xt.prototype,{distance:function(a,u){},interfaces_:function(){return[]},getClass:function(){return Xt}}),E(kt,Ze),o(kt.prototype,{createParentBoundablesFromVerticalSlices:function(a,u){$.isTrue(a.length>0);for(var c=new q,p=0;p<a.length;p++)c.addAll(this.createParentBoundablesFromVerticalSlice(a[p],u));return c},createNode:function(a){return new Qt(a)},size:function(){return arguments.length===0?Ze.prototype.size.call(this):Ze.prototype.size.apply(this,arguments)},insert:function(){if(arguments.length!==2)return Ze.prototype.insert.apply(this,arguments);var a=arguments[0],u=arguments[1];return a.isNull()?null:void Ze.prototype.insert.call(this,a,u)},getIntersectsOp:function(){return kt.intersectsOp},verticalSlices:function(a,u){for(var c=Math.trunc(Math.ceil(a.size()/u)),p=new Array(u).fill(null),v=a.iterator(),S=0;u>S;S++){p[S]=new q;for(var N=0;v.hasNext()&&c>N;){var O=v.next();p[S].add(O),N++}}return p},query:function(){if(arguments.length===1){var a=arguments[0];return Ze.prototype.query.call(this,a)}if(arguments.length===2){var u=arguments[0],c=arguments[1];Ze.prototype.query.call(this,u,c)}else if(arguments.length===3){if(I(arguments[2],Pt)&&arguments[0]instanceof Object&&arguments[1]instanceof xt){var p=arguments[0],v=arguments[1],S=arguments[2];Ze.prototype.query.call(this,p,v,S)}else if(I(arguments[2],k)&&arguments[0]instanceof Object&&arguments[1]instanceof xt){var N=arguments[0],O=arguments[1],ae=arguments[2];Ze.prototype.query.call(this,N,O,ae)}}},getComparator:function(){return kt.yComparator},createParentBoundablesFromVerticalSlice:function(a,u){return Ze.prototype.createParentBoundables.call(this,a,u)},remove:function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];return Ze.prototype.remove.call(this,a,u)}return Ze.prototype.remove.apply(this,arguments)},depth:function(){return arguments.length===0?Ze.prototype.depth.call(this):Ze.prototype.depth.apply(this,arguments)},createParentBoundables:function(a,u){$.isTrue(!a.isEmpty());var c=Math.trunc(Math.ceil(a.size()/this.getNodeCapacity())),p=new q(a);ri.sort(p,kt.xComparator);var v=this.verticalSlices(p,Math.trunc(Math.ceil(Math.sqrt(c))));return this.createParentBoundablesFromVerticalSlices(v,u)},nearestNeighbour:function(){if(arguments.length===1){if(I(arguments[0],Xt)){var a=arguments[0],u=new it(this.getRoot(),this.getRoot(),a);return this.nearestNeighbour(u)}if(arguments[0]instanceof it){var c=arguments[0];return this.nearestNeighbour(c,h.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof kt&&I(arguments[1],Xt)){var p=arguments[0],v=arguments[1],u=new it(this.getRoot(),p.getRoot(),v);return this.nearestNeighbour(u)}if(arguments[0]instanceof it&&typeof arguments[1]=="number"){var S=arguments[0],N=arguments[1],O=N,ae=null,ve=new Rt;for(ve.add(S);!ve.isEmpty()&&O>0;){var Pe=ve.poll(),Te=Pe.getDistance();if(Te>=O)break;Pe.isLeaves()?(O=Te,ae=Pe):Pe.expandToQueue(ve,O)}return[ae.getBoundable(0).getItem(),ae.getBoundable(1).getItem()]}}else if(arguments.length===3){var ze=arguments[0],mt=arguments[1],Ft=arguments[2],jt=new at(ze,mt),u=new it(this.getRoot(),jt,Ft);return this.nearestNeighbour(u)[0]}},interfaces_:function(){return[hn,b]},getClass:function(){return kt}}),kt.centreX=function(a){return kt.avg(a.getMinX(),a.getMaxX())},kt.avg=function(a,u){return(a+u)/2},kt.centreY=function(a){return kt.avg(a.getMinY(),a.getMaxY())},E(Qt,xt),o(Qt.prototype,{computeBounds:function(){for(var a=null,u=this.getChildBoundables().iterator();u.hasNext();){var c=u.next();a===null?a=new Q(c.getBounds()):a.expandToInclude(c.getBounds())}return a},interfaces_:function(){return[]},getClass:function(){return Qt}}),kt.STRtreeNode=Qt,kt.serialVersionUID=0x39920f7d5f261e0,kt.xComparator={interfaces_:function(){return[y]},compare:function(a,u){return Ze.compareDoubles(kt.centreX(a.getBounds()),kt.centreX(u.getBounds()))}},kt.yComparator={interfaces_:function(){return[y]},compare:function(a,u){return Ze.compareDoubles(kt.centreY(a.getBounds()),kt.centreY(u.getBounds()))}},kt.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(a,u){return a.intersects(u)}},kt.DEFAULT_NODE_CAPACITY=10,o(Gt.prototype,{interfaces_:function(){return[]},getClass:function(){return Gt}}),Gt.relativeSign=function(a,u){return u>a?-1:a>u?1:0},Gt.compare=function(a,u,c){if(u.equals2D(c))return 0;var p=Gt.relativeSign(u.x,c.x),v=Gt.relativeSign(u.y,c.y);switch(a){case 0:return Gt.compareValue(p,v);case 1:return Gt.compareValue(v,p);case 2:return Gt.compareValue(v,-p);case 3:return Gt.compareValue(-p,v);case 4:return Gt.compareValue(-p,-v);case 5:return Gt.compareValue(-v,-p);case 6:return Gt.compareValue(-v,p);case 7:return Gt.compareValue(p,-v)}return $.shouldNeverReachHere("invalid octant value"),0},Gt.compareValue=function(a,u){return 0>a?-1:a>0?1:0>u?-1:u>0?1:0},o(sn.prototype,{getCoordinate:function(){return this.coord},print:function(a){a.print(this.coord),a.print(" seg # = "+this.segmentIndex)},compareTo:function(a){var u=a;return this.segmentIndex<u.segmentIndex?-1:this.segmentIndex>u.segmentIndex?1:this.coord.equals2D(u.coord)?0:Gt.compare(this.segmentOctant,this.coord,u.coord)},isEndPoint:function(a){return this.segmentIndex!==0||this._isInterior?this.segmentIndex===a:!0},isInterior:function(){return this._isInterior},interfaces_:function(){return[g]},getClass:function(){return sn}}),o(Kn.prototype,{getSplitCoordinates:function(){var a=new te;this.addEndpoints();for(var u=this.iterator(),c=u.next();u.hasNext();){var p=u.next();this.addEdgeCoordinates(c,p,a),c=p}return a.toCoordinateArray()},addCollapsedNodes:function(){var a=new q;this.findCollapsesFromInsertedNodes(a),this.findCollapsesFromExistingVertices(a);for(var u=a.iterator();u.hasNext();){var c=u.next().intValue();this.add(this.edge.getCoordinate(c),c)}},print:function(a){a.println("Intersections:");for(var u=this.iterator();u.hasNext();){var c=u.next();c.print(a)}},findCollapsesFromExistingVertices:function(a){for(var u=0;u<this.edge.size()-2;u++){var c=this.edge.getCoordinate(u),p=(this.edge.getCoordinate(u+1),this.edge.getCoordinate(u+2));c.equals2D(p)&&a.add(new ee(u+1))}},addEdgeCoordinates:function(a,u,c){u.segmentIndex-a.segmentIndex+2;var p=this.edge.getCoordinate(u.segmentIndex),v=u.isInterior()||!u.coord.equals2D(p);c.add(new C(a.coord),!1);for(var S=a.segmentIndex+1;S<=u.segmentIndex;S++)c.add(this.edge.getCoordinate(S));v&&c.add(new C(u.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(a){this.addEndpoints(),this.addCollapsedNodes();for(var u=this.iterator(),c=u.next();u.hasNext();){var p=u.next(),v=this.createSplitEdge(c,p);a.add(v),c=p}},findCollapseIndex:function(a,u,c){if(!a.coord.equals2D(u.coord))return!1;var p=u.segmentIndex-a.segmentIndex;return u.isInterior()||p--,p===1?(c[0]=a.segmentIndex+1,!0):!1},findCollapsesFromInsertedNodes:function(a){for(var u=new Array(1).fill(null),c=this.iterator(),p=c.next();c.hasNext();){var v=c.next(),S=this.findCollapseIndex(p,v,u);S&&a.add(new ee(u[0])),p=v}},getEdge:function(){return this.edge},addEndpoints:function(){var a=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(a),a)},createSplitEdge:function(a,u){var c=u.segmentIndex-a.segmentIndex+2,p=this.edge.getCoordinate(u.segmentIndex),v=u.isInterior()||!u.coord.equals2D(p);v||c--;var S=new Array(c).fill(null),N=0;S[N++]=new C(a.coord);for(var O=a.segmentIndex+1;O<=u.segmentIndex;O++)S[N++]=this.edge.getCoordinate(O);return v&&(S[N]=new C(u.coord)),new ar(S,this.edge.getData())},add:function(a,u){var c=new sn(this.edge,a,u,this.edge.getSegmentOctant(u)),p=this.nodeMap.get(c);return p!==null?($.isTrue(p.coord.equals2D(a),"Found equal nodes with different coordinates"),p):(this.nodeMap.put(c,c),c)},checkSplitEdgesCorrectness:function(a){var u=this.edge.getCoordinates(),c=a.get(0),p=c.getCoordinate(0);if(!p.equals2D(u[0]))throw new w("bad split edge start point at "+p);var v=a.get(a.size()-1),S=v.getCoordinates(),N=S[S.length-1];if(!N.equals2D(u[u.length-1]))throw new w("bad split edge end point at "+N)},interfaces_:function(){return[]},getClass:function(){return Kn}}),o(Nr.prototype,{next:function(){return this.currNode===null?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):this.nextNode===null?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex>this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return this.nextNode!==null},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[W]},getClass:function(){return Nr}}),o(Gn.prototype,{addIntersection:function(a,u){},interfaces_:function(){return[vt]},getClass:function(){return Gn}}),o(ar.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(a){return this.pts[a]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(a){return a===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(a),this.getCoordinate(a+1))},setData:function(a){this.data=a},safeOctant:function(a,u){return a.equals2D(u)?0:Nt.octant(a,u)},getData:function(){return this.data},addIntersection:function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];this.addIntersectionNode(a,u)}else if(arguments.length===4){var c=arguments[0],p=arguments[1],v=arguments[3],S=new C(c.getIntersection(v));this.addIntersection(S,p)}},toString:function(){return xn.toLineString(new Ce(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(a,u){var c=u,p=c+1;if(p<this.pts.length){var v=this.pts[p];a.equals2D(v)&&(c=p)}var S=this.nodeList.add(a,c);return S},addIntersections:function(a,u,c){for(var p=0;p<a.getIntersectionNum();p++)this.addIntersection(a,u,c,p)},interfaces_:function(){return[Gn]},getClass:function(){return ar}}),ar.getNodedSubstrings=function(){if(arguments.length===1){var a=arguments[0],u=new q;return ar.getNodedSubstrings(a,u),u}if(arguments.length===2)for(var c=arguments[0],p=arguments[1],v=c.iterator();v.hasNext();){var S=v.next();S.getNodeList().addSplitEdges(p)}},o(Jn.prototype,{overlap:function(){if(arguments.length!==2){if(arguments.length===4){var a=arguments[0],u=arguments[1],c=arguments[2],p=arguments[3];a.getLineSegment(u,this.overlapSeg1),c.getLineSegment(p,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}}},interfaces_:function(){return[]},getClass:function(){return Jn}}),o(Ii.prototype,{getLineSegment:function(a,u){u.p0=this.pts[a],u.p1=this.pts[a+1]},computeSelect:function(a,u,c,p){var v=this.pts[u],S=this.pts[c];if(p.tempEnv1.init(v,S),c-u===1)return p.select(this,u),null;if(!a.intersects(p.tempEnv1))return null;var N=Math.trunc((u+c)/2);N>u&&this.computeSelect(a,u,N,p),c>N&&this.computeSelect(a,N,c,p)},getCoordinates:function(){for(var a=new Array(this.end-this.start+1).fill(null),u=0,c=this.start;c<=this.end;c++)a[u++]=this.pts[c];return a},computeOverlaps:function(a,u){this.computeOverlapsInternal(this.start,this.end,a,a.start,a.end,u)},setId:function(a){this.id=a},select:function(a,u){this.computeSelect(a,this.start,this.end,u)},getEnvelope:function(){if(this.env===null){var a=this.pts[this.start],u=this.pts[this.end];this.env=new Q(a,u)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(a,u,c,p,v,S){var N=this.pts[a],O=this.pts[u],ae=c.pts[p],ve=c.pts[v];if(u-a===1&&v-p===1)return S.overlap(this,a,c,p),null;if(S.tempEnv1.init(N,O),S.tempEnv2.init(ae,ve),!S.tempEnv1.intersects(S.tempEnv2))return null;var Pe=Math.trunc((a+u)/2),Te=Math.trunc((p+v)/2);Pe>a&&(Te>p&&this.computeOverlapsInternal(a,Pe,c,p,Te,S),v>Te&&this.computeOverlapsInternal(a,Pe,c,Te,v,S)),u>Pe&&(Te>p&&this.computeOverlapsInternal(Pe,u,c,p,Te,S),v>Te&&this.computeOverlapsInternal(Pe,u,c,Te,v,S))},interfaces_:function(){return[]},getClass:function(){return Ii}}),o(an.prototype,{interfaces_:function(){return[]},getClass:function(){return an}}),an.isNorthern=function(a){return a===an.NE||a===an.NW},an.isOpposite=function(a,u){if(a===u)return!1;var c=(a-u+4)%4;return c===2},an.commonHalfPlane=function(a,u){if(a===u)return a;var c=(a-u+4)%4;if(c===2)return-1;var p=u>a?a:u,v=a>u?a:u;return p===0&&v===3?3:p},an.isInHalfPlane=function(a,u){return u===an.SE?a===an.SE||a===an.SW:a===u||a===u+1},an.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var a=arguments[0],u=arguments[1];if(a===0&&u===0)throw new d;return a>=0?u>=0?an.NE:an.SE:u>=0?an.NW:an.SW}if(arguments[0]instanceof C&&arguments[1]instanceof C){var c=arguments[0],p=arguments[1];if(p.x===c.x&&p.y===c.y)throw new d;return p.x>=c.x?p.y>=c.y?an.NE:an.SE:p.y>=c.y?an.NW:an.SW}},an.NE=0,an.NW=1,an.SW=2,an.SE=3,o(pr.prototype,{interfaces_:function(){return[]},getClass:function(){return pr}}),pr.getChainStartIndices=function(a){var u=0,c=new q;c.add(new ee(u));do{var p=pr.findChainEnd(a,u);c.add(new ee(p)),u=p}while(u<a.length-1);var v=pr.toIntArray(c);return v},pr.findChainEnd=function(a,u){for(var c=u;c<a.length-1&&a[c].equals2D(a[c+1]);)c++;if(c>=a.length-1)return a.length-1;for(var p=an.quadrant(a[c],a[c+1]),v=u+1;v<a.length;){if(!a[v-1].equals2D(a[v])){var S=an.quadrant(a[v-1],a[v]);if(S!==p)break}v++}return v-1},pr.getChains=function(){if(arguments.length===1){var a=arguments[0];return pr.getChains(a,null)}if(arguments.length===2){for(var u=arguments[0],c=arguments[1],p=new q,v=pr.getChainStartIndices(u),S=0;S<v.length-1;S++){var N=new Ii(u,v[S],v[S+1],c);p.add(N)}return p}},pr.toIntArray=function(a){for(var u=new Array(a.size()).fill(null),c=0;c<u.length;c++)u[c]=a.get(c).intValue();return u},o(zi.prototype,{computeNodes:function(a){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return zi}}),o(ha.prototype,{setSegmentIntersector:function(a){this.segInt=a},interfaces_:function(){return[zi]},getClass:function(){return ha}}),E(Jr,ha),o(Jr.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return ar.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(a){for(var u=pr.getChains(a.getCoordinates(),a),c=u.iterator();c.hasNext();){var p=c.next();p.setId(this.idCounter++),this.index.insert(p.getEnvelope(),p),this.monoChains.add(p)}},computeNodes:function(a){this.nodedSegStrings=a;for(var u=a.iterator();u.hasNext();)this.add(u.next());this.intersectChains()},intersectChains:function(){for(var a=new Vi(this.segInt),u=this.monoChains.iterator();u.hasNext();)for(var c=u.next(),p=this.index.query(c.getEnvelope()),v=p.iterator();v.hasNext();){var S=v.next();if(S.getId()>c.getId()&&(c.computeOverlaps(S,a),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return Jr}}),E(Vi,Jn),o(Vi.prototype,{overlap:function(){if(arguments.length!==4)return Jn.prototype.overlap.apply(this,arguments);var a=arguments[0],u=arguments[1],c=arguments[2],p=arguments[3],v=a.getContext(),S=c.getContext();this.si.processIntersections(v,u,S,p)},interfaces_:function(){return[]},getClass:function(){return Vi}}),Jr.SegmentOverlapAction=Vi,E(Qn,w),o(Qn.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Qn}}),Qn.msgWithCoord=function(a,u){return u!==null?a+" [ "+u+" ]":a},o(Gi.prototype,{processIntersections:function(a,u,c,p){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return Gi}}),o(Yr.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(a){this.isCheckEndSegmentsOnly=a},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(a){this.findAllIntersections=a},setKeepIntersections:function(a){this.keepIntersections=a},processIntersections:function(a,u,c,p){if(!this.findAllIntersections&&this.hasIntersection()||a===c&&u===p)return null;if(this.isCheckEndSegmentsOnly){var v=this.isEndSegment(a,u)||this.isEndSegment(c,p);if(!v)return null}var S=a.getCoordinates()[u],N=a.getCoordinates()[u+1],O=c.getCoordinates()[p],ae=c.getCoordinates()[p+1];this.li.computeIntersection(S,N,O,ae),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=S,this.intSegments[1]=N,this.intSegments[2]=O,this.intSegments[3]=ae,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(a,u){return u===0?!0:u>=a.size()-2},hasIntersection:function(){return this.interiorIntersection!==null},isDone:function(){return this.findAllIntersections?!1:this.interiorIntersection!==null},interfaces_:function(){return[Gi]},getClass:function(){return Yr}}),Yr.createAllIntersectionsFinder=function(a){var u=new Yr(a);return u.setFindAllIntersections(!0),u},Yr.createAnyIntersectionFinder=function(a){return new Yr(a)},Yr.createIntersectionCounter=function(a){var u=new Yr(a);return u.setFindAllIntersections(!0),u.setKeepIntersections(!1),u},o(qi.prototype,{execute:function(){return this.segInt!==null?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(a){this.findAllIntersections=a},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new Yr(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var a=new Jr;return a.setSegmentIntersector(this.segInt),a.computeNodes(this.segStrings),this.segInt.hasIntersection()?(this._isValid=!1,null):void 0},checkValid:function(){if(this.execute(),!this._isValid)throw new Qn(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var a=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+xn.toLineString(a[0],a[1])+" and "+xn.toLineString(a[2],a[3])},interfaces_:function(){return[]},getClass:function(){return qi}}),qi.computeIntersections=function(a){var u=new qi(a);return u.setFindAllIntersections(!0),u.isValid(),u.getIntersections()},o(yi.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return yi}}),yi.toSegmentStrings=function(a){for(var u=new q,c=a.iterator();c.hasNext();){var p=c.next();u.add(new rt(p.getCoordinates(),p))}return u},yi.checkValid=function(a){var u=new yi(a);u.checkValid()},o(Pi.prototype,{map:function(a){for(var u=new q,c=0;c<a.getNumGeometries();c++){var p=this.mapOp.map(a.getGeometryN(c));p.isEmpty()||u.add(p)}return a.getFactory().createGeometryCollection(Dt.toGeometryArray(u))},interfaces_:function(){return[]},getClass:function(){return Pi}}),Pi.map=function(a,u){var c=new Pi(u);return c.map(a)},o(Je.prototype,{interfaces_:function(){return[]},getClass:function(){return Je}}),Je.opposite=function(a){return a===Je.LEFT?Je.RIGHT:a===Je.RIGHT?Je.LEFT:a},Je.ON=0,Je.LEFT=1,Je.RIGHT=2,o(sr.prototype,{setAllLocations:function(a){for(var u=0;u<this.location.length;u++)this.location[u]=a},isNull:function(){for(var a=0;a<this.location.length;a++)if(this.location[a]!==x.NONE)return!1;return!0},setAllLocationsIfNull:function(a){for(var u=0;u<this.location.length;u++)this.location[u]===x.NONE&&(this.location[u]=a)},isLine:function(){return this.location.length===1},merge:function(a){if(a.location.length>this.location.length){var u=new Array(3).fill(null);u[Je.ON]=this.location[Je.ON],u[Je.LEFT]=x.NONE,u[Je.RIGHT]=x.NONE,this.location=u}for(var c=0;c<this.location.length;c++)this.location[c]===x.NONE&&c<a.location.length&&(this.location[c]=a.location[c])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var a=this.location[Je.LEFT];this.location[Je.LEFT]=this.location[Je.RIGHT],this.location[Je.RIGHT]=a},toString:function(){var a=new B;return this.location.length>1&&a.append(x.toLocationSymbol(this.location[Je.LEFT])),a.append(x.toLocationSymbol(this.location[Je.ON])),this.location.length>1&&a.append(x.toLocationSymbol(this.location[Je.RIGHT])),a.toString()},setLocations:function(a,u,c){this.location[Je.ON]=a,this.location[Je.LEFT]=u,this.location[Je.RIGHT]=c},get:function(a){return a<this.location.length?this.location[a]:x.NONE},isArea:function(){return this.location.length>1},isAnyNull:function(){for(var a=0;a<this.location.length;a++)if(this.location[a]===x.NONE)return!0;return!1},setLocation:function(){if(arguments.length===1){var a=arguments[0];this.setLocation(Je.ON,a)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.location[u]=c}},init:function(a){this.location=new Array(a).fill(null),this.setAllLocations(x.NONE)},isEqualOnSide:function(a,u){return this.location[u]===a.location[u]},allPositionsEqual:function(a){for(var u=0;u<this.location.length;u++)if(this.location[u]!==a)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return sr}}),o(Nn.prototype,{getGeometryCount:function(){var a=0;return this.elt[0].isNull()||a++,this.elt[1].isNull()||a++,a},setAllLocations:function(a,u){this.elt[a].setAllLocations(u)},isNull:function(a){return this.elt[a].isNull()},setAllLocationsIfNull:function(){if(arguments.length===1){var a=arguments[0];this.setAllLocationsIfNull(0,a),this.setAllLocationsIfNull(1,a)}else if(arguments.length===2){var u=arguments[0],c=arguments[1];this.elt[u].setAllLocationsIfNull(c)}},isLine:function(a){return this.elt[a].isLine()},merge:function(a){for(var u=0;2>u;u++)this.elt[u]===null&&a.elt[u]!==null?this.elt[u]=new sr(a.elt[u]):this.elt[u].merge(a.elt[u])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(arguments.length===1){var a=arguments[0];return this.elt[a].get(Je.ON)}if(arguments.length===2){var u=arguments[0],c=arguments[1];return this.elt[u].get(c)}},toString:function(){var a=new B;return this.elt[0]!==null&&(a.append("A:"),a.append(this.elt[0].toString())),this.elt[1]!==null&&(a.append(" B:"),a.append(this.elt[1].toString())),a.toString()},isArea:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var a=arguments[0];return this.elt[a].isArea()}},isAnyNull:function(a){return this.elt[a].isAnyNull()},setLocation:function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];this.elt[a].setLocation(Je.ON,u)}else if(arguments.length===3){var c=arguments[0],p=arguments[1],v=arguments[2];this.elt[c].setLocation(p,v)}},isEqualOnSide:function(a,u){return this.elt[0].isEqualOnSide(a.elt[0],u)&&this.elt[1].isEqualOnSide(a.elt[1],u)},allPositionsEqual:function(a,u){return this.elt[a].allPositionsEqual(u)},toLine:function(a){this.elt[a].isArea()&&(this.elt[a]=new sr(this.elt[a].location[0]))},interfaces_:function(){return[]},getClass:function(){return Nn}}),Nn.toLineLabel=function(a){for(var u=new Nn(x.NONE),c=0;2>c;c++)u.setLocation(c,a.getLocation(c));return u},o(Ai.prototype,{computeRing:function(){if(this.ring!==null)return null;for(var a=new Array(this.pts.size()).fill(null),u=0;u<this.pts.size();u++)a[u]=this.pts.get(u);this.ring=this.geometryFactory.createLinearRing(a),this._isHole=Ge.isCCW(this.ring.getCoordinates())},isIsolated:function(){return this.label.getGeometryCount()===1},computePoints:function(a){this.startDe=a;var u=a,c=!0;do{if(u===null)throw new Qn("Found null DirectedEdge");if(u.getEdgeRing()===this)throw new Qn("Directed Edge visited twice during ring-building at "+u.getCoordinate());this.edges.add(u);var p=u.getLabel();$.isTrue(p.isArea()),this.mergeLabel(p),this.addPoints(u.getEdge(),u.isForward(),c),c=!1,this.setEdgeRing(u,this),u=this.getNext(u)}while(u!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(a){return this.pts.get(a)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var a=this.startDe;do{var u=a.getNode(),c=u.getEdges().getOutgoingDegree(this);c>this.maxNodeDegree&&(this.maxNodeDegree=c),a=this.getNext(a)}while(a!==this.startDe);this.maxNodeDegree*=2},addPoints:function(a,u,c){var p=a.getCoordinates();if(u){var v=1;c&&(v=0);for(var S=v;S<p.length;S++)this.pts.add(p[S])}else{var v=p.length-2;c&&(v=p.length-1);for(var S=v;S>=0;S--)this.pts.add(p[S])}},isHole:function(){return this._isHole},setInResult:function(){var a=this.startDe;do a.getEdge().setInResult(!0),a=a.getNext();while(a!==this.startDe)},containsPoint:function(a){var u=this.getLinearRing(),c=u.getEnvelopeInternal();if(!c.contains(a)||!Ge.isPointInRing(a,u.getCoordinates()))return!1;for(var p=this.holes.iterator();p.hasNext();){var v=p.next();if(v.containsPoint(a))return!1}return!0},addHole:function(a){this.holes.add(a)},isShell:function(){return this.shell===null},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(arguments.length===1){var a=arguments[0];this.mergeLabel(a,0),this.mergeLabel(a,1)}else if(arguments.length===2){var u=arguments[0],c=arguments[1],p=u.getLocation(c,Je.RIGHT);if(p===x.NONE)return null;if(this.label.getLocation(c)===x.NONE)return this.label.setLocation(c,p),null}},setShell:function(a){this.shell=a,a!==null&&a.addHole(this)},toPolygon:function(a){for(var u=new Array(this.holes.size()).fill(null),c=0;c<this.holes.size();c++)u[c]=this.holes.get(c).getLinearRing();var p=a.createPolygon(this.getLinearRing(),u);return p},interfaces_:function(){return[]},getClass:function(){return Ai}}),E(ga,Ai),o(ga.prototype,{setEdgeRing:function(a,u){a.setMinEdgeRing(u)},getNext:function(a){return a.getNextMin()},interfaces_:function(){return[]},getClass:function(){return ga}}),E(ji,Ai),o(ji.prototype,{buildMinimalRings:function(){var a=new q,u=this.startDe;do{if(u.getMinEdgeRing()===null){var c=new ga(u,this.geometryFactory);a.add(c)}u=u.getNext()}while(u!==this.startDe);return a},setEdgeRing:function(a,u){a.setEdgeRing(u)},linkDirectedEdgesForMinimalEdgeRings:function(){var a=this.startDe;do{var u=a.getNode();u.getEdges().linkMinimalDirectedEdges(this),a=a.getNext()}while(a!==this.startDe)},getNext:function(a){return a.getNext()},interfaces_:function(){return[]},getClass:function(){return ji}}),o(si.prototype,{setVisited:function(a){this._isVisited=a},setInResult:function(a){this._isInResult=a},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(a){this.label=a},getLabel:function(){return this.label},setCovered:function(a){this._isCovered=a,this._isCoveredSet=!0},updateIM:function(a){$.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(a)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return si}}),E(Mr,si),o(Mr.prototype,{isIncidentEdgeInResult:function(){for(var a=this.getEdges().getEdges().iterator();a.hasNext();){var u=a.next();if(u.getEdge().isInResult())return!0}return!1},isIsolated:function(){return this.label.getGeometryCount()===1},getCoordinate:function(){return this.coord},print:function(a){a.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(a){},computeMergedLocation:function(a,u){var c=x.NONE;if(c=this.label.getLocation(u),!a.isNull(u)){var p=a.getLocation(u);c!==x.BOUNDARY&&(c=p)}return c},setLabel:function(){if(arguments.length!==2)return si.prototype.setLabel.apply(this,arguments);var a=arguments[0],u=arguments[1];this.label===null?this.label=new Nn(a,u):this.label.setLocation(a,u)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof Mr){var a=arguments[0];this.mergeLabel(a.label)}else if(arguments[0]instanceof Nn)for(var u=arguments[0],c=0;2>c;c++){var p=this.computeMergedLocation(u,c),v=this.label.getLocation(c);v===x.NONE&&this.label.setLocation(c,p)}},add:function(a){this.edges.insert(a),a.setNode(this)},setLabelBoundary:function(a){if(this.label===null)return null;var u=x.NONE;this.label!==null&&(u=this.label.getLocation(a));var c=null;switch(u){case x.BOUNDARY:c=x.INTERIOR;break;case x.INTERIOR:c=x.BOUNDARY;break;default:c=x.BOUNDARY}this.label.setLocation(a,c)},interfaces_:function(){return[]},getClass:function(){return Mr}}),o(Ni.prototype,{find:function(a){return this.nodeMap.get(a)},addNode:function(){if(arguments[0]instanceof C){var a=arguments[0],u=this.nodeMap.get(a);return u===null&&(u=this.nodeFact.createNode(a),this.nodeMap.put(a,u)),u}if(arguments[0]instanceof Mr){var c=arguments[0],u=this.nodeMap.get(c.getCoordinate());return u===null?(this.nodeMap.put(c.getCoordinate(),c),c):(u.mergeLabel(c),u)}},print:function(a){for(var u=this.iterator();u.hasNext();){var c=u.next();c.print(a)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(a){for(var u=new q,c=this.iterator();c.hasNext();){var p=c.next();p.getLabel().getLocation(a)===x.BOUNDARY&&u.add(p)}return u},add:function(a){var u=a.getCoordinate(),c=this.addNode(u);c.add(a)},interfaces_:function(){return[]},getClass:function(){return Ni}}),o(Dr.prototype,{compareDirection:function(a){return this.dx===a.dx&&this.dy===a.dy?0:this.quadrant>a.quadrant?1:this.quadrant<a.quadrant?-1:Ge.computeOrientation(a.p0,a.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(a){this.node=a},print:function(a){var u=Math.atan2(this.dy,this.dx),c=this.getClass().getName(),p=c.lastIndexOf("."),v=c.substring(p+1);a.print("  "+v+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+u+"   "+this.label)},compareTo:function(a){var u=a;return this.compareDirection(u)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var a=Math.atan2(this.dy,this.dx),u=this.getClass().getName(),c=u.lastIndexOf("."),p=u.substring(c+1);return"  "+p+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+a+"   "+this.label},computeLabel:function(a){},init:function(a,u){this.p0=a,this.p1=u,this.dx=u.x-a.x,this.dy=u.y-a.y,this.quadrant=an.quadrant(this.dx,this.dy),$.isTrue(!(this.dx===0&&this.dy===0),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[g]},getClass:function(){return Dr}}),E(vi,Dr),o(vi.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(a){return this.depth[a]},setVisited:function(a){this._isVisited=a},computeDirectedLabel:function(){this.label=new Nn(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(a,u){if(this.depth[a]!==-999&&this.depth[a]!==u)throw new Qn("assigned depths do not match",this.getCoordinate());this.depth[a]=u},isInteriorAreaEdge:function(){for(var u=!0,c=0;2>c;c++)this.label.isArea(c)&&this.label.getLocation(c,Je.LEFT)===x.INTERIOR&&this.label.getLocation(c,Je.RIGHT)===x.INTERIOR||(u=!1);return u},setNextMin:function(a){this.nextMin=a},print:function(a){Dr.prototype.print.call(this,a),a.print(" "+this.depth[Je.LEFT]+"/"+this.depth[Je.RIGHT]),a.print(" ("+this.getDepthDelta()+")"),this._isInResult&&a.print(" inResult")},setMinEdgeRing:function(a){this.minEdgeRing=a},isLineEdge:function(){var a=this.label.isLine(0)||this.label.isLine(1),u=!this.label.isArea(0)||this.label.allPositionsEqual(0,x.EXTERIOR),c=!this.label.isArea(1)||this.label.allPositionsEqual(1,x.EXTERIOR);return a&&u&&c},setEdgeRing:function(a){this.edgeRing=a},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var a=this.edge.getDepthDelta();return this._isForward||(a=-a),a},setInResult:function(a){this._isInResult=a},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(a){this.print(a),a.print(" "),this._isForward?this.edge.print(a):this.edge.printReverse(a)},setSym:function(a){this.sym=a},setVisitedEdge:function(a){this.setVisited(a),this.sym.setVisited(a)},setEdgeDepths:function(a,u){var c=this.getEdge().getDepthDelta();this._isForward||(c=-c);var p=1;a===Je.LEFT&&(p=-1);var v=Je.opposite(a),S=c*p,N=u+S;this.setDepth(a,u),this.setDepth(v,N)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(a){this.next=a},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return vi}}),vi.depthFactor=function(a,u){return a===x.EXTERIOR&&u===x.INTERIOR?1:a===x.INTERIOR&&u===x.EXTERIOR?-1:0},o(bi.prototype,{createNode:function(a){return new Mr(a,null)},interfaces_:function(){return[]},getClass:function(){return bi}}),o(mr.prototype,{printEdges:function(a){a.println("Edges:");for(var u=0;u<this.edges.size();u++){a.println("edge "+u+":");var c=this.edges.get(u);c.print(a),c.eiList.print(a)}},find:function(a){return this.nodes.find(a)},addNode:function(){if(arguments[0]instanceof Mr){var a=arguments[0];return this.nodes.addNode(a)}if(arguments[0]instanceof C){var u=arguments[0];return this.nodes.addNode(u)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var a=this.nodes.iterator();a.hasNext();){var u=a.next();u.getEdges().linkResultDirectedEdges()}},debugPrintln:function(a){Z.out.println(a)},isBoundaryNode:function(a,u){var c=this.nodes.find(u);if(c===null)return!1;var p=c.getLabel();return p!==null&&p.getLocation(a)===x.BOUNDARY},linkAllDirectedEdges:function(){for(var a=this.nodes.iterator();a.hasNext();){var u=a.next();u.getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(a,u,c,p){return a.equals(c)?Ge.computeOrientation(a,u,p)===Ge.COLLINEAR&&an.quadrant(a,u)===an.quadrant(c,p):!1},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(a){Z.out.print(a)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(a,u){for(var c=0;c<this.edges.size();c++){var p=this.edges.get(c),v=p.getCoordinates();if(this.matchInSameDirection(a,u,v[0],v[1])||this.matchInSameDirection(a,u,v[v.length-1],v[v.length-2]))return p}return null},insertEdge:function(a){this.edges.add(a)},findEdgeEnd:function(a){for(var u=this.getEdgeEnds().iterator();u.hasNext();){var c=u.next();if(c.getEdge()===a)return c}return null},addEdges:function(a){for(var u=a.iterator();u.hasNext();){var c=u.next();this.edges.add(c);var p=new vi(c,!0),v=new vi(c,!1);p.setSym(v),v.setSym(p),this.add(p),this.add(v)}},add:function(a){this.nodes.add(a),this.edgeEndList.add(a)},getNodes:function(){return this.nodes.values()},findEdge:function(a,u){for(var c=0;c<this.edges.size();c++){var p=this.edges.get(c),v=p.getCoordinates();if(a.equals(v[0])&&u.equals(v[1]))return p}return null},interfaces_:function(){return[]},getClass:function(){return mr}}),mr.linkResultDirectedEdges=function(a){for(var u=a.iterator();u.hasNext();){var c=u.next();c.getEdges().linkResultDirectedEdges()}},o(pa.prototype,{sortShellsAndHoles:function(a,u,c){for(var p=a.iterator();p.hasNext();){var v=p.next();v.isHole()?c.add(v):u.add(v)}},computePolygons:function(a){for(var u=new q,c=a.iterator();c.hasNext();){var p=c.next(),v=p.toPolygon(this.geometryFactory);u.add(v)}return u},placeFreeHoles:function(a,u){for(var c=u.iterator();c.hasNext();){var p=c.next();if(p.getShell()===null){var v=this.findEdgeRingContaining(p,a);if(v===null)throw new Qn("unable to assign hole to a shell",p.getCoordinate(0));p.setShell(v)}}},buildMinimalEdgeRings:function(a,u,c){for(var p=new q,v=a.iterator();v.hasNext();){var S=v.next();if(S.getMaxNodeDegree()>2){S.linkDirectedEdgesForMinimalEdgeRings();var N=S.buildMinimalRings(),O=this.findShell(N);O!==null?(this.placePolygonHoles(O,N),u.add(O)):c.addAll(N)}else p.add(S)}return p},containsPoint:function(a){for(var u=this.shellList.iterator();u.hasNext();){var c=u.next();if(c.containsPoint(a))return!0}return!1},buildMaximalEdgeRings:function(a){for(var u=new q,c=a.iterator();c.hasNext();){var p=c.next();if(p.isInResult()&&p.getLabel().isArea()&&p.getEdgeRing()===null){var v=new ji(p,this.geometryFactory);u.add(v),v.setInResult()}}return u},placePolygonHoles:function(a,u){for(var c=u.iterator();c.hasNext();){var p=c.next();p.isHole()&&p.setShell(a)}},getPolygons:function(){var a=this.computePolygons(this.shellList);return a},findEdgeRingContaining:function(a,u){for(var c=a.getLinearRing(),p=c.getEnvelopeInternal(),v=c.getCoordinateN(0),S=null,N=null,O=u.iterator();O.hasNext();){var ae=O.next(),ve=ae.getLinearRing(),Pe=ve.getEnvelopeInternal();S!==null&&(N=S.getLinearRing().getEnvelopeInternal());var Te=!1;Pe.contains(p)&&Ge.isPointInRing(v,ve.getCoordinates())&&(Te=!0),Te&&(S===null||N.contains(Pe))&&(S=ae)}return S},findShell:function(a){for(var u=0,c=null,p=a.iterator();p.hasNext();){var v=p.next();v.isHole()||(c=v,u++)}return $.isTrue(1>=u,"found two shells in MinimalEdgeRing list"),c},add:function(){if(arguments.length===1){var a=arguments[0];this.add(a.getEdgeEnds(),a.getNodes())}else if(arguments.length===2){var u=arguments[0],c=arguments[1];mr.linkResultDirectedEdges(c);var p=this.buildMaximalEdgeRings(u),v=new q,S=this.buildMinimalEdgeRings(p,this.shellList,v);this.sortShellsAndHoles(S,this.shellList,v),this.placeFreeHoles(this.shellList,v)}},interfaces_:function(){return[]},getClass:function(){return pa}}),o(oi.prototype,{collectLines:function(a){for(var u=this.op.getGraph().getEdgeEnds().iterator();u.hasNext();){var c=u.next();this.collectLineEdge(c,a,this.lineEdgesList),this.collectBoundaryTouchEdge(c,a,this.lineEdgesList)}},labelIsolatedLine:function(a,u){var c=this.ptLocator.locate(a.getCoordinate(),this.op.getArgGeometry(u));a.getLabel().setLocation(u,c)},build:function(a){return this.findCoveredLineEdges(),this.collectLines(a),this.buildLines(a),this.resultLineList},collectLineEdge:function(a,u,c){var p=a.getLabel(),v=a.getEdge();a.isLineEdge()&&(a.isVisited()||!yt.isResultOfOp(p,u)||v.isCovered()||(c.add(v),a.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var a=this.op.getGraph().getNodes().iterator();a.hasNext();){var u=a.next();u.getEdges().findCoveredLineEdges()}for(var c=this.op.getGraph().getEdgeEnds().iterator();c.hasNext();){var p=c.next(),v=p.getEdge();if(p.isLineEdge()&&!v.isCoveredSet()){var S=this.op.isCoveredByA(p.getCoordinate());v.setCovered(S)}}},labelIsolatedLines:function(a){for(var u=a.iterator();u.hasNext();){var c=u.next(),p=c.getLabel();c.isIsolated()&&(p.isNull(0)?this.labelIsolatedLine(c,0):this.labelIsolatedLine(c,1))}},buildLines:function(a){for(var u=this.lineEdgesList.iterator();u.hasNext();){var c=u.next(),p=(c.getLabel(),this.geometryFactory.createLineString(c.getCoordinates()));this.resultLineList.add(p),c.setInResult(!0)}},collectBoundaryTouchEdge:function(a,u,c){var p=a.getLabel();return a.isLineEdge()||a.isVisited()||a.isInteriorAreaEdge()||a.getEdge().isInResult()?null:($.isTrue(!(a.isInResult()||a.getSym().isInResult())||!a.getEdge().isInResult()),void(yt.isResultOfOp(p,u)&&u===yt.INTERSECTION&&(c.add(a.getEdge()),a.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return oi}}),o(ma.prototype,{filterCoveredNodeToPoint:function(a){var u=a.getCoordinate();if(!this.op.isCoveredByLA(u)){var c=this.geometryFactory.createPoint(u);this.resultPointList.add(c)}},extractNonCoveredResultNodes:function(a){for(var u=this.op.getGraph().getNodes().iterator();u.hasNext();){var c=u.next();if(!(c.isInResult()||c.isIncidentEdgeInResult()||c.getEdges().getDegree()!==0&&a!==yt.INTERSECTION)){var p=c.getLabel();yt.isResultOfOp(p,a)&&this.filterCoveredNodeToPoint(c)}}},build:function(a){return this.extractNonCoveredResultNodes(a),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return ma}}),o(br.prototype,{locate:function(a){},interfaces_:function(){return[]},getClass:function(){return br}}),o(yr.prototype,{locate:function(a){return yr.locate(a,this.geom)},interfaces_:function(){return[br]},getClass:function(){return yr}}),yr.isPointInRing=function(a,u){return u.getEnvelopeInternal().intersects(a)?Ge.isPointInRing(a,u.getCoordinates()):!1},yr.containsPointInPolygon=function(a,u){if(u.isEmpty())return!1;var c=u.getExteriorRing();if(!yr.isPointInRing(a,c))return!1;for(var p=0;p<u.getNumInteriorRing();p++){var v=u.getInteriorRingN(p);if(yr.isPointInRing(a,v))return!1}return!0},yr.containsPoint=function(a,u){if(u instanceof Mt)return yr.containsPointInPolygon(a,u);if(u instanceof Ot)for(var c=new je(u);c.hasNext();){var p=c.next();if(p!==u&&yr.containsPoint(a,p))return!0}return!1},yr.locate=function(a,u){return u.isEmpty()?x.EXTERIOR:yr.containsPoint(a,u)?x.INTERIOR:x.EXTERIOR},o(xi.prototype,{getNextCW:function(a){this.getEdges();var u=this.edgeList.indexOf(a),c=u-1;return u===0&&(c=this.edgeList.size()-1),this.edgeList.get(c)},propagateSideLabels:function(a){for(var u=x.NONE,c=this.iterator();c.hasNext();){var p=c.next(),v=p.getLabel();v.isArea(a)&&v.getLocation(a,Je.LEFT)!==x.NONE&&(u=v.getLocation(a,Je.LEFT))}if(u===x.NONE)return null;for(var S=u,c=this.iterator();c.hasNext();){var p=c.next(),v=p.getLabel();if(v.getLocation(a,Je.ON)===x.NONE&&v.setLocation(a,Je.ON,S),v.isArea(a)){var N=v.getLocation(a,Je.LEFT),O=v.getLocation(a,Je.RIGHT);if(O!==x.NONE){if(O!==S)throw new Qn("side location conflict",p.getCoordinate());N===x.NONE&&$.shouldNeverReachHere("found single null side (at "+p.getCoordinate()+")"),S=N}else $.isTrue(v.getLocation(a,Je.LEFT)===x.NONE,"found single null side"),v.setLocation(a,Je.RIGHT,S),v.setLocation(a,Je.LEFT,S)}}},getCoordinate:function(){var a=this.iterator();if(!a.hasNext())return null;var u=a.next();return u.getCoordinate()},print:function(a){Z.out.println("EdgeEndStar:   "+this.getCoordinate());for(var u=this.iterator();u.hasNext();){var c=u.next();c.print(a)}},isAreaLabelsConsistent:function(a){return this.computeEdgeEndLabels(a.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(a){var u=this.getEdges();if(u.size()<=0)return!0;var c=u.size()-1,p=u.get(c).getLabel(),v=p.getLocation(a,Je.LEFT);$.isTrue(v!==x.NONE,"Found unlabelled area edge");for(var S=v,N=this.iterator();N.hasNext();){var O=N.next(),ae=O.getLabel();$.isTrue(ae.isArea(a),"Found non-area edge");var ve=ae.getLocation(a,Je.LEFT),Pe=ae.getLocation(a,Je.RIGHT);if(ve===Pe||Pe!==S)return!1;S=ve}return!0},findIndex:function(a){this.iterator();for(var u=0;u<this.edgeList.size();u++){var c=this.edgeList.get(u);if(c===a)return u}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return this.edgeList===null&&(this.edgeList=new q(this.edgeMap.values())),this.edgeList},getLocation:function(a,u,c){return this.ptInAreaLocation[a]===x.NONE&&(this.ptInAreaLocation[a]=yr.locate(u,c[a].getGeometry())),this.ptInAreaLocation[a]},toString:function(){var a=new B;a.append("EdgeEndStar:   "+this.getCoordinate()),a.append(`
`);for(var u=this.iterator();u.hasNext();){var c=u.next();a.append(c),a.append(`
`)}return a.toString()},computeEdgeEndLabels:function(a){for(var u=this.iterator();u.hasNext();){var c=u.next();c.computeLabel(a)}},computeLabelling:function(a){this.computeEdgeEndLabels(a[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var u=[!1,!1],c=this.iterator();c.hasNext();)for(var p=c.next(),v=p.getLabel(),S=0;2>S;S++)v.isLine(S)&&v.getLocation(S)===x.BOUNDARY&&(u[S]=!0);for(var c=this.iterator();c.hasNext();)for(var p=c.next(),v=p.getLabel(),S=0;2>S;S++)if(v.isAnyNull(S)){var N=x.NONE;if(u[S])N=x.EXTERIOR;else{var O=p.getCoordinate();N=this.getLocation(S,O,a)}v.setAllLocationsIfNull(S,N)}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(a,u){this.edgeMap.put(a,u),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return xi}}),E(ya,xi),o(ya.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var a=null,u=null,c=this.SCANNING_FOR_INCOMING,p=0;p<this.resultAreaEdgeList.size();p++){var v=this.resultAreaEdgeList.get(p),S=v.getSym();if(v.getLabel().isArea())switch(a===null&&v.isInResult()&&(a=v),c){case this.SCANNING_FOR_INCOMING:if(!S.isInResult())continue;u=S,c=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!v.isInResult())continue;u.setNext(v),c=this.SCANNING_FOR_INCOMING}}if(c===this.LINKING_TO_OUTGOING){if(a===null)throw new Qn("no outgoing dirEdge found",this.getCoordinate());$.isTrue(a.isInResult(),"unable to link last incoming dirEdge"),u.setNext(a)}},insert:function(a){var u=a;this.insertEdgeEnd(u,u)},getRightmostEdge:function(){var a=this.getEdges(),u=a.size();if(1>u)return null;var c=a.get(0);if(u===1)return c;var p=a.get(u-1),v=c.getQuadrant(),S=p.getQuadrant();return an.isNorthern(v)&&an.isNorthern(S)?c:!an.isNorthern(v)&&!an.isNorthern(S)?p:c.getDy()!==0?c:p.getDy()!==0?p:($.shouldNeverReachHere("found two horizontal edges incident on node"),null)},print:function(a){Z.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var u=this.iterator();u.hasNext();){var c=u.next();a.print("out "),c.print(a),a.println(),a.print("in "),c.getSym().print(a),a.println()}},getResultAreaEdges:function(){if(this.resultAreaEdgeList!==null)return this.resultAreaEdgeList;this.resultAreaEdgeList=new q;for(var a=this.iterator();a.hasNext();){var u=a.next();(u.isInResult()||u.getSym().isInResult())&&this.resultAreaEdgeList.add(u)}return this.resultAreaEdgeList},updateLabelling:function(a){for(var u=this.iterator();u.hasNext();){var c=u.next(),p=c.getLabel();p.setAllLocationsIfNull(0,a.getLocation(0)),p.setAllLocationsIfNull(1,a.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var a=null,u=null,c=this.edgeList.size()-1;c>=0;c--){var p=this.edgeList.get(c),v=p.getSym();u===null&&(u=v),a!==null&&v.setNext(a),a=p}u.setNext(a)},computeDepths:function(){if(arguments.length===1){var a=arguments[0],u=this.findIndex(a),c=(a.getLabel(),a.getDepth(Je.LEFT)),p=a.getDepth(Je.RIGHT),v=this.computeDepths(u+1,this.edgeList.size(),c),S=this.computeDepths(0,u,v);if(S!==p)throw new Qn("depth mismatch at "+a.getCoordinate())}else if(arguments.length===3){for(var N=arguments[0],O=arguments[1],ae=arguments[2],ve=ae,Pe=N;O>Pe;Pe++){var Te=this.edgeList.get(Pe);Te.getLabel(),Te.setEdgeDepths(Je.RIGHT,ve),ve=Te.getDepth(Je.LEFT)}return ve}},mergeSymLabels:function(){for(var a=this.iterator();a.hasNext();){var u=a.next(),c=u.getLabel();c.merge(u.getSym().getLabel())}},linkMinimalDirectedEdges:function(a){for(var u=null,c=null,p=this.SCANNING_FOR_INCOMING,v=this.resultAreaEdgeList.size()-1;v>=0;v--){var S=this.resultAreaEdgeList.get(v),N=S.getSym();switch(u===null&&S.getEdgeRing()===a&&(u=S),p){case this.SCANNING_FOR_INCOMING:if(N.getEdgeRing()!==a)continue;c=N,p=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(S.getEdgeRing()!==a)continue;c.setNextMin(S),p=this.SCANNING_FOR_INCOMING}}p===this.LINKING_TO_OUTGOING&&($.isTrue(u!==null,"found null for first outgoing dirEdge"),$.isTrue(u.getEdgeRing()===a,"unable to link last incoming dirEdge"),c.setNextMin(u))},getOutgoingDegree:function(){if(arguments.length===0){for(var a=0,u=this.iterator();u.hasNext();){var c=u.next();c.isInResult()&&a++}return a}if(arguments.length===1){for(var p=arguments[0],a=0,u=this.iterator();u.hasNext();){var c=u.next();c.getEdgeRing()===p&&a++}return a}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var a=x.NONE,u=this.iterator();u.hasNext();){var c=u.next(),p=c.getSym();if(!c.isLineEdge()){if(c.isInResult()){a=x.INTERIOR;break}if(p.isInResult()){a=x.EXTERIOR;break}}}if(a===x.NONE)return null;for(var v=a,u=this.iterator();u.hasNext();){var c=u.next(),p=c.getSym();c.isLineEdge()?c.getEdge().setCovered(v===x.INTERIOR):(c.isInResult()&&(v=x.EXTERIOR),p.isInResult()&&(v=x.INTERIOR))}},computeLabelling:function(a){xi.prototype.computeLabelling.call(this,a),this.label=new Nn(x.NONE);for(var u=this.iterator();u.hasNext();)for(var c=u.next(),p=c.getEdge(),v=p.getLabel(),S=0;2>S;S++){var N=v.getLocation(S);N!==x.INTERIOR&&N!==x.BOUNDARY||this.label.setLocation(S,x.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return ya}}),E(Mi,bi),o(Mi.prototype,{createNode:function(a){return new Mr(a,new ya)},interfaces_:function(){return[]},getClass:function(){return Mi}}),o(Ki.prototype,{computeIntersections:function(a,u){this.mce.computeIntersectsForChain(this.chainIndex,a.mce,a.chainIndex,u)},interfaces_:function(){return[]},getClass:function(){return Ki}}),o(Br.prototype,{isDelete:function(){return this.eventType===Br.DELETE},setDeleteEventIndex:function(a){this.deleteEventIndex=a},getObject:function(){return this.obj},compareTo:function(a){var u=a;return this.xValue<u.xValue?-1:this.xValue>u.xValue?1:this.eventType<u.eventType?-1:this.eventType>u.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===Br.INSERT},isSameLabel:function(a){return this.label===null?!1:this.label===a.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[g]},getClass:function(){return Br}}),Br.INSERT=1,Br.DELETE=2,o(wi.prototype,{interfaces_:function(){return[]},getClass:function(){return wi}}),o(ui.prototype,{isTrivialIntersection:function(a,u,c,p){if(a===c&&this.li.getIntersectionNum()===1){if(ui.isAdjacentSegments(u,p))return!0;if(a.isClosed()){var v=a.getNumPoints()-1;if(u===0&&p===v||p===0&&u===v)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(a){this.isDoneWhenProperInt=a},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(a,u){for(var c=u.iterator();c.hasNext();){var p=c.next(),v=p.getCoordinate();if(a.isIntersection(v))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(a,u){return u===null?!1:this.isBoundaryPointInternal(a,u[0])?!0:!!this.isBoundaryPointInternal(a,u[1])},setBoundaryNodes:function(a,u){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=a,this.bdyNodes[1]=u},addIntersections:function(a,u,c,p){if(a===c&&u===p)return null;this.numTests++;var v=a.getCoordinates()[u],S=a.getCoordinates()[u+1],N=c.getCoordinates()[p],O=c.getCoordinates()[p+1];this.li.computeIntersection(v,S,N,O),this.li.hasIntersection()&&(this.recordIsolated&&(a.setIsolated(!1),c.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(a,u,c,p)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(a.addIntersections(this.li,u,0),c.addIntersections(this.li,p,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return ui}}),ui.isAdjacentSegments=function(a,u){return Math.abs(a-u)===1},E(va,wi),o(va.prototype,{prepareEvents:function(){ri.sort(this.events);for(var a=0;a<this.events.size();a++){var u=this.events.get(a);u.isDelete()&&u.getInsertEvent().setDeleteEventIndex(a)}},computeIntersections:function(){if(arguments.length===1){var a=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var u=0;u<this.events.size();u++){var c=this.events.get(u);if(c.isInsert()&&this.processOverlaps(u,c.getDeleteEventIndex(),c,a),a.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof ui&&I(arguments[0],k)&&I(arguments[1],k)){var p=arguments[0],v=arguments[1],S=arguments[2];this.addEdges(p,p),this.addEdges(v,v),this.computeIntersections(S)}else if(typeof arguments[2]=="boolean"&&I(arguments[0],k)&&arguments[1]instanceof ui){var N=arguments[0],O=arguments[1],ae=arguments[2];ae?this.addEdges(N,null):this.addEdges(N),this.computeIntersections(O)}}},addEdge:function(a,u){for(var c=a.getMonotoneChainEdge(),p=c.getStartIndexes(),v=0;v<p.length-1;v++){var S=new Ki(c,v),N=new Br(u,c.getMinX(v),S);this.events.add(N),this.events.add(new Br(c.getMaxX(v),N))}},processOverlaps:function(a,u,c,p){for(var v=c.getObject(),S=a;u>S;S++){var N=this.events.get(S);if(N.isInsert()){var O=N.getObject();c.isSameLabel(N)||(v.computeIntersections(O,p),this.nOverlaps++)}}},addEdges:function(){if(arguments.length===1)for(var a=arguments[0],u=a.iterator();u.hasNext();){var c=u.next();this.addEdge(c,c)}else if(arguments.length===2)for(var p=arguments[0],v=arguments[1],u=p.iterator();u.hasNext();){var c=u.next();this.addEdge(c,v)}},interfaces_:function(){return[]},getClass:function(){return va}}),o(Hr.prototype,{getMin:function(){return this.min},intersects:function(a,u){return!(this.min>u||this.max<a)},getMax:function(){return this.max},toString:function(){return xn.toLineString(new C(this.min,0),new C(this.max,0))},interfaces_:function(){return[]},getClass:function(){return Hr}}),o(ba.prototype,{compare:function(a,u){var c=a,p=u,v=(c.min+c.max)/2,S=(p.min+p.max)/2;return S>v?-1:v>S?1:0},interfaces_:function(){return[y]},getClass:function(){return ba}}),Hr.NodeComparator=ba,E(Ji,Hr),o(Ji.prototype,{query:function(a,u,c){return this.intersects(a,u)?void c.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return Ji}}),E(xa,Hr),o(xa.prototype,{buildExtent:function(a,u){this.min=Math.min(a.min,u.min),this.max=Math.max(a.max,u.max)},query:function(a,u,c){return this.intersects(a,u)?(this.node1!==null&&this.node1.query(a,u,c),void(this.node2!==null&&this.node2.query(a,u,c))):null},interfaces_:function(){return[]},getClass:function(){return xa}}),o(Ta.prototype,{buildTree:function(){ri.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var a=this.leaves,u=null,c=new q;;){if(this.buildLevel(a,c),c.size()===1)return c.get(0);u=a,a=c,c=u}},insert:function(a,u,c){if(this.root!==null)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new Ji(a,u,c))},query:function(a,u,c){this.init(),this.root.query(a,u,c)},buildRoot:function(){return this.root!==null?null:void(this.root=this.buildTree())},printNode:function(a){Z.out.println(xn.toLineString(new C(a.min,this.level),new C(a.max,this.level)))},init:function(){return this.root!==null?null:void this.buildRoot()},buildLevel:function(a,u){this.level++,u.clear();for(var c=0;c<a.size();c+=2){var p=a.get(c),v=c+1<a.size()?a.get(c):null;if(v===null)u.add(p);else{var S=new xa(a.get(c),a.get(c+1));u.add(S)}}},interfaces_:function(){return[]},getClass:function(){return Ta}}),o(Hn.prototype,{filter:function(a){if(this.isForcedToLineString&&a instanceof le){var u=a.getFactory().createLineString(a.getCoordinateSequence());return this.lines.add(u),null}a instanceof At&&this.lines.add(a)},setForceToLineString:function(a){this.isForcedToLineString=a},interfaces_:function(){return[Me]},getClass:function(){return Hn}}),Hn.getGeometry=function(){if(arguments.length===1){var a=arguments[0];return a.getFactory().buildGeometry(Hn.getLines(a))}if(arguments.length===2){var u=arguments[0],c=arguments[1];return u.getFactory().buildGeometry(Hn.getLines(u,c))}},Hn.getLines=function(){if(arguments.length===1){var a=arguments[0];return Hn.getLines(a,!1)}if(arguments.length===2){if(I(arguments[0],Y)&&I(arguments[1],Y)){for(var u=arguments[0],c=arguments[1],p=u.iterator();p.hasNext();){var v=p.next();Hn.getLines(v,c)}return c}if(arguments[0]instanceof Ee&&typeof arguments[1]=="boolean"){var S=arguments[0],N=arguments[1],O=new q;return S.apply(new Hn(O,N)),O}if(arguments[0]instanceof Ee&&I(arguments[1],Y)){var ae=arguments[0],ve=arguments[1];return ae instanceof At?ve.add(ae):ae.apply(new Hn(ve)),ve}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&I(arguments[0],Y)&&I(arguments[1],Y)){for(var Pe=arguments[0],Te=arguments[1],ze=arguments[2],p=Pe.iterator();p.hasNext();){var v=p.next();Hn.getLines(v,Te,ze)}return Te}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Ee&&I(arguments[1],Y)){var mt=arguments[0],Ft=arguments[1],jt=arguments[2];return mt.apply(new Hn(Ft,jt)),Ft}}},o(Ur.prototype,{visitItem:function(a){this.items.add(a)},getItems:function(){return this.items},interfaces_:function(){return[Pt]},getClass:function(){return Ur}}),o(Yi.prototype,{locate:function(a){var u=new Er(a),c=new Xi(u);return this.index.query(a.y,a.y,c),u.getLocation()},interfaces_:function(){return[br]},getClass:function(){return Yi}}),o(Xi.prototype,{visitItem:function(a){var u=a;this.counter.countSegment(u.getCoordinate(0),u.getCoordinate(1))},interfaces_:function(){return[Pt]},getClass:function(){return Xi}}),o(_i.prototype,{init:function(a){for(var u=Hn.getLines(a),c=u.iterator();c.hasNext();){var p=c.next(),v=p.getCoordinates();this.addLine(v)}},addLine:function(a){for(var u=1;u<a.length;u++){var c=new Ht(a[u-1],a[u]),p=Math.min(c.p0.y,c.p1.y),v=Math.max(c.p0.y,c.p1.y);this.index.insert(p,v,c)}},query:function(){if(arguments.length===2){var a=arguments[0],u=arguments[1],c=new Ur;return this.index.query(a,u,c),c.getItems()}if(arguments.length===3){var p=arguments[0],v=arguments[1],S=arguments[2];this.index.query(p,v,S)}},interfaces_:function(){return[]},getClass:function(){return _i}}),Yi.SegmentVisitor=Xi,Yi.IntervalIndexedGeometry=_i,o(Oa.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(a){a.print(this.coord),a.print(" seg # = "+this.segmentIndex),a.println(" dist = "+this.dist)},compareTo:function(a){var u=a;return this.compare(u.segmentIndex,u.dist)},isEndPoint:function(a){return this.segmentIndex===0&&this.dist===0?!0:this.segmentIndex===a},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(a,u){return this.segmentIndex<a?-1:this.segmentIndex>a?1:this.dist<u?-1:this.dist>u?1:0},interfaces_:function(){return[g]},getClass:function(){return Oa}}),o(li.prototype,{print:function(a){a.println("Intersections:");for(var u=this.iterator();u.hasNext();){var c=u.next();c.print(a)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(a){this.addEndpoints();for(var u=this.iterator(),c=u.next();u.hasNext();){var p=u.next(),v=this.createSplitEdge(c,p);a.add(v),c=p}},addEndpoints:function(){var a=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[a],a,0)},createSplitEdge:function(a,u){var c=u.segmentIndex-a.segmentIndex+2,p=this.edge.pts[u.segmentIndex],v=u.dist>0||!u.coord.equals2D(p);v||c--;var S=new Array(c).fill(null),N=0;S[N++]=new C(a.coord);for(var O=a.segmentIndex+1;O<=u.segmentIndex;O++)S[N++]=this.edge.pts[O];return v&&(S[N]=u.coord),new fr(S,new Nn(this.edge.label))},add:function(a,u,c){var p=new Oa(a,u,c),v=this.nodeMap.get(p);return v!==null?v:(this.nodeMap.put(p,p),p)},isIntersection:function(a){for(var u=this.iterator();u.hasNext();){var c=u.next();if(c.coord.equals(a))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return li}}),o(Wr.prototype,{getChainStartIndices:function(a){var u=0,c=new q;c.add(new ee(u));do{var p=this.findChainEnd(a,u);c.add(new ee(p)),u=p}while(u<a.length-1);var v=Wr.toIntArray(c);return v},findChainEnd:function(a,u){for(var c=an.quadrant(a[u],a[u+1]),p=u+1;p<a.length;){var v=an.quadrant(a[p-1],a[p]);if(v!==c)break;p++}return p-1},interfaces_:function(){return[]},getClass:function(){return Wr}}),Wr.toIntArray=function(a){for(var u=new Array(a.size()).fill(null),c=0;c<u.length;c++)u[c]=a.get(c).intValue();return u},o(er.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(a){var u=this.pts[this.startIndex[a]].x,c=this.pts[this.startIndex[a+1]].x;return u>c?u:c},getMinX:function(a){var u=this.pts[this.startIndex[a]].x,c=this.pts[this.startIndex[a+1]].x;return c>u?u:c},computeIntersectsForChain:function(){if(arguments.length===4){var a=arguments[0],u=arguments[1],c=arguments[2],p=arguments[3];this.computeIntersectsForChain(this.startIndex[a],this.startIndex[a+1],u,u.startIndex[c],u.startIndex[c+1],p)}else if(arguments.length===6){var v=arguments[0],S=arguments[1],N=arguments[2],O=arguments[3],ae=arguments[4],ve=arguments[5],Pe=this.pts[v],Te=this.pts[S],ze=N.pts[O],mt=N.pts[ae];if(S-v===1&&ae-O===1)return ve.addIntersections(this.e,v,N.e,O),null;if(this.env1.init(Pe,Te),this.env2.init(ze,mt),!this.env1.intersects(this.env2))return null;var Ft=Math.trunc((v+S)/2),jt=Math.trunc((O+ae)/2);Ft>v&&(jt>O&&this.computeIntersectsForChain(v,Ft,N,O,jt,ve),ae>jt&&this.computeIntersectsForChain(v,Ft,N,jt,ae,ve)),S>Ft&&(jt>O&&this.computeIntersectsForChain(Ft,S,N,O,jt,ve),ae>jt&&this.computeIntersectsForChain(Ft,S,N,jt,ae,ve))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(a,u){for(var c=0;c<this.startIndex.length-1;c++)for(var p=0;p<a.startIndex.length-1;p++)this.computeIntersectsForChain(c,a,p,u)},interfaces_:function(){return[]},getClass:function(){return er}}),o(Yn.prototype,{getDepth:function(a,u){return this.depth[a][u]},setDepth:function(a,u,c){this.depth[a][u]=c},isNull:function(){if(arguments.length===0){for(var a=0;2>a;a++)for(var u=0;3>u;u++)if(this.depth[a][u]!==Yn.NULL_VALUE)return!1;return!0}if(arguments.length===1){var c=arguments[0];return this.depth[c][1]===Yn.NULL_VALUE}if(arguments.length===2){var p=arguments[0],v=arguments[1];return this.depth[p][v]===Yn.NULL_VALUE}},normalize:function(){for(var a=0;2>a;a++)if(!this.isNull(a)){var u=this.depth[a][1];this.depth[a][2]<u&&(u=this.depth[a][2]),0>u&&(u=0);for(var c=1;3>c;c++){var p=0;this.depth[a][c]>u&&(p=1),this.depth[a][c]=p}}},getDelta:function(a){return this.depth[a][Je.RIGHT]-this.depth[a][Je.LEFT]},getLocation:function(a,u){return this.depth[a][u]<=0?x.EXTERIOR:x.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(arguments.length===1)for(var a=arguments[0],u=0;2>u;u++)for(var c=1;3>c;c++){var p=a.getLocation(u,c);p!==x.EXTERIOR&&p!==x.INTERIOR||(this.isNull(u,c)?this.depth[u][c]=Yn.depthAtLocation(p):this.depth[u][c]+=Yn.depthAtLocation(p))}else if(arguments.length===3){var v=arguments[0],S=arguments[1],N=arguments[2];N===x.INTERIOR&&this.depth[v][S]++}},interfaces_:function(){return[]},getClass:function(){return Yn}}),Yn.depthAtLocation=function(a){return a===x.EXTERIOR?0:a===x.INTERIOR?1:Yn.NULL_VALUE},Yn.NULL_VALUE=-1,E(fr,si),o(fr.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var a=new Array(2).fill(null);a[0]=this.pts[0],a[1]=this.pts[1];var u=new fr(a,Nn.toLineLabel(this.label));return u},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(a){this._isIsolated=a},setName:function(a){this.name=a},equals:function(a){if(!(a instanceof fr))return!1;var u=a;if(this.pts.length!==u.pts.length)return!1;for(var c=!0,p=!0,v=this.pts.length,S=0;S<this.pts.length;S++)if(this.pts[S].equals2D(u.pts[S])||(c=!1),this.pts[S].equals2D(u.pts[--v])||(p=!1),!c&&!p)return!1;return!0},getCoordinate:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var a=arguments[0];return this.pts[a]}},print:function(a){a.print("edge "+this.name+": "),a.print("LINESTRING (");for(var u=0;u<this.pts.length;u++)u>0&&a.print(","),a.print(this.pts[u].x+" "+this.pts[u].y);a.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(a){fr.updateIM(this.label,a)},isCollapsed:function(){return this.label.isArea()?this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2]):!1},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(a){a.print("edge "+this.name+": ");for(var u=this.pts.length-1;u>=0;u--)a.print(this.pts[u]+" ");a.println("")},getMonotoneChainEdge:function(){return this.mce===null&&(this.mce=new er(this)),this.mce},getEnvelope:function(){if(this.env===null){this.env=new Q;for(var a=0;a<this.pts.length;a++)this.env.expandToInclude(this.pts[a])}return this.env},addIntersection:function(a,u,c,p){var v=new C(a.getIntersection(p)),S=u,N=a.getEdgeDistance(c,p),O=S+1;if(O<this.pts.length){var ae=this.pts[O];v.equals2D(ae)&&(S=O,N=0)}this.eiList.add(v,S,N)},toString:function(){var a=new B;a.append("edge "+this.name+": "),a.append("LINESTRING (");for(var u=0;u<this.pts.length;u++)u>0&&a.append(","),a.append(this.pts[u].x+" "+this.pts[u].y);return a.append(")  "+this.label+" "+this.depthDelta),a.toString()},isPointwiseEqual:function(a){if(this.pts.length!==a.pts.length)return!1;for(var u=0;u<this.pts.length;u++)if(!this.pts[u].equals2D(a.pts[u]))return!1;return!0},setDepthDelta:function(a){this.depthDelta=a},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(a,u,c){for(var p=0;p<a.getIntersectionNum();p++)this.addIntersection(a,u,c,p)},interfaces_:function(){return[]},getClass:function(){return fr}}),fr.updateIM=function(){if(arguments.length!==2)return si.prototype.updateIM.apply(this,arguments);var a=arguments[0],u=arguments[1];u.setAtLeastIfValid(a.getLocation(0,Je.ON),a.getLocation(1,Je.ON),1),a.isArea()&&(u.setAtLeastIfValid(a.getLocation(0,Je.LEFT),a.getLocation(1,Je.LEFT),2),u.setAtLeastIfValid(a.getLocation(0,Je.RIGHT),a.getLocation(1,Je.RIGHT),2))},E(tr,mr),o(tr.prototype,{insertBoundaryPoint:function(a,u){var c=this.nodes.addNode(u),p=c.getLabel(),v=1,S=x.NONE;S=p.getLocation(a,Je.ON),S===x.BOUNDARY&&v++;var N=tr.determineBoundary(this.boundaryNodeRule,v);p.setLocation(a,N)},computeSelfNodes:function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];return this.computeSelfNodes(a,u,!1)}if(arguments.length===3){var c=arguments[0],p=arguments[1],v=arguments[2],S=new ui(c,!0,!1);S.setIsDoneIfProperInt(v);var N=this.createEdgeSetIntersector(),O=this.parentGeom instanceof le||this.parentGeom instanceof Mt||this.parentGeom instanceof oe,ae=p||!O;return N.computeIntersections(this.edges,S,ae),this.addSelfIntersectionNodes(this.argIndex),S}},computeSplitEdges:function(a){for(var u=this.edges.iterator();u.hasNext();){var c=u.next();c.eiList.addSplitEdges(a)}},computeEdgeIntersections:function(a,u,c){var p=new ui(u,c,!0);p.setBoundaryNodes(this.getBoundaryNodes(),a.getBoundaryNodes());var v=this.createEdgeSetIntersector();return v.computeIntersections(this.edges,a.edges,p),p},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof ht){var a=arguments[0],u=a.getCoordinate();this.insertPoint(this.argIndex,u,x.INTERIOR)}else if(arguments[0]instanceof C){var c=arguments[0];this.insertPoint(this.argIndex,c,x.INTERIOR)}},addPolygon:function(a){this.addPolygonRing(a.getExteriorRing(),x.EXTERIOR,x.INTERIOR);for(var u=0;u<a.getNumInteriorRing();u++){var c=a.getInteriorRingN(u);this.addPolygonRing(c,x.INTERIOR,x.EXTERIOR)}},addEdge:function(a){this.insertEdge(a);var u=a.getCoordinates();this.insertPoint(this.argIndex,u[0],x.BOUNDARY),this.insertPoint(this.argIndex,u[u.length-1],x.BOUNDARY)},addLineString:function(a){var u=Oe.removeRepeatedPoints(a.getCoordinates());if(u.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=u[0],null;var c=new fr(u,new Nn(this.argIndex,x.INTERIOR));this.lineEdgeMap.put(a,c),this.insertEdge(c),$.isTrue(u.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,u[0]),this.insertBoundaryPoint(this.argIndex,u[u.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var a=this.getBoundaryNodes(),u=new Array(a.size()).fill(null),c=0,p=a.iterator();p.hasNext();){var v=p.next();u[c++]=v.getCoordinate().copy()}return u},getBoundaryNodes:function(){return this.boundaryNodes===null&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(a,u,c){return this.isBoundaryNode(a,u)?null:void(c===x.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(a,u):this.insertPoint(a,u,c))},addPolygonRing:function(a,u,c){if(a.isEmpty())return null;var p=Oe.removeRepeatedPoints(a.getCoordinates());if(p.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=p[0],null;var v=u,S=c;Ge.isCCW(p)&&(v=c,S=u);var N=new fr(p,new Nn(this.argIndex,x.BOUNDARY,v,S));this.lineEdgeMap.put(a,N),this.insertEdge(N),this.insertPoint(this.argIndex,p[0],x.BOUNDARY)},insertPoint:function(a,u,c){var p=this.nodes.addNode(u),v=p.getLabel();v===null?p.label=new Nn(a,c):v.setLocation(a,c)},createEdgeSetIntersector:function(){return new va},addSelfIntersectionNodes:function(a){for(var u=this.edges.iterator();u.hasNext();)for(var c=u.next(),p=c.getLabel().getLocation(a),v=c.eiList.iterator();v.hasNext();){var S=v.next();this.addSelfIntersectionNode(a,S.coord,p)}},add:function(){if(arguments.length!==1)return mr.prototype.add.apply(this,arguments);var a=arguments[0];if(a.isEmpty())return null;if(a instanceof oe&&(this.useBoundaryDeterminationRule=!1),a instanceof Mt)this.addPolygon(a);else if(a instanceof At)this.addLineString(a);else if(a instanceof ht)this.addPoint(a);else if(a instanceof me)this.addCollection(a);else if(a instanceof ft)this.addCollection(a);else if(a instanceof oe)this.addCollection(a);else{if(!(a instanceof Ot))throw new UnsupportedOperationException(a.getClass().getName());this.addCollection(a)}},addCollection:function(a){for(var u=0;u<a.getNumGeometries();u++){var c=a.getGeometryN(u);this.add(c)}},locate:function(a){return I(this.parentGeom,Bn)&&this.parentGeom.getNumGeometries()>50?(this.areaPtLocator===null&&(this.areaPtLocator=new Yi(this.parentGeom)),this.areaPtLocator.locate(a)):this.ptLocator.locate(a,this.parentGeom)},findEdge:function(){if(arguments.length===1){var a=arguments[0];return this.lineEdgeMap.get(a)}return mr.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return tr}}),tr.determineBoundary=function(a,u){return a.isInBoundary(u)?x.BOUNDARY:x.INTERIOR},o(di.prototype,{getArgGeometry:function(a){return this.arg[a].getGeometry()},setComputationPrecision:function(a){this.resultPrecisionModel=a,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return di}}),o(Tr.prototype,{compareTo:function(a){var u=a,c=Tr.compareOriented(this.pts,this._orientation,u.pts,u._orientation);return c},interfaces_:function(){return[g]},getClass:function(){return Tr}}),Tr.orientation=function(a){return Oe.increasingDirection(a)===1},Tr.compareOriented=function(a,u,c,p){for(var v=u?1:-1,S=p?1:-1,N=u?a.length:-1,O=p?c.length:-1,ae=u?0:a.length-1,ve=p?0:c.length-1;;){var Pe=a[ae].compareTo(c[ve]);if(Pe!==0)return Pe;ae+=v,ve+=S;var Te=ae===N,ze=ve===O;if(Te&&!ze)return-1;if(!Te&&ze)return 1;if(Te&&ze)return 0}},o(Si.prototype,{print:function(a){a.print("MULTILINESTRING ( ");for(var u=0;u<this.edges.size();u++){var c=this.edges.get(u);u>0&&a.print(","),a.print("(");for(var p=c.getCoordinates(),v=0;v<p.length;v++)v>0&&a.print(","),a.print(p[v].x+" "+p[v].y);a.println(")")}a.print(")  ")},addAll:function(a){for(var u=a.iterator();u.hasNext();)this.add(u.next())},findEdgeIndex:function(a){for(var u=0;u<this.edges.size();u++)if(this.edges.get(u).equals(a))return u;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(a){return this.edges.get(a)},findEqualEdge:function(a){var u=new Tr(a.getCoordinates()),c=this.ocaMap.get(u);return c},add:function(a){this.edges.add(a);var u=new Tr(a.getCoordinates());this.ocaMap.put(u,a)},interfaces_:function(){return[]},getClass:function(){return Si}}),E(yt,di),o(yt.prototype,{insertUniqueEdge:function(a){var u=this.edgeList.findEqualEdge(a);if(u!==null){var c=u.getLabel(),p=a.getLabel();u.isPointwiseEqual(a)||(p=new Nn(a.getLabel()),p.flip());var v=u.getDepth();v.isNull()&&v.add(c),v.add(p),c.merge(p)}else this.edgeList.add(a)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var a=this.graph.getEdgeEnds().iterator();a.hasNext();){var u=a.next(),c=u.getSym();u.isInResult()&&c.isInResult()&&(u.setInResult(!1),c.setInResult(!1))}},isCoveredByLA:function(a){return this.isCovered(a,this.resultLineList)?!0:!!this.isCovered(a,this.resultPolyList)},computeGeometry:function(a,u,c,p){var v=new q;return v.addAll(a),v.addAll(u),v.addAll(c),v.isEmpty()?yt.createEmptyResult(p,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(v)},mergeSymLabels:function(){for(var a=this.graph.getNodes().iterator();a.hasNext();){var u=a.next();u.getEdges().mergeSymLabels()}},isCovered:function(a,u){for(var c=u.iterator();c.hasNext();){var p=c.next(),v=this.ptLocator.locate(a,p);if(v!==x.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var a=new q,u=this.edgeList.iterator();u.hasNext();){var c=u.next();c.isCollapsed()&&(u.remove(),a.add(c.getCollapsedEdge()))}this.edgeList.addAll(a)},updateNodeLabelling:function(){for(var a=this.graph.getNodes().iterator();a.hasNext();){var u=a.next(),c=u.getEdges().getLabel();u.getLabel().merge(c)}},getResultGeometry:function(a){return this.computeOverlay(a),this.resultGeom},insertUniqueEdges:function(a){for(var u=a.iterator();u.hasNext();){var c=u.next();this.insertUniqueEdge(c)}},computeOverlay:function(a){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var u=new q;this.arg[0].computeSplitEdges(u),this.arg[1].computeSplitEdges(u),this.insertUniqueEdges(u),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),yi.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(a),this.cancelDuplicateResultEdges();var c=new pa(this.geomFact);c.add(this.graph),this.resultPolyList=c.getPolygons();var p=new oi(this,this.geomFact,this.ptLocator);this.resultLineList=p.build(a);var v=new ma(this,this.geomFact,this.ptLocator);this.resultPointList=v.build(a),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,a)},labelIncompleteNode:function(a,u){var c=this.ptLocator.locate(a.getCoordinate(),this.arg[u].getGeometry());a.getLabel().setLocation(u,c)},copyPoints:function(a){for(var u=this.arg[a].getNodeIterator();u.hasNext();){var c=u.next(),p=this.graph.addNode(c.getCoordinate());p.setLabel(a,c.getLabel().getLocation(a))}},findResultAreaEdges:function(a){for(var u=this.graph.getEdgeEnds().iterator();u.hasNext();){var c=u.next(),p=c.getLabel();p.isArea()&&!c.isInteriorAreaEdge()&&yt.isResultOfOp(p.getLocation(0,Je.RIGHT),p.getLocation(1,Je.RIGHT),a)&&c.setInResult(!0)}},computeLabelsFromDepths:function(){for(var a=this.edgeList.iterator();a.hasNext();){var u=a.next(),c=u.getLabel(),p=u.getDepth();if(!p.isNull()){p.normalize();for(var v=0;2>v;v++)c.isNull(v)||!c.isArea()||p.isNull(v)||(p.getDelta(v)===0?c.toLine(v):($.isTrue(!p.isNull(v,Je.LEFT),"depth of LEFT side has not been initialized"),c.setLocation(v,Je.LEFT,p.getLocation(v,Je.LEFT)),$.isTrue(!p.isNull(v,Je.RIGHT),"depth of RIGHT side has not been initialized"),c.setLocation(v,Je.RIGHT,p.getLocation(v,Je.RIGHT))))}}},computeLabelling:function(){for(var a=this.graph.getNodes().iterator();a.hasNext();){var u=a.next();u.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var a=0,u=this.graph.getNodes().iterator();u.hasNext();){var c=u.next(),p=c.getLabel();c.isIsolated()&&(a++,p.isNull(0)?this.labelIncompleteNode(c,0):this.labelIncompleteNode(c,1)),c.getEdges().updateLabelling(p)}},isCoveredByA:function(a){return!!this.isCovered(a,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return yt}}),yt.overlayOp=function(a,u,c){var p=new yt(a,u),v=p.getResultGeometry(c);return v},yt.intersection=function(a,u){if(a.isEmpty()||u.isEmpty())return yt.createEmptyResult(yt.INTERSECTION,a,u,a.getFactory());if(a.isGeometryCollection()){var c=u;return Pi.map(a,{interfaces_:function(){return[MapOp]},map:function(p){return p.intersection(c)}})}return a.checkNotGeometryCollection(a),a.checkNotGeometryCollection(u),Ln.overlayOp(a,u,yt.INTERSECTION)},yt.symDifference=function(a,u){if(a.isEmpty()||u.isEmpty()){if(a.isEmpty()&&u.isEmpty())return yt.createEmptyResult(yt.SYMDIFFERENCE,a,u,a.getFactory());if(a.isEmpty())return u.copy();if(u.isEmpty())return a.copy()}return a.checkNotGeometryCollection(a),a.checkNotGeometryCollection(u),Ln.overlayOp(a,u,yt.SYMDIFFERENCE)},yt.resultDimension=function(a,u,c){var p=u.getDimension(),v=c.getDimension(),S=-1;switch(a){case yt.INTERSECTION:S=Math.min(p,v);break;case yt.UNION:S=Math.max(p,v);break;case yt.DIFFERENCE:S=p;break;case yt.SYMDIFFERENCE:S=Math.max(p,v)}return S},yt.createEmptyResult=function(a,u,c,p){var v=null;switch(yt.resultDimension(a,u,c)){case-1:v=p.createGeometryCollection(new Array(0).fill(null));break;case 0:v=p.createPoint();break;case 1:v=p.createLineString();break;case 2:v=p.createPolygon()}return v},yt.difference=function(a,u){return a.isEmpty()?yt.createEmptyResult(yt.DIFFERENCE,a,u,a.getFactory()):u.isEmpty()?a.copy():(a.checkNotGeometryCollection(a),a.checkNotGeometryCollection(u),Ln.overlayOp(a,u,yt.DIFFERENCE))},yt.isResultOfOp=function(){if(arguments.length===2){var a=arguments[0],u=arguments[1],c=a.getLocation(0),p=a.getLocation(1);return yt.isResultOfOp(c,p,u)}if(arguments.length===3){var v=arguments[0],S=arguments[1],N=arguments[2];switch(v===x.BOUNDARY&&(v=x.INTERIOR),S===x.BOUNDARY&&(S=x.INTERIOR),N){case yt.INTERSECTION:return v===x.INTERIOR&&S===x.INTERIOR;case yt.UNION:return v===x.INTERIOR||S===x.INTERIOR;case yt.DIFFERENCE:return v===x.INTERIOR&&S!==x.INTERIOR;case yt.SYMDIFFERENCE:return v===x.INTERIOR&&S!==x.INTERIOR||v!==x.INTERIOR&&S===x.INTERIOR}return!1}},yt.INTERSECTION=1,yt.UNION=2,yt.DIFFERENCE=3,yt.SYMDIFFERENCE=4,o(Xn.prototype,{selfSnap:function(a){var u=new fe(a),c=u.snapTo(a,this.snapTolerance);return c},removeCommonBits:function(a){this.cbr=new Ue,this.cbr.add(a[0]),this.cbr.add(a[1]);var u=new Array(2).fill(null);return u[0]=this.cbr.removeCommonBits(a[0].copy()),u[1]=this.cbr.removeCommonBits(a[1].copy()),u},prepareResult:function(a){return this.cbr.addCommonBits(a),a},getResultGeometry:function(a){var u=this.snap(this.geom),c=yt.overlayOp(u[0],u[1],a);return this.prepareResult(c)},checkValid:function(a){a.isValid()||Z.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=fe.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(a){var u=this.removeCommonBits(a),c=fe.snap(u[0],u[1],this.snapTolerance);return c},interfaces_:function(){return[]},getClass:function(){return Xn}}),Xn.overlayOp=function(a,u,c){var p=new Xn(a,u);return p.getResultGeometry(c)},Xn.union=function(a,u){return Xn.overlayOp(a,u,yt.UNION)},Xn.intersection=function(a,u){return Xn.overlayOp(a,u,yt.INTERSECTION)},Xn.symDifference=function(a,u){return Xn.overlayOp(a,u,yt.SYMDIFFERENCE)},Xn.difference=function(a,u){return Xn.overlayOp(a,u,yt.DIFFERENCE)},o(Ln.prototype,{getResultGeometry:function(a){var u=null,c=!1,p=null;try{u=yt.overlayOp(this.geom[0],this.geom[1],a);var v=!0;v&&(c=!0)}catch(S){if(!(S instanceof w))throw S;p=S}finally{}if(!c)try{u=Xn.overlayOp(this.geom[0],this.geom[1],a)}catch(S){throw S instanceof w?p:S}finally{}return u},interfaces_:function(){return[]},getClass:function(){return Ln}}),Ln.overlayOp=function(a,u,c){var p=new Ln(a,u);return p.getResultGeometry(c)},Ln.union=function(a,u){return Ln.overlayOp(a,u,yt.UNION)},Ln.intersection=function(a,u){return Ln.overlayOp(a,u,yt.INTERSECTION)},Ln.symDifference=function(a,u){return Ln.overlayOp(a,u,yt.SYMDIFFERENCE)},Ln.difference=function(a,u){return Ln.overlayOp(a,u,yt.DIFFERENCE)},o(hr.prototype,{addPolygon:function(a){if(a.isEmpty())return null;var u=null,c=0,p=this.horizontalBisector(a);if(p.getLength()===0)c=0,u=p.getCoordinate();else{var v=Ln.overlayOp(p,a,yt.INTERSECTION),S=this.widestGeometry(v);c=S.getEnvelopeInternal().getWidth(),u=hr.centre(S.getEnvelopeInternal())}(this.interiorPoint===null||c>this.maxWidth)&&(this.interiorPoint=u,this.maxWidth=c)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function(){if(arguments[0]instanceof Ot){var u=arguments[0];if(u.isEmpty())return u;for(var c=u.getGeometryN(0),p=1;p<u.getNumGeometries();p++)u.getGeometryN(p).getEnvelopeInternal().getWidth()>c.getEnvelopeInternal().getWidth()&&(c=u.getGeometryN(p));return c}if(arguments[0]instanceof Ee){var v=arguments[0];return v instanceof Ot?this.widestGeometry(v):v}},horizontalBisector:function(a){var u=a.getEnvelopeInternal(),c=Xr.getBisectorY(a);return this.factory.createLineString([new C(u.getMinX(),c),new C(u.getMaxX(),c)])},add:function(a){if(a instanceof Mt)this.addPolygon(a);else if(a instanceof Ot)for(var u=a,c=0;c<u.getNumGeometries();c++)this.add(u.getGeometryN(c))},interfaces_:function(){return[]},getClass:function(){return hr}}),hr.centre=function(a){return new C(hr.avg(a.getMinX(),a.getMaxX()),hr.avg(a.getMinY(),a.getMaxY()))},hr.avg=function(a,u){return(a+u)/2},o(Xr.prototype,{updateInterval:function(a){a<=this.centreY?a>this.loY&&(this.loY=a):a>this.centreY&&a<this.hiY&&(this.hiY=a)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var a=0;a<this.poly.getNumInteriorRing();a++)this.process(this.poly.getInteriorRingN(a));var u=hr.avg(this.hiY,this.loY);return u},process:function(a){for(var u=a.getCoordinateSequence(),c=0;c<u.size();c++){var p=u.getY(c);this.updateInterval(p)}},interfaces_:function(){return[]},getClass:function(){return Xr}}),Xr.getBisectorY=function(a){var u=new Xr(a);return u.getBisectorY()},hr.SafeBisectorFinder=Xr,o(Zi.prototype,{addEndpoints:function(){if(arguments[0]instanceof Ee){var a=arguments[0];if(a instanceof At)this.addEndpoints(a.getCoordinates());else if(a instanceof Ot)for(var u=a,c=0;c<u.getNumGeometries();c++)this.addEndpoints(u.getGeometryN(c))}else if(arguments[0]instanceof Array){var p=arguments[0];this.add(p[0]),this.add(p[p.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof Ee){var a=arguments[0];if(a instanceof At)this.addInterior(a.getCoordinates());else if(a instanceof Ot)for(var u=a,c=0;c<u.getNumGeometries();c++)this.addInterior(u.getGeometryN(c))}else if(arguments[0]instanceof Array)for(var p=arguments[0],c=1;c<p.length-1;c++)this.add(p[c])},add:function(a){var u=a.distance(this.centroid);u<this.minDistance&&(this.interiorPoint=new C(a),this.minDistance=u)},interfaces_:function(){return[]},getClass:function(){return Zi}}),o(Qi.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof Ee){var a=arguments[0];if(a instanceof ht)this.add(a.getCoordinate());else if(a instanceof Ot)for(var u=a,c=0;c<u.getNumGeometries();c++)this.add(u.getGeometryN(c))}else if(arguments[0]instanceof C){var p=arguments[0],v=p.distance(this.centroid);v<this.minDistance&&(this.interiorPoint=new C(p),this.minDistance=v)}},interfaces_:function(){return[]},getClass:function(){return Qi}}),o(Jt.prototype,{interfaces_:function(){return[]},getClass:function(){return Jt}}),Jt.toDegrees=function(a){return 180*a/Math.PI},Jt.normalize=function(a){for(;a>Math.PI;)a-=Jt.PI_TIMES_2;for(;a<=-Math.PI;)a+=Jt.PI_TIMES_2;return a},Jt.angle=function(){if(arguments.length===1){var a=arguments[0];return Math.atan2(a.y,a.x)}if(arguments.length===2){var u=arguments[0],c=arguments[1],p=c.x-u.x,v=c.y-u.y;return Math.atan2(v,p)}},Jt.isAcute=function(a,u,c){var p=a.x-u.x,v=a.y-u.y,S=c.x-u.x,N=c.y-u.y,O=p*S+v*N;return O>0},Jt.isObtuse=function(a,u,c){var p=a.x-u.x,v=a.y-u.y,S=c.x-u.x,N=c.y-u.y,O=p*S+v*N;return 0>O},Jt.interiorAngle=function(a,u,c){var p=Jt.angle(u,a),v=Jt.angle(u,c);return Math.abs(v-p)},Jt.normalizePositive=function(a){if(0>a){for(;0>a;)a+=Jt.PI_TIMES_2;a>=Jt.PI_TIMES_2&&(a=0)}else{for(;a>=Jt.PI_TIMES_2;)a-=Jt.PI_TIMES_2;0>a&&(a=0)}return a},Jt.angleBetween=function(a,u,c){var p=Jt.angle(u,a),v=Jt.angle(u,c);return Jt.diff(p,v)},Jt.diff=function(a,u){var c=null;return c=u>a?u-a:a-u,c>Math.PI&&(c=2*Math.PI-c),c},Jt.toRadians=function(a){return a*Math.PI/180},Jt.getTurn=function(a,u){var c=Math.sin(u-a);return c>0?Jt.COUNTERCLOCKWISE:0>c?Jt.CLOCKWISE:Jt.NONE},Jt.angleBetweenOriented=function(a,u,c){var p=Jt.angle(u,a),v=Jt.angle(u,c),S=v-p;return S<=-Math.PI?S+Jt.PI_TIMES_2:S>Math.PI?S-Jt.PI_TIMES_2:S},Jt.PI_TIMES_2=2*Math.PI,Jt.PI_OVER_2=Math.PI/2,Jt.PI_OVER_4=Math.PI/4,Jt.COUNTERCLOCKWISE=Ge.COUNTERCLOCKWISE,Jt.CLOCKWISE=Ge.CLOCKWISE,Jt.NONE=Ge.COLLINEAR,o(wn.prototype,{area:function(){return wn.area(this.p0,this.p1,this.p2)},signedArea:function(){return wn.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(a){if(a===null)throw new d;return wn.interpolateZ(a,this.p0,this.p1,this.p2)},longestSideLength:function(){return wn.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return wn.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return wn.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return wn.area3D(this.p0,this.p1,this.p2)},centroid:function(){return wn.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return wn.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return wn}}),wn.area=function(a,u,c){return Math.abs(((c.x-a.x)*(u.y-a.y)-(u.x-a.x)*(c.y-a.y))/2)},wn.signedArea=function(a,u,c){return((c.x-a.x)*(u.y-a.y)-(u.x-a.x)*(c.y-a.y))/2},wn.det=function(a,u,c,p){return a*p-u*c},wn.interpolateZ=function(a,u,c,p){var v=u.x,S=u.y,N=c.x-v,O=p.x-v,ae=c.y-S,ve=p.y-S,Pe=N*ve-O*ae,Te=a.x-v,ze=a.y-S,mt=(ve*Te-O*ze)/Pe,Ft=(-ae*Te+N*ze)/Pe,jt=u.z+mt*(c.z-u.z)+Ft*(p.z-u.z);return jt},wn.longestSideLength=function(a,u,c){var p=a.distance(u),v=u.distance(c),S=c.distance(a),N=p;return v>N&&(N=v),S>N&&(N=S),N},wn.isAcute=function(a,u,c){return Jt.isAcute(a,u,c)&&Jt.isAcute(u,c,a)?!!Jt.isAcute(c,a,u):!1},wn.circumcentre=function(a,u,c){var p=c.x,v=c.y,S=a.x-p,N=a.y-v,O=u.x-p,ae=u.y-v,ve=2*wn.det(S,N,O,ae),Pe=wn.det(N,S*S+N*N,ae,O*O+ae*ae),Te=wn.det(S,S*S+N*N,O,O*O+ae*ae),ze=p-Pe/ve,mt=v+Te/ve;return new C(ze,mt)},wn.perpendicularBisector=function(a,u){var c=u.x-a.x,p=u.y-a.y,v=new $e(a.x+c/2,a.y+p/2,1),S=new $e(a.x-p+c/2,a.y+c+p/2,1);return new $e(v,S)},wn.angleBisector=function(a,u,c){var p=u.distance(a),v=u.distance(c),S=p/(p+v),N=c.x-a.x,O=c.y-a.y,ae=new C(a.x+S*N,a.y+S*O);return ae},wn.area3D=function(a,u,c){var p=u.x-a.x,v=u.y-a.y,S=u.z-a.z,N=c.x-a.x,O=c.y-a.y,ae=c.z-a.z,ve=v*ae-S*O,Pe=S*N-p*ae,Te=p*O-v*N,ze=ve*ve+Pe*Pe+Te*Te,mt=Math.sqrt(ze)/2;return mt},wn.centroid=function(a,u,c){var p=(a.x+u.x+c.x)/3,v=(a.y+u.y+c.y)/3;return new C(p,v)},wn.inCentre=function(a,u,c){var p=u.distance(c),v=a.distance(c),S=a.distance(u),N=p+v+S,O=(p*a.x+v*u.x+S*c.x)/N,ae=(p*a.y+v*u.y+S*c.y)/N;return new C(O,ae)},o(or.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var a=this.extremalPts[0],u=this.extremalPts[1];return this.input.getFactory().createLineString([a,u])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(this.input.getNumPoints()===1){var c=this.input.getCoordinates();return this.extremalPts=[new C(c[0])],null}var a=this.input.convexHull(),u=a.getCoordinates(),c=u;if(u[0].equals2D(u[u.length-1])&&(c=new Array(u.length-1).fill(null),Oe.copyDeep(u,0,c,0,u.length-1)),c.length<=2)return this.extremalPts=Oe.copyDeep(c),null;for(var p=or.lowestPoint(c),v=or.pointWitMinAngleWithX(c,p),S=0;S<c.length;S++){var N=or.pointWithMinAngleWithSegment(c,p,v);if(Jt.isObtuse(p,N,v))return this.extremalPts=[new C(p),new C(v)],null;if(Jt.isObtuse(N,p,v))p=N;else{if(!Jt.isObtuse(N,v,p))return this.extremalPts=[new C(p),new C(v),new C(N)],null;v=N}}$.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return this.extremalPts!==null?null:(this.computeCirclePoints(),this.computeCentre(),void(this.centre!==null&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var a=this.extremalPts[0],u=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([a,u])},getCircle:function(){if(this.compute(),this.centre===null)return this.input.getFactory().createPolygon();var a=this.input.getFactory().createPoint(this.centre);return this.radius===0?a:a.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new C((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=wn.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return or}}),or.pointWitMinAngleWithX=function(a,u){for(var c=h.MAX_VALUE,p=null,v=0;v<a.length;v++){var S=a[v];if(S!==u){var N=S.x-u.x,O=S.y-u.y;0>O&&(O=-O);var ae=Math.sqrt(N*N+O*O),ve=O/ae;c>ve&&(c=ve,p=S)}}return p},or.lowestPoint=function(a){for(var u=a[0],c=1;c<a.length;c++)a[c].y<u.y&&(u=a[c]);return u},or.pointWithMinAngleWithSegment=function(a,u,c){for(var p=h.MAX_VALUE,v=null,S=0;S<a.length;S++){var N=a[S];if(N!==u&&N!==c){var O=Jt.angleBetween(u,N,c);p>O&&(p=O,v=N)}}return v},o(qn.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),this.minWidthPt===null)return this.inputGeom.getFactory().createLineString(null);var a=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([a,this.minWidthPt])},computeWidthConvex:function(a){a instanceof Mt?this.convexHullPts=a.getExteriorRing().getCoordinates():this.convexHullPts=a.getCoordinates(),this.convexHullPts.length===0?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):this.convexHullPts.length===1?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):this.convexHullPts.length===2||this.convexHullPts.length===3?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(a){this.minWidth=h.MAX_VALUE;for(var u=1,c=new Ht,p=0;p<a.length-1;p++)c.p0=a[p],c.p1=a[p+1],u=this.findMaxPerpDistance(a,c,u)},computeMinimumDiameter:function(){if(this.minWidthPt!==null)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var a=new M(this.inputGeom).getConvexHull();this.computeWidthConvex(a)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(a,u,c){for(var p=u.distancePerpendicular(a[c]),v=p,S=c,N=S;v>=p;)p=v,S=N,N=qn.nextIndex(a,S),v=u.distancePerpendicular(a[N]);return p<this.minWidth&&(this.minPtIndex=S,this.minWidth=p,this.minWidthPt=a[this.minPtIndex],this.minBaseSeg=new Ht(u)),S},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),this.minWidth===0)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var a=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,u=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,c=h.MAX_VALUE,p=-h.MAX_VALUE,v=h.MAX_VALUE,S=-h.MAX_VALUE,N=0;N<this.convexHullPts.length;N++){var O=qn.computeC(a,u,this.convexHullPts[N]);O>p&&(p=O),c>O&&(c=O);var ae=qn.computeC(-u,a,this.convexHullPts[N]);ae>S&&(S=ae),v>ae&&(v=ae)}var ve=qn.computeSegmentForLine(-a,-u,S),Pe=qn.computeSegmentForLine(-a,-u,v),Te=qn.computeSegmentForLine(-u,a,p),ze=qn.computeSegmentForLine(-u,a,c),mt=Te.lineIntersection(ve),Ft=ze.lineIntersection(ve),jt=ze.lineIntersection(Pe),In=Te.lineIntersection(Pe),Fn=this.inputGeom.getFactory().createLinearRing([mt,Ft,jt,In,mt]);return this.inputGeom.getFactory().createPolygon(Fn,null)},interfaces_:function(){return[]},getClass:function(){return qn}}),qn.nextIndex=function(a,u){return u++,u>=a.length&&(u=0),u},qn.computeC=function(a,u,c){return a*c.y-u*c.x},qn.getMinimumDiameter=function(a){return new qn(a).getDiameter()},qn.getMinimumRectangle=function(a){return new qn(a).getMinimumRectangle()},qn.computeSegmentForLine=function(a,u,c){var p=null,v=null;return Math.abs(u)>Math.abs(a)?(p=new C(0,c/u),v=new C(1,c/u-a/u)):(p=new C(c/a,0),v=new C(c/a-u/a,1)),new Ht(p,v)};var po=Object.freeze({Centroid:Zn,CGAlgorithms:Ge,ConvexHull:M,InteriorPointArea:hr,InteriorPointLine:Zi,InteriorPointPoint:Qi,RobustLineIntersector:Cn,MinimumBoundingCircle:or,MinimumDiameter:qn});o(ci.prototype,{getResultGeometry:function(){return new Di(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(a){if(0>=a)throw new d;this.distanceTolerance=a},interfaces_:function(){return[]},getClass:function(){return ci}}),ci.densifyPoints=function(a,u,c){for(var p=new Ht,v=new te,S=0;S<a.length-1;S++){p.p0=a[S],p.p1=a[S+1],v.add(p.p0,!1);var N=p.getLength(),O=Math.trunc(N/u)+1;if(O>1)for(var ae=N/O,ve=1;O>ve;ve++){var Pe=ve*ae/N,Te=p.pointAlong(Pe);c.makePrecise(Te),v.add(Te,!1)}}return v.add(a[a.length-1],!1),v.toCoordinateArray()},ci.densify=function(a,u){var c=new ci(a);return c.setDistanceTolerance(u),c.getResultGeometry()},E(Di,ye),o(Di.prototype,{transformMultiPolygon:function(a,u){var c=ye.prototype.transformMultiPolygon.call(this,a,u);return this.createValidArea(c)},transformPolygon:function(a,u){var c=ye.prototype.transformPolygon.call(this,a,u);return u instanceof oe?c:this.createValidArea(c)},transformCoordinates:function(a,u){var c=a.toCoordinateArray(),p=ci.densifyPoints(c,this.distanceTolerance,u.getPrecisionModel());return u instanceof At&&p.length===1&&(p=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(p)},createValidArea:function(a){return a.buffer(0)},interfaces_:function(){return[]},getClass:function(){return Di}}),ci.DensifyTransformer=Di;var mo=Object.freeze({Densifier:ci});o(Cr.prototype,{find:function(a){var u=this;do{if(u===null)return null;if(u.dest().equals2D(a))return u;u=u.oNext()}while(u!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(a){if(this.oNext()===this)return this.insertAfter(a),null;var u=this.compareTo(a),c=this;do{var p=c.oNext(),v=p.compareTo(a);if(v!==u||p===this)return c.insertAfter(a),null;c=p}while(c!==this);$.shouldNeverReachHere()},insertAfter:function(a){$.equals(this._orig,a.orig());var u=this.oNext();this._sym.setNext(a),a.sym().setNext(u)},degree:function(){var u=0,c=this;do u++,c=c.oNext();while(c!==this);return u},equals:function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];return this._orig.equals2D(a)&&this._sym._orig.equals(u)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(a){var u=this.deltaX(),c=this.deltaY(),p=a.deltaX(),v=a.deltaY();if(u===p&&c===v)return 0;var S=an.quadrant(u,c),N=an.quadrant(p,v);return S>N?1:N>S?-1:Ge.computeOrientation(a._orig,a.dest(),this.dest())},prevNode:function(){for(var a=this;a.degree()===2;)if(a=a.prev(),a===this)return null;return a},compareTo:function(a){var u=a,c=this.compareAngularDirection(u);return c},next:function(){return this._next},setSym:function(a){this._sym=a},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(a){this._next=a},init:function(a){this.setSym(a),a.setSym(this),this.setNext(a),a.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return Cr}}),Cr.init=function(a,u){if(a._sym!==null||u._sym!==null||a._next!==null||u._next!==null)throw new IllegalStateException("Edges are already initialized");return a.init(u),a},Cr.create=function(a,u){var c=new Cr(a),p=new Cr(u);return c.init(p),c},E(ur,Cr),o(ur.prototype,{mark:function(){this._isMarked=!0},setMark:function(a){this._isMarked=a},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return ur}}),ur.setMarkBoth=function(a,u){a.setMark(u),a.sym().setMark(u)},ur.isMarked=function(a){return a.isMarked()},ur.setMark=function(a,u){a.setMark(u)},ur.markBoth=function(a){a.mark(),a.sym().mark()},ur.mark=function(a){a.mark()},o(Ei.prototype,{insert:function(a,u,c){var p=this.create(a,u);c!==null?c.insert(p):this.vertexMap.put(a,p);var v=this.vertexMap.get(u);return v!==null?v.insert(p.sym()):this.vertexMap.put(u,p.sym()),p},create:function(a,u){var c=this.createEdge(a),p=this.createEdge(u);return Cr.init(c,p),c},createEdge:function(a){return new Cr(a)},addEdge:function(a,u){if(!Ei.isValidEdge(a,u))return null;var c=this.vertexMap.get(a),p=null;if(c!==null&&(p=c.find(u)),p!==null)return p;var v=this.insert(a,u,c);return v},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(a,u){var c=this.vertexMap.get(a);return c===null?null:c.find(u)},interfaces_:function(){return[]},getClass:function(){return Ei}}),Ei.isValidEdge=function(a,u){var c=u.compareTo(a);return c!==0},E(ea,ur),o(ea.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return ea}}),E(T,Ei),o(T.prototype,{createEdge:function(a){return new ea(a)},interfaces_:function(){return[]},getClass:function(){return T}}),o(ue.prototype,{addLine:function(a){this.lines.add(this.factory.createLineString(a.toCoordinateArray()))},updateRingStartEdge:function(a){return a.isStart()||(a=a.sym(),a.isStart())?this.ringStartEdge===null?(this.ringStartEdge=a,null):void(a.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=a)):null},getResult:function(){return this.result===null&&this.computeResult(),this.result},process:function(a){var u=a.prevNode();u===null&&(u=a),this.stackEdges(u),this.buildLines()},buildRing:function(a){var u=new te,c=a;for(u.add(c.orig().copy(),!1);c.sym().degree()===2;){var p=c.next();if(p===a)break;u.add(p.orig().copy(),!1),c=p}u.add(c.dest().copy(),!1),this.addLine(u)},buildLine:function(a){var u=new te,c=a;for(this.ringStartEdge=null,ur.markBoth(c),u.add(c.orig().copy(),!1);c.sym().degree()===2;){this.updateRingStartEdge(c);var p=c.next();if(p===a)return this.buildRing(this.ringStartEdge),null;u.add(p.orig().copy(),!1),c=p,ur.markBoth(c)}u.add(c.dest().copy(),!1),this.stackEdges(c.sym()),this.addLine(u)},stackEdges:function(a){var u=a;do ur.isMarked(u)||this.nodeEdgeStack.add(u),u=u.oNext();while(u!==a)},computeResult:function(){for(var a=this.graph.getVertexEdges(),u=a.iterator();u.hasNext();){var c=u.next();ur.isMarked(c)||this.process(c)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var a=this.nodeEdgeStack.pop();ur.isMarked(a)||this.buildLine(a)}},add:function(){if(arguments[0]instanceof Ee){var a=arguments[0];a.apply({interfaces_:function(){return[Me]},filter:function(ae){ae instanceof At&&this.add(ae)}})}else if(I(arguments[0],Y))for(var u=arguments[0],c=u.iterator();c.hasNext();){var p=c.next();this.add(p)}else if(arguments[0]instanceof At){var v=arguments[0];this.factory===null&&(this.factory=v.getFactory());for(var S=v.getCoordinateSequence(),N=!1,c=1;c<S.size();c++){var O=this.graph.addEdge(S.getCoordinate(c-1),S.getCoordinate(c));O!==null&&(N||(O.setStart(),N=!0))}}},interfaces_:function(){return[]},getClass:function(){return ue}}),ue.dissolve=function(a){var u=new ue;return u.add(a),u.getResult()};var yo=Object.freeze({LineDissolver:ue});o(xe.prototype,{hasChildren:function(){for(var a=0;4>a;a++)if(this.subnode[a]!==null)return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(a){a.addAll(this.items);for(var u=0;4>u;u++)this.subnode[u]!==null&&this.subnode[u].addAllItems(a);return a},getNodeCount:function(){for(var a=0,u=0;4>u;u++)this.subnode[u]!==null&&(a+=this.subnode[u].size());return a+1},size:function(){for(var a=0,u=0;4>u;u++)this.subnode[u]!==null&&(a+=this.subnode[u].size());return a+this.items.size()},addAllItemsFromOverlapping:function(a,u){if(!this.isSearchMatch(a))return null;u.addAll(this.items);for(var c=0;4>c;c++)this.subnode[c]!==null&&this.subnode[c].addAllItemsFromOverlapping(a,u)},visitItems:function(a,u){for(var c=this.items.iterator();c.hasNext();)u.visitItem(c.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(a,u){if(!this.isSearchMatch(a))return!1;for(var c=!1,p=0;4>p;p++)if(this.subnode[p]!==null&&(c=this.subnode[p].remove(a,u))){this.subnode[p].isPrunable()&&(this.subnode[p]=null);break}return c||(c=this.items.remove(u))},visit:function(a,u){if(!this.isSearchMatch(a))return null;this.visitItems(a,u);for(var c=0;4>c;c++)this.subnode[c]!==null&&this.subnode[c].visit(a,u)},getItems:function(){return this.items},depth:function(){for(var a=0,u=0;4>u;u++)if(this.subnode[u]!==null){var c=this.subnode[u].depth();c>a&&(a=c)}return a+1},isEmpty:function(){var u=!0;this.items.isEmpty()||(u=!1);for(var c=0;4>c;c++)this.subnode[c]!==null&&(this.subnode[c].isEmpty()||(u=!1));return u},add:function(a){this.items.add(a)},interfaces_:function(){return[b]},getClass:function(){return xe}}),xe.getSubnodeIndex=function(a,u,c){var p=-1;return a.getMinX()>=u&&(a.getMinY()>=c&&(p=3),a.getMaxY()<=c&&(p=1)),a.getMaxX()<=u&&(a.getMinY()>=c&&(p=2),a.getMaxY()<=c&&(p=0)),p},Le.exponent=function(a){return gt(64,a)-1023},Le.powerOf2=function(a){return Math.pow(2,a)},o(et.prototype,{getLevel:function(){return this.level},computeKey:function(){if(arguments.length===1){var a=arguments[0];for(this.level=et.computeQuadLevel(a),this.env=new Q,this.computeKey(this.level,a);!this.env.contains(a);)this.level+=1,this.computeKey(this.level,a)}else if(arguments.length===2){var u=arguments[0],c=arguments[1],p=Le.powerOf2(u);this.pt.x=Math.floor(c.getMinX()/p)*p,this.pt.y=Math.floor(c.getMinY()/p)*p,this.env.init(this.pt.x,this.pt.x+p,this.pt.y,this.pt.y+p)}},getEnvelope:function(){return this.env},getCentre:function(){return new C((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return et}}),et.computeQuadLevel=function(a){var u=a.getWidth(),c=a.getHeight(),p=u>c?u:c,v=Le.exponent(p)+1;return v},E(wt,xe),o(wt.prototype,{find:function(a){var u=xe.getSubnodeIndex(a,this.centrex,this.centrey);if(u===-1)return this;if(this.subnode[u]!==null){var c=this.subnode[u];return c.find(a)}return this},isSearchMatch:function(a){return this.env.intersects(a)},getSubnode:function(a){return this.subnode[a]===null&&(this.subnode[a]=this.createSubnode(a)),this.subnode[a]},getEnvelope:function(){return this.env},getNode:function(a){var u=xe.getSubnodeIndex(a,this.centrex,this.centrey);if(u!==-1){var c=this.getSubnode(u);return c.getNode(a)}return this},createSubnode:function(a){var u=0,c=0,p=0,v=0;switch(a){case 0:u=this.env.getMinX(),c=this.centrex,p=this.env.getMinY(),v=this.centrey;break;case 1:u=this.centrex,c=this.env.getMaxX(),p=this.env.getMinY(),v=this.centrey;break;case 2:u=this.env.getMinX(),c=this.centrex,p=this.centrey,v=this.env.getMaxY();break;case 3:u=this.centrex,c=this.env.getMaxX(),p=this.centrey,v=this.env.getMaxY()}var S=new Q(u,c,p,v),N=new wt(S,this.level-1);return N},insertNode:function(a){$.isTrue(this.env===null||this.env.contains(a.env));var u=xe.getSubnodeIndex(a.env,this.centrex,this.centrey);if(a.level===this.level-1)this.subnode[u]=a;else{var c=this.createSubnode(u);c.insertNode(a),this.subnode[u]=c}},interfaces_:function(){return[]},getClass:function(){return wt}}),wt.createNode=function(a){var u=new et(a),c=new wt(u.getEnvelope(),u.getLevel());return c},wt.createExpanded=function(a,u){var c=new Q(u);a!==null&&c.expandToInclude(a.env);var p=wt.createNode(c);return a!==null&&p.insertNode(a),p},o($t.prototype,{interfaces_:function(){return[]},getClass:function(){return $t}}),$t.isZeroWidth=function(a,u){var c=u-a;if(c===0)return!0;var p=Math.max(Math.abs(a),Math.abs(u)),v=c/p,S=Le.exponent(v);return S<=$t.MIN_BINARY_EXPONENT},$t.MIN_BINARY_EXPONENT=-50,E(en,xe),o(en.prototype,{insert:function(a,u){var c=xe.getSubnodeIndex(a,en.origin.x,en.origin.y);if(c===-1)return this.add(u),null;var p=this.subnode[c];if(p===null||!p.getEnvelope().contains(a)){var v=wt.createExpanded(p,a);this.subnode[c]=v}this.insertContained(this.subnode[c],a,u)},isSearchMatch:function(a){return!0},insertContained:function(a,u,c){$.isTrue(a.getEnvelope().contains(u));var p=$t.isZeroWidth(u.getMinX(),u.getMaxX()),v=$t.isZeroWidth(u.getMinY(),u.getMaxY()),S=null;S=p||v?a.find(u):a.getNode(u),S.add(c)},interfaces_:function(){return[]},getClass:function(){return en}}),en.origin=new C(0,0),o(mn.prototype,{size:function(){return this.root!==null?this.root.size():0},insert:function(a,u){this.collectStats(a);var c=mn.ensureExtent(a,this.minExtent);this.root.insert(c,u)},query:function(){if(arguments.length===1){var a=arguments[0],u=new Ur;return this.query(a,u),u.getItems()}if(arguments.length===2){var c=arguments[0],p=arguments[1];this.root.visit(c,p)}},queryAll:function(){var a=new q;return this.root.addAllItems(a),a},remove:function(a,u){var c=mn.ensureExtent(a,this.minExtent);return this.root.remove(c,u)},collectStats:function(a){var u=a.getWidth();u<this.minExtent&&u>0&&(this.minExtent=u);var c=a.getHeight();c<this.minExtent&&c>0&&(this.minExtent=c)},depth:function(){return this.root!==null?this.root.depth():0},isEmpty:function(){return this.root===null},interfaces_:function(){return[hn,b]},getClass:function(){return mn}}),mn.ensureExtent=function(a,u){var c=a.getMinX(),p=a.getMaxX(),v=a.getMinY(),S=a.getMaxY();return c!==p&&v!==S?a:(c===p&&(c-=u/2,p=c+u/2),v===S&&(v-=u/2,S=v+u/2),new Q(c,p,v,S))},mn.serialVersionUID=-7461163625812743e3;var vo=Object.freeze({Quadtree:mn}),bo=Object.freeze({STRtree:kt}),xo=Object.freeze({quadtree:vo,strtree:bo}),wo=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];o(_n.prototype,{read:function(a){var u=void 0;u=typeof a=="string"?JSON.parse(a):a;var c=u.type;if(!qr[c])throw new Error("Unknown GeoJSON type: "+u.type);return wo.indexOf(c)!==-1?qr[c].apply(this,[u.coordinates]):c==="GeometryCollection"?qr[c].apply(this,[u.geometries]):qr[c].apply(this,[u])},write:function(a){var u=a.getGeometryType();if(!mi[u])throw new Error("Geometry is not supported");return mi[u].apply(this,[a])}});var qr={Feature:function(a){var u={};for(var c in a)u[c]=a[c];if(a.geometry){var p=a.geometry.type;if(!qr[p])throw new Error("Unknown GeoJSON type: "+a.type);u.geometry=this.read(a.geometry)}return a.bbox&&(u.bbox=qr.bbox.apply(this,[a.bbox])),u},FeatureCollection:function(a){var u={};if(a.features){u.features=[];for(var c=0;c<a.features.length;++c)u.features.push(this.read(a.features[c]))}return a.bbox&&(u.bbox=this.parse.bbox.apply(this,[a.bbox])),u},coordinates:function(u){for(var c=[],p=0;p<u.length;++p){var v=u[p];c.push(new C(v[0],v[1]))}return c},bbox:function(a){return this.geometryFactory.createLinearRing([new C(a[0],a[1]),new C(a[2],a[1]),new C(a[2],a[3]),new C(a[0],a[3]),new C(a[0],a[1])])},Point:function(a){var u=new C(a[0],a[1]);return this.geometryFactory.createPoint(u)},MultiPoint:function(a){for(var u=[],c=0;c<a.length;++c)u.push(qr.Point.apply(this,[a[c]]));return this.geometryFactory.createMultiPoint(u)},LineString:function(a){var u=qr.coordinates.apply(this,[a]);return this.geometryFactory.createLineString(u)},MultiLineString:function(a){for(var u=[],c=0;c<a.length;++c)u.push(qr.LineString.apply(this,[a[c]]));return this.geometryFactory.createMultiLineString(u)},Polygon:function(a){for(var u=qr.coordinates.apply(this,[a[0]]),c=this.geometryFactory.createLinearRing(u),p=[],v=1;v<a.length;++v){var S=a[v],N=qr.coordinates.apply(this,[S]),O=this.geometryFactory.createLinearRing(N);p.push(O)}return this.geometryFactory.createPolygon(c,p)},MultiPolygon:function(a){for(var u=[],c=0;c<a.length;++c){var p=a[c];u.push(qr.Polygon.apply(this,[p]))}return this.geometryFactory.createMultiPolygon(u)},GeometryCollection:function(a){for(var u=[],c=0;c<a.length;++c){var p=a[c];u.push(this.read(p))}return this.geometryFactory.createGeometryCollection(u)}},mi={coordinate:function(a){return[a.x,a.y]},Point:function(a){var u=mi.coordinate.apply(this,[a.getCoordinate()]);return{type:"Point",coordinates:u}},MultiPoint:function(a){for(var u=[],c=0;c<a.geometries.length;++c){var p=a.geometries[c],v=mi.Point.apply(this,[p]);u.push(v.coordinates)}return{type:"MultiPoint",coordinates:u}},LineString:function(a){for(var u=[],c=a.getCoordinates(),p=0;p<c.length;++p){var v=c[p];u.push(mi.coordinate.apply(this,[v]))}return{type:"LineString",coordinates:u}},MultiLineString:function(a){for(var u=[],c=0;c<a.geometries.length;++c){var p=a.geometries[c],v=mi.LineString.apply(this,[p]);u.push(v.coordinates)}return{type:"MultiLineString",coordinates:u}},Polygon:function(a){var u=[],c=mi.LineString.apply(this,[a.shell]);u.push(c.coordinates);for(var p=0;p<a.holes.length;++p){var v=a.holes[p],S=mi.LineString.apply(this,[v]);u.push(S.coordinates)}return{type:"Polygon",coordinates:u}},MultiPolygon:function(a){for(var u=[],c=0;c<a.geometries.length;++c){var p=a.geometries[c],v=mi.Polygon.apply(this,[p]);u.push(v.coordinates)}return{type:"MultiPolygon",coordinates:u}},GeometryCollection:function(a){for(var u=[],c=0;c<a.geometries.length;++c){var p=a.geometries[c],v=p.getGeometryType();u.push(mi[v].apply(this,[p]))}return{type:"GeometryCollection",geometries:u}}};o(On.prototype,{read:function(a){var u=this.parser.read(a);return this.precisionModel.getType()===qt.FIXED&&this.reducePrecision(u),u},reducePrecision:function(a){var u,c;if(a.coordinate)this.precisionModel.makePrecise(a.coordinate);else if(a.points)for(u=0,c=a.points.length;c>u;u++)this.precisionModel.makePrecise(a.points[u]);else if(a.geometries)for(u=0,c=a.geometries.length;c>u;u++)this.reducePrecision(a.geometries[u])}}),o(kn.prototype,{write:function(a){return this.parser.write(a)}}),o(nr.prototype,{read:function(a){var u=this.parser.read(a);return this.precisionModel.getType()===qt.FIXED&&this.reducePrecision(u),u},reducePrecision:function(a){if(a.coordinate)this.precisionModel.makePrecise(a.coordinate);else if(a.points)for(var u=0,c=a.points.coordinates.length;c>u;u++)this.precisionModel.makePrecise(a.points.coordinates[u]);else if(a.geometries)for(var p=0,v=a.geometries.length;v>p;p++)this.reducePrecision(a.geometries[p])}}),o(Zr.prototype,{read:function(a){return a instanceof ol.geom.Point?this.convertFromPoint(a):a instanceof ol.geom.LineString?this.convertFromLineString(a):a instanceof ol.geom.LinearRing?this.convertFromLinearRing(a):a instanceof ol.geom.Polygon?this.convertFromPolygon(a):a instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(a):a instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(a):a instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(a):a instanceof ol.geom.GeometryCollection?this.convertFromCollection(a):void 0},convertFromPoint:function(a){var u=a.getCoordinates();return this.geometryFactory.createPoint(new C(u[0],u[1]))},convertFromLineString:function(a){return this.geometryFactory.createLineString(a.getCoordinates().map(function(u){return new C(u[0],u[1])}))},convertFromLinearRing:function(a){return this.geometryFactory.createLinearRing(a.getCoordinates().map(function(u){return new C(u[0],u[1])}))},convertFromPolygon:function(a){for(var u=a.getLinearRings(),c=null,p=[],v=0;v<u.length;v++){var S=this.convertFromLinearRing(u[v]);v===0?c=S:p.push(S)}return this.geometryFactory.createPolygon(c,p)},convertFromMultiPoint:function(a){var u=a.getPoints().map(function(c){return this.convertFromPoint(c)},this);return this.geometryFactory.createMultiPoint(u)},convertFromMultiLineString:function(a){var u=a.getLineStrings().map(function(c){return this.convertFromLineString(c)},this);return this.geometryFactory.createMultiLineString(u)},convertFromMultiPolygon:function(a){var u=a.getPolygons().map(function(c){return this.convertFromPolygon(c)},this);return this.geometryFactory.createMultiPolygon(u)},convertFromCollection:function(a){var u=a.getGeometries().map(function(c){return this.read(c)},this);return this.geometryFactory.createGeometryCollection(u)},write:function(a){return a.getGeometryType()==="Point"?this.convertToPoint(a.getCoordinate()):a.getGeometryType()==="LineString"?this.convertToLineString(a):a.getGeometryType()==="LinearRing"?this.convertToLinearRing(a):a.getGeometryType()==="Polygon"?this.convertToPolygon(a):a.getGeometryType()==="MultiPoint"?this.convertToMultiPoint(a):a.getGeometryType()==="MultiLineString"?this.convertToMultiLineString(a):a.getGeometryType()==="MultiPolygon"?this.convertToMultiPolygon(a):a.getGeometryType()==="GeometryCollection"?this.convertToCollection(a):void 0},convertToPoint:function(a){return new ol.geom.Point([a.x,a.y])},convertToLineString:function(a){var u=a.points.coordinates.map(Un);return new ol.geom.LineString(u)},convertToLinearRing:function(a){var u=a.points.coordinates.map(Un);return new ol.geom.LinearRing(u)},convertToPolygon:function(a){for(var u=[a.shell.points.coordinates.map(Un)],c=0;c<a.holes.length;c++)u.push(a.holes[c].points.coordinates.map(Un));return new ol.geom.Polygon(u)},convertToMultiPoint:function(a){return new ol.geom.MultiPoint(a.getCoordinates().map(Un))},convertToMultiLineString:function(a){for(var u=[],c=0;c<a.geometries.length;c++)u.push(this.convertToLineString(a.geometries[c]).getCoordinates());return new ol.geom.MultiLineString(u)},convertToMultiPolygon:function(a){for(var u=[],c=0;c<a.geometries.length;c++)u.push(this.convertToPolygon(a.geometries[c]).getCoordinates());return new ol.geom.MultiPolygon(u)},convertToCollection:function(a){for(var u=[],c=0;c<a.geometries.length;c++){var p=a.geometries[c];u.push(this.write(p))}return new ol.geom.GeometryCollection(u)}});var _o=Object.freeze({GeoJSONReader:On,GeoJSONWriter:kn,OL3Parser:Zr,WKTReader:nr,WKTWriter:xn});o(xr.prototype,{rescale:function(){if(I(arguments[0],Y))for(var a=arguments[0],u=a.iterator();u.hasNext();){var c=u.next();this.rescale(c.getCoordinates())}else if(arguments[0]instanceof Array){var p=arguments[0];p.length===2&&(new C(p[0]),new C(p[1]));for(var u=0;u<p.length;u++)p[u].x=p[u].x/this.scaleFactor+this.offsetX,p[u].y=p[u].y/this.scaleFactor+this.offsetY;p.length===2&&p[0].equals2D(p[1])&&Z.out.println(p)}},scale:function(){if(I(arguments[0],Y)){for(var a=arguments[0],u=new q,c=a.iterator();c.hasNext();){var p=c.next();u.add(new ar(this.scale(p.getCoordinates()),p.getData()))}return u}if(arguments[0]instanceof Array){for(var v=arguments[0],S=new Array(v.length).fill(null),c=0;c<v.length;c++)S[c]=new C(Math.round((v[c].x-this.offsetX)*this.scaleFactor),Math.round((v[c].y-this.offsetY)*this.scaleFactor),v[c].z);var N=Oe.removeRepeatedPoints(S);return N}},isIntegerPrecision:function(){return this.scaleFactor===1},getNodedSubstrings:function(){var a=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(a),a},computeNodes:function(a){var u=a;this.isScaled&&(u=this.scale(a)),this.noder.computeNodes(u)},interfaces_:function(){return[zi]},getClass:function(){return xr}});var So=Object.freeze({MCIndexNoder:Jr,ScaledNoder:xr,SegmentString:vt});o(Rr.prototype,{isSimpleMultiPoint:function(a){if(a.isEmpty())return!0;for(var u=new dt,c=0;c<a.getNumGeometries();c++){var p=a.getGeometryN(c),v=p.getCoordinate();if(u.contains(v))return this.nonSimpleLocation=v,!1;u.add(v)}return!0},isSimplePolygonal:function(a){for(var u=Hn.getLines(a),c=u.iterator();c.hasNext();){var p=c.next();if(!this.isSimpleLinearGeometry(p))return!1}return!0},hasClosedEndpointIntersection:function(a){for(var u=new nt,c=a.getEdgeIterator();c.hasNext();){var p=c.next(),v=(p.getMaximumSegmentIndex(),p.isClosed()),S=p.getCoordinate(0);this.addEndpoint(u,S,v);var N=p.getCoordinate(p.getNumPoints()-1);this.addEndpoint(u,N,v)}for(var c=u.values().iterator();c.hasNext();){var O=c.next();if(O.isClosed&&O.degree!==2)return this.nonSimpleLocation=O.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(a){if(a.isEmpty())return!0;var u=new tr(0,a),c=new Cn,p=u.computeSelfNodes(c,!0);return p.hasIntersection()?p.hasProperIntersection()?(this.nonSimpleLocation=p.getProperIntersectionPoint(),!1):this.hasNonEndpointIntersection(u)?!1:!this.isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(u):!0},hasNonEndpointIntersection:function(a){for(var u=a.getEdgeIterator();u.hasNext();)for(var c=u.next(),p=c.getMaximumSegmentIndex(),v=c.getEdgeIntersectionList().iterator();v.hasNext();){var S=v.next();if(!S.isEndPoint(p))return this.nonSimpleLocation=S.getCoordinate(),!0}return!1},addEndpoint:function(a,u,c){var p=a.get(u);p===null&&(p=new ta(u),a.put(u,p)),p.addEndpoint(c)},computeSimple:function(a){return this.nonSimpleLocation=null,a.isEmpty()?!0:a instanceof At?this.isSimpleLinearGeometry(a):a instanceof ft?this.isSimpleLinearGeometry(a):a instanceof me?this.isSimpleMultiPoint(a):I(a,Bn)?this.isSimplePolygonal(a):a instanceof Ot?this.isSimpleGeometryCollection(a):!0},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(a){for(var u=0;u<a.getNumGeometries();u++){var c=a.getGeometryN(u);if(!this.computeSimple(c))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return Rr}}),o(ta.prototype,{addEndpoint:function(a){this.degree++,this.isClosed|=a},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return ta}}),Rr.EndpointInfo=ta,o(on.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(a){this.quadrantSegments=a,this.quadrantSegments===0&&(this.joinStyle=on.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=on.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),0>=a&&(this.quadrantSegments=1),this.joinStyle!==on.JOIN_ROUND&&(this.quadrantSegments=on.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(a){this.joinStyle=a},setSimplifyFactor:function(a){this.simplifyFactor=0>a?0:a},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(a){this.endCapStyle=a},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(a){this.mitreLimit=a},setSingleSided:function(a){this._isSingleSided=a},interfaces_:function(){return[]},getClass:function(){return on}}),on.bufferDistanceError=function(a){var u=Math.PI/2/a;return 1-Math.cos(u/2)},on.CAP_ROUND=1,on.CAP_FLAT=2,on.CAP_SQUARE=3,on.JOIN_ROUND=1,on.JOIN_MITRE=2,on.JOIN_BEVEL=3,on.DEFAULT_QUADRANT_SEGMENTS=8,on.DEFAULT_MITRE_LIMIT=5,on.DEFAULT_SIMPLIFY_FACTOR=.01,o(Ti.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(a,u){var c=this.getRightmostSideOfSegment(a,u);return 0>c&&(c=this.getRightmostSideOfSegment(a,u-1)),0>c&&(this.minCoord=null,this.checkForRightmostCoordinate(a)),c},findRightmostEdgeAtVertex:function(){var a=this.minDe.getEdge().getCoordinates();$.isTrue(this.minIndex>0&&this.minIndex<a.length,"rightmost point expected to be interior vertex of edge");var u=a[this.minIndex-1],c=a[this.minIndex+1],p=Ge.computeOrientation(this.minCoord,c,u),v=!1;(u.y<this.minCoord.y&&c.y<this.minCoord.y&&p===Ge.COUNTERCLOCKWISE||u.y>this.minCoord.y&&c.y>this.minCoord.y&&p===Ge.CLOCKWISE)&&(v=!0),v&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(a,u){var c=a.getEdge(),p=c.getCoordinates();if(0>u||u+1>=p.length||p[u].y===p[u+1].y)return-1;var v=Je.LEFT;return p[u].y<p[u+1].y&&(v=Je.RIGHT),v},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(a){for(var u=a.getEdge().getCoordinates(),c=0;c<u.length-1;c++)(this.minCoord===null||u[c].x>this.minCoord.x)&&(this.minDe=a,this.minIndex=c,this.minCoord=u[c])},findRightmostEdgeAtNode:function(){var a=this.minDe.getNode(),u=a.getEdges();this.minDe=u.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(a){for(var u=a.iterator();u.hasNext();){var c=u.next();c.isForward()&&this.checkForRightmostCoordinate(c)}$.isTrue(this.minIndex!==0||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),this.minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var p=this.getRightmostSide(this.minDe,this.minIndex);p===Je.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return Ti}}),os.prototype.addLast=function(a){this.array_.push(a)},os.prototype.removeFirst=function(){return this.array_.shift()},os.prototype.isEmpty=function(){return this.array_.length===0},o(Ws.prototype,{clearVisitedEdges:function(){for(var a=this.dirEdgeList.iterator();a.hasNext();){var u=a.next();u.setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(a){for(var u=null,c=a.getEdges().iterator();c.hasNext();){var p=c.next();if(p.isVisited()||p.getSym().isVisited()){u=p;break}}if(u===null)throw new Qn("unable to find edge to compute depths at "+a.getCoordinate());a.getEdges().computeDepths(u);for(var c=a.getEdges().iterator();c.hasNext();){var p=c.next();p.setVisited(!0),this.copySymDepths(p)}},computeDepth:function(a){this.clearVisitedEdges();var u=this.finder.getEdge();u.getNode(),u.getLabel(),u.setEdgeDepths(Je.RIGHT,a),this.copySymDepths(u),this.computeDepths(u)},create:function(a){this.addReachable(a),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var a=this.dirEdgeList.iterator();a.hasNext();){var u=a.next();u.getDepth(Je.RIGHT)>=1&&u.getDepth(Je.LEFT)<=0&&!u.isInteriorAreaEdge()&&u.setInResult(!0)}},computeDepths:function(a){var u=new H,c=new os,p=a.getNode();for(c.addLast(p),u.add(p),a.setVisited(!0);!c.isEmpty();){var v=c.removeFirst();u.add(v),this.computeNodeDepth(v);for(var S=v.getEdges().iterator();S.hasNext();){var N=S.next(),O=N.getSym();if(!O.isVisited()){var ae=O.getNode();u.contains(ae)||(c.addLast(ae),u.add(ae))}}}},compareTo:function(a){var u=a;return this.rightMostCoord.x<u.rightMostCoord.x?-1:this.rightMostCoord.x>u.rightMostCoord.x?1:0},getEnvelope:function(){if(this.env===null){for(var a=new Q,u=this.dirEdgeList.iterator();u.hasNext();)for(var c=u.next(),p=c.getEdge().getCoordinates(),v=0;v<p.length-1;v++)a.expandToInclude(p[v]);this.env=a}return this.env},addReachable:function(a){var u=new Mn;for(u.add(a);!u.empty();){var c=u.pop();this.add(c,u)}},copySymDepths:function(a){var u=a.getSym();u.setDepth(Je.LEFT,a.getDepth(Je.RIGHT)),u.setDepth(Je.RIGHT,a.getDepth(Je.LEFT))},add:function(a,u){a.setVisited(!0),this.nodes.add(a);for(var c=a.getEdges().iterator();c.hasNext();){var p=c.next();this.dirEdgeList.add(p);var v=p.getSym(),S=v.getNode();S.isVisited()||u.push(S)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[g]},getClass:function(){return Ws}}),o(rr.prototype,{isDeletable:function(a,u,c,p){var v=this.inputLine[a],S=this.inputLine[u],N=this.inputLine[c];return this.isConcave(v,S,N)&&this.isShallow(v,S,N,p)?this.isShallowSampled(v,S,a,c,p):!1},deleteShallowConcavities:function(){for(var a=1,u=(this.inputLine.length-1,this.findNextNonDeletedIndex(a)),c=this.findNextNonDeletedIndex(u),p=!1;c<this.inputLine.length;){var v=!1;this.isDeletable(a,u,c,this.distanceTol)&&(this.isDeleted[u]=rr.DELETE,v=!0,p=!0),a=v?c:u,u=this.findNextNonDeletedIndex(a),c=this.findNextNonDeletedIndex(u)}return p},isShallowConcavity:function(a,u,c,p){var v=Ge.computeOrientation(a,u,c),S=v===this.angleOrientation;if(!S)return!1;var N=Ge.distancePointLine(u,a,c);return p>N},isShallowSampled:function(a,u,c,p,v){var S=Math.trunc((p-c)/rr.NUM_PTS_TO_CHECK);0>=S&&(S=1);for(var N=c;p>N;N+=S)if(!this.isShallow(a,u,this.inputLine[N],v))return!1;return!0},isConcave:function(u,c,p){var v=Ge.computeOrientation(u,c,p),S=v===this.angleOrientation;return S},simplify:function(a){this.distanceTol=Math.abs(a),0>a&&(this.angleOrientation=Ge.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var u=!1;do u=this.deleteShallowConcavities();while(u);return this.collapseLine()},findNextNonDeletedIndex:function(a){for(var u=a+1;u<this.inputLine.length&&this.isDeleted[u]===rr.DELETE;)u++;return u},isShallow:function(a,u,c,p){var v=Ge.distancePointLine(u,a,c);return p>v},collapseLine:function(){for(var a=new te,u=0;u<this.inputLine.length;u++)this.isDeleted[u]!==rr.DELETE&&a.add(this.inputLine[u]);return a.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return rr}}),rr.simplify=function(a,u){var c=new rr(a);return c.simplify(u)},rr.INIT=0,rr.DELETE=1,rr.KEEP=1,rr.NUM_PTS_TO_CHECK=10,o(Ra.prototype,{getCoordinates:function(){var a=this.ptList.toArray(Ra.COORDINATE_ARRAY_TYPE);return a},setPrecisionModel:function(a){this.precisionModel=a},addPt:function(a){var u=new C(a);return this.precisionModel.makePrecise(u),this.isRedundant(u)?null:void this.ptList.add(u)},reverse:function(){},addPts:function(a,u){if(u)for(var c=0;c<a.length;c++)this.addPt(a[c]);else for(var c=a.length-1;c>=0;c--)this.addPt(a[c])},isRedundant:function(a){if(this.ptList.size()<1)return!1;var u=this.ptList.get(this.ptList.size()-1),c=a.distance(u);return c<this.minimimVertexDistance},toString:function(){var a=new Dt,u=a.createLineString(this.getCoordinates());return u.toString()},closeRing:function(){if(this.ptList.size()<1)return null;var a=new C(this.ptList.get(0)),u=this.ptList.get(this.ptList.size()-1);return this.ptList.size()>=2&&this.ptList.get(this.ptList.size()-2),a.equals(u)?null:void this.ptList.add(a)},setMinimumVertexDistance:function(a){this.minimimVertexDistance=a},interfaces_:function(){return[]},getClass:function(){return Ra}}),Ra.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),o(Qr.prototype,{addNextSegment:function(a,u){if(this.s0=this.s1,this.s1=this.s2,this.s2=a,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var c=Ge.computeOrientation(this.s0,this.s1,this.s2),p=c===Ge.CLOCKWISE&&this.side===Je.LEFT||c===Ge.COUNTERCLOCKWISE&&this.side===Je.RIGHT;c===0?this.addCollinear(u):p?this.addOutsideTurn(c,u):this.addInsideTurn(c,u)},addLineEndCap:function(a,u){var c=new Ht(a,u),p=new Ht;this.computeOffsetSegment(c,Je.LEFT,this.distance,p);var v=new Ht;this.computeOffsetSegment(c,Je.RIGHT,this.distance,v);var S=u.x-a.x,N=u.y-a.y,O=Math.atan2(N,S);switch(this.bufParams.getEndCapStyle()){case on.CAP_ROUND:this.segList.addPt(p.p1),this.addFilletArc(u,O+Math.PI/2,O-Math.PI/2,Ge.CLOCKWISE,this.distance),this.segList.addPt(v.p1);break;case on.CAP_FLAT:this.segList.addPt(p.p1),this.segList.addPt(v.p1);break;case on.CAP_SQUARE:var ae=new C;ae.x=Math.abs(this.distance)*Math.cos(O),ae.y=Math.abs(this.distance)*Math.sin(O);var ve=new C(p.p1.x+ae.x,p.p1.y+ae.y),Pe=new C(v.p1.x+ae.x,v.p1.y+ae.y);this.segList.addPt(ve),this.segList.addPt(Pe)}},getCoordinates:function(){var a=this.segList.getCoordinates();return a},addMitreJoin:function(a,u,c,p){var v=!0,S=null;try{S=$e.intersection(u.p0,u.p1,c.p0,c.p1);var N=0>=p?1:S.distance(a)/Math.abs(p);N>this.bufParams.getMitreLimit()&&(v=!1)}catch(O){if(!(O instanceof J))throw O;S=new C(0,0),v=!1}finally{}v?this.segList.addPt(S):this.addLimitedMitreJoin(u,c,p,this.bufParams.getMitreLimit())},addFilletCorner:function(a,u,c,p,v){var S=u.x-a.x,N=u.y-a.y,O=Math.atan2(N,S),ae=c.x-a.x,ve=c.y-a.y,Pe=Math.atan2(ve,ae);p===Ge.CLOCKWISE?Pe>=O&&(O+=2*Math.PI):O>=Pe&&(O-=2*Math.PI),this.segList.addPt(u),this.addFilletArc(a,O,Pe,p,v),this.segList.addPt(c)},addOutsideTurn:function(a,u){return this.offset0.p1.distance(this.offset1.p0)<this.distance*Qr.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===on.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===on.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(u&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,a,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(a){this.segList.addPt(new C(a.x+this.distance,a.y+this.distance)),this.segList.addPt(new C(a.x+this.distance,a.y-this.distance)),this.segList.addPt(new C(a.x-this.distance,a.y-this.distance)),this.segList.addPt(new C(a.x-this.distance,a.y+this.distance)),this.segList.closeRing()},addSegments:function(a,u){this.segList.addPts(a,u)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(a,u,c){this.s1=a,this.s2=u,this.side=c,this.seg1.setCoordinates(a,u),this.computeOffsetSegment(this.seg1,c,this.distance,this.offset1)},addLimitedMitreJoin:function(a,u,c,p){var v=this.seg0.p1,S=Jt.angle(v,this.seg0.p0),N=(Jt.angle(v,this.seg1.p1),Jt.angleBetweenOriented(this.seg0.p0,v,this.seg1.p1)),O=N/2,ae=Jt.normalize(S+O),ve=Jt.normalize(ae+Math.PI),Pe=p*c,Te=Pe*Math.abs(Math.sin(O)),ze=c-Te,mt=v.x+Pe*Math.cos(ve),Ft=v.y+Pe*Math.sin(ve),jt=new C(mt,Ft),In=new Ht(v,jt),Fn=In.pointAlongOffset(1,ze),jr=In.pointAlongOffset(1,-ze);this.side===Je.LEFT?(this.segList.addPt(Fn),this.segList.addPt(jr)):(this.segList.addPt(jr),this.segList.addPt(Fn))},computeOffsetSegment:function(a,u,c,p){var v=u===Je.LEFT?1:-1,S=a.p1.x-a.p0.x,N=a.p1.y-a.p0.y,O=Math.sqrt(S*S+N*N),ae=v*c*S/O,ve=v*c*N/O;p.p0.x=a.p0.x-ve,p.p0.y=a.p0.y+ae,p.p1.x=a.p1.x-ve,p.p1.y=a.p1.y+ae},addFilletArc:function(a,u,c,p,v){var S=p===Ge.CLOCKWISE?-1:1,N=Math.abs(u-c),O=Math.trunc(N/this.filletAngleQuantum+.5);if(1>O)return null;var ae=null,ve=null;ae=0,ve=N/O;for(var Pe=ae,Te=new C;N>Pe;){var ze=u+S*Pe;Te.x=a.x+v*Math.cos(ze),Te.y=a.y+v*Math.sin(ze),this.segList.addPt(Te),Pe+=ve}},addInsideTurn:function(a,u){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*Qr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var c=new C((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(c);var p=new C((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(p)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(a){var u=new C(a.x+this.distance,a.y);this.segList.addPt(u),this.addFilletArc(a,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(a,u){this.segList.addPt(a.p1),this.segList.addPt(u.p0)},init:function(a){this.distance=a,this.maxCurveSegmentError=a*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new Ra,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(a*Qr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(a){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var u=this.li.getIntersectionNum();u>=2&&(this.bufParams.getJoinStyle()===on.JOIN_BEVEL||this.bufParams.getJoinStyle()===on.JOIN_MITRE?(a&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,Ge.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return Qr}}),Qr.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Qr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Qr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Qr.MAX_CLOSING_SEG_LEN_FACTOR=80,o(La.prototype,{getOffsetCurve:function(a,u){if(this.distance=u,u===0)return null;var c=0>u,p=Math.abs(u),v=this.getSegGen(p);a.length<=1?this.computePointCurve(a[0],v):this.computeOffsetCurve(a,c,v);var S=v.getCoordinates();return c&&Oe.reverse(S),S},computeSingleSidedBufferCurve:function(a,u,c){var p=this.simplifyTolerance(this.distance);if(u){c.addSegments(a,!0);var v=rr.simplify(a,-p),S=v.length-1;c.initSideSegments(v[S],v[S-1],Je.LEFT),c.addFirstSegment();for(var N=S-2;N>=0;N--)c.addNextSegment(v[N],!0)}else{c.addSegments(a,!1);var O=rr.simplify(a,p),ae=O.length-1;c.initSideSegments(O[0],O[1],Je.LEFT),c.addFirstSegment();for(var N=2;ae>=N;N++)c.addNextSegment(O[N],!0)}c.addLastSegment(),c.closeRing()},computeRingBufferCurve:function(a,u,c){var p=this.simplifyTolerance(this.distance);u===Je.RIGHT&&(p=-p);var v=rr.simplify(a,p),S=v.length-1;c.initSideSegments(v[S-1],v[0],u);for(var N=1;S>=N;N++){var O=N!==1;c.addNextSegment(v[N],O)}c.closeRing()},computeLineBufferCurve:function(a,u){var c=this.simplifyTolerance(this.distance),p=rr.simplify(a,c),v=p.length-1;u.initSideSegments(p[0],p[1],Je.LEFT);for(var S=2;v>=S;S++)u.addNextSegment(p[S],!0);u.addLastSegment(),u.addLineEndCap(p[v-1],p[v]);var N=rr.simplify(a,-c),O=N.length-1;u.initSideSegments(N[O],N[O-1],Je.LEFT);for(var S=O-2;S>=0;S--)u.addNextSegment(N[S],!0);u.addLastSegment(),u.addLineEndCap(N[1],N[0]),u.closeRing()},computePointCurve:function(a,u){switch(this.bufParams.getEndCapStyle()){case on.CAP_ROUND:u.createCircle(a);break;case on.CAP_SQUARE:u.createSquare(a)}},getLineCurve:function(a,u){if(this.distance=u,0>u&&!this.bufParams.isSingleSided()||u===0)return null;var c=Math.abs(u),p=this.getSegGen(c);if(a.length<=1)this.computePointCurve(a[0],p);else if(this.bufParams.isSingleSided()){var v=0>u;this.computeSingleSidedBufferCurve(a,v,p)}else this.computeLineBufferCurve(a,p);var S=p.getCoordinates();return S},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(a){return a*this.bufParams.getSimplifyFactor()},getRingCurve:function(a,u,c){if(this.distance=c,a.length<=2)return this.getLineCurve(a,c);if(c===0)return La.copyCoordinates(a);var p=this.getSegGen(c);return this.computeRingBufferCurve(a,u,p),p.getCoordinates()},computeOffsetCurve:function(a,u,c){var p=this.simplifyTolerance(this.distance);if(u){var v=rr.simplify(a,-p),S=v.length-1;c.initSideSegments(v[S],v[S-1],Je.LEFT),c.addFirstSegment();for(var N=S-2;N>=0;N--)c.addNextSegment(v[N],!0)}else{var O=rr.simplify(a,p),ae=O.length-1;c.initSideSegments(O[0],O[1],Je.LEFT),c.addFirstSegment();for(var N=2;ae>=N;N++)c.addNextSegment(O[N],!0)}c.addLastSegment()},getSegGen:function(a){return new Qr(this.precisionModel,this.bufParams,a)},interfaces_:function(){return[]},getClass:function(){return La}}),La.copyCoordinates=function(a){for(var u=new Array(a.length).fill(null),c=0;c<u.length;c++)u[c]=new C(a[c]);return u},o(us.prototype,{findStabbedSegments:function(){if(arguments.length===1){for(var a=arguments[0],u=new q,c=this.subgraphs.iterator();c.hasNext();){var p=c.next(),v=p.getEnvelope();a.y<v.getMinY()||a.y>v.getMaxY()||this.findStabbedSegments(a,p.getDirectedEdges(),u)}return u}if(arguments.length===3){if(I(arguments[2],k)&&arguments[0]instanceof C&&arguments[1]instanceof vi)for(var S=arguments[0],N=arguments[1],O=arguments[2],ae=N.getEdge().getCoordinates(),c=0;c<ae.length-1;c++){this.seg.p0=ae[c],this.seg.p1=ae[c+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var ve=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(ve<S.x||this.seg.isHorizontal()||S.y<this.seg.p0.y||S.y>this.seg.p1.y||Ge.computeOrientation(this.seg.p0,this.seg.p1,S)===Ge.RIGHT)){var Pe=N.getDepth(Je.LEFT);this.seg.p0.equals(ae[c])||(Pe=N.getDepth(Je.RIGHT));var Te=new ls(this.seg,Pe);O.add(Te)}}else if(I(arguments[2],k)&&arguments[0]instanceof C&&I(arguments[1],k))for(var ze=arguments[0],mt=arguments[1],Ft=arguments[2],c=mt.iterator();c.hasNext();){var jt=c.next();jt.isForward()&&this.findStabbedSegments(ze,jt,Ft)}}},getDepth:function(a){var u=this.findStabbedSegments(a);if(u.size()===0)return 0;var c=ri.min(u);return c.leftDepth},interfaces_:function(){return[]},getClass:function(){return us}}),o(ls.prototype,{compareTo:function(a){var u=a;if(this.upwardSeg.minX()>=u.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=u.upwardSeg.minX())return-1;var c=this.upwardSeg.orientationIndex(u.upwardSeg);return c!==0?c:(c=-1*u.upwardSeg.orientationIndex(this.upwardSeg),c!==0?c:this.upwardSeg.compareTo(u.upwardSeg))},compareX:function(a,u){var c=a.p0.compareTo(u.p0);return c!==0?c:a.p1.compareTo(u.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[g]},getClass:function(){return ls}}),us.DepthSegment=ls,o(zs.prototype,{addPoint:function(a){if(this.distance<=0)return null;var u=a.getCoordinates(),c=this.curveBuilder.getLineCurve(u,this.distance);this.addCurve(c,x.EXTERIOR,x.INTERIOR)},addPolygon:function(a){var u=this.distance,c=Je.LEFT;this.distance<0&&(u=-this.distance,c=Je.RIGHT);var p=a.getExteriorRing(),v=Oe.removeRepeatedPoints(p.getCoordinates());if(this.distance<0&&this.isErodedCompletely(p,this.distance)||this.distance<=0&&v.length<3)return null;this.addPolygonRing(v,u,c,x.EXTERIOR,x.INTERIOR);for(var S=0;S<a.getNumInteriorRing();S++){var N=a.getInteriorRingN(S),O=Oe.removeRepeatedPoints(N.getCoordinates());this.distance>0&&this.isErodedCompletely(N,-this.distance)||this.addPolygonRing(O,u,Je.opposite(c),x.INTERIOR,x.EXTERIOR)}},isTriangleErodedCompletely:function(a,u){var c=new wn(a[0],a[1],a[2]),p=c.inCentre(),v=Ge.distancePointLine(p,c.p0,c.p1);return v<Math.abs(u)},addLineString:function(a){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var u=Oe.removeRepeatedPoints(a.getCoordinates()),c=this.curveBuilder.getLineCurve(u,this.distance);this.addCurve(c,x.EXTERIOR,x.INTERIOR)},addCurve:function(a,u,c){if(a===null||a.length<2)return null;var p=new ar(a,new Nn(0,x.BOUNDARY,u,c));this.curveList.add(p)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(a,u,c,p,v){if(u===0&&a.length<le.MINIMUM_VALID_SIZE)return null;var S=p,N=v;a.length>=le.MINIMUM_VALID_SIZE&&Ge.isCCW(a)&&(S=v,N=p,c=Je.opposite(c));var O=this.curveBuilder.getRingCurve(a,c,u);this.addCurve(O,S,N)},add:function(a){if(a.isEmpty())return null;if(a instanceof Mt)this.addPolygon(a);else if(a instanceof At)this.addLineString(a);else if(a instanceof ht)this.addPoint(a);else if(a instanceof me)this.addCollection(a);else if(a instanceof ft)this.addCollection(a);else if(a instanceof oe)this.addCollection(a);else{if(!(a instanceof Ot))throw new UnsupportedOperationException(a.getClass().getName());this.addCollection(a)}},isErodedCompletely:function(a,u){var c=a.getCoordinates();if(c.length<4)return 0>u;if(c.length===4)return this.isTriangleErodedCompletely(c,u);var p=a.getEnvelopeInternal(),v=Math.min(p.getHeight(),p.getWidth());return 0>u&&2*Math.abs(u)>v},addCollection:function(a){for(var u=0;u<a.getNumGeometries();u++){var c=a.getGeometryN(u);this.add(c)}},interfaces_:function(){return[]},getClass:function(){return zs}}),o(ka.prototype,{isTrivialIntersection:function(a,u,c,p){if(a===c&&this.li.getIntersectionNum()===1){if(ka.isAdjacentSegments(u,p))return!0;if(a.isClosed()){var v=a.size()-1;if(u===0&&p===v||p===0&&u===v)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(a,u,c,p){if(a===c&&u===p)return null;this.numTests++;var v=a.getCoordinates()[u],S=a.getCoordinates()[u+1],N=c.getCoordinates()[p],O=c.getCoordinates()[p+1];this.li.computeIntersection(v,S,N,O),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(a,u,c,p)||(this._hasIntersection=!0,a.addIntersections(this.li,u,0),c.addIntersections(this.li,p,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[Gi]},getClass:function(){return ka}}),ka.isAdjacentSegments=function(a,u){return Math.abs(a-u)===1},o(Oi.prototype,{setWorkingPrecisionModel:function(a){this.workingPrecisionModel=a},insertUniqueEdge:function(a){var u=this.edgeList.findEqualEdge(a);if(u!==null){var c=u.getLabel(),p=a.getLabel();u.isPointwiseEqual(a)||(p=new Nn(a.getLabel()),p.flip()),c.merge(p);var v=Oi.depthDelta(p),S=u.getDepthDelta(),N=S+v;u.setDepthDelta(N)}else this.edgeList.add(a),a.setDepthDelta(Oi.depthDelta(a.getLabel()))},buildSubgraphs:function(a,u){for(var c=new q,p=a.iterator();p.hasNext();){var v=p.next(),S=v.getRightmostCoordinate(),N=new us(c),O=N.getDepth(S);v.computeDepth(O),v.findResultEdges(),c.add(v),u.add(v.getDirectedEdges(),v.getNodes())}},createSubgraphs:function(a){for(var u=new q,c=a.getNodes().iterator();c.hasNext();){var p=c.next();if(!p.isVisited()){var v=new Ws;v.create(p),u.add(v)}}return ri.sort(u,ri.reverseOrder()),u},createEmptyResultGeometry:function(){var a=this.geomFact.createPolygon();return a},getNoder:function(a){if(this.workingNoder!==null)return this.workingNoder;var u=new Jr,c=new Cn;return c.setPrecisionModel(a),u.setSegmentIntersector(new ka(c)),u},buffer:function(a,u){var c=this.workingPrecisionModel;c===null&&(c=a.getPrecisionModel()),this.geomFact=a.getFactory();var p=new La(c,this.bufParams),v=new zs(a,u,p),S=v.getCurves();if(S.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(S,c),this.graph=new mr(new Mi),this.graph.addEdges(this.edgeList.getEdges());var N=this.createSubgraphs(this.graph),O=new pa(this.geomFact);this.buildSubgraphs(N,O);var ae=O.getPolygons();if(ae.size()<=0)return this.createEmptyResultGeometry();var ve=this.geomFact.buildGeometry(ae);return ve},computeNodedEdges:function(a,u){var c=this.getNoder(u);c.computeNodes(a);for(var p=c.getNodedSubstrings(),v=p.iterator();v.hasNext();){var S=v.next(),N=S.getCoordinates();if(N.length!==2||!N[0].equals2D(N[1])){var O=S.getData(),ae=new fr(S.getCoordinates(),new Nn(O));this.insertUniqueEdge(ae)}}},setNoder:function(a){this.workingNoder=a},interfaces_:function(){return[]},getClass:function(){return Oi}}),Oi.depthDelta=function(a){var u=a.getLocation(0,Je.LEFT),c=a.getLocation(0,Je.RIGHT);return u===x.INTERIOR&&c===x.EXTERIOR?1:u===x.EXTERIOR&&c===x.INTERIOR?-1:0},Oi.convertSegStrings=function(a){for(var u=new Dt,c=new q;a.hasNext();){var p=a.next(),v=u.createLineString(p.getCoordinates());c.add(v)}return u.buildGeometry(c)},o(Fa.prototype,{checkEndPtVertexIntersections:function(){if(arguments.length===0)for(var a=this.segStrings.iterator();a.hasNext();){var u=a.next(),c=u.getCoordinates();this.checkEndPtVertexIntersections(c[0],this.segStrings),this.checkEndPtVertexIntersections(c[c.length-1],this.segStrings)}else if(arguments.length===2){for(var p=arguments[0],v=arguments[1],a=v.iterator();a.hasNext();)for(var u=a.next(),c=u.getCoordinates(),S=1;S<c.length-1;S++)if(c[S].equals(p))throw new w("found endpt/interior pt intersection at index "+S+" :pt "+p)}},checkInteriorIntersections:function(){if(arguments.length===0)for(var a=this.segStrings.iterator();a.hasNext();)for(var u=a.next(),c=this.segStrings.iterator();c.hasNext();){var p=c.next();this.checkInteriorIntersections(u,p)}else if(arguments.length===2)for(var v=arguments[0],S=arguments[1],N=v.getCoordinates(),O=S.getCoordinates(),ae=0;ae<N.length-1;ae++)for(var ve=0;ve<O.length-1;ve++)this.checkInteriorIntersections(v,ae,S,ve);else if(arguments.length===4){var Pe=arguments[0],Te=arguments[1],ze=arguments[2],mt=arguments[3];if(Pe===ze&&Te===mt)return null;var Ft=Pe.getCoordinates()[Te],jt=Pe.getCoordinates()[Te+1],In=ze.getCoordinates()[mt],Fn=ze.getCoordinates()[mt+1];if(this.li.computeIntersection(Ft,jt,In,Fn),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,Ft,jt)||this.hasInteriorIntersection(this.li,In,Fn)))throw new w("found non-noded intersection at "+Ft+"-"+jt+" and "+In+"-"+Fn)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(arguments.length===0)for(var a=this.segStrings.iterator();a.hasNext();){var u=a.next();this.checkCollapses(u)}else if(arguments.length===1)for(var c=arguments[0],p=c.getCoordinates(),a=0;a<p.length-2;a++)this.checkCollapse(p[a],p[a+1],p[a+2])},hasInteriorIntersection:function(a,u,c){for(var p=0;p<a.getIntersectionNum();p++){var v=a.getIntersection(p);if(!v.equals(u)&&!v.equals(c))return!0}return!1},checkCollapse:function(a,u,c){if(a.equals(c))throw new w("found non-noded collapse at "+Fa.fact.createLineString([a,u,c]))},interfaces_:function(){return[]},getClass:function(){return Fa}}),Fa.fact=new Dt,o(wa.prototype,{intersectsScaled:function(a,u){var c=Math.min(a.x,u.x),p=Math.max(a.x,u.x),v=Math.min(a.y,u.y),S=Math.max(a.y,u.y),N=this.maxx<c||this.minx>p||this.maxy<v||this.miny>S;if(N)return!1;var O=this.intersectsToleranceSquare(a,u);return $.isTrue(!(N&&O),"Found bad envelope test"),O},initCorners:function(a){var u=.5;this.minx=a.x-u,this.maxx=a.x+u,this.miny=a.y-u,this.maxy=a.y+u,this.corner[0]=new C(this.maxx,this.maxy),this.corner[1]=new C(this.minx,this.maxy),this.corner[2]=new C(this.minx,this.miny),this.corner[3]=new C(this.maxx,this.miny)},intersects:function(a,u){return this.scaleFactor===1?this.intersectsScaled(a,u):(this.copyScaled(a,this.p0Scaled),this.copyScaled(u,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(a){return Math.round(a*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(a,u){u.x=this.scale(a.x),u.y=this.scale(a.y)},getSafeEnvelope:function(){if(this.safeEnv===null){var a=wa.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new Q(this.originalPt.x-a,this.originalPt.x+a,this.originalPt.y-a,this.originalPt.y+a)}return this.safeEnv},intersectsPixelClosure:function(a,u){return this.li.computeIntersection(a,u,this.corner[0],this.corner[1]),this.li.hasIntersection()?!0:(this.li.computeIntersection(a,u,this.corner[1],this.corner[2]),this.li.hasIntersection()?!0:(this.li.computeIntersection(a,u,this.corner[2],this.corner[3]),this.li.hasIntersection()?!0:(this.li.computeIntersection(a,u,this.corner[3],this.corner[0]),!!this.li.hasIntersection())))},intersectsToleranceSquare:function(a,u){var c=!1,p=!1;return this.li.computeIntersection(a,u,this.corner[0],this.corner[1]),this.li.isProper()?!0:(this.li.computeIntersection(a,u,this.corner[1],this.corner[2]),this.li.isProper()?!0:(this.li.hasIntersection()&&(c=!0),this.li.computeIntersection(a,u,this.corner[2],this.corner[3]),this.li.isProper()?!0:(this.li.hasIntersection()&&(p=!0),this.li.computeIntersection(a,u,this.corner[3],this.corner[0]),this.li.isProper()||c&&p||a.equals(this.pt)?!0:!!u.equals(this.pt))))},addSnappedNode:function(a,u){var c=a.getCoordinate(u),p=a.getCoordinate(u+1);return this.intersects(c,p)?(a.addIntersection(this.getCoordinate(),u),!0):!1},interfaces_:function(){return[]},getClass:function(){return wa}}),wa.SAFE_ENV_EXPANSION_FACTOR=.75,o(Ri.prototype,{select:function(){if(arguments.length!==1){if(arguments.length===2){var a=arguments[0],u=arguments[1];a.getLineSegment(u,this.selectedSegment),this.select(this.selectedSegment)}}},interfaces_:function(){return[]},getClass:function(){return Ri}}),o(ds.prototype,{snap:function(){if(arguments.length===1){var a=arguments[0];return this.snap(a,null,-1)}if(arguments.length===3){var u=arguments[0],c=arguments[1],p=arguments[2],v=u.getSafeEnvelope(),S=new Ba(u,c,p);return this.index.query(v,{interfaces_:function(){return[Pt]},visitItem:function(N){var O=N;O.select(v,S)}}),S.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return ds}}),E(Ba,Ri),o(Ba.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(arguments.length!==2)return Ri.prototype.select.apply(this,arguments);var a=arguments[0],u=arguments[1],c=a.getContext();return this.parentEdge!==null&&c===this.parentEdge&&u===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(c,u))},interfaces_:function(){return[]},getClass:function(){return Ba}}),ds.HotPixelSnapAction=Ba,o(Vs.prototype,{processIntersections:function(a,u,c,p){if(a===c&&u===p)return null;var v=a.getCoordinates()[u],S=a.getCoordinates()[u+1],N=c.getCoordinates()[p],O=c.getCoordinates()[p+1];if(this.li.computeIntersection(v,S,N,O),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var ae=0;ae<this.li.getIntersectionNum();ae++)this.interiorIntersections.add(this.li.getIntersection(ae));a.addIntersections(this.li,u,0),c.addIntersections(this.li,p,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[Gi]},getClass:function(){return Vs}}),o(Gs.prototype,{checkCorrectness:function(a){var u=ar.getNodedSubstrings(a),c=new Fa(u);try{c.checkValid()}catch(p){if(!(p instanceof ie))throw p;p.printStackTrace()}finally{}},getNodedSubstrings:function(){return ar.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(a,u){var c=this.findInteriorIntersections(a,u);this.computeIntersectionSnaps(c),this.computeVertexSnaps(a)},findInteriorIntersections:function(a,u){var c=new Vs(u);return this.noder.setSegmentIntersector(c),this.noder.computeNodes(a),c.getInteriorIntersections()},computeVertexSnaps:function(){if(I(arguments[0],Y))for(var a=arguments[0],u=a.iterator();u.hasNext();){var c=u.next();this.computeVertexSnaps(c)}else if(arguments[0]instanceof ar)for(var p=arguments[0],v=p.getCoordinates(),S=0;S<v.length;S++){var N=new wa(v[S],this.scaleFactor,this.li),O=this.pointSnapper.snap(N,p,S);O&&p.addIntersection(v[S],S)}},computeNodes:function(a){this.nodedSegStrings=a,this.noder=new Jr,this.pointSnapper=new ds(this.noder.getIndex()),this.snapRound(a,this.li)},computeIntersectionSnaps:function(a){for(var u=a.iterator();u.hasNext();){var c=u.next(),p=new wa(c,this.scaleFactor,this.li);this.pointSnapper.snap(p)}},interfaces_:function(){return[zi]},getClass:function(){return Gs}}),o(ir.prototype,{bufferFixedPrecision:function(a){var u=new xr(new Gs(new qt(1)),a.getScale()),c=new Oi(this.bufParams);c.setWorkingPrecisionModel(a),c.setNoder(u),this.resultGeometry=c.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(arguments.length===0){for(var a=ir.MAX_PRECISION_DIGITS;a>=0;a--){try{this.bufferReducedPrecision(a)}catch(v){if(!(v instanceof Qn))throw v;this.saveException=v}finally{}if(this.resultGeometry!==null)return null}throw this.saveException}if(arguments.length===1){var u=arguments[0],c=ir.precisionScaleFactor(this.argGeom,this.distance,u),p=new qt(c);this.bufferFixedPrecision(p)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),this.resultGeometry!==null)return null;var a=this.argGeom.getFactory().getPrecisionModel();a.getType()===qt.FIXED?this.bufferFixedPrecision(a):this.bufferReducedPrecision()},setQuadrantSegments:function(a){this.bufParams.setQuadrantSegments(a)},bufferOriginalPrecision:function(){try{var a=new Oi(this.bufParams);this.resultGeometry=a.buffer(this.argGeom,this.distance)}catch(u){if(!(u instanceof w))throw u;this.saveException=u}finally{}},getResultGeometry:function(a){return this.distance=a,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(a){this.bufParams.setEndCapStyle(a)},interfaces_:function(){return[]},getClass:function(){return ir}}),ir.bufferOp=function(){if(arguments.length===2){var a=arguments[0],u=arguments[1],c=new ir(a),p=c.getResultGeometry(u);return p}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Ee&&typeof arguments[1]=="number"){var v=arguments[0],S=arguments[1],N=arguments[2],O=new ir(v);O.setQuadrantSegments(N);var p=O.getResultGeometry(S);return p}if(arguments[2]instanceof on&&arguments[0]instanceof Ee&&typeof arguments[1]=="number"){var ae=arguments[0],ve=arguments[1],Pe=arguments[2],O=new ir(ae,Pe),p=O.getResultGeometry(ve);return p}}else if(arguments.length===4){var Te=arguments[0],ze=arguments[1],mt=arguments[2],Ft=arguments[3],O=new ir(Te);O.setQuadrantSegments(mt),O.setEndCapStyle(Ft);var p=O.getResultGeometry(ze);return p}},ir.precisionScaleFactor=function(a,u,c){var p=a.getEnvelopeInternal(),v=R.max(Math.abs(p.getMaxX()),Math.abs(p.getMaxY()),Math.abs(p.getMinX()),Math.abs(p.getMinY())),S=u>0?u:0,N=v+2*S,O=Math.trunc(Math.log(N)/Math.log(10)+1),ae=c-O,ve=Math.pow(10,ae);return ve},ir.CAP_ROUND=on.CAP_ROUND,ir.CAP_BUTT=on.CAP_FLAT,ir.CAP_FLAT=on.CAP_FLAT,ir.CAP_SQUARE=on.CAP_SQUARE,ir.MAX_PRECISION_DIGITS=12;var Eo=Object.freeze({BufferOp:ir,BufferParameters:on});o(na.prototype,{filter:function(a){a instanceof Mt&&this.comps.add(a)},interfaces_:function(){return[rn]},getClass:function(){return na}}),na.getPolygons=function(){if(arguments.length===1){var a=arguments[0];return na.getPolygons(a,new q)}if(arguments.length===2){var u=arguments[0],c=arguments[1];return u instanceof Mt?c.add(u):u instanceof Ot&&u.apply(new na(c)),c}},o(wr.prototype,{isInsideArea:function(){return this.segIndex===wr.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return wr}}),wr.INSIDE_AREA=-1,o(ra.prototype,{filter:function(a){a instanceof ht&&this.pts.add(a)},interfaces_:function(){return[rn]},getClass:function(){return ra}}),ra.getPoints=function(){if(arguments.length===1){var a=arguments[0];return a instanceof ht?ri.singletonList(a):ra.getPoints(a,new q)}if(arguments.length===2){var u=arguments[0],c=arguments[1];return u instanceof ht?c.add(u):u instanceof Ot&&u.apply(new ra(c)),c}},o(Ha.prototype,{filter:function(a){(a instanceof ht||a instanceof At||a instanceof Mt)&&this.locations.add(new wr(a,0,a.getCoordinate()))},interfaces_:function(){return[rn]},getClass:function(){return Ha}}),Ha.getLocations=function(a){var u=new q;return a.apply(new Ha(u)),u},o(zr.prototype,{computeContainmentDistance:function(){if(arguments.length===0){var a=new Array(2).fill(null);if(this.computeContainmentDistance(0,a),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,a)}else if(arguments.length===2){var u=arguments[0],c=arguments[1],p=1-u,v=na.getPolygons(this.geom[u]);if(v.size()>0){var S=Ha.getLocations(this.geom[p]);if(this.computeContainmentDistance(S,v,c),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[p]=c[0],this.minDistanceLocation[u]=c[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&I(arguments[0],k)&&I(arguments[1],k)){for(var N=arguments[0],O=arguments[1],ae=arguments[2],ve=0;ve<N.size();ve++)for(var Pe=N.get(ve),Te=0;Te<O.size();Te++)if(this.computeContainmentDistance(Pe,O.get(Te),ae),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof wr&&arguments[1]instanceof Mt){var ze=arguments[0],mt=arguments[1],Ft=arguments[2],jt=ze.getCoordinate();if(x.EXTERIOR!==this.ptLocator.locate(jt,mt))return this.minDistance=0,Ft[0]=ze,Ft[1]=new wr(mt,jt),null}}},computeMinDistanceLinesPoints:function(a,u,c){for(var p=0;p<a.size();p++)for(var v=a.get(p),S=0;S<u.size();S++){var N=u.get(S);if(this.computeMinDistance(v,N,c),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var a=new Array(2).fill(null),u=Hn.getLines(this.geom[0]),c=Hn.getLines(this.geom[1]),p=ra.getPoints(this.geom[0]),v=ra.getPoints(this.geom[1]);return this.computeMinDistanceLines(u,c,a),this.updateMinDistance(a,!1),this.minDistance<=this.terminateDistance?null:(a[0]=null,a[1]=null,this.computeMinDistanceLinesPoints(u,v,a),this.updateMinDistance(a,!1),this.minDistance<=this.terminateDistance?null:(a[0]=null,a[1]=null,this.computeMinDistanceLinesPoints(c,p,a),this.updateMinDistance(a,!0),this.minDistance<=this.terminateDistance?null:(a[0]=null,a[1]=null,this.computeMinDistancePoints(p,v,a),void this.updateMinDistance(a,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(a,u){return a[0]===null?null:void(u?(this.minDistanceLocation[0]=a[1],this.minDistanceLocation[1]=a[0]):(this.minDistanceLocation[0]=a[0],this.minDistanceLocation[1]=a[1]))},nearestPoints:function(){this.computeMinDistance();var a=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return a},computeMinDistance:function(){if(arguments.length===0){if(this.minDistanceLocation!==null||(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof At&&arguments[1]instanceof ht){var a=arguments[0],u=arguments[1],c=arguments[2];if(a.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this.minDistance)return null;for(var p=a.getCoordinates(),v=u.getCoordinate(),S=0;S<p.length-1;S++){var N=Ge.distancePointLine(v,p[S],p[S+1]);if(N<this.minDistance){this.minDistance=N;var O=new Ht(p[S],p[S+1]),ae=O.closestPoint(v);c[0]=new wr(a,S,ae),c[1]=new wr(u,0,v)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof At&&arguments[1]instanceof At){var ve=arguments[0],Pe=arguments[1],Te=arguments[2];if(ve.getEnvelopeInternal().distance(Pe.getEnvelopeInternal())>this.minDistance)return null;for(var p=ve.getCoordinates(),ze=Pe.getCoordinates(),S=0;S<p.length-1;S++)for(var mt=0;mt<ze.length-1;mt++){var N=Ge.distanceLineLine(p[S],p[S+1],ze[mt],ze[mt+1]);if(N<this.minDistance){this.minDistance=N;var Ft=new Ht(p[S],p[S+1]),jt=new Ht(ze[mt],ze[mt+1]),In=Ft.closestPoints(jt);Te[0]=new wr(ve,S,In[0]),Te[1]=new wr(Pe,mt,In[1])}if(this.minDistance<=this.terminateDistance)return null}}}},computeMinDistancePoints:function(a,u,c){for(var p=0;p<a.size();p++)for(var v=a.get(p),S=0;S<u.size();S++){var N=u.get(S),O=v.getCoordinate().distance(N.getCoordinate());if(O<this.minDistance&&(this.minDistance=O,c[0]=new wr(v,0,v.getCoordinate()),c[1]=new wr(N,0,N.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(this.geom[0]===null||this.geom[1]===null)throw new d;return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(a,u,c){for(var p=0;p<a.size();p++)for(var v=a.get(p),S=0;S<u.size();S++){var N=u.get(S);if(this.computeMinDistance(v,N,c),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return zr}}),zr.distance=function(a,u){var c=new zr(a,u);return c.distance()},zr.isWithinDistance=function(a,u,c){var p=new zr(a,u,c);return p.distance()<=c},zr.nearestPoints=function(a,u){var c=new zr(a,u);return c.nearestPoints()};var Co=Object.freeze({DistanceOp:zr});o(qs.prototype,{getCoordinates:function(){if(this.coordinates===null){for(var a=0,u=0,c=new te,p=this.directedEdges.iterator();p.hasNext();){var v=p.next();v.getEdgeDirection()?a++:u++,c.add(v.getEdge().getLine().getCoordinates(),!1,v.getEdgeDirection())}this.coordinates=c.toCoordinateArray(),u>a&&Oe.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(a){this.directedEdges.add(a)},interfaces_:function(){return[]},getClass:function(){return qs}}),o(Lr.prototype,{setVisited:function(a){this._isVisited=a},isMarked:function(){return this._isMarked},setData:function(a){this.data=a},getData:function(){return this.data},setMarked:function(a){this._isMarked=a},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(a){this.data=a},interfaces_:function(){return[]},getClass:function(){return Lr}}),Lr.getComponentWithVisitedState=function(a,u){for(;a.hasNext();){var c=a.next();if(c.isVisited()===u)return c}return null},Lr.setVisited=function(a,u){for(;a.hasNext();){var c=a.next();c.setVisited(u)}},Lr.setMarked=function(a,u){for(;a.hasNext();){var c=a.next();c.setMarked(u)}},E($r,Lr),o($r.prototype,{isRemoved:function(){return this.parentEdge===null},compareDirection:function(a){return this.quadrant>a.quadrant?1:this.quadrant<a.quadrant?-1:Ge.computeOrientation(a.p0,a.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(a){var u=this.getClass().getName(),c=u.lastIndexOf("."),p=u.substring(c+1);a.print("  "+p+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(a){var u=a;return this.compareDirection(u)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(a){this.parentEdge=a},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(a){this.sym=a},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[g]},getClass:function(){return $r}}),$r.toEdges=function(a){for(var u=new q,c=a.iterator();c.hasNext();)u.add(c.next().parentEdge);return u},E(Ua,$r),o(Ua.prototype,{getNext:function(){return this.getToNode().getDegree()!==2?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):($.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return Ua}}),E(ei,Lr),o(ei.prototype,{isRemoved:function(){return this.dirEdge===null},setDirectedEdges:function(a,u){this.dirEdge=[a,u],a.setEdge(this),u.setEdge(this),a.setSym(u),u.setSym(a),a.getFromNode().addOutEdge(a),u.getFromNode().addOutEdge(u)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var a=arguments[0];return this.dirEdge[a]}if(arguments[0]instanceof fi){var u=arguments[0];return this.dirEdge[0].getFromNode()===u?this.dirEdge[0]:this.dirEdge[1].getFromNode()===u?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(a){return this.dirEdge[0].getFromNode()===a?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===a?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return ei}}),o(js.prototype,{getNextEdge:function(a){var u=this.getIndex(a);return this.outEdges.get(this.getIndex(u+1))},getCoordinate:function(){var a=this.iterator();if(!a.hasNext())return null;var u=a.next();return u.getCoordinate()},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(ri.sort(this.outEdges),this.sorted=!0)},remove:function(a){this.outEdges.remove(a)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(a){var u=this.getIndex(a);return this.outEdges.get(this.getIndex(u-1))},getIndex:function(){if(arguments[0]instanceof ei){var a=arguments[0];this.sortEdges();for(var u=0;u<this.outEdges.size();u++){var c=this.outEdges.get(u);if(c.getEdge()===a)return u}return-1}if(arguments[0]instanceof $r){var p=arguments[0];this.sortEdges();for(var u=0;u<this.outEdges.size();u++){var c=this.outEdges.get(u);if(c===p)return u}return-1}if(Number.isInteger(arguments[0])){var v=arguments[0],S=v%this.outEdges.size();return 0>S&&(S+=this.outEdges.size()),S}},add:function(a){this.outEdges.add(a),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return js}}),E(fi,Lr),o(fi.prototype,{isRemoved:function(){return this.pt===null},addOutEdge:function(a){this.deStar.add(a)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(arguments.length===0)this.pt=null;else if(arguments.length===1){var a=arguments[0];this.deStar.remove(a)}},getIndex:function(a){return this.deStar.getIndex(a)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return fi}}),fi.getEdgesBetween=function(a,u){var c=$r.toEdges(a.getOutEdges().getEdges()),p=new H(c),v=$r.toEdges(u.getOutEdges().getEdges());return p.retainAll(v),p},E(cs,ei),o(cs.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return cs}}),o(Ks.prototype,{find:function(a){return this.nodeMap.get(a)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(a){return this.nodeMap.remove(a)},values:function(){return this.nodeMap.values()},add:function(a){return this.nodeMap.put(a.getCoordinate(),a),a},interfaces_:function(){return[]},getClass:function(){return Ks}}),o(_a.prototype,{findNodesOfDegree:function(a){for(var u=new q,c=this.nodeIterator();c.hasNext();){var p=c.next();p.getDegree()===a&&u.add(p)}return u},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof ei){var a=arguments[0];this.remove(a.getDirEdge(0)),this.remove(a.getDirEdge(1)),this.edges.remove(a),a.remove()}else if(arguments[0]instanceof $r){var u=arguments[0],c=u.getSym();c!==null&&c.setSym(null),u.getFromNode().remove(u),u.remove(),this.dirEdges.remove(u)}else if(arguments[0]instanceof fi){for(var p=arguments[0],v=p.getOutEdges().getEdges(),S=v.iterator();S.hasNext();){var N=S.next(),c=N.getSym();c!==null&&this.remove(c),this.dirEdges.remove(N);var O=N.getEdge();O!==null&&this.edges.remove(O)}this.nodeMap.remove(p.getCoordinate()),p.remove()}},findNode:function(a){return this.nodeMap.find(a)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof ei){var a=arguments[0];return this.edges.contains(a)}if(arguments[0]instanceof $r){var u=arguments[0];return this.dirEdges.contains(u)}},add:function(){if(arguments[0]instanceof fi){var a=arguments[0];this.nodeMap.add(a)}else if(arguments[0]instanceof ei){var u=arguments[0];this.edges.add(u),this.add(u.getDirEdge(0)),this.add(u.getDirEdge(1))}else if(arguments[0]instanceof $r){var c=arguments[0];this.dirEdges.add(c)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return _a}}),E(fs,_a),o(fs.prototype,{addEdge:function(a){if(a.isEmpty())return null;var u=Oe.removeRepeatedPoints(a.getCoordinates());if(u.length<=1)return null;var c=u[0],p=u[u.length-1],v=this.getNode(c),S=this.getNode(p),N=new Ua(v,S,u[1],!0),O=new Ua(S,v,u[u.length-2],!1),ae=new cs(a);ae.setDirectedEdges(N,O),this.add(ae)},getNode:function(a){var u=this.findNode(a);return u===null&&(u=new fi(a),this.add(u)),u},interfaces_:function(){return[]},getClass:function(){return fs}}),o(Js.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var a=this.graph.getNodes().iterator();a.hasNext();){var u=a.next();u.isMarked()||($.isTrue(u.getDegree()===2),this.buildEdgeStringsStartingAt(u),u.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var a=this.graph.getNodes().iterator();a.hasNext();){var u=a.next();u.getDegree()!==2&&(this.buildEdgeStringsStartingAt(u),u.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(a){for(var u=a.getOutEdges().iterator();u.hasNext();){var c=u.next();c.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(c))}},merge:function(){if(this.mergedLineStrings!==null)return null;Lr.setMarked(this.graph.nodeIterator(),!1),Lr.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new q,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new q;for(var a=this.edgeStrings.iterator();a.hasNext();){var u=a.next();this.mergedLineStrings.add(u.toLineString())}},buildEdgeStringStartingWith:function(a){var u=new qs(this.factory),c=a;do u.add(c),c.getEdge().setMarked(!0),c=c.getNext();while(c!==null&&c!==a);return u},add:function(){if(arguments[0]instanceof Ee){var a=arguments[0];a.apply({interfaces_:function(){return[Me]},filter:function(S){S instanceof At&&this.add(S)}})}else if(I(arguments[0],Y)){var u=arguments[0];this.mergedLineStrings=null;for(var c=u.iterator();c.hasNext();){var p=c.next();this.add(p)}}else if(arguments[0]instanceof At){var v=arguments[0];this.factory===null&&(this.factory=v.getFactory()),this.graph.addEdge(v)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return Js}});var $o=Object.freeze({LineMerger:Js}),Io=Object.freeze({OverlayOp:yt});E(Wa,$r),o(Wa.prototype,{getNext:function(){return this.next},isInRing:function(){return this.edgeRing!==null},setRing:function(a){this.edgeRing=a},setLabel:function(a){this.label=a},getLabel:function(){return this.label},setNext:function(a){this.next=a},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return Wa}}),E(hs,ei),o(hs.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return hs}}),o(Vr.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(this.ringPts===null){for(var a=new te,u=this.deList.iterator();u.hasNext();){var c=u.next(),p=c.getEdge();Vr.addEdge(p.getLine().getCoordinates(),c.getEdgeDirection(),a)}this.ringPts=a.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),this.ringPts.length<=3?!1:(this.getRing(),this.ring.isValid())},build:function(a){var u=a;do this.add(u),u.setRing(this),u=u.getNext(),$.isTrue(u!==null,"found null DE in ring"),$.isTrue(u===a||!u.isInRing(),"found DE already in ring");while(u!==a)},isOuterHole:function(){return this._isHole?!this.hasShell():!1},getPolygon:function(){var a=null;if(this.holes!==null){a=new Array(this.holes.size()).fill(null);for(var u=0;u<this.holes.size();u++)a[u]=this.holes.get(u)}var c=this.factory.createPolygon(this.ring,a);return c},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof le){var a=arguments[0];this.holes===null&&(this.holes=new q),this.holes.add(a)}else if(arguments[0]instanceof Vr){var u=arguments[0];u.setShell(this);var c=u.getRing();this.holes===null&&(this.holes=new q),this.holes.add(c)}},setIncluded:function(a){this._isIncluded=a,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var a=0;a<this.deList.size();a++){var u=this.deList.get(a),c=u.getSym().getRing();if(c.isOuterHole())return c}return null},computeHole:function(){var a=this.getRing();this._isHole=Ge.isCCW(a.getCoordinates())},hasShell:function(){return this.shell!==null},isOuterShell:function(){return this.getOuterHole()!==null},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return xn.toLineString(new Ce(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(a){this.deList.add(a)},getRing:function(){if(this.ring!==null)return this.ring;this.getCoordinates(),this.ringPts.length<3&&Z.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(a){if(!(a instanceof ie))throw a;Z.out.println(this.ringPts)}finally{}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var a=0;a<this.deList.size();a++){var u=this.deList.get(a),c=u.getSym().getRing().getShell();if(c!==null&&c.isIncludedSet())return this.setIncluded(!c.isIncluded()),null}},setShell:function(a){this.shell=a},setProcessed:function(a){this._isProcessed=a},interfaces_:function(){return[]},getClass:function(){return Vr}}),Vr.findDirEdgesInRing=function(a){var u=a,c=new q;do c.add(u),u=u.getNext(),$.isTrue(u!==null,"found null DE in ring"),$.isTrue(u===a||!u.isInRing(),"found DE already in ring");while(u!==a);return c},Vr.addEdge=function(a,u,c){if(u)for(var p=0;p<a.length;p++)c.add(a[p],!1);else for(var p=a.length-1;p>=0;p--)c.add(a[p],!1)},Vr.findEdgeRingContaining=function(a,u){for(var c=a.getRing(),p=c.getEnvelopeInternal(),v=c.getCoordinateN(0),S=null,N=null,O=u.iterator();O.hasNext();){var ae=O.next(),ve=ae.getRing(),Pe=ve.getEnvelopeInternal();if(!Pe.equals(p)&&Pe.contains(p)){v=Oe.ptNotInList(c.getCoordinates(),ve.getCoordinates());var Te=!1;Ge.isPointInRing(v,ve.getCoordinates())&&(Te=!0),Te&&(S===null||N.contains(Pe))&&(S=ae,N=S.getRing().getEnvelopeInternal())}}return S},o(Ys.prototype,{compare:function(a,u){var c=a,p=u;return c.getRing().getEnvelope().compareTo(p.getRing().getEnvelope())},interfaces_:function(){return[y]},getClass:function(){return Ys}}),Vr.EnvelopeComparator=Ys,E(zn,_a),o(zn.prototype,{findEdgeRing:function(a){var u=new Vr(this.factory);return u.build(a),u},computeDepthParity:function(){if(arguments.length===0)for(;;){var a=null;if(a===null)return null;this.computeDepthParity(a)}},computeNextCWEdges:function(){for(var a=this.nodeIterator();a.hasNext();){var u=a.next();zn.computeNextCWEdges(u)}},addEdge:function(a){if(a.isEmpty())return null;var u=Oe.removeRepeatedPoints(a.getCoordinates());if(u.length<2)return null;var c=u[0],p=u[u.length-1],v=this.getNode(c),S=this.getNode(p),N=new Wa(v,S,u[1],!0),O=new Wa(S,v,u[u.length-2],!1),ae=new hs(a);ae.setDirectedEdges(N,O),this.add(ae)},deleteCutEdges:function(){this.computeNextCWEdges(),zn.findLabeledEdgeRings(this.dirEdges);for(var a=new q,u=this.dirEdges.iterator();u.hasNext();){var c=u.next();if(!c.isMarked()){var p=c.getSym();if(c.getLabel()===p.getLabel()){c.setMarked(!0),p.setMarked(!0);var v=c.getEdge();a.add(v.getLine())}}}return a},getEdgeRings:function(){this.computeNextCWEdges(),zn.label(this.dirEdges,-1);var a=zn.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(a);for(var u=new q,c=this.dirEdges.iterator();c.hasNext();){var p=c.next();if(!p.isMarked()&&!p.isInRing()){var v=this.findEdgeRing(p);u.add(v)}}return u},getNode:function(a){var u=this.findNode(a);return u===null&&(u=new fi(a),this.add(u)),u},convertMaximalToMinimalEdgeRings:function(a){for(var u=a.iterator();u.hasNext();){var c=u.next(),p=c.getLabel(),v=zn.findIntersectionNodes(c,p);if(v!==null)for(var S=v.iterator();S.hasNext();){var N=S.next();zn.computeNextCCWEdges(N,p)}}},deleteDangles:function(){for(var a=this.findNodesOfDegree(1),u=new H,c=new Mn,p=a.iterator();p.hasNext();)c.push(p.next());for(;!c.isEmpty();){var v=c.pop();zn.deleteAllEdges(v);for(var S=v.getOutEdges().getEdges(),p=S.iterator();p.hasNext();){var N=p.next();N.setMarked(!0);var O=N.getSym();O!==null&&O.setMarked(!0);var ae=N.getEdge();u.add(ae.getLine());var ve=N.getToNode();zn.getDegreeNonDeleted(ve)===1&&c.push(ve)}}return u},interfaces_:function(){return[]},getClass:function(){return zn}}),zn.findLabeledEdgeRings=function(a){for(var u=new q,c=1,p=a.iterator();p.hasNext();){var v=p.next();if(!(v.isMarked()||v.getLabel()>=0)){u.add(v);var S=Vr.findDirEdgesInRing(v);zn.label(S,c),c++}}return u},zn.getDegreeNonDeleted=function(a){for(var u=a.getOutEdges().getEdges(),c=0,p=u.iterator();p.hasNext();){var v=p.next();v.isMarked()||c++}return c},zn.deleteAllEdges=function(a){for(var u=a.getOutEdges().getEdges(),c=u.iterator();c.hasNext();){var p=c.next();p.setMarked(!0);var v=p.getSym();v!==null&&v.setMarked(!0)}},zn.label=function(a,u){for(var c=a.iterator();c.hasNext();){var p=c.next();p.setLabel(u)}},zn.computeNextCWEdges=function(a){for(var u=a.getOutEdges(),c=null,p=null,v=u.getEdges().iterator();v.hasNext();){var S=v.next();if(!S.isMarked()){if(c===null&&(c=S),p!==null){var N=p.getSym();N.setNext(S)}p=S}}if(p!==null){var N=p.getSym();N.setNext(c)}},zn.computeNextCCWEdges=function(a,u){for(var c=a.getOutEdges(),p=null,v=null,S=c.getEdges(),N=S.size()-1;N>=0;N--){var O=S.get(N),ae=O.getSym(),ve=null;O.getLabel()===u&&(ve=O);var Pe=null;ae.getLabel()===u&&(Pe=ae),ve===null&&Pe===null||(Pe!==null&&(v=Pe),ve!==null&&(v!==null&&(v.setNext(ve),v=null),p===null&&(p=ve)))}v!==null&&($.isTrue(p!==null),v.setNext(p))},zn.getDegree=function(a,u){for(var c=a.getOutEdges().getEdges(),p=0,v=c.iterator();v.hasNext();){var S=v.next();S.getLabel()===u&&p++}return p},zn.findIntersectionNodes=function(a,u){var c=a,p=null;do{var v=c.getFromNode();zn.getDegree(v,u)>1&&(p===null&&(p=new q),p.add(v)),c=c.getNext(),$.isTrue(c!==null,"found null DE in ring"),$.isTrue(c===a||!c.isInRing(),"found DE already in ring")}while(c!==a);return p},o(_r.prototype,{getGeometry:function(){return this.geomFactory===null&&(this.geomFactory=new Dt),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(Dt.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(a,u,c){for(var p=a.iterator();p.hasNext();){var v=p.next();v.isValid()?u.add(v):c.add(v.getLineString())}},polygonize:function(){if(this.polyList!==null||(this.polyList=new q,this.graph===null))return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var a=this.graph.getEdgeRings(),u=new q;this.invalidRingLines=new q,this.isCheckingRingsValid?this.findValidRings(a,u,this.invalidRingLines):u=a,this.findShellsAndHoles(u),_r.assignHolesToShells(this.holeList,this.shellList),ri.sort(this.shellList,new Vr.EnvelopeComparator);var c=!0;this.extractOnlyPolygonal&&(_r.findDisjointShells(this.shellList),c=!1),this.polyList=_r.extractPolygons(this.shellList,c)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(I(arguments[0],Y))for(var a=arguments[0],u=a.iterator();u.hasNext();){var c=u.next();this.add(c)}else if(arguments[0]instanceof At){var p=arguments[0];this.geomFactory=p.getFactory(),this.graph===null&&(this.graph=new zn(this.geomFactory)),this.graph.addEdge(p)}else if(arguments[0]instanceof Ee){var v=arguments[0];v.apply(this.lineStringAdder)}},setCheckRingsValid:function(a){this.isCheckingRingsValid=a},findShellsAndHoles:function(a){this.holeList=new q,this.shellList=new q;for(var u=a.iterator();u.hasNext();){var c=u.next();c.computeHole(),c.isHole()?this.holeList.add(c):this.shellList.add(c)}},interfaces_:function(){return[]},getClass:function(){return _r}}),_r.findOuterShells=function(a){for(var u=a.iterator();u.hasNext();){var c=u.next(),p=c.getOuterHole();p===null||p.isProcessed()||(c.setIncluded(!0),p.setProcessed(!0))}},_r.extractPolygons=function(a,u){for(var c=new q,p=a.iterator();p.hasNext();){var v=p.next();(u||v.isIncluded())&&c.add(v.getPolygon())}return c},_r.assignHolesToShells=function(a,u){for(var c=a.iterator();c.hasNext();){var p=c.next();_r.assignHoleToShell(p,u)}},_r.assignHoleToShell=function(a,u){var c=Vr.findEdgeRingContaining(a,u);c!==null&&c.addHole(a)},_r.findDisjointShells=function(a){_r.findOuterShells(a);var u=null;do{u=!1;for(var c=a.iterator();c.hasNext();){var p=c.next();p.isIncludedSet()||(p.updateIncluded(),p.isIncludedSet()||(u=!0))}}while(u)},o(gs.prototype,{filter:function(a){a instanceof At&&this.p.add(a)},interfaces_:function(){return[Me]},getClass:function(){return gs}}),_r.LineStringAdder=gs;var Po=Object.freeze({Polygonizer:_r});o(ps.prototype,{createEdgeEndForNext:function(a,u,c,p){var v=c.segmentIndex+1;if(v>=a.getNumPoints()&&p===null)return null;var S=a.getCoordinate(v);p!==null&&p.segmentIndex===c.segmentIndex&&(S=p.coord);var N=new Dr(a,c.coord,S,new Nn(a.getLabel()));u.add(N)},createEdgeEndForPrev:function(a,u,c,p){var v=c.segmentIndex;if(c.dist===0){if(v===0)return null;v--}var S=a.getCoordinate(v);p!==null&&p.segmentIndex>=v&&(S=p.coord);var N=new Nn(a.getLabel());N.flip();var O=new Dr(a,c.coord,S,N);u.add(O)},computeEdgeEnds:function(){if(arguments.length===1){for(var a=arguments[0],u=new q,c=a;c.hasNext();){var p=c.next();this.computeEdgeEnds(p,u)}return u}if(arguments.length===2){var v=arguments[0],S=arguments[1],N=v.getEdgeIntersectionList();N.addEndpoints();var O=N.iterator(),ae=null,ve=null;if(!O.hasNext())return null;var Pe=O.next();do ae=ve,ve=Pe,Pe=null,O.hasNext()&&(Pe=O.next()),ve!==null&&(this.createEdgeEndForPrev(v,S,ve,ae),this.createEdgeEndForNext(v,S,ve,Pe));while(ve!==null)}},interfaces_:function(){return[]},getClass:function(){return ps}}),E(za,Dr),o(za.prototype,{insert:function(a){this.edgeEnds.add(a)},print:function(a){a.println("EdgeEndBundle--> Label: "+this.label);for(var u=this.iterator();u.hasNext();){var c=u.next();c.print(a),a.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(a,u){for(var c=0,p=!1,v=this.iterator();v.hasNext();){var S=v.next(),N=S.getLabel().getLocation(a);N===x.BOUNDARY&&c++,N===x.INTERIOR&&(p=!0)}var N=x.NONE;p&&(N=x.INTERIOR),c>0&&(N=tr.determineBoundary(u,c)),this.label.setLocation(a,N)},computeLabelSide:function(a,u){for(var c=this.iterator();c.hasNext();){var p=c.next();if(p.getLabel().isArea()){var v=p.getLabel().getLocation(a,u);if(v===x.INTERIOR)return this.label.setLocation(a,u,x.INTERIOR),null;v===x.EXTERIOR&&this.label.setLocation(a,u,x.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(a){this.computeLabelSide(a,Je.LEFT),this.computeLabelSide(a,Je.RIGHT)},updateIM:function(a){fr.updateIM(this.label,a)},computeLabel:function(a){for(var u=!1,c=this.iterator();c.hasNext();){var p=c.next();p.getLabel().isArea()&&(u=!0)}u?this.label=new Nn(x.NONE,x.NONE,x.NONE):this.label=new Nn(x.NONE);for(var v=0;2>v;v++)this.computeLabelOn(v,a),u&&this.computeLabelSides(v)},interfaces_:function(){return[]},getClass:function(){return za}}),E(ms,xi),o(ms.prototype,{updateIM:function(a){for(var u=this.iterator();u.hasNext();){var c=u.next();c.updateIM(a)}},insert:function(a){var u=this.edgeMap.get(a);u===null?(u=new za(a),this.insertEdgeEnd(a,u)):u.insert(a)},interfaces_:function(){return[]},getClass:function(){return ms}}),E(ys,Mr),o(ys.prototype,{updateIMFromEdges:function(a){this.edges.updateIM(a)},computeIM:function(a){a.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return ys}}),E(Va,bi),o(Va.prototype,{createNode:function(a){return new ys(a,new ms)},interfaces_:function(){return[]},getClass:function(){return Va}}),o(vs.prototype,{insertEdgeEnds:function(a){for(var u=a.iterator();u.hasNext();){var c=u.next();this.nodes.add(c)}},computeProperIntersectionIM:function(a,u){var c=this.arg[0].getGeometry().getDimension(),p=this.arg[1].getGeometry().getDimension(),v=a.hasProperIntersection(),S=a.hasProperInteriorIntersection();c===2&&p===2?v&&u.setAtLeast("212101212"):c===2&&p===1?(v&&u.setAtLeast("FFF0FFFF2"),S&&u.setAtLeast("1FFFFF1FF")):c===1&&p===2?(v&&u.setAtLeast("F0FFFFFF2"),S&&u.setAtLeast("1F1FFFFFF")):c===1&&p===1&&S&&u.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(a,u){for(var c=this.arg[a].getEdgeIterator();c.hasNext();){var p=c.next();p.isIsolated()&&(this.labelIsolatedEdge(p,u,this.arg[u].getGeometry()),this.isolatedEdges.add(p))}},labelIsolatedEdge:function(a,u,c){if(c.getDimension()>0){var p=this.ptLocator.locate(a.getCoordinate(),c);a.getLabel().setAllLocations(u,p)}else a.getLabel().setAllLocations(u,x.EXTERIOR)},computeIM:function(){var a=new zt;if(a.set(x.EXTERIOR,x.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(a),a;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var u=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(u,a);var c=new ps,p=c.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(p);var v=c.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(v),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(a),a},labelNodeEdges:function(){for(var a=this.nodes.iterator();a.hasNext();){var u=a.next();u.getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(a){for(var u=this.arg[a].getNodeIterator();u.hasNext();){var c=u.next(),p=this.nodes.addNode(c.getCoordinate());p.setLabel(a,c.getLabel().getLocation(a))}},labelIntersectionNodes:function(a){for(var u=this.arg[a].getEdgeIterator();u.hasNext();)for(var c=u.next(),p=c.getLabel().getLocation(a),v=c.getEdgeIntersectionList().iterator();v.hasNext();){var S=v.next(),N=this.nodes.find(S.coord);N.getLabel().isNull(a)&&(p===x.BOUNDARY?N.setLabelBoundary(a):N.setLabel(a,x.INTERIOR))}},labelIsolatedNode:function(a,u){var c=this.ptLocator.locate(a.getCoordinate(),this.arg[u].getGeometry());a.getLabel().setAllLocations(u,c)},computeIntersectionNodes:function(a){for(var u=this.arg[a].getEdgeIterator();u.hasNext();)for(var c=u.next(),p=c.getLabel().getLocation(a),v=c.getEdgeIntersectionList().iterator();v.hasNext();){var S=v.next(),N=this.nodes.addNode(S.coord);p===x.BOUNDARY?N.setLabelBoundary(a):N.getLabel().isNull(a)&&N.setLabel(a,x.INTERIOR)}},labelIsolatedNodes:function(){for(var a=this.nodes.iterator();a.hasNext();){var u=a.next(),c=u.getLabel();$.isTrue(c.getGeometryCount()>0,"node with empty label found"),u.isIsolated()&&(c.isNull(0)?this.labelIsolatedNode(u,0):this.labelIsolatedNode(u,1))}},updateIM:function(a){for(var u=this.isolatedEdges.iterator();u.hasNext();){var c=u.next();c.updateIM(a)}for(var p=this.nodes.iterator();p.hasNext();){var v=p.next();v.updateIM(a),v.updateIMFromEdges(a)}},computeDisjointIM:function(a){var u=this.arg[0].getGeometry();u.isEmpty()||(a.set(x.INTERIOR,x.EXTERIOR,u.getDimension()),a.set(x.BOUNDARY,x.EXTERIOR,u.getBoundaryDimension()));var c=this.arg[1].getGeometry();c.isEmpty()||(a.set(x.EXTERIOR,x.INTERIOR,c.getDimension()),a.set(x.EXTERIOR,x.BOUNDARY,c.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return vs}}),o(Ga.prototype,{isContainedInBoundary:function(a){if(a instanceof Mt)return!1;if(a instanceof ht)return this.isPointContainedInBoundary(a);if(a instanceof At)return this.isLineStringContainedInBoundary(a);for(var u=0;u<a.getNumGeometries();u++){var c=a.getGeometryN(u);if(!this.isContainedInBoundary(c))return!1}return!0},isLineSegmentContainedInBoundary:function(a,u){if(a.equals(u))return this.isPointContainedInBoundary(a);if(a.x===u.x){if(a.x===this.rectEnv.getMinX()||a.x===this.rectEnv.getMaxX())return!0}else if(a.y===u.y&&(a.y===this.rectEnv.getMinY()||a.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(a){for(var u=a.getCoordinateSequence(),c=new C,p=new C,v=0;v<u.size()-1;v++)if(u.getCoordinate(v,c),u.getCoordinate(v+1,p),!this.isLineSegmentContainedInBoundary(c,p))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof ht){var a=arguments[0];return this.isPointContainedInBoundary(a.getCoordinate())}if(arguments[0]instanceof C){var u=arguments[0];return u.x===this.rectEnv.getMinX()||u.x===this.rectEnv.getMaxX()||u.y===this.rectEnv.getMinY()||u.y===this.rectEnv.getMaxY()}},contains:function(a){return this.rectEnv.contains(a.getEnvelopeInternal())?!this.isContainedInBoundary(a):!1},interfaces_:function(){return[]},getClass:function(){return Ga}}),Ga.contains=function(a,u){var c=new Ga(a);return c.contains(u)},o(Xs.prototype,{intersects:function(a,u){var c=new Q(a,u);if(!this.rectEnv.intersects(c))return!1;if(this.rectEnv.intersects(a)||this.rectEnv.intersects(u))return!0;if(a.compareTo(u)>0){var p=a;a=u,u=p}var v=!1;return u.y>a.y&&(v=!0),v?this.li.computeIntersection(a,u,this.diagDown0,this.diagDown1):this.li.computeIntersection(a,u,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return Xs}}),o(Li.prototype,{applyTo:function(a){for(var u=0;u<a.getNumGeometries()&&!this._isDone;u++){var c=a.getGeometryN(u);if(c instanceof Ot)this.applyTo(c);else if(this.visit(c),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return Li}}),o(Sa.prototype,{intersects:function(a){if(!this.rectEnv.intersects(a.getEnvelopeInternal()))return!1;var u=new bs(this.rectEnv);if(u.applyTo(a),u.intersects())return!0;var c=new xs(this.rectangle);if(c.applyTo(a),c.containsPoint())return!0;var p=new ws(this.rectangle);return p.applyTo(a),!!p.intersects()},interfaces_:function(){return[]},getClass:function(){return Sa}}),Sa.intersects=function(a,u){var c=new Sa(a);return c.intersects(u)},E(bs,Li),o(bs.prototype,{isDone:function(){return this._intersects===!0},visit:function(a){var u=a.getEnvelopeInternal();return this.rectEnv.intersects(u)?this.rectEnv.contains(u)?(this._intersects=!0,null):u.getMinX()>=this.rectEnv.getMinX()&&u.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):u.getMinY()>=this.rectEnv.getMinY()&&u.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return bs}}),E(xs,Li),o(xs.prototype,{isDone:function(){return this._containsPoint===!0},visit:function(a){if(!(a instanceof Mt))return null;var u=a.getEnvelopeInternal();if(!this.rectEnv.intersects(u))return null;for(var c=new C,p=0;4>p;p++)if(this.rectSeq.getCoordinate(p,c),u.contains(c)&&yr.containsPointInPolygon(c,a))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return xs}}),E(ws,Li),o(ws.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return this.hasIntersection===!0},visit:function(a){var u=a.getEnvelopeInternal();if(!this.rectEnv.intersects(u))return null;var c=Hn.getLines(a);this.checkIntersectionWithLineStrings(c)},checkIntersectionWithLineStrings:function(a){for(var u=a.iterator();u.hasNext();){var c=u.next();if(this.checkIntersectionWithSegments(c),this.hasIntersection)return null}},checkIntersectionWithSegments:function(a){for(var u=a.getCoordinateSequence(),c=1;c<u.size();c++)if(u.getCoordinate(c-1,this.p0),u.getCoordinate(c,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return ws}}),E(pn,di),o(pn.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return pn}}),pn.covers=function(a,u){return a.getEnvelopeInternal().covers(u.getEnvelopeInternal())?a.isRectangle()?!0:pn.relate(a,u).isCovers():!1},pn.intersects=function(a,u){return a.getEnvelopeInternal().intersects(u.getEnvelopeInternal())?a.isRectangle()?Sa.intersects(a,u):u.isRectangle()?Sa.intersects(u,a):pn.relate(a,u).isIntersects():!1},pn.touches=function(a,u){return a.getEnvelopeInternal().intersects(u.getEnvelopeInternal())?pn.relate(a,u).isTouches(a.getDimension(),u.getDimension()):!1},pn.within=function(a,u){return u.contains(a)},pn.coveredBy=function(a,u){return pn.covers(u,a)},pn.relate=function(){if(arguments.length===2){var a=arguments[0],u=arguments[1],c=new pn(a,u),p=c.getIntersectionMatrix();return p}if(arguments.length===3){if(typeof arguments[2]=="string"&&arguments[0]instanceof Ee&&arguments[1]instanceof Ee){var v=arguments[0],S=arguments[1],N=arguments[2];return pn.relateWithCheck(v,S).matches(N)}if(I(arguments[2],qe)&&arguments[0]instanceof Ee&&arguments[1]instanceof Ee){var O=arguments[0],ae=arguments[1],ve=arguments[2],c=new pn(O,ae,ve),p=c.getIntersectionMatrix();return p}}},pn.overlaps=function(a,u){return a.getEnvelopeInternal().intersects(u.getEnvelopeInternal())?pn.relate(a,u).isOverlaps(a.getDimension(),u.getDimension()):!1},pn.disjoint=function(a,u){return!a.intersects(u)},pn.relateWithCheck=function(a,u){return a.checkNotGeometryCollection(a),a.checkNotGeometryCollection(u),pn.relate(a,u)},pn.crosses=function(a,u){return a.getEnvelopeInternal().intersects(u.getEnvelopeInternal())?pn.relate(a,u).isCrosses(a.getDimension(),u.getDimension()):!1},pn.contains=function(a,u){return a.getEnvelopeInternal().contains(u.getEnvelopeInternal())?a.isRectangle()?Ga.contains(a,u):pn.relate(a,u).isContains():!1};var Ao=Object.freeze({RelateOp:pn});o(Ir.prototype,{extractElements:function(a,u){if(a===null)return null;for(var c=0;c<a.getNumGeometries();c++){var p=a.getGeometryN(c);this.skipEmpty&&p.isEmpty()||u.add(p)}},combine:function(){for(var a=new q,u=this.inputGeoms.iterator();u.hasNext();){var c=u.next();this.extractElements(c,a)}return a.size()===0?this.geomFactory!==null?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(a)},interfaces_:function(){return[]},getClass:function(){return Ir}}),Ir.combine=function(){if(arguments.length===1){var a=arguments[0],u=new Ir(a);return u.combine()}if(arguments.length===2){var c=arguments[0],p=arguments[1],u=new Ir(Ir.createList(c,p));return u.combine()}if(arguments.length===3){var v=arguments[0],S=arguments[1],N=arguments[2],u=new Ir(Ir.createList(v,S,N));return u.combine()}},Ir.extractFactory=function(a){return a.isEmpty()?null:a.iterator().next().getFactory()},Ir.createList=function(){if(arguments.length===2){var a=arguments[0],u=arguments[1],c=new q;return c.add(a),c.add(u),c}if(arguments.length===3){var p=arguments[0],v=arguments[1],S=arguments[2],c=new q;return c.add(p),c.add(v),c.add(S),c}},o(qa.prototype,{union:function(){for(var a=new lt,u=new dt,c=0;c<this.pointGeom.getNumGeometries();c++){var p=this.pointGeom.getGeometryN(c),v=p.getCoordinate(),S=a.locate(v,this.otherGeom);S===x.EXTERIOR&&u.add(v)}if(u.size()===0)return this.otherGeom;var N=null,O=Oe.toCoordinateArray(u);return N=O.length===1?this.geomFact.createPoint(O[0]):this.geomFact.createMultiPointFromCoords(O),Ir.combine(N,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return qa}}),qa.union=function(a,u){var c=new qa(a,u);return c.union()},o(ki.prototype,{filter:function(a){this.sortIndex!==-1&&a.getSortIndex()!==this.sortIndex||this.comps.add(a)},interfaces_:function(){return[rn]},getClass:function(){return ki}}),ki.extract=function(){if(arguments.length===2){var a=arguments[0],u=arguments[1];return ki.extract(a,u,new q)}if(arguments.length===3){var c=arguments[0],p=arguments[1],v=arguments[2];return c.getSortIndex()===p?v.add(c):c instanceof Ot&&c.apply(new ki(p,v)),v}},o(kr.prototype,{reduceToGeometries:function(a){for(var u=new q,c=a.iterator();c.hasNext();){var p=c.next(),v=null;I(p,k)?v=this.unionTree(p):p instanceof Ee&&(v=p),u.add(v)}return u},extractByEnvelope:function(a,u,c){for(var p=new q,v=0;v<u.getNumGeometries();v++){var S=u.getGeometryN(v);S.getEnvelopeInternal().intersects(a)?p.add(S):c.add(S)}return this.geomFactory.buildGeometry(p)},unionOptimized:function(a,u){var c=a.getEnvelopeInternal(),p=u.getEnvelopeInternal();if(!c.intersects(p)){var v=Ir.combine(a,u);return v}if(a.getNumGeometries()<=1&&u.getNumGeometries()<=1)return this.unionActual(a,u);var S=c.intersection(p);return this.unionUsingEnvelopeIntersection(a,u,S)},union:function(){if(this.inputPolys===null)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var a=new kt(kr.STRTREE_NODE_CAPACITY),u=this.inputPolys.iterator();u.hasNext();){var c=u.next();a.insert(c.getEnvelopeInternal(),c)}this.inputPolys=null;var p=a.itemsTree(),v=this.unionTree(p);return v},binaryUnion:function(){if(arguments.length===1){var a=arguments[0];return this.binaryUnion(a,0,a.size())}if(arguments.length===3){var u=arguments[0],c=arguments[1],p=arguments[2];if(1>=p-c){var S=kr.getGeometry(u,c);return this.unionSafe(S,null)}if(p-c===2)return this.unionSafe(kr.getGeometry(u,c),kr.getGeometry(u,c+1));var v=Math.trunc((p+c)/2),S=this.binaryUnion(u,c,v),N=this.binaryUnion(u,v,p);return this.unionSafe(S,N)}},repeatedUnion:function(a){for(var u=null,c=a.iterator();c.hasNext();){var p=c.next();u=u===null?p.copy():u.union(p)}return u},unionSafe:function(a,u){return a===null&&u===null?null:a===null?u.copy():u===null?a.copy():this.unionOptimized(a,u)},unionActual:function(a,u){return kr.restrictToPolygons(a.union(u))},unionTree:function(a){var u=this.reduceToGeometries(a),c=this.binaryUnion(u);return c},unionUsingEnvelopeIntersection:function(a,u,c){var p=new q,v=this.extractByEnvelope(c,a,p),S=this.extractByEnvelope(c,u,p),N=this.unionActual(v,S);p.add(N);var O=Ir.combine(p);return O},bufferUnion:function(){if(arguments.length===1){var a=arguments[0],u=a.get(0).getFactory(),c=u.buildGeometry(a),p=c.buffer(0);return p}if(arguments.length===2){var v=arguments[0],S=arguments[1],u=v.getFactory(),c=u.createGeometryCollection([v,S]),p=c.buffer(0);return p}},interfaces_:function(){return[]},getClass:function(){return kr}}),kr.restrictToPolygons=function(a){if(I(a,Bn))return a;var u=na.getPolygons(a);return u.size()===1?u.get(0):a.getFactory().createMultiPolygon(Dt.toPolygonArray(u))},kr.getGeometry=function(a,u){return u>=a.size()?null:a.get(u)},kr.union=function(a){var u=new kr(a);return u.union()},kr.STRTREE_NODE_CAPACITY=4,o(Fi.prototype,{unionNoOpt:function(a){var u=this.geomFact.createPoint();return Ln.overlayOp(a,u,yt.UNION)},unionWithNull:function(a,u){return a===null&&u===null?null:u===null?a:a===null?u:a.union(u)},extract:function(){if(I(arguments[0],Y))for(var a=arguments[0],u=a.iterator();u.hasNext();){var c=u.next();this.extract(c)}else if(arguments[0]instanceof Ee){var p=arguments[0];this.geomFact===null&&(this.geomFact=p.getFactory()),ki.extract(p,Ee.SORTINDEX_POLYGON,this.polygons),ki.extract(p,Ee.SORTINDEX_LINESTRING,this.lines),ki.extract(p,Ee.SORTINDEX_POINT,this.points)}},union:function(){if(this.geomFact===null)return null;var u=null;if(this.points.size()>0){var c=this.geomFact.buildGeometry(this.points);u=this.unionNoOpt(c)}var p=null;if(this.lines.size()>0){var v=this.geomFact.buildGeometry(this.lines);p=this.unionNoOpt(v)}var S=null;this.polygons.size()>0&&(S=kr.union(this.polygons));var N=this.unionWithNull(p,S),O=null;return O=u===null?N:N===null?u:qa.union(u,N),O===null?this.geomFact.createGeometryCollection():O},interfaces_:function(){return[]},getClass:function(){return Fi}}),Fi.union=function(){if(arguments.length===1){if(I(arguments[0],Y)){var a=arguments[0],u=new Fi(a);return u.union()}if(arguments[0]instanceof Ee){var c=arguments[0],u=new Fi(c);return u.union()}}else if(arguments.length===2){var p=arguments[0],v=arguments[1],u=new Fi(p,v);return u.union()}};var No=Object.freeze({UnaryUnionOp:Fi});o(ja.prototype,{visitInteriorRing:function(a,u){var c=a.getCoordinates(),p=c[0],v=ja.findDifferentPoint(c,p),S=u.findEdgeInSameDirection(p,v),N=u.findEdgeEnd(S),O=null;N.getLabel().getLocation(0,Je.RIGHT)===x.INTERIOR?O=N:N.getSym().getLabel().getLocation(0,Je.RIGHT)===x.INTERIOR&&(O=N.getSym()),$.isTrue(O!==null,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(O)},visitShellInteriors:function(a,u){if(a instanceof Mt){var c=a;this.visitInteriorRing(c.getExteriorRing(),u)}if(a instanceof oe)for(var p=a,v=0;v<p.getNumGeometries();v++){var c=p.getGeometryN(v);this.visitInteriorRing(c.getExteriorRing(),u)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(a){for(var u=a.getEdgeEnds().iterator();u.hasNext();){var c=u.next();c.getLabel().getLocation(0,Je.RIGHT)===x.INTERIOR&&c.setInResult(!0)}},visitLinkedDirectedEdges:function(a){var u=a,c=a;do $.isTrue(c!==null,"found null Directed Edge"),c.setVisited(!0),c=c.getNext();while(c!==u)},buildEdgeRings:function(a){for(var u=new q,c=a.iterator();c.hasNext();){var p=c.next();if(p.isInResult()&&p.getEdgeRing()===null){var v=new ji(p,this.geometryFactory);v.linkDirectedEdgesForMinimalEdgeRings();var S=v.buildMinimalRings();u.addAll(S)}}return u},hasUnvisitedShellEdge:function(a){for(var u=0;u<a.size();u++){var c=a.get(u);if(!c.isHole()){var p=c.getEdges(),v=p.get(0);if(v.getLabel().getLocation(0,Je.RIGHT)===x.INTERIOR){for(var S=0;S<p.size();S++)if(v=p.get(S),!v.isVisited())return this.disconnectedRingcoord=v.getCoordinate(),!0}}}return!1},isInteriorsConnected:function(){var a=new q;this.geomGraph.computeSplitEdges(a);var u=new mr(new Mi);u.addEdges(a),this.setInteriorEdgesInResult(u),u.linkResultDirectedEdges();var c=this.buildEdgeRings(u.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),u),!this.hasUnvisitedShellEdge(c)},interfaces_:function(){return[]},getClass:function(){return ja}}),ja.findDifferentPoint=function(a,u){for(var c=0;c<a.length;c++)if(!a[c].equals(u))return a[c];return null},o(ti.prototype,{hasChildren:function(){for(var a=0;2>a;a++)if(this.subnode[a]!==null)return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(a){a.addAll(this.items);for(var u=0;2>u;u++)this.subnode[u]!==null&&this.subnode[u].addAllItems(a);return a},size:function(){for(var a=0,u=0;2>u;u++)this.subnode[u]!==null&&(a+=this.subnode[u].size());return a+this.items.size()},addAllItemsFromOverlapping:function(a,u){return a===null||this.isSearchMatch(a)?(u.addAll(this.items),this.subnode[0]!==null&&this.subnode[0].addAllItemsFromOverlapping(a,u),void(this.subnode[1]!==null&&this.subnode[1].addAllItemsFromOverlapping(a,u))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(a,u){if(!this.isSearchMatch(a))return!1;for(var c=!1,p=0;2>p;p++)if(this.subnode[p]!==null&&(c=this.subnode[p].remove(a,u))){this.subnode[p].isPrunable()&&(this.subnode[p]=null);break}return c||(c=this.items.remove(u))},getItems:function(){return this.items},depth:function(){for(var a=0,u=0;2>u;u++)if(this.subnode[u]!==null){var c=this.subnode[u].depth();c>a&&(a=c)}return a+1},nodeSize:function(){for(var a=0,u=0;2>u;u++)this.subnode[u]!==null&&(a+=this.subnode[u].nodeSize());return a+1},add:function(a){this.items.add(a)},interfaces_:function(){return[]},getClass:function(){return ti}}),ti.getSubnodeIndex=function(a,u){var c=-1;return a.min>=u&&(c=1),a.max<=u&&(c=0),c},o(hi.prototype,{expandToInclude:function(a){a.max>this.max&&(this.max=a.max),a.min<this.min&&(this.min=a.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(arguments.length===1){var a=arguments[0];return this.overlaps(a.min,a.max)}if(arguments.length===2){var u=arguments[0],c=arguments[1];return!(this.min>c||this.max<u)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(arguments.length===1){if(arguments[0]instanceof hi){var a=arguments[0];return this.contains(a.min,a.max)}if(typeof arguments[0]=="number"){var u=arguments[0];return u>=this.min&&u<=this.max}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];return c>=this.min&&p<=this.max}},init:function(a,u){this.min=a,this.max=u,a>u&&(this.min=u,this.max=a)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return hi}}),o(Ka.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(a){for(this.level=Ka.computeLevel(a),this.interval=new hi,this.computeInterval(this.level,a);!this.interval.contains(a);)this.level+=1,this.computeInterval(this.level,a)},computeInterval:function(a,u){var c=Le.powerOf2(a);this.pt=Math.floor(u.getMin()/c)*c,this.interval.init(this.pt,this.pt+c)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Ka}}),Ka.computeLevel=function(a){var u=a.getWidth(),c=Le.exponent(u)+1;return c},E(Ci,ti),o(Ci.prototype,{getInterval:function(){return this.interval},find:function(a){var u=ti.getSubnodeIndex(a,this.centre);if(u===-1)return this;if(this.subnode[u]!==null){var c=this.subnode[u];return c.find(a)}return this},insert:function(a){$.isTrue(this.interval===null||this.interval.contains(a.interval));var u=ti.getSubnodeIndex(a.interval,this.centre);if(a.level===this.level-1)this.subnode[u]=a;else{var c=this.createSubnode(u);c.insert(a),this.subnode[u]=c}},isSearchMatch:function(a){return a.overlaps(this.interval)},getSubnode:function(a){return this.subnode[a]===null&&(this.subnode[a]=this.createSubnode(a)),this.subnode[a]},getNode:function(a){var u=ti.getSubnodeIndex(a,this.centre);if(u!==-1){var c=this.getSubnode(u);return c.getNode(a)}return this},createSubnode:function(a){var u=0,c=0;switch(a){case 0:u=this.interval.getMin(),c=this.centre;break;case 1:u=this.centre,c=this.interval.getMax()}var p=new hi(u,c),v=new Ci(p,this.level-1);return v},interfaces_:function(){return[]},getClass:function(){return Ci}}),Ci.createNode=function(a){var u=new Ka(a),c=new Ci(u.getInterval(),u.getLevel());return c},Ci.createExpanded=function(a,u){var c=new hi(u);a!==null&&c.expandToInclude(a.interval);var p=Ci.createNode(c);return a!==null&&p.insert(a),p},E(Ea,ti),o(Ea.prototype,{insert:function(a,u){var c=ti.getSubnodeIndex(a,Ea.origin);if(c===-1)return this.add(u),null;var p=this.subnode[c];if(p===null||!p.getInterval().contains(a)){var v=Ci.createExpanded(p,a);this.subnode[c]=v}this.insertContained(this.subnode[c],a,u)},isSearchMatch:function(a){return!0},insertContained:function(a,u,c){$.isTrue(a.getInterval().contains(u));var p=$t.isZeroWidth(u.getMin(),u.getMax()),v=null;v=p?a.find(u):a.getNode(u),v.add(c)},interfaces_:function(){return[]},getClass:function(){return Ea}}),Ea.origin=0,o(Ca.prototype,{size:function(){return this.root!==null?this.root.size():0},insert:function(a,u){this.collectStats(a);var c=Ca.ensureExtent(a,this.minExtent);this.root.insert(c,u)},query:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var a=arguments[0];return this.query(new hi(a,a))}if(arguments[0]instanceof hi){var u=arguments[0],c=new q;return this.query(u,c),c}}else if(arguments.length===2){var p=arguments[0],v=arguments[1];this.root.addAllItemsFromOverlapping(p,v)}},iterator:function(){var a=new q;return this.root.addAllItems(a),a.iterator()},remove:function(a,u){var c=Ca.ensureExtent(a,this.minExtent);return this.root.remove(c,u)},collectStats:function(a){var u=a.getWidth();u<this.minExtent&&u>0&&(this.minExtent=u)},depth:function(){return this.root!==null?this.root.depth():0},nodeSize:function(){return this.root!==null?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return Ca}}),Ca.ensureExtent=function(a,u){var c=a.getMin(),p=a.getMax();return c!==p?a:(c===p&&(c-=u/2,p=c+u/2),new hi(c,p))},o(Zs.prototype,{isInside:function(a){},interfaces_:function(){return[]},getClass:function(){return Zs}}),o(_s.prototype,{testLineSegment:function(a,u){var c=null,p=null,v=null,S=null,N=null,O=u.p0,ae=u.p1;p=O.x-a.x,v=O.y-a.y,S=ae.x-a.x,N=ae.y-a.y,(v>0&&0>=N||N>0&&0>=v)&&(c=cr.signOfDet2x2(p,v,S,N)/(N-v),c>0&&this.crossings++)},buildIndex:function(){this.tree=new Ca;for(var a=Oe.removeRepeatedPoints(this.ring.getCoordinates()),u=pr.getChains(a),c=0;c<u.size();c++){var p=u.get(c),v=p.getEnvelope();this.interval.min=v.getMinY(),this.interval.max=v.getMaxY(),this.tree.insert(this.interval,p)}},testMonotoneChain:function(a,u,c){c.select(a,u)},isInside:function(a){this.crossings=0;var u=new Q(h.NEGATIVE_INFINITY,h.POSITIVE_INFINITY,a.y,a.y);this.interval.min=a.y,this.interval.max=a.y;for(var c=this.tree.query(this.interval),p=new Ja(this,a),v=c.iterator();v.hasNext();){var S=v.next();this.testMonotoneChain(u,p,S)}return this.crossings%2===1},interfaces_:function(){return[Zs]},getClass:function(){return _s}}),E(Ja,Ri),o(Ja.prototype,{select:function(){if(arguments.length!==1)return Ri.prototype.select.apply(this,arguments);var a=arguments[0];this.mcp.testLineSegment(this.p,a)},interfaces_:function(){return[]},getClass:function(){return Ja}}),_s.MCSelecter=Ja,o(Qs.prototype,{insertEdgeEnds:function(a){for(var u=a.iterator();u.hasNext();){var c=u.next();this.nodes.add(c)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(a,u){for(var c=a.getNodeIterator();c.hasNext();){var p=c.next(),v=this.nodes.addNode(p.getCoordinate());v.setLabel(u,p.getLabel().getLocation(u))}},build:function(a){this.computeIntersectionNodes(a,0),this.copyNodesAndLabels(a,0);var u=new ps,c=u.computeEdgeEnds(a.getEdgeIterator());this.insertEdgeEnds(c)},computeIntersectionNodes:function(a,u){for(var c=a.getEdgeIterator();c.hasNext();)for(var p=c.next(),v=p.getLabel().getLocation(u),S=p.getEdgeIntersectionList().iterator();S.hasNext();){var N=S.next(),O=this.nodes.addNode(N.coord);v===x.BOUNDARY?O.setLabelBoundary(u):O.getLabel().isNull(u)&&O.setLabel(u,x.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Qs}}),o(eo.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var a=this.nodeGraph.getNodeIterator();a.hasNext();){var u=a.next();if(!u.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=u.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var a=this.nodeGraph.getNodeIterator();a.hasNext();)for(var u=a.next(),c=u.getEdges().iterator();c.hasNext();){var p=c.next();if(p.getEdgeEnds().size()>1)return this.invalidPoint=p.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var a=this.geomGraph.computeSelfNodes(this.li,!0,!0);return a.hasProperIntersection()?(this.invalidPoint=a.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return eo}}),o(no.prototype,{buildIndex:function(){this.index=new kt;for(var a=0;a<this.rings.size();a++){var u=this.rings.get(a),c=u.getEnvelopeInternal();this.index.insert(c,u)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var a=0;a<this.rings.size();a++)for(var u=this.rings.get(a),c=u.getCoordinates(),p=this.index.query(u.getEnvelopeInternal()),v=0;v<p.size();v++){var S=p.get(v),N=S.getCoordinates();if(u!==S&&u.getEnvelopeInternal().intersects(S.getEnvelopeInternal())){var O=Fr.findPtNotNode(c,S,this.graph);if(O!==null){var ae=Ge.isPointInRing(O,N);if(ae)return this.nestedPt=O,!1}}}return!0},add:function(a){this.rings.add(a),this.totalEnv.expandToInclude(a.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return no}}),o(gn.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return gn.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var a="";return this.pt!==null&&(a=" at or near point "+this.pt),this.getMessage()+a},interfaces_:function(){return[]},getClass:function(){return gn}}),gn.ERROR=0,gn.REPEATED_POINT=1,gn.HOLE_OUTSIDE_SHELL=2,gn.NESTED_HOLES=3,gn.DISCONNECTED_INTERIOR=4,gn.SELF_INTERSECTION=5,gn.RING_SELF_INTERSECTION=6,gn.NESTED_SHELLS=7,gn.DUPLICATE_RINGS=8,gn.TOO_FEW_POINTS=9,gn.INVALID_COORDINATE=10,gn.RING_NOT_CLOSED=11,gn.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],o(Fr.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var a=arguments[0],u=0;u<a.length;u++)if(!Fr.isValid(a[u]))return this.validErr=new gn(gn.INVALID_COORDINATE,a[u]),null}else if(arguments[0]instanceof Mt){var c=arguments[0];if(this.checkInvalidCoordinates(c.getExteriorRing().getCoordinates()),this.validErr!==null)return null;for(var u=0;u<c.getNumInteriorRing();u++)if(this.checkInvalidCoordinates(c.getInteriorRingN(u).getCoordinates()),this.validErr!==null)return null}},checkHolesNotNested:function(a,u){for(var c=new no(u),p=0;p<a.getNumInteriorRing();p++){var v=a.getInteriorRingN(p);c.add(v)}var S=c.isNonNested();S||(this.validErr=new gn(gn.NESTED_HOLES,c.getNestedPoint()))},checkConsistentArea:function(a){var u=new eo(a),c=u.isNodeConsistentArea();return c?void(u.hasDuplicateRings()&&(this.validErr=new gn(gn.DUPLICATE_RINGS,u.getInvalidPoint()))):(this.validErr=new gn(gn.SELF_INTERSECTION,u.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),this.validErr===null},checkShellInsideHole:function(a,u,c){var p=a.getCoordinates(),v=u.getCoordinates(),S=Fr.findPtNotNode(p,u,c);if(S!==null){var N=Ge.isPointInRing(S,v);if(!N)return S}var O=Fr.findPtNotNode(v,a,c);if(O!==null){var ae=Ge.isPointInRing(O,p);return ae?O:null}return $.shouldNeverReachHere("points in shell and hole appear to be equal"),null},checkNoSelfIntersectingRings:function(a){for(var u=a.getEdgeIterator();u.hasNext();){var c=u.next();if(this.checkNoSelfIntersectingRing(c.getEdgeIntersectionList()),this.validErr!==null)return null}},checkConnectedInteriors:function(a){var u=new ja(a);u.isInteriorsConnected()||(this.validErr=new gn(gn.DISCONNECTED_INTERIOR,u.getCoordinate()))},checkNoSelfIntersectingRing:function(a){for(var u=new dt,c=!0,p=a.iterator();p.hasNext();){var v=p.next();if(c)c=!1;else{if(u.contains(v.coord))return this.validErr=new gn(gn.RING_SELF_INTERSECTION,v.coord),null;u.add(v.coord)}}},checkHolesInShell:function(a,u){for(var c=a.getExteriorRing(),p=new _s(c),v=0;v<a.getNumInteriorRing();v++){var S=a.getInteriorRingN(v),N=Fr.findPtNotNode(S.getCoordinates(),c,u);if(N===null)return null;var O=!p.isInside(N);if(O)return this.validErr=new gn(gn.HOLE_OUTSIDE_SHELL,N),null}},checkTooFewPoints:function(a){return a.hasTooFewPoints()?(this.validErr=new gn(gn.TOO_FEW_POINTS,a.getInvalidPoint()),null):void 0},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof ht){var a=arguments[0];this.checkInvalidCoordinates(a.getCoordinates())}else if(arguments[0]instanceof me){var u=arguments[0];this.checkInvalidCoordinates(u.getCoordinates())}else if(arguments[0]instanceof le){var c=arguments[0];if(this.checkInvalidCoordinates(c.getCoordinates()),this.validErr!==null||(this.checkClosedRing(c),this.validErr!==null))return null;var p=new tr(0,c);if(this.checkTooFewPoints(p),this.validErr!==null)return null;var v=new Cn;p.computeSelfNodes(v,!0,!0),this.checkNoSelfIntersectingRings(p)}else if(arguments[0]instanceof At){var S=arguments[0];if(this.checkInvalidCoordinates(S.getCoordinates()),this.validErr!==null)return null;var p=new tr(0,S);this.checkTooFewPoints(p)}else if(arguments[0]instanceof Mt){var N=arguments[0];if(this.checkInvalidCoordinates(N),this.validErr!==null||(this.checkClosedRings(N),this.validErr!==null))return null;var p=new tr(0,N);if(this.checkTooFewPoints(p),this.validErr!==null||(this.checkConsistentArea(p),this.validErr!==null)||!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(p),this.validErr!==null)||(this.checkHolesInShell(N,p),this.validErr!==null)||(this.checkHolesNotNested(N,p),this.validErr!==null))return null;this.checkConnectedInteriors(p)}else if(arguments[0]instanceof oe){for(var O=arguments[0],ae=0;ae<O.getNumGeometries();ae++){var ve=O.getGeometryN(ae);if(this.checkInvalidCoordinates(ve),this.validErr!==null||(this.checkClosedRings(ve),this.validErr!==null))return null}var p=new tr(0,O);if(this.checkTooFewPoints(p),this.validErr!==null||(this.checkConsistentArea(p),this.validErr!==null)||!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(p),this.validErr!==null))return null;for(var ae=0;ae<O.getNumGeometries();ae++){var ve=O.getGeometryN(ae);if(this.checkHolesInShell(ve,p),this.validErr!==null)return null}for(var ae=0;ae<O.getNumGeometries();ae++){var ve=O.getGeometryN(ae);if(this.checkHolesNotNested(ve,p),this.validErr!==null)return null}if(this.checkShellsNotNested(O,p),this.validErr!==null)return null;this.checkConnectedInteriors(p)}else if(arguments[0]instanceof Ot)for(var Pe=arguments[0],ae=0;ae<Pe.getNumGeometries();ae++){var Te=Pe.getGeometryN(ae);if(this.checkValid(Te),this.validErr!==null)return null}else if(arguments[0]instanceof Ee){var ze=arguments[0];if(this.validErr=null,ze.isEmpty())return null;if(ze instanceof ht)this.checkValid(ze);else if(ze instanceof me)this.checkValid(ze);else if(ze instanceof le)this.checkValid(ze);else if(ze instanceof At)this.checkValid(ze);else if(ze instanceof Mt)this.checkValid(ze);else if(ze instanceof oe)this.checkValid(ze);else{if(!(ze instanceof Ot))throw new UnsupportedOperationException(ze.getClass().getName());this.checkValid(ze)}}},setSelfTouchingRingFormingHoleValid:function(a){this.isSelfTouchingRingFormingHoleValid=a},checkShellNotNested:function(a,u,c){var p=a.getCoordinates(),v=u.getExteriorRing(),S=v.getCoordinates(),N=Fr.findPtNotNode(p,v,c);if(N===null)return null;var O=Ge.isPointInRing(N,S);if(!O)return null;if(u.getNumInteriorRing()<=0)return this.validErr=new gn(gn.NESTED_SHELLS,N),null;for(var ae=null,ve=0;ve<u.getNumInteriorRing();ve++){var Pe=u.getInteriorRingN(ve);if(ae=this.checkShellInsideHole(a,Pe,c),ae===null)return null}this.validErr=new gn(gn.NESTED_SHELLS,ae)},checkClosedRings:function(a){if(this.checkClosedRing(a.getExteriorRing()),this.validErr!==null)return null;for(var u=0;u<a.getNumInteriorRing();u++)if(this.checkClosedRing(a.getInteriorRingN(u)),this.validErr!==null)return null},checkClosedRing:function(a){if(!a.isClosed()){var u=null;a.getNumPoints()>=1&&(u=a.getCoordinateN(0)),this.validErr=new gn(gn.RING_NOT_CLOSED,u)}},checkShellsNotNested:function(a,u){for(var c=0;c<a.getNumGeometries();c++)for(var p=a.getGeometryN(c),v=p.getExteriorRing(),S=0;S<a.getNumGeometries();S++)if(c!==S){var N=a.getGeometryN(S);if(this.checkShellNotNested(v,N,u),this.validErr!==null)return null}},interfaces_:function(){return[]},getClass:function(){return Fr}}),Fr.findPtNotNode=function(a,u,c){for(var p=c.findEdge(u),v=p.getEdgeIntersectionList(),S=0;S<a.length;S++){var N=a[S];if(!v.isIntersection(N))return N}return null},Fr.isValid=function(){if(arguments[0]instanceof Ee){var a=arguments[0],u=new Fr(a);return u.isValid()}if(arguments[0]instanceof C){var c=arguments[0];return h.isNaN(c.x)||h.isInfinite(c.x)||h.isNaN(c.y)?!1:!h.isInfinite(c.y)}};var Mo=Object.freeze({IsValidOp:Fr}),Do=Object.freeze({BoundaryOp:Ut,IsSimpleOp:Rr,buffer:Eo,distance:Co,linemerge:$o,overlay:Io,polygonize:Po,relate:Ao,union:No,valid:Mo});E(Ss,re.CoordinateOperation),o(Ss.prototype,{editCoordinates:function(a,u){if(a.length===0)return null;for(var c=new Array(a.length).fill(null),p=0;p<a.length;p++){var v=new C(a[p]);this.targetPM.makePrecise(v),c[p]=v}var S=new te(c,!1),N=S.toCoordinateArray(),O=0;u instanceof At&&(O=2),u instanceof le&&(O=4);var ae=c;return this.removeCollapsed&&(ae=null),N.length<O?ae:N},interfaces_:function(){return[]},getClass:function(){return Ss}}),o(ia.prototype,{fixPolygonalTopology:function(a){var u=a;this.changePrecisionModel||(u=this.changePM(a,this.targetPM));var c=u.buffer(0),p=c;return this.changePrecisionModel||(p=a.getFactory().createGeometry(c)),p},reducePointwise:function(a){var u=null;if(this.changePrecisionModel){var c=this.createFactory(a.getFactory(),this.targetPM);u=new re(c)}else u=new re;var p=this.removeCollapsed;a.getDimension()>=2&&(p=!0);var v=u.edit(a,new Ss(this.targetPM,p));return v},changePM:function(a,u){var c=this.createEditor(a.getFactory(),u);return c.edit(a,new re.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(a){this.removeCollapsed=a},createFactory:function(a,u){var c=new Dt(u,a.getSRID(),a.getCoordinateSequenceFactory());return c},setChangePrecisionModel:function(a){this.changePrecisionModel=a},reduce:function(a){var u=this.reducePointwise(a);return this.isPointwise?u:I(u,Bn)?u.isValid()?u:this.fixPolygonalTopology(u):u},setPointwise:function(a){this.isPointwise=a},createEditor:function(a,u){if(a.getPrecisionModel()===u)return new re;var c=this.createFactory(a,u),p=new re(c);return p},interfaces_:function(){return[]},getClass:function(){return ia}}),ia.reduce=function(a,u){var c=new ia(u);return c.reduce(a)},ia.reducePointwise=function(a,u){var c=new ia(u);return c.setPointwise(!0),c.reduce(a)};var To=Object.freeze({GeometryPrecisionReducer:ia});o(Ya.prototype,{simplifySection:function(a,u){if(a+1===u)return null;this.seg.p0=this.pts[a],this.seg.p1=this.pts[u];for(var c=-1,p=a,v=a+1;u>v;v++){var S=this.seg.distance(this.pts[v]);S>c&&(c=S,p=v)}if(c<=this.distanceTolerance)for(var v=a+1;u>v;v++)this.usePt[v]=!1;else this.simplifySection(a,p),this.simplifySection(p,u)},setDistanceTolerance:function(a){this.distanceTolerance=a},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var a=0;a<this.pts.length;a++)this.usePt[a]=!0;this.simplifySection(0,this.pts.length-1);for(var u=new te,a=0;a<this.pts.length;a++)this.usePt[a]&&u.add(new C(this.pts[a]));return u.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Ya}}),Ya.simplify=function(a,u){var c=new Ya(a);return c.setDistanceTolerance(u),c.simplify()},o($a.prototype,{setEnsureValid:function(a){this.isEnsureValidTopology=a},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new Xa(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(a){if(0>a)throw new d;this.distanceTolerance=a},interfaces_:function(){return[]},getClass:function(){return $a}}),$a.simplify=function(a,u){var c=new $a(a);return c.setDistanceTolerance(u),c.getResultGeometry()},E(Xa,ye),o(Xa.prototype,{transformPolygon:function(a,u){if(a.isEmpty())return null;var c=ye.prototype.transformPolygon.call(this,a,u);return u instanceof oe?c:this.createValidArea(c)},createValidArea:function(a){return this.isEnsureValidTopology?a.buffer(0):a},transformCoordinates:function(a,u){var c=a.toCoordinateArray(),p=null;return p=c.length===0?new Array(0).fill(null):Ya.simplify(c,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(p)},transformMultiPolygon:function(a,u){var c=ye.prototype.transformMultiPolygon.call(this,a,u);return this.createValidArea(c)},transformLinearRing:function(a,u){var c=u instanceof Mt,p=ye.prototype.transformLinearRing.call(this,a,u);return!c||p instanceof le?p:null},interfaces_:function(){return[]},getClass:function(){return Xa}}),$a.DPTransformer=Xa,E(Za,Ht),o(Za.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return Za}}),o($i.prototype,{addToResult:function(a){this.resultSegs.add(a)},asLineString:function(){return this.parentLine.getFactory().createLineString($i.extractCoordinates(this.resultSegs))},getResultSize:function(){var a=this.resultSegs.size();return a===0?0:a+1},getParent:function(){return this.parentLine},getSegment:function(a){return this.segs[a]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing($i.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var a=this.parentLine.getCoordinates();this.segs=new Array(a.length-1).fill(null);for(var u=0;u<a.length-1;u++){var c=new Za(a[u],a[u+1],this.parentLine,u);this.segs[u]=c}},getResultCoordinates:function(){return $i.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return $i}}),$i.extractCoordinates=function(a){for(var u=new Array(a.size()+1).fill(null),c=null,p=0;p<a.size();p++)c=a.get(p),u[p]=c.p0;return u[u.length-1]=c.p1,u},o(Ia.prototype,{remove:function(a){this.index.remove(new Q(a.p0,a.p1),a)},add:function(){if(arguments[0]instanceof $i)for(var a=arguments[0],u=a.getSegments(),c=0;c<u.length;c++){var p=u[c];this.add(p)}else if(arguments[0]instanceof Ht){var v=arguments[0];this.index.insert(new Q(v.p0,v.p1),v)}},query:function(a){var u=new Q(a.p0,a.p1),c=new ro(a);this.index.query(u,c);var p=c.getItems();return p},interfaces_:function(){return[]},getClass:function(){return Ia}}),o(ro.prototype,{visitItem:function(a){var u=a;Q.intersects(u.p0,u.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(a)},getItems:function(){return this.items},interfaces_:function(){return[Pt]},getClass:function(){return ro}}),o(Qa.prototype,{flatten:function(a,u){var c=this.linePts[a],p=this.linePts[u],v=new Ht(c,p);return this.remove(this.line,a,u),this.outputIndex.add(v),v},hasBadIntersection:function(a,u,c){return this.hasBadOutputIntersection(c)?!0:!!this.hasBadInputIntersection(a,u,c)},setDistanceTolerance:function(a){this.distanceTolerance=a},simplifySection:function(a,u,c){c+=1;var p=new Array(2).fill(null);if(a+1===u){var v=this.line.getSegment(a);return this.line.addToResult(v),null}var S=!0;if(this.line.getResultSize()<this.line.getMinimumSize()){var N=c+1;N<this.line.getMinimumSize()&&(S=!1)}var O=new Array(1).fill(null),ae=this.findFurthestPoint(this.linePts,a,u,O);O[0]>this.distanceTolerance&&(S=!1);var ve=new Ht;if(ve.p0=this.linePts[a],ve.p1=this.linePts[u],p[0]=a,p[1]=u,this.hasBadIntersection(this.line,p,ve)&&(S=!1),S){var v=this.flatten(a,u);return this.line.addToResult(v),null}this.simplifySection(a,ae,c),this.simplifySection(ae,u,c)},hasBadOutputIntersection:function(a){for(var u=this.outputIndex.query(a),c=u.iterator();c.hasNext();){var p=c.next();if(this.hasInteriorIntersection(p,a))return!0}return!1},findFurthestPoint:function(a,u,c,p){var v=new Ht;v.p0=a[u],v.p1=a[c];for(var S=-1,N=u,O=u+1;c>O;O++){var ae=a[O],ve=v.distance(ae);ve>S&&(S=ve,N=O)}return p[0]=S,N},simplify:function(a){this.line=a,this.linePts=a.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(a,u,c){for(var p=u;c>p;p++){var v=a.getSegment(p);this.inputIndex.remove(v)}},hasInteriorIntersection:function(a,u){return this.li.computeIntersection(a.p0,a.p1,u.p0,u.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(a,u,c){for(var p=this.inputIndex.query(c),v=p.iterator();v.hasNext();){var S=v.next();if(this.hasInteriorIntersection(S,c)){if(Qa.isInLineSection(a,u,S))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return Qa}}),Qa.isInLineSection=function(a,u,c){if(c.getParent()!==a.getParent())return!1;var p=c.getIndex();return p>=u[0]&&p<u[1]},o(io.prototype,{setDistanceTolerance:function(a){this.distanceTolerance=a},simplify:function(a){for(var u=a.iterator();u.hasNext();)this.inputIndex.add(u.next());for(var u=a.iterator();u.hasNext();){var c=new Qa(this.inputIndex,this.outputIndex);c.setDistanceTolerance(this.distanceTolerance),c.simplify(u.next())}},interfaces_:function(){return[]},getClass:function(){return io}}),o(aa.prototype,{getResultGeometry:function(){if(this.inputGeom.isEmpty())return this.inputGeom.copy();this.linestringMap=new $n,this.inputGeom.apply(new Es(this)),this.lineSimplifier.simplify(this.linestringMap.values());var a=new es(this.linestringMap).transform(this.inputGeom);return a},setDistanceTolerance:function(a){if(0>a)throw new d;this.lineSimplifier.setDistanceTolerance(a)},interfaces_:function(){return[]},getClass:function(){return aa}}),aa.simplify=function(a,u){var c=new aa(a);return c.setDistanceTolerance(u),c.getResultGeometry()},E(es,ye),o(es.prototype,{transformCoordinates:function(a,u){if(a.size()===0)return null;if(u instanceof At){var c=this.linestringMap.get(u);return this.createCoordinateSequence(c.getResultCoordinates())}return ye.prototype.transformCoordinates.call(this,a,u)},interfaces_:function(){return[]},getClass:function(){return es}}),o(Es.prototype,{filter:function(a){if(a instanceof At){var u=a;if(u.isEmpty())return null;var c=u.isClosed()?4:2,p=new $i(u,c);this.tps.linestringMap.put(u,p)}},interfaces_:function(){return[Me]},getClass:function(){return Es}}),aa.LineStringTransformer=es,aa.LineStringMapBuilderFilter=Es;var Oo=Object.freeze({DouglasPeuckerSimplifier:$a,TopologyPreservingSimplifier:aa});o(Pa.prototype,{splitAt:function(){if(arguments.length===1){var a=arguments[0],u=this.minimumLen/this.segLen;if(a.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(u),null;if(a.distance(this.seg.p1)<this.minimumLen)return this.splitPt=Pa.pointAlongReverse(this.seg,u),null;this.splitPt=a}else if(arguments.length===2){var c=arguments[0],p=arguments[1],v=this.getConstrainedLength(c),S=v/this.segLen;p.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(S):this.splitPt=Pa.pointAlongReverse(this.seg,S)}},setMinimumLength:function(a){this.minimumLen=a},getConstrainedLength:function(a){return a<this.minimumLen?this.minimumLen:a},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return Pa}}),Pa.pointAlongReverse=function(a,u){var c=new C;return c.x=a.p1.x-u*(a.p1.x-a.p0.x),c.y=a.p1.y-u*(a.p1.y-a.p0.y),c},o(ao.prototype,{findSplitPoint:function(a,u){},interfaces_:function(){return[]},getClass:function(){return ao}}),o(ts.prototype,{findSplitPoint:function(a,u){var c=a.getLineSegment(),p=c.getLength(),v=p/2,S=new Pa(c),N=ts.projectedSplitPoint(a,u),O=2*N.distance(u)*.8,ae=O;return ae>v&&(ae=v),S.setMinimumLength(ae),S.splitAt(N),S.getSplitPoint()},interfaces_:function(){return[ao]},getClass:function(){return ts}}),ts.projectedSplitPoint=function(a,u){var c=a.getLineSegment(),p=c.project(u);return p},o(An.prototype,{interfaces_:function(){return[]},getClass:function(){return An}}),An.triArea=function(a,u,c){return(u.x-a.x)*(c.y-a.y)-(u.y-a.y)*(c.x-a.x)},An.isInCircleDDNormalized=function(a,u,c,p){var v=z.valueOf(a.x).selfSubtract(p.x),S=z.valueOf(a.y).selfSubtract(p.y),N=z.valueOf(u.x).selfSubtract(p.x),O=z.valueOf(u.y).selfSubtract(p.y),ae=z.valueOf(c.x).selfSubtract(p.x),ve=z.valueOf(c.y).selfSubtract(p.y),Pe=v.multiply(O).selfSubtract(N.multiply(S)),Te=N.multiply(ve).selfSubtract(ae.multiply(O)),ze=ae.multiply(S).selfSubtract(v.multiply(ve)),mt=v.multiply(v).selfAdd(S.multiply(S)),Ft=N.multiply(N).selfAdd(O.multiply(O)),jt=ae.multiply(ae).selfAdd(ve.multiply(ve)),In=mt.selfMultiply(Te).selfAdd(Ft.selfMultiply(ze)).selfAdd(jt.selfMultiply(Pe)),Fn=In.doubleValue()>0;return Fn},An.checkRobustInCircle=function(a,u,c,p){var v=An.isInCircleNonRobust(a,u,c,p),S=An.isInCircleDDSlow(a,u,c,p),N=An.isInCircleCC(a,u,c,p),O=wn.circumcentre(a,u,c);Z.out.println("p radius diff a = "+Math.abs(p.distance(O)-a.distance(O))/a.distance(O)),v===S&&v===N||(Z.out.println("inCircle robustness failure (double result = "+v+", DD result = "+S+", CC result = "+N+")"),Z.out.println(xn.toLineString(new Ce([a,u,c,p]))),Z.out.println("Circumcentre = "+xn.toPoint(O)+" radius = "+a.distance(O)),Z.out.println("p radius diff a = "+Math.abs(p.distance(O)/a.distance(O)-1)),Z.out.println("p radius diff b = "+Math.abs(p.distance(O)/u.distance(O)-1)),Z.out.println("p radius diff c = "+Math.abs(p.distance(O)/c.distance(O)-1)),Z.out.println())},An.isInCircleDDFast=function(a,u,c,p){var v=z.sqr(a.x).selfAdd(z.sqr(a.y)).selfMultiply(An.triAreaDDFast(u,c,p)),S=z.sqr(u.x).selfAdd(z.sqr(u.y)).selfMultiply(An.triAreaDDFast(a,c,p)),N=z.sqr(c.x).selfAdd(z.sqr(c.y)).selfMultiply(An.triAreaDDFast(a,u,p)),O=z.sqr(p.x).selfAdd(z.sqr(p.y)).selfMultiply(An.triAreaDDFast(a,u,c)),ae=v.selfSubtract(S).selfAdd(N).selfSubtract(O),ve=ae.doubleValue()>0;return ve},An.isInCircleCC=function(a,u,c,p){var v=wn.circumcentre(a,u,c),S=a.distance(v),N=p.distance(v)-S;return 0>=N},An.isInCircleNormalized=function(a,u,c,p){var v=a.x-p.x,S=a.y-p.y,N=u.x-p.x,O=u.y-p.y,ae=c.x-p.x,ve=c.y-p.y,Pe=v*O-N*S,Te=N*ve-ae*O,ze=ae*S-v*ve,mt=v*v+S*S,Ft=N*N+O*O,jt=ae*ae+ve*ve,In=mt*Te+Ft*ze+jt*Pe;return In>0},An.isInCircleDDSlow=function(a,u,c,p){var v=z.valueOf(p.x),S=z.valueOf(p.y),N=z.valueOf(a.x),O=z.valueOf(a.y),ae=z.valueOf(u.x),ve=z.valueOf(u.y),Pe=z.valueOf(c.x),Te=z.valueOf(c.y),ze=N.multiply(N).add(O.multiply(O)).multiply(An.triAreaDDSlow(ae,ve,Pe,Te,v,S)),mt=ae.multiply(ae).add(ve.multiply(ve)).multiply(An.triAreaDDSlow(N,O,Pe,Te,v,S)),Ft=Pe.multiply(Pe).add(Te.multiply(Te)).multiply(An.triAreaDDSlow(N,O,ae,ve,v,S)),jt=v.multiply(v).add(S.multiply(S)).multiply(An.triAreaDDSlow(N,O,ae,ve,Pe,Te)),In=ze.subtract(mt).add(Ft).subtract(jt),Fn=In.doubleValue()>0;return Fn},An.isInCircleNonRobust=function(a,u,c,p){var v=(a.x*a.x+a.y*a.y)*An.triArea(u,c,p)-(u.x*u.x+u.y*u.y)*An.triArea(a,c,p)+(c.x*c.x+c.y*c.y)*An.triArea(a,u,p)-(p.x*p.x+p.y*p.y)*An.triArea(a,u,c)>0;return v},An.isInCircleRobust=function(a,u,c,p){return An.isInCircleNormalized(a,u,c,p)},An.triAreaDDSlow=function(a,u,c,p,v,S){return c.subtract(a).multiply(S.subtract(u)).subtract(p.subtract(u).multiply(v.subtract(a)))},An.triAreaDDFast=function(a,u,c){var p=z.valueOf(u.x).selfSubtract(a.x).selfMultiply(z.valueOf(c.y).selfSubtract(a.y)),v=z.valueOf(u.y).selfSubtract(a.y).selfMultiply(z.valueOf(c.x).selfSubtract(a.x));return p.selfSubtract(v)},o(Sn.prototype,{circleCenter:function(a,u){var c=new Sn(this.getX(),this.getY()),p=this.bisector(c,a),v=this.bisector(a,u),S=new $e(p,v),N=null;try{N=new Sn(S.getX(),S.getY())}catch(O){if(!(O instanceof J))throw O;Z.err.println("a: "+c+"  b: "+a+"  c: "+u),Z.err.println(O)}finally{}return N},dot:function(a){return this.p.x*a.getX()+this.p.y*a.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(a,u){var c=u.getX()-a.getX(),p=u.getY()-a.getY(),v=new $e(a.getX()+c/2,a.getY()+p/2,1),S=new $e(a.getX()-p+c/2,a.getY()+c+p/2,1);return new $e(v,S)},equals:function(){if(arguments.length===1){var a=arguments[0];return this.p.x===a.getX()&&this.p.y===a.getY()}if(arguments.length===2){var u=arguments[0],c=arguments[1];return this.p.distance(u.getCoordinate())<c}},getCoordinate:function(){return this.p},isInCircle:function(a,u,c){return An.isInCircleRobust(a.p,u.p,c.p,this.p)},interpolateZValue:function(a,u,c){var p=a.getX(),v=a.getY(),S=u.getX()-p,N=c.getX()-p,O=u.getY()-v,ae=c.getY()-v,ve=S*ae-N*O,Pe=this.getX()-p,Te=this.getY()-v,ze=(ae*Pe-N*Te)/ve,mt=(-O*Pe+S*Te)/ve,Ft=a.getZ()+ze*(u.getZ()-a.getZ())+mt*(c.getZ()-a.getZ());return Ft},midPoint:function(a){var u=(this.p.x+a.getX())/2,c=(this.p.y+a.getY())/2,p=(this.p.z+a.getZ())/2;return new Sn(u,c,p)},rightOf:function(a){return this.isCCW(a.dest(),a.orig())},isCCW:function(a,u){return(a.p.x-this.p.x)*(u.p.y-this.p.y)-(a.p.y-this.p.y)*(u.p.x-this.p.x)>0},getX:function(){return this.p.x},crossProduct:function(a){return this.p.x*a.getY()-this.p.y*a.getX()},setZ:function(a){this.p.z=a},times:function(a){return new Sn(a*this.p.x,a*this.p.y)},cross:function(){return new Sn(this.p.y,-this.p.x)},leftOf:function(a){return this.isCCW(a.orig(),a.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(a){return new Sn(this.p.x-a.getX(),this.p.y-a.getY())},getY:function(){return this.p.y},classify:function(a,u){var c=this,p=u.sub(a),v=c.sub(a),S=p.crossProduct(v);return S>0?Sn.LEFT:0>S?Sn.RIGHT:p.getX()*v.getX()<0||p.getY()*v.getY()<0?Sn.BEHIND:p.magn()<v.magn()?Sn.BEYOND:a.equals(c)?Sn.ORIGIN:u.equals(c)?Sn.DESTINATION:Sn.BETWEEN},sum:function(a){return new Sn(this.p.x+a.getX(),this.p.y+a.getY())},distance:function(a,u){return Math.sqrt(Math.pow(u.getX()-a.getX(),2)+Math.pow(u.getY()-a.getY(),2))},circumRadiusRatio:function(a,u){var c=this.circleCenter(a,u),p=this.distance(c,a),v=this.distance(this,a),S=this.distance(a,u);return v>S&&(v=S),S=this.distance(u,this),v>S&&(v=S),p/v},interfaces_:function(){return[]},getClass:function(){return Sn}}),Sn.interpolateZ=function(){if(arguments.length===3){var a=arguments[0],u=arguments[1],c=arguments[2],p=u.distance(c),v=a.distance(u),S=c.z-u.z,N=u.z+S*(v/p);return N}if(arguments.length===4){var O=arguments[0],ae=arguments[1],ve=arguments[2],Pe=arguments[3],Te=ae.x,ze=ae.y,mt=ve.x-Te,Ft=Pe.x-Te,jt=ve.y-ze,In=Pe.y-ze,Fn=mt*In-Ft*jt,jr=O.x-Te,ua=O.y-ze,Rs=(In*jr-Ft*ua)/Fn,Ls=(-jt*jr+mt*ua)/Fn,ks=ae.z+Rs*(ve.z-ae.z)+Ls*(Pe.z-ae.z);return ks}},Sn.LEFT=0,Sn.RIGHT=1,Sn.BEYOND=2,Sn.BEHIND=3,Sn.BETWEEN=4,Sn.ORIGIN=5,Sn.DESTINATION=6,E(Bi,Sn),o(Bi.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(a){this._isOnConstraint=a},merge:function(a){a._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=a.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(a){this._isOnConstraint=!0,this.constraint=a},interfaces_:function(){return[]},getClass:function(){return Bi}}),o(Dn.prototype,{equalsNonOriented:function(a){return this.equalsOriented(a)?!0:!!this.equalsOriented(a.sym())},toLineSegment:function(){return new Ht(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(a){return!(!this.orig().getCoordinate().equals2D(a.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(a.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(a){this.vertex=a},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(a){this.sym().setOrig(a)},setData:function(a){this.data=a},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var a=this.vertex.getCoordinate(),u=this.dest().getCoordinate();return xn.toLineString(a,u)},isLive:function(){return this._rot!==null},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(a){this.next=a},interfaces_:function(){return[]},getClass:function(){return Dn}}),Dn.makeEdge=function(a,u){var c=new Dn,p=new Dn,v=new Dn,S=new Dn;c._rot=p,p._rot=v,v._rot=S,S._rot=c,c.setNext(c),p.setNext(S),v.setNext(v),S.setNext(p);var N=c;return N.setOrig(a),N.setDest(u),N},Dn.swap=function(a){var u=a.oPrev(),c=a.sym().oPrev();Dn.splice(a,u),Dn.splice(a.sym(),c),Dn.splice(a,u.lNext()),Dn.splice(a.sym(),c.lNext()),a.setOrig(u.dest()),a.setDest(c.dest())},Dn.splice=function(a,u){var c=a.oNext().rot(),p=u.oNext().rot(),v=u.oNext(),S=a.oNext(),N=p.oNext(),O=c.oNext();a.setNext(v),u.setNext(S),c.setNext(N),p.setNext(O)},Dn.connect=function(a,u){var c=Dn.makeEdge(a.dest(),u.orig());return Dn.splice(c,a.lNext()),Dn.splice(c.sym(),u),c},o(ns.prototype,{insertSite:function(a){var u=this.subdiv.locate(a);if(this.subdiv.isVertexOfEdge(u,a))return u;this.subdiv.isOnEdge(u,a.getCoordinate())&&(u=u.oPrev(),this.subdiv.delete(u.oNext()));var c=this.subdiv.makeEdge(u.orig(),a);Dn.splice(c,u);var p=c;do c=this.subdiv.connect(u,c.sym()),u=c.oPrev();while(u.lNext()!==p);for(;;){var v=u.oPrev();if(v.dest().rightOf(u)&&a.isInCircle(u.orig(),v.dest(),u.dest()))Dn.swap(u),u=u.oPrev();else{if(u.oNext()===p)return c;u=u.oNext().lPrev()}}},insertSites:function(a){for(var u=a.iterator();u.hasNext();){var c=u.next();this.insertSite(c)}},interfaces_:function(){return[]},getClass:function(){return ns}}),o(so.prototype,{locate:function(a){},interfaces_:function(){return[]},getClass:function(){return so}}),o(Cs.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(a){this.lastEdge.isLive()||this.init();var u=this.subdiv.locateFromEdge(a,this.lastEdge);return this.lastEdge=u,u},findEdge:function(){var a=this.subdiv.getEdges();return a.iterator().next()},interfaces_:function(){return[so]},getClass:function(){return Cs}}),E(Aa,w),o(Aa.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return Aa}}),Aa.msgWithSpatial=function(a,u){return u!==null?a+" [ "+u+" ]":a},o(Na.prototype,{visit:function(a){},interfaces_:function(){return[]},getClass:function(){return Na}}),o(Pr.prototype,{getTriangleVertices:function(a){var u=new Ps;return this.visitTriangles(u,a),u.getTriangleVertices()},isFrameVertex:function(a){return a.equals(this.frameVertex[0])||a.equals(this.frameVertex[1])?!0:!!a.equals(this.frameVertex[2])},isVertexOfEdge:function(a,u){return!(!u.equals(a.orig(),this.tolerance)&&!u.equals(a.dest(),this.tolerance))},connect:function(a,u){var c=Dn.connect(a,u);return this.quadEdges.add(c),c},getVoronoiCellPolygon:function(a,u){var c=new q,p=a;do{var v=a.rot().orig().getCoordinate();c.add(v),a=a.oPrev()}while(a!==p);var S=new te;S.addAll(c,!1),S.closeRing(),S.size()<4&&(Z.out.println(S),S.add(S.get(S.size()-1),!0));var N=S.toCoordinateArray(),O=u.createPolygon(u.createLinearRing(N),null),ae=p.orig();return O.setUserData(ae.getCoordinate()),O},setLocator:function(a){this.locator=a},initSubdiv:function(){var a=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),u=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);Dn.splice(a.sym(),u);var c=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return Dn.splice(u.sym(),c),Dn.splice(c.sym(),a),a},isFrameBorderEdge:function(a){var u=new Array(3).fill(null);Pr.getTriangleEdges(a,u);var c=new Array(3).fill(null);Pr.getTriangleEdges(a.sym(),c);var p=a.lNext().dest();if(this.isFrameVertex(p))return!0;var v=a.sym().lNext().dest();return!!this.isFrameVertex(v)},makeEdge:function(a,u){var c=Dn.makeEdge(a,u);return this.quadEdges.add(c),c},visitTriangles:function(a,u){this.visitedKey++;var c=new Mn;c.push(this.startingEdge);for(var p=new H;!c.empty();){var v=c.pop();if(!p.contains(v)){var S=this.fetchTriangleToVisit(v,c,u,p);S!==null&&a.visit(S)}}},isFrameEdge:function(a){return!(!this.isFrameVertex(a.orig())&&!this.isFrameVertex(a.dest()))},isOnEdge:function(a,u){this.seg.setCoordinates(a.orig().getCoordinate(),a.dest().getCoordinate());var c=this.seg.distance(u);return c<this.edgeCoincidenceTolerance},getEnvelope:function(){return new Q(this.frameEnv)},createFrame:function(a){var u=a.getWidth(),c=a.getHeight(),p=0;p=u>c?10*u:10*c,this.frameVertex[0]=new Sn((a.getMaxX()+a.getMinX())/2,a.getMaxY()+p),this.frameVertex[1]=new Sn(a.getMinX()-p,a.getMinY()-p),this.frameVertex[2]=new Sn(a.getMaxX()+p,a.getMinY()-p),this.frameEnv=new Q(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(a){var u=new As;return this.visitTriangles(u,a),u.getTriangles()},getVertices:function(a){for(var u=new H,c=this.quadEdges.iterator();c.hasNext();){var p=c.next(),v=p.orig();!a&&this.isFrameVertex(v)||u.add(v);var S=p.dest();!a&&this.isFrameVertex(S)||u.add(S)}return u},fetchTriangleToVisit:function(a,u,c,p){var v=a,S=0,N=!1;do{this.triEdges[S]=v,this.isFrameEdge(v)&&(N=!0);var O=v.sym();p.contains(O)||u.push(O),p.add(v),S++,v=v.lNext()}while(v!==a);return N&&!c?null:this.triEdges},getEdges:function(){if(arguments.length===0)return this.quadEdges;if(arguments.length===1){for(var a=arguments[0],u=this.getPrimaryEdges(!1),c=new Array(u.size()).fill(null),p=0,v=u.iterator();v.hasNext();){var S=v.next();c[p++]=a.createLineString([S.orig().getCoordinate(),S.dest().getCoordinate()])}return a.createMultiLineString(c)}},getVertexUniqueEdges:function(a){for(var u=new q,c=new H,p=this.quadEdges.iterator();p.hasNext();){var v=p.next(),S=v.orig();c.contains(S)||(c.add(S),!a&&this.isFrameVertex(S)||u.add(v));var N=v.sym(),O=N.orig();c.contains(O)||(c.add(O),!a&&this.isFrameVertex(O)||u.add(N))}return u},getTriangleEdges:function(a){var u=new Is;return this.visitTriangles(u,a),u.getTriangleEdges()},getPrimaryEdges:function(a){this.visitedKey++;var u=new q,c=new Mn;c.push(this.startingEdge);for(var p=new H;!c.empty();){var v=c.pop();if(!p.contains(v)){var S=v.getPrimary();!a&&this.isFrameEdge(S)||u.add(S),c.push(v.oNext()),c.push(v.sym().oNext()),p.add(v),p.add(v.sym())}}return u},delete:function(a){Dn.splice(a,a.oPrev()),Dn.splice(a.sym(),a.sym().oPrev());var u=a.sym(),c=a.rot(),p=a.rot().sym();this.quadEdges.remove(a),this.quadEdges.remove(u),this.quadEdges.remove(c),this.quadEdges.remove(p),a.delete(),u.delete(),c.delete(),p.delete()},locateFromEdge:function(a,u){for(var c=0,p=this.quadEdges.size(),v=u;;){if(c++,c>p)throw new Aa(v.toLineSegment());if(a.equals(v.orig())||a.equals(v.dest()))break;if(a.rightOf(v))v=v.sym();else if(a.rightOf(v.oNext())){if(a.rightOf(v.dPrev()))break;v=v.dPrev()}else v=v.oNext()}return v},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(a){this.visitTriangles(new $s,!0);for(var u=new q,c=this.getVertexUniqueEdges(!1),p=c.iterator();p.hasNext();){var v=p.next();u.add(this.getVoronoiCellPolygon(v,a))}return u},getVoronoiDiagram:function(a){var u=this.getVoronoiCellPolygons(a);return a.createGeometryCollection(Dt.toGeometryArray(u))},getTriangles:function(a){for(var u=this.getTriangleCoordinates(!1),c=new Array(u.size()).fill(null),p=0,v=u.iterator();v.hasNext();){var S=v.next();c[p++]=a.createPolygon(a.createLinearRing(S),null)}return a.createGeometryCollection(c)},insertSite:function(a){var u=this.locate(a);if(a.equals(u.orig(),this.tolerance)||a.equals(u.dest(),this.tolerance))return u;var c=this.makeEdge(u.orig(),a);Dn.splice(c,u);var p=c;do c=this.connect(u,c.sym()),u=c.oPrev();while(u.lNext()!==p);return p},locate:function(){if(arguments.length===1){if(arguments[0]instanceof Sn){var a=arguments[0];return this.locator.locate(a)}if(arguments[0]instanceof C){var u=arguments[0];return this.locator.locate(new Sn(u))}}else if(arguments.length===2){var c=arguments[0],p=arguments[1],v=this.locator.locate(new Sn(c));if(v===null)return null;var S=v;v.dest().getCoordinate().equals2D(c)&&(S=v.sym());var N=S;do{if(N.dest().getCoordinate().equals2D(p))return N;N=N.oNext()}while(N!==S);return null}},interfaces_:function(){return[]},getClass:function(){return Pr}}),Pr.getTriangleEdges=function(a,u){if(u[0]=a,u[1]=u[0].lNext(),u[2]=u[1].lNext(),u[2].lNext()!==u[0])throw new d},o($s.prototype,{visit:function(a){for(var u=a[0].orig().getCoordinate(),c=a[1].orig().getCoordinate(),p=a[2].orig().getCoordinate(),v=wn.circumcentre(u,c,p),S=new Sn(v),N=0;3>N;N++)a[N].rot().setOrig(S)},interfaces_:function(){return[Na]},getClass:function(){return $s}}),o(Is.prototype,{getTriangleEdges:function(){return this.triList},visit:function(a){this.triList.add(a.clone())},interfaces_:function(){return[Na]},getClass:function(){return Is}}),o(Ps.prototype,{visit:function(a){this.triList.add([a[0].orig(),a[1].orig(),a[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[Na]},getClass:function(){return Ps}}),o(As.prototype,{checkTriangleSize:function(a){a.length>=2?xn.toLineString(a[0],a[1]):a.length>=1&&xn.toPoint(a[0])},visit:function(a){this.coordList.clear();for(var u=0;3>u;u++){var c=a[u].orig();this.coordList.add(c.getCoordinate())}if(this.coordList.size()>0){this.coordList.closeRing();var p=this.coordList.toCoordinateArray();if(p.length!==4)return null;this.triCoords.add(p)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[Na]},getClass:function(){return As}}),Pr.TriangleCircumcentreVisitor=$s,Pr.TriangleEdgesListVisitor=Is,Pr.TriangleVertexListVisitor=Ps,Pr.TriangleCoordinatesVisitor=As,Pr.EDGE_COINCIDENCE_TOL_FACTOR=1e3,o(sa.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){var a=this.ls.getCoordinate(1);return a.z},getStartZ:function(){var a=this.ls.getCoordinate(0);return a.z},intersection:function(a){return this.ls.intersection(a.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){var a=this.ls.getCoordinate(1);return a.y},getStartX:function(){var a=this.ls.getCoordinate(0);return a.x},equalsTopo:function(a){return this.ls.equalsTopo(a.getLineSegment())},getStartY:function(){var a=this.ls.getCoordinate(0);return a.y},setData:function(a){this.data=a},getData:function(){return this.data},getEndX:function(){var a=this.ls.getCoordinate(1);return a.x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return sa}}),o(rs.prototype,{visit:function(a){},interfaces_:function(){return[]},getClass:function(){return rs}}),o(Ns.prototype,{isRepeated:function(){return this.count>1},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(a){this.left=a},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(a){this.right=a},interfaces_:function(){return[]},getClass:function(){return Ns}}),o(oa.prototype,{insert:function(){if(arguments.length===1){var a=arguments[0];return this.insert(a,null)}if(arguments.length===2){var u=arguments[0],c=arguments[1];if(this.root===null)return this.root=new Ns(u,c),this.root;if(this.tolerance>0){var p=this.findBestMatchNode(u);if(p!==null)return p.increment(),p}return this.insertExact(u,c)}},query:function(){var a=arguments,u=this;if(arguments.length===1){var c=arguments[0],p=new q;return this.query(c,p),p}if(arguments.length===2){if(arguments[0]instanceof Q&&I(arguments[1],k))(function(){var N=a[0],O=a[1];u.queryNode(u.root,N,!0,{interfaces_:function(){return[rs]},visit:function(ae){O.add(ae)}})})();else if(arguments[0]instanceof Q&&I(arguments[1],rs)){var v=arguments[0],S=arguments[1];this.queryNode(this.root,v,!0,S)}}},queryNode:function(a,u,c,p){if(a===null)return null;var v=null,S=null,N=null;c?(v=u.getMinX(),S=u.getMaxX(),N=a.getX()):(v=u.getMinY(),S=u.getMaxY(),N=a.getY());var O=N>v,ae=S>=N;O&&this.queryNode(a.getLeft(),u,!c,p),u.contains(a.getCoordinate())&&p.visit(a),ae&&this.queryNode(a.getRight(),u,!c,p)},findBestMatchNode:function(a){var u=new Ms(a,this.tolerance);return this.query(u.queryEnvelope(),u),u.getNode()},isEmpty:function(){return this.root===null},insertExact:function(a,u){for(var c=this.root,p=this.root,v=!0,S=!0;c!==null;){if(c!==null){var N=a.distance(c.getCoordinate())<=this.tolerance;if(N)return c.increment(),c}S=v?a.x<c.getX():a.y<c.getY(),p=c,c=S?c.getLeft():c.getRight(),v=!v}this.numberOfNodes=this.numberOfNodes+1;var O=new Ns(a,u);return S?p.setLeft(O):p.setRight(O),O},interfaces_:function(){return[]},getClass:function(){return oa}}),oa.toCoordinates=function(){if(arguments.length===1){var a=arguments[0];return oa.toCoordinates(a,!1)}if(arguments.length===2){for(var u=arguments[0],c=arguments[1],p=new te,v=u.iterator();v.hasNext();)for(var S=v.next(),N=c?S.getCount():1,O=0;N>O;O++)p.add(S.getCoordinate(),!0);return p.toCoordinateArray()}},o(Ms.prototype,{visit:function(a){var u=this.p.distance(a.getCoordinate()),c=u<=this.tolerance;if(!c)return null;var p=!1;(this.matchNode===null||u<this.matchDist||this.matchNode!==null&&u===this.matchDist&&a.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(p=!0),p&&(this.matchNode=a,this.matchDist=u)},queryEnvelope:function(){var a=new Q(this.p);return a.expandBy(this.tolerance),a},getNode:function(){return this.matchNode},interfaces_:function(){return[rs]},getClass:function(){return Ms}}),oa.BestMatchVisitor=Ms,o(Hi.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();var a=0,u=0;do u=this.enforceGabriel(this.segments),a++;while(u>0&&a<Hi.MAX_SPLIT_ITER)},insertSites:function(a){for(var u=a.iterator();u.hasNext();){var c=u.next();this.insertSite(c)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var a=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),u=0,c=this.initialVertices.iterator();c.hasNext();){var p=c.next();a[u++]=p.getCoordinate()}for(var v=this.segVertices.iterator();v.hasNext();){var p=v.next();a[u++]=p.getCoordinate()}return a},setConstraints:function(a,u){this.segments=a,this.segVertices=u},computeConvexHull:function(){var a=new Dt,u=this.getPointArray(),c=new M(u,a);this.convexHull=c.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(a){var u=a.getStart(),c=a.getEnd(),p=new C((u.x+c.x)/2,(u.y+c.y)/2),v=u.distance(p),S=new Q(p);S.expandBy(v);for(var N=this.kdt.query(S),O=null,ae=h.MAX_VALUE,ve=N.iterator();ve.hasNext();){var Pe=ve.next(),Te=Pe.getCoordinate();if(!Te.equals2D(u)&&!Te.equals2D(c)){var ze=p.distance(Te);if(v>ze){var mt=ze;(O===null||ae>mt)&&(O=Te,ae=mt)}}}return O},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(a){this.splitFinder=a},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(a){for(var u=new q,c=0,p=new q,v=a.iterator();v.hasNext();){var S=v.next(),N=this.findNonGabrielPoint(S);if(N!==null){this.splitPt=this.splitFinder.findSplitPoint(S,N);var O=this.createVertex(this.splitPt,S),ae=(this.insertSite(O),new sa(S.getStartX(),S.getStartY(),S.getStartZ(),O.getX(),O.getY(),O.getZ(),S.getData())),ve=new sa(O.getX(),O.getY(),O.getZ(),S.getEndX(),S.getEndY(),S.getEndZ(),S.getData());u.add(ae),u.add(ve),p.add(S),c+=1}}return a.removeAll(p),a.addAll(u),c},createVertex:function(){if(arguments.length===1){var a=arguments[0],u=null;return u=this.vertexFactory!==null?this.vertexFactory.createVertex(a,null):new Bi(a)}if(arguments.length===2){var c=arguments[0],p=arguments[1],u=null;return u=this.vertexFactory!==null?this.vertexFactory.createVertex(c,p):new Bi(c),u.setOnConstraint(!0),u}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var a=Hi.computeVertexEnvelope(this.initialVertices),u=Hi.computeVertexEnvelope(this.segVertices),c=new Q(a);c.expandToInclude(u);var p=.2*c.getWidth(),v=.2*c.getHeight(),S=Math.max(p,v);this.computeAreaEnv=new Q(c),this.computeAreaEnv.expandBy(S)},setVertexFactory:function(a){this.vertexFactory=a},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new Pr(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new Cs(this.subdiv)),this.incDel=new ns(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof Bi){var a=arguments[0],u=this.kdt.insert(a.getCoordinate(),a);if(u.isRepeated()){var c=u.getData();return c.merge(a),c}return this.incDel.insertSite(a),a}if(arguments[0]instanceof C){var p=arguments[0];this.insertSite(this.createVertex(p))}},interfaces_:function(){return[]},getClass:function(){return Hi}}),Hi.computeVertexEnvelope=function(a){for(var u=new Q,c=a.iterator();c.hasNext();){var p=c.next();u.expandToInclude(p.getCoordinate())}return u},Hi.MAX_SPLIT_ITER=99,o(lr.prototype,{create:function(){if(this.subdiv!==null)return null;var a=lr.envelope(this.siteCoords),u=lr.toVertices(this.siteCoords);this.subdiv=new Pr(a,this.tolerance);var c=new ns(this.subdiv);c.insertSites(u)},setTolerance:function(a){this.tolerance=a},setSites:function(){if(arguments[0]instanceof Ee){var a=arguments[0];this.siteCoords=lr.extractUniqueCoordinates(a)}else if(I(arguments[0],Y)){var u=arguments[0];this.siteCoords=lr.unique(Oe.toCoordinateArray(u))}},getEdges:function(a){return this.create(),this.subdiv.getEdges(a)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(a){return this.create(),this.subdiv.getTriangles(a)},interfaces_:function(){return[]},getClass:function(){return lr}}),lr.extractUniqueCoordinates=function(a){if(a===null)return new te;var u=a.getCoordinates();return lr.unique(u)},lr.envelope=function(a){for(var u=new Q,c=a.iterator();c.hasNext();){var p=c.next();u.expandToInclude(p)}return u},lr.unique=function(a){var u=Oe.copyDeep(a);Kt.sort(u);var c=new te(u,!1);return c},lr.toVertices=function(a){for(var u=new q,c=a.iterator();c.hasNext();){var p=c.next();u.add(new Sn(p))}return u},o(Ma.prototype,{createSiteVertices:function(a){for(var u=new q,c=a.iterator();c.hasNext();){var p=c.next();this.constraintVertexMap.containsKey(p)||u.add(new Bi(p))}return u},create:function(){if(this.subdiv!==null)return null;var a=lr.envelope(this.siteCoords),u=new q;this.constraintLines!==null&&(a.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),u=Ma.createConstraintSegments(this.constraintLines));var c=this.createSiteVertices(this.siteCoords),p=new Hi(c,this.tolerance);p.setConstraints(u,new q(this.constraintVertexMap.values())),p.formInitialDelaunay(),p.enforceConstraints(),this.subdiv=p.getSubdivision()},setTolerance:function(a){this.tolerance=a},setConstraints:function(a){this.constraintLines=a},setSites:function(a){this.siteCoords=lr.extractUniqueCoordinates(a)},getEdges:function(a){return this.create(),this.subdiv.getEdges(a)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(a){return this.create(),this.subdiv.getTriangles(a)},createVertices:function(a){for(var u=a.getCoordinates(),c=0;c<u.length;c++){var p=new Bi(u[c]);this.constraintVertexMap.put(u[c],p)}},interfaces_:function(){return[]},getClass:function(){return Ma}}),Ma.createConstraintSegments=function(){if(arguments.length===1){for(var a=arguments[0],u=Hn.getLines(a),c=new q,p=u.iterator();p.hasNext();){var v=p.next();Ma.createConstraintSegments(v,c)}return c}if(arguments.length===2)for(var S=arguments[0],N=arguments[1],O=S.getCoordinates(),p=1;p<O.length;p++)N.add(new sa(O[p-1],O[p]))},o(is.prototype,{create:function(){if(this.subdiv!==null)return null;var a=lr.envelope(this.siteCoords);this.diagramEnv=a;var u=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(u),this.clipEnv!==null&&this.diagramEnv.expandToInclude(this.clipEnv);var c=lr.toVertices(this.siteCoords);this.subdiv=new Pr(a,this.tolerance);var p=new ns(this.subdiv);p.insertSites(c)},getDiagram:function(a){this.create();var u=this.subdiv.getVoronoiDiagram(a);return is.clipGeometryCollection(u,this.diagramEnv)},setTolerance:function(a){this.tolerance=a},setSites:function(){if(arguments[0]instanceof Ee){var a=arguments[0];this.siteCoords=lr.extractUniqueCoordinates(a)}else if(I(arguments[0],Y)){var u=arguments[0];this.siteCoords=lr.unique(Oe.toCoordinateArray(u))}},setClipEnvelope:function(a){this.clipEnv=a},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return is}}),is.clipGeometryCollection=function(a,u){for(var c=a.getFactory().toGeometry(u),p=new q,v=0;v<a.getNumGeometries();v++){var S=a.getGeometryN(v),N=null;u.contains(S.getEnvelopeInternal())?N=S:u.intersects(S.getEnvelopeInternal())&&(N=c.intersection(S),N.setUserData(S.getUserData())),N===null||N.isEmpty()||p.add(N)}return a.getFactory().createGeometryCollection(Dt.toGeometryArray(p))};var Ro=Object.freeze({ConformingDelaunayTriangulationBuilder:Ma,DelaunayTriangulationBuilder:lr,VoronoiDiagramBuilder:is});o(Ds.prototype,{interfaces_:function(){return[]},getClass:function(){return Ds}}),Ds.union=function(a,u){if(a.isEmpty()||u.isEmpty()){if(a.isEmpty()&&u.isEmpty())return yt.createEmptyResult(yt.UNION,a,u,a.getFactory());if(a.isEmpty())return u.copy();if(u.isEmpty())return a.copy()}return a.checkNotGeometryCollection(a),a.checkNotGeometryCollection(u),Ln.overlayOp(a,u,yt.UNION)},o(Ee.prototype,{equalsTopo:function(a){return this.getEnvelopeInternal().equals(a.getEnvelopeInternal())?pn.relate(this,a).isEquals(this.getDimension(),a.getDimension()):!1},union:function(){if(arguments.length===0)return Fi.union(this);if(arguments.length===1){var a=arguments[0];return Ds.union(this,a)}},isValid:function(){return Fr.isValid(this)},intersection:function(a){if(this.isEmpty()||a.isEmpty())return yt.createEmptyResult(yt.INTERSECTION,this,a,this.factory);if(this.isGeometryCollection()){var u=a;return Pi.map(this,{interfaces_:function(){return[MapOp]},map:function(c){return c.intersection(u)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(a),Ln.overlayOp(this,a,yt.INTERSECTION)},covers:function(a){return pn.covers(this,a)},coveredBy:function(a){return pn.coveredBy(this,a)},touches:function(a){return pn.touches(this,a)},intersects:function(a){return pn.intersects(this,a)},within:function(a){return pn.within(this,a)},overlaps:function(a){return pn.overlaps(this,a)},disjoint:function(a){return pn.disjoint(this,a)},crosses:function(a){return pn.crosses(this,a)},buffer:function(){if(arguments.length===1){var a=arguments[0];return ir.bufferOp(this,a)}if(arguments.length===2){var u=arguments[0],c=arguments[1];return ir.bufferOp(this,u,c)}if(arguments.length===3){var p=arguments[0],v=arguments[1],S=arguments[2];return ir.bufferOp(this,p,v,S)}},convexHull:function(){return new M(this).getConvexHull()},relate:function(){for(var a=arguments.length,u=Array(a),c=0;a>c;c++)u[c]=arguments[c];return pn.relate.apply(pn,[this].concat(u))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var a=Zn.getCentroid(this);return this.createPointFromInternalCoord(a,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var a=null,u=this.getDimension();if(u===0){var c=new Qi(this);a=c.getInteriorPoint()}else if(u===1){var c=new Zi(this);a=c.getInteriorPoint()}else{var c=new hr(this);a=c.getInteriorPoint()}return this.createPointFromInternalCoord(a,this)},symDifference:function(a){if(this.isEmpty()||a.isEmpty()){if(this.isEmpty()&&a.isEmpty())return yt.createEmptyResult(yt.SYMDIFFERENCE,this,a,this.factory);if(this.isEmpty())return a.copy();if(a.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(a),Ln.overlayOp(this,a,yt.SYMDIFFERENCE)},createPointFromInternalCoord:function(a,u){return u.getPrecisionModel().makePrecise(a),u.getFactory().createPoint(a)},toText:function(){var a=new xn;return a.write(this)},toString:function(){this.toText()},contains:function(a){return pn.contains(this,a)},difference:function(a){return this.isEmpty()?yt.createEmptyResult(yt.DIFFERENCE,this,a,this.factory):a.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(a),Ln.overlayOp(this,a,yt.DIFFERENCE))},isSimple:function(){var a=new Rr(this);return a.isSimple()},isWithinDistance:function(a,u){var c=this.getEnvelopeInternal().distance(a.getEnvelopeInternal());return c>u?!1:zr.isWithinDistance(this,a,u)},distance:function(a){return zr.distance(this,a)},isEquivalentClass:function(a){return this.getClass()===a.getClass()}});var Lo="1.1.2 (248dab8)";t.version=Lo,t.algorithm=po,t.densify=mo,t.dissolve=yo,t.geom=go,t.index=xo,t.io=_o,t.noding=So,t.operation=Do,t.precision=To,t.simplify=Oo,t.triangulate=Ro})})(jsts_min,jsts_minExports);var jsts$3=jsts_minExports,turfUnion=function(n,e){var t=new jsts$3.io.GeoJSONReader,o=t.read(JSON.stringify(n.geometry)),l=t.read(JSON.stringify(e.geometry)),d=o.union(l),h=new jsts$3.io.GeoJSONWriter;return d=h.write(d),{type:"Feature",geometry:d,properties:n.properties}},tin=turfTin,union=turfUnion,distance$9=turfDistance;function concave(n,e,t){if(typeof e!="number")throw new Error("maxEdge parameter is required");if(typeof t!="string")throw new Error("units parameter is required");var o=tin(n),l=o.features.filter(d);o.features=l;function d(h){var g=h.geometry.coordinates[0][0],m=h.geometry.coordinates[0][1],y=h.geometry.coordinates[0][2],b=distance$9(g,m,t),w=distance$9(m,y,t),E=distance$9(g,y,t);return b<=e&&w<=e&&E<=e}return merge$2(o)}function merge$2(n){for(var e=JSON.parse(JSON.stringify(n.features[0])),t=n.features,o=0,l=t.length;o<l;o++){var d=t[o];d.geometry&&(e=union(e,d))}return e}var turfConcave=concave,jsts$2=jsts_minExports,turfDifference=function(n,e){var t=JSON.parse(JSON.stringify(n)),o=JSON.parse(JSON.stringify(e));t.type!=="Feature"&&(t={type:"Feature",properties:{},geometry:t}),o.type!=="Feature"&&(o={type:"Feature",properties:{},geometry:o});var l=new jsts$2.io.GeoJSONReader,d=l.read(JSON.stringify(t.geometry)),h=l.read(JSON.stringify(o.geometry)),g=d.difference(h);if(!g.isEmpty()){var m=new jsts$2.io.GeoJSONWriter,y=m.write(g);return t.geometry=g,{type:"Feature",properties:t.properties,geometry:y}}},inside$2=turfInside,turfCollect=function(e,t,o,l){return e.features.forEach(function(d){var h=t.features.filter(function(g){return inside$2(g,d)}).map(function(g){return g.properties[o]});d.properties||(d.properties={}),d.properties[l]=h}),e},coordEach=turfMeta.coordEach,turfFlip=function(e){return e=JSON.parse(JSON.stringify(e)),coordEach(e,function(t){t.reverse()}),e},simplifyExports={},simplify$1={get exports(){return simplifyExports},set exports(n){simplifyExports=n}};(function(n){(function(){function e(g,m){var y=g.x-m.x,b=g.y-m.y;return y*y+b*b}function t(g,m,y){var b=m.x,w=m.y,E=y.x-b,P=y.y-w;if(E!==0||P!==0){var $=((g.x-b)*E+(g.y-w)*P)/(E*E+P*P);$>1?(b=y.x,w=y.y):$>0&&(b+=E*$,w+=P*$)}return E=g.x-b,P=g.y-w,E*E+P*P}function o(g,m){for(var y=g[0],b=[y],w,E=1,P=g.length;E<P;E++)w=g[E],e(w,y)>m&&(b.push(w),y=w);return y!==w&&b.push(w),b}function l(g,m,y,b,w){for(var E=b,P,$=m+1;$<y;$++){var C=t(g[$],g[m],g[y]);C>E&&(P=$,E=C)}E>b&&(P-m>1&&l(g,m,P,b,w),w.push(g[P]),y-P>1&&l(g,P,y,b,w))}function d(g,m){var y=g.length-1,b=[g[0]];return l(g,0,y,m,b),b.push(g[y]),b}function h(g,m,y){if(g.length<=2)return g;var b=m!==void 0?m*m:1;return g=y?g:o(g,b),g=d(g,b),g}n.exports=h,n.exports.default=h})()})(simplify$1);var simplify=simplifyExports,supportedTypes=["LineString","MultiLineString","Polygon","MultiPolygon"],turfSimplify=function(n,e,t){return n.type==="Feature"?simpleFeature(simplifyHelper(n,e,t),n.properties):n.type==="FeatureCollection"?{type:"FeatureCollection",features:n.features.map(function(o){var l=simplifyHelper(o,e,t);return supportedTypes.indexOf(l.type)>-1?simpleFeature(l,o.properties):l})}:n.type==="GeometryCollection"?{type:"GeometryCollection",geometries:n.geometries.map(function(o){return supportedTypes.indexOf(o.type)>-1?simplifyHelper({type:"Feature",geometry:o},e,t):o})}:n};function simplifyHelper(n,e,t){return n.geometry.type==="LineString"?{type:"LineString",coordinates:simplifyLine(n.geometry.coordinates,e,t)}:n.geometry.type==="MultiLineString"?{type:"MultiLineString",coordinates:n.geometry.coordinates.map(function(o){return simplifyLine(o,e,t)})}:n.geometry.type==="Polygon"?{type:"Polygon",coordinates:simplifyPolygon(n.geometry.coordinates,e,t)}:n.geometry.type==="MultiPolygon"?{type:"MultiPolygon",coordinates:n.geometry.coordinates.map(function(o){return simplifyPolygon(o,e,t)})}:n}function checkValidity(n){return n.length<3?!1:!(n.length===3&&n[2][0]===n[0][0]&&n[2][1]===n[0][1])}function simpleFeature(n,e){return{type:"Feature",geometry:n,properties:e}}function simplifyLine(n,e,t){return simplify(n.map(function(o){return{x:o[0],y:o[1]}}),e,t).map(function(o){return[o.x,o.y]})}function simplifyPolygon(n,e,t){return n.map(function(o){var l=o.map(function(h){return{x:h[0],y:h[1]}});if(l.length<4)throw new Error("Invalid polygon");for(var d=simplify(l,e,t).map(function(h){return[h.x,h.y]});!checkValidity(d);)e-=e*.01,d=simplify(l,e,t).map(function(h){return[h.x,h.y]});return(d[d.length-1][0]!==d[0][0]||d[d.length-1][1]!==d[0][1])&&d.push(d[0]),d})}var Spline$1=function(n){this.points=n.points||[],this.duration=n.duration||1e4,this.sharpness=n.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=n.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(var e=0;e<this.length-1;e++){var t=this.points[e],o=this.points[e+1];this.centers.push({x:(t.x+o.x)/2,y:(t.y+o.y)/2,z:(t.z+o.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var e=0;e<this.centers.length-1;e++){var t=this.centers[e],o=this.centers[e+1],l=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,d=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,h=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+l),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+d),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+h)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+l),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+d),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+h)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};Spline$1.prototype.cacheSteps=function(n){var e=[],t=this.pos(0);e.push(0);for(var o=0;o<this.duration;o+=10){var l=this.pos(o),d=Math.sqrt((l.x-t.x)*(l.x-t.x)+(l.y-t.y)*(l.y-t.y)+(l.z-t.z)*(l.z-t.z));d>n&&(e.push(o),t=l)}return e};Spline$1.prototype.vector=function(n){var e=this.pos(n+10),t=this.pos(n-10);return{angle:180*Math.atan2(e.y-t.y,e.x-t.x)/3.14,speed:Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z))}};Spline$1.prototype.pos=function(n){function e(h,g,m,y,b){var w=function($){var C=$*$,L=C*$;return[L,3*C*(1-$),3*$*(1-$)*(1-$),(1-$)*(1-$)*(1-$)]},E=w(h),P={x:b.x*E[0]+y.x*E[1]+m.x*E[2]+g.x*E[3],y:b.y*E[0]+y.y*E[1]+m.y*E[2]+g.y*E[3],z:b.z*E[0]+y.z*E[1]+m.z*E[2]+g.z*E[3]};return P}var t=n-this.delay;t<0&&(t=0),t>this.duration&&(t=this.duration-1);var o=t/this.duration;if(o>=1)return this.points[this.length-1];var l=Math.floor((this.points.length-1)*o),d=(this.length-1)*o-l;return e(d,this.points[l],this.controls[l][1],this.controls[l+1][0],this.points[l+1])};var spline=Spline$1,linestring$1=turfHelpers.lineString,Spline=spline,turfBezier=function(n,e,t){var o=linestring$1([]);o.properties=n.properties;for(var l=new Spline({points:n.geometry.coordinates.map(function(g){return{x:g[0],y:g[1]}}),duration:e,sharpness:t}),d=0;d<l.duration;d+=10){var h=l.pos(d);Math.floor(d/100)%2===0&&o.geometry.coordinates.push([h.x,h.y])}return o},inside$1=turfInside,turfTag=function(n,e,t,o){return n=JSON.parse(JSON.stringify(n)),e=JSON.parse(JSON.stringify(e)),n.features.forEach(function(l){l.properties||(l.properties={}),e.features.forEach(function(d){if(l.properties[o]===void 0){var h=inside$1(l,d);h&&(l.properties[o]=d.properties[t])}})}),n},featureCollection$3=turfHelpers.featureCollection,turfSample=function(n,e){var t=featureCollection$3(getRandomSubarray(n.features,e));return t};function getRandomSubarray(n,e){for(var t=n.slice(0),o=n.length,l=o-e,d,h;o-- >l;)h=Math.floor((o+1)*Math.random()),d=t[h],t[h]=t[o],t[o]=d;return t.slice(l)}var polygon$5=turfHelpers.polygon,turfBboxPolygon=function(n){var e=[n[0],n[1]],t=[n[0],n[3]],o=[n[2],n[3]],l=[n[2],n[1]];return polygon$5([[e,l,o,t,e]])},bbox$1=turfBbox,bboxPolygon=turfBboxPolygon,turfEnvelope=function(n){return bboxPolygon(bbox$1(n))},getCoord$1=turfInvariant.getCoord,turfBearing=function(n,e){var t=Math.PI/180,o=180/Math.PI,l=getCoord$1(n),d=getCoord$1(e),h=t*l[0],g=t*d[0],m=t*l[1],y=t*d[1],b=Math.sin(g-h)*Math.cos(y),w=Math.cos(m)*Math.sin(y)-Math.sin(m)*Math.cos(y)*Math.cos(g-h),E=o*Math.atan2(b,w);return E},getCoord=turfInvariant.getCoord,helpers$2=turfHelpers,point$b=helpers$2.point,distanceToRadians=helpers$2.distanceToRadians,turfDestination=function(n,e,t,o){var l=Math.PI/180,d=180/Math.PI,h=getCoord(n),g=l*h[0],m=l*h[1],y=l*t,b=distanceToRadians(e,o),w=Math.asin(Math.sin(m)*Math.cos(b)+Math.cos(m)*Math.sin(b)*Math.cos(y)),E=g+Math.atan2(Math.sin(y)*Math.sin(b)*Math.cos(m),Math.cos(b)-Math.sin(m)*Math.sin(w));return point$b([d*E,d*w])},bearing$2=turfBearing,destination$2=turfDestination,distance$8=turfDistance,turfMidpoint=function(n,e){var t=distance$8(n,e,"miles"),o=bearing$2(n,e),l=destination$2(n,t/2,o,"miles");return l},geojsonNormalize=normalize$1,types$1={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function normalize$1(n){if(!n||!n.type)return null;var e=types$1[n.type];if(!e)return null;if(e==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:n}]};if(e==="feature")return{type:"FeatureCollection",features:[n]};if(e==="featurecollection")return n}var helpers$1=turfHelpers,featureCollection$2=helpers$1.featureCollection,jsts$1=jsts_minExports,normalize=geojsonNormalize,turfBuffer=function(n,e,t){var o=helpers$1.distanceToDegrees(e,t),l=normalize(n),d=normalize(featureCollection$2(l.features.map(function(h){return bufferOp(h,o)})));if(d.features.length>1)return d;if(d.features.length===1)return d.features[0]};function bufferOp(n,e){var t=new jsts$1.io.GeoJSONReader,o=t.read(n.geometry),l=o.buffer(e),d=new jsts$1.io.GeoJSONWriter;return l=d.write(l),{type:"Feature",geometry:l,properties:{}}}var bbox=turfBbox,point$a=turfHelpers.point,turfCenter=function(n){var e=bbox(n),t=(e[0]+e[2])/2,o=(e[1]+e[3])/2;return point$a([t,o])},each$a=turfMeta.coordEach,point$9=turfHelpers.point,turfCentroid=function(n){var e=0,t=0,o=0;return each$a(n,function(l){e+=l[0],t+=l[1],o++},!0),point$9([e/o,t/o])},meta=turfMeta,turfCombine=function(n){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},t=Object.keys(e).reduce(function(l,d){return l[d.replace("Multi","")]=d,l},{});function o(l,d,h){h?e[d].coordinates=e[d].coordinates.concat(l.geometry.coordinates):e[d].coordinates.push(l.geometry.coordinates),e[d].properties.push(l.properties)}return meta.featureEach(n,function(l){l.geometry&&(e[l.geometry.type]?o(l,l.geometry.type,!0):t[l.geometry.type]&&o(l,t[l.geometry.type],!1))}),{type:"FeatureCollection",features:Object.keys(e).filter(function(l){return e[l].coordinates.length}).sort().map(function(l){return{type:"Feature",properties:{collectedProperties:e[l].properties},geometry:{type:l,coordinates:e[l].coordinates}}})}},featureCollection$1=turfHelpers.featureCollection,each$9=turfMeta.coordEach,point$8=turfHelpers.point,turfExplode=function(n){var e=[];return each$9(n,function(t){e.push(point$8(t))}),featureCollection$1(e)},polygon$4=turfHelpers.polygon,earcut=earcutExports,turfTesselate=function(n){if(!n.geometry||n.geometry.type!=="Polygon"&&n.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return n.geometry.type==="Polygon"?e.features=processPolygon(n.geometry.coordinates):n.geometry.coordinates.forEach(function(t){e.features=e.features.concat(processPolygon(t))}),e};function processPolygon(n){var e=flattenCoords(n),t=2,o=earcut(e.vertices,e.holes,t),l=[],d=[];o.forEach(function(m,y){var b=o[y];d.push([e.vertices[b*t],e.vertices[b*t+1]])});for(var h=0;h<d.length;h+=3){var g=d.slice(h,h+3);g.push(d[h]),l.push(polygon$4([g]))}return l}function flattenCoords(n){for(var e=n[0][0].length,t={vertices:[],holes:[],dimensions:e},o=0,l=0;l<n.length;l++){for(var d=0;d<n[l].length;d++)for(var h=0;h<e;h++)t.vertices.push(n[l][d][h]);l>0&&(o+=n[l-1].length,t.holes.push(o))}return t}var jsts=jsts_minExports,turfIntersect=function(e,t){var o,l;e.type==="Feature"?o=e.geometry:o=e,t.type==="Feature"?l=t.geometry:l=t;var d=new jsts.io.GeoJSONReader,h=d.read(JSON.stringify(o)),g=d.read(JSON.stringify(l)),m=h.intersection(g);if(!m.isEmpty()){var y=new jsts.io.GeoJSONWriter,b=y.write(m);return{type:"Feature",properties:{},geometry:b}}},distance$7=turfDistance,turfNearest=function(n,e){for(var t,o=1/0,l=0;l<e.features.length;l++){var d=distance$7(n,e.features[l],"miles");d<o&&(t=e.features[l],o=d)}return t},geojsonRandomExports={},geojsonRandom={get exports(){return geojsonRandomExports},set exports(n){geojsonRandomExports=n}};geojsonRandom.exports=function(){throw new Error("call .point() or .polygon() instead")};function position(n){return n?coordInBBBOX(n):[lon(),lat()]}geojsonRandomExports.position=position;geojsonRandomExports.point=function(n,e){var t=[];for(i=0;i<n;i++)t.push(feature(e?point$7(position(e)):point$7()));return collection(t)};geojsonRandomExports.polygon=function(n,e,t,o){typeof e!="number"&&(e=10),typeof t!="number"&&(t=10);var l=[];for(i=0;i<n;i++){var d=[],h=Array.apply(null,new Array(e+1)).map(Math.random);h.forEach(g),h.forEach(m),d[d.length-1]=d[0],d=d.map(vertexToCoordinate(position(o))),l.push(feature(polygon$3([d])))}function g(y,b,w){w[b]=b>0?y+w[b-1]:y}function m(y,b){y=y*2*Math.PI/h[h.length-1];var w=Math.random();d.push([w*t*Math.sin(y),w*t*Math.cos(y)])}return collection(l)};function vertexToCoordinate(n){return function(e,t){return[e[0]+n[0],e[1]+n[1]]}}function rnd(){return Math.random()-.5}function lon(){return rnd()*360}function lat(){return rnd()*180}function point$7(n){return{type:"Point",coordinates:n||[lon(),lat()]}}function coordInBBBOX(n){return[Math.random()*(n[2]-n[0])+n[0],Math.random()*(n[3]-n[1])+n[1]]}function polygon$3(n){return{type:"Polygon",coordinates:n}}function feature(n){return{type:"Feature",geometry:n,properties:{}}}function collection(n){return{type:"FeatureCollection",features:n}}var random$1=geojsonRandomExports,turfRandom=function(n,e,t){switch(t=t||{},e=e||1,n){case"point":case"points":case void 0:return random$1.point(e,t.bbox);case"polygon":case"polygons":return random$1.polygon(e,t.num_vertices,t.max_radial_length,t.bbox);default:throw new Error("Unknown type given: valid options are points and polygons")}},point$6=turfHelpers.point,turfKinks=function(n){var e,t={type:"FeatureCollection",features:[]};return n.type==="Feature"?e=n.geometry:e=n,e.coordinates.forEach(function(o){e.coordinates.forEach(function(l){for(var d=0;d<o.length-1;d++)for(var h=0;h<l.length-1;h++)if(!(o===l&&(Math.abs(d-h)===1||Math.abs(d-h)===o.length-2))){var g=lineIntersects$1(o[d][0],o[d][1],o[d+1][0],o[d+1][1],l[h][0],l[h][1],l[h+1][0],l[h+1][1]);g&&t.features.push(point$6([g[0],g[1]]))}})}),t};function lineIntersects$1(n,e,t,o,l,d,h,g){var m,y,b,w,E,P={x:null,y:null,onLine1:!1,onLine2:!1};return m=(g-d)*(t-n)-(h-l)*(o-e),m===0?P.x!==null&&P.y!==null?P:!1:(y=e-d,b=n-l,w=(h-l)*y-(g-d)*b,E=(t-n)*y-(o-e)*b,y=w/m,b=E/m,P.x=n+y*(t-n),P.y=e+y*(o-e),y>=0&&y<=1&&(P.onLine1=!0),b>=0&&b<=1&&(P.onLine2=!0),P.onLine1&&P.onLine2?[P.x,P.y]:!1)}var featureCollection=turfHelpers.featureCollection,centroid=turfCenter,distance$6=turfDistance,inside=turfInside,explode=turfExplode;function pointOnSurface(n){n.type!=="FeatureCollection"&&(n.type!=="Feature"&&(n={type:"Feature",geometry:n,properties:{}}),n=featureCollection([n]));for(var e=centroid(n),t=!1,o=0;!t&&o<n.features.length;){var l=n.features[o].geometry,d,h,g,m,y,b,w,E=!1;if(l.type==="Point")e.geometry.coordinates[0]===l.coordinates[0]&&e.geometry.coordinates[1]===l.coordinates[1]&&(t=!0);else if(l.type==="MultiPoint"){var P=!1;for(w=0;!P&&w<l.coordinates.length;)e.geometry.coordinates[0]===l.coordinates[w][0]&&e.geometry.coordinates[1]===l.coordinates[w][1]&&(t=!0,P=!0),w++}else if(l.type==="LineString")for(w=0;!E&&w<l.coordinates.length-1;)d=e.geometry.coordinates[0],h=e.geometry.coordinates[1],g=l.coordinates[w][0],m=l.coordinates[w][1],y=l.coordinates[w+1][0],b=l.coordinates[w+1][1],pointOnSegment(d,h,g,m,y,b)&&(E=!0,t=!0),w++;else if(l.type==="MultiLineString")for(var $=0;$<l.coordinates.length;){E=!1,w=0;for(var C=l.coordinates[$];!E&&w<C.length-1;)d=e.geometry.coordinates[0],h=e.geometry.coordinates[1],g=C[w][0],m=C[w][1],y=C[w+1][0],b=C[w+1][1],pointOnSegment(d,h,g,m,y,b)&&(E=!0,t=!0),w++;$++}else if(l.type==="Polygon"||l.type==="MultiPolygon"){var L={type:"Feature",geometry:l,properties:{}};inside(e,L)&&(t=!0)}o++}if(t)return e;var W=featureCollection([]);for(o=0;o<n.features.length;o++)W.features=W.features.concat(explode(n.features[o]).features);var Y,D=1/0;for(o=0;o<W.features.length;o++){var k=distance$6(e,W.features[o],"miles");k<D&&(D=k,Y=W.features[o])}return Y}function pointOnSegment(n,e,t,o,l,d){var h=Math.sqrt((l-t)*(l-t)+(d-o)*(d-o)),g=Math.sqrt((n-t)*(n-t)+(e-o)*(e-o)),m=Math.sqrt((l-n)*(l-n)+(d-e)*(d-e));if(h===g+m)return!0}var turfPointOnSurface=pointOnSurface,geojsonArea={},wgs84$1={};wgs84$1.RADIUS=6378137;wgs84$1.FLATTENING=1/298.257223563;wgs84$1.POLAR_RADIUS=63567523142e-4;var wgs84=wgs84$1;geojsonArea.geometry=geometry;geojsonArea.ring=ringArea;function geometry(n){var e=0,t;switch(n.type){case"Polygon":return polygonArea(n.coordinates);case"MultiPolygon":for(t=0;t<n.coordinates.length;t++)e+=polygonArea(n.coordinates[t]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(t=0;t<n.geometries.length;t++)e+=geometry(n.geometries[t]);return e}}function polygonArea(n){var e=0;if(n&&n.length>0){e+=Math.abs(ringArea(n[0]));for(var t=1;t<n.length;t++)e-=Math.abs(ringArea(n[t]))}return e}function ringArea(n){var e,t,o,l,d,h,g=0,m=n.length;if(m>2){for(i=0;i<m;i++)i===m-2?(l=m-2,d=m-1,h=0):i===m-1?(l=m-1,d=0,h=1):(l=i,d=i+1,h=i+2),e=n[l],t=n[d],o=n[h],g+=(rad(o[0])-rad(e[0]))*Math.sin(rad(t[1]));g=g*wgs84.RADIUS*wgs84.RADIUS/2}return g}function rad(n){return n*Math.PI/180}var geometryArea=geojsonArea.geometry;function area(n){if(n.type==="FeatureCollection"){for(var e=0,t=0;e<n.features.length;e++)n.features[e].geometry&&(t+=geometryArea(n.features[e].geometry));return t}else return n.type==="Feature"?geometryArea(n.geometry):geometryArea(n)}var turfArea=area,measureDistance=turfDistance,point$5=turfHelpers.point,bearing$1=turfBearing,destination$1=turfDestination,turfAlong=function(n,e,t){var o;if(n.type==="Feature")o=n.geometry.coordinates;else if(n.type==="LineString")o=n.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var l=0,d=0;d<o.length&&!(e>=l&&d===o.length-1);d++)if(l>=e){var h=e-l;if(h){var g=bearing$1(o[d],o[d-1])-180,m=destination$1(o[d],h,g,t);return m}else return point$5(o[d])}else l+=measureDistance(o[d],o[d+1],t);return point$5(o[o.length-1])},distance$5=turfDistance,point$4=turfHelpers.point,turfLineDistance=function n(e,t){if(e.type==="FeatureCollection")return e.features.reduce(function(g,m){return g+n(m,t)},0);var o=e.type==="Feature"?e.geometry:e,l,d;if(o.type==="LineString")return length(o.coordinates,t);if(o.type==="Polygon"||o.type==="MultiLineString"){for(l=0,d=0;d<o.coordinates.length;d++)l+=length(o.coordinates[d],t);return l}else if(e.type==="MultiPolygon"){for(l=0,d=0;d<o.coordinates.length;d++)for(var h=0;h<o.coordinates[d].length;h++)l+=length(o.coordinates[d][h],t);return l}else throw new Error("input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry (or a FeatureCollection containing only those types)")};function length(n,e){for(var t=0,o=point$4(n[0]),l=point$4(n[0]),d,h=1;h<n.length;h++)l.geometry.coordinates=n[h],t+=distance$5(o,l,e),d=o,o=l,l=d;return t}var distance$4=turfDistance,point$3=turfHelpers.point,bearing=turfBearing,destination=turfDestination,turfPointOnLine=function(n,e){var t;if(n.type==="Feature")t=n.geometry.coordinates;else if(n.type==="LineString")t=n.coordinates;else throw new Error("input must be a LineString Feature or Geometry");return pointOnLine$1(e,t)};function pointOnLine$1(n,e){for(var t="miles",o=point$3([1/0,1/0],{dist:1/0}),l=0;l<e.length-1;l++){var d=point$3(e[l]),h=point$3(e[l+1]);d.properties.dist=distance$4(n,d,t),h.properties.dist=distance$4(n,h,t);var g=Math.max(d.properties.dist,h.properties.dist),m=bearing(d,h),y=destination(n,g,m+90,t),b=destination(n,g,m-90,t),w=lineIntersects(y.geometry.coordinates[0],y.geometry.coordinates[1],b.geometry.coordinates[0],b.geometry.coordinates[1],d.geometry.coordinates[0],d.geometry.coordinates[1],h.geometry.coordinates[0],h.geometry.coordinates[1]),E;w&&(E=point$3(w),E.properties.dist=distance$4(n,E,t)),d.properties.dist<o.properties.dist&&(o=d,o.properties.index=l),h.properties.dist<o.properties.dist&&(o=h,o.properties.index=l),E&&E.properties.dist<o.properties.dist&&(o=E,o.properties.index=l)}return o}function lineIntersects(n,e,t,o,l,d,h,g){var m,y,b,w,E,P={x:null,y:null,onLine1:!1,onLine2:!1};return m=(g-d)*(t-n)-(h-l)*(o-e),m===0?P.x!==null&&P.y!==null?P:!1:(y=e-d,b=n-l,w=(h-l)*y-(g-d)*b,E=(t-n)*y-(o-e)*b,y=w/m,b=E/m,P.x=n+y*(t-n),P.y=e+y*(o-e),y>0&&y<1&&(P.onLine1=!0),b>0&&b<1&&(P.onLine2=!0),P.onLine1&&P.onLine2?[P.x,P.y]:!1)}var linestring=turfHelpers.lineString,pointOnLine=turfPointOnLine,turfLineSlice=function(e,t,o){var l;if(o.type==="Feature")l=o.geometry.coordinates;else if(o.type==="LineString")l=o.coordinates;else throw new Error("input must be a LineString Feature or Geometry");var d=pointOnLine(o,e),h=pointOnLine(o,t),g;d.properties.index<=h.properties.index?g=[d,h]:g=[h,d];for(var m=linestring([g[0].geometry.coordinates],{}),y=g[0].properties.index+1;y<g[1].properties.index+1;y++)m.geometry.coordinates.push(l[y]);return m.geometry.coordinates.push(g[1].geometry.coordinates),m},point$2=turfHelpers.point,featurecollection$3=turfHelpers.featureCollection,distance$3=turfDistance,turfPointGrid=function(e,t,o){for(var l=featurecollection$3([]),d=t/distance$3(point$2([e[0],e[1]]),point$2([e[2],e[1]]),o),h=d*(e[2]-e[0]),g=t/distance$3(point$2([e[0],e[1]]),point$2([e[0],e[3]]),o),m=g*(e[3]-e[1]),y=e[0];y<=e[2];){for(var b=e[1];b<=e[3];)l.features.push(point$2([y,b])),b+=m;y+=h}return l},featurecollection$2=turfHelpers.featureCollection,point$1=turfHelpers.point,polygon$2=turfHelpers.polygon,distance$2=turfDistance,turfSquareGrid=function(e,t,o){for(var l=featurecollection$2([]),d=t/distance$2(point$1([e[0],e[1]]),point$1([e[2],e[1]]),o),h=d*(e[2]-e[0]),g=t/distance$2(point$1([e[0],e[1]]),point$1([e[0],e[3]]),o),m=g*(e[3]-e[1]),y=e[0];y<=e[2];){for(var b=e[1];b<=e[3];){var w=polygon$2([[[y,b],[y,b+m],[y+h,b+m],[y+h,b],[y,b]]]);l.features.push(w),b+=m}y+=h}return l},featurecollection$1=turfHelpers.featureCollection,polygon$1=turfHelpers.polygon,distance$1=turfDistance,turfTriangleGrid=function(n,e,t){for(var o=featurecollection$1([]),l=e/distance$1([n[0],n[1]],[n[2],n[1]],t),d=l*(n[2]-n[0]),h=e/distance$1([n[0],n[1]],[n[0],n[3]],t),g=h*(n[3]-n[1]),m=0,y=n[0];y<=n[2];){for(var b=0,w=n[1];w<=n[3];)m%2===0&&b%2===0?o.features.push(polygon$1([[[y,w],[y,w+g],[y+d,w],[y,w]]]),polygon$1([[[y,w+g],[y+d,w+g],[y+d,w],[y,w+g]]])):m%2===0&&b%2===1?o.features.push(polygon$1([[[y,w],[y+d,w+g],[y+d,w],[y,w]]]),polygon$1([[[y,w],[y,w+g],[y+d,w+g],[y,w]]])):b%2===0&&m%2===1?o.features.push(polygon$1([[[y,w],[y,w+g],[y+d,w+g],[y,w]]]),polygon$1([[[y,w],[y+d,w+g],[y+d,w],[y,w]]])):b%2===1&&m%2===1&&o.features.push(polygon$1([[[y,w],[y,w+g],[y+d,w],[y,w]]]),polygon$1([[[y,w+g],[y+d,w+g],[y+d,w],[y,w+g]]])),w+=g,b++;m++,y+=d}return o},point=turfHelpers.point,polygon=turfHelpers.polygon,distance=turfDistance,featurecollection=turfHelpers.featureCollection,cosines=[],sines=[];for(var i$2=0;i$2<6;i$2++){var angle=2*Math.PI/6*i$2;cosines.push(Math.cos(angle)),sines.push(Math.sin(angle))}var turfHexGrid=function(e,t,o,l){var d=t/distance(point([e[0],e[1]]),point([e[2],e[1]]),o),h=d*(e[2]-e[0]),g=t/distance(point([e[0],e[1]]),point([e[0],e[3]]),o),m=g*(e[3]-e[1]),y=h/2,b=y*2,w=Math.sqrt(3)/2*m,E=e[2]-e[0],P=e[3]-e[1],$=3/4*b,C=w,L=E/(b-y/2),W=Math.ceil(L);Math.round(L)===W&&W++;var Y=(W*$-y/2-E)/2-y/2,D=Math.ceil(P/w),k=(P-D*w)/2,F=D*w-P>w/2;F&&(k-=w/4);for(var ce=featurecollection([]),q=0;q<W;q++)for(var te=0;te<=D;te++){var Q=q%2===1;if(!(te===0&&Q)&&!(te===0&&F)){var ie=q*$+e[0]-Y,J=te*C+e[1]+k;Q&&(J-=w/2),l?ce.features.push.apply(ce.features,hexTriangles([ie,J],h/2,m/2)):ce.features.push(hexagon([ie,J],h/2,m/2))}}return ce};function hexagon(n,e,t){for(var o=[],l=0;l<6;l++){var d=n[0]+e*cosines[l],h=n[1]+t*sines[l];o.push([d,h])}return o.push(o[0]),polygon([o])}function hexTriangles(n,e,t){for(var o=[],l=0;l<6;l++){var d=[];d.push(n),d.push([n[0]+e*cosines[l],n[1]+t*sines[l]]),d.push([n[0]+e*cosines[(l+1)%6],n[1]+t*sines[(l+1)%6]]),d.push(n),o.push(polygon([d]))}return o}turf$1.exports={isolines:turfIsolines,convex:turfConvex,within:turfWithin,concave:turfConcave,difference:turfDifference,collect:turfCollect,flip:turfFlip,simplify:turfSimplify,bezier:turfBezier,tag:turfTag,sample:turfSample,envelope:turfEnvelope,square:turfSquare,midpoint:turfMidpoint,buffer:turfBuffer,center:turfCenter,centroid:turfCentroid,combine:turfCombine,distance:turfDistance,explode:turfExplode,bbox:turfBbox,tesselate:turfTesselate,bboxPolygon:turfBboxPolygon,inside:turfInside,intersect:turfIntersect,nearest:turfNearest,planepoint:turfPlanepoint,random:turfRandom,tin:turfTin,union:turfUnion,bearing:turfBearing,destination:turfDestination,kinks:turfKinks,pointOnSurface:turfPointOnSurface,area:turfArea,along:turfAlong,lineDistance:turfLineDistance,lineSlice:turfLineSlice,pointOnLine:turfPointOnLine,pointGrid:turfPointGrid,squareGrid:turfSquareGrid,triangleGrid:turfTriangleGrid,hexGrid:turfHexGrid};var helpers=turfHelpers;turfExports.point=helpers.point;turfExports.polygon=helpers.polygon;turfExports.lineString=helpers.lineString;turfExports.multiPoint=helpers.multiPoint;turfExports.multiPolygon=helpers.multiPolygon;turfExports.multiLineString=helpers.multiLineString;turfExports.feature=helpers.feature;turfExports.featureCollection=helpers.featureCollection;turfExports.geometryCollection=helpers.geometryCollection;var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(n,e,t,o){o===void 0&&(o=t),Object.defineProperty(n,o,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,o){o===void 0&&(o=t),n[o]=e[t]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&__createBinding(e,n,t);return __setModuleDefault(e,n),e},__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(n,e,t,o){function l(d){return d instanceof t?d:new t(function(h){h(d)})}return new(t||(t=Promise))(function(d,h){function g(b){try{y(o.next(b))}catch(w){h(w)}}function m(b){try{y(o.throw(b))}catch(w){h(w)}}function y(b){b.done?d(b.value):l(b.value).then(g,m)}y((o=o.apply(n,e||[])).next())})};Object.defineProperty(CountryCoder$1,"__esModule",{value:!0});CountryCoder$1.CountryCoder=void 0;const turf=__importStar(turfExports);class CountryCoder{constructor(e,t){this._host=e,this._downloadFunction=t}GetCountryCodeAsync(e,t){return __awaiter$1(this,void 0,void 0,function*(){return this.GetCountryCodeForTile(e,t,0,0,0)})}GetCountryCodeFor(e,t,o){this.GetCountryCodeAsync(e,t).then(o)}static lon2tile(e,t){return Math.floor((e+180)/360*Math.pow(2,t))}static lat2tile(e,t){return Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,t))}static FetchJsonXhr(e){return new Promise((t,o)=>{const l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="json",l.onload=function(){var d=l.status;d===200?t(l.response):(console.error("COULD NOT GET ",e),o(e))},l.send()})}Fetch(e,t,o){return __awaiter$1(this,void 0,void 0,function*(){const l=`${e}.${t}.${o}.json`,d=this._host+"/"+l;return this._downloadFunction!==void 0?this._downloadFunction(d):CountryCoder.FetchJsonXhr(d)})}FetchCached(e,t,o){return __awaiter$1(this,void 0,void 0,function*(){const l=`${e}.${t}.${o}.json`;let d=CountryCoder.cache.get(l);if(d!==void 0)return d;const h=this.Fetch(e,t,o);return CountryCoder.cache.set(l,h),h})}GetCountryCodeForTile(e,t,o,l,d){return __awaiter$1(this,void 0,void 0,function*(){const h=yield this.FetchCached(o,l,d);if(h===void 0)throw`Got undefined for ${o}, ${l}, ${d}`;if(h.length===void 0){const E=h,P=[];for(const $ of E.features)if(turf.inside(turf.point([e,t]),$)){const L=$.properties.country;P.push(L)}return P.sort(),P}if(h.length===1)return h;const g=CountryCoder.lon2tile(e,o+1),m=CountryCoder.lat2tile(t,o+1),y=g-l*2+2*(m-d*2),b=h[y];if(b===0)return[];const w=Number(b);return isNaN(w)?[b]:this.GetCountryCodeForTile(e,t,w,CountryCoder.lon2tile(e,w),CountryCoder.lat2tile(t,w))})}}CountryCoder$1.CountryCoder=CountryCoder;CountryCoder.cache=new Map;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CountryCoder=void 0;var e=CountryCoder$1;Object.defineProperty(n,"CountryCoder",{enumerable:!0,get:function(){return e.CountryCoder}})})(dist$1);const polygon_features=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}],Wn=class{constructor(e,t){ge(this,"type");ge(this,"id");ge(this,"tags");ge(this,"version");ge(this,"changed",!1);ge(this,"timestamp");this.id=t,this.type=e,this.tags={id:`${this.type}/${t}`}}static SetBackendUrl(e){if(!e.endsWith("/"))throw"Backend URL must end with a '/'";if(!e.startsWith("http"))throw"Backend URL must begin with http";this.backendURL=e}static DownloadObject(e,t=!1){let o;if(Wn.objectCache.has(e))if(o=Wn.objectCache.get(e),t)o.setData(void 0);else return o;else o=UIEventSource.FromPromise(Wn.DownloadObjectAsync(e));return Wn.objectCache.set(e,o),o}static async DownloadPropertiesOf(e){const t=e.split("/");if(Number(t[1])<0)return;const l=`${Wn.backendURL}api/0.6/${e}`,d=await Utils.downloadJsonCachedAdvanced(l,1e3);return d.error!==void 0&&d.statuscode===410?"deleted":d.content.elements[0].tags}static async DownloadObjectAsync(e,t){const o=e.split("/"),l=o[0],d=Number(o[1]);if(d<0)return;const h=e.startsWith("node")?"":"/full",g=`${Wn.backendURL}api/0.6/${e}${h}`,m=await Utils.downloadJsonCached(g,(t??10)*1e3);if(m===void 0)return;const y=Wn.ParseObjects(m.elements);for(const b of y)if(b.type===l&&b.id===d)return b;throw"PANIC: requested object is not part of the response"}static DownloadReferencingWays(e){return Utils.downloadJsonCached(`${Wn.backendURL}api/0.6/${e}/ways`,60*1e3).then(t=>t.elements.map(o=>{const l=new OsmWay(o.id);return l.LoadData(o),l}))}static async DownloadReferencingRelations(e){return(await Utils.downloadJsonCached(`${Wn.backendURL}api/0.6/${e}/relations`,6e4)).elements.map(o=>{const l=new OsmRelation(o.id);return l.LoadData(o),l.SaveExtraData(o,void 0),l})}static DownloadHistory(e){if(Wn.historyCache.has(e))return Wn.historyCache.get(e);const t=e.split("/"),o=t[0],l=Number(t[1]),d=new UIEventSource([]);return Wn.historyCache.set(e,d),Utils.downloadJsonCached(`${Wn.backendURL}api/0.6/${o}/${l}/history`,10*60*1e3).then(h=>{const g=h.elements,m=[];for(const y of g){let b=null;switch(y.nodes=[],o){case"node":b=new OsmNode(l);break;case"way":b=new OsmWay(l);break;case"relation":b=new OsmRelation(l);break}b==null||b.LoadData(y),b==null||b.SaveExtraData(y,[]),m.push(b)}d.setData(m)}),d}static async LoadArea(e){const t=`${Wn.backendURL}api/0.6/map.json?bbox=${e.minLon},${e.minLat},${e.maxLon},${e.maxLat}`,l=(await Utils.downloadJson(t)).elements;return Wn.ParseObjects(l)}static ParseObjects(e){const t=[],o=new Map;for(const l of e){const d=l.type,h=l.id;let g=null;switch(d){case"node":const m=new OsmNode(h);o.set(h,m),g=m,m.SaveExtraData(l);break;case"way":g=new OsmWay(h);const y=l.nodes.map(E=>o.get(E));g.SaveExtraData(l,y);break;case"relation":g=new OsmRelation(h);const w=osmtogeojson_1({elements:e},{flatProperties:!0}).features.find(E=>E.id===g.type+"/"+g.id);g.SaveExtraData(l,w);break}g!==void 0&&Wn.backendURL!==Wn.defaultBackend&&(g.tags._backend=Wn.backendURL),g==null||g.LoadData(l),t.push(g)}return t}static isPolygon(e){for(const t in e){if(!e.hasOwnProperty(t))continue;const o=Wn.polygonFeatures.get(t);if(o===void 0)continue;if(o.values===null)return!o.blacklist;const l=o.values.has(e[t]);return o.blacklist?!l:l}return!1}static constructPolygonFeatures(){const e=new Map;for(const t of polygon_features){const o=t.key;if(t.polygon==="all"){e.set(o,{values:null,blacklist:!1});continue}const l=t.polygon==="blacklist";e.set(o,{values:new Set(t.values),blacklist:l})}return e}TagsXML(){let e="";for(const t in this.tags){if(t.startsWith("_")||t==="id")continue;const o=this.tags[t];o!==""&&o!==void 0&&(e+='        <tag k="'+Utils.EncodeXmlValue(t)+'" v="'+Utils.EncodeXmlValue(this.tags[t])+`"/>
`)}return e}VersionXML(){return this.version===void 0?"":'version="'+this.version+'"'}LoadData(e){this.tags=e.tags??this.tags,this.version=e.version,this.timestamp=e.timestamp;const t=this.tags;e.tags!==void 0&&(t["_last_edit:contributor"]=e.user,t["_last_edit:contributor:uid"]=e.uid,t["_last_edit:changeset"]=e.changeset,t["_last_edit:timestamp"]=e.timestamp,t._version_number=e.version,t.id=this.type+"/"+this.id)}};let OsmObject=Wn;ge(OsmObject,"defaultBackend","https://www.openstreetmap.org/"),ge(OsmObject,"backendURL",Wn.defaultBackend),ge(OsmObject,"polygonFeatures",Wn.constructPolygonFeatures()),ge(OsmObject,"objectCache",new Map),ge(OsmObject,"historyCache",new Map);class OsmNode extends OsmObject{constructor(t){super("node",t);ge(this,"lat");ge(this,"lon")}ChangesetXML(t){let o=this.TagsXML();return'    <node id="'+this.id+'" changeset="'+t+'" '+this.VersionXML()+' lat="'+this.lat+'" lon="'+this.lon+`">
`+o+`    </node>
`}SaveExtraData(t){this.lat=t.lat,this.lon=t.lon}centerpoint(){return[this.lat,this.lon]}asGeoJson(){return{type:"Feature",properties:this.tags,geometry:{type:"Point",coordinates:[this.lon,this.lat]}}}}class OsmWay extends OsmObject{constructor(t){super("way",t);ge(this,"nodes",[]);ge(this,"coordinates",[]);ge(this,"lat");ge(this,"lon")}centerpoint(){return[this.lat,this.lon]}ChangesetXML(t){let o=this.TagsXML(),l="";for(const d in this.nodes)l+='      <nd ref="'+this.nodes[d]+`"/>
`;return'    <way id="'+this.id+'" changeset="'+t+'" '+this.VersionXML()+`>
`+l+o+`    </way>
`}SaveExtraData(t,o){let l=0,d=0;const h=new Map;for(const m of o)h.set(m.id,m);t.nodes===void 0&&console.error("PANIC: no nodes!");for(const m of t.nodes){const y=h.get(m);if(y===void 0){console.error("Error: node ",m,"not found in ",h);continue}this.coordinates.push(y.centerpoint()),l+=y.lat,d+=y.lon}let g=this.coordinates.length;this.lat=l/g,this.lon=d/g,this.nodes=t.nodes}asGeoJson(){let t=this.coordinates.map(([l,d])=>[d,l]),o;return this.isPolygon()?o={type:"Polygon",coordinates:[t]}:o={type:"LineString",coordinates:t},{type:"Feature",properties:this.tags,geometry:o}}isPolygon(){return this.coordinates[0][0]!==this.coordinates[this.coordinates.length-1][0]||this.coordinates[0][1]!==this.coordinates[this.coordinates.length-1][1]?!1:OsmObject.isPolygon(this.tags)}}class OsmRelation extends OsmObject{constructor(t){super("relation",t);ge(this,"members");ge(this,"geojson")}centerpoint(){return[0,0]}ChangesetXML(t){let o="";for(const h of this.members)o+='      <member type="'+h.type+'" ref="'+h.ref+'" role="'+h.role+`"/>
`;let l=this.TagsXML(),d="";return t!==void 0&&(d=`changeset="${t}"`),`    <relation id="${this.id}" ${d} ${this.VersionXML()}>
${o}${l}        </relation>
`}SaveExtraData(t,o){this.members=t.members,this.geojson=o}asGeoJson(){if(this.geojson!==void 0)return this.geojson;throw"Not Implemented"}}class SimpleMetaTagger{constructor(e,t){ge(this,"keys");ge(this,"doc");ge(this,"isLazy");ge(this,"includesDates");ge(this,"applyMetaTagsOnFeature");if(this.keys=e.keys,this.doc=e.doc,this.isLazy=e.isLazy,this.applyMetaTagsOnFeature=t,this.includesDates=e.includesDates??!1,!e.cleanupRetagger){for(const o of e.keys)if(!o.startsWith("_")&&o.toLowerCase().indexOf("theme")<0)throw`Incorrect key for a calculated meta value '${o}': it should start with underscore (_)`}}}class ReferencingWaysMetaTagger extends SimpleMetaTagger{constructor(){super({keys:["_referencing_ways"],isLazy:!0,doc:"_referencing_ways contains - for a node - which ways use this this node as point in their geometry. If the preset has 'snapToLayer' defined, the icon will be calculated based on the preset tags with `_referencing_ways=[\"way/-1\"]` added."},(e,t,o,l)=>{var g;const d=e.properties.id;if(!d.startsWith("node/"))return!1;const h=(g=l.allElements)==null?void 0:g.getEventSourceById(d);if(h!==void 0)return Utils.AddLazyPropertyAsync(h.data,"_referencing_ways",async()=>{const y=(await OsmObject.DownloadReferencingWays(d)).map(w=>"way/"+w.id);y.sort();const b=y.join(";");b!==""&&h.data[""]!==b&&(h.data._referencing_ways=b,h.ping())}),!0})}}ge(ReferencingWaysMetaTagger,"enabled",!0);const uo=class extends SimpleMetaTagger{constructor(){const t=new Set;super({keys:["_country"],doc:"The country code of the property (with latlon2country)",includesDates:!1},(o,l,d,h)=>{let g=GeoOperations.centerpoint(o);const m=g.geometry.coordinates[1],y=g.geometry.coordinates[0];return t.add(o),uo.coder.GetCountryCodeAsync(y,m).then(b=>{var w;t.delete(o);try{const E=o.properties._country;if(o.properties._country=b[0].trim().toLowerCase(),E!==o.properties._country){const P=(w=h==null?void 0:h.allElements)==null?void 0:w.getEventSourceById(o.properties.id);P==null||P.ping()}}catch(E){console.warn(E)}}).catch(b=>{t.delete(o)}),!1});ge(this,"runningTasks");this.runningTasks=t}};let CountryTagger=uo;ge(CountryTagger,"coder",new dist$1.CountryCoder(Constants.countryCoderEndpoint,Utils.downloadJson));const jn=class{static removeBothTagging(e){let t=!1;function o(d,h){(e[d]===void 0||e[d]==="")&&(e[d]=h,t=!0)}if(e.sidewalk){const d=e.sidewalk;switch(d){case"none":case"no":o("sidewalk:left","no"),o("sidewalk:right","no");break;case"both":o("sidewalk:left","yes"),o("sidewalk:right","yes");break;case"left":o("sidewalk:left","yes"),o("sidewalk:right","no");break;case"right":o("sidewalk:left","no"),o("sidewalk:right","yes");break;default:o("sidewalk:left",d),o("sidewalk:right",d);break}delete e.sidewalk,t=!0}const l=/\([^:]*\):both:\(.*\)/;for(const d in e){const h=e[d];if(d.endsWith(":both")){const m=d.substring(0,d.length-5);o(m+":left",h),o(m+":right",h),delete e[d];continue}const g=d.match(l);if(g!==null){const m=g[1],y=g[1];o(m+":left:"+y,h),o(m+":right:"+y,h),console.log("Left-right rewritten "+d),delete e[d]}}return t}static HelpText(){const e=[new Combine(["Metatags are extra tags available, in order to display more data or to give better questions.","They are calculated automatically on every feature when the data arrives in the webbrowser. This document gives an overview of the available metatags.","**Hint:** when using metatags, add the [query parameter](URL_Parameters.md) `debug=true` to the URL. This will include a box in the popup for features which shows all the properties of the object"]).SetClass("flex-col")];e.push(new Title$1("Metatags calculated by MapComplete",2)),e.push(new FixedUiElement("The following values are always calculated, by default, by MapComplete and are available automatically on all elements in every theme"));for(const t of jn.metatags)e.push(new Title$1(t.keys.join(", "),3),t.doc,t.isLazy?"This is a lazy metatag and is only calculated when needed":"");return new Combine(e).SetClass("flex-col")}};let SimpleMetaTaggers=jn;ge(SimpleMetaTaggers,"objectMetaInfo",new SimpleMetaTagger({keys:["_last_edit:contributor","_last_edit:contributor:uid","_last_edit:changeset","_last_edit:timestamp","_version_number","_backend"],doc:"Information about the last edit of this object."},e=>{const t=e.properties;let o=!1;function l(d,h){t[d]!==void 0&&(t[h]=t[d],delete t[d],o=!0)}return l("user","_last_edit:contributor"),l("uid","_last_edit:contributor:uid"),l("changeset","_last_edit:changeset"),l("timestamp","_last_edit:timestamp"),l("version","_version_number"),o})),ge(SimpleMetaTaggers,"country",new CountryTagger),ge(SimpleMetaTaggers,"geometryType",new SimpleMetaTagger({keys:["_geometry:type"],doc:"Adds the geometry type as property. This is identical to the GoeJson geometry type and is one of `Point`,`LineString`, `Polygon` and exceptionally `MultiPolygon` or `MultiLineString`"},(e,t)=>{const o=e.properties["_geometry:type"]===e.geometry.type;return e.properties["_geometry:type"]=e.geometry.type,o})),ge(SimpleMetaTaggers,"cardinalDirections",{N:0,NNE:22.5,NE:45,ENE:67.5,E:90,ESE:112.5,SE:135,SSE:157.5,S:180,SSW:202.5,SW:225,WSW:247.5,W:270,WNW:292.5,NW:315,NNW:337.5}),ge(SimpleMetaTaggers,"latlon",new SimpleMetaTagger({keys:["_lat","_lon"],doc:"The latitude and longitude of the point (or centerpoint in the case of a way/area)"},e=>{const t=GeoOperations.centerpoint(e),o=t.geometry.coordinates[1],l=t.geometry.coordinates[0];return e.properties._lat=""+o,e.properties._lon=""+l,e._lon=l,e._lat=o,!0})),ge(SimpleMetaTaggers,"layerInfo",new SimpleMetaTagger({doc:"The layer-id to which this feature belongs. Note that this might be return any applicable if `passAllFeatures` is defined.",keys:["_layer"],includesDates:!1},(e,t,o)=>e.properties._layer===o.id?!1:(e.properties._layer=o.id,!0))),ge(SimpleMetaTaggers,"noBothButLeftRight",new SimpleMetaTagger({keys:["sidewalk:left","sidewalk:right","generic_key:left:property","generic_key:right:property"],doc:"Rewrites tags from 'generic_key:both:property' as 'generic_key:left:property' and 'generic_key:right:property' (and similar for sidewalk tagging). Note that this rewritten tags _will be reuploaded on a change_. To prevent to much unrelated retagging, this is only enabled if the layer has at least some lineRenderings with offset defined",includesDates:!1,cleanupRetagger:!0},(e,t,o)=>{if(o.lineRendering.some(l=>l.leftRightSensitive))return jn.removeBothTagging(e.properties)})),ge(SimpleMetaTaggers,"surfaceArea",new SimpleMetaTagger({keys:["_surface","_surface:ha"],doc:"The surface area of the feature, in square meters and in hectare. Not set on points and ways",isLazy:!0},e=>(Object.defineProperty(e.properties,"_surface",{enumerable:!1,configurable:!0,get:()=>{const t=""+GeoOperations.surfaceAreaInSqMeters(e);return delete e.properties._surface,e.properties._surface=t,t}}),Utils.AddLazyProperty(e.properties,"_surface:ha",()=>{const t=GeoOperations.surfaceAreaInSqMeters(e);return""+Math.floor(t/1e3)/10}),!0))),ge(SimpleMetaTaggers,"levels",new SimpleMetaTagger({doc:"Extract the 'level'-tag into a normalized, ';'-separated value",keys:["_level"]},e=>{if(e.properties.level===void 0)return!1;const t=e.properties.level,o=TagUtils.LevelsParser(t).join(";");return t===o?!1:(e.properties.level=o,!0)})),ge(SimpleMetaTaggers,"canonicalize",new SimpleMetaTagger({doc:"If 'units' is defined in the layoutConfig, then this metatagger will rewrite the specified keys to have the canonical form (e.g. `1meter` will be rewritten to `1m`; `1` will be rewritten to `1m` as well)",keys:["Theme-defined keys"]},(e,t,o,l)=>{var g,m;const d=Utils.NoNull([].concat(...((m=(g=l==null?void 0:l.layoutToUse)==null?void 0:g.layers)==null?void 0:m.map(y=>y.units))??[]));if(d.length==0)return;let h=!1;for(const y in e.properties)if(e.properties.hasOwnProperty(y))for(const b of d){if(b===void 0)continue;if(b.appliesToKeys===void 0){console.error("The unit ",b,"has no appliesToKey defined");continue}if(!b.appliesToKeys.has(y))continue;const w=e.properties[y],E=b.findDenomination(w,()=>e.properties._country);if(E===void 0)break;const[,P]=E,$=b.getDefaultDenomination(()=>e.properties._country);let C=(P==null?void 0:P.canonicalValue(w,$==P))??void 0;if(C===w||(console.log("Rewritten ",y,` from '${w}' into '${C}'`),C===void 0&&!b.eraseInvalid))break;e.properties[y]=C,h=!0;break}return h})),ge(SimpleMetaTaggers,"lngth",new SimpleMetaTagger({keys:["_length","_length:km"],doc:"The total length of a feature in meters (and in kilometers, rounded to one decimal for '_length:km'). For a surface, the length of the perimeter"},e=>{const t=GeoOperations.lengthInMeters(e);e.properties._length=""+t;const o=Math.floor(t/1e3),l=Math.round((t-o*1e3)/100);return e.properties["_length:km"]=""+o+"."+l,!0})),ge(SimpleMetaTaggers,"isOpen",new SimpleMetaTagger({keys:["_isOpen"],doc:"If 'opening_hours' is present, it will add the current state of the feature (being 'yes' or 'no')",includesDates:!0,isLazy:!0},(e,t,o,l)=>{if(Utils.runningFromConsole)return!1;if(e.properties.opening_hours==="24/7")return e.properties._isOpen="yes",!0;Object.defineProperty(e.properties,"_isOpen",{enumerable:!1,configurable:!0,get:()=>{const d=e.properties;if(d.opening_hours!==void 0&&d._country!==void 0)try{const[h,g]=GeoOperations.centerpointCoordinates(e);return new opening_hoursExports(d.opening_hours,{lat:g,lon:h,address:{country_code:d._country.toLowerCase(),state:void 0}},{tag_key:"opening_hours"}).getState()?"yes":"no"}catch(h){console.warn("Error while parsing opening hours of ",d.id,h),delete d._isOpen,d._isOpen="parse_error"}}})})),ge(SimpleMetaTaggers,"directionSimplified",new SimpleMetaTagger({keys:["_direction:numerical","_direction:leftright"],doc:"_direction:numerical is a normalized, numerical direction based on 'camera:direction' or on 'direction'; it is only present if a valid direction is found (e.g. 38.5 or NE). _direction:leftright is either 'left' or 'right', which is left-looking on the map or 'right-looking' on the map"},e=>{const t=e.properties,o=t["camera:direction"]??t.direction;if(o===void 0)return!1;const l=jn.cardinalDirections[o]??Number(o);if(isNaN(l))return!1;const d=(l%360+360)%360;return t["_direction:numerical"]=d,t["_direction:leftright"]=d<=180?"right":"left",!0})),ge(SimpleMetaTaggers,"directionCenterpoint",new SimpleMetaTagger({keys:["_direction:centerpoint"],isLazy:!0,doc:"_direction:centerpoint is the direction of the linestring (in degrees) if one were standing at the projected centerpoint."},e=>{if(e.geometry.type!=="LineString")return!1;const t=e;return Object.defineProperty(e.properties,"_direction:centerpoint",{enumerable:!1,configurable:!0,get:()=>{const o=GeoOperations.centerpoint(e),l=GeoOperations.nearestPoint(t,o.geometry.coordinates),d=t.geometry.coordinates[l.properties.index+1],h=GeoOperations.bearing(l.geometry.coordinates,d);return delete e.properties["_direction:centerpoint"],e.properties["_direction:centerpoint"]=h,h}}),!0})),ge(SimpleMetaTaggers,"currentTime",new SimpleMetaTagger({keys:["_now:date","_now:datetime","_loaded:date","_loaded:_datetime"],doc:"Adds the time that the data got loaded - pretty much the time of downloading from overpass. The format is YYYY-MM-DD hh:mm, aka 'sortable' aka ISO-8601-but-not-entirely",includesDates:!0},(e,t)=>{const o=new Date;typeof t=="string"&&(t=new Date(t));function l(h){return h.toISOString().slice(0,10)}function d(h){return h.toISOString().slice(0,-5).replace("T"," ")}return e.properties["_now:date"]=l(o),e.properties["_now:datetime"]=d(o),e.properties["_loaded:date"]=l(t),e.properties["_loaded:datetime"]=d(t),!0})),ge(SimpleMetaTaggers,"referencingWays",new ReferencingWaysMetaTagger),ge(SimpleMetaTaggers,"metatags",[jn.latlon,jn.layerInfo,jn.surfaceArea,jn.lngth,jn.canonicalize,jn.country,jn.isOpen,jn.directionSimplified,jn.directionCenterpoint,jn.currentTime,jn.objectMetaInfo,jn.noBothButLeftRight,jn.geometryType,jn.levels,jn.referencingWays]),ge(SimpleMetaTaggers,"lazyTags",[].concat(...jn.metatags.filter(e=>e.isLazy).map(e=>e.keys)));class ChangeDescriptionTools{static rewriteIds(e,t){const o=e.type+"/"+e.id,l=((e.changes??{}).nodes??[]).some(g=>t.has("node/"+g)),d=((e.changes??{}).members??[]).some(g=>t.has(g.type+"/"+g.ref));if((t.has(o)||l||d)&&(e={...e}),t.has(o)){const[g,m]=t.get(o).split("/");e.id=Number.parseInt(m)}return l&&(e.changes={...e.changes},e.changes.nodes=e.changes.nodes.map(g=>{const m="node/"+g;if(!t.has(m))return g;const[y,b]=t.get(m).split("/");return Number.parseInt(b)})),d&&(e.changes={...e.changes},e.changes.members=e.changes.members.map(g=>{const m=g.type+"/"+g.ref;if(!t.has(m))return g;const[y,b]=t.get(m).split("/");return{...g,ref:Number.parseInt(b)}})),e}static getGeojsonGeometry(e){switch(e.type){case"node":const t=new OsmNode(e.id);return t.lat=e.changes.lat,t.lon=e.changes.lon,t.asGeoJson().geometry;case"way":const o=new OsmWay(e.id);return o.nodes=e.changes.nodes,o.coordinates=e.changes.coordinates.map(([d,h])=>[h,d]),o.asGeoJson().geometry;case"relation":const l=new OsmRelation(e.id);return l.members=e.changes.members,l.asGeoJson().geometry}}}var hashesExports={},hashes$1={get exports(){return hashesExports},set exports(n){hashesExports=n}};(function(n,e){(function(){var t;function o($){var C,L,W="",Y=-1,D;if($&&$.length)for(D=$.length;(Y+=1)<D;)C=$.charCodeAt(Y),L=Y+1<D?$.charCodeAt(Y+1):0,55296<=C&&C<=56319&&56320<=L&&L<=57343&&(C=65536+((C&1023)<<10)+(L&1023),Y+=1),C<=127?W+=String.fromCharCode(C):C<=2047?W+=String.fromCharCode(192|C>>>6&31,128|C&63):C<=65535?W+=String.fromCharCode(224|C>>>12&15,128|C>>>6&63,128|C&63):C<=2097151&&(W+=String.fromCharCode(240|C>>>18&7,128|C>>>12&63,128|C>>>6&63,128|C&63));return W}function l($){var C,L,W,Y,D,k=[],F;if(C=L=W=Y=D=0,$&&$.length)for(F=$.length,$+="";C<F;)W=$.charCodeAt(C),L+=1,W<128?(k[L]=String.fromCharCode(W),C+=1):W>191&&W<224?(Y=$.charCodeAt(C+1),k[L]=String.fromCharCode((W&31)<<6|Y&63),C+=2):(Y=$.charCodeAt(C+1),D=$.charCodeAt(C+2),k[L]=String.fromCharCode((W&15)<<12|(Y&63)<<6|D&63),C+=3);return k.join("")}function d($,C){var L=($&65535)+(C&65535),W=($>>16)+(C>>16)+(L>>16);return W<<16|L&65535}function h($,C){return $<<C|$>>>32-C}function g($,C){for(var L=C?"0123456789ABCDEF":"0123456789abcdef",W="",Y,D=0,k=$.length;D<k;D+=1)Y=$.charCodeAt(D),W+=L.charAt(Y>>>4&15)+L.charAt(Y&15);return W}function m($){var C,L=$.length*32,W="";for(C=0;C<L;C+=8)W+=String.fromCharCode($[C>>5]>>>24-C%32&255);return W}function y($){var C,L=$.length*32,W="";for(C=0;C<L;C+=8)W+=String.fromCharCode($[C>>5]>>>C%32&255);return W}function b($){var C,L=$.length*8,W=Array($.length>>2),Y=W.length;for(C=0;C<Y;C+=1)W[C]=0;for(C=0;C<L;C+=8)W[C>>5]|=($.charCodeAt(C/8)&255)<<C%32;return W}function w($){var C,L=$.length*8,W=Array($.length>>2),Y=W.length;for(C=0;C<Y;C+=1)W[C]=0;for(C=0;C<L;C+=8)W[C>>5]|=($.charCodeAt(C/8)&255)<<24-C%32;return W}function E($,C){var L=C.length,W=Array(),Y,D,k,F,ce,q,te,Q;for(q=Array(Math.ceil($.length/2)),F=q.length,Y=0;Y<F;Y+=1)q[Y]=$.charCodeAt(Y*2)<<8|$.charCodeAt(Y*2+1);for(;q.length>0;){for(ce=Array(),k=0,Y=0;Y<q.length;Y+=1)k=(k<<16)+q[Y],D=Math.floor(k/L),k-=D*L,(ce.length>0||D>0)&&(ce[ce.length]=D);W[W.length]=k,q=ce}for(te="",Y=W.length-1;Y>=0;Y--)te+=C.charAt(W[Y]);for(Q=Math.ceil($.length*8/(Math.log(C.length)/Math.log(2))),Y=te.length;Y<Q;Y+=1)te=C[0]+te;return te}function P($,C){var L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W="",Y=$.length,D,k,F;for(C=C||"=",D=0;D<Y;D+=3)for(F=$.charCodeAt(D)<<16|(D+1<Y?$.charCodeAt(D+1)<<8:0)|(D+2<Y?$.charCodeAt(D+2):0),k=0;k<4;k+=1)D*8+k*6>$.length*8?W+=C:W+=L.charAt(F>>>6*(3-k)&63);return W}t={VERSION:"1.0.6",Base64:function(){var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C="=",L=!0;this.encode=function(W){var Y,D,k,F="",ce=W.length;for(C=C||"=",W=L?o(W):W,Y=0;Y<ce;Y+=3)for(k=W.charCodeAt(Y)<<16|(Y+1<ce?W.charCodeAt(Y+1)<<8:0)|(Y+2<ce?W.charCodeAt(Y+2):0),D=0;D<4;D+=1)Y*8+D*6>ce*8?F+=C:F+=$.charAt(k>>>6*(3-D)&63);return F},this.decode=function(W){var Y,D,k,F,ce,q,te,Q,ie,J,x="",I=[];if(!W)return W;Y=J=0,W=W.replace(new RegExp("\\"+C,"gi"),"");do ce=$.indexOf(W.charAt(Y+=1)),q=$.indexOf(W.charAt(Y+=1)),te=$.indexOf(W.charAt(Y+=1)),Q=$.indexOf(W.charAt(Y+=1)),ie=ce<<18|q<<12|te<<6|Q,D=ie>>16&255,k=ie>>8&255,F=ie&255,J+=1,te===64?I[J]=String.fromCharCode(D):Q===64?I[J]=String.fromCharCode(D,k):I[J]=String.fromCharCode(D,k,F);while(Y<W.length);return x=I.join(""),x=L?l(x):x,x},this.setPad=function(W){return C=W||C,this},this.setTab=function(W){return $=W||$,this},this.setUTF8=function(W){return typeof W=="boolean"&&(L=W),this}},CRC32:function($){var C=0,L=0,W=0,Y,D,k;for($=o($),Y=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),C=C^-1,D=0,k=$.length;D<k;D+=1)W=(C^$.charCodeAt(D))&255,L="0x"+Y.substr(W*9,8),C=C>>>8^L;return(C^-1)>>>0},MD5:function($){var C=$&&typeof $.uppercase=="boolean"?$.uppercase:!1,L=$&&typeof $.pad=="string"?$.pad:"=",W=$&&typeof $.utf8=="boolean"?$.utf8:!0;this.hex=function(ie){return g(Y(ie),C)},this.b64=function(ie){return P(Y(ie),L)},this.any=function(ie,J){return E(Y(ie),J)},this.raw=function(ie){return Y(ie)},this.hex_hmac=function(ie,J){return g(D(ie,J),C)},this.b64_hmac=function(ie,J){return P(D(ie,J),L)},this.any_hmac=function(ie,J,x){return E(D(ie,J),x)},this.vm_test=function(){return hex("abc").toLowerCase()==="900150983cd24fb0d6963f7d28e17f72"},this.setUpperCase=function(ie){return typeof ie=="boolean"&&(C=ie),this},this.setPad=function(ie){return L=ie||L,this},this.setUTF8=function(ie){return typeof ie=="boolean"&&(W=ie),this};function Y(ie){return ie=W?o(ie):ie,y(k(b(ie),ie.length*8))}function D(ie,J){var x,I,R,B,ee;for(ie=W?o(ie):ie,J=W?o(J):J,x=b(ie),x.length>16&&(x=k(x,ie.length*8)),I=Array(16),R=Array(16),ee=0;ee<16;ee+=1)I[ee]=x[ee]^909522486,R[ee]=x[ee]^1549556828;return B=k(I.concat(b(J)),512+J.length*8),y(k(R.concat(B),512+128))}function k(ie,J){var x,I,R,B,ee,ne=1732584193,z=-271733879,X=-1732584194,A=271733878;for(ie[J>>5]|=128<<J%32,ie[(J+64>>>9<<4)+14]=J,x=0;x<ie.length;x+=16)I=ne,R=z,B=X,ee=A,ne=ce(ne,z,X,A,ie[x+0],7,-680876936),A=ce(A,ne,z,X,ie[x+1],12,-389564586),X=ce(X,A,ne,z,ie[x+2],17,606105819),z=ce(z,X,A,ne,ie[x+3],22,-1044525330),ne=ce(ne,z,X,A,ie[x+4],7,-176418897),A=ce(A,ne,z,X,ie[x+5],12,1200080426),X=ce(X,A,ne,z,ie[x+6],17,-1473231341),z=ce(z,X,A,ne,ie[x+7],22,-45705983),ne=ce(ne,z,X,A,ie[x+8],7,1770035416),A=ce(A,ne,z,X,ie[x+9],12,-1958414417),X=ce(X,A,ne,z,ie[x+10],17,-42063),z=ce(z,X,A,ne,ie[x+11],22,-1990404162),ne=ce(ne,z,X,A,ie[x+12],7,1804603682),A=ce(A,ne,z,X,ie[x+13],12,-40341101),X=ce(X,A,ne,z,ie[x+14],17,-1502002290),z=ce(z,X,A,ne,ie[x+15],22,1236535329),ne=q(ne,z,X,A,ie[x+1],5,-165796510),A=q(A,ne,z,X,ie[x+6],9,-1069501632),X=q(X,A,ne,z,ie[x+11],14,643717713),z=q(z,X,A,ne,ie[x+0],20,-373897302),ne=q(ne,z,X,A,ie[x+5],5,-701558691),A=q(A,ne,z,X,ie[x+10],9,38016083),X=q(X,A,ne,z,ie[x+15],14,-660478335),z=q(z,X,A,ne,ie[x+4],20,-405537848),ne=q(ne,z,X,A,ie[x+9],5,568446438),A=q(A,ne,z,X,ie[x+14],9,-1019803690),X=q(X,A,ne,z,ie[x+3],14,-187363961),z=q(z,X,A,ne,ie[x+8],20,1163531501),ne=q(ne,z,X,A,ie[x+13],5,-1444681467),A=q(A,ne,z,X,ie[x+2],9,-51403784),X=q(X,A,ne,z,ie[x+7],14,1735328473),z=q(z,X,A,ne,ie[x+12],20,-1926607734),ne=te(ne,z,X,A,ie[x+5],4,-378558),A=te(A,ne,z,X,ie[x+8],11,-2022574463),X=te(X,A,ne,z,ie[x+11],16,1839030562),z=te(z,X,A,ne,ie[x+14],23,-35309556),ne=te(ne,z,X,A,ie[x+1],4,-1530992060),A=te(A,ne,z,X,ie[x+4],11,1272893353),X=te(X,A,ne,z,ie[x+7],16,-155497632),z=te(z,X,A,ne,ie[x+10],23,-1094730640),ne=te(ne,z,X,A,ie[x+13],4,681279174),A=te(A,ne,z,X,ie[x+0],11,-358537222),X=te(X,A,ne,z,ie[x+3],16,-722521979),z=te(z,X,A,ne,ie[x+6],23,76029189),ne=te(ne,z,X,A,ie[x+9],4,-640364487),A=te(A,ne,z,X,ie[x+12],11,-421815835),X=te(X,A,ne,z,ie[x+15],16,530742520),z=te(z,X,A,ne,ie[x+2],23,-995338651),ne=Q(ne,z,X,A,ie[x+0],6,-198630844),A=Q(A,ne,z,X,ie[x+7],10,1126891415),X=Q(X,A,ne,z,ie[x+14],15,-1416354905),z=Q(z,X,A,ne,ie[x+5],21,-57434055),ne=Q(ne,z,X,A,ie[x+12],6,1700485571),A=Q(A,ne,z,X,ie[x+3],10,-1894986606),X=Q(X,A,ne,z,ie[x+10],15,-1051523),z=Q(z,X,A,ne,ie[x+1],21,-2054922799),ne=Q(ne,z,X,A,ie[x+8],6,1873313359),A=Q(A,ne,z,X,ie[x+15],10,-30611744),X=Q(X,A,ne,z,ie[x+6],15,-1560198380),z=Q(z,X,A,ne,ie[x+13],21,1309151649),ne=Q(ne,z,X,A,ie[x+4],6,-145523070),A=Q(A,ne,z,X,ie[x+11],10,-1120210379),X=Q(X,A,ne,z,ie[x+2],15,718787259),z=Q(z,X,A,ne,ie[x+9],21,-343485551),ne=d(ne,I),z=d(z,R),X=d(X,B),A=d(A,ee);return Array(ne,z,X,A)}function F(ie,J,x,I,R,B){return d(h(d(d(J,ie),d(I,B)),R),x)}function ce(ie,J,x,I,R,B,ee){return F(J&x|~J&I,ie,J,R,B,ee)}function q(ie,J,x,I,R,B,ee){return F(J&I|x&~I,ie,J,R,B,ee)}function te(ie,J,x,I,R,B,ee){return F(J^x^I,ie,J,R,B,ee)}function Q(ie,J,x,I,R,B,ee){return F(x^(J|~I),ie,J,R,B,ee)}},SHA1:function($){var C=$&&typeof $.uppercase=="boolean"?$.uppercase:!1,L=$&&typeof $.pad=="string"?$.pad:"=",W=$&&typeof $.utf8=="boolean"?$.utf8:!0;this.hex=function(q){return g(Y(q),C)},this.b64=function(q){return P(Y(q),L)},this.any=function(q,te){return E(Y(q),te)},this.raw=function(q){return Y(q)},this.hex_hmac=function(q,te){return g(D(q,te))},this.b64_hmac=function(q,te){return P(D(q,te),L)},this.any_hmac=function(q,te,Q){return E(D(q,te),Q)},this.vm_test=function(){return hex("abc").toLowerCase()==="900150983cd24fb0d6963f7d28e17f72"},this.setUpperCase=function(q){return typeof q=="boolean"&&(C=q),this},this.setPad=function(q){return L=q||L,this},this.setUTF8=function(q){return typeof q=="boolean"&&(W=q),this};function Y(q){return q=W?o(q):q,m(k(w(q),q.length*8))}function D(q,te){var Q,ie,J,x,I;for(q=W?o(q):q,te=W?o(te):te,Q=w(q),Q.length>16&&(Q=k(Q,q.length*8)),ie=Array(16),J=Array(16),x=0;x<16;x+=1)ie[x]=Q[x]^909522486,J[x]=Q[x]^1549556828;return I=k(ie.concat(w(te)),512+te.length*8),m(k(J.concat(I),512+160))}function k(q,te){var Q,ie,J,x,I,R,B,ee,ne=Array(80),z=1732584193,X=-271733879,A=-1732584194,Z=271733878,$e=-1009589776;for(q[te>>5]|=128<<24-te%32,q[(te+64>>9<<4)+15]=te,Q=0;Q<q.length;Q+=16){for(x=z,I=X,R=A,B=Z,ee=$e,ie=0;ie<80;ie+=1)ie<16?ne[ie]=q[Q+ie]:ne[ie]=h(ne[ie-3]^ne[ie-8]^ne[ie-14]^ne[ie-16],1),J=d(d(h(z,5),F(ie,X,A,Z)),d(d($e,ne[ie]),ce(ie))),$e=Z,Z=A,A=h(X,30),X=z,z=J;z=d(z,x),X=d(X,I),A=d(A,R),Z=d(Z,B),$e=d($e,ee)}return Array(z,X,A,Z,$e)}function F(q,te,Q,ie){return q<20?te&Q|~te&ie:q<40?te^Q^ie:q<60?te&Q|te&ie|Q&ie:te^Q^ie}function ce(q){return q<20?1518500249:q<40?1859775393:q<60?-1894007588:-899497514}},SHA256:function($){$&&typeof $.uppercase=="boolean"&&$.uppercase;var C=$&&typeof $.pad=="string"?$.pad:"=",L=$&&typeof $.utf8=="boolean"?$.utf8:!0,W;this.hex=function(I){return g(Y(I,L))},this.b64=function(I){return P(Y(I,L),C)},this.any=function(I,R){return E(Y(I,L),R)},this.raw=function(I){return Y(I,L)},this.hex_hmac=function(I,R){return g(D(I,R))},this.b64_hmac=function(I,R){return P(D(I,R),C)},this.any_hmac=function(I,R,B){return E(D(I,R),B)},this.vm_test=function(){return hex("abc").toLowerCase()==="900150983cd24fb0d6963f7d28e17f72"},this.setUpperCase=function(I){return this},this.setPad=function(I){return C=I||C,this},this.setUTF8=function(I){return typeof I=="boolean"&&(L=I),this};function Y(I,R){return I=R?o(I):I,m(x(w(I),I.length*8))}function D(I,R){I=L?o(I):I,R=L?o(R):R;var B,ee=0,ne=w(I),z=Array(16),X=Array(16);for(ne.length>16&&(ne=x(ne,I.length*8));ee<16;ee+=1)z[ee]=ne[ee]^909522486,X[ee]=ne[ee]^1549556828;return B=x(z.concat(w(R)),512+R.length*8),m(x(X.concat(B),512+256))}function k(I,R){return I>>>R|I<<32-R}function F(I,R){return I>>>R}function ce(I,R,B){return I&R^~I&B}function q(I,R,B){return I&R^I&B^R&B}function te(I){return k(I,2)^k(I,13)^k(I,22)}function Q(I){return k(I,6)^k(I,11)^k(I,25)}function ie(I){return k(I,7)^k(I,18)^F(I,3)}function J(I){return k(I,17)^k(I,19)^F(I,10)}W=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];function x(I,R){var B=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],ee=new Array(64),ne,z,X,A,Z,$e,Ne,Me,Ee,Ve,qe,_t;for(I[R>>5]|=128<<24-R%32,I[(R+64>>9<<4)+15]=R,Ee=0;Ee<I.length;Ee+=16){for(ne=B[0],z=B[1],X=B[2],A=B[3],Z=B[4],$e=B[5],Ne=B[6],Me=B[7],Ve=0;Ve<64;Ve+=1)Ve<16?ee[Ve]=I[Ve+Ee]:ee[Ve]=d(d(d(J(ee[Ve-2]),ee[Ve-7]),ie(ee[Ve-15])),ee[Ve-16]),qe=d(d(d(d(Me,Q(Z)),ce(Z,$e,Ne)),W[Ve]),ee[Ve]),_t=d(te(ne),q(ne,z,X)),Me=Ne,Ne=$e,$e=Z,Z=d(A,qe),A=X,X=z,z=ne,ne=d(qe,_t);B[0]=d(ne,B[0]),B[1]=d(z,B[1]),B[2]=d(X,B[2]),B[3]=d(A,B[3]),B[4]=d(Z,B[4]),B[5]=d($e,B[5]),B[6]=d(Ne,B[6]),B[7]=d(Me,B[7])}return B}},SHA512:function($){$&&typeof $.uppercase=="boolean"&&$.uppercase;var C=$&&typeof $.pad=="string"?$.pad:"=",L=$&&typeof $.utf8=="boolean"?$.utf8:!0,W;this.hex=function(I){return g(Y(I))},this.b64=function(I){return P(Y(I),C)},this.any=function(I,R){return E(Y(I),R)},this.raw=function(I){return Y(I)},this.hex_hmac=function(I,R){return g(D(I,R))},this.b64_hmac=function(I,R){return P(D(I,R),C)},this.any_hmac=function(I,R,B){return E(D(I,R),B)},this.vm_test=function(){return hex("abc").toLowerCase()==="900150983cd24fb0d6963f7d28e17f72"},this.setUpperCase=function(I){return this},this.setPad=function(I){return C=I||C,this},this.setUTF8=function(I){return typeof I=="boolean"&&(L=I),this};function Y(I){return I=L?o(I):I,m(k(w(I),I.length*8))}function D(I,R){I=L?o(I):I,R=L?o(R):R;var B,ee=0,ne=w(I),z=Array(32),X=Array(32);for(ne.length>32&&(ne=k(ne,I.length*8));ee<32;ee+=1)z[ee]=ne[ee]^909522486,X[ee]=ne[ee]^1549556828;return B=k(z.concat(w(R)),1024+R.length*8),m(k(X.concat(B),1024+512))}function k(I,R){var B,ee,ne,z=new Array(80),X=new Array(16),A=[new F(1779033703,-205731576),new F(-1150833019,-2067093701),new F(1013904242,-23791573),new F(-1521486534,1595750129),new F(1359893119,-1377402159),new F(-1694144372,725511199),new F(528734635,-79577749),new F(1541459225,327033209)],Z=new F(0,0),$e=new F(0,0),Ne=new F(0,0),Me=new F(0,0),Ee=new F(0,0),Ve=new F(0,0),qe=new F(0,0),_t=new F(0,0),Qe=new F(0,0),tt=new F(0,0),st=new F(0,0),Oe=new F(0,0),Tt=new F(0,0),yn=new F(0,0),St=new F(0,0),de=new F(0,0),U=new F(0,0);for(W===void 0&&(W=[new F(1116352408,-685199838),new F(1899447441,602891725),new F(-1245643825,-330482897),new F(-373957723,-2121671748),new F(961987163,-213338824),new F(1508970993,-1241133031),new F(-1841331548,-1357295717),new F(-1424204075,-630357736),new F(-670586216,-1560083902),new F(310598401,1164996542),new F(607225278,1323610764),new F(1426881987,-704662302),new F(1925078388,-226784913),new F(-2132889090,991336113),new F(-1680079193,633803317),new F(-1046744716,-815192428),new F(-459576895,-1628353838),new F(-272742522,944711139),new F(264347078,-1953704523),new F(604807628,2007800933),new F(770255983,1495990901),new F(1249150122,1856431235),new F(1555081692,-1119749164),new F(1996064986,-2096016459),new F(-1740746414,-295247957),new F(-1473132947,766784016),new F(-1341970488,-1728372417),new F(-1084653625,-1091629340),new F(-958395405,1034457026),new F(-710438585,-1828018395),new F(113926993,-536640913),new F(338241895,168717936),new F(666307205,1188179964),new F(773529912,1546045734),new F(1294757372,1522805485),new F(1396182291,-1651133473),new F(1695183700,-1951439906),new F(1986661051,1014477480),new F(-2117940946,1206759142),new F(-1838011259,344077627),new F(-1564481375,1290863460),new F(-1474664885,-1136513023),new F(-1035236496,-789014639),new F(-949202525,106217008),new F(-778901479,-688958952),new F(-694614492,1432725776),new F(-200395387,1467031594),new F(275423344,851169720),new F(430227734,-1194143544),new F(506948616,1363258195),new F(659060556,-544281703),new F(883997877,-509917016),new F(958139571,-976659869),new F(1322822218,-482243893),new F(1537002063,2003034995),new F(1747873779,-692930397),new F(1955562222,1575990012),new F(2024104815,1125592928),new F(-2067236844,-1578062990),new F(-1933114872,442776044),new F(-1866530822,593698344),new F(-1538233109,-561857047),new F(-1090935817,-1295615723),new F(-965641998,-479046869),new F(-903397682,-366583396),new F(-779700025,566280711),new F(-354779690,-840897762),new F(-176337025,-294727304),new F(116418474,1914138554),new F(174292421,-1563912026),new F(289380356,-1090974290),new F(460393269,320620315),new F(685471733,587496836),new F(852142971,1086792851),new F(1017036298,365543100),new F(1126000580,-1676669620),new F(1288033470,-885112138),new F(1501505948,-60457430),new F(1607167915,987167468),new F(1816402316,1246189591)]),ee=0;ee<80;ee+=1)z[ee]=new F(0,0);for(I[R>>5]|=128<<24-(R&31),I[(R+128>>10<<5)+31]=R,ne=I.length,ee=0;ee<ne;ee+=32){for(ce(Ne,A[0]),ce(Me,A[1]),ce(Ee,A[2]),ce(Ve,A[3]),ce(qe,A[4]),ce(_t,A[5]),ce(Qe,A[6]),ce(tt,A[7]),B=0;B<16;B+=1)z[B].h=I[ee+2*B],z[B].l=I[ee+2*B+1];for(B=16;B<80;B+=1)q(St,z[B-2],19),te(de,z[B-2],29),Q(U,z[B-2],6),Oe.l=St.l^de.l^U.l,Oe.h=St.h^de.h^U.h,q(St,z[B-15],1),q(de,z[B-15],8),Q(U,z[B-15],7),st.l=St.l^de.l^U.l,st.h=St.h^de.h^U.h,J(z[B],Oe,z[B-7],st,z[B-16]);for(B=0;B<80;B+=1)Tt.l=qe.l&_t.l^~qe.l&Qe.l,Tt.h=qe.h&_t.h^~qe.h&Qe.h,q(St,qe,14),q(de,qe,18),te(U,qe,9),Oe.l=St.l^de.l^U.l,Oe.h=St.h^de.h^U.h,q(St,Ne,28),te(de,Ne,2),te(U,Ne,7),st.l=St.l^de.l^U.l,st.h=St.h^de.h^U.h,yn.l=Ne.l&Me.l^Ne.l&Ee.l^Me.l&Ee.l,yn.h=Ne.h&Me.h^Ne.h&Ee.h^Me.h&Ee.h,x(Z,tt,Oe,Tt,W[B],z[B]),ie($e,st,yn),ce(tt,Qe),ce(Qe,_t),ce(_t,qe),ie(qe,Ve,Z),ce(Ve,Ee),ce(Ee,Me),ce(Me,Ne),ie(Ne,Z,$e);ie(A[0],A[0],Ne),ie(A[1],A[1],Me),ie(A[2],A[2],Ee),ie(A[3],A[3],Ve),ie(A[4],A[4],qe),ie(A[5],A[5],_t),ie(A[6],A[6],Qe),ie(A[7],A[7],tt)}for(ee=0;ee<8;ee+=1)X[2*ee]=A[ee].h,X[2*ee+1]=A[ee].l;return X}function F(I,R){this.h=I,this.l=R}function ce(I,R){I.h=R.h,I.l=R.l}function q(I,R,B){I.l=R.l>>>B|R.h<<32-B,I.h=R.h>>>B|R.l<<32-B}function te(I,R,B){I.l=R.h>>>B|R.l<<32-B,I.h=R.l>>>B|R.h<<32-B}function Q(I,R,B){I.l=R.l>>>B|R.h<<32-B,I.h=R.h>>>B}function ie(I,R,B){var ee=(R.l&65535)+(B.l&65535),ne=(R.l>>>16)+(B.l>>>16)+(ee>>>16),z=(R.h&65535)+(B.h&65535)+(ne>>>16),X=(R.h>>>16)+(B.h>>>16)+(z>>>16);I.l=ee&65535|ne<<16,I.h=z&65535|X<<16}function J(I,R,B,ee,ne){var z=(R.l&65535)+(B.l&65535)+(ee.l&65535)+(ne.l&65535),X=(R.l>>>16)+(B.l>>>16)+(ee.l>>>16)+(ne.l>>>16)+(z>>>16),A=(R.h&65535)+(B.h&65535)+(ee.h&65535)+(ne.h&65535)+(X>>>16),Z=(R.h>>>16)+(B.h>>>16)+(ee.h>>>16)+(ne.h>>>16)+(A>>>16);I.l=z&65535|X<<16,I.h=A&65535|Z<<16}function x(I,R,B,ee,ne,z){var X=(R.l&65535)+(B.l&65535)+(ee.l&65535)+(ne.l&65535)+(z.l&65535),A=(R.l>>>16)+(B.l>>>16)+(ee.l>>>16)+(ne.l>>>16)+(z.l>>>16)+(X>>>16),Z=(R.h&65535)+(B.h&65535)+(ee.h&65535)+(ne.h&65535)+(z.h&65535)+(A>>>16),$e=(R.h>>>16)+(B.h>>>16)+(ee.h>>>16)+(ne.h>>>16)+(z.h>>>16)+(Z>>>16);I.l=X&65535|A<<16,I.h=Z&65535|$e<<16}},RMD160:function($){$&&typeof $.uppercase=="boolean"&&$.uppercase;var C=$&&typeof $.pad=="string"?$.pa:"=",L=$&&typeof $.utf8=="boolean"?$.utf8:!0,W=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],D=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],k=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];this.hex=function(x){return g(F(x))},this.b64=function(x){return P(F(x),C)},this.any=function(x,I){return E(F(x),I)},this.raw=function(x){return F(x)},this.hex_hmac=function(x,I){return g(ce(x,I))},this.b64_hmac=function(x,I){return P(ce(x,I),C)},this.any_hmac=function(x,I,R){return E(ce(x,I),R)},this.vm_test=function(){return hex("abc").toLowerCase()==="900150983cd24fb0d6963f7d28e17f72"},this.setUpperCase=function(x){return this},this.setPad=function(x){return typeof x<"u"&&(C=x),this},this.setUTF8=function(x){return typeof x=="boolean"&&(L=x),this};function F(x){return x=L?o(x):x,q(te(b(x),x.length*8))}function ce(x,I){x=L?o(x):x,I=L?o(I):I;var R,B,ee=b(x),ne=Array(16),z=Array(16);for(ee.length>16&&(ee=te(ee,x.length*8)),R=0;R<16;R+=1)ne[R]=ee[R]^909522486,z[R]=ee[R]^1549556828;return B=te(ne.concat(b(I)),512+I.length*8),q(te(z.concat(B),512+160))}function q(x){var I,R="",B=x.length*32;for(I=0;I<B;I+=8)R+=String.fromCharCode(x[I>>5]>>>I%32&255);return R}function te(x,I){var R,B,ee,ne,z=1732584193,X=4023233417,A=2562383102,Z=271733878,$e=3285377520,Ne,Me,Ee,Ve,qe,_t,Qe,tt,st,Oe;for(x[I>>5]|=128<<I%32,x[(I+64>>>9<<4)+14]=I,ne=x.length,ee=0;ee<ne;ee+=16){for(Ne=_t=z,Me=Qe=X,Ee=tt=A,Ve=st=Z,qe=Oe=$e,B=0;B<=79;B+=1)R=d(Ne,Q(B,Me,Ee,Ve)),R=d(R,x[ee+W[B]]),R=d(R,ie(B)),R=d(h(R,D[B]),qe),Ne=qe,qe=Ve,Ve=h(Ee,10),Ee=Me,Me=R,R=d(_t,Q(79-B,Qe,tt,st)),R=d(R,x[ee+Y[B]]),R=d(R,J(B)),R=d(h(R,k[B]),Oe),_t=Oe,Oe=st,st=h(tt,10),tt=Qe,Qe=R;R=d(X,d(Ee,st)),X=d(A,d(Ve,Oe)),A=d(Z,d(qe,_t)),Z=d($e,d(Ne,Qe)),$e=d(z,d(Me,tt)),z=R}return[z,X,A,Z,$e]}function Q(x,I,R,B){return 0<=x&&x<=15?I^R^B:16<=x&&x<=31?I&R|~I&B:32<=x&&x<=47?(I|~R)^B:48<=x&&x<=63?I&B|R&~B:64<=x&&x<=79?I^(R|~B):"rmd160_f: j out of range"}function ie(x){return 0<=x&&x<=15?0:16<=x&&x<=31?1518500249:32<=x&&x<=47?1859775393:48<=x&&x<=63?2400959708:64<=x&&x<=79?2840853838:"rmd160_K1: j out of range"}function J(x){return 0<=x&&x<=15?1352829926:16<=x&&x<=31?1548603684:32<=x&&x<=47?1836072691:48<=x&&x<=63?2053994217:64<=x&&x<=79?0:"rmd160_K2: j out of range"}}},function($,C){var L=!1;L=e,e&&typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal===commonjsGlobal.global&&($=commonjsGlobal),typeof C=="function"&&typeof C.amd=="object"&&C.amd?C(function(){return t}):L?n&&n.exports===L?n.exports=t:L.Hashes=t:$.Hashes=t}(this)})()})(hashes$1,hashesExports);var hashes=hashesExports,sha1=new hashes.SHA1,hasOwnProperty$2=Object.prototype.hasOwnProperty;function xtend$1(){for(var n={},e=0;e<arguments.length;e++){var t=arguments[e];for(var o in t)hasOwnProperty$2.call(t,o)&&(n[o]=t[o])}return n}var ohauth$1={};ohauth$1.qsString=function(n){return Object.keys(n).sort().map(function(e){return ohauth$1.percentEncode(e)+"="+ohauth$1.percentEncode(n[e])}).join("&")};ohauth$1.stringQs=function(n){return n.split("&").filter(function(e){return e!==""}).reduce(function(e,t){var o=t.split("=");return e[decodeURIComponent(o[0])]=o[1]===null?"":decodeURIComponent(o[1]),e},{})};ohauth$1.rawxhr=function(n,e,t,o,l){var d=new XMLHttpRequest,h=/^20\d$/;d.onreadystatechange=function(){if(d.readyState===4&&d.status!==0)if(h.test(d.status))l(null,d);else return l(d,null)},d.onerror=function(m){return l(m,null)},d.open(n,e,!0);for(var g in o)d.setRequestHeader(g,o[g]);return d.send(t),d};ohauth$1.xhr=function(n,e,t,o,l,d){var h=l&&l.header||{"Content-Type":"application/x-www-form-urlencoded"};return h.Authorization="OAuth "+ohauth$1.authHeader(t),ohauth$1.rawxhr(n,e,o,h,d)};ohauth$1.nonce=function(){for(var n="";n.length<6;)n+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz"[Math.floor(Math.random()*61)];return n};ohauth$1.authHeader=function(n){return Object.keys(n).sort().map(function(e){return encodeURIComponent(e)+'="'+encodeURIComponent(n[e])+'"'}).join(", ")};ohauth$1.timestamp=function(){return~~(+new Date/1e3)};ohauth$1.percentEncode=function(n){return encodeURIComponent(n).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29")};ohauth$1.baseString=function(n,e,t){return t.oauth_signature&&delete t.oauth_signature,[n,ohauth$1.percentEncode(e),ohauth$1.percentEncode(ohauth$1.qsString(t))].join("&")};ohauth$1.signature=function(n,e,t){return sha1.b64_hmac(ohauth$1.percentEncode(n)+"&"+ohauth$1.percentEncode(e),t)};ohauth$1.headerGenerator=function(n){n=n||{};var e=n.consumer_key||"",t=n.consumer_secret||"",o=n.signature_method||"HMAC-SHA1",l=n.version||"1.0",d=n.token||"",h=n.token_secret||"";return function(g,m,y){g=g.toUpperCase(),typeof y=="string"&&y.length>0&&(y=ohauth$1.stringQs(y));var b=m.split("?",2),w=b[0],E=b.length===2?ohauth$1.stringQs(b[1]):{},P={oauth_consumer_key:e,oauth_signature_method:o,oauth_version:l,oauth_timestamp:ohauth$1.timestamp(),oauth_nonce:ohauth$1.nonce()};d&&(P.oauth_token=d);var $=xtend$1({},P,E,y),C=ohauth$1.baseString(g,w,$);return P.oauth_signature=ohauth$1.signature(t,h,C),"OAuth "+ohauth$1.authHeader(P)}};var ohauth_1=ohauth$1,resolveUrlExports={},resolveUrl$1={get exports(){return resolveUrlExports},set exports(n){resolveUrlExports=n}};(function(n,e){(function(t,o){n.exports=o()})(commonjsGlobal,function(){function t(){var o=arguments.length;if(o===0)throw new Error("resolveUrl requires at least one argument; got none.");var l=document.createElement("base");if(l.href=arguments[0],o===1)return l.href;var d=document.getElementsByTagName("head")[0];d.insertBefore(l,d.firstChild);for(var h=document.createElement("a"),g,m=1;m<o;m++)h.href=arguments[m],g=h.href,l.href=g;return d.removeChild(l),g}return t})})(resolveUrl$1);var assign=make_assign(),create$1=make_create(),trim$2=make_trim(),Global$5=typeof window<"u"?window:commonjsGlobal,util$6={assign,create:create$1,trim:trim$2,bind:bind$2,slice:slice$1,each:each$8,map:map$3,pluck:pluck$1,isList:isList$1,isFunction:isFunction$3,isObject:isObject$4,Global:Global$5};function make_assign(){return Object.assign?Object.assign:function(e,t,o,l){for(var d=1;d<arguments.length;d++)each$8(Object(arguments[d]),function(h,g){e[g]=h});return e}}function make_create(){if(Object.create)return function(e,t,o,l){var d=slice$1(arguments,1);return assign.apply(this,[Object.create(e)].concat(d))};{let n=function(){};return function(t,o,l,d){var h=slice$1(arguments,1);return n.prototype=t,assign.apply(this,[new n].concat(h))}}}function make_trim(){return String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function bind$2(n,e){return function(){return e.apply(n,Array.prototype.slice.call(arguments,0))}}function slice$1(n,e){return Array.prototype.slice.call(n,e||0)}function each$8(n,e){pluck$1(n,function(t,o){return e(t,o),!1})}function map$3(n,e){var t=isList$1(n)?[]:{};return pluck$1(n,function(o,l){return t[l]=e(o,l),!1}),t}function pluck$1(n,e){if(isList$1(n)){for(var t=0;t<n.length;t++)if(e(n[t],t))return n[t]}else for(var o in n)if(n.hasOwnProperty(o)&&e(n[o],o))return n[o]}function isList$1(n){return n!=null&&typeof n!="function"&&typeof n.length=="number"}function isFunction$3(n){return n&&{}.toString.call(n)==="[object Function]"}function isObject$4(n){return n&&{}.toString.call(n)==="[object Object]"}var util$5=util$6,slice=util$5.slice,pluck=util$5.pluck,each$7=util$5.each,bind$1=util$5.bind,create=util$5.create,isList=util$5.isList,isFunction$2=util$5.isFunction,isObject$3=util$5.isObject,storeEngine={createStore},storeAPI={version:"2.0.12",enabled:!1,get:function(n,e){var t=this.storage.read(this._namespacePrefix+n);return this._deserialize(t,e)},set:function(n,e){return e===void 0?this.remove(n):(this.storage.write(this._namespacePrefix+n,this._serialize(e)),e)},remove:function(n){this.storage.remove(this._namespacePrefix+n)},each:function(n){var e=this;this.storage.each(function(t,o){n.call(e,e._deserialize(t),(o||"").replace(e._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(n){return this._namespacePrefix=="__storejs_"+n+"_"},createStore:function(){return createStore.apply(this,arguments)},addPlugin:function(n){this._addPlugin(n)},namespace:function(n){return createStore(this.storage,this.plugins,n)}};function _warn(){var n=typeof console>"u"?null:console;if(n){var e=n.warn?n.warn:n.log;e.apply(n,arguments)}}function createStore(n,e,t){t||(t=""),n&&!isList(n)&&(n=[n]),e&&!isList(e)&&(e=[e]);var o=t?"__storejs_"+t+"_":"",l=t?new RegExp("^"+o):null,d=/^[a-zA-Z0-9_\-]*$/;if(!d.test(t))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var h={_namespacePrefix:o,_namespaceRegexp:l,_testStorage:function(m){try{var y="__storejs__test__";m.write(y,y);var b=m.read(y)===y;return m.remove(y),b}catch{return!1}},_assignPluginFnProp:function(m,y){var b=this[y];this[y]=function(){var E=slice(arguments,0),P=this;function $(){if(b)return each$7(arguments,function(L,W){E[W]=L}),b.apply(P,E)}var C=[$].concat(E);return m.apply(P,C)}},_serialize:function(m){return JSON.stringify(m)},_deserialize:function(m,y){if(!m)return y;var b="";try{b=JSON.parse(m)}catch{b=m}return b!==void 0?b:y},_addStorage:function(m){this.enabled||this._testStorage(m)&&(this.storage=m,this.enabled=!0)},_addPlugin:function(m){var y=this;if(isList(m)){each$7(m,function(E){y._addPlugin(E)});return}var b=pluck(this.plugins,function(E){return m===E});if(!b){if(this.plugins.push(m),!isFunction$2(m))throw new Error("Plugins must be function values that return objects");var w=m.call(this);if(!isObject$3(w))throw new Error("Plugins must return an object of function properties");each$7(w,function(E,P){if(!isFunction$2(E))throw new Error("Bad plugin property: "+P+" from plugin "+m.name+". Plugins should only return functions.");y._assignPluginFnProp(E,P)})}},addStorage:function(m){_warn("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(m)}},g=create(h,storeAPI,{plugins:[]});return g.raw={},each$7(g,function(m,y){isFunction$2(m)&&(g.raw[y]=bind$1(g,m))}),each$7(n,function(m){g._addStorage(m)}),each$7(e,function(m){g._addPlugin(m)}),g}var util$4=util$6,Global$4=util$4.Global,localStorage_1={name:"localStorage",read:read$5,write:write$5,each:each$6,remove:remove$5,clearAll:clearAll$5};function localStorage$1(){return Global$4.localStorage}function read$5(n){return localStorage$1().getItem(n)}function write$5(n,e){return localStorage$1().setItem(n,e)}function each$6(n){for(var e=localStorage$1().length-1;e>=0;e--){var t=localStorage$1().key(e);n(read$5(t),t)}}function remove$5(n){return localStorage$1().removeItem(n)}function clearAll$5(){return localStorage$1().clear()}var util$3=util$6,Global$3=util$3.Global,oldFFGlobalStorage={name:"oldFF-globalStorage",read:read$4,write:write$4,each:each$5,remove:remove$4,clearAll:clearAll$4},globalStorage=Global$3.globalStorage;function read$4(n){return globalStorage[n]}function write$4(n,e){globalStorage[n]=e}function each$5(n){for(var e=globalStorage.length-1;e>=0;e--){var t=globalStorage.key(e);n(globalStorage[t],t)}}function remove$4(n){return globalStorage.removeItem(n)}function clearAll$4(){each$5(function(n,e){delete globalStorage[n]})}var util$2=util$6,Global$2=util$2.Global,oldIEUserDataStorage={name:"oldIE-userDataStorage",write:write$3,read:read$3,each:each$4,remove:remove$3,clearAll:clearAll$3},storageName="storejs",doc$1=Global$2.document,_withStorageEl=_makeIEStorageElFunction(),disable=(Global$2.navigator?Global$2.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./);function write$3(n,e){if(!disable){var t=fixKey(n);_withStorageEl(function(o){o.setAttribute(t,e),o.save(storageName)})}}function read$3(n){if(!disable){var e=fixKey(n),t=null;return _withStorageEl(function(o){t=o.getAttribute(e)}),t}}function each$4(n){_withStorageEl(function(e){for(var t=e.XMLDocument.documentElement.attributes,o=t.length-1;o>=0;o--){var l=t[o];n(e.getAttribute(l.name),l.name)}})}function remove$3(n){var e=fixKey(n);_withStorageEl(function(t){t.removeAttribute(e),t.save(storageName)})}function clearAll$3(){_withStorageEl(function(n){var e=n.XMLDocument.documentElement.attributes;n.load(storageName);for(var t=e.length-1;t>=0;t--)n.removeAttribute(e[t].name);n.save(storageName)})}var forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function fixKey(n){return n.replace(/^\d/,"___$&").replace(forbiddenCharsRegex,"___")}function _makeIEStorageElFunction(){if(!doc$1||!doc$1.documentElement||!doc$1.documentElement.addBehavior)return null;var n="script",e,t,o;try{t=new ActiveXObject("htmlfile"),t.open(),t.write("<"+n+">document.w=window</"+n+'><iframe src="/favicon.ico"></iframe>'),t.close(),e=t.w.frames[0].document,o=e.createElement("div")}catch{o=doc$1.createElement("div"),e=doc$1.body}return function(l){var d=[].slice.call(arguments,0);d.unshift(o),e.appendChild(o),o.addBehavior("#default#userData"),o.load(storageName),l.apply(this,d),e.removeChild(o)}}var util$1=util$6,Global$1=util$1.Global,trim$1=util$1.trim,cookieStorage={name:"cookieStorage",read:read$2,write:write$2,each:each$3,remove:remove$2,clearAll:clearAll$2},doc=Global$1.document;function read$2(n){if(!n||!_has(n))return null;var e="(?:^|.*;\\s*)"+escape(n).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(doc.cookie.replace(new RegExp(e),"$1"))}function each$3(n){for(var e=doc.cookie.split(/; ?/g),t=e.length-1;t>=0;t--)if(trim$1(e[t])){var o=e[t].split("="),l=unescape(o[0]),d=unescape(o[1]);n(d,l)}}function write$2(n,e){n&&(doc.cookie=escape(n)+"="+escape(e)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")}function remove$2(n){!n||!_has(n)||(doc.cookie=escape(n)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function clearAll$2(){each$3(function(n,e){remove$2(e)})}function _has(n){return new RegExp("(?:^|;\\s*)"+escape(n).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(doc.cookie)}var util=util$6,Global=util.Global,sessionStorage_1={name:"sessionStorage",read:read$1,write:write$1,each:each$2,remove:remove$1,clearAll:clearAll$1};function sessionStorage(){return Global.sessionStorage}function read$1(n){return sessionStorage().getItem(n)}function write$1(n,e){return sessionStorage().setItem(n,e)}function each$2(n){for(var e=sessionStorage().length-1;e>=0;e--){var t=sessionStorage().key(e);n(read$1(t),t)}}function remove$1(n){return sessionStorage().removeItem(n)}function clearAll$1(){return sessionStorage().clear()}var memoryStorage_1={name:"memoryStorage",read,write,each:each$1,remove,clearAll},memoryStorage={};function read(n){return memoryStorage[n]}function write(n,e){memoryStorage[n]=e}function each$1(n){for(var e in memoryStorage)memoryStorage.hasOwnProperty(e)&&n(memoryStorage[e],e)}function remove(n){delete memoryStorage[n]}function clearAll(n){memoryStorage={}}var all=[localStorage_1,oldFFGlobalStorage,oldIEUserDataStorage,cookieStorage,sessionStorage_1,memoryStorage_1],json2$1={},hasRequiredJson2;function requireJson2(){return hasRequiredJson2||(hasRequiredJson2=1,typeof JSON!="object"&&(JSON={}),function(){var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function f(n){return n<10?"0"+n:n}function this_value(){return this.valueOf()}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;function quote(n){return rx_escapable.lastIndex=0,rx_escapable.test(n)?'"'+n.replace(rx_escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function str(n,e){var t,o,l,d,h=gap,g,m=e[n];switch(m&&typeof m=="object"&&typeof m.toJSON=="function"&&(m=m.toJSON(n)),typeof rep=="function"&&(m=rep.call(e,n,m)),typeof m){case"string":return quote(m);case"number":return isFinite(m)?String(m):"null";case"boolean":case"null":return String(m);case"object":if(!m)return"null";if(gap+=indent,g=[],Object.prototype.toString.apply(m)==="[object Array]"){for(d=m.length,t=0;t<d;t+=1)g[t]=str(t,m)||"null";return l=g.length===0?"[]":gap?`[
`+gap+g.join(`,
`+gap)+`
`+h+"]":"["+g.join(",")+"]",gap=h,l}if(rep&&typeof rep=="object")for(d=rep.length,t=0;t<d;t+=1)typeof rep[t]=="string"&&(o=rep[t],l=str(o,m),l&&g.push(quote(o)+(gap?": ":":")+l));else for(o in m)Object.prototype.hasOwnProperty.call(m,o)&&(l=str(o,m),l&&g.push(quote(o)+(gap?": ":":")+l));return l=g.length===0?"{}":gap?`{
`+gap+g.join(`,
`+gap)+`
`+h+"}":"{"+g.join(",")+"}",gap=h,l}}typeof JSON.stringify!="function"&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(n,e,t){var o;if(gap="",indent="",typeof t=="number")for(o=0;o<t;o+=1)indent+=" ";else typeof t=="string"&&(indent=t);if(rep=e,e&&typeof e!="function"&&(typeof e!="object"||typeof e.length!="number"))throw new Error("JSON.stringify");return str("",{"":n})}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){var j;function walk(n,e){var t,o,l=n[e];if(l&&typeof l=="object")for(t in l)Object.prototype.hasOwnProperty.call(l,t)&&(o=walk(l,t),o!==void 0?l[t]=o:delete l[t]);return reviver.call(n,e,l)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()),json2$1}var json2=json2Plugin;function json2Plugin(){return requireJson2(),{}}var engine=storeEngine,storages=all,plugins$1=[json2],store_legacy=engine.createStore(storages,plugins$1),ohauth=ohauth_1,resolveUrl=resolveUrlExports,store=store_legacy,hasOwnProperty$1=Object.prototype.hasOwnProperty;function xtend(){for(var n={},e=0;e<arguments.length;e++){var t=arguments[e];for(var o in t)hasOwnProperty$1.call(t,o)&&(n[o]=t[o])}return n}var osmAuth=function(n){var e={};e.authenticated=function(){return!!(o("oauth_token")&&o("oauth_token_secret"))},e.logout=function(){return o("oauth_token",""),o("oauth_token_secret",""),o("oauth_request_token_secret",""),e},e.authenticate=function(h){if(e.authenticated())return h();e.logout();var g=t(d(n)),m=n.url+"/oauth/request_token";if(g.oauth_signature=ohauth.signature(n.oauth_secret,"",ohauth.baseString("POST",m,g)),!n.singlepage){var y=600,b=550,w=[["width",y],["height",b],["left",screen.width/2-y/2],["top",screen.height/2-b/2]].map(function(W){return W.join("=")}).join(","),E=window.open("about:blank","oauth_window",w);if(e.popupWindow=E,!E){var P=new Error("Popup was blocked");throw P.status="popup-blocked",P}}ohauth.xhr("POST",m,g,null,{},$),n.loading();function $(W,Y){if(n.done(),W)return h(W);var D=ohauth.stringQs(Y.response);o("oauth_request_token_secret",D.oauth_token_secret);var k=n.url+"/oauth/authorize?"+ohauth.qsString({oauth_token:D.oauth_token,oauth_callback:resolveUrl(n.landing)});n.singlepage?location.href=k:E.location=k}window.authComplete=function(W){var Y=ohauth.stringQs(W.split("?")[1]);C(Y.oauth_token),delete window.authComplete};function C(W){var Y=n.url+"/oauth/access_token",D=t(d(n)),k=o("oauth_request_token_secret");D.oauth_token=W,D.oauth_signature=ohauth.signature(n.oauth_secret,k,ohauth.baseString("POST",Y,D)),ohauth.xhr("POST",Y,D,null,{},L),n.loading()}function L(W,Y){if(n.done(),W)return h(W);var D=ohauth.stringQs(Y.response);o("oauth_token",D.oauth_token),o("oauth_token_secret",D.oauth_token_secret),h(null,e)}},e.bringPopupWindowToFront=function(){var h=!1;try{e.popupWindow&&!e.popupWindow.closed&&(e.popupWindow.focus(),h=!0)}catch{}return h},e.bootstrapToken=function(h,g){function m(b){var w=n.url+"/oauth/access_token",E=t(d(n)),P=o("oauth_request_token_secret");E.oauth_token=b,E.oauth_signature=ohauth.signature(n.oauth_secret,P,ohauth.baseString("POST",w,E)),ohauth.xhr("POST",w,E,null,{},y),n.loading()}function y(b,w){if(n.done(),b)return g(b);var E=ohauth.stringQs(w.response);o("oauth_token",E.oauth_token),o("oauth_token_secret",E.oauth_token_secret),g(null,e)}m(h)},e.xhr=function(h,g){if(e.authenticated())return m();if(n.auto)return e.authenticate(m);g("not authenticated",null);return;function m(){var b=t(d(n)),w=o("oauth_token_secret"),E=h.prefix!==!1?n.url+h.path:h.path,P=E.replace(/#.*$/,"").split("?",2),$=P[0],C=P.length===2?P[1]:"";return(!h.options||!h.options.header||h.options.header["Content-Type"]==="application/x-www-form-urlencoded")&&h.content&&(b=xtend(b,ohauth.stringQs(h.content))),b.oauth_token=o("oauth_token"),b.oauth_signature=ohauth.signature(n.oauth_secret,w,ohauth.baseString(h.method,$,xtend(b,ohauth.stringQs(C)))),ohauth.xhr(h.method,E,b,h.content,h.options,y)}function y(b,w){return b?g(b):w.responseXML?g(b,w.responseXML):g(b,w.response)}},e.preauth=function(h){if(h)return h.oauth_token&&o("oauth_token",h.oauth_token),h.oauth_token_secret&&o("oauth_token_secret",h.oauth_token_secret),e},e.options=function(h){return arguments.length?(n=h,n.url=n.url||"https://www.openstreetmap.org",n.landing=n.landing||"land.html",n.singlepage=n.singlepage||!1,n.loading=n.loading||function(){},n.done=n.done||function(){},e.preauth(n)):n};function t(h){return h.oauth_timestamp=ohauth.timestamp(),h.oauth_nonce=ohauth.nonce(),h}var o;if(store.enabled)o=function(h,g){if(arguments.length===1)return store.get(n.url+h);if(arguments.length===2)return store.set(n.url+h,g)};else{var l={};o=function(h,g){if(arguments.length===1)return l[n.url+h];if(arguments.length===2)return l[n.url+h]=g}}function d(h){return{oauth_consumer_key:h.oauth_consumer_key,oauth_signature_method:"HMAC-SHA1"}}return e.options(n),e};class OsmPreferences{constructor(e,t){ge(this,"preferences",new UIEventSource({},"all-osm-preferences"));ge(this,"preferenceSources",new Map);ge(this,"auth");ge(this,"userDetails");ge(this,"longPreferences",{});this.auth=e,this.userDetails=t.userDetails;const o=this;t.OnLoggedIn(()=>o.UpdatePreferences())}GetLongPreference(e,t="mapcomplete-"){if(this.longPreferences[t+e]!==void 0)return this.longPreferences[t+e];const o=new UIEventSource(void 0,"long-osm-preference:"+t+e);this.longPreferences[t+e]=o;const l=t+e+"-combined",d={prefix:""},h=this.GetPreference(l+"-length","",d);if((l+"-length").length>255)throw"This preference key is too long, it has "+e.length+" characters, but at most "+(255-7-9-t.length)+" characters are allowed";const g=this;o.addCallback(y=>{if(y===void 0||y==="")return;if(y===null){console.error("Deleting "+l);let w=parseInt(h.data);for(let E=0;E<w;E++)g.GetPreference(l+"-"+E,"",d).setData("");g.GetPreference(l+"-length","",d).setData("");return}let b=0;for(;y!=="";){if(y===void 0||y==="undefined")throw"Long pref became undefined?";if(b>100)throw"This long preference is getting very long... ";g.GetPreference(l+"-"+b,"",d).setData(y.substr(0,255)),y=y.substr(255),b++}h.setData(""+b)});function m(y){if(Object.keys(g.preferences.data).length===0)return;const b=Number(y);if(b>100)throw"Length to long";let w="";for(let E=0;E<b;E++){const P=l+"-"+E;g.preferences.data[P]===void 0&&console.warn("Detected a broken combined preference:",P,"is undefined",g.preferences),w+=g.preferences.data[P]??""}o.setData(w)}return h.addCallback(y=>{m(Number(y))}),this.preferences.addCallbackAndRun(y=>{m(Number(h.data))}),o}GetPreference(e,t=void 0,o){const l=(o==null?void 0:o.prefix)??"mapcomplete-";if(e.startsWith(l)&&l!==""&&console.trace("A preference was requested which has a duplicate prefix in its key. This is probably a bug"),e=l+e,e=e.replace(/[:\\\/"' {}.%]/g,""),e.length>=255)throw"Preferences: key length to big";const d=this.preferenceSources.get(e);if(d!==void 0)return d;this.userDetails.data.loggedIn&&this.preferences.data[e]===void 0&&this.UpdatePreferences();const h=new UIEventSource(this.preferences.data[e]??t,"osm-preference:"+e);return h.addCallback(g=>{this.UploadPreference(e,g)}),this.preferences.addCallbackD(g=>{const m=g[e];m!==void 0&&h.setData(m)}),this.preferenceSources.set(e,h),h}ClearPreferences(){let e=!1;const t=this;this.preferences.addCallback(o=>{if(console.log("Cleaning preferences..."),Object.keys(o).length==0||e)return;e=!0;const l=["mapcomplete-"];for(const d in o)l.some(g=>d.startsWith(g))&&(console.log("Clearing ",d),t.GetPreference(d,"",{prefix:""}).setData(""));e=!1})}UpdatePreferences(){const e=this;this.auth.xhr({method:"GET",path:"/api/0.6/user/preferences"},function(t,o){if(t){console.log("Could not load preferences",t);return}const l=o.getElementsByTagName("preference");for(let d=0;d<l.length;d++){const h=l[d],g=h.getAttribute("k"),m=h.getAttribute("v");e.preferences.data[g]=m}e.preferenceSources.forEach((d,h)=>{const g=e.preferences.data[h];g===void 0&&d.data!==void 0?e.UploadPreference(h,d.data):d.setData(g)}),e.preferences.ping()})}UploadPreference(e,t){if(!this.userDetails.data.loggedIn){console.debug(`Not saving preference ${e}: user not logged in`);return}if(this.preferences.data[e]===t)return;const o=this;if(console.debug("Updating preference",e," to ",Utils.EllipsesAfter(t,15)),t===void 0||t===""){this.auth.xhr({method:"DELETE",path:"/api/0.6/user/preferences/"+encodeURIComponent(e),options:{header:{"Content-Type":"text/plain"}}},function(l){if(l){console.warn("Could not remove preference",l);return}delete o.preferences.data[e],o.preferences.ping(),console.debug("Preference ",e,"removed!")});return}this.auth.xhr({method:"PUT",path:"/api/0.6/user/preferences/"+encodeURIComponent(e),options:{header:{"Content-Type":"text/plain"}},content:t},function(l){if(l){console.warn(`Could not set preference "${e}"'`,l);return}o.preferences.data[e]=t,o.preferences.ping(),console.debug(`Preference ${e} written!`)})}}/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var matchHtmlRegExp=/["'&<>]/,escapeHtml_1=escapeHtml;function escapeHtml(n){var e=""+n,t=matchHtmlRegExp.exec(e);if(!t)return e;var o,l="",d=0,h=0;for(d=t.index;d<e.length;d++){switch(e.charCodeAt(d)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 39:o="&#39;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;default:continue}h!==d&&(l+=e.substring(h,d)),h=d+1,l+=o}return h!==d?l+e.substring(h,d):l}class ChangesetHandler{constructor(e,t,o,l,d){ge(this,"allElements");ge(this,"osmConnection");ge(this,"changes");ge(this,"_dryRun");ge(this,"userDetails");ge(this,"auth");ge(this,"backend");ge(this,"_remappings",new Map);this.osmConnection=t,this.allElements=o,this.changes=l,this._dryRun=e,this.userDetails=t.userDetails,this.backend=t._oauth_config.url,this.auth=d,e&&console.log("DRYRUN ENABLED")}static removeDuplicateMetaTags(e){const t=[],o=new Set;for(const l of e)o.has(l.key)||(t.push(l),o.add(l.key));return t}static rewriteMetaTags(e,t){let o=!1;for(const l of e){const d=l.key.match(/^([a-zA-Z0-9_]+):(node\/-[0-9])$/);if(d==null)continue;const[h,g,m]=d;t.has(m)&&(l.key=g+":"+t.get(m),o=!0)}return o}async UploadChangeset(e,t,o){if(!t.some(l=>l.key==="comment")||!t.some(l=>l.key==="theme"))throw"The meta tags should at least contain a `comment` and a `theme`";if(t=[...t,...this.defaultChangesetTags()],t=ChangesetHandler.removeDuplicateMetaTags(t),this.userDetails.data.csCount==0&&(this.userDetails.data.csCount=1,this.userDetails.ping()),this._dryRun.data){const l=e(123456,this._remappings);console.log("Metatags are",t),console.log(l);return}if(o.data===void 0)try{const l=await this.OpenChangeset(t);o.setData(l);const d=e(l,this._remappings);console.trace("Opened a new changeset (openChangeset.data is undefined):",d);const h=await this.UploadChange(l,d);ChangesetHandler.rewriteMetaTags(t,h)&&await this.UpdateTags(l,t)}catch(l){console.error("Could not open/upload changeset due to ",l),o.setData(void 0)}else{const l=o.data;try{const d=await this.GetChangesetMeta(l);if(!d.open){console.log("Could not fetch the metadata from the already open changeset"),o.setData(void 0),await this.UploadChangeset(e,t,o);return}const h=await this.UploadChange(l,e(l,this._remappings)),g=this.RewriteTagsOf(t,h,d);await this.UpdateTags(l,g)}catch(d){console.warn("Could not upload, changeset is probably closed: ",d),o.setData(void 0)}}}RewriteTagsOf(e,t,o){const l=new Map;for(const h of e)l.set(h.key,h);const d=o.tags;for(const h in d){const g=l.get(h),m=d[h];if(!(g!==void 0&&g.value===m)){if(g===void 0){e.push({key:h,value:d[h]});continue}if(g.aggregate){let y=Number(g.value);isNaN(y)&&(y=0);let b=Number(d[h]);isNaN(b)&&(b=0),g.value=""+(y+b)}}}return ChangesetHandler.rewriteMetaTags(e,t),e}static parseIdRewrite(e,t){const o=parseInt(e.attributes.old_id.value);if(e.attributes.new_id===void 0)return[t+"/"+o,void 0];const l=parseInt(e.attributes.new_id.value),d=[t+"/"+o,t+"/"+l];if(o!==l)return d}parseUploadChangesetResponse(e){const t=e.getElementsByTagName("node"),o=[];for(const d of Array.from(t)){const h=ChangesetHandler.parseIdRewrite(d,"node");h!==void 0&&o.push(h)}const l=e.getElementsByTagName("way");for(const d of Array.from(l)){const h=ChangesetHandler.parseIdRewrite(d,"way");h!==void 0&&o.push(h)}for(const d of o){const[h,g]=d;this.allElements.addAlias(h,g),g!==void 0&&this._remappings.set(d[0],d[1])}return new Map(o)}async CloseChangeset(e=void 0){const t=this;return new Promise(function(o,l){e!==void 0&&t.auth.xhr({method:"PUT",path:"/api/0.6/changeset/"+e+"/close"},function(d,h){h==null&&console.log("err",d),console.log("Closed changeset ",e),o()})})}async GetChangesetMeta(e){const t=`${this.backend}/api/0.6/changeset/${e}`;return(await Utils.downloadJson(t)).elements[0]}async UpdateTags(e,t){t=ChangesetHandler.removeDuplicateMetaTags(t);const o=this;return new Promise(function(l,d){t=Utils.NoNull(t).filter(g=>g.key!==void 0&&g.value!==void 0&&g.key!==""&&g.value!=="");const h=t.map(g=>`<tag k="${g.key}" v="${escapeHtml_1(g.value)}"/>`);o.auth.xhr({method:"PUT",path:"/api/0.6/changeset/"+e,options:{header:{"Content-Type":"text/xml"}},content:["<osm><changeset>",h,"</changeset></osm>"].join("")},function(g,m){m===void 0?(console.error("Updating the tags of changeset "+e+" failed:",g),d(g)):l(m)})})}defaultChangesetTags(){var e,t,o,l,d;return[["created_by",`MapComplete ${Constants.vNumber}`],["locale",Locale.language.data],["host",`${window.location.origin}${window.location.pathname}`],["source",((o=(t=(e=this.changes.state.currentUserLocation)==null?void 0:e.features)==null?void 0:t.data)==null?void 0:o.length)>0?"survey":void 0],["imagery",(d=(l=this.changes.state.backgroundLayer)==null?void 0:l.data)==null?void 0:d.id]].map(([h,g])=>({key:h,value:g,aggretage:!1}))}OpenChangeset(e){const t=this;return new Promise(function(o,l){const d=e.map(h=>[h.key,h.value]).filter(h=>(h[1]??"")!=="").map(h=>`<tag k="${h[0]}" v="${escapeHtml_1(h[1])}"/>`).join(`
`);t.auth.xhr({method:"PUT",path:"/api/0.6/changeset/create",options:{header:{"Content-Type":"text/xml"}},content:["<osm><changeset>",d,"</changeset></osm>"].join("")},function(h,g){g===void 0?(console.error("Opening a changeset failed:",h),l(h)):o(Number(g))})})}UploadChange(e,t){const o=this;return new Promise(function(l,d){o.auth.xhr({method:"POST",options:{header:{"Content-Type":"text/xml"}},path:"/api/0.6/changeset/"+e+"/upload",content:t},function(h,g){g==null&&(console.error("Uploading an actual change failed",h),d(h));const m=o.parseUploadChangesetResponse(g);console.log("Uploaded changeset ",e),l(m)})})}}class UserDetails{constructor(e){ge(this,"loggedIn",!1);ge(this,"name","Not logged in");ge(this,"uid");ge(this,"csCount",0);ge(this,"img");ge(this,"unreadMessages",0);ge(this,"totalMessages",0);ge(this,"home");ge(this,"backend");ge(this,"account_created");ge(this,"tracesCount",0);ge(this,"description");this.backend=e}}const Hs=class{constructor(e){ge(this,"auth");ge(this,"userDetails");ge(this,"isLoggedIn");ge(this,"gpxServiceIsOnline",new UIEventSource("unknown"));ge(this,"apiIsOnline",new UIEventSource("unknown"));ge(this,"loadingStatus",new UIEventSource("not-attempted"));ge(this,"preferencesHandler");ge(this,"_oauth_config");ge(this,"_dryRun");ge(this,"fakeUser");ge(this,"_onLoggedIn",[]);ge(this,"_iframeMode");ge(this,"_singlePage");ge(this,"isChecking",!1);var o;if(e=e??{},this.fakeUser=e.fakeUser??!1,this._singlePage=e.singlePage??!0,this._oauth_config=Hs.oauth_configs[e.osmConfiguration??"osm"]??Hs.oauth_configs.osm,console.debug("Using backend",this._oauth_config.url),OsmObject.SetBackendUrl(this._oauth_config.url+"/"),this._iframeMode=Utils.runningFromConsole?!1:window!==window.top,this.userDetails=new UIEventSource(new UserDetails(this._oauth_config.url),"userDetails"),e.fakeUser){const l=this.userDetails.data;l.csCount=5678,l.loggedIn=!0,l.unreadMessages=0,l.name="Fake user",l.totalMessages=42}const t=this;if(this.UpdateCapabilities(),this.isLoggedIn=this.userDetails.map(l=>l.loggedIn&&(t.apiIsOnline.data==="unknown"||t.apiIsOnline.data==="online"),[this.apiIsOnline]),this.isLoggedIn.addCallback(l=>{t.userDetails.data.loggedIn==!1&&l==!0&&t.AttemptLogin()}),this._dryRun=e.dryRun??new UIEventSource(!1),this.updateAuthObject(),this.preferencesHandler=new OsmPreferences(this.auth,this),((o=e.oauth_token)==null?void 0:o.data)!==void 0){console.log(e.oauth_token.data);const l=this;this.auth.bootstrapToken(e.oauth_token.data,d=>{console.log("Called back: ",d),l.AttemptLogin()},this.auth),e.oauth_token.setData(void 0)}this.auth.authenticated()&&e.attemptLogin!==!1?this.AttemptLogin():console.log("Not authenticated")}CreateChangesetHandler(e,t){return new ChangesetHandler(this._dryRun,this,e,t,this.auth)}GetPreference(e,t=void 0,o){return this.preferencesHandler.GetPreference(e,t,o)}GetLongPreference(e,t="mapcomplete-"){return this.preferencesHandler.GetLongPreference(e,t)}OnLoggedIn(e){this._onLoggedIn.push(e)}LogOut(){this.auth.logout(),this.userDetails.data.loggedIn=!1,this.userDetails.data.csCount=0,this.userDetails.data.name="",this.userDetails.ping(),console.log("Logged out"),this.loadingStatus.setData("not-attempted")}Backend(){return this._oauth_config.url}AttemptLogin(){if(this.UpdateCapabilities(),this.loadingStatus.setData("loading"),this.fakeUser){this.loadingStatus.setData("logged-in"),console.log("AttemptLogin called, but ignored as fakeUser is set");return}const e=this;console.log("Trying to log in..."),this.updateAuthObject(),this.auth.xhr({method:"GET",path:"/api/0.6/user/details"},function(t,o){var b;if(t!=null){console.log(t),e.loadingStatus.setData("error"),t.status==401&&(console.log("Clearing tokens..."),["https://www.openstreetmap.orgoauth_request_token_secret","https://www.openstreetmap.orgoauth_token","https://www.openstreetmap.orgoauth_token_secret"].forEach(E=>localStorage.removeItem(E)));return}if(o==null){e.loadingStatus.setData("error");return}e.CheckForMessagesContinuously();let l=o.getElementsByTagName("user")[0],d=e.userDetails.data;d.loggedIn=!0,console.log("Login completed, userinfo is ",l),d.name=l.getAttribute("display_name"),d.account_created=l.getAttribute("account_created"),d.uid=Number(l.getAttribute("id")),d.csCount=Number.parseInt(l.getElementsByTagName("changesets")[0].getAttribute("count")??0),d.tracesCount=Number.parseInt(l.getElementsByTagName("changesets")[0].getAttribute("count")??0),d.img=void 0;const h=l.getElementsByTagName("img");h!==void 0&&h[0]!==void 0&&(d.img=h[0].getAttribute("href"));const g=l.getElementsByTagName("description");g!==void 0&&g[0]!==void 0&&(d.description=(b=g[0])==null?void 0:b.innerHTML);const m=l.getElementsByTagName("home");if(m!==void 0&&m[0]!==void 0){const w=parseFloat(m[0].getAttribute("lat")),E=parseFloat(m[0].getAttribute("lon"));d.home={lat:w,lon:E}}e.loadingStatus.setData("logged-in");const y=l.getElementsByTagName("messages")[0].getElementsByTagName("received")[0];d.unreadMessages=parseInt(y.getAttribute("unread")),d.totalMessages=parseInt(y.getAttribute("count")),e.userDetails.ping();for(const w of e._onLoggedIn)w(e.userDetails.data);e._onLoggedIn=[]})}closeNote(e,t){let o="";return(t??"")!==""&&(o="?text="+encodeURIComponent(t)),this._dryRun.data?(console.warn("Dryrun enabled - not actually closing note ",e," with text ",t),new Promise(l=>{l()})):new Promise((l,d)=>{this.auth.xhr({method:"POST",path:`/api/0.6/notes/${e}/close${o}`},function(h,g){h!==null?d(h):l()})})}reopenNote(e,t){if(this._dryRun.data)return console.warn("Dryrun enabled - not actually reopening note ",e," with text ",t),new Promise(l=>{l()});let o="";return(t??"")!==""&&(o="?text="+encodeURIComponent(t)),new Promise((l,d)=>{this.auth.xhr({method:"POST",path:`/api/0.6/notes/${e}/reopen${o}`},function(h,g){h!==null?d(h):l()})})}openNote(e,t,o){if(this._dryRun.data)return console.warn("Dryrun enabled - not actually opening note with text ",o),new Promise(h=>{window.setTimeout(()=>h({id:Math.floor(Math.random()*1e3)}),Math.random()*5e3)});const l=this.auth,d={lat:e,lon:t,text:o};return new Promise((h,g)=>{l.xhr({method:"POST",path:"/api/0.6/notes.json",options:{header:{"Content-Type":"application/json"}},content:JSON.stringify(d)},function(m,y){if(console.log("RESPONSE IS",y),m!==null)g(m);else{const w=JSON.parse(y).properties.id;console.log("OPENED NOTE",w),h({id:w})}})})}async uploadGpxTrack(e,t){var m;if(this._dryRun.data)return console.warn("Dryrun enabled - not actually uploading GPX ",e),new Promise((y,b)=>{window.setTimeout(()=>y({id:Math.floor(Math.random()*1e3)}),Math.random()*5e3)});const o={file:e,description:t.description??"",tags:((m=t.labels)==null?void 0:m.join(","))??"",visibility:t.visibility},l={file:'; filename="'+(t.filename??"gpx_track_mapcomplete_"+new Date().toISOString())+`"\r
Content-Type: application/gpx+xml`},d=this.auth,h="987654";let g="";for(const y in o)g+="--"+h+`\r
`,g+='Content-Disposition: form-data; name="'+y+'"',l[y]!==void 0&&(g+=l[y]),g+=`\r
\r
`,g+=o[y]+`\r
`;return g+="--"+h+`--\r
`,new Promise((y,b)=>{d.xhr({method:"POST",path:"/api/0.6/gpx/create",options:{header:{"Content-Type":"multipart/form-data; boundary="+h,"Content-Length":g.length}},content:g},function(w,E){if(console.log("RESPONSE IS",E),w!==null)b(w);else{const P=JSON.parse(E);console.log("Uploaded GPX track",P),y({id:P})}})})}addCommentToNote(e,t){if(this._dryRun.data)return console.warn("Dryrun enabled - not actually adding comment ",t,"to  note ",e),new Promise(o=>{o()});if((t??"")==="")throw"Invalid text!";return new Promise((o,l)=>{this.auth.xhr({method:"POST",path:`/api/0.6/notes/${e}/comment?text=${encodeURIComponent(t)}`},function(d,h){d!==null?l(d):o()})})}updateAuthObject(){let e=!1;try{(Utils.runningFromConsole||window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches)&&(e=!0)}catch(o){console.warn("Detecting standalone mode failed",o,". Assuming in browser and not worrying furhter")}const t=this._iframeMode||e||!this._singlePage;this.auth=new osmAuth({oauth_consumer_key:this._oauth_config.oauth_consumer_key,oauth_secret:this._oauth_config.oauth_secret,url:this._oauth_config.url,landing:t?void 0:window.location.href,singlepage:!t,auto:!0})}CheckForMessagesContinuously(){const e=this;this.isChecking||(this.isChecking=!0,Stores.Chronic(5*60*1e3).addCallback(t=>{e.isLoggedIn.data&&(console.log("Checking for messages"),e.AttemptLogin())}))}UpdateCapabilities(){const e=this;this.FetchCapabilities().then(({api:t,gpx:o})=>{e.apiIsOnline.setData(t),e.gpxServiceIsOnline.setData(o)})}async FetchCapabilities(){if(Utils.runningFromConsole)return{api:"online",gpx:"online"};const e=await Utils.downloadAdvanced(this.Backend()+"/api/0.6/capabilities");if(e.content===void 0)return console.log("Something went wrong:",e),{api:"unreachable",gpx:"unreachable"};const t=e.content,l=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("status")[0],d=l.getAttribute("api"),h=l.getAttribute("gpx");return{api:d,gpx:h}}};let OsmConnection=Hs;ge(OsmConnection,"oauth_configs",{osm:{oauth_consumer_key:"hivV7ec2o49Two8g9h8Is1VIiVOgxQ1iYexCbvem",oauth_secret:"wDBRTCem0vxD7txrg1y6p5r8nvmz8tAhET7zDASI",url:"https://www.openstreetmap.org"},"osm-test":{oauth_consumer_key:"Zgr7EoKb93uwPv2EOFkIlf3n9NLwj5wbyfjZMhz2",oauth_secret:"3am1i1sykHDMZ66SGq4wI2Z7cJMKgzneCHp3nctn",url:"https://master.apis.dev.openstreetmap.org"}});var dist={},MangroveReviews$1={},asn1$2={},bnExports={},bn={get exports(){return bnExports},set exports(n){bnExports=n}};(function(n){(function(e,t){function o(J,x){if(!J)throw new Error(x||"Assertion failed")}function l(J,x){J.super_=x;var I=function(){};I.prototype=x.prototype,J.prototype=new I,J.prototype.constructor=J}function d(J,x,I){if(d.isBN(J))return J;this.negative=0,this.words=null,this.length=0,this.red=null,J!==null&&((x==="le"||x==="be")&&(I=x,x=10),this._init(J||0,x||10,I||"be"))}typeof e=="object"?e.exports=d:t.BN=d,d.BN=d,d.wordSize=26;var h;try{typeof window<"u"&&typeof window.Buffer<"u"?h=window.Buffer:h=require$$0$3.Buffer}catch{}d.isBN=function(x){return x instanceof d?!0:x!==null&&typeof x=="object"&&x.constructor.wordSize===d.wordSize&&Array.isArray(x.words)},d.max=function(x,I){return x.cmp(I)>0?x:I},d.min=function(x,I){return x.cmp(I)<0?x:I},d.prototype._init=function(x,I,R){if(typeof x=="number")return this._initNumber(x,I,R);if(typeof x=="object")return this._initArray(x,I,R);I==="hex"&&(I=16),o(I===(I|0)&&I>=2&&I<=36),x=x.toString().replace(/\s+/g,"");var B=0;x[0]==="-"&&(B++,this.negative=1),B<x.length&&(I===16?this._parseHex(x,B,R):(this._parseBase(x,I,B),R==="le"&&this._initArray(this.toArray(),I,R)))},d.prototype._initNumber=function(x,I,R){x<0&&(this.negative=1,x=-x),x<67108864?(this.words=[x&67108863],this.length=1):x<4503599627370496?(this.words=[x&67108863,x/67108864&67108863],this.length=2):(o(x<9007199254740992),this.words=[x&67108863,x/67108864&67108863,1],this.length=3),R==="le"&&this._initArray(this.toArray(),I,R)},d.prototype._initArray=function(x,I,R){if(o(typeof x.length=="number"),x.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(x.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var ee,ne,z=0;if(R==="be")for(B=x.length-1,ee=0;B>=0;B-=3)ne=x[B]|x[B-1]<<8|x[B-2]<<16,this.words[ee]|=ne<<z&67108863,this.words[ee+1]=ne>>>26-z&67108863,z+=24,z>=26&&(z-=26,ee++);else if(R==="le")for(B=0,ee=0;B<x.length;B+=3)ne=x[B]|x[B+1]<<8|x[B+2]<<16,this.words[ee]|=ne<<z&67108863,this.words[ee+1]=ne>>>26-z&67108863,z+=24,z>=26&&(z-=26,ee++);return this.strip()};function g(J,x){var I=J.charCodeAt(x);return I>=65&&I<=70?I-55:I>=97&&I<=102?I-87:I-48&15}function m(J,x,I){var R=g(J,I);return I-1>=x&&(R|=g(J,I-1)<<4),R}d.prototype._parseHex=function(x,I,R){this.length=Math.ceil((x.length-I)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var ee=0,ne=0,z;if(R==="be")for(B=x.length-1;B>=I;B-=2)z=m(x,I,B)<<ee,this.words[ne]|=z&67108863,ee>=18?(ee-=18,ne+=1,this.words[ne]|=z>>>26):ee+=8;else{var X=x.length-I;for(B=X%2===0?I+1:I;B<x.length;B+=2)z=m(x,I,B)<<ee,this.words[ne]|=z&67108863,ee>=18?(ee-=18,ne+=1,this.words[ne]|=z>>>26):ee+=8}this.strip()};function y(J,x,I,R){for(var B=0,ee=Math.min(J.length,I),ne=x;ne<ee;ne++){var z=J.charCodeAt(ne)-48;B*=R,z>=49?B+=z-49+10:z>=17?B+=z-17+10:B+=z}return B}d.prototype._parseBase=function(x,I,R){this.words=[0],this.length=1;for(var B=0,ee=1;ee<=67108863;ee*=I)B++;B--,ee=ee/I|0;for(var ne=x.length-R,z=ne%B,X=Math.min(ne,ne-z)+R,A=0,Z=R;Z<X;Z+=B)A=y(x,Z,Z+B,I),this.imuln(ee),this.words[0]+A<67108864?this.words[0]+=A:this._iaddn(A);if(z!==0){var $e=1;for(A=y(x,Z,x.length,I),Z=0;Z<z;Z++)$e*=I;this.imuln($e),this.words[0]+A<67108864?this.words[0]+=A:this._iaddn(A)}this.strip()},d.prototype.copy=function(x){x.words=new Array(this.length);for(var I=0;I<this.length;I++)x.words[I]=this.words[I];x.length=this.length,x.negative=this.negative,x.red=this.red},d.prototype.clone=function(){var x=new d(null);return this.copy(x),x},d.prototype._expand=function(x){for(;this.length<x;)this.words[this.length++]=0;return this},d.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},d.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},d.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function(x,I){x=x||10,I=I|0||1;var R;if(x===16||x==="hex"){R="";for(var B=0,ee=0,ne=0;ne<this.length;ne++){var z=this.words[ne],X=((z<<B|ee)&16777215).toString(16);ee=z>>>24-B&16777215,ee!==0||ne!==this.length-1?R=b[6-X.length]+X+R:R=X+R,B+=2,B>=26&&(B-=26,ne--)}for(ee!==0&&(R=ee.toString(16)+R);R.length%I!==0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}if(x===(x|0)&&x>=2&&x<=36){var A=w[x],Z=E[x];R="";var $e=this.clone();for($e.negative=0;!$e.isZero();){var Ne=$e.modn(Z).toString(x);$e=$e.idivn(Z),$e.isZero()?R=Ne+R:R=b[A-Ne.length]+Ne+R}for(this.isZero()&&(R="0"+R);R.length%I!==0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}o(!1,"Base should be between 2 and 36")},d.prototype.toNumber=function(){var x=this.words[0];return this.length===2?x+=this.words[1]*67108864:this.length===3&&this.words[2]===1?x+=4503599627370496+this.words[1]*67108864:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-x:x},d.prototype.toJSON=function(){return this.toString(16)},d.prototype.toBuffer=function(x,I){return o(typeof h<"u"),this.toArrayLike(h,x,I)},d.prototype.toArray=function(x,I){return this.toArrayLike(Array,x,I)},d.prototype.toArrayLike=function(x,I,R){var B=this.byteLength(),ee=R||Math.max(1,B);o(B<=ee,"byte array longer than desired length"),o(ee>0,"Requested array length <= 0"),this.strip();var ne=I==="le",z=new x(ee),X,A,Z=this.clone();if(ne){for(A=0;!Z.isZero();A++)X=Z.andln(255),Z.iushrn(8),z[A]=X;for(;A<ee;A++)z[A]=0}else{for(A=0;A<ee-B;A++)z[A]=0;for(A=0;!Z.isZero();A++)X=Z.andln(255),Z.iushrn(8),z[ee-A-1]=X}return z},Math.clz32?d.prototype._countBits=function(x){return 32-Math.clz32(x)}:d.prototype._countBits=function(x){var I=x,R=0;return I>=4096&&(R+=13,I>>>=13),I>=64&&(R+=7,I>>>=7),I>=8&&(R+=4,I>>>=4),I>=2&&(R+=2,I>>>=2),R+I},d.prototype._zeroBits=function(x){if(x===0)return 26;var I=x,R=0;return I&8191||(R+=13,I>>>=13),I&127||(R+=7,I>>>=7),I&15||(R+=4,I>>>=4),I&3||(R+=2,I>>>=2),I&1||R++,R},d.prototype.bitLength=function(){var x=this.words[this.length-1],I=this._countBits(x);return(this.length-1)*26+I};function P(J){for(var x=new Array(J.bitLength()),I=0;I<x.length;I++){var R=I/26|0,B=I%26;x[I]=(J.words[R]&1<<B)>>>B}return x}d.prototype.zeroBits=function(){if(this.isZero())return 0;for(var x=0,I=0;I<this.length;I++){var R=this._zeroBits(this.words[I]);if(x+=R,R!==26)break}return x},d.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},d.prototype.toTwos=function(x){return this.negative!==0?this.abs().inotn(x).iaddn(1):this.clone()},d.prototype.fromTwos=function(x){return this.testn(x-1)?this.notn(x).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function(){return this.negative!==0},d.prototype.neg=function(){return this.clone().ineg()},d.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function(x){for(;this.length<x.length;)this.words[this.length++]=0;for(var I=0;I<x.length;I++)this.words[I]=this.words[I]|x.words[I];return this.strip()},d.prototype.ior=function(x){return o((this.negative|x.negative)===0),this.iuor(x)},d.prototype.or=function(x){return this.length>x.length?this.clone().ior(x):x.clone().ior(this)},d.prototype.uor=function(x){return this.length>x.length?this.clone().iuor(x):x.clone().iuor(this)},d.prototype.iuand=function(x){var I;this.length>x.length?I=x:I=this;for(var R=0;R<I.length;R++)this.words[R]=this.words[R]&x.words[R];return this.length=I.length,this.strip()},d.prototype.iand=function(x){return o((this.negative|x.negative)===0),this.iuand(x)},d.prototype.and=function(x){return this.length>x.length?this.clone().iand(x):x.clone().iand(this)},d.prototype.uand=function(x){return this.length>x.length?this.clone().iuand(x):x.clone().iuand(this)},d.prototype.iuxor=function(x){var I,R;this.length>x.length?(I=this,R=x):(I=x,R=this);for(var B=0;B<R.length;B++)this.words[B]=I.words[B]^R.words[B];if(this!==I)for(;B<I.length;B++)this.words[B]=I.words[B];return this.length=I.length,this.strip()},d.prototype.ixor=function(x){return o((this.negative|x.negative)===0),this.iuxor(x)},d.prototype.xor=function(x){return this.length>x.length?this.clone().ixor(x):x.clone().ixor(this)},d.prototype.uxor=function(x){return this.length>x.length?this.clone().iuxor(x):x.clone().iuxor(this)},d.prototype.inotn=function(x){o(typeof x=="number"&&x>=0);var I=Math.ceil(x/26)|0,R=x%26;this._expand(I),R>0&&I--;for(var B=0;B<I;B++)this.words[B]=~this.words[B]&67108863;return R>0&&(this.words[B]=~this.words[B]&67108863>>26-R),this.strip()},d.prototype.notn=function(x){return this.clone().inotn(x)},d.prototype.setn=function(x,I){o(typeof x=="number"&&x>=0);var R=x/26|0,B=x%26;return this._expand(R+1),I?this.words[R]=this.words[R]|1<<B:this.words[R]=this.words[R]&~(1<<B),this.strip()},d.prototype.iadd=function(x){var I;if(this.negative!==0&&x.negative===0)return this.negative=0,I=this.isub(x),this.negative^=1,this._normSign();if(this.negative===0&&x.negative!==0)return x.negative=0,I=this.isub(x),x.negative=1,I._normSign();var R,B;this.length>x.length?(R=this,B=x):(R=x,B=this);for(var ee=0,ne=0;ne<B.length;ne++)I=(R.words[ne]|0)+(B.words[ne]|0)+ee,this.words[ne]=I&67108863,ee=I>>>26;for(;ee!==0&&ne<R.length;ne++)I=(R.words[ne]|0)+ee,this.words[ne]=I&67108863,ee=I>>>26;if(this.length=R.length,ee!==0)this.words[this.length]=ee,this.length++;else if(R!==this)for(;ne<R.length;ne++)this.words[ne]=R.words[ne];return this},d.prototype.add=function(x){var I;return x.negative!==0&&this.negative===0?(x.negative=0,I=this.sub(x),x.negative^=1,I):x.negative===0&&this.negative!==0?(this.negative=0,I=x.sub(this),this.negative=1,I):this.length>x.length?this.clone().iadd(x):x.clone().iadd(this)},d.prototype.isub=function(x){if(x.negative!==0){x.negative=0;var I=this.iadd(x);return x.negative=1,I._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(x),this.negative=1,this._normSign();var R=this.cmp(x);if(R===0)return this.negative=0,this.length=1,this.words[0]=0,this;var B,ee;R>0?(B=this,ee=x):(B=x,ee=this);for(var ne=0,z=0;z<ee.length;z++)I=(B.words[z]|0)-(ee.words[z]|0)+ne,ne=I>>26,this.words[z]=I&67108863;for(;ne!==0&&z<B.length;z++)I=(B.words[z]|0)+ne,ne=I>>26,this.words[z]=I&67108863;if(ne===0&&z<B.length&&B!==this)for(;z<B.length;z++)this.words[z]=B.words[z];return this.length=Math.max(this.length,z),B!==this&&(this.negative=1),this.strip()},d.prototype.sub=function(x){return this.clone().isub(x)};function $(J,x,I){I.negative=x.negative^J.negative;var R=J.length+x.length|0;I.length=R,R=R-1|0;var B=J.words[0]|0,ee=x.words[0]|0,ne=B*ee,z=ne&67108863,X=ne/67108864|0;I.words[0]=z;for(var A=1;A<R;A++){for(var Z=X>>>26,$e=X&67108863,Ne=Math.min(A,x.length-1),Me=Math.max(0,A-J.length+1);Me<=Ne;Me++){var Ee=A-Me|0;B=J.words[Ee]|0,ee=x.words[Me]|0,ne=B*ee+$e,Z+=ne/67108864|0,$e=ne&67108863}I.words[A]=$e|0,X=Z|0}return X!==0?I.words[A]=X|0:I.length--,I.strip()}var C=function(x,I,R){var B=x.words,ee=I.words,ne=R.words,z=0,X,A,Z,$e=B[0]|0,Ne=$e&8191,Me=$e>>>13,Ee=B[1]|0,Ve=Ee&8191,qe=Ee>>>13,_t=B[2]|0,Qe=_t&8191,tt=_t>>>13,st=B[3]|0,Oe=st&8191,Tt=st>>>13,yn=B[4]|0,St=yn&8191,de=yn>>>13,U=B[5]|0,H=U&8191,pe=U>>>13,_e=B[6]|0,De=_e&8191,Be=_e>>>13,Re=B[7]|0,nt=Re&8191,It=Re>>>13,Yt=B[8]|0,dt=Yt&8191,Kt=Yt>>>13,ke=B[9]|0,rn=ke&8191,nn=ke>>>13,Ot=ee[0]|0,ft=Ot&8191,Ut=Ot>>>13,dr=ee[1]|0,vn=dr&8191,ln=dr>>>13,vr=ee[2]|0,un=vr&8191,Lt=vr>>>13,En=ee[3]|0,ut=En&8191,Ke=En>>>13,At=ee[4]|0,dn=At&8191,ht=At>>>13,Bn=ee[5]|0,Mt=Bn&8191,me=Bn>>>13,le=ee[6]|0,oe=le&8191,re=le>>>13,G=ee[7]|0,se=G&8191,he=G>>>13,Ie=ee[8]|0,Ce=Ie&8191,He=Ie>>>13,Xe=ee[9]|0,Fe=Xe&8191,Se=Xe>>>13;R.negative=x.negative^I.negative,R.length=19,X=Math.imul(Ne,ft),A=Math.imul(Ne,Ut),A=A+Math.imul(Me,ft)|0,Z=Math.imul(Me,Ut);var ct=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(ct>>>26)|0,ct&=67108863,X=Math.imul(Ve,ft),A=Math.imul(Ve,Ut),A=A+Math.imul(qe,ft)|0,Z=Math.imul(qe,Ut),X=X+Math.imul(Ne,vn)|0,A=A+Math.imul(Ne,ln)|0,A=A+Math.imul(Me,vn)|0,Z=Z+Math.imul(Me,ln)|0;var Wt=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,X=Math.imul(Qe,ft),A=Math.imul(Qe,Ut),A=A+Math.imul(tt,ft)|0,Z=Math.imul(tt,Ut),X=X+Math.imul(Ve,vn)|0,A=A+Math.imul(Ve,ln)|0,A=A+Math.imul(qe,vn)|0,Z=Z+Math.imul(qe,ln)|0,X=X+Math.imul(Ne,un)|0,A=A+Math.imul(Ne,Lt)|0,A=A+Math.imul(Me,un)|0,Z=Z+Math.imul(Me,Lt)|0;var Ct=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,X=Math.imul(Oe,ft),A=Math.imul(Oe,Ut),A=A+Math.imul(Tt,ft)|0,Z=Math.imul(Tt,Ut),X=X+Math.imul(Qe,vn)|0,A=A+Math.imul(Qe,ln)|0,A=A+Math.imul(tt,vn)|0,Z=Z+Math.imul(tt,ln)|0,X=X+Math.imul(Ve,un)|0,A=A+Math.imul(Ve,Lt)|0,A=A+Math.imul(qe,un)|0,Z=Z+Math.imul(qe,Lt)|0,X=X+Math.imul(Ne,ut)|0,A=A+Math.imul(Ne,Ke)|0,A=A+Math.imul(Me,ut)|0,Z=Z+Math.imul(Me,Ke)|0;var Bt=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,X=Math.imul(St,ft),A=Math.imul(St,Ut),A=A+Math.imul(de,ft)|0,Z=Math.imul(de,Ut),X=X+Math.imul(Oe,vn)|0,A=A+Math.imul(Oe,ln)|0,A=A+Math.imul(Tt,vn)|0,Z=Z+Math.imul(Tt,ln)|0,X=X+Math.imul(Qe,un)|0,A=A+Math.imul(Qe,Lt)|0,A=A+Math.imul(tt,un)|0,Z=Z+Math.imul(tt,Lt)|0,X=X+Math.imul(Ve,ut)|0,A=A+Math.imul(Ve,Ke)|0,A=A+Math.imul(qe,ut)|0,Z=Z+Math.imul(qe,Ke)|0,X=X+Math.imul(Ne,dn)|0,A=A+Math.imul(Ne,ht)|0,A=A+Math.imul(Me,dn)|0,Z=Z+Math.imul(Me,ht)|0;var pt=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(pt>>>26)|0,pt&=67108863,X=Math.imul(H,ft),A=Math.imul(H,Ut),A=A+Math.imul(pe,ft)|0,Z=Math.imul(pe,Ut),X=X+Math.imul(St,vn)|0,A=A+Math.imul(St,ln)|0,A=A+Math.imul(de,vn)|0,Z=Z+Math.imul(de,ln)|0,X=X+Math.imul(Oe,un)|0,A=A+Math.imul(Oe,Lt)|0,A=A+Math.imul(Tt,un)|0,Z=Z+Math.imul(Tt,Lt)|0,X=X+Math.imul(Qe,ut)|0,A=A+Math.imul(Qe,Ke)|0,A=A+Math.imul(tt,ut)|0,Z=Z+Math.imul(tt,Ke)|0,X=X+Math.imul(Ve,dn)|0,A=A+Math.imul(Ve,ht)|0,A=A+Math.imul(qe,dn)|0,Z=Z+Math.imul(qe,ht)|0,X=X+Math.imul(Ne,Mt)|0,A=A+Math.imul(Ne,me)|0,A=A+Math.imul(Me,Mt)|0,Z=Z+Math.imul(Me,me)|0;var bt=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(bt>>>26)|0,bt&=67108863,X=Math.imul(De,ft),A=Math.imul(De,Ut),A=A+Math.imul(Be,ft)|0,Z=Math.imul(Be,Ut),X=X+Math.imul(H,vn)|0,A=A+Math.imul(H,ln)|0,A=A+Math.imul(pe,vn)|0,Z=Z+Math.imul(pe,ln)|0,X=X+Math.imul(St,un)|0,A=A+Math.imul(St,Lt)|0,A=A+Math.imul(de,un)|0,Z=Z+Math.imul(de,Lt)|0,X=X+Math.imul(Oe,ut)|0,A=A+Math.imul(Oe,Ke)|0,A=A+Math.imul(Tt,ut)|0,Z=Z+Math.imul(Tt,Ke)|0,X=X+Math.imul(Qe,dn)|0,A=A+Math.imul(Qe,ht)|0,A=A+Math.imul(tt,dn)|0,Z=Z+Math.imul(tt,ht)|0,X=X+Math.imul(Ve,Mt)|0,A=A+Math.imul(Ve,me)|0,A=A+Math.imul(qe,Mt)|0,Z=Z+Math.imul(qe,me)|0,X=X+Math.imul(Ne,oe)|0,A=A+Math.imul(Ne,re)|0,A=A+Math.imul(Me,oe)|0,Z=Z+Math.imul(Me,re)|0;var fn=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(fn>>>26)|0,fn&=67108863,X=Math.imul(nt,ft),A=Math.imul(nt,Ut),A=A+Math.imul(It,ft)|0,Z=Math.imul(It,Ut),X=X+Math.imul(De,vn)|0,A=A+Math.imul(De,ln)|0,A=A+Math.imul(Be,vn)|0,Z=Z+Math.imul(Be,ln)|0,X=X+Math.imul(H,un)|0,A=A+Math.imul(H,Lt)|0,A=A+Math.imul(pe,un)|0,Z=Z+Math.imul(pe,Lt)|0,X=X+Math.imul(St,ut)|0,A=A+Math.imul(St,Ke)|0,A=A+Math.imul(de,ut)|0,Z=Z+Math.imul(de,Ke)|0,X=X+Math.imul(Oe,dn)|0,A=A+Math.imul(Oe,ht)|0,A=A+Math.imul(Tt,dn)|0,Z=Z+Math.imul(Tt,ht)|0,X=X+Math.imul(Qe,Mt)|0,A=A+Math.imul(Qe,me)|0,A=A+Math.imul(tt,Mt)|0,Z=Z+Math.imul(tt,me)|0,X=X+Math.imul(Ve,oe)|0,A=A+Math.imul(Ve,re)|0,A=A+Math.imul(qe,oe)|0,Z=Z+Math.imul(qe,re)|0,X=X+Math.imul(Ne,se)|0,A=A+Math.imul(Ne,he)|0,A=A+Math.imul(Me,se)|0,Z=Z+Math.imul(Me,he)|0;var cn=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(cn>>>26)|0,cn&=67108863,X=Math.imul(dt,ft),A=Math.imul(dt,Ut),A=A+Math.imul(Kt,ft)|0,Z=Math.imul(Kt,Ut),X=X+Math.imul(nt,vn)|0,A=A+Math.imul(nt,ln)|0,A=A+Math.imul(It,vn)|0,Z=Z+Math.imul(It,ln)|0,X=X+Math.imul(De,un)|0,A=A+Math.imul(De,Lt)|0,A=A+Math.imul(Be,un)|0,Z=Z+Math.imul(Be,Lt)|0,X=X+Math.imul(H,ut)|0,A=A+Math.imul(H,Ke)|0,A=A+Math.imul(pe,ut)|0,Z=Z+Math.imul(pe,Ke)|0,X=X+Math.imul(St,dn)|0,A=A+Math.imul(St,ht)|0,A=A+Math.imul(de,dn)|0,Z=Z+Math.imul(de,ht)|0,X=X+Math.imul(Oe,Mt)|0,A=A+Math.imul(Oe,me)|0,A=A+Math.imul(Tt,Mt)|0,Z=Z+Math.imul(Tt,me)|0,X=X+Math.imul(Qe,oe)|0,A=A+Math.imul(Qe,re)|0,A=A+Math.imul(tt,oe)|0,Z=Z+Math.imul(tt,re)|0,X=X+Math.imul(Ve,se)|0,A=A+Math.imul(Ve,he)|0,A=A+Math.imul(qe,se)|0,Z=Z+Math.imul(qe,he)|0,X=X+Math.imul(Ne,Ce)|0,A=A+Math.imul(Ne,He)|0,A=A+Math.imul(Me,Ce)|0,Z=Z+Math.imul(Me,He)|0;var Pn=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,X=Math.imul(rn,ft),A=Math.imul(rn,Ut),A=A+Math.imul(nn,ft)|0,Z=Math.imul(nn,Ut),X=X+Math.imul(dt,vn)|0,A=A+Math.imul(dt,ln)|0,A=A+Math.imul(Kt,vn)|0,Z=Z+Math.imul(Kt,ln)|0,X=X+Math.imul(nt,un)|0,A=A+Math.imul(nt,Lt)|0,A=A+Math.imul(It,un)|0,Z=Z+Math.imul(It,Lt)|0,X=X+Math.imul(De,ut)|0,A=A+Math.imul(De,Ke)|0,A=A+Math.imul(Be,ut)|0,Z=Z+Math.imul(Be,Ke)|0,X=X+Math.imul(H,dn)|0,A=A+Math.imul(H,ht)|0,A=A+Math.imul(pe,dn)|0,Z=Z+Math.imul(pe,ht)|0,X=X+Math.imul(St,Mt)|0,A=A+Math.imul(St,me)|0,A=A+Math.imul(de,Mt)|0,Z=Z+Math.imul(de,me)|0,X=X+Math.imul(Oe,oe)|0,A=A+Math.imul(Oe,re)|0,A=A+Math.imul(Tt,oe)|0,Z=Z+Math.imul(Tt,re)|0,X=X+Math.imul(Qe,se)|0,A=A+Math.imul(Qe,he)|0,A=A+Math.imul(tt,se)|0,Z=Z+Math.imul(tt,he)|0,X=X+Math.imul(Ve,Ce)|0,A=A+Math.imul(Ve,He)|0,A=A+Math.imul(qe,Ce)|0,Z=Z+Math.imul(qe,He)|0,X=X+Math.imul(Ne,Fe)|0,A=A+Math.imul(Ne,Se)|0,A=A+Math.imul(Me,Fe)|0,Z=Z+Math.imul(Me,Se)|0;var Tn=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,X=Math.imul(rn,vn),A=Math.imul(rn,ln),A=A+Math.imul(nn,vn)|0,Z=Math.imul(nn,ln),X=X+Math.imul(dt,un)|0,A=A+Math.imul(dt,Lt)|0,A=A+Math.imul(Kt,un)|0,Z=Z+Math.imul(Kt,Lt)|0,X=X+Math.imul(nt,ut)|0,A=A+Math.imul(nt,Ke)|0,A=A+Math.imul(It,ut)|0,Z=Z+Math.imul(It,Ke)|0,X=X+Math.imul(De,dn)|0,A=A+Math.imul(De,ht)|0,A=A+Math.imul(Be,dn)|0,Z=Z+Math.imul(Be,ht)|0,X=X+Math.imul(H,Mt)|0,A=A+Math.imul(H,me)|0,A=A+Math.imul(pe,Mt)|0,Z=Z+Math.imul(pe,me)|0,X=X+Math.imul(St,oe)|0,A=A+Math.imul(St,re)|0,A=A+Math.imul(de,oe)|0,Z=Z+Math.imul(de,re)|0,X=X+Math.imul(Oe,se)|0,A=A+Math.imul(Oe,he)|0,A=A+Math.imul(Tt,se)|0,Z=Z+Math.imul(Tt,he)|0,X=X+Math.imul(Qe,Ce)|0,A=A+Math.imul(Qe,He)|0,A=A+Math.imul(tt,Ce)|0,Z=Z+Math.imul(tt,He)|0,X=X+Math.imul(Ve,Fe)|0,A=A+Math.imul(Ve,Se)|0,A=A+Math.imul(qe,Fe)|0,Z=Z+Math.imul(qe,Se)|0;var Vn=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,X=Math.imul(rn,un),A=Math.imul(rn,Lt),A=A+Math.imul(nn,un)|0,Z=Math.imul(nn,Lt),X=X+Math.imul(dt,ut)|0,A=A+Math.imul(dt,Ke)|0,A=A+Math.imul(Kt,ut)|0,Z=Z+Math.imul(Kt,Ke)|0,X=X+Math.imul(nt,dn)|0,A=A+Math.imul(nt,ht)|0,A=A+Math.imul(It,dn)|0,Z=Z+Math.imul(It,ht)|0,X=X+Math.imul(De,Mt)|0,A=A+Math.imul(De,me)|0,A=A+Math.imul(Be,Mt)|0,Z=Z+Math.imul(Be,me)|0,X=X+Math.imul(H,oe)|0,A=A+Math.imul(H,re)|0,A=A+Math.imul(pe,oe)|0,Z=Z+Math.imul(pe,re)|0,X=X+Math.imul(St,se)|0,A=A+Math.imul(St,he)|0,A=A+Math.imul(de,se)|0,Z=Z+Math.imul(de,he)|0,X=X+Math.imul(Oe,Ce)|0,A=A+Math.imul(Oe,He)|0,A=A+Math.imul(Tt,Ce)|0,Z=Z+Math.imul(Tt,He)|0,X=X+Math.imul(Qe,Fe)|0,A=A+Math.imul(Qe,Se)|0,A=A+Math.imul(tt,Fe)|0,Z=Z+Math.imul(tt,Se)|0;var Zt=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,X=Math.imul(rn,ut),A=Math.imul(rn,Ke),A=A+Math.imul(nn,ut)|0,Z=Math.imul(nn,Ke),X=X+Math.imul(dt,dn)|0,A=A+Math.imul(dt,ht)|0,A=A+Math.imul(Kt,dn)|0,Z=Z+Math.imul(Kt,ht)|0,X=X+Math.imul(nt,Mt)|0,A=A+Math.imul(nt,me)|0,A=A+Math.imul(It,Mt)|0,Z=Z+Math.imul(It,me)|0,X=X+Math.imul(De,oe)|0,A=A+Math.imul(De,re)|0,A=A+Math.imul(Be,oe)|0,Z=Z+Math.imul(Be,re)|0,X=X+Math.imul(H,se)|0,A=A+Math.imul(H,he)|0,A=A+Math.imul(pe,se)|0,Z=Z+Math.imul(pe,he)|0,X=X+Math.imul(St,Ce)|0,A=A+Math.imul(St,He)|0,A=A+Math.imul(de,Ce)|0,Z=Z+Math.imul(de,He)|0,X=X+Math.imul(Oe,Fe)|0,A=A+Math.imul(Oe,Se)|0,A=A+Math.imul(Tt,Fe)|0,Z=Z+Math.imul(Tt,Se)|0;var $n=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+($n>>>26)|0,$n&=67108863,X=Math.imul(rn,dn),A=Math.imul(rn,ht),A=A+Math.imul(nn,dn)|0,Z=Math.imul(nn,ht),X=X+Math.imul(dt,Mt)|0,A=A+Math.imul(dt,me)|0,A=A+Math.imul(Kt,Mt)|0,Z=Z+Math.imul(Kt,me)|0,X=X+Math.imul(nt,oe)|0,A=A+Math.imul(nt,re)|0,A=A+Math.imul(It,oe)|0,Z=Z+Math.imul(It,re)|0,X=X+Math.imul(De,se)|0,A=A+Math.imul(De,he)|0,A=A+Math.imul(Be,se)|0,Z=Z+Math.imul(Be,he)|0,X=X+Math.imul(H,Ce)|0,A=A+Math.imul(H,He)|0,A=A+Math.imul(pe,Ce)|0,Z=Z+Math.imul(pe,He)|0,X=X+Math.imul(St,Fe)|0,A=A+Math.imul(St,Se)|0,A=A+Math.imul(de,Fe)|0,Z=Z+Math.imul(de,Se)|0;var qt=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(qt>>>26)|0,qt&=67108863,X=Math.imul(rn,Mt),A=Math.imul(rn,me),A=A+Math.imul(nn,Mt)|0,Z=Math.imul(nn,me),X=X+Math.imul(dt,oe)|0,A=A+Math.imul(dt,re)|0,A=A+Math.imul(Kt,oe)|0,Z=Z+Math.imul(Kt,re)|0,X=X+Math.imul(nt,se)|0,A=A+Math.imul(nt,he)|0,A=A+Math.imul(It,se)|0,Z=Z+Math.imul(It,he)|0,X=X+Math.imul(De,Ce)|0,A=A+Math.imul(De,He)|0,A=A+Math.imul(Be,Ce)|0,Z=Z+Math.imul(Be,He)|0,X=X+Math.imul(H,Fe)|0,A=A+Math.imul(H,Se)|0,A=A+Math.imul(pe,Fe)|0,Z=Z+Math.imul(pe,Se)|0;var Rn=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,X=Math.imul(rn,oe),A=Math.imul(rn,re),A=A+Math.imul(nn,oe)|0,Z=Math.imul(nn,re),X=X+Math.imul(dt,se)|0,A=A+Math.imul(dt,he)|0,A=A+Math.imul(Kt,se)|0,Z=Z+Math.imul(Kt,he)|0,X=X+Math.imul(nt,Ce)|0,A=A+Math.imul(nt,He)|0,A=A+Math.imul(It,Ce)|0,Z=Z+Math.imul(It,He)|0,X=X+Math.imul(De,Fe)|0,A=A+Math.imul(De,Se)|0,A=A+Math.imul(Be,Fe)|0,Z=Z+Math.imul(Be,Se)|0;var Dt=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,X=Math.imul(rn,se),A=Math.imul(rn,he),A=A+Math.imul(nn,se)|0,Z=Math.imul(nn,he),X=X+Math.imul(dt,Ce)|0,A=A+Math.imul(dt,He)|0,A=A+Math.imul(Kt,Ce)|0,Z=Z+Math.imul(Kt,He)|0,X=X+Math.imul(nt,Fe)|0,A=A+Math.imul(nt,Se)|0,A=A+Math.imul(It,Fe)|0,Z=Z+Math.imul(It,Se)|0;var Sr=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,X=Math.imul(rn,Ce),A=Math.imul(rn,He),A=A+Math.imul(nn,Ce)|0,Z=Math.imul(nn,He),X=X+Math.imul(dt,Fe)|0,A=A+Math.imul(dt,Se)|0,A=A+Math.imul(Kt,Fe)|0,Z=Z+Math.imul(Kt,Se)|0;var xn=(z+X|0)+((A&8191)<<13)|0;z=(Z+(A>>>13)|0)+(xn>>>26)|0,xn&=67108863,X=Math.imul(rn,Fe),A=Math.imul(rn,Se),A=A+Math.imul(nn,Fe)|0,Z=Math.imul(nn,Se);var Vt=(z+X|0)+((A&8191)<<13)|0;return z=(Z+(A>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,ne[0]=ct,ne[1]=Wt,ne[2]=Ct,ne[3]=Bt,ne[4]=pt,ne[5]=bt,ne[6]=fn,ne[7]=cn,ne[8]=Pn,ne[9]=Tn,ne[10]=Vn,ne[11]=Zt,ne[12]=$n,ne[13]=qt,ne[14]=Rn,ne[15]=Dt,ne[16]=Sr,ne[17]=xn,ne[18]=Vt,z!==0&&(ne[19]=z,R.length++),R};Math.imul||(C=$);function L(J,x,I){I.negative=x.negative^J.negative,I.length=J.length+x.length;for(var R=0,B=0,ee=0;ee<I.length-1;ee++){var ne=B;B=0;for(var z=R&67108863,X=Math.min(ee,x.length-1),A=Math.max(0,ee-J.length+1);A<=X;A++){var Z=ee-A,$e=J.words[Z]|0,Ne=x.words[A]|0,Me=$e*Ne,Ee=Me&67108863;ne=ne+(Me/67108864|0)|0,Ee=Ee+z|0,z=Ee&67108863,ne=ne+(Ee>>>26)|0,B+=ne>>>26,ne&=67108863}I.words[ee]=z,R=ne,ne=B}return R!==0?I.words[ee]=R:I.length--,I.strip()}function W(J,x,I){var R=new Y;return R.mulp(J,x,I)}d.prototype.mulTo=function(x,I){var R,B=this.length+x.length;return this.length===10&&x.length===10?R=C(this,x,I):B<63?R=$(this,x,I):B<1024?R=L(this,x,I):R=W(this,x,I),R};function Y(J,x){this.x=J,this.y=x}Y.prototype.makeRBT=function(x){for(var I=new Array(x),R=d.prototype._countBits(x)-1,B=0;B<x;B++)I[B]=this.revBin(B,R,x);return I},Y.prototype.revBin=function(x,I,R){if(x===0||x===R-1)return x;for(var B=0,ee=0;ee<I;ee++)B|=(x&1)<<I-ee-1,x>>=1;return B},Y.prototype.permute=function(x,I,R,B,ee,ne){for(var z=0;z<ne;z++)B[z]=I[x[z]],ee[z]=R[x[z]]},Y.prototype.transform=function(x,I,R,B,ee,ne){this.permute(ne,x,I,R,B,ee);for(var z=1;z<ee;z<<=1)for(var X=z<<1,A=Math.cos(2*Math.PI/X),Z=Math.sin(2*Math.PI/X),$e=0;$e<ee;$e+=X)for(var Ne=A,Me=Z,Ee=0;Ee<z;Ee++){var Ve=R[$e+Ee],qe=B[$e+Ee],_t=R[$e+Ee+z],Qe=B[$e+Ee+z],tt=Ne*_t-Me*Qe;Qe=Ne*Qe+Me*_t,_t=tt,R[$e+Ee]=Ve+_t,B[$e+Ee]=qe+Qe,R[$e+Ee+z]=Ve-_t,B[$e+Ee+z]=qe-Qe,Ee!==X&&(tt=A*Ne-Z*Me,Me=A*Me+Z*Ne,Ne=tt)}},Y.prototype.guessLen13b=function(x,I){var R=Math.max(I,x)|1,B=R&1,ee=0;for(R=R/2|0;R;R=R>>>1)ee++;return 1<<ee+1+B},Y.prototype.conjugate=function(x,I,R){if(!(R<=1))for(var B=0;B<R/2;B++){var ee=x[B];x[B]=x[R-B-1],x[R-B-1]=ee,ee=I[B],I[B]=-I[R-B-1],I[R-B-1]=-ee}},Y.prototype.normalize13b=function(x,I){for(var R=0,B=0;B<I/2;B++){var ee=Math.round(x[2*B+1]/I)*8192+Math.round(x[2*B]/I)+R;x[B]=ee&67108863,ee<67108864?R=0:R=ee/67108864|0}return x},Y.prototype.convert13b=function(x,I,R,B){for(var ee=0,ne=0;ne<I;ne++)ee=ee+(x[ne]|0),R[2*ne]=ee&8191,ee=ee>>>13,R[2*ne+1]=ee&8191,ee=ee>>>13;for(ne=2*I;ne<B;++ne)R[ne]=0;o(ee===0),o((ee&-8192)===0)},Y.prototype.stub=function(x){for(var I=new Array(x),R=0;R<x;R++)I[R]=0;return I},Y.prototype.mulp=function(x,I,R){var B=2*this.guessLen13b(x.length,I.length),ee=this.makeRBT(B),ne=this.stub(B),z=new Array(B),X=new Array(B),A=new Array(B),Z=new Array(B),$e=new Array(B),Ne=new Array(B),Me=R.words;Me.length=B,this.convert13b(x.words,x.length,z,B),this.convert13b(I.words,I.length,Z,B),this.transform(z,ne,X,A,B,ee),this.transform(Z,ne,$e,Ne,B,ee);for(var Ee=0;Ee<B;Ee++){var Ve=X[Ee]*$e[Ee]-A[Ee]*Ne[Ee];A[Ee]=X[Ee]*Ne[Ee]+A[Ee]*$e[Ee],X[Ee]=Ve}return this.conjugate(X,A,B),this.transform(X,A,Me,ne,B,ee),this.conjugate(Me,ne,B),this.normalize13b(Me,B),R.negative=x.negative^I.negative,R.length=x.length+I.length,R.strip()},d.prototype.mul=function(x){var I=new d(null);return I.words=new Array(this.length+x.length),this.mulTo(x,I)},d.prototype.mulf=function(x){var I=new d(null);return I.words=new Array(this.length+x.length),W(this,x,I)},d.prototype.imul=function(x){return this.clone().mulTo(x,this)},d.prototype.imuln=function(x){o(typeof x=="number"),o(x<67108864);for(var I=0,R=0;R<this.length;R++){var B=(this.words[R]|0)*x,ee=(B&67108863)+(I&67108863);I>>=26,I+=B/67108864|0,I+=ee>>>26,this.words[R]=ee&67108863}return I!==0&&(this.words[R]=I,this.length++),this},d.prototype.muln=function(x){return this.clone().imuln(x)},d.prototype.sqr=function(){return this.mul(this)},d.prototype.isqr=function(){return this.imul(this.clone())},d.prototype.pow=function(x){var I=P(x);if(I.length===0)return new d(1);for(var R=this,B=0;B<I.length&&I[B]===0;B++,R=R.sqr());if(++B<I.length)for(var ee=R.sqr();B<I.length;B++,ee=ee.sqr())I[B]!==0&&(R=R.mul(ee));return R},d.prototype.iushln=function(x){o(typeof x=="number"&&x>=0);var I=x%26,R=(x-I)/26,B=67108863>>>26-I<<26-I,ee;if(I!==0){var ne=0;for(ee=0;ee<this.length;ee++){var z=this.words[ee]&B,X=(this.words[ee]|0)-z<<I;this.words[ee]=X|ne,ne=z>>>26-I}ne&&(this.words[ee]=ne,this.length++)}if(R!==0){for(ee=this.length-1;ee>=0;ee--)this.words[ee+R]=this.words[ee];for(ee=0;ee<R;ee++)this.words[ee]=0;this.length+=R}return this.strip()},d.prototype.ishln=function(x){return o(this.negative===0),this.iushln(x)},d.prototype.iushrn=function(x,I,R){o(typeof x=="number"&&x>=0);var B;I?B=(I-I%26)/26:B=0;var ee=x%26,ne=Math.min((x-ee)/26,this.length),z=67108863^67108863>>>ee<<ee,X=R;if(B-=ne,B=Math.max(0,B),X){for(var A=0;A<ne;A++)X.words[A]=this.words[A];X.length=ne}if(ne!==0)if(this.length>ne)for(this.length-=ne,A=0;A<this.length;A++)this.words[A]=this.words[A+ne];else this.words[0]=0,this.length=1;var Z=0;for(A=this.length-1;A>=0&&(Z!==0||A>=B);A--){var $e=this.words[A]|0;this.words[A]=Z<<26-ee|$e>>>ee,Z=$e&z}return X&&Z!==0&&(X.words[X.length++]=Z),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function(x,I,R){return o(this.negative===0),this.iushrn(x,I,R)},d.prototype.shln=function(x){return this.clone().ishln(x)},d.prototype.ushln=function(x){return this.clone().iushln(x)},d.prototype.shrn=function(x){return this.clone().ishrn(x)},d.prototype.ushrn=function(x){return this.clone().iushrn(x)},d.prototype.testn=function(x){o(typeof x=="number"&&x>=0);var I=x%26,R=(x-I)/26,B=1<<I;if(this.length<=R)return!1;var ee=this.words[R];return!!(ee&B)},d.prototype.imaskn=function(x){o(typeof x=="number"&&x>=0);var I=x%26,R=(x-I)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=R)return this;if(I!==0&&R++,this.length=Math.min(R,this.length),I!==0){var B=67108863^67108863>>>I<<I;this.words[this.length-1]&=B}return this.strip()},d.prototype.maskn=function(x){return this.clone().imaskn(x)},d.prototype.iaddn=function(x){return o(typeof x=="number"),o(x<67108864),x<0?this.isubn(-x):this.negative!==0?this.length===1&&(this.words[0]|0)<x?(this.words[0]=x-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(x),this.negative=1,this):this._iaddn(x)},d.prototype._iaddn=function(x){this.words[0]+=x;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},d.prototype.isubn=function(x){if(o(typeof x=="number"),o(x<67108864),x<0)return this.iaddn(-x);if(this.negative!==0)return this.negative=0,this.iaddn(x),this.negative=1,this;if(this.words[0]-=x,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this.strip()},d.prototype.addn=function(x){return this.clone().iaddn(x)},d.prototype.subn=function(x){return this.clone().isubn(x)},d.prototype.iabs=function(){return this.negative=0,this},d.prototype.abs=function(){return this.clone().iabs()},d.prototype._ishlnsubmul=function(x,I,R){var B=x.length+R,ee;this._expand(B);var ne,z=0;for(ee=0;ee<x.length;ee++){ne=(this.words[ee+R]|0)+z;var X=(x.words[ee]|0)*I;ne-=X&67108863,z=(ne>>26)-(X/67108864|0),this.words[ee+R]=ne&67108863}for(;ee<this.length-R;ee++)ne=(this.words[ee+R]|0)+z,z=ne>>26,this.words[ee+R]=ne&67108863;if(z===0)return this.strip();for(o(z===-1),z=0,ee=0;ee<this.length;ee++)ne=-(this.words[ee]|0)+z,z=ne>>26,this.words[ee]=ne&67108863;return this.negative=1,this.strip()},d.prototype._wordDiv=function(x,I){var R=this.length-x.length,B=this.clone(),ee=x,ne=ee.words[ee.length-1]|0,z=this._countBits(ne);R=26-z,R!==0&&(ee=ee.ushln(R),B.iushln(R),ne=ee.words[ee.length-1]|0);var X=B.length-ee.length,A;if(I!=="mod"){A=new d(null),A.length=X+1,A.words=new Array(A.length);for(var Z=0;Z<A.length;Z++)A.words[Z]=0}var $e=B.clone()._ishlnsubmul(ee,1,X);$e.negative===0&&(B=$e,A&&(A.words[X]=1));for(var Ne=X-1;Ne>=0;Ne--){var Me=(B.words[ee.length+Ne]|0)*67108864+(B.words[ee.length+Ne-1]|0);for(Me=Math.min(Me/ne|0,67108863),B._ishlnsubmul(ee,Me,Ne);B.negative!==0;)Me--,B.negative=0,B._ishlnsubmul(ee,1,Ne),B.isZero()||(B.negative^=1);A&&(A.words[Ne]=Me)}return A&&A.strip(),B.strip(),I!=="div"&&R!==0&&B.iushrn(R),{div:A||null,mod:B}},d.prototype.divmod=function(x,I,R){if(o(!x.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var B,ee,ne;return this.negative!==0&&x.negative===0?(ne=this.neg().divmod(x,I),I!=="mod"&&(B=ne.div.neg()),I!=="div"&&(ee=ne.mod.neg(),R&&ee.negative!==0&&ee.iadd(x)),{div:B,mod:ee}):this.negative===0&&x.negative!==0?(ne=this.divmod(x.neg(),I),I!=="mod"&&(B=ne.div.neg()),{div:B,mod:ne.mod}):this.negative&x.negative?(ne=this.neg().divmod(x.neg(),I),I!=="div"&&(ee=ne.mod.neg(),R&&ee.negative!==0&&ee.isub(x)),{div:ne.div,mod:ee}):x.length>this.length||this.cmp(x)<0?{div:new d(0),mod:this}:x.length===1?I==="div"?{div:this.divn(x.words[0]),mod:null}:I==="mod"?{div:null,mod:new d(this.modn(x.words[0]))}:{div:this.divn(x.words[0]),mod:new d(this.modn(x.words[0]))}:this._wordDiv(x,I)},d.prototype.div=function(x){return this.divmod(x,"div",!1).div},d.prototype.mod=function(x){return this.divmod(x,"mod",!1).mod},d.prototype.umod=function(x){return this.divmod(x,"mod",!0).mod},d.prototype.divRound=function(x){var I=this.divmod(x);if(I.mod.isZero())return I.div;var R=I.div.negative!==0?I.mod.isub(x):I.mod,B=x.ushrn(1),ee=x.andln(1),ne=R.cmp(B);return ne<0||ee===1&&ne===0?I.div:I.div.negative!==0?I.div.isubn(1):I.div.iaddn(1)},d.prototype.modn=function(x){o(x<=67108863);for(var I=(1<<26)%x,R=0,B=this.length-1;B>=0;B--)R=(I*R+(this.words[B]|0))%x;return R},d.prototype.idivn=function(x){o(x<=67108863);for(var I=0,R=this.length-1;R>=0;R--){var B=(this.words[R]|0)+I*67108864;this.words[R]=B/x|0,I=B%x}return this.strip()},d.prototype.divn=function(x){return this.clone().idivn(x)},d.prototype.egcd=function(x){o(x.negative===0),o(!x.isZero());var I=this,R=x.clone();I.negative!==0?I=I.umod(x):I=I.clone();for(var B=new d(1),ee=new d(0),ne=new d(0),z=new d(1),X=0;I.isEven()&&R.isEven();)I.iushrn(1),R.iushrn(1),++X;for(var A=R.clone(),Z=I.clone();!I.isZero();){for(var $e=0,Ne=1;!(I.words[0]&Ne)&&$e<26;++$e,Ne<<=1);if($e>0)for(I.iushrn($e);$e-- >0;)(B.isOdd()||ee.isOdd())&&(B.iadd(A),ee.isub(Z)),B.iushrn(1),ee.iushrn(1);for(var Me=0,Ee=1;!(R.words[0]&Ee)&&Me<26;++Me,Ee<<=1);if(Me>0)for(R.iushrn(Me);Me-- >0;)(ne.isOdd()||z.isOdd())&&(ne.iadd(A),z.isub(Z)),ne.iushrn(1),z.iushrn(1);I.cmp(R)>=0?(I.isub(R),B.isub(ne),ee.isub(z)):(R.isub(I),ne.isub(B),z.isub(ee))}return{a:ne,b:z,gcd:R.iushln(X)}},d.prototype._invmp=function(x){o(x.negative===0),o(!x.isZero());var I=this,R=x.clone();I.negative!==0?I=I.umod(x):I=I.clone();for(var B=new d(1),ee=new d(0),ne=R.clone();I.cmpn(1)>0&&R.cmpn(1)>0;){for(var z=0,X=1;!(I.words[0]&X)&&z<26;++z,X<<=1);if(z>0)for(I.iushrn(z);z-- >0;)B.isOdd()&&B.iadd(ne),B.iushrn(1);for(var A=0,Z=1;!(R.words[0]&Z)&&A<26;++A,Z<<=1);if(A>0)for(R.iushrn(A);A-- >0;)ee.isOdd()&&ee.iadd(ne),ee.iushrn(1);I.cmp(R)>=0?(I.isub(R),B.isub(ee)):(R.isub(I),ee.isub(B))}var $e;return I.cmpn(1)===0?$e=B:$e=ee,$e.cmpn(0)<0&&$e.iadd(x),$e},d.prototype.gcd=function(x){if(this.isZero())return x.abs();if(x.isZero())return this.abs();var I=this.clone(),R=x.clone();I.negative=0,R.negative=0;for(var B=0;I.isEven()&&R.isEven();B++)I.iushrn(1),R.iushrn(1);do{for(;I.isEven();)I.iushrn(1);for(;R.isEven();)R.iushrn(1);var ee=I.cmp(R);if(ee<0){var ne=I;I=R,R=ne}else if(ee===0||R.cmpn(1)===0)break;I.isub(R)}while(!0);return R.iushln(B)},d.prototype.invm=function(x){return this.egcd(x).a.umod(x)},d.prototype.isEven=function(){return(this.words[0]&1)===0},d.prototype.isOdd=function(){return(this.words[0]&1)===1},d.prototype.andln=function(x){return this.words[0]&x},d.prototype.bincn=function(x){o(typeof x=="number");var I=x%26,R=(x-I)/26,B=1<<I;if(this.length<=R)return this._expand(R+1),this.words[R]|=B,this;for(var ee=B,ne=R;ee!==0&&ne<this.length;ne++){var z=this.words[ne]|0;z+=ee,ee=z>>>26,z&=67108863,this.words[ne]=z}return ee!==0&&(this.words[ne]=ee,this.length++),this},d.prototype.isZero=function(){return this.length===1&&this.words[0]===0},d.prototype.cmpn=function(x){var I=x<0;if(this.negative!==0&&!I)return-1;if(this.negative===0&&I)return 1;this.strip();var R;if(this.length>1)R=1;else{I&&(x=-x),o(x<=67108863,"Number is too big");var B=this.words[0]|0;R=B===x?0:B<x?-1:1}return this.negative!==0?-R|0:R},d.prototype.cmp=function(x){if(this.negative!==0&&x.negative===0)return-1;if(this.negative===0&&x.negative!==0)return 1;var I=this.ucmp(x);return this.negative!==0?-I|0:I},d.prototype.ucmp=function(x){if(this.length>x.length)return 1;if(this.length<x.length)return-1;for(var I=0,R=this.length-1;R>=0;R--){var B=this.words[R]|0,ee=x.words[R]|0;if(B!==ee){B<ee?I=-1:B>ee&&(I=1);break}}return I},d.prototype.gtn=function(x){return this.cmpn(x)===1},d.prototype.gt=function(x){return this.cmp(x)===1},d.prototype.gten=function(x){return this.cmpn(x)>=0},d.prototype.gte=function(x){return this.cmp(x)>=0},d.prototype.ltn=function(x){return this.cmpn(x)===-1},d.prototype.lt=function(x){return this.cmp(x)===-1},d.prototype.lten=function(x){return this.cmpn(x)<=0},d.prototype.lte=function(x){return this.cmp(x)<=0},d.prototype.eqn=function(x){return this.cmpn(x)===0},d.prototype.eq=function(x){return this.cmp(x)===0},d.red=function(x){return new Q(x)},d.prototype.toRed=function(x){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),x.convertTo(this)._forceRed(x)},d.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},d.prototype._forceRed=function(x){return this.red=x,this},d.prototype.forceRed=function(x){return o(!this.red,"Already a number in reduction context"),this._forceRed(x)},d.prototype.redAdd=function(x){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,x)},d.prototype.redIAdd=function(x){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,x)},d.prototype.redSub=function(x){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,x)},d.prototype.redISub=function(x){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,x)},d.prototype.redShl=function(x){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,x)},d.prototype.redMul=function(x){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,x),this.red.mul(this,x)},d.prototype.redIMul=function(x){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,x),this.red.imul(this,x)},d.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function(x){return o(this.red&&!x.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,x)};var D={k256:null,p224:null,p192:null,p25519:null};function k(J,x){this.name=J,this.p=new d(x,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}k.prototype._tmp=function(){var x=new d(null);return x.words=new Array(Math.ceil(this.n/13)),x},k.prototype.ireduce=function(x){var I=x,R;do this.split(I,this.tmp),I=this.imulK(I),I=I.iadd(this.tmp),R=I.bitLength();while(R>this.n);var B=R<this.n?-1:I.ucmp(this.p);return B===0?(I.words[0]=0,I.length=1):B>0?I.isub(this.p):I.strip!==void 0?I.strip():I._strip(),I},k.prototype.split=function(x,I){x.iushrn(this.n,0,I)},k.prototype.imulK=function(x){return x.imul(this.k)};function F(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}l(F,k),F.prototype.split=function(x,I){for(var R=4194303,B=Math.min(x.length,9),ee=0;ee<B;ee++)I.words[ee]=x.words[ee];if(I.length=B,x.length<=9){x.words[0]=0,x.length=1;return}var ne=x.words[9];for(I.words[I.length++]=ne&R,ee=10;ee<x.length;ee++){var z=x.words[ee]|0;x.words[ee-10]=(z&R)<<4|ne>>>22,ne=z}ne>>>=22,x.words[ee-10]=ne,ne===0&&x.length>10?x.length-=10:x.length-=9},F.prototype.imulK=function(x){x.words[x.length]=0,x.words[x.length+1]=0,x.length+=2;for(var I=0,R=0;R<x.length;R++){var B=x.words[R]|0;I+=B*977,x.words[R]=I&67108863,I=B*64+(I/67108864|0)}return x.words[x.length-1]===0&&(x.length--,x.words[x.length-1]===0&&x.length--),x};function ce(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}l(ce,k);function q(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}l(q,k);function te(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}l(te,k),te.prototype.imulK=function(x){for(var I=0,R=0;R<x.length;R++){var B=(x.words[R]|0)*19+I,ee=B&67108863;B>>>=26,x.words[R]=ee,I=B}return I!==0&&(x.words[x.length++]=I),x},d._prime=function(x){if(D[x])return D[x];var I;if(x==="k256")I=new F;else if(x==="p224")I=new ce;else if(x==="p192")I=new q;else if(x==="p25519")I=new te;else throw new Error("Unknown prime "+x);return D[x]=I,I};function Q(J){if(typeof J=="string"){var x=d._prime(J);this.m=x.p,this.prime=x}else o(J.gtn(1),"modulus must be greater than 1"),this.m=J,this.prime=null}Q.prototype._verify1=function(x){o(x.negative===0,"red works only with positives"),o(x.red,"red works only with red numbers")},Q.prototype._verify2=function(x,I){o((x.negative|I.negative)===0,"red works only with positives"),o(x.red&&x.red===I.red,"red works only with red numbers")},Q.prototype.imod=function(x){return this.prime?this.prime.ireduce(x)._forceRed(this):x.umod(this.m)._forceRed(this)},Q.prototype.neg=function(x){return x.isZero()?x.clone():this.m.sub(x)._forceRed(this)},Q.prototype.add=function(x,I){this._verify2(x,I);var R=x.add(I);return R.cmp(this.m)>=0&&R.isub(this.m),R._forceRed(this)},Q.prototype.iadd=function(x,I){this._verify2(x,I);var R=x.iadd(I);return R.cmp(this.m)>=0&&R.isub(this.m),R},Q.prototype.sub=function(x,I){this._verify2(x,I);var R=x.sub(I);return R.cmpn(0)<0&&R.iadd(this.m),R._forceRed(this)},Q.prototype.isub=function(x,I){this._verify2(x,I);var R=x.isub(I);return R.cmpn(0)<0&&R.iadd(this.m),R},Q.prototype.shl=function(x,I){return this._verify1(x),this.imod(x.ushln(I))},Q.prototype.imul=function(x,I){return this._verify2(x,I),this.imod(x.imul(I))},Q.prototype.mul=function(x,I){return this._verify2(x,I),this.imod(x.mul(I))},Q.prototype.isqr=function(x){return this.imul(x,x.clone())},Q.prototype.sqr=function(x){return this.mul(x,x)},Q.prototype.sqrt=function(x){if(x.isZero())return x.clone();var I=this.m.andln(3);if(o(I%2===1),I===3){var R=this.m.add(new d(1)).iushrn(2);return this.pow(x,R)}for(var B=this.m.subn(1),ee=0;!B.isZero()&&B.andln(1)===0;)ee++,B.iushrn(1);o(!B.isZero());var ne=new d(1).toRed(this),z=ne.redNeg(),X=this.m.subn(1).iushrn(1),A=this.m.bitLength();for(A=new d(2*A*A).toRed(this);this.pow(A,X).cmp(z)!==0;)A.redIAdd(z);for(var Z=this.pow(A,B),$e=this.pow(x,B.addn(1).iushrn(1)),Ne=this.pow(x,B),Me=ee;Ne.cmp(ne)!==0;){for(var Ee=Ne,Ve=0;Ee.cmp(ne)!==0;Ve++)Ee=Ee.redSqr();o(Ve<Me);var qe=this.pow(Z,new d(1).iushln(Me-Ve-1));$e=$e.redMul(qe),Z=qe.redSqr(),Ne=Ne.redMul(Z),Me=Ve}return $e},Q.prototype.invm=function(x){var I=x._invmp(this.m);return I.negative!==0?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},Q.prototype.pow=function(x,I){if(I.isZero())return new d(1).toRed(this);if(I.cmpn(1)===0)return x.clone();var R=4,B=new Array(1<<R);B[0]=new d(1).toRed(this),B[1]=x;for(var ee=2;ee<B.length;ee++)B[ee]=this.mul(B[ee-1],x);var ne=B[0],z=0,X=0,A=I.bitLength()%26;for(A===0&&(A=26),ee=I.length-1;ee>=0;ee--){for(var Z=I.words[ee],$e=A-1;$e>=0;$e--){var Ne=Z>>$e&1;if(ne!==B[0]&&(ne=this.sqr(ne)),Ne===0&&z===0){X=0;continue}z<<=1,z|=Ne,X++,!(X!==R&&(ee!==0||$e!==0))&&(ne=this.mul(ne,B[z]),X=0,z=0)}A=26}return ne},Q.prototype.convertTo=function(x){var I=x.umod(this.m);return I===x?I.clone():I},Q.prototype.convertFrom=function(x){var I=x.clone();return I.red=null,I},d.mont=function(x){return new ie(x)};function ie(J){Q.call(this,J),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}l(ie,Q),ie.prototype.convertTo=function(x){return this.imod(x.ushln(this.shift))},ie.prototype.convertFrom=function(x){var I=this.imod(x.mul(this.rinv));return I.red=null,I},ie.prototype.imul=function(x,I){if(x.isZero()||I.isZero())return x.words[0]=0,x.length=1,x;var R=x.imul(I),B=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ee=R.isub(B).iushrn(this.shift),ne=ee;return ee.cmp(this.m)>=0?ne=ee.isub(this.m):ee.cmpn(0)<0&&(ne=ee.iadd(this.m)),ne._forceRed(this)},ie.prototype.mul=function(x,I){if(x.isZero()||I.isZero())return new d(0)._forceRed(this);var R=x.mul(I),B=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ee=R.isub(B).iushrn(this.shift),ne=ee;return ee.cmp(this.m)>=0?ne=ee.isub(this.m):ee.cmpn(0)<0&&(ne=ee.iadd(this.m)),ne._forceRed(this)},ie.prototype.invm=function(x){var I=this.imod(x._invmp(this.m).mul(this.r2));return I._forceRed(this)}})(n,commonjsGlobal)})(bn);var api={},encoders={},inherits_browserExports={},inherits_browser={get exports(){return inherits_browserExports},set exports(n){inherits_browserExports=n}};typeof Object.create=="function"?inherits_browser.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,t){if(t){e.super_=t;var o=function(){};o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e}};var buffer$2={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code.length;i$1<len;++i$1)lookup[i$1]=code[i$1],revLookup[code.charCodeAt(i$1)]=i$1;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var o=t===e?0:4-t%4;return[t,o]}function byteLength(n){var e=getLens(n),t=e[0],o=e[1];return(t+o)*3/4-o}function _byteLength(n,e,t){return(e+t)*3/4-t}function toByteArray(n){var e,t=getLens(n),o=t[0],l=t[1],d=new Arr(_byteLength(n,o,l)),h=0,g=l>0?o-4:o,m;for(m=0;m<g;m+=4)e=revLookup[n.charCodeAt(m)]<<18|revLookup[n.charCodeAt(m+1)]<<12|revLookup[n.charCodeAt(m+2)]<<6|revLookup[n.charCodeAt(m+3)],d[h++]=e>>16&255,d[h++]=e>>8&255,d[h++]=e&255;return l===2&&(e=revLookup[n.charCodeAt(m)]<<2|revLookup[n.charCodeAt(m+1)]>>4,d[h++]=e&255),l===1&&(e=revLookup[n.charCodeAt(m)]<<10|revLookup[n.charCodeAt(m+1)]<<4|revLookup[n.charCodeAt(m+2)]>>2,d[h++]=e>>8&255,d[h++]=e&255),d}function tripletToBase64(n){return lookup[n>>18&63]+lookup[n>>12&63]+lookup[n>>6&63]+lookup[n&63]}function encodeChunk(n,e,t){for(var o,l=[],d=e;d<t;d+=3)o=(n[d]<<16&16711680)+(n[d+1]<<8&65280)+(n[d+2]&255),l.push(tripletToBase64(o));return l.join("")}function fromByteArray(n){for(var e,t=n.length,o=t%3,l=[],d=16383,h=0,g=t-o;h<g;h+=d)l.push(encodeChunk(n,h,h+d>g?g:h+d));return o===1?(e=n[t-1],l.push(lookup[e>>2]+lookup[e<<4&63]+"==")):o===2&&(e=(n[t-2]<<8)+n[t-1],l.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),l.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(n,e,t,o,l){var d,h,g=l*8-o-1,m=(1<<g)-1,y=m>>1,b=-7,w=t?l-1:0,E=t?-1:1,P=n[e+w];for(w+=E,d=P&(1<<-b)-1,P>>=-b,b+=g;b>0;d=d*256+n[e+w],w+=E,b-=8);for(h=d&(1<<-b)-1,d>>=-b,b+=o;b>0;h=h*256+n[e+w],w+=E,b-=8);if(d===0)d=1-y;else{if(d===m)return h?NaN:(P?-1:1)*(1/0);h=h+Math.pow(2,o),d=d-y}return(P?-1:1)*h*Math.pow(2,d-o)};ieee754.write=function(n,e,t,o,l,d){var h,g,m,y=d*8-l-1,b=(1<<y)-1,w=b>>1,E=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=o?0:d-1,$=o?1:-1,C=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(g=isNaN(e)?1:0,h=b):(h=Math.floor(Math.log(e)/Math.LN2),e*(m=Math.pow(2,-h))<1&&(h--,m*=2),h+w>=1?e+=E/m:e+=E*Math.pow(2,1-w),e*m>=2&&(h++,m/=2),h+w>=b?(g=0,h=b):h+w>=1?(g=(e*m-1)*Math.pow(2,l),h=h+w):(g=e*Math.pow(2,w-1)*Math.pow(2,l),h=0));l>=8;n[t+P]=g&255,P+=$,g/=256,l-=8);for(h=h<<l|g,y+=l;y>0;n[t+P]=h&255,P+=$,h/=256,y-=8);n[t+P-$]|=C*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){var e=base64Js,t=ieee754,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=g,n.SlowBuffer=Y,n.INSPECT_MAX_BYTES=50;var l=2147483647;n.kMaxLength=l,g.TYPED_ARRAY_SUPPORT=d(),!g.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{var de=new Uint8Array(1),U={foo:function(){return 42}};return Object.setPrototypeOf(U,Uint8Array.prototype),Object.setPrototypeOf(de,U),de.foo()===42}catch{return!1}}Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}});function h(de){if(de>l)throw new RangeError('The value "'+de+'" is invalid for option "size"');var U=new Uint8Array(de);return Object.setPrototypeOf(U,g.prototype),U}function g(de,U,H){if(typeof de=="number"){if(typeof U=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(de)}return m(de,U,H)}g.poolSize=8192;function m(de,U,H){if(typeof de=="string")return E(de,U);if(ArrayBuffer.isView(de))return $(de);if(de==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof de);if(Tt(de,ArrayBuffer)||de&&Tt(de.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Tt(de,SharedArrayBuffer)||de&&Tt(de.buffer,SharedArrayBuffer)))return C(de,U,H);if(typeof de=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var pe=de.valueOf&&de.valueOf();if(pe!=null&&pe!==de)return g.from(pe,U,H);var _e=L(de);if(_e)return _e;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof de[Symbol.toPrimitive]=="function")return g.from(de[Symbol.toPrimitive]("string"),U,H);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof de)}g.from=function(de,U,H){return m(de,U,H)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array);function y(de){if(typeof de!="number")throw new TypeError('"size" argument must be of type number');if(de<0)throw new RangeError('The value "'+de+'" is invalid for option "size"')}function b(de,U,H){return y(de),de<=0?h(de):U!==void 0?typeof H=="string"?h(de).fill(U,H):h(de).fill(U):h(de)}g.alloc=function(de,U,H){return b(de,U,H)};function w(de){return y(de),h(de<0?0:W(de)|0)}g.allocUnsafe=function(de){return w(de)},g.allocUnsafeSlow=function(de){return w(de)};function E(de,U){if((typeof U!="string"||U==="")&&(U="utf8"),!g.isEncoding(U))throw new TypeError("Unknown encoding: "+U);var H=D(de,U)|0,pe=h(H),_e=pe.write(de,U);return _e!==H&&(pe=pe.slice(0,_e)),pe}function P(de){for(var U=de.length<0?0:W(de.length)|0,H=h(U),pe=0;pe<U;pe+=1)H[pe]=de[pe]&255;return H}function $(de){if(Tt(de,Uint8Array)){var U=new Uint8Array(de);return C(U.buffer,U.byteOffset,U.byteLength)}return P(de)}function C(de,U,H){if(U<0||de.byteLength<U)throw new RangeError('"offset" is outside of buffer bounds');if(de.byteLength<U+(H||0))throw new RangeError('"length" is outside of buffer bounds');var pe;return U===void 0&&H===void 0?pe=new Uint8Array(de):H===void 0?pe=new Uint8Array(de,U):pe=new Uint8Array(de,U,H),Object.setPrototypeOf(pe,g.prototype),pe}function L(de){if(g.isBuffer(de)){var U=W(de.length)|0,H=h(U);return H.length===0||de.copy(H,0,0,U),H}if(de.length!==void 0)return typeof de.length!="number"||yn(de.length)?h(0):P(de);if(de.type==="Buffer"&&Array.isArray(de.data))return P(de.data)}function W(de){if(de>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return de|0}function Y(de){return+de!=de&&(de=0),g.alloc(+de)}g.isBuffer=function(U){return U!=null&&U._isBuffer===!0&&U!==g.prototype},g.compare=function(U,H){if(Tt(U,Uint8Array)&&(U=g.from(U,U.offset,U.byteLength)),Tt(H,Uint8Array)&&(H=g.from(H,H.offset,H.byteLength)),!g.isBuffer(U)||!g.isBuffer(H))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(U===H)return 0;for(var pe=U.length,_e=H.length,De=0,Be=Math.min(pe,_e);De<Be;++De)if(U[De]!==H[De]){pe=U[De],_e=H[De];break}return pe<_e?-1:_e<pe?1:0},g.isEncoding=function(U){switch(String(U).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(U,H){if(!Array.isArray(U))throw new TypeError('"list" argument must be an Array of Buffers');if(U.length===0)return g.alloc(0);var pe;if(H===void 0)for(H=0,pe=0;pe<U.length;++pe)H+=U[pe].length;var _e=g.allocUnsafe(H),De=0;for(pe=0;pe<U.length;++pe){var Be=U[pe];if(Tt(Be,Uint8Array))De+Be.length>_e.length?g.from(Be).copy(_e,De):Uint8Array.prototype.set.call(_e,Be,De);else if(g.isBuffer(Be))Be.copy(_e,De);else throw new TypeError('"list" argument must be an Array of Buffers');De+=Be.length}return _e};function D(de,U){if(g.isBuffer(de))return de.length;if(ArrayBuffer.isView(de)||Tt(de,ArrayBuffer))return de.byteLength;if(typeof de!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof de);var H=de.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&H===0)return 0;for(var _e=!1;;)switch(U){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return _t(de).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H*2;case"hex":return H>>>1;case"base64":return st(de).length;default:if(_e)return pe?-1:_t(de).length;U=(""+U).toLowerCase(),_e=!0}}g.byteLength=D;function k(de,U,H){var pe=!1;if((U===void 0||U<0)&&(U=0),U>this.length||((H===void 0||H>this.length)&&(H=this.length),H<=0)||(H>>>=0,U>>>=0,H<=U))return"";for(de||(de="utf8");;)switch(de){case"hex":return X(this,U,H);case"utf8":case"utf-8":return R(this,U,H);case"ascii":return ne(this,U,H);case"latin1":case"binary":return z(this,U,H);case"base64":return I(this,U,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,U,H);default:if(pe)throw new TypeError("Unknown encoding: "+de);de=(de+"").toLowerCase(),pe=!0}}g.prototype._isBuffer=!0;function F(de,U,H){var pe=de[U];de[U]=de[H],de[H]=pe}g.prototype.swap16=function(){var U=this.length;if(U%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var H=0;H<U;H+=2)F(this,H,H+1);return this},g.prototype.swap32=function(){var U=this.length;if(U%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var H=0;H<U;H+=4)F(this,H,H+3),F(this,H+1,H+2);return this},g.prototype.swap64=function(){var U=this.length;if(U%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var H=0;H<U;H+=8)F(this,H,H+7),F(this,H+1,H+6),F(this,H+2,H+5),F(this,H+3,H+4);return this},g.prototype.toString=function(){var U=this.length;return U===0?"":arguments.length===0?R(this,0,U):k.apply(this,arguments)},g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=function(U){if(!g.isBuffer(U))throw new TypeError("Argument must be a Buffer");return this===U?!0:g.compare(this,U)===0},g.prototype.inspect=function(){var U="",H=n.INSPECT_MAX_BYTES;return U=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim(),this.length>H&&(U+=" ... "),"<Buffer "+U+">"},o&&(g.prototype[o]=g.prototype.inspect),g.prototype.compare=function(U,H,pe,_e,De){if(Tt(U,Uint8Array)&&(U=g.from(U,U.offset,U.byteLength)),!g.isBuffer(U))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof U);if(H===void 0&&(H=0),pe===void 0&&(pe=U?U.length:0),_e===void 0&&(_e=0),De===void 0&&(De=this.length),H<0||pe>U.length||_e<0||De>this.length)throw new RangeError("out of range index");if(_e>=De&&H>=pe)return 0;if(_e>=De)return-1;if(H>=pe)return 1;if(H>>>=0,pe>>>=0,_e>>>=0,De>>>=0,this===U)return 0;for(var Be=De-_e,Re=pe-H,nt=Math.min(Be,Re),It=this.slice(_e,De),Yt=U.slice(H,pe),dt=0;dt<nt;++dt)if(It[dt]!==Yt[dt]){Be=It[dt],Re=Yt[dt];break}return Be<Re?-1:Re<Be?1:0};function ce(de,U,H,pe,_e){if(de.length===0)return-1;if(typeof H=="string"?(pe=H,H=0):H>2147483647?H=2147483647:H<-2147483648&&(H=-2147483648),H=+H,yn(H)&&(H=_e?0:de.length-1),H<0&&(H=de.length+H),H>=de.length){if(_e)return-1;H=de.length-1}else if(H<0)if(_e)H=0;else return-1;if(typeof U=="string"&&(U=g.from(U,pe)),g.isBuffer(U))return U.length===0?-1:q(de,U,H,pe,_e);if(typeof U=="number")return U=U&255,typeof Uint8Array.prototype.indexOf=="function"?_e?Uint8Array.prototype.indexOf.call(de,U,H):Uint8Array.prototype.lastIndexOf.call(de,U,H):q(de,[U],H,pe,_e);throw new TypeError("val must be string, number or Buffer")}function q(de,U,H,pe,_e){var De=1,Be=de.length,Re=U.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(de.length<2||U.length<2)return-1;De=2,Be/=2,Re/=2,H/=2}function nt(ke,rn){return De===1?ke[rn]:ke.readUInt16BE(rn*De)}var It;if(_e){var Yt=-1;for(It=H;It<Be;It++)if(nt(de,It)===nt(U,Yt===-1?0:It-Yt)){if(Yt===-1&&(Yt=It),It-Yt+1===Re)return Yt*De}else Yt!==-1&&(It-=It-Yt),Yt=-1}else for(H+Re>Be&&(H=Be-Re),It=H;It>=0;It--){for(var dt=!0,Kt=0;Kt<Re;Kt++)if(nt(de,It+Kt)!==nt(U,Kt)){dt=!1;break}if(dt)return It}return-1}g.prototype.includes=function(U,H,pe){return this.indexOf(U,H,pe)!==-1},g.prototype.indexOf=function(U,H,pe){return ce(this,U,H,pe,!0)},g.prototype.lastIndexOf=function(U,H,pe){return ce(this,U,H,pe,!1)};function te(de,U,H,pe){H=Number(H)||0;var _e=de.length-H;pe?(pe=Number(pe),pe>_e&&(pe=_e)):pe=_e;var De=U.length;pe>De/2&&(pe=De/2);for(var Be=0;Be<pe;++Be){var Re=parseInt(U.substr(Be*2,2),16);if(yn(Re))return Be;de[H+Be]=Re}return Be}function Q(de,U,H,pe){return Oe(_t(U,de.length-H),de,H,pe)}function ie(de,U,H,pe){return Oe(Qe(U),de,H,pe)}function J(de,U,H,pe){return Oe(st(U),de,H,pe)}function x(de,U,H,pe){return Oe(tt(U,de.length-H),de,H,pe)}g.prototype.write=function(U,H,pe,_e){if(H===void 0)_e="utf8",pe=this.length,H=0;else if(pe===void 0&&typeof H=="string")_e=H,pe=this.length,H=0;else if(isFinite(H))H=H>>>0,isFinite(pe)?(pe=pe>>>0,_e===void 0&&(_e="utf8")):(_e=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var De=this.length-H;if((pe===void 0||pe>De)&&(pe=De),U.length>0&&(pe<0||H<0)||H>this.length)throw new RangeError("Attempt to write outside buffer bounds");_e||(_e="utf8");for(var Be=!1;;)switch(_e){case"hex":return te(this,U,H,pe);case"utf8":case"utf-8":return Q(this,U,H,pe);case"ascii":case"latin1":case"binary":return ie(this,U,H,pe);case"base64":return J(this,U,H,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,U,H,pe);default:if(Be)throw new TypeError("Unknown encoding: "+_e);_e=(""+_e).toLowerCase(),Be=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(de,U,H){return U===0&&H===de.length?e.fromByteArray(de):e.fromByteArray(de.slice(U,H))}function R(de,U,H){H=Math.min(de.length,H);for(var pe=[],_e=U;_e<H;){var De=de[_e],Be=null,Re=De>239?4:De>223?3:De>191?2:1;if(_e+Re<=H){var nt,It,Yt,dt;switch(Re){case 1:De<128&&(Be=De);break;case 2:nt=de[_e+1],(nt&192)===128&&(dt=(De&31)<<6|nt&63,dt>127&&(Be=dt));break;case 3:nt=de[_e+1],It=de[_e+2],(nt&192)===128&&(It&192)===128&&(dt=(De&15)<<12|(nt&63)<<6|It&63,dt>2047&&(dt<55296||dt>57343)&&(Be=dt));break;case 4:nt=de[_e+1],It=de[_e+2],Yt=de[_e+3],(nt&192)===128&&(It&192)===128&&(Yt&192)===128&&(dt=(De&15)<<18|(nt&63)<<12|(It&63)<<6|Yt&63,dt>65535&&dt<1114112&&(Be=dt))}}Be===null?(Be=65533,Re=1):Be>65535&&(Be-=65536,pe.push(Be>>>10&1023|55296),Be=56320|Be&1023),pe.push(Be),_e+=Re}return ee(pe)}var B=4096;function ee(de){var U=de.length;if(U<=B)return String.fromCharCode.apply(String,de);for(var H="",pe=0;pe<U;)H+=String.fromCharCode.apply(String,de.slice(pe,pe+=B));return H}function ne(de,U,H){var pe="";H=Math.min(de.length,H);for(var _e=U;_e<H;++_e)pe+=String.fromCharCode(de[_e]&127);return pe}function z(de,U,H){var pe="";H=Math.min(de.length,H);for(var _e=U;_e<H;++_e)pe+=String.fromCharCode(de[_e]);return pe}function X(de,U,H){var pe=de.length;(!U||U<0)&&(U=0),(!H||H<0||H>pe)&&(H=pe);for(var _e="",De=U;De<H;++De)_e+=St[de[De]];return _e}function A(de,U,H){for(var pe=de.slice(U,H),_e="",De=0;De<pe.length-1;De+=2)_e+=String.fromCharCode(pe[De]+pe[De+1]*256);return _e}g.prototype.slice=function(U,H){var pe=this.length;U=~~U,H=H===void 0?pe:~~H,U<0?(U+=pe,U<0&&(U=0)):U>pe&&(U=pe),H<0?(H+=pe,H<0&&(H=0)):H>pe&&(H=pe),H<U&&(H=U);var _e=this.subarray(U,H);return Object.setPrototypeOf(_e,g.prototype),_e};function Z(de,U,H){if(de%1!==0||de<0)throw new RangeError("offset is not uint");if(de+U>H)throw new RangeError("Trying to access beyond buffer length")}g.prototype.readUintLE=g.prototype.readUIntLE=function(U,H,pe){U=U>>>0,H=H>>>0,pe||Z(U,H,this.length);for(var _e=this[U],De=1,Be=0;++Be<H&&(De*=256);)_e+=this[U+Be]*De;return _e},g.prototype.readUintBE=g.prototype.readUIntBE=function(U,H,pe){U=U>>>0,H=H>>>0,pe||Z(U,H,this.length);for(var _e=this[U+--H],De=1;H>0&&(De*=256);)_e+=this[U+--H]*De;return _e},g.prototype.readUint8=g.prototype.readUInt8=function(U,H){return U=U>>>0,H||Z(U,1,this.length),this[U]},g.prototype.readUint16LE=g.prototype.readUInt16LE=function(U,H){return U=U>>>0,H||Z(U,2,this.length),this[U]|this[U+1]<<8},g.prototype.readUint16BE=g.prototype.readUInt16BE=function(U,H){return U=U>>>0,H||Z(U,2,this.length),this[U]<<8|this[U+1]},g.prototype.readUint32LE=g.prototype.readUInt32LE=function(U,H){return U=U>>>0,H||Z(U,4,this.length),(this[U]|this[U+1]<<8|this[U+2]<<16)+this[U+3]*16777216},g.prototype.readUint32BE=g.prototype.readUInt32BE=function(U,H){return U=U>>>0,H||Z(U,4,this.length),this[U]*16777216+(this[U+1]<<16|this[U+2]<<8|this[U+3])},g.prototype.readIntLE=function(U,H,pe){U=U>>>0,H=H>>>0,pe||Z(U,H,this.length);for(var _e=this[U],De=1,Be=0;++Be<H&&(De*=256);)_e+=this[U+Be]*De;return De*=128,_e>=De&&(_e-=Math.pow(2,8*H)),_e},g.prototype.readIntBE=function(U,H,pe){U=U>>>0,H=H>>>0,pe||Z(U,H,this.length);for(var _e=H,De=1,Be=this[U+--_e];_e>0&&(De*=256);)Be+=this[U+--_e]*De;return De*=128,Be>=De&&(Be-=Math.pow(2,8*H)),Be},g.prototype.readInt8=function(U,H){return U=U>>>0,H||Z(U,1,this.length),this[U]&128?(255-this[U]+1)*-1:this[U]},g.prototype.readInt16LE=function(U,H){U=U>>>0,H||Z(U,2,this.length);var pe=this[U]|this[U+1]<<8;return pe&32768?pe|4294901760:pe},g.prototype.readInt16BE=function(U,H){U=U>>>0,H||Z(U,2,this.length);var pe=this[U+1]|this[U]<<8;return pe&32768?pe|4294901760:pe},g.prototype.readInt32LE=function(U,H){return U=U>>>0,H||Z(U,4,this.length),this[U]|this[U+1]<<8|this[U+2]<<16|this[U+3]<<24},g.prototype.readInt32BE=function(U,H){return U=U>>>0,H||Z(U,4,this.length),this[U]<<24|this[U+1]<<16|this[U+2]<<8|this[U+3]},g.prototype.readFloatLE=function(U,H){return U=U>>>0,H||Z(U,4,this.length),t.read(this,U,!0,23,4)},g.prototype.readFloatBE=function(U,H){return U=U>>>0,H||Z(U,4,this.length),t.read(this,U,!1,23,4)},g.prototype.readDoubleLE=function(U,H){return U=U>>>0,H||Z(U,8,this.length),t.read(this,U,!0,52,8)},g.prototype.readDoubleBE=function(U,H){return U=U>>>0,H||Z(U,8,this.length),t.read(this,U,!1,52,8)};function $e(de,U,H,pe,_e,De){if(!g.isBuffer(de))throw new TypeError('"buffer" argument must be a Buffer instance');if(U>_e||U<De)throw new RangeError('"value" argument is out of bounds');if(H+pe>de.length)throw new RangeError("Index out of range")}g.prototype.writeUintLE=g.prototype.writeUIntLE=function(U,H,pe,_e){if(U=+U,H=H>>>0,pe=pe>>>0,!_e){var De=Math.pow(2,8*pe)-1;$e(this,U,H,pe,De,0)}var Be=1,Re=0;for(this[H]=U&255;++Re<pe&&(Be*=256);)this[H+Re]=U/Be&255;return H+pe},g.prototype.writeUintBE=g.prototype.writeUIntBE=function(U,H,pe,_e){if(U=+U,H=H>>>0,pe=pe>>>0,!_e){var De=Math.pow(2,8*pe)-1;$e(this,U,H,pe,De,0)}var Be=pe-1,Re=1;for(this[H+Be]=U&255;--Be>=0&&(Re*=256);)this[H+Be]=U/Re&255;return H+pe},g.prototype.writeUint8=g.prototype.writeUInt8=function(U,H,pe){return U=+U,H=H>>>0,pe||$e(this,U,H,1,255,0),this[H]=U&255,H+1},g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(U,H,pe){return U=+U,H=H>>>0,pe||$e(this,U,H,2,65535,0),this[H]=U&255,this[H+1]=U>>>8,H+2},g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(U,H,pe){return U=+U,H=H>>>0,pe||$e(this,U,H,2,65535,0),this[H]=U>>>8,this[H+1]=U&255,H+2},g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(U,H,pe){return U=+U,H=H>>>0,pe||$e(this,U,H,4,4294967295,0),this[H+3]=U>>>24,this[H+2]=U>>>16,this[H+1]=U>>>8,this[H]=U&255,H+4},g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(U,H,pe){return U=+U,H=H>>>0,pe||$e(this,U,H,4,4294967295,0),this[H]=U>>>24,this[H+1]=U>>>16,this[H+2]=U>>>8,this[H+3]=U&255,H+4},g.prototype.writeIntLE=function(U,H,pe,_e){if(U=+U,H=H>>>0,!_e){var De=Math.pow(2,8*pe-1);$e(this,U,H,pe,De-1,-De)}var Be=0,Re=1,nt=0;for(this[H]=U&255;++Be<pe&&(Re*=256);)U<0&&nt===0&&this[H+Be-1]!==0&&(nt=1),this[H+Be]=(U/Re>>0)-nt&255;return H+pe},g.prototype.writeIntBE=function(U,H,pe,_e){if(U=+U,H=H>>>0,!_e){var De=Math.pow(2,8*pe-1);$e(this,U,H,pe,De-1,-De)}var Be=pe-1,Re=1,nt=0;for(this[H+Be]=U&255;--Be>=0&&(Re*=256);)U<0&&nt===0&&this[H+Be+1]!==0&&(nt=1),this[H+Be]=(U/Re>>0)-nt&255;return H+pe},g.prototype.writeInt8=function(U,H,pe){return U=+U,H=H>>>0,pe||$e(this,U,H,1,127,-128),U<0&&(U=255+U+1),this[H]=U&255,H+1},g.prototype.writeInt16LE=function(U,H,pe){return U=+U,H=H>>>0,pe||$e(this,U,H,2,32767,-32768),this[H]=U&255,this[H+1]=U>>>8,H+2},g.prototype.writeInt16BE=function(U,H,pe){return U=+U,H=H>>>0,pe||$e(this,U,H,2,32767,-32768),this[H]=U>>>8,this[H+1]=U&255,H+2},g.prototype.writeInt32LE=function(U,H,pe){return U=+U,H=H>>>0,pe||$e(this,U,H,4,2147483647,-2147483648),this[H]=U&255,this[H+1]=U>>>8,this[H+2]=U>>>16,this[H+3]=U>>>24,H+4},g.prototype.writeInt32BE=function(U,H,pe){return U=+U,H=H>>>0,pe||$e(this,U,H,4,2147483647,-2147483648),U<0&&(U=4294967295+U+1),this[H]=U>>>24,this[H+1]=U>>>16,this[H+2]=U>>>8,this[H+3]=U&255,H+4};function Ne(de,U,H,pe,_e,De){if(H+pe>de.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function Me(de,U,H,pe,_e){return U=+U,H=H>>>0,_e||Ne(de,U,H,4),t.write(de,U,H,pe,23,4),H+4}g.prototype.writeFloatLE=function(U,H,pe){return Me(this,U,H,!0,pe)},g.prototype.writeFloatBE=function(U,H,pe){return Me(this,U,H,!1,pe)};function Ee(de,U,H,pe,_e){return U=+U,H=H>>>0,_e||Ne(de,U,H,8),t.write(de,U,H,pe,52,8),H+8}g.prototype.writeDoubleLE=function(U,H,pe){return Ee(this,U,H,!0,pe)},g.prototype.writeDoubleBE=function(U,H,pe){return Ee(this,U,H,!1,pe)},g.prototype.copy=function(U,H,pe,_e){if(!g.isBuffer(U))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!_e&&_e!==0&&(_e=this.length),H>=U.length&&(H=U.length),H||(H=0),_e>0&&_e<pe&&(_e=pe),_e===pe||U.length===0||this.length===0)return 0;if(H<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(_e<0)throw new RangeError("sourceEnd out of bounds");_e>this.length&&(_e=this.length),U.length-H<_e-pe&&(_e=U.length-H+pe);var De=_e-pe;return this===U&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(H,pe,_e):Uint8Array.prototype.set.call(U,this.subarray(pe,_e),H),De},g.prototype.fill=function(U,H,pe,_e){if(typeof U=="string"){if(typeof H=="string"?(_e=H,H=0,pe=this.length):typeof pe=="string"&&(_e=pe,pe=this.length),_e!==void 0&&typeof _e!="string")throw new TypeError("encoding must be a string");if(typeof _e=="string"&&!g.isEncoding(_e))throw new TypeError("Unknown encoding: "+_e);if(U.length===1){var De=U.charCodeAt(0);(_e==="utf8"&&De<128||_e==="latin1")&&(U=De)}}else typeof U=="number"?U=U&255:typeof U=="boolean"&&(U=Number(U));if(H<0||this.length<H||this.length<pe)throw new RangeError("Out of range index");if(pe<=H)return this;H=H>>>0,pe=pe===void 0?this.length:pe>>>0,U||(U=0);var Be;if(typeof U=="number")for(Be=H;Be<pe;++Be)this[Be]=U;else{var Re=g.isBuffer(U)?U:g.from(U,_e),nt=Re.length;if(nt===0)throw new TypeError('The value "'+U+'" is invalid for argument "value"');for(Be=0;Be<pe-H;++Be)this[Be+H]=Re[Be%nt]}return this};var Ve=/[^+/0-9A-Za-z-_]/g;function qe(de){if(de=de.split("=")[0],de=de.trim().replace(Ve,""),de.length<2)return"";for(;de.length%4!==0;)de=de+"=";return de}function _t(de,U){U=U||1/0;for(var H,pe=de.length,_e=null,De=[],Be=0;Be<pe;++Be){if(H=de.charCodeAt(Be),H>55295&&H<57344){if(!_e){if(H>56319){(U-=3)>-1&&De.push(239,191,189);continue}else if(Be+1===pe){(U-=3)>-1&&De.push(239,191,189);continue}_e=H;continue}if(H<56320){(U-=3)>-1&&De.push(239,191,189),_e=H;continue}H=(_e-55296<<10|H-56320)+65536}else _e&&(U-=3)>-1&&De.push(239,191,189);if(_e=null,H<128){if((U-=1)<0)break;De.push(H)}else if(H<2048){if((U-=2)<0)break;De.push(H>>6|192,H&63|128)}else if(H<65536){if((U-=3)<0)break;De.push(H>>12|224,H>>6&63|128,H&63|128)}else if(H<1114112){if((U-=4)<0)break;De.push(H>>18|240,H>>12&63|128,H>>6&63|128,H&63|128)}else throw new Error("Invalid code point")}return De}function Qe(de){for(var U=[],H=0;H<de.length;++H)U.push(de.charCodeAt(H)&255);return U}function tt(de,U){for(var H,pe,_e,De=[],Be=0;Be<de.length&&!((U-=2)<0);++Be)H=de.charCodeAt(Be),pe=H>>8,_e=H%256,De.push(_e),De.push(pe);return De}function st(de){return e.toByteArray(qe(de))}function Oe(de,U,H,pe){for(var _e=0;_e<pe&&!(_e+H>=U.length||_e>=de.length);++_e)U[_e+H]=de[_e];return _e}function Tt(de,U){return de instanceof U||de!=null&&de.constructor!=null&&de.constructor.name!=null&&de.constructor.name===U.name}function yn(de){return de!==de}var St=function(){for(var de="0123456789abcdef",U=new Array(256),H=0;H<16;++H)for(var pe=H*16,_e=0;_e<16;++_e)U[pe+_e]=de[H]+de[_e];return U}()})(buffer$2);var buffer$1=buffer$2,Buffer$6=buffer$1.Buffer,safer={},key$2;for(key$2 in buffer$1)buffer$1.hasOwnProperty(key$2)&&(key$2==="SlowBuffer"||key$2==="Buffer"||(safer[key$2]=buffer$1[key$2]));var Safer=safer.Buffer={};for(key$2 in Buffer$6)Buffer$6.hasOwnProperty(key$2)&&(key$2==="allocUnsafe"||key$2==="allocUnsafeSlow"||(Safer[key$2]=Buffer$6[key$2]));safer.Buffer.prototype=Buffer$6.prototype;(!Safer.from||Safer.from===Uint8Array.from)&&(Safer.from=function(n,e,t){if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof n);if(n&&typeof n.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);return Buffer$6(n,e,t)});Safer.alloc||(Safer.alloc=function(n,e,t){if(typeof n!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof n);if(n<0||n>=2*(1<<30))throw new RangeError('The value "'+n+'" is invalid for option "size"');var o=Buffer$6(n);return!e||e.length===0?o.fill(0):typeof t=="string"?o.fill(e,t):o.fill(e),o});if(!safer.kStringMaxLength)try{safer.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}safer.constants||(safer.constants={MAX_LENGTH:safer.kMaxLength},safer.kStringMaxLength&&(safer.constants.MAX_STRING_LENGTH=safer.kStringMaxLength));var safer_1=safer,reporter={};const inherits$a=inherits_browserExports;function Reporter$2(n){this._reporterState={obj:null,path:[],options:n||{},errors:[]}}reporter.Reporter=Reporter$2;Reporter$2.prototype.isError=function n(e){return e instanceof ReporterError};Reporter$2.prototype.save=function n(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};Reporter$2.prototype.restore=function n(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)};Reporter$2.prototype.enterKey=function n(e){return this._reporterState.path.push(e)};Reporter$2.prototype.exitKey=function n(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)};Reporter$2.prototype.leaveKey=function n(e,t,o){const l=this._reporterState;this.exitKey(e),l.obj!==null&&(l.obj[t]=o)};Reporter$2.prototype.path=function n(){return this._reporterState.path.join("/")};Reporter$2.prototype.enterObject=function n(){const e=this._reporterState,t=e.obj;return e.obj={},t};Reporter$2.prototype.leaveObject=function n(e){const t=this._reporterState,o=t.obj;return t.obj=e,o};Reporter$2.prototype.error=function n(e){let t;const o=this._reporterState,l=e instanceof ReporterError;if(l?t=e:t=new ReporterError(o.path.map(function(d){return"["+JSON.stringify(d)+"]"}).join(""),e.message||e,e.stack),!o.options.partial)throw t;return l||o.errors.push(t),t};Reporter$2.prototype.wrapResult=function n(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e};function ReporterError(n,e){this.path=n,this.rethrow(e)}inherits$a(ReporterError,Error);ReporterError.prototype.rethrow=function n(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ReporterError),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this};var buffer={};const inherits$9=inherits_browserExports,Reporter$1=reporter.Reporter,Buffer$5=safer_1.Buffer;function DecoderBuffer$2(n,e){if(Reporter$1.call(this,e),!Buffer$5.isBuffer(n)){this.error("Input not Buffer");return}this.base=n,this.offset=0,this.length=n.length}inherits$9(DecoderBuffer$2,Reporter$1);buffer.DecoderBuffer=DecoderBuffer$2;DecoderBuffer$2.isDecoderBuffer=function n(e){return e instanceof DecoderBuffer$2?!0:typeof e=="object"&&Buffer$5.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};DecoderBuffer$2.prototype.save=function n(){return{offset:this.offset,reporter:Reporter$1.prototype.save.call(this)}};DecoderBuffer$2.prototype.restore=function n(e){const t=new DecoderBuffer$2(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,Reporter$1.prototype.restore.call(this,e.reporter),t};DecoderBuffer$2.prototype.isEmpty=function n(){return this.offset===this.length};DecoderBuffer$2.prototype.readUInt8=function n(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};DecoderBuffer$2.prototype.skip=function n(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const o=new DecoderBuffer$2(this.base);return o._reporterState=this._reporterState,o.offset=this.offset,o.length=this.offset+e,this.offset+=e,o};DecoderBuffer$2.prototype.raw=function n(e){return this.base.slice(e?e.offset:this.offset,this.length)};function EncoderBuffer$1(n,e){if(Array.isArray(n))this.length=0,this.value=n.map(function(t){return EncoderBuffer$1.isEncoderBuffer(t)||(t=new EncoderBuffer$1(t,e)),this.length+=t.length,t},this);else if(typeof n=="number"){if(!(0<=n&&n<=255))return e.error("non-byte EncoderBuffer value");this.value=n,this.length=1}else if(typeof n=="string")this.value=n,this.length=Buffer$5.byteLength(n);else if(Buffer$5.isBuffer(n))this.value=n,this.length=n.length;else return e.error("Unsupported type: "+typeof n)}buffer.EncoderBuffer=EncoderBuffer$1;EncoderBuffer$1.isEncoderBuffer=function n(e){return e instanceof EncoderBuffer$1?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};EncoderBuffer$1.prototype.join=function n(e,t){return e||(e=Buffer$5.alloc(this.length)),t||(t=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(o){o.join(e,t),t+=o.length}):(typeof this.value=="number"?e[t]=this.value:typeof this.value=="string"?e.write(this.value,t):Buffer$5.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e};var minimalisticAssert=assert$g;function assert$g(n,e){if(!n)throw new Error(e||"Assertion failed")}assert$g.equal=function n(e,t,o){if(e!=t)throw new Error(o||"Assertion failed: "+e+" != "+t)};const Reporter=reporter.Reporter,EncoderBuffer=buffer.EncoderBuffer,DecoderBuffer$1=buffer.DecoderBuffer,assert$f=minimalisticAssert,tags=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],methods=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(tags),overrided=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function Node$2(n,e,t){const o={};this._baseState=o,o.name=t,o.enc=n,o.parent=e||null,o.children=null,o.tag=null,o.args=null,o.reverseArgs=null,o.choice=null,o.optional=!1,o.any=!1,o.obj=!1,o.use=null,o.useDecoder=null,o.key=null,o.default=null,o.explicit=null,o.implicit=null,o.contains=null,o.parent||(o.children=[],this._wrap())}var node=Node$2;const stateProps=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Node$2.prototype.clone=function n(){const e=this._baseState,t={};stateProps.forEach(function(l){t[l]=e[l]});const o=new this.constructor(t.parent);return o._baseState=t,o};Node$2.prototype._wrap=function n(){const e=this._baseState;methods.forEach(function(t){this[t]=function(){const l=new this.constructor(this);return e.children.push(l),l[t].apply(l,arguments)}},this)};Node$2.prototype._init=function n(e){const t=this._baseState;assert$f(t.parent===null),e.call(this),t.children=t.children.filter(function(o){return o._baseState.parent===this},this),assert$f.equal(t.children.length,1,"Root node can have only one child")};Node$2.prototype._useArgs=function n(e){const t=this._baseState,o=e.filter(function(l){return l instanceof this.constructor},this);e=e.filter(function(l){return!(l instanceof this.constructor)},this),o.length!==0&&(assert$f(t.children===null),t.children=o,o.forEach(function(l){l._baseState.parent=this},this)),e.length!==0&&(assert$f(t.args===null),t.args=e,t.reverseArgs=e.map(function(l){if(typeof l!="object"||l.constructor!==Object)return l;const d={};return Object.keys(l).forEach(function(h){h==(h|0)&&(h|=0);const g=l[h];d[g]=h}),d}))};overrided.forEach(function(n){Node$2.prototype[n]=function(){const t=this._baseState;throw new Error(n+" not implemented for encoding: "+t.enc)}});tags.forEach(function(n){Node$2.prototype[n]=function(){const t=this._baseState,o=Array.prototype.slice.call(arguments);return assert$f(t.tag===null),t.tag=n,this._useArgs(o),this}});Node$2.prototype.use=function n(e){assert$f(e);const t=this._baseState;return assert$f(t.use===null),t.use=e,this};Node$2.prototype.optional=function n(){const e=this._baseState;return e.optional=!0,this};Node$2.prototype.def=function n(e){const t=this._baseState;return assert$f(t.default===null),t.default=e,t.optional=!0,this};Node$2.prototype.explicit=function n(e){const t=this._baseState;return assert$f(t.explicit===null&&t.implicit===null),t.explicit=e,this};Node$2.prototype.implicit=function n(e){const t=this._baseState;return assert$f(t.explicit===null&&t.implicit===null),t.implicit=e,this};Node$2.prototype.obj=function n(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,t.length!==0&&this._useArgs(t),this};Node$2.prototype.key=function n(e){const t=this._baseState;return assert$f(t.key===null),t.key=e,this};Node$2.prototype.any=function n(){const e=this._baseState;return e.any=!0,this};Node$2.prototype.choice=function n(e){const t=this._baseState;return assert$f(t.choice===null),t.choice=e,this._useArgs(Object.keys(e).map(function(o){return e[o]})),this};Node$2.prototype.contains=function n(e){const t=this._baseState;return assert$f(t.use===null),t.contains=e,this};Node$2.prototype._decode=function n(e,t){const o=this._baseState;if(o.parent===null)return e.wrapResult(o.children[0]._decode(e,t));let l=o.default,d=!0,h=null;if(o.key!==null&&(h=e.enterKey(o.key)),o.optional){let m=null;if(o.explicit!==null?m=o.explicit:o.implicit!==null?m=o.implicit:o.tag!==null&&(m=o.tag),m===null&&!o.any){const y=e.save();try{o.choice===null?this._decodeGeneric(o.tag,e,t):this._decodeChoice(e,t),d=!0}catch{d=!1}e.restore(y)}else if(d=this._peekTag(e,m,o.any),e.isError(d))return d}let g;if(o.obj&&d&&(g=e.enterObject()),d){if(o.explicit!==null){const y=this._decodeTag(e,o.explicit);if(e.isError(y))return y;e=y}const m=e.offset;if(o.use===null&&o.choice===null){let y;o.any&&(y=e.save());const b=this._decodeTag(e,o.implicit!==null?o.implicit:o.tag,o.any);if(e.isError(b))return b;o.any?l=e.raw(y):e=b}if(t&&t.track&&o.tag!==null&&t.track(e.path(),m,e.length,"tagged"),t&&t.track&&o.tag!==null&&t.track(e.path(),e.offset,e.length,"content"),o.any||(o.choice===null?l=this._decodeGeneric(o.tag,e,t):l=this._decodeChoice(e,t)),e.isError(l))return l;if(!o.any&&o.choice===null&&o.children!==null&&o.children.forEach(function(b){b._decode(e,t)}),o.contains&&(o.tag==="octstr"||o.tag==="bitstr")){const y=new DecoderBuffer$1(l);l=this._getUse(o.contains,e._reporterState.obj)._decode(y,t)}}return o.obj&&d&&(l=e.leaveObject(g)),o.key!==null&&(l!==null||d===!0)?e.leaveKey(h,o.key,l):h!==null&&e.exitKey(h),l};Node$2.prototype._decodeGeneric=function n(e,t,o){const l=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(t,e,l.args[0],o):/str$/.test(e)?this._decodeStr(t,e,o):e==="objid"&&l.args?this._decodeObjid(t,l.args[0],l.args[1],o):e==="objid"?this._decodeObjid(t,null,null,o):e==="gentime"||e==="utctime"?this._decodeTime(t,e,o):e==="null_"?this._decodeNull(t,o):e==="bool"?this._decodeBool(t,o):e==="objDesc"?this._decodeStr(t,e,o):e==="int"||e==="enum"?this._decodeInt(t,l.args&&l.args[0],o):l.use!==null?this._getUse(l.use,t._reporterState.obj)._decode(t,o):t.error("unknown tag: "+e)};Node$2.prototype._getUse=function n(e,t){const o=this._baseState;return o.useDecoder=this._use(e,t),assert$f(o.useDecoder._baseState.parent===null),o.useDecoder=o.useDecoder._baseState.children[0],o.implicit!==o.useDecoder._baseState.implicit&&(o.useDecoder=o.useDecoder.clone(),o.useDecoder._baseState.implicit=o.implicit),o.useDecoder};Node$2.prototype._decodeChoice=function n(e,t){const o=this._baseState;let l=null,d=!1;return Object.keys(o.choice).some(function(h){const g=e.save(),m=o.choice[h];try{const y=m._decode(e,t);if(e.isError(y))return!1;l={type:h,value:y},d=!0}catch{return e.restore(g),!1}return!0},this),d?l:e.error("Choice not matched")};Node$2.prototype._createEncoderBuffer=function n(e){return new EncoderBuffer(e,this.reporter)};Node$2.prototype._encode=function n(e,t,o){const l=this._baseState;if(l.default!==null&&l.default===e)return;const d=this._encodeValue(e,t,o);if(d!==void 0&&!this._skipDefault(d,t,o))return d};Node$2.prototype._encodeValue=function n(e,t,o){const l=this._baseState;if(l.parent===null)return l.children[0]._encode(e,t||new Reporter);let d=null;if(this.reporter=t,l.optional&&e===void 0)if(l.default!==null)e=l.default;else return;let h=null,g=!1;if(l.any)d=this._createEncoderBuffer(e);else if(l.choice)d=this._encodeChoice(e,t);else if(l.contains)h=this._getUse(l.contains,o)._encode(e,t),g=!0;else if(l.children)h=l.children.map(function(m){if(m._baseState.tag==="null_")return m._encode(null,t,e);if(m._baseState.key===null)return t.error("Child should have a key");const y=t.enterKey(m._baseState.key);if(typeof e!="object")return t.error("Child expected, but input is not object");const b=m._encode(e[m._baseState.key],t,e);return t.leaveKey(y),b},this).filter(function(m){return m}),h=this._createEncoderBuffer(h);else if(l.tag==="seqof"||l.tag==="setof"){if(!(l.args&&l.args.length===1))return t.error("Too many args for : "+l.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const m=this.clone();m._baseState.implicit=null,h=this._createEncoderBuffer(e.map(function(y){const b=this._baseState;return this._getUse(b.args[0],e)._encode(y,t)},m))}else l.use!==null?d=this._getUse(l.use,o)._encode(e,t):(h=this._encodePrimitive(l.tag,e),g=!0);if(!l.any&&l.choice===null){const m=l.implicit!==null?l.implicit:l.tag,y=l.implicit===null?"universal":"context";m===null?l.use===null&&t.error("Tag could be omitted only for .use()"):l.use===null&&(d=this._encodeComposite(m,g,y,h))}return l.explicit!==null&&(d=this._encodeComposite(l.explicit,!1,"context",d)),d};Node$2.prototype._encodeChoice=function n(e,t){const o=this._baseState,l=o.choice[e.type];return l||assert$f(!1,e.type+" not found in "+JSON.stringify(Object.keys(o.choice))),l._encode(e.value,t)};Node$2.prototype._encodePrimitive=function n(e,t){const o=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if(e==="objid"&&o.args)return this._encodeObjid(t,o.reverseArgs[0],o.args[1]);if(e==="objid")return this._encodeObjid(t,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(t,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(t,o.args&&o.reverseArgs[0]);if(e==="bool")return this._encodeBool(t);if(e==="objDesc")return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)};Node$2.prototype._isNumstr=function n(e){return/^[0-9 ]*$/.test(e)};Node$2.prototype._isPrintstr=function n(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)};var der$2={};(function(n){function e(t){const o={};return Object.keys(t).forEach(function(l){(l|0)==l&&(l=l|0);const d=t[l];o[d]=l}),o}n.tagClass={0:"universal",1:"application",2:"context",3:"private"},n.tagClassByName=e(n.tagClass),n.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},n.tagByName=e(n.tag)})(der$2);const inherits$8=inherits_browserExports,Buffer$4=safer_1.Buffer,Node$1=node,der$1=der$2;function DEREncoder$1(n){this.enc="der",this.name=n.name,this.entity=n,this.tree=new DERNode$1,this.tree._init(n.body)}var der_1$1=DEREncoder$1;DEREncoder$1.prototype.encode=function n(e,t){return this.tree._encode(e,t).join()};function DERNode$1(n){Node$1.call(this,"der",n)}inherits$8(DERNode$1,Node$1);DERNode$1.prototype._encodeComposite=function n(e,t,o,l){const d=encodeTag(e,t,o,this.reporter);if(l.length<128){const m=Buffer$4.alloc(2);return m[0]=d,m[1]=l.length,this._createEncoderBuffer([m,l])}let h=1;for(let m=l.length;m>=256;m>>=8)h++;const g=Buffer$4.alloc(1+1+h);g[0]=d,g[1]=128|h;for(let m=1+h,y=l.length;y>0;m--,y>>=8)g[m]=y&255;return this._createEncoderBuffer([g,l])};DERNode$1.prototype._encodeStr=function n(e,t){if(t==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(t==="bmpstr"){const o=Buffer$4.alloc(e.length*2);for(let l=0;l<e.length;l++)o.writeUInt16BE(e.charCodeAt(l),l*2);return this._createEncoderBuffer(o)}else return t==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):t==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):t==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")};DERNode$1.prototype._encodeObjid=function n(e,t,o){if(typeof e=="string"){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let g=0;g<e.length;g++)e[g]|=0}else if(Array.isArray(e)){e=e.slice();for(let g=0;g<e.length;g++)e[g]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!o){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let l=0;for(let g=0;g<e.length;g++){let m=e[g];for(l++;m>=128;m>>=7)l++}const d=Buffer$4.alloc(l);let h=d.length-1;for(let g=e.length-1;g>=0;g--){let m=e[g];for(d[h--]=m&127;(m>>=7)>0;)d[h--]=128|m&127}return this._createEncoderBuffer(d)};function two(n){return n<10?"0"+n:n}DERNode$1.prototype._encodeTime=function n(e,t){let o;const l=new Date(e);return t==="gentime"?o=[two(l.getUTCFullYear()),two(l.getUTCMonth()+1),two(l.getUTCDate()),two(l.getUTCHours()),two(l.getUTCMinutes()),two(l.getUTCSeconds()),"Z"].join(""):t==="utctime"?o=[two(l.getUTCFullYear()%100),two(l.getUTCMonth()+1),two(l.getUTCDate()),two(l.getUTCHours()),two(l.getUTCMinutes()),two(l.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(o,"octstr")};DERNode$1.prototype._encodeNull=function n(){return this._createEncoderBuffer("")};DERNode$1.prototype._encodeInt=function n(e,t){if(typeof e=="string"){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if(typeof e!="number"&&!Buffer$4.isBuffer(e)){const d=e.toArray();!e.sign&&d[0]&128&&d.unshift(0),e=Buffer$4.from(d)}if(Buffer$4.isBuffer(e)){let d=e.length;e.length===0&&d++;const h=Buffer$4.alloc(d);return e.copy(h),e.length===0&&(h[0]=0),this._createEncoderBuffer(h)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let o=1;for(let d=e;d>=256;d>>=8)o++;const l=new Array(o);for(let d=l.length-1;d>=0;d--)l[d]=e&255,e>>=8;return l[0]&128&&l.unshift(0),this._createEncoderBuffer(Buffer$4.from(l))};DERNode$1.prototype._encodeBool=function n(e){return this._createEncoderBuffer(e?255:0)};DERNode$1.prototype._use=function n(e,t){return typeof e=="function"&&(e=e(t)),e._getEncoder("der").tree};DERNode$1.prototype._skipDefault=function n(e,t,o){const l=this._baseState;let d;if(l.default===null)return!1;const h=e.join();if(l.defaultBuffer===void 0&&(l.defaultBuffer=this._encodeValue(l.default,t,o).join()),h.length!==l.defaultBuffer.length)return!1;for(d=0;d<h.length;d++)if(h[d]!==l.defaultBuffer[d])return!1;return!0};function encodeTag(n,e,t,o){let l;if(n==="seqof"?n="seq":n==="setof"&&(n="set"),der$1.tagByName.hasOwnProperty(n))l=der$1.tagByName[n];else if(typeof n=="number"&&(n|0)===n)l=n;else return o.error("Unknown tag: "+n);return l>=31?o.error("Multi-octet tag encoding unsupported"):(e||(l|=32),l|=der$1.tagClassByName[t||"universal"]<<6,l)}const inherits$7=inherits_browserExports,DEREncoder=der_1$1;function PEMEncoder(n){DEREncoder.call(this,n),this.enc="pem"}inherits$7(PEMEncoder,DEREncoder);var pem$1=PEMEncoder;PEMEncoder.prototype.encode=function n(e,t){const l=DEREncoder.prototype.encode.call(this,e).toString("base64"),d=["-----BEGIN "+t.label+"-----"];for(let h=0;h<l.length;h+=64)d.push(l.slice(h,h+64));return d.push("-----END "+t.label+"-----"),d.join(`
`)};(function(n){const e=n;e.der=der_1$1,e.pem=pem$1})(encoders);var decoders={};const inherits$6=inherits_browserExports,bignum=bnExports,DecoderBuffer=buffer.DecoderBuffer,Node=node,der=der$2;function DERDecoder$1(n){this.enc="der",this.name=n.name,this.entity=n,this.tree=new DERNode,this.tree._init(n.body)}var der_1=DERDecoder$1;DERDecoder$1.prototype.decode=function n(e,t){return DecoderBuffer.isDecoderBuffer(e)||(e=new DecoderBuffer(e,t)),this.tree._decode(e,t)};function DERNode(n){Node.call(this,"der",n)}inherits$6(DERNode,Node);DERNode.prototype._peekTag=function n(e,t,o){if(e.isEmpty())return!1;const l=e.save(),d=derDecodeTag(e,'Failed to peek tag: "'+t+'"');return e.isError(d)?d:(e.restore(l),d.tag===t||d.tagStr===t||d.tagStr+"of"===t||o)};DERNode.prototype._decodeTag=function n(e,t,o){const l=derDecodeTag(e,'Failed to decode tag of "'+t+'"');if(e.isError(l))return l;let d=derDecodeLen(e,l.primitive,'Failed to get length of "'+t+'"');if(e.isError(d))return d;if(!o&&l.tag!==t&&l.tagStr!==t&&l.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(l.primitive||d!==null)return e.skip(d,'Failed to match body of: "'+t+'"');const h=e.save(),g=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(g)?g:(d=e.offset-h.offset,e.restore(h),e.skip(d,'Failed to match body of: "'+t+'"'))};DERNode.prototype._skipUntilEnd=function n(e,t){for(;;){const o=derDecodeTag(e,t);if(e.isError(o))return o;const l=derDecodeLen(e,o.primitive,t);if(e.isError(l))return l;let d;if(o.primitive||l!==null?d=e.skip(l):d=this._skipUntilEnd(e,t),e.isError(d))return d;if(o.tagStr==="end")break}};DERNode.prototype._decodeList=function n(e,t,o,l){const d=[];for(;!e.isEmpty();){const h=this._peekTag(e,"end");if(e.isError(h))return h;const g=o.decode(e,"der",l);if(e.isError(g)&&h)break;d.push(g)}return d};DERNode.prototype._decodeStr=function n(e,t){if(t==="bitstr"){const o=e.readUInt8();return e.isError(o)?o:{unused:o,data:e.raw()}}else if(t==="bmpstr"){const o=e.raw();if(o.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let l="";for(let d=0;d<o.length/2;d++)l+=String.fromCharCode(o.readUInt16BE(d*2));return l}else if(t==="numstr"){const o=e.raw().toString("ascii");return this._isNumstr(o)?o:e.error("Decoding of string type: numstr unsupported characters")}else{if(t==="octstr")return e.raw();if(t==="objDesc")return e.raw();if(t==="printstr"){const o=e.raw().toString("ascii");return this._isPrintstr(o)?o:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")}};DERNode.prototype._decodeObjid=function n(e,t,o){let l;const d=[];let h=0,g=0;for(;!e.isEmpty();)g=e.readUInt8(),h<<=7,h|=g&127,g&128||(d.push(h),h=0);g&128&&d.push(h);const m=d[0]/40|0,y=d[0]%40;if(o?l=d:l=[m,y].concat(d.slice(1)),t){let b=t[l.join(" ")];b===void 0&&(b=t[l.join(".")]),b!==void 0&&(l=b)}return l};DERNode.prototype._decodeTime=function n(e,t){const o=e.raw().toString();let l,d,h,g,m,y;if(t==="gentime")l=o.slice(0,4)|0,d=o.slice(4,6)|0,h=o.slice(6,8)|0,g=o.slice(8,10)|0,m=o.slice(10,12)|0,y=o.slice(12,14)|0;else if(t==="utctime")l=o.slice(0,2)|0,d=o.slice(2,4)|0,h=o.slice(4,6)|0,g=o.slice(6,8)|0,m=o.slice(8,10)|0,y=o.slice(10,12)|0,l<70?l=2e3+l:l=1900+l;else return e.error("Decoding "+t+" time is not supported yet");return Date.UTC(l,d-1,h,g,m,y,0)};DERNode.prototype._decodeNull=function n(){return null};DERNode.prototype._decodeBool=function n(e){const t=e.readUInt8();return e.isError(t)?t:t!==0};DERNode.prototype._decodeInt=function n(e,t){const o=e.raw();let l=new bignum(o);return t&&(l=t[l.toString(10)]||l),l};DERNode.prototype._use=function n(e,t){return typeof e=="function"&&(e=e(t)),e._getDecoder("der").tree};function derDecodeTag(n,e){let t=n.readUInt8(e);if(n.isError(t))return t;const o=der.tagClass[t>>6],l=(t&32)===0;if((t&31)===31){let h=t;for(t=0;(h&128)===128;){if(h=n.readUInt8(e),n.isError(h))return h;t<<=7,t|=h&127}}else t&=31;const d=der.tag[t];return{cls:o,primitive:l,tag:t,tagStr:d}}function derDecodeLen(n,e,t){let o=n.readUInt8(t);if(n.isError(o))return o;if(!e&&o===128)return null;if(!(o&128))return o;const l=o&127;if(l>4)return n.error("length octect is too long");o=0;for(let d=0;d<l;d++){o<<=8;const h=n.readUInt8(t);if(n.isError(h))return h;o|=h}return o}const inherits$5=inherits_browserExports,Buffer$3=safer_1.Buffer,DERDecoder=der_1;function PEMDecoder(n){DERDecoder.call(this,n),this.enc="pem"}inherits$5(PEMDecoder,DERDecoder);var pem=PEMDecoder;PEMDecoder.prototype.decode=function n(e,t){const o=e.toString().split(/[\r\n]+/g),l=t.label.toUpperCase(),d=/^-----(BEGIN|END) ([^-]+)-----$/;let h=-1,g=-1;for(let b=0;b<o.length;b++){const w=o[b].match(d);if(w!==null&&w[2]===l)if(h===-1){if(w[1]!=="BEGIN")break;h=b}else{if(w[1]!=="END")break;g=b;break}}if(h===-1||g===-1)throw new Error("PEM section not found for: "+l);const m=o.slice(h+1,g).join("");m.replace(/[^a-z0-9+/=]+/gi,"");const y=Buffer$3.from(m,"base64");return DERDecoder.prototype.decode.call(this,y,t)};(function(n){const e=n;e.der=der_1,e.pem=pem})(decoders);(function(n){const e=encoders,t=decoders,o=inherits_browserExports,l=n;l.define=function(g,m){return new d(g,m)};function d(h,g){this.name=h,this.body=g,this.decoders={},this.encoders={}}d.prototype._createNamed=function(g){const m=this.name;function y(b){this._initNamed(b,m)}return o(y,g),y.prototype._initNamed=function(w,E){g.call(this,w,E)},new y(this)},d.prototype._getDecoder=function(g){return g=g||"der",this.decoders.hasOwnProperty(g)||(this.decoders[g]=this._createNamed(t[g])),this.decoders[g]},d.prototype.decode=function(g,m,y){return this._getDecoder(m).decode(g,y)},d.prototype._getEncoder=function(g){return g=g||"der",this.encoders.hasOwnProperty(g)||(this.encoders[g]=this._createNamed(e[g])),this.encoders[g]},d.prototype.encode=function(g,m,y){return this._getEncoder(m).encode(g,y)}})(api);var base$1={};(function(n){const e=n;e.Reporter=reporter.Reporter,e.DecoderBuffer=buffer.DecoderBuffer,e.EncoderBuffer=buffer.EncoderBuffer,e.Node=node})(base$1);var constants={};(function(n){const e=n;e._reverse=function(o){const l={};return Object.keys(o).forEach(function(d){(d|0)==d&&(d=d|0);const h=o[d];l[h]=d}),l},e.der=der$2})(constants);(function(n){const e=n;e.bignum=bnExports,e.define=api.define,e.base=base$1,e.constants=constants,e.decoders=decoders,e.encoders=encoders})(asn1$2);var safeBufferExports={},safeBuffer={get exports(){return safeBufferExports},set exports(n){safeBufferExports=n}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,e){var t=buffer$2,o=t.Buffer;function l(h,g){for(var m in h)g[m]=h[m]}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?n.exports=t:(l(t,e),e.Buffer=d);function d(h,g,m){return o(h,g,m)}d.prototype=Object.create(o.prototype),l(o,d),d.from=function(h,g,m){if(typeof h=="number")throw new TypeError("Argument must not be a number");return o(h,g,m)},d.alloc=function(h,g,m){if(typeof h!="number")throw new TypeError("Argument must be a number");var y=o(h);return g!==void 0?typeof m=="string"?y.fill(g,m):y.fill(g):y.fill(0),y},d.allocUnsafe=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return o(h)},d.allocUnsafeSlow=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(h)}})(safeBuffer,safeBufferExports);var elliptic={};const name="elliptic",version$2="6.5.4",description="EC cryptography",main="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0={name,version:version$2,description,main,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies};var utils$n={},utils$m={};(function(n){var e=n;function t(d,h){if(Array.isArray(d))return d.slice();if(!d)return[];var g=[];if(typeof d!="string"){for(var m=0;m<d.length;m++)g[m]=d[m]|0;return g}if(h==="hex"){d=d.replace(/[^a-z0-9]+/ig,""),d.length%2!==0&&(d="0"+d);for(var m=0;m<d.length;m+=2)g.push(parseInt(d[m]+d[m+1],16))}else for(var m=0;m<d.length;m++){var y=d.charCodeAt(m),b=y>>8,w=y&255;b?g.push(b,w):g.push(w)}return g}e.toArray=t;function o(d){return d.length===1?"0"+d:d}e.zero2=o;function l(d){for(var h="",g=0;g<d.length;g++)h+=o(d[g].toString(16));return h}e.toHex=l,e.encode=function(h,g){return g==="hex"?l(h):h}})(utils$m);(function(n){var e=n,t=bnExports,o=minimalisticAssert,l=utils$m;e.assert=o,e.toArray=l.toArray,e.zero2=l.zero2,e.toHex=l.toHex,e.encode=l.encode;function d(b,w,E){var P=new Array(Math.max(b.bitLength(),E)+1);P.fill(0);for(var $=1<<w+1,C=b.clone(),L=0;L<P.length;L++){var W,Y=C.andln($-1);C.isOdd()?(Y>($>>1)-1?W=($>>1)-Y:W=Y,C.isubn(W)):W=0,P[L]=W,C.iushrn(1)}return P}e.getNAF=d;function h(b,w){var E=[[],[]];b=b.clone(),w=w.clone();for(var P=0,$=0,C;b.cmpn(-P)>0||w.cmpn(-$)>0;){var L=b.andln(3)+P&3,W=w.andln(3)+$&3;L===3&&(L=-1),W===3&&(W=-1);var Y;L&1?(C=b.andln(7)+P&7,(C===3||C===5)&&W===2?Y=-L:Y=L):Y=0,E[0].push(Y);var D;W&1?(C=w.andln(7)+$&7,(C===3||C===5)&&L===2?D=-W:D=W):D=0,E[1].push(D),2*P===Y+1&&(P=1-P),2*$===D+1&&($=1-$),b.iushrn(1),w.iushrn(1)}return E}e.getJSF=h;function g(b,w,E){var P="_"+w;b.prototype[w]=function(){return this[P]!==void 0?this[P]:this[P]=E.call(this)}}e.cachedProperty=g;function m(b){return typeof b=="string"?e.toArray(b,"hex"):b}e.parseBytes=m;function y(b){return new t(b,"hex","le")}e.intFromLE=y})(utils$n);var brorandExports={},brorand={get exports(){return brorandExports},set exports(n){brorandExports=n}},r$1;brorand.exports=function n(e){return r$1||(r$1=new Rand(null)),r$1.generate(e)};function Rand(n){this.rand=n}brorandExports.Rand=Rand;Rand.prototype.generate=function n(e){return this._rand(e)};Rand.prototype._rand=function n(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),o=0;o<t.length;o++)t[o]=this.rand.getByte();return t};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Rand.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Rand.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(Rand.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var crypto$2=require$$0$3;if(typeof crypto$2.randomBytes!="function")throw new Error("Not supported");Rand.prototype._rand=function(e){return crypto$2.randomBytes(e)}}catch{}var curve={},BN$8=bnExports,utils$l=utils$n,getNAF=utils$l.getNAF,getJSF=utils$l.getJSF,assert$e=utils$l.assert;function BaseCurve(n,e){this.type=n,this.p=new BN$8(e.p,16),this.red=e.prime?BN$8.red(e.prime):BN$8.mont(this.p),this.zero=new BN$8(0).toRed(this.red),this.one=new BN$8(1).toRed(this.red),this.two=new BN$8(2).toRed(this.red),this.n=e.n&&new BN$8(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base=BaseCurve;BaseCurve.prototype.point=function n(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function n(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function n(e,t){assert$e(e.precomputed);var o=e._getDoubles(),l=getNAF(t,1,this._bitLength),d=(1<<o.step+1)-(o.step%2===0?2:1);d/=3;var h=[],g,m;for(g=0;g<l.length;g+=o.step){m=0;for(var y=g+o.step-1;y>=g;y--)m=(m<<1)+l[y];h.push(m)}for(var b=this.jpoint(null,null,null),w=this.jpoint(null,null,null),E=d;E>0;E--){for(g=0;g<h.length;g++)m=h[g],m===E?w=w.mixedAdd(o.points[g]):m===-E&&(w=w.mixedAdd(o.points[g].neg()));b=b.add(w)}return b.toP()};BaseCurve.prototype._wnafMul=function n(e,t){var o=4,l=e._getNAFPoints(o);o=l.wnd;for(var d=l.points,h=getNAF(t,o,this._bitLength),g=this.jpoint(null,null,null),m=h.length-1;m>=0;m--){for(var y=0;m>=0&&h[m]===0;m--)y++;if(m>=0&&y++,g=g.dblp(y),m<0)break;var b=h[m];assert$e(b!==0),e.type==="affine"?b>0?g=g.mixedAdd(d[b-1>>1]):g=g.mixedAdd(d[-b-1>>1].neg()):b>0?g=g.add(d[b-1>>1]):g=g.add(d[-b-1>>1].neg())}return e.type==="affine"?g.toP():g};BaseCurve.prototype._wnafMulAdd=function n(e,t,o,l,d){var h=this._wnafT1,g=this._wnafT2,m=this._wnafT3,y=0,b,w,E;for(b=0;b<l;b++){E=t[b];var P=E._getNAFPoints(e);h[b]=P.wnd,g[b]=P.points}for(b=l-1;b>=1;b-=2){var $=b-1,C=b;if(h[$]!==1||h[C]!==1){m[$]=getNAF(o[$],h[$],this._bitLength),m[C]=getNAF(o[C],h[C],this._bitLength),y=Math.max(m[$].length,y),y=Math.max(m[C].length,y);continue}var L=[t[$],null,null,t[C]];t[$].y.cmp(t[C].y)===0?(L[1]=t[$].add(t[C]),L[2]=t[$].toJ().mixedAdd(t[C].neg())):t[$].y.cmp(t[C].y.redNeg())===0?(L[1]=t[$].toJ().mixedAdd(t[C]),L[2]=t[$].add(t[C].neg())):(L[1]=t[$].toJ().mixedAdd(t[C]),L[2]=t[$].toJ().mixedAdd(t[C].neg()));var W=[-3,-1,-5,-7,0,7,5,1,3],Y=getJSF(o[$],o[C]);for(y=Math.max(Y[0].length,y),m[$]=new Array(y),m[C]=new Array(y),w=0;w<y;w++){var D=Y[0][w]|0,k=Y[1][w]|0;m[$][w]=W[(D+1)*3+(k+1)],m[C][w]=0,g[$]=L}}var F=this.jpoint(null,null,null),ce=this._wnafT4;for(b=y;b>=0;b--){for(var q=0;b>=0;){var te=!0;for(w=0;w<l;w++)ce[w]=m[w][b]|0,ce[w]!==0&&(te=!1);if(!te)break;q++,b--}if(b>=0&&q++,F=F.dblp(q),b<0)break;for(w=0;w<l;w++){var Q=ce[w];Q!==0&&(Q>0?E=g[w][Q-1>>1]:Q<0&&(E=g[w][-Q-1>>1].neg()),E.type==="affine"?F=F.mixedAdd(E):F=F.add(E))}}for(b=0;b<l;b++)g[b]=null;return d?F:F.toP()};function BasePoint(n,e){this.curve=n,this.type=e,this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function n(){throw new Error("Not implemented")};BasePoint.prototype.validate=function n(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function n(e,t){e=utils$l.toArray(e,t);var o=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*o){e[0]===6?assert$e(e[e.length-1]%2===0):e[0]===7&&assert$e(e[e.length-1]%2===1);var l=this.point(e.slice(1,1+o),e.slice(1+o,1+2*o));return l}else if((e[0]===2||e[0]===3)&&e.length-1===o)return this.pointFromX(e.slice(1,1+o),e[0]===3);throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function n(e){return this.encode(e,!0)};BasePoint.prototype._encode=function n(e){var t=this.curve.p.byteLength(),o=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(o):[4].concat(o,this.getY().toArray("be",t))};BasePoint.prototype.encode=function n(e,t){return utils$l.encode(this._encode(t),e)};BasePoint.prototype.precompute=function n(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};BasePoint.prototype._hasDoubles=function n(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};BasePoint.prototype._getDoubles=function n(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var o=[this],l=this,d=0;d<t;d+=e){for(var h=0;h<e;h++)l=l.dbl();o.push(l)}return{step:e,points:o}};BasePoint.prototype._getNAFPoints=function n(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],o=(1<<e)-1,l=o===1?null:this.dbl(),d=1;d<o;d++)t[d]=t[d-1].add(l);return{wnd:e,points:t}};BasePoint.prototype._getBeta=function n(){return null};BasePoint.prototype.dblp=function n(e){for(var t=this,o=0;o<e;o++)t=t.dbl();return t};var utils$k=utils$n,BN$7=bnExports,inherits$4=inherits_browserExports,Base$2=base,assert$d=utils$k.assert;function ShortCurve(n){Base$2.call(this,"short",n),this.a=new BN$7(n.a,16).toRed(this.red),this.b=new BN$7(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits$4(ShortCurve,Base$2);var short=ShortCurve;ShortCurve.prototype._getEndomorphism=function n(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,o;if(e.beta)t=new BN$7(e.beta,16).toRed(this.red);else{var l=this._getEndoRoots(this.p);t=l[0].cmp(l[1])<0?l[0]:l[1],t=t.toRed(this.red)}if(e.lambda)o=new BN$7(e.lambda,16);else{var d=this._getEndoRoots(this.n);this.g.mul(d[0]).x.cmp(this.g.x.redMul(t))===0?o=d[0]:(o=d[1],assert$d(this.g.mul(o).x.cmp(this.g.x.redMul(t))===0))}var h;return e.basis?h=e.basis.map(function(g){return{a:new BN$7(g.a,16),b:new BN$7(g.b,16)}}):h=this._getEndoBasis(o),{beta:t,lambda:o,basis:h}}};ShortCurve.prototype._getEndoRoots=function n(e){var t=e===this.p?this.red:BN$7.mont(e),o=new BN$7(2).toRed(t).redInvm(),l=o.redNeg(),d=new BN$7(3).toRed(t).redNeg().redSqrt().redMul(o),h=l.redAdd(d).fromRed(),g=l.redSub(d).fromRed();return[h,g]};ShortCurve.prototype._getEndoBasis=function n(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),o=e,l=this.n.clone(),d=new BN$7(1),h=new BN$7(0),g=new BN$7(0),m=new BN$7(1),y,b,w,E,P,$,C,L=0,W,Y;o.cmpn(0)!==0;){var D=l.div(o);W=l.sub(D.mul(o)),Y=g.sub(D.mul(d));var k=m.sub(D.mul(h));if(!w&&W.cmp(t)<0)y=C.neg(),b=d,w=W.neg(),E=Y;else if(w&&++L===2)break;C=W,l=o,o=W,g=d,d=Y,m=h,h=k}P=W.neg(),$=Y;var F=w.sqr().add(E.sqr()),ce=P.sqr().add($.sqr());return ce.cmp(F)>=0&&(P=y,$=b),w.negative&&(w=w.neg(),E=E.neg()),P.negative&&(P=P.neg(),$=$.neg()),[{a:w,b:E},{a:P,b:$}]};ShortCurve.prototype._endoSplit=function n(e){var t=this.endo.basis,o=t[0],l=t[1],d=l.b.mul(e).divRound(this.n),h=o.b.neg().mul(e).divRound(this.n),g=d.mul(o.a),m=h.mul(l.a),y=d.mul(o.b),b=h.mul(l.b),w=e.sub(g).sub(m),E=y.add(b).neg();return{k1:w,k2:E}};ShortCurve.prototype.pointFromX=function n(e,t){e=new BN$7(e,16),e.red||(e=e.toRed(this.red));var o=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),l=o.redSqrt();if(l.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var d=l.fromRed().isOdd();return(t&&!d||!t&&d)&&(l=l.redNeg()),this.point(e,l)};ShortCurve.prototype.validate=function n(e){if(e.inf)return!0;var t=e.x,o=e.y,l=this.a.redMul(t),d=t.redSqr().redMul(t).redIAdd(l).redIAdd(this.b);return o.redSqr().redISub(d).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function n(e,t,o){for(var l=this._endoWnafT1,d=this._endoWnafT2,h=0;h<e.length;h++){var g=this._endoSplit(t[h]),m=e[h],y=m._getBeta();g.k1.negative&&(g.k1.ineg(),m=m.neg(!0)),g.k2.negative&&(g.k2.ineg(),y=y.neg(!0)),l[h*2]=m,l[h*2+1]=y,d[h*2]=g.k1,d[h*2+1]=g.k2}for(var b=this._wnafMulAdd(1,l,d,h*2,o),w=0;w<h*2;w++)l[w]=null,d[w]=null;return b};function Point$2(n,e,t,o){Base$2.BasePoint.call(this,n,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$7(e,16),this.y=new BN$7(t,16),o&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits$4(Point$2,Base$2.BasePoint);ShortCurve.prototype.point=function n(e,t,o){return new Point$2(this,e,t,o)};ShortCurve.prototype.pointFromJSON=function n(e,t){return Point$2.fromJSON(this,e,t)};Point$2.prototype._getBeta=function n(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var o=this.curve,l=function(d){return o.point(d.x.redMul(o.endo.beta),d.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(l)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(l)}}}return t}};Point$2.prototype.toJSON=function n(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point$2.fromJSON=function n(e,t,o){typeof t=="string"&&(t=JSON.parse(t));var l=e.point(t[0],t[1],o);if(!t[2])return l;function d(g){return e.point(g[0],g[1],o)}var h=t[2];return l.precomputed={beta:null,doubles:h.doubles&&{step:h.doubles.step,points:[l].concat(h.doubles.points.map(d))},naf:h.naf&&{wnd:h.naf.wnd,points:[l].concat(h.naf.points.map(d))}},l};Point$2.prototype.inspect=function n(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$2.prototype.isInfinity=function n(){return this.inf};Point$2.prototype.add=function n(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var o=t.redSqr().redISub(this.x).redISub(e.x),l=t.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,l)};Point$2.prototype.dbl=function n(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,o=this.x.redSqr(),l=e.redInvm(),d=o.redAdd(o).redIAdd(o).redIAdd(t).redMul(l),h=d.redSqr().redISub(this.x.redAdd(this.x)),g=d.redMul(this.x.redSub(h)).redISub(this.y);return this.curve.point(h,g)};Point$2.prototype.getX=function n(){return this.x.fromRed()};Point$2.prototype.getY=function n(){return this.y.fromRed()};Point$2.prototype.mul=function n(e){return e=new BN$7(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Point$2.prototype.mulAdd=function n(e,t,o){var l=[this,t],d=[e,o];return this.curve.endo?this.curve._endoWnafMulAdd(l,d):this.curve._wnafMulAdd(1,l,d,2)};Point$2.prototype.jmulAdd=function n(e,t,o){var l=[this,t],d=[e,o];return this.curve.endo?this.curve._endoWnafMulAdd(l,d,!0):this.curve._wnafMulAdd(1,l,d,2,!0)};Point$2.prototype.eq=function n(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Point$2.prototype.neg=function n(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var o=this.precomputed,l=function(d){return d.neg()};t.precomputed={naf:o.naf&&{wnd:o.naf.wnd,points:o.naf.points.map(l)},doubles:o.doubles&&{step:o.doubles.step,points:o.doubles.points.map(l)}}}return t};Point$2.prototype.toJ=function n(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function JPoint(n,e,t,o){Base$2.BasePoint.call(this,n,"jacobian"),e===null&&t===null&&o===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$7(0)):(this.x=new BN$7(e,16),this.y=new BN$7(t,16),this.z=new BN$7(o,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits$4(JPoint,Base$2.BasePoint);ShortCurve.prototype.jpoint=function n(e,t,o){return new JPoint(this,e,t,o)};JPoint.prototype.toP=function n(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),o=this.x.redMul(t),l=this.y.redMul(t).redMul(e);return this.curve.point(o,l)};JPoint.prototype.neg=function n(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function n(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),o=this.z.redSqr(),l=this.x.redMul(t),d=e.x.redMul(o),h=this.y.redMul(t.redMul(e.z)),g=e.y.redMul(o.redMul(this.z)),m=l.redSub(d),y=h.redSub(g);if(m.cmpn(0)===0)return y.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var b=m.redSqr(),w=b.redMul(m),E=l.redMul(b),P=y.redSqr().redIAdd(w).redISub(E).redISub(E),$=y.redMul(E.redISub(P)).redISub(h.redMul(w)),C=this.z.redMul(e.z).redMul(m);return this.curve.jpoint(P,$,C)};JPoint.prototype.mixedAdd=function n(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),o=this.x,l=e.x.redMul(t),d=this.y,h=e.y.redMul(t).redMul(this.z),g=o.redSub(l),m=d.redSub(h);if(g.cmpn(0)===0)return m.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var y=g.redSqr(),b=y.redMul(g),w=o.redMul(y),E=m.redSqr().redIAdd(b).redISub(w).redISub(w),P=m.redMul(w.redISub(E)).redISub(d.redMul(b)),$=this.z.redMul(g);return this.curve.jpoint(E,P,$)};JPoint.prototype.dblp=function n(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var o=this;for(t=0;t<e;t++)o=o.dbl();return o}var l=this.curve.a,d=this.curve.tinv,h=this.x,g=this.y,m=this.z,y=m.redSqr().redSqr(),b=g.redAdd(g);for(t=0;t<e;t++){var w=h.redSqr(),E=b.redSqr(),P=E.redSqr(),$=w.redAdd(w).redIAdd(w).redIAdd(l.redMul(y)),C=h.redMul(E),L=$.redSqr().redISub(C.redAdd(C)),W=C.redISub(L),Y=$.redMul(W);Y=Y.redIAdd(Y).redISub(P);var D=b.redMul(m);t+1<e&&(y=y.redMul(P)),h=L,m=D,b=Y}return this.curve.jpoint(h,b.redMul(d),m)};JPoint.prototype.dbl=function n(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint.prototype._zeroDbl=function n(){var e,t,o;if(this.zOne){var l=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),g=this.x.redAdd(d).redSqr().redISub(l).redISub(h);g=g.redIAdd(g);var m=l.redAdd(l).redIAdd(l),y=m.redSqr().redISub(g).redISub(g),b=h.redIAdd(h);b=b.redIAdd(b),b=b.redIAdd(b),e=y,t=m.redMul(g.redISub(y)).redISub(b),o=this.y.redAdd(this.y)}else{var w=this.x.redSqr(),E=this.y.redSqr(),P=E.redSqr(),$=this.x.redAdd(E).redSqr().redISub(w).redISub(P);$=$.redIAdd($);var C=w.redAdd(w).redIAdd(w),L=C.redSqr(),W=P.redIAdd(P);W=W.redIAdd(W),W=W.redIAdd(W),e=L.redISub($).redISub($),t=C.redMul($.redISub(e)).redISub(W),o=this.y.redMul(this.z),o=o.redIAdd(o)}return this.curve.jpoint(e,t,o)};JPoint.prototype._threeDbl=function n(){var e,t,o;if(this.zOne){var l=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),g=this.x.redAdd(d).redSqr().redISub(l).redISub(h);g=g.redIAdd(g);var m=l.redAdd(l).redIAdd(l).redIAdd(this.curve.a),y=m.redSqr().redISub(g).redISub(g);e=y;var b=h.redIAdd(h);b=b.redIAdd(b),b=b.redIAdd(b),t=m.redMul(g.redISub(y)).redISub(b),o=this.y.redAdd(this.y)}else{var w=this.z.redSqr(),E=this.y.redSqr(),P=this.x.redMul(E),$=this.x.redSub(w).redMul(this.x.redAdd(w));$=$.redAdd($).redIAdd($);var C=P.redIAdd(P);C=C.redIAdd(C);var L=C.redAdd(C);e=$.redSqr().redISub(L),o=this.y.redAdd(this.z).redSqr().redISub(E).redISub(w);var W=E.redSqr();W=W.redIAdd(W),W=W.redIAdd(W),W=W.redIAdd(W),t=$.redMul(C.redISub(e)).redISub(W)}return this.curve.jpoint(e,t,o)};JPoint.prototype._dbl=function n(){var e=this.curve.a,t=this.x,o=this.y,l=this.z,d=l.redSqr().redSqr(),h=t.redSqr(),g=o.redSqr(),m=h.redAdd(h).redIAdd(h).redIAdd(e.redMul(d)),y=t.redAdd(t);y=y.redIAdd(y);var b=y.redMul(g),w=m.redSqr().redISub(b.redAdd(b)),E=b.redISub(w),P=g.redSqr();P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var $=m.redMul(E).redISub(P),C=o.redAdd(o).redMul(l);return this.curve.jpoint(w,$,C)};JPoint.prototype.trpl=function n(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),o=this.z.redSqr(),l=t.redSqr(),d=e.redAdd(e).redIAdd(e),h=d.redSqr(),g=this.x.redAdd(t).redSqr().redISub(e).redISub(l);g=g.redIAdd(g),g=g.redAdd(g).redIAdd(g),g=g.redISub(h);var m=g.redSqr(),y=l.redIAdd(l);y=y.redIAdd(y),y=y.redIAdd(y),y=y.redIAdd(y);var b=d.redIAdd(g).redSqr().redISub(h).redISub(m).redISub(y),w=t.redMul(b);w=w.redIAdd(w),w=w.redIAdd(w);var E=this.x.redMul(m).redISub(w);E=E.redIAdd(E),E=E.redIAdd(E);var P=this.y.redMul(b.redMul(y.redISub(b)).redISub(g.redMul(m)));P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var $=this.z.redAdd(g).redSqr().redISub(o).redISub(m);return this.curve.jpoint(E,P,$)};JPoint.prototype.mul=function n(e,t){return e=new BN$7(e,t),this.curve._wnafMul(this,e)};JPoint.prototype.eq=function n(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),o=e.z.redSqr();if(this.x.redMul(o).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var l=t.redMul(this.z),d=o.redMul(e.z);return this.y.redMul(d).redISub(e.y.redMul(l)).cmpn(0)===0};JPoint.prototype.eqXToP=function n(e){var t=this.z.redSqr(),o=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(o)===0)return!0;for(var l=e.clone(),d=this.curve.redN.redMul(t);;){if(l.iadd(this.curve.n),l.cmp(this.curve.p)>=0)return!1;if(o.redIAdd(d),this.x.cmp(o)===0)return!0}};JPoint.prototype.inspect=function n(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function n(){return this.z.cmpn(0)===0};var BN$6=bnExports,inherits$3=inherits_browserExports,Base$1=base,utils$j=utils$n;function MontCurve(n){Base$1.call(this,"mont",n),this.a=new BN$6(n.a,16).toRed(this.red),this.b=new BN$6(n.b,16).toRed(this.red),this.i4=new BN$6(4).toRed(this.red).redInvm(),this.two=new BN$6(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$3(MontCurve,Base$1);var mont=MontCurve;MontCurve.prototype.validate=function n(e){var t=e.normalize().x,o=t.redSqr(),l=o.redMul(t).redAdd(o.redMul(this.a)).redAdd(t),d=l.redSqrt();return d.redSqr().cmp(l)===0};function Point$1(n,e,t){Base$1.BasePoint.call(this,n,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN$6(e,16),this.z=new BN$6(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits$3(Point$1,Base$1.BasePoint);MontCurve.prototype.decodePoint=function n(e,t){return this.point(utils$j.toArray(e,t),1)};MontCurve.prototype.point=function n(e,t){return new Point$1(this,e,t)};MontCurve.prototype.pointFromJSON=function n(e){return Point$1.fromJSON(this,e)};Point$1.prototype.precompute=function n(){};Point$1.prototype._encode=function n(){return this.getX().toArray("be",this.curve.p.byteLength())};Point$1.fromJSON=function n(e,t){return new Point$1(e,t[0],t[1]||e.one)};Point$1.prototype.inspect=function n(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$1.prototype.isInfinity=function n(){return this.z.cmpn(0)===0};Point$1.prototype.dbl=function n(){var e=this.x.redAdd(this.z),t=e.redSqr(),o=this.x.redSub(this.z),l=o.redSqr(),d=t.redSub(l),h=t.redMul(l),g=d.redMul(l.redAdd(this.curve.a24.redMul(d)));return this.curve.point(h,g)};Point$1.prototype.add=function n(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.diffAdd=function n(e,t){var o=this.x.redAdd(this.z),l=this.x.redSub(this.z),d=e.x.redAdd(e.z),h=e.x.redSub(e.z),g=h.redMul(o),m=d.redMul(l),y=t.z.redMul(g.redAdd(m).redSqr()),b=t.x.redMul(g.redISub(m).redSqr());return this.curve.point(y,b)};Point$1.prototype.mul=function n(e){for(var t=e.clone(),o=this,l=this.curve.point(null,null),d=this,h=[];t.cmpn(0)!==0;t.iushrn(1))h.push(t.andln(1));for(var g=h.length-1;g>=0;g--)h[g]===0?(o=o.diffAdd(l,d),l=l.dbl()):(l=o.diffAdd(l,d),o=o.dbl());return l};Point$1.prototype.mulAdd=function n(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.jumlAdd=function n(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.eq=function n(e){return this.getX().cmp(e.getX())===0};Point$1.prototype.normalize=function n(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Point$1.prototype.getX=function n(){return this.normalize(),this.x.fromRed()};var utils$i=utils$n,BN$5=bnExports,inherits$2=inherits_browserExports,Base=base,assert$c=utils$i.assert;function EdwardsCurve(n){this.twisted=(n.a|0)!==1,this.mOneA=this.twisted&&(n.a|0)===-1,this.extended=this.mOneA,Base.call(this,"edwards",n),this.a=new BN$5(n.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN$5(n.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN$5(n.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$c(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(n.c|0)===1}inherits$2(EdwardsCurve,Base);var edwards=EdwardsCurve;EdwardsCurve.prototype._mulA=function n(e){return this.mOneA?e.redNeg():this.a.redMul(e)};EdwardsCurve.prototype._mulC=function n(e){return this.oneC?e:this.c.redMul(e)};EdwardsCurve.prototype.jpoint=function n(e,t,o,l){return this.point(e,t,o,l)};EdwardsCurve.prototype.pointFromX=function n(e,t){e=new BN$5(e,16),e.red||(e=e.toRed(this.red));var o=e.redSqr(),l=this.c2.redSub(this.a.redMul(o)),d=this.one.redSub(this.c2.redMul(this.d).redMul(o)),h=l.redMul(d.redInvm()),g=h.redSqrt();if(g.redSqr().redSub(h).cmp(this.zero)!==0)throw new Error("invalid point");var m=g.fromRed().isOdd();return(t&&!m||!t&&m)&&(g=g.redNeg()),this.point(e,g)};EdwardsCurve.prototype.pointFromY=function n(e,t){e=new BN$5(e,16),e.red||(e=e.toRed(this.red));var o=e.redSqr(),l=o.redSub(this.c2),d=o.redMul(this.d).redMul(this.c2).redSub(this.a),h=l.redMul(d.redInvm());if(h.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var g=h.redSqrt();if(g.redSqr().redSub(h).cmp(this.zero)!==0)throw new Error("invalid point");return g.fromRed().isOdd()!==t&&(g=g.redNeg()),this.point(g,e)};EdwardsCurve.prototype.validate=function n(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),o=e.y.redSqr(),l=t.redMul(this.a).redAdd(o),d=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(o)));return l.cmp(d)===0};function Point(n,e,t,o,l){Base.BasePoint.call(this,n,"projective"),e===null&&t===null&&o===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN$5(e,16),this.y=new BN$5(t,16),this.z=o?new BN$5(o,16):this.curve.one,this.t=l&&new BN$5(l,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits$2(Point,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function n(e){return Point.fromJSON(this,e)};EdwardsCurve.prototype.point=function n(e,t,o,l){return new Point(this,e,t,o,l)};Point.fromJSON=function n(e,t){return new Point(e,t[0],t[1],t[2])};Point.prototype.inspect=function n(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function n(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point.prototype._extDbl=function n(){var e=this.x.redSqr(),t=this.y.redSqr(),o=this.z.redSqr();o=o.redIAdd(o);var l=this.curve._mulA(e),d=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),h=l.redAdd(t),g=h.redSub(o),m=l.redSub(t),y=d.redMul(g),b=h.redMul(m),w=d.redMul(m),E=g.redMul(h);return this.curve.point(y,b,E,w)};Point.prototype._projDbl=function n(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),o=this.y.redSqr(),l,d,h,g,m,y;if(this.curve.twisted){g=this.curve._mulA(t);var b=g.redAdd(o);this.zOne?(l=e.redSub(t).redSub(o).redMul(b.redSub(this.curve.two)),d=b.redMul(g.redSub(o)),h=b.redSqr().redSub(b).redSub(b)):(m=this.z.redSqr(),y=b.redSub(m).redISub(m),l=e.redSub(t).redISub(o).redMul(y),d=b.redMul(g.redSub(o)),h=b.redMul(y))}else g=t.redAdd(o),m=this.curve._mulC(this.z).redSqr(),y=g.redSub(m).redSub(m),l=this.curve._mulC(e.redISub(g)).redMul(y),d=this.curve._mulC(g).redMul(t.redISub(o)),h=g.redMul(y);return this.curve.point(l,d,h)};Point.prototype.dbl=function n(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Point.prototype._extAdd=function n(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),o=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),l=this.t.redMul(this.curve.dd).redMul(e.t),d=this.z.redMul(e.z.redAdd(e.z)),h=o.redSub(t),g=d.redSub(l),m=d.redAdd(l),y=o.redAdd(t),b=h.redMul(g),w=m.redMul(y),E=h.redMul(y),P=g.redMul(m);return this.curve.point(b,w,P,E)};Point.prototype._projAdd=function n(e){var t=this.z.redMul(e.z),o=t.redSqr(),l=this.x.redMul(e.x),d=this.y.redMul(e.y),h=this.curve.d.redMul(l).redMul(d),g=o.redSub(h),m=o.redAdd(h),y=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(l).redISub(d),b=t.redMul(g).redMul(y),w,E;return this.curve.twisted?(w=t.redMul(m).redMul(d.redSub(this.curve._mulA(l))),E=g.redMul(m)):(w=t.redMul(m).redMul(d.redSub(l)),E=this.curve._mulC(g).redMul(m)),this.curve.point(b,w,E)};Point.prototype.add=function n(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Point.prototype.mul=function n(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Point.prototype.mulAdd=function n(e,t,o){return this.curve._wnafMulAdd(1,[this,t],[e,o],2,!1)};Point.prototype.jmulAdd=function n(e,t,o){return this.curve._wnafMulAdd(1,[this,t],[e,o],2,!0)};Point.prototype.normalize=function n(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Point.prototype.neg=function n(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point.prototype.getX=function n(){return this.normalize(),this.x.fromRed()};Point.prototype.getY=function n(){return this.normalize(),this.y.fromRed()};Point.prototype.eq=function n(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Point.prototype.eqXToP=function n(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var o=e.clone(),l=this.curve.redN.redMul(this.z);;){if(o.iadd(this.curve.n),o.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(l),this.x.cmp(t)===0)return!0}};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add;(function(n){var e=n;e.base=base,e.short=short,e.mont=mont,e.edwards=edwards})(curve);var curves$3={},hash$2={},utils$h={},assert$b=minimalisticAssert,inherits$1=inherits_browserExports;utils$h.inherits=inherits$1;function isSurrogatePair(n,e){return(n.charCodeAt(e)&64512)!==55296||e<0||e+1>=n.length?!1:(n.charCodeAt(e+1)&64512)===56320}function toArray$1(n,e){if(Array.isArray(n))return n.slice();if(!n)return[];var t=[];if(typeof n=="string")if(e){if(e==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),l=0;l<n.length;l+=2)t.push(parseInt(n[l]+n[l+1],16))}else for(var o=0,l=0;l<n.length;l++){var d=n.charCodeAt(l);d<128?t[o++]=d:d<2048?(t[o++]=d>>6|192,t[o++]=d&63|128):isSurrogatePair(n,l)?(d=65536+((d&1023)<<10)+(n.charCodeAt(++l)&1023),t[o++]=d>>18|240,t[o++]=d>>12&63|128,t[o++]=d>>6&63|128,t[o++]=d&63|128):(t[o++]=d>>12|224,t[o++]=d>>6&63|128,t[o++]=d&63|128)}else for(l=0;l<n.length;l++)t[l]=n[l]|0;return t}utils$h.toArray=toArray$1;function toHex(n){for(var e="",t=0;t<n.length;t++)e+=zero2(n[t].toString(16));return e}utils$h.toHex=toHex;function htonl(n){var e=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return e>>>0}utils$h.htonl=htonl;function toHex32(n,e){for(var t="",o=0;o<n.length;o++){var l=n[o];e==="little"&&(l=htonl(l)),t+=zero8(l.toString(16))}return t}utils$h.toHex32=toHex32;function zero2(n){return n.length===1?"0"+n:n}utils$h.zero2=zero2;function zero8(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}utils$h.zero8=zero8;function join32(n,e,t,o){var l=t-e;assert$b(l%4===0);for(var d=new Array(l/4),h=0,g=e;h<d.length;h++,g+=4){var m;o==="big"?m=n[g]<<24|n[g+1]<<16|n[g+2]<<8|n[g+3]:m=n[g+3]<<24|n[g+2]<<16|n[g+1]<<8|n[g],d[h]=m>>>0}return d}utils$h.join32=join32;function split32(n,e){for(var t=new Array(n.length*4),o=0,l=0;o<n.length;o++,l+=4){var d=n[o];e==="big"?(t[l]=d>>>24,t[l+1]=d>>>16&255,t[l+2]=d>>>8&255,t[l+3]=d&255):(t[l+3]=d>>>24,t[l+2]=d>>>16&255,t[l+1]=d>>>8&255,t[l]=d&255)}return t}utils$h.split32=split32;function rotr32$1(n,e){return n>>>e|n<<32-e}utils$h.rotr32=rotr32$1;function rotl32$2(n,e){return n<<e|n>>>32-e}utils$h.rotl32=rotl32$2;function sum32$3(n,e){return n+e>>>0}utils$h.sum32=sum32$3;function sum32_3$1(n,e,t){return n+e+t>>>0}utils$h.sum32_3=sum32_3$1;function sum32_4$2(n,e,t,o){return n+e+t+o>>>0}utils$h.sum32_4=sum32_4$2;function sum32_5$2(n,e,t,o,l){return n+e+t+o+l>>>0}utils$h.sum32_5=sum32_5$2;function sum64$1(n,e,t,o){var l=n[e],d=n[e+1],h=o+d>>>0,g=(h<o?1:0)+t+l;n[e]=g>>>0,n[e+1]=h}utils$h.sum64=sum64$1;function sum64_hi$1(n,e,t,o){var l=e+o>>>0,d=(l<e?1:0)+n+t;return d>>>0}utils$h.sum64_hi=sum64_hi$1;function sum64_lo$1(n,e,t,o){var l=e+o;return l>>>0}utils$h.sum64_lo=sum64_lo$1;function sum64_4_hi$1(n,e,t,o,l,d,h,g){var m=0,y=e;y=y+o>>>0,m+=y<e?1:0,y=y+d>>>0,m+=y<d?1:0,y=y+g>>>0,m+=y<g?1:0;var b=n+t+l+h+m;return b>>>0}utils$h.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(n,e,t,o,l,d,h,g){var m=e+o+d+g;return m>>>0}utils$h.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(n,e,t,o,l,d,h,g,m,y){var b=0,w=e;w=w+o>>>0,b+=w<e?1:0,w=w+d>>>0,b+=w<d?1:0,w=w+g>>>0,b+=w<g?1:0,w=w+y>>>0,b+=w<y?1:0;var E=n+t+l+h+m+b;return E>>>0}utils$h.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(n,e,t,o,l,d,h,g,m,y){var b=e+o+d+g+y;return b>>>0}utils$h.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(n,e,t){var o=e<<32-t|n>>>t;return o>>>0}utils$h.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(n,e,t){var o=n<<32-t|e>>>t;return o>>>0}utils$h.rotr64_lo=rotr64_lo$1;function shr64_hi$1(n,e,t){return n>>>t}utils$h.shr64_hi=shr64_hi$1;function shr64_lo$1(n,e,t){var o=n<<32-t|e>>>t;return o>>>0}utils$h.shr64_lo=shr64_lo$1;var common$5={},utils$g=utils$h,assert$a=minimalisticAssert;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$5.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function n(e,t){if(e=utils$g.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var o=e.length%this._delta8;this.pending=e.slice(e.length-o,e.length),this.pending.length===0&&(this.pending=null),e=utils$g.join32(e,0,e.length-o,this.endian);for(var l=0;l<e.length;l+=this._delta32)this._update(e,l,l+this._delta32)}return this};BlockHash$4.prototype.digest=function n(e){return this.update(this._pad()),assert$a(this.pending===null),this._digest(e)};BlockHash$4.prototype._pad=function n(){var e=this.pendingTotal,t=this._delta8,o=t-(e+this.padLength)%t,l=new Array(o+this.padLength);l[0]=128;for(var d=1;d<o;d++)l[d]=0;if(e<<=3,this.endian==="big"){for(var h=8;h<this.padLength;h++)l[d++]=0;l[d++]=0,l[d++]=0,l[d++]=0,l[d++]=0,l[d++]=e>>>24&255,l[d++]=e>>>16&255,l[d++]=e>>>8&255,l[d++]=e&255}else for(l[d++]=e&255,l[d++]=e>>>8&255,l[d++]=e>>>16&255,l[d++]=e>>>24&255,l[d++]=0,l[d++]=0,l[d++]=0,l[d++]=0,h=8;h<this.padLength;h++)l[d++]=0;return l};var sha={},common$4={},utils$f=utils$h,rotr32=utils$f.rotr32;function ft_1$1(n,e,t,o){if(n===0)return ch32$1(e,t,o);if(n===1||n===3)return p32(e,t,o);if(n===2)return maj32$1(e,t,o)}common$4.ft_1=ft_1$1;function ch32$1(n,e,t){return n&e^~n&t}common$4.ch32=ch32$1;function maj32$1(n,e,t){return n&e^n&t^e&t}common$4.maj32=maj32$1;function p32(n,e,t){return n^e^t}common$4.p32=p32;function s0_256$1(n){return rotr32(n,2)^rotr32(n,13)^rotr32(n,22)}common$4.s0_256=s0_256$1;function s1_256$1(n){return rotr32(n,6)^rotr32(n,11)^rotr32(n,25)}common$4.s1_256=s1_256$1;function g0_256$1(n){return rotr32(n,7)^rotr32(n,18)^n>>>3}common$4.g0_256=g0_256$1;function g1_256$1(n){return rotr32(n,17)^rotr32(n,19)^n>>>10}common$4.g1_256=g1_256$1;var utils$e=utils$h,common$3=common$5,shaCommon$1=common$4,rotl32$1=utils$e.rotl32,sum32$2=utils$e.sum32,sum32_5$1=utils$e.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$3.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$e.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function n(e,t){for(var o=this.W,l=0;l<16;l++)o[l]=e[t+l];for(;l<o.length;l++)o[l]=rotl32$1(o[l-3]^o[l-8]^o[l-14]^o[l-16],1);var d=this.h[0],h=this.h[1],g=this.h[2],m=this.h[3],y=this.h[4];for(l=0;l<o.length;l++){var b=~~(l/20),w=sum32_5$1(rotl32$1(d,5),ft_1(b,h,g,m),y,o[l],sha1_K[b]);y=m,m=g,g=rotl32$1(h,30),h=d,d=w}this.h[0]=sum32$2(this.h[0],d),this.h[1]=sum32$2(this.h[1],h),this.h[2]=sum32$2(this.h[2],g),this.h[3]=sum32$2(this.h[3],m),this.h[4]=sum32$2(this.h[4],y)};SHA1.prototype._digest=function n(e){return e==="hex"?utils$e.toHex32(this.h,"big"):utils$e.split32(this.h,"big")};var utils$d=utils$h,common$2=common$5,shaCommon=common$4,assert$9=minimalisticAssert,sum32$1=utils$d.sum32,sum32_4$1=utils$d.sum32_4,sum32_5=utils$d.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$2.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$d.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512;SHA256$1.outSize=256;SHA256$1.hmacStrength=192;SHA256$1.padLength=64;SHA256$1.prototype._update=function n(e,t){for(var o=this.W,l=0;l<16;l++)o[l]=e[t+l];for(;l<o.length;l++)o[l]=sum32_4$1(g1_256(o[l-2]),o[l-7],g0_256(o[l-15]),o[l-16]);var d=this.h[0],h=this.h[1],g=this.h[2],m=this.h[3],y=this.h[4],b=this.h[5],w=this.h[6],E=this.h[7];for(assert$9(this.k.length===o.length),l=0;l<o.length;l++){var P=sum32_5(E,s1_256(y),ch32(y,b,w),this.k[l],o[l]),$=sum32$1(s0_256(d),maj32(d,h,g));E=w,w=b,b=y,y=sum32$1(m,P),m=g,g=h,h=d,d=sum32$1(P,$)}this.h[0]=sum32$1(this.h[0],d),this.h[1]=sum32$1(this.h[1],h),this.h[2]=sum32$1(this.h[2],g),this.h[3]=sum32$1(this.h[3],m),this.h[4]=sum32$1(this.h[4],y),this.h[5]=sum32$1(this.h[5],b),this.h[6]=sum32$1(this.h[6],w),this.h[7]=sum32$1(this.h[7],E)};SHA256$1.prototype._digest=function n(e){return e==="hex"?utils$d.toHex32(this.h,"big"):utils$d.split32(this.h,"big")};var utils$c=utils$h,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$c.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function n(e){return e==="hex"?utils$c.toHex32(this.h.slice(0,7),"big"):utils$c.split32(this.h.slice(0,7),"big")};var utils$b=utils$h,common$1=common$5,assert$8=minimalisticAssert,rotr64_hi=utils$b.rotr64_hi,rotr64_lo=utils$b.rotr64_lo,shr64_hi=utils$b.shr64_hi,shr64_lo=utils$b.shr64_lo,sum64=utils$b.sum64,sum64_hi=utils$b.sum64_hi,sum64_lo=utils$b.sum64_lo,sum64_4_hi=utils$b.sum64_4_hi,sum64_4_lo=utils$b.sum64_4_lo,sum64_5_hi=utils$b.sum64_5_hi,sum64_5_lo=utils$b.sum64_5_lo,BlockHash$1=common$1.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$b.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;SHA512$1.blockSize=1024;SHA512$1.outSize=512;SHA512$1.hmacStrength=192;SHA512$1.padLength=128;SHA512$1.prototype._prepareBlock=function n(e,t){for(var o=this.W,l=0;l<32;l++)o[l]=e[t+l];for(;l<o.length;l+=2){var d=g1_512_hi(o[l-4],o[l-3]),h=g1_512_lo(o[l-4],o[l-3]),g=o[l-14],m=o[l-13],y=g0_512_hi(o[l-30],o[l-29]),b=g0_512_lo(o[l-30],o[l-29]),w=o[l-32],E=o[l-31];o[l]=sum64_4_hi(d,h,g,m,y,b,w,E),o[l+1]=sum64_4_lo(d,h,g,m,y,b,w,E)}};SHA512$1.prototype._update=function n(e,t){this._prepareBlock(e,t);var o=this.W,l=this.h[0],d=this.h[1],h=this.h[2],g=this.h[3],m=this.h[4],y=this.h[5],b=this.h[6],w=this.h[7],E=this.h[8],P=this.h[9],$=this.h[10],C=this.h[11],L=this.h[12],W=this.h[13],Y=this.h[14],D=this.h[15];assert$8(this.k.length===o.length);for(var k=0;k<o.length;k+=2){var F=Y,ce=D,q=s1_512_hi(E,P),te=s1_512_lo(E,P),Q=ch64_hi(E,P,$,C,L),ie=ch64_lo(E,P,$,C,L,W),J=this.k[k],x=this.k[k+1],I=o[k],R=o[k+1],B=sum64_5_hi(F,ce,q,te,Q,ie,J,x,I,R),ee=sum64_5_lo(F,ce,q,te,Q,ie,J,x,I,R);F=s0_512_hi(l,d),ce=s0_512_lo(l,d),q=maj64_hi(l,d,h,g,m),te=maj64_lo(l,d,h,g,m,y);var ne=sum64_hi(F,ce,q,te),z=sum64_lo(F,ce,q,te);Y=L,D=W,L=$,W=C,$=E,C=P,E=sum64_hi(b,w,B,ee),P=sum64_lo(w,w,B,ee),b=m,w=y,m=h,y=g,h=l,g=d,l=sum64_hi(B,ee,ne,z),d=sum64_lo(B,ee,ne,z)}sum64(this.h,0,l,d),sum64(this.h,2,h,g),sum64(this.h,4,m,y),sum64(this.h,6,b,w),sum64(this.h,8,E,P),sum64(this.h,10,$,C),sum64(this.h,12,L,W),sum64(this.h,14,Y,D)};SHA512$1.prototype._digest=function n(e){return e==="hex"?utils$b.toHex32(this.h,"big"):utils$b.split32(this.h,"big")};function ch64_hi(n,e,t,o,l){var d=n&t^~n&l;return d<0&&(d+=4294967296),d}function ch64_lo(n,e,t,o,l,d){var h=e&o^~e&d;return h<0&&(h+=4294967296),h}function maj64_hi(n,e,t,o,l){var d=n&t^n&l^t&l;return d<0&&(d+=4294967296),d}function maj64_lo(n,e,t,o,l,d){var h=e&o^e&d^o&d;return h<0&&(h+=4294967296),h}function s0_512_hi(n,e){var t=rotr64_hi(n,e,28),o=rotr64_hi(e,n,2),l=rotr64_hi(e,n,7),d=t^o^l;return d<0&&(d+=4294967296),d}function s0_512_lo(n,e){var t=rotr64_lo(n,e,28),o=rotr64_lo(e,n,2),l=rotr64_lo(e,n,7),d=t^o^l;return d<0&&(d+=4294967296),d}function s1_512_hi(n,e){var t=rotr64_hi(n,e,14),o=rotr64_hi(n,e,18),l=rotr64_hi(e,n,9),d=t^o^l;return d<0&&(d+=4294967296),d}function s1_512_lo(n,e){var t=rotr64_lo(n,e,14),o=rotr64_lo(n,e,18),l=rotr64_lo(e,n,9),d=t^o^l;return d<0&&(d+=4294967296),d}function g0_512_hi(n,e){var t=rotr64_hi(n,e,1),o=rotr64_hi(n,e,8),l=shr64_hi(n,e,7),d=t^o^l;return d<0&&(d+=4294967296),d}function g0_512_lo(n,e){var t=rotr64_lo(n,e,1),o=rotr64_lo(n,e,8),l=shr64_lo(n,e,7),d=t^o^l;return d<0&&(d+=4294967296),d}function g1_512_hi(n,e){var t=rotr64_hi(n,e,19),o=rotr64_hi(e,n,29),l=shr64_hi(n,e,6),d=t^o^l;return d<0&&(d+=4294967296),d}function g1_512_lo(n,e){var t=rotr64_lo(n,e,19),o=rotr64_lo(e,n,29),l=shr64_lo(n,e,6),d=t^o^l;return d<0&&(d+=4294967296),d}var utils$a=utils$h,SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$a.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function n(e){return e==="hex"?utils$a.toHex32(this.h.slice(0,12),"big"):utils$a.split32(this.h.slice(0,12),"big")};sha.sha1=_1;sha.sha224=_224;sha.sha256=_256;sha.sha384=_384;sha.sha512=_512;var ripemd={},utils$9=utils$h,common=common$5,rotl32=utils$9.rotl32,sum32=utils$9.sum32,sum32_3=utils$9.sum32_3,sum32_4=utils$9.sum32_4,BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$9.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function n(e,t){for(var o=this.h[0],l=this.h[1],d=this.h[2],h=this.h[3],g=this.h[4],m=o,y=l,b=d,w=h,E=g,P=0;P<80;P++){var $=sum32(rotl32(sum32_4(o,f(P,l,d,h),e[r[P]+t],K(P)),s[P]),g);o=g,g=h,h=rotl32(d,10),d=l,l=$,$=sum32(rotl32(sum32_4(m,f(79-P,y,b,w),e[rh[P]+t],Kh(P)),sh[P]),E),m=E,E=w,w=rotl32(b,10),b=y,y=$}$=sum32_3(this.h[1],d,w),this.h[1]=sum32_3(this.h[2],h,E),this.h[2]=sum32_3(this.h[3],g,m),this.h[3]=sum32_3(this.h[4],o,y),this.h[4]=sum32_3(this.h[0],l,b),this.h[0]=$};RIPEMD160.prototype._digest=function n(e){return e==="hex"?utils$9.toHex32(this.h,"little"):utils$9.split32(this.h,"little")};function f(n,e,t,o){return n<=15?e^t^o:n<=31?e&t|~e&o:n<=47?(e|~t)^o:n<=63?e&o|t&~o:e^(t|~o)}function K(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function Kh(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$8=utils$h,assert$7=minimalisticAssert;function Hmac(n,e,t){if(!(this instanceof Hmac))return new Hmac(n,e,t);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(utils$8.toArray(e,t))}var hmac=Hmac;Hmac.prototype._init=function n(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),assert$7(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};Hmac.prototype.update=function n(e,t){return this.inner.update(e,t),this};Hmac.prototype.digest=function n(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(n){var e=n;e.utils=utils$h,e.common=common$5,e.sha=sha,e.ripemd=ripemd,e.hmac=hmac,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(hash$2);var secp256k1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1}(function(n){var e=n,t=hash$2,o=curve,l=utils$n,d=l.assert;function h(y){y.type==="short"?this.curve=new o.short(y):y.type==="edwards"?this.curve=new o.edwards(y):this.curve=new o.mont(y),this.g=this.curve.g,this.n=this.curve.n,this.hash=y.hash,d(this.g.validate(),"Invalid curve"),d(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=h;function g(y,b){Object.defineProperty(e,y,{configurable:!0,enumerable:!0,get:function(){var w=new h(b);return Object.defineProperty(e,y,{configurable:!0,enumerable:!0,value:w}),w}})}g("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),g("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),g("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),g("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),g("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),g("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),g("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var m;try{m=requireSecp256k1()}catch{m=void 0}g("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",m]})})(curves$3);var hash$1=hash$2,utils$7=utils$m,assert$6=minimalisticAssert;function HmacDRBG$1(n){if(!(this instanceof HmacDRBG$1))return new HmacDRBG$1(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=utils$7.toArray(n.entropy,n.entropyEnc||"hex"),t=utils$7.toArray(n.nonce,n.nonceEnc||"hex"),o=utils$7.toArray(n.pers,n.persEnc||"hex");assert$6(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,o)}var hmacDrbg=HmacDRBG$1;HmacDRBG$1.prototype._init=function n(e,t,o){var l=e.concat(t).concat(o);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var d=0;d<this.V.length;d++)this.K[d]=0,this.V[d]=1;this._update(l),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG$1.prototype._hmac=function n(){return new hash$1.hmac(this.hash,this.K)};HmacDRBG$1.prototype._update=function n(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG$1.prototype.reseed=function n(e,t,o,l){typeof t!="string"&&(l=o,o=t,t=null),e=utils$7.toArray(e,t),o=utils$7.toArray(o,l),assert$6(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(o||[])),this._reseed=1};HmacDRBG$1.prototype.generate=function n(e,t,o,l){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(l=o,o=t,t=null),o&&(o=utils$7.toArray(o,l||"hex"),this._update(o));for(var d=[];d.length<e;)this.V=this._hmac().update(this.V).digest(),d=d.concat(this.V);var h=d.slice(0,e);return this._update(o),this._reseed++,utils$7.encode(h,t)};var BN$4=bnExports,utils$6=utils$n,assert$5=utils$6.assert;function KeyPair$3(n,e){this.ec=n,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var key$1=KeyPair$3;KeyPair$3.fromPublic=function n(e,t,o){return t instanceof KeyPair$3?t:new KeyPair$3(e,{pub:t,pubEnc:o})};KeyPair$3.fromPrivate=function n(e,t,o){return t instanceof KeyPair$3?t:new KeyPair$3(e,{priv:t,privEnc:o})};KeyPair$3.prototype.validate=function n(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair$3.prototype.getPublic=function n(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};KeyPair$3.prototype.getPrivate=function n(e){return e==="hex"?this.priv.toString(16,2):this.priv};KeyPair$3.prototype._importPrivate=function n(e,t){this.priv=new BN$4(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$3.prototype._importPublic=function n(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?assert$5(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$5(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};KeyPair$3.prototype.derive=function n(e){return e.validate()||assert$5(e.validate(),"public point not validated"),e.mul(this.priv).getX()};KeyPair$3.prototype.sign=function n(e,t,o){return this.ec.sign(e,this,t,o)};KeyPair$3.prototype.verify=function n(e,t){return this.ec.verify(e,t,this)};KeyPair$3.prototype.inspect=function n(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BN$3=bnExports,utils$5=utils$n,assert$4=utils$5.assert;function Signature$3(n,e){if(n instanceof Signature$3)return n;this._importDER(n,e)||(assert$4(n.r&&n.s,"Signature without r or s"),this.r=new BN$3(n.r,16),this.s=new BN$3(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var signature$1=Signature$3;function Position(){this.place=0}function getLength(n,e){var t=n[e.place++];if(!(t&128))return t;var o=t&15;if(o===0||o>4)return!1;for(var l=0,d=0,h=e.place;d<o;d++,h++)l<<=8,l|=n[h],l>>>=0;return l<=127?!1:(e.place=h,l)}function rmPadding(n){for(var e=0,t=n.length-1;!n[e]&&!(n[e+1]&128)&&e<t;)e++;return e===0?n:n.slice(e)}Signature$3.prototype._importDER=function n(e,t){e=utils$5.toArray(e,t);var o=new Position;if(e[o.place++]!==48)return!1;var l=getLength(e,o);if(l===!1||l+o.place!==e.length||e[o.place++]!==2)return!1;var d=getLength(e,o);if(d===!1)return!1;var h=e.slice(o.place,d+o.place);if(o.place+=d,e[o.place++]!==2)return!1;var g=getLength(e,o);if(g===!1||e.length!==g+o.place)return!1;var m=e.slice(o.place,g+o.place);if(h[0]===0)if(h[1]&128)h=h.slice(1);else return!1;if(m[0]===0)if(m[1]&128)m=m.slice(1);else return!1;return this.r=new BN$3(h),this.s=new BN$3(m),this.recoveryParam=null,!0};function constructLength(n,e){if(e<128){n.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(n.push(t|128);--t;)n.push(e>>>(t<<3)&255);n.push(e)}Signature$3.prototype.toDER=function n(e){var t=this.r.toArray(),o=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),o[0]&128&&(o=[0].concat(o)),t=rmPadding(t),o=rmPadding(o);!o[0]&&!(o[1]&128);)o=o.slice(1);var l=[2];constructLength(l,t.length),l=l.concat(t),l.push(2),constructLength(l,o.length);var d=l.concat(o),h=[48];return constructLength(h,d.length),h=h.concat(d),utils$5.encode(h,e)};var BN$2=bnExports,HmacDRBG=hmacDrbg,utils$4=utils$n,curves$2=curves$3,rand=brorandExports,assert$3=utils$4.assert,KeyPair$2=key$1,Signature$2=signature$1;function EC$1(n){if(!(this instanceof EC$1))return new EC$1(n);typeof n=="string"&&(assert$3(Object.prototype.hasOwnProperty.call(curves$2,n),"Unknown curve "+n),n=curves$2[n]),n instanceof curves$2.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var ec$2=EC$1;EC$1.prototype.keyPair=function n(e){return new KeyPair$2(this,e)};EC$1.prototype.keyFromPrivate=function n(e,t){return KeyPair$2.fromPrivate(this,e,t)};EC$1.prototype.keyFromPublic=function n(e,t){return KeyPair$2.fromPublic(this,e,t)};EC$1.prototype.genKeyPair=function n(e){e||(e={});for(var t=new HmacDRBG({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||rand(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),o=this.n.byteLength(),l=this.n.sub(new BN$2(2));;){var d=new BN$2(t.generate(o));if(!(d.cmp(l)>0))return d.iaddn(1),this.keyFromPrivate(d)}};EC$1.prototype._truncateToN=function n(e,t){var o=e.byteLength()*8-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};EC$1.prototype.sign=function n(e,t,o,l){typeof o=="object"&&(l=o,o=null),l||(l={}),t=this.keyFromPrivate(t,o),e=this._truncateToN(new BN$2(e,16));for(var d=this.n.byteLength(),h=t.getPrivate().toArray("be",d),g=e.toArray("be",d),m=new HmacDRBG({hash:this.hash,entropy:h,nonce:g,pers:l.pers,persEnc:l.persEnc||"utf8"}),y=this.n.sub(new BN$2(1)),b=0;;b++){var w=l.k?l.k(b):new BN$2(m.generate(this.n.byteLength()));if(w=this._truncateToN(w,!0),!(w.cmpn(1)<=0||w.cmp(y)>=0)){var E=this.g.mul(w);if(!E.isInfinity()){var P=E.getX(),$=P.umod(this.n);if($.cmpn(0)!==0){var C=w.invm(this.n).mul($.mul(t.getPrivate()).iadd(e));if(C=C.umod(this.n),C.cmpn(0)!==0){var L=(E.getY().isOdd()?1:0)|(P.cmp($)!==0?2:0);return l.canonical&&C.cmp(this.nh)>0&&(C=this.n.sub(C),L^=1),new Signature$2({r:$,s:C,recoveryParam:L})}}}}}};EC$1.prototype.verify=function n(e,t,o,l){e=this._truncateToN(new BN$2(e,16)),o=this.keyFromPublic(o,l),t=new Signature$2(t,"hex");var d=t.r,h=t.s;if(d.cmpn(1)<0||d.cmp(this.n)>=0||h.cmpn(1)<0||h.cmp(this.n)>=0)return!1;var g=h.invm(this.n),m=g.mul(e).umod(this.n),y=g.mul(d).umod(this.n),b;return this.curve._maxwellTrick?(b=this.g.jmulAdd(m,o.getPublic(),y),b.isInfinity()?!1:b.eqXToP(d)):(b=this.g.mulAdd(m,o.getPublic(),y),b.isInfinity()?!1:b.getX().umod(this.n).cmp(d)===0)};EC$1.prototype.recoverPubKey=function(n,e,t,o){assert$3((3&t)===t,"The recovery param is more than two bits"),e=new Signature$2(e,o);var l=this.n,d=new BN$2(n),h=e.r,g=e.s,m=t&1,y=t>>1;if(h.cmp(this.curve.p.umod(this.curve.n))>=0&&y)throw new Error("Unable to find sencond key candinate");y?h=this.curve.pointFromX(h.add(this.curve.n),m):h=this.curve.pointFromX(h,m);var b=e.r.invm(l),w=l.sub(d).mul(b).umod(l),E=g.mul(b).umod(l);return this.g.mulAdd(w,h,E)};EC$1.prototype.getKeyRecoveryParam=function(n,e,t,o){if(e=new Signature$2(e,o),e.recoveryParam!==null)return e.recoveryParam;for(var l=0;l<4;l++){var d;try{d=this.recoverPubKey(n,e,l)}catch{continue}if(d.eq(t))return l}throw new Error("Unable to find valid recovery factor")};var utils$3=utils$n,assert$2=utils$3.assert,parseBytes$2=utils$3.parseBytes,cachedProperty$1=utils$3.cachedProperty;function KeyPair$1(n,e){this.eddsa=n,this._secret=parseBytes$2(e.secret),n.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=parseBytes$2(e.pub)}KeyPair$1.fromPublic=function n(e,t){return t instanceof KeyPair$1?t:new KeyPair$1(e,{pub:t})};KeyPair$1.fromSecret=function n(e,t){return t instanceof KeyPair$1?t:new KeyPair$1(e,{secret:t})};KeyPair$1.prototype.secret=function n(){return this._secret};cachedProperty$1(KeyPair$1,"pubBytes",function n(){return this.eddsa.encodePoint(this.pub())});cachedProperty$1(KeyPair$1,"pub",function n(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});cachedProperty$1(KeyPair$1,"privBytes",function n(){var e=this.eddsa,t=this.hash(),o=e.encodingLength-1,l=t.slice(0,e.encodingLength);return l[0]&=248,l[o]&=127,l[o]|=64,l});cachedProperty$1(KeyPair$1,"priv",function n(){return this.eddsa.decodeInt(this.privBytes())});cachedProperty$1(KeyPair$1,"hash",function n(){return this.eddsa.hash().update(this.secret()).digest()});cachedProperty$1(KeyPair$1,"messagePrefix",function n(){return this.hash().slice(this.eddsa.encodingLength)});KeyPair$1.prototype.sign=function n(e){return assert$2(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};KeyPair$1.prototype.verify=function n(e,t){return this.eddsa.verify(e,t,this)};KeyPair$1.prototype.getSecret=function n(e){return assert$2(this._secret,"KeyPair is public only"),utils$3.encode(this.secret(),e)};KeyPair$1.prototype.getPublic=function n(e){return utils$3.encode(this.pubBytes(),e)};var key=KeyPair$1,BN$1=bnExports,utils$2=utils$n,assert$1=utils$2.assert,cachedProperty=utils$2.cachedProperty,parseBytes$1=utils$2.parseBytes;function Signature$1(n,e){this.eddsa=n,typeof e!="object"&&(e=parseBytes$1(e)),Array.isArray(e)&&(e={R:e.slice(0,n.encodingLength),S:e.slice(n.encodingLength)}),assert$1(e.R&&e.S,"Signature without R or S"),n.isPoint(e.R)&&(this._R=e.R),e.S instanceof BN$1&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}cachedProperty(Signature$1,"S",function n(){return this.eddsa.decodeInt(this.Sencoded())});cachedProperty(Signature$1,"R",function n(){return this.eddsa.decodePoint(this.Rencoded())});cachedProperty(Signature$1,"Rencoded",function n(){return this.eddsa.encodePoint(this.R())});cachedProperty(Signature$1,"Sencoded",function n(){return this.eddsa.encodeInt(this.S())});Signature$1.prototype.toBytes=function n(){return this.Rencoded().concat(this.Sencoded())};Signature$1.prototype.toHex=function n(){return utils$2.encode(this.toBytes(),"hex").toUpperCase()};var signature=Signature$1,hash=hash$2,curves$1=curves$3,utils$1=utils$n,assert=utils$1.assert,parseBytes=utils$1.parseBytes,KeyPair=key,Signature=signature;function EDDSA(n){if(assert(n==="ed25519","only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(n);n=curves$1[n].curve,this.curve=n,this.g=n.g,this.g.precompute(n.n.bitLength()+1),this.pointClass=n.point().constructor,this.encodingLength=Math.ceil(n.n.bitLength()/8),this.hash=hash.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function n(e,t){e=parseBytes(e);var o=this.keyFromSecret(t),l=this.hashInt(o.messagePrefix(),e),d=this.g.mul(l),h=this.encodePoint(d),g=this.hashInt(h,o.pubBytes(),e).mul(o.priv()),m=l.add(g).umod(this.curve.n);return this.makeSignature({R:d,S:m,Rencoded:h})};EDDSA.prototype.verify=function n(e,t,o){e=parseBytes(e),t=this.makeSignature(t);var l=this.keyFromPublic(o),d=this.hashInt(t.Rencoded(),l.pubBytes(),e),h=this.g.mul(t.S()),g=t.R().add(l.pub().mul(d));return g.eq(h)};EDDSA.prototype.hashInt=function n(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return utils$1.intFromLE(e.digest()).umod(this.curve.n)};EDDSA.prototype.keyFromPublic=function n(e){return KeyPair.fromPublic(this,e)};EDDSA.prototype.keyFromSecret=function n(e){return KeyPair.fromSecret(this,e)};EDDSA.prototype.makeSignature=function n(e){return e instanceof Signature?e:new Signature(this,e)};EDDSA.prototype.encodePoint=function n(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};EDDSA.prototype.decodePoint=function n(e){e=utils$1.parseBytes(e);var t=e.length-1,o=e.slice(0,t).concat(e[t]&-129),l=(e[t]&128)!==0,d=utils$1.intFromLE(o);return this.curve.pointFromY(d,l)};EDDSA.prototype.encodeInt=function n(e){return e.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function n(e){return utils$1.intFromLE(e)};EDDSA.prototype.isPoint=function n(e){return e instanceof this.pointClass};(function(n){var e=n;e.version=require$$0.version,e.utils=utils$n,e.rand=brorandExports,e.curve=curve,e.curves=curves$3,e.ec=ec$2,e.eddsa=eddsa})(elliptic);var BN=asn1$2.bignum,Buffer$2=safeBufferExports.Buffer,b64ToBn$2=function n(e,t){var o=Buffer$2.from(e,"base64"),l=e=new BN(o,10,"be").iabs();return t&&o.fill(0),l},algorithmIdentifier=asn1$2.define("AlgorithmIdentifer",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}),AlgorithmIdentifier$1=algorithmIdentifier,publicKeyInfo=asn1$2.define("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier$1),this.key("PublicKey").bitstr())}),version$1=asn1$2.define("Version",function(){this.int()}),AlgorithmIdentifier=algorithmIdentifier,Version$2=version$1,privateKeyInfo=asn1$2.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(Version$2),this.key("privateKeyAlgorithm").use(AlgorithmIdentifier),this.key("privateKey").octstr(),this.key("attributes").optional().any())}),asn1$1=asn1$2,Buffer$1=safeBufferExports.Buffer,EC=elliptic.ec,b64ToBn$1=b64ToBn$2,PublicKeyInfo$1=publicKeyInfo,PrivateKeyInfo$1=privateKeyInfo,Version$1=version$1,ECParameters=asn1$1.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),ecPrivkeyVer1=1,ECPrivateKey=asn1$1.define("ECPrivateKey",function(){this.seq().obj(this.key("version").use(Version$1),this.key("privateKey").octstr(),this.key("parameters").explicit(0).optional().any(),this.key("publicKey").explicit(1).optional().bitstr())}),curves={"P-256":"p256","P-384":"p384","P-521":"p521"},oids={"P-256":[1,2,840,10045,3,1,7],"P-384":[1,3,132,0,34],"P-521":[1,3,132,0,35]},parameters={},algorithms={};Object.keys(oids).forEach(function(n){parameters[n]=ECParameters.encode({type:"namedCurve",value:oids[n]},"der"),algorithms[n]={algorithm:[1,2,840,10045,2,1],parameters:parameters[n]}});oids=null;function ecJwkToBuffer(n,e){if(typeof n.crv!="string")throw new TypeError('Expected "jwk.crv" to be a String');var t=typeof n.d=="string",o=t?["undefined","string"]:["string"];if(o.indexOf(typeof n.x)===-1)throw new TypeError('Expected "jwk.x" to be a String');if(o.indexOf(typeof n.y)===-1)throw new TypeError('Expected "jwk.y" to be a String');if(e.private&&!t)throw new TypeError('Expected "jwk.d" to be a String');var l=curves[n.crv];if(!l)throw new Error('Unsupported curve "'+n.crv+'"');var d=new EC(l),h={},g=n.x&&n.y;g&&(h.pub={x:b64ToBn$1(n.x,!1),y:b64ToBn$1(n.y,!1)}),(e.private||!g)&&(h.priv=b64ToBn$1(n.d,!0)),h=d.keyPair(h);var m=h.validate();if(!m.result)throw new Error('Invalid key for curve: "'+m.reason+'"');var y=keyToPem(n.crv,h,e);return y}function keyToPem(n,e,t){var o=!1,l=e.getPublic(o,"hex");l=Buffer$1.from(l,"hex"),l={unused:0,data:l};var d;if(t.private){var h=e.getPrivate("hex");h=Buffer$1.from(h,"hex"),d=PrivateKeyInfo$1.encode({version:0,privateKeyAlgorithm:algorithms[n],privateKey:ECPrivateKey.encode({version:ecPrivkeyVer1,privateKey:h,parameters:parameters[n],publicKey:l},"der")},"pem",{label:"PRIVATE KEY"}),h.fill(0)}else d=PublicKeyInfo$1.encode({algorithm:algorithms[n],PublicKey:l},"pem",{label:"PUBLIC KEY"});return d.slice(-1)!==`
`&&(d+=`
`),d}var ec$1=ecJwkToBuffer,asn1=asn1$2,b64ToBn=b64ToBn$2,PublicKeyInfo=publicKeyInfo,PrivateKeyInfo=privateKeyInfo,Version=version$1,RSAPrivateKey=asn1.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(Version),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}),RSAPublicKey=asn1.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}),algorithm={algorithm:[1,2,840,113549,1,1,1],parameters:[5,0]};function rsaJwkToBuffer(n,e){if(typeof n.e!="string")throw new TypeError('Expected "jwk.e" to be a String');if(typeof n.n!="string")throw new TypeError('Expected "jwk.n" to be a String');if(e.private){if(typeof n.d!="string")throw new TypeError('Expected "jwk.d" to be a String');if(typeof n.p!="string")throw new TypeError('Expected "jwk.p" to be a String');if(typeof n.q!="string")throw new TypeError('Expected "jwk.q" to be a String');if(typeof n.dp!="string")throw new TypeError('Expected "jwk.dp" to be a String');if(typeof n.dq!="string")throw new TypeError('Expected "jwk.dq" to be a String');if(typeof n.qi!="string")throw new TypeError('Expected "jwk.qi" to be a String')}var t;return e.private?t=PrivateKeyInfo.encode({version:0,privateKeyAlgorithm:algorithm,privateKey:RSAPrivateKey.encode({version:0,modulus:b64ToBn(n.n,!1),publicExponent:b64ToBn(n.e,!1),privateExponent:b64ToBn(n.d,!0),prime1:b64ToBn(n.p,!0),prime2:b64ToBn(n.q,!0),exponent1:b64ToBn(n.dp,!0),exponent2:b64ToBn(n.dq,!0),coefficient:b64ToBn(n.qi,!0)},"der")},"pem",{label:"PRIVATE KEY"}):t=PublicKeyInfo.encode({algorithm,PublicKey:{unused:0,data:RSAPublicKey.encode({modulus:b64ToBn(n.n,!1),publicExponent:b64ToBn(n.e,!1)},"der")}},"pem",{label:"PUBLIC KEY"}),t.slice(-1)!==`
`&&(t+=`
`),t}var rsa$1=rsaJwkToBuffer,ec=ec$1,rsa=rsa$1;function jwkToBuffer(n,e){if(typeof n!="object"||n===null)throw new TypeError('Expected "jwk" to be an Object');var t=n.kty;if(typeof t!="string")throw new TypeError('Expected "jwk.kty" to be a String');switch(e=e||{},e.private=e.private===!0,t){case"EC":return ec(n,e);case"RSA":return rsa(n,e);default:throw new Error('Unsupported key type "'+t+'"')}}var jwkToPem=jwkToBuffer;function bind(n,e){return function(){return n.apply(e,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(n=>e=>{const t=toString.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=n=>(n=n.toLowerCase(),e=>kindOf(e)===n),typeOfTest=n=>e=>typeof e===n,{isArray:isArray$1}=Array,isUndefined=typeOfTest("undefined");function isBuffer(n){return n!==null&&!isUndefined(n)&&n.constructor!==null&&!isUndefined(n.constructor)&&isFunction$1(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&isArrayBuffer(n.buffer),e}const isString=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$2=n=>n!==null&&typeof n=="object",isBoolean=n=>n===!0||n===!1,isPlainObject=n=>{if(kindOf(n)!=="object")return!1;const e=getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=n=>isObject$2(n)&&isFunction$1(n.pipe),isFormData=n=>{const e="[object FormData]";return n&&(typeof FormData=="function"&&n instanceof FormData||toString.call(n)===e||isFunction$1(n.toString)&&n.toString()===e)},isURLSearchParams=kindOfTest("URLSearchParams"),trim=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let o,l;if(typeof n!="object"&&(n=[n]),isArray$1(n))for(o=0,l=n.length;o<l;o++)e.call(null,n[o],o,n);else{const d=t?Object.getOwnPropertyNames(n):Object.keys(n),h=d.length;let g;for(o=0;o<h;o++)g=d[o],e.call(null,n[g],g,n)}}function findKey(n,e){e=e.toLowerCase();const t=Object.keys(n);let o=t.length,l;for(;o-- >0;)if(l=t[o],e===l.toLowerCase())return l;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal)(),isContextDefined=n=>!isUndefined(n)&&n!==_global;function merge$1(){const{caseless:n}=isContextDefined(this)&&this||{},e={},t=(o,l)=>{const d=n&&findKey(e,l)||l;isPlainObject(e[d])&&isPlainObject(o)?e[d]=merge$1(e[d],o):isPlainObject(o)?e[d]=merge$1({},o):isArray$1(o)?e[d]=o.slice():e[d]=o};for(let o=0,l=arguments.length;o<l;o++)arguments[o]&&forEach(arguments[o],t);return e}const extend=(n,e,t,{allOwnKeys:o}={})=>(forEach(e,(l,d)=>{t&&isFunction$1(l)?n[d]=bind(l,t):n[d]=l},{allOwnKeys:o}),n),stripBOM=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),inherits=(n,e,t,o)=>{n.prototype=Object.create(e.prototype,o),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},toFlatObject=(n,e,t,o)=>{let l,d,h;const g={};if(e=e||{},n==null)return e;do{for(l=Object.getOwnPropertyNames(n),d=l.length;d-- >0;)h=l[d],(!o||o(h,n,e))&&!g[h]&&(e[h]=n[h],g[h]=!0);n=t!==!1&&getPrototypeOf(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},endsWith=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const o=n.indexOf(e,t);return o!==-1&&o===t},toArray=n=>{if(!n)return null;if(isArray$1(n))return n;let e=n.length;if(!isNumber$1(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},isTypedArray=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(n,e)=>{const o=(n&&n[Symbol.iterator]).call(n);let l;for(;(l=o.next())&&!l.done;){const d=l.value;e.call(n,d[0],d[1])}},matchAll=(n,e)=>{let t;const o=[];for(;(t=n.exec(e))!==null;)o.push(t);return o},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=n=>n.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(t,o,l){return o.toUpperCase()+l}),hasOwnProperty=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),o={};forEach(t,(l,d)=>{e(l,d,n)!==!1&&(o[d]=l)}),Object.defineProperties(n,o)},freezeMethods=n=>{reduceDescriptors(n,(e,t)=>{if(isFunction$1(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const o=n[t];if(isFunction$1(o)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},toObjectSet=(n,e)=>{const t={},o=l=>{l.forEach(d=>{t[d]=!0})};return isArray$1(n)?o(n):o(String(n).split(e)),t},noop$1=()=>{},toFiniteNumber=(n,e)=>(n=+n,Number.isFinite(n)?n:e),toJSONObject=n=>{const e=new Array(10),t=(o,l)=>{if(isObject$2(o)){if(e.indexOf(o)>=0)return;if(!("toJSON"in o)){e[l]=o;const d=isArray$1(o)?[]:{};return forEach(o,(h,g)=>{const m=t(h,l+1);!isUndefined(m)&&(d[g]=m)}),e[l]=void 0,d}}return o};return t(n,0)};var utils={isArray:isArray$1,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber:isNumber$1,isBoolean,isObject:isObject$2,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge:merge$1,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,toJSONObject};function AxiosError(n,e,t,o,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),o&&(this.request=o),l&&(this.response=l)}utils.inherits(AxiosError,Error,{toJSON:function n(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors$1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{descriptors$1[n]={value:n}});Object.defineProperties(AxiosError,descriptors$1);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(n,e,t,o,l,d)=>{const h=Object.create(prototype$1);return utils.toFlatObject(n,h,function(m){return m!==Error.prototype},g=>g!=="isAxiosError"),AxiosError.call(h,n.message,e,t,o,l),h.cause=n,h.name=n.name,d&&Object.assign(h,d),h};var browser$1=typeof self=="object"?self.FormData:window.FormData,FormData$2=browser$1;function isVisitable(n){return utils.isPlainObject(n)||utils.isArray(n)}function removeBrackets(n){return utils.endsWith(n,"[]")?n.slice(0,-2):n}function renderKey(n,e,t){return n?n.concat(e).map(function(l,d){return l=removeBrackets(l),!t&&d?"["+l+"]":l}).join(t?".":""):e}function isFlatArray(n){return utils.isArray(n)&&!n.some(isVisitable)}const predicates=utils.toFlatObject(utils,{},null,function n(e){return/^is[A-Z]/.test(e)});function isSpecCompliant(n){return n&&utils.isFunction(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator]}function toFormData(n,e,t){if(!utils.isObject(n))throw new TypeError("target must be an object");e=e||new(FormData$2||FormData),t=utils.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,L){return!utils.isUndefined(L[C])});const o=t.metaTokens,l=t.visitor||b,d=t.dots,h=t.indexes,m=(t.Blob||typeof Blob<"u"&&Blob)&&isSpecCompliant(e);if(!utils.isFunction(l))throw new TypeError("visitor must be a function");function y($){if($===null)return"";if(utils.isDate($))return $.toISOString();if(!m&&utils.isBlob($))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils.isArrayBuffer($)||utils.isTypedArray($)?m&&typeof Blob=="function"?new Blob([$]):Buffer.from($):$}function b($,C,L){let W=$;if($&&!L&&typeof $=="object"){if(utils.endsWith(C,"{}"))C=o?C:C.slice(0,-2),$=JSON.stringify($);else if(utils.isArray($)&&isFlatArray($)||utils.isFileList($)||utils.endsWith(C,"[]")&&(W=utils.toArray($)))return C=removeBrackets(C),W.forEach(function(D,k){!(utils.isUndefined(D)||D===null)&&e.append(h===!0?renderKey([C],k,d):h===null?C:C+"[]",y(D))}),!1}return isVisitable($)?!0:(e.append(renderKey(L,C,d),y($)),!1)}const w=[],E=Object.assign(predicates,{defaultVisitor:b,convertValue:y,isVisitable});function P($,C){if(!utils.isUndefined($)){if(w.indexOf($)!==-1)throw Error("Circular reference detected in "+C.join("."));w.push($),utils.forEach($,function(W,Y){(!(utils.isUndefined(W)||W===null)&&l.call(e,W,utils.isString(Y)?Y.trim():Y,C,E))===!0&&P(W,C?C.concat(Y):[Y])}),w.pop()}}if(!utils.isObject(n))throw new TypeError("data must be an object");return P(n),e}function encode$1$1(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(o){return e[o]})}function AxiosURLSearchParams(n,e){this._pairs=[],n&&toFormData(n,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function n(e,t){this._pairs.push([e,t])};prototype.toString=function n(e){const t=e?function(o){return e.call(this,o,encode$1$1)}:encode$1$1;return this._pairs.map(function(l){return t(l[0])+"="+t(l[1])},"").join("&")};function encode$2(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(n,e,t){if(!e)return n;const o=t&&t.encode||encode$2,l=t&&t.serialize;let d;if(l?d=l(e,t):d=utils.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,t).toString(o),d){const h=n.indexOf("#");h!==-1&&(n=n.slice(0,h)),n+=(n.indexOf("?")===-1?"?":"&")+d}return n}class InterceptorManager{constructor(){this.handlers=[]}use(e,t,o){return this.handlers.push({fulfilled:e,rejected:t,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils.forEach(this.handlers,function(o){o!==null&&e(o)})}}var InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=FormData;const isStandardBrowserEnv=(()=>{let n;return typeof navigator<"u"&&((n=navigator.product)==="ReactNative"||n==="NativeScript"||n==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")();var platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(n,e){return toFormData(n,new platform.classes.URLSearchParams,Object.assign({visitor:function(t,o,l,d){return platform.isNode&&utils.isBuffer(t)?(this.append(o,t.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},e))}function parsePropPath(n){return utils.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(n){const e={},t=Object.keys(n);let o;const l=t.length;let d;for(o=0;o<l;o++)d=t[o],e[d]=n[d];return e}function formDataToJSON(n){function e(t,o,l,d){let h=t[d++];const g=Number.isFinite(+h),m=d>=t.length;return h=!h&&utils.isArray(l)?l.length:h,m?(utils.hasOwnProp(l,h)?l[h]=[l[h],o]:l[h]=o,!g):((!l[h]||!utils.isObject(l[h]))&&(l[h]=[]),e(t,o,l[h],d)&&utils.isArray(l[h])&&(l[h]=arrayToObject(l[h])),!g)}if(utils.isFormData(n)&&utils.isFunction(n.entries)){const t={};return utils.forEachEntry(n,(o,l)=>{e(parsePropPath(o),l,t,0)}),t}return null}const DEFAULT_CONTENT_TYPE={"Content-Type":void 0};function stringifySafely(n,e,t){if(utils.isString(n))try{return(e||JSON.parse)(n),utils.trim(n)}catch(o){if(o.name!=="SyntaxError")throw o}return(t||JSON.stringify)(n)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function n(e,t){const o=t.getContentType()||"",l=o.indexOf("application/json")>-1,d=utils.isObject(e);if(d&&utils.isHTMLForm(e)&&(e=new FormData(e)),utils.isFormData(e))return l&&l?JSON.stringify(formDataToJSON(e)):e;if(utils.isArrayBuffer(e)||utils.isBuffer(e)||utils.isStream(e)||utils.isFile(e)||utils.isBlob(e))return e;if(utils.isArrayBufferView(e))return e.buffer;if(utils.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let g;if(d){if(o.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((g=utils.isFileList(e))||o.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return toFormData(g?{"files[]":e}:e,m&&new m,this.formSerializer)}}return d||l?(t.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function n(e){const t=this.transitional||defaults$1.transitional,o=t&&t.forcedJSONParsing,l=this.responseType==="json";if(e&&utils.isString(e)&&(o&&!this.responseType||l)){const h=!(t&&t.silentJSONParsing)&&l;try{return JSON.parse(e)}catch(g){if(h)throw g.name==="SyntaxError"?AxiosError.from(g,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):g}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function n(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function n(e){defaults$1.headers[e]={}});utils.forEach(["post","put","patch"],function n(e){defaults$1.headers[e]=utils.merge(DEFAULT_CONTENT_TYPE)});var defaults$1$1=defaults$1;const ignoreDuplicateOf=utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var parseHeaders=n=>{const e={};let t,o,l;return n&&n.split(`
`).forEach(function(h){l=h.indexOf(":"),t=h.substring(0,l).trim().toLowerCase(),o=h.substring(l+1).trim(),!(!t||e[t]&&ignoreDuplicateOf[t])&&(t==="set-cookie"?e[t]?e[t].push(o):e[t]=[o]:e[t]=e[t]?e[t]+", "+o:o)}),e};const $internals=Symbol("internals");function normalizeHeader(n){return n&&String(n).trim().toLowerCase()}function normalizeValue(n){return n===!1||n==null?n:utils.isArray(n)?n.map(normalizeValue):String(n)}function parseTokens(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=t.exec(n);)e[o[1]]=o[2];return e}function isValidHeaderName(n){return/^[-_a-zA-Z]+$/.test(n.trim())}function matchHeaderValue(n,e,t,o){if(utils.isFunction(o))return o.call(this,e,t);if(utils.isString(e)){if(utils.isString(o))return e.indexOf(o)!==-1;if(utils.isRegExp(o))return o.test(e)}}function formatHeader(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,o)=>t.toUpperCase()+o)}function buildAccessors(n,e){const t=utils.toCamelCase(" "+e);["get","set","has"].forEach(o=>{Object.defineProperty(n,o+t,{value:function(l,d,h){return this[o].call(this,e,l,d,h)},configurable:!0})})}class AxiosHeaders{constructor(e){e&&this.set(e)}set(e,t,o){const l=this;function d(g,m,y){const b=normalizeHeader(m);if(!b)throw new Error("header name must be a non-empty string");const w=utils.findKey(l,b);(!w||l[w]===void 0||y===!0||y===void 0&&l[w]!==!1)&&(l[w||m]=normalizeValue(g))}const h=(g,m)=>utils.forEach(g,(y,b)=>d(y,b,m));return utils.isPlainObject(e)||e instanceof this.constructor?h(e,t):utils.isString(e)&&(e=e.trim())&&!isValidHeaderName(e)?h(parseHeaders(e),t):e!=null&&d(t,e,o),this}get(e,t){if(e=normalizeHeader(e),e){const o=utils.findKey(this,e);if(o){const l=this[o];if(!t)return l;if(t===!0)return parseTokens(l);if(utils.isFunction(t))return t.call(this,l,o);if(utils.isRegExp(t))return t.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=normalizeHeader(e),e){const o=utils.findKey(this,e);return!!(o&&(!t||matchHeaderValue(this,this[o],o,t)))}return!1}delete(e,t){const o=this;let l=!1;function d(h){if(h=normalizeHeader(h),h){const g=utils.findKey(o,h);g&&(!t||matchHeaderValue(o,o[g],g,t))&&(delete o[g],l=!0)}}return utils.isArray(e)?e.forEach(d):d(e),l}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(e){const t=this,o={};return utils.forEach(this,(l,d)=>{const h=utils.findKey(o,d);if(h){t[h]=normalizeValue(l),delete t[d];return}const g=e?formatHeader(d):String(d).trim();g!==d&&delete t[d],t[g]=normalizeValue(l),o[g]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return utils.forEach(this,(o,l)=>{o!=null&&o!==!1&&(t[l]=e&&utils.isArray(o)?o.join(", "):o)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const o=new this(e);return t.forEach(l=>o.set(l)),o}static accessor(e){const o=(this[$internals]=this[$internals]={accessors:{}}).accessors,l=this.prototype;function d(h){const g=normalizeHeader(h);o[g]||(buildAccessors(l,h),o[g]=!0)}return utils.isArray(e)?e.forEach(d):d(e),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);utils.freezeMethods(AxiosHeaders.prototype);utils.freezeMethods(AxiosHeaders);var AxiosHeaders$1=AxiosHeaders;function transformData(n,e){const t=this||defaults$1$1,o=e||t,l=AxiosHeaders$1.from(o.headers);let d=o.data;return utils.forEach(n,function(g){d=g.call(t,d,l.normalize(),e?e.status:void 0)}),l.normalize(),d}function isCancel(n){return!!(n&&n.__CANCEL__)}function CanceledError(n,e,t){AxiosError.call(this,n??"canceled",AxiosError.ERR_CANCELED,e,t),this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:!0});var httpAdapter=null;function settle(n,e,t){const o=t.config.validateStatus;!t.status||!o||o(t.status)?n(t):e(new AxiosError("Request failed with status code "+t.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}var cookies=platform.isStandardBrowserEnv?function n(){return{write:function(t,o,l,d,h,g){const m=[];m.push(t+"="+encodeURIComponent(o)),utils.isNumber(l)&&m.push("expires="+new Date(l).toGMTString()),utils.isString(d)&&m.push("path="+d),utils.isString(h)&&m.push("domain="+h),g===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(t){const o=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function n(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function combineURLs(n,e){return e?n.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):n}function buildFullPath(n,e){return n&&!isAbsoluteURL(e)?combineURLs(n,e):e}var isURLSameOrigin=platform.isStandardBrowserEnv?function n(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let o;function l(d){let h=d;return e&&(t.setAttribute("href",h),h=t.href),t.setAttribute("href",h),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return o=l(window.location.href),function(h){const g=utils.isString(h)?l(h):h;return g.protocol===o.protocol&&g.host===o.host}}():function n(){return function(){return!0}}();function parseProtocol(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function speedometer(n,e){n=n||10;const t=new Array(n),o=new Array(n);let l=0,d=0,h;return e=e!==void 0?e:1e3,function(m){const y=Date.now(),b=o[d];h||(h=y),t[l]=m,o[l]=y;let w=d,E=0;for(;w!==l;)E+=t[w++],w=w%n;if(l=(l+1)%n,l===d&&(d=(d+1)%n),y-h<e)return;const P=b&&y-b;return P?Math.round(E*1e3/P):void 0}}function progressEventReducer(n,e){let t=0;const o=speedometer(50,250);return l=>{const d=l.loaded,h=l.lengthComputable?l.total:void 0,g=d-t,m=o(g),y=d<=h;t=d;const b={loaded:d,total:h,progress:h?d/h:void 0,bytes:g,rate:m||void 0,estimated:m&&h&&y?(h-d)/m:void 0,event:l};b[e?"download":"upload"]=!0,n(b)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u";var xhrAdapter=isXHRAdapterSupported&&function(n){return new Promise(function(t,o){let l=n.data;const d=AxiosHeaders$1.from(n.headers).normalize(),h=n.responseType;let g;function m(){n.cancelToken&&n.cancelToken.unsubscribe(g),n.signal&&n.signal.removeEventListener("abort",g)}utils.isFormData(l)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv)&&d.setContentType(!1);let y=new XMLHttpRequest;if(n.auth){const P=n.auth.username||"",$=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";d.set("Authorization","Basic "+btoa(P+":"+$))}const b=buildFullPath(n.baseURL,n.url);y.open(n.method.toUpperCase(),buildURL(b,n.params,n.paramsSerializer),!0),y.timeout=n.timeout;function w(){if(!y)return;const P=AxiosHeaders$1.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),C={data:!h||h==="text"||h==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:P,config:n,request:y};settle(function(W){t(W),m()},function(W){o(W),m()},C),y=null}if("onloadend"in y?y.onloadend=w:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(w)},y.onabort=function(){y&&(o(new AxiosError("Request aborted",AxiosError.ECONNABORTED,n,y)),y=null)},y.onerror=function(){o(new AxiosError("Network Error",AxiosError.ERR_NETWORK,n,y)),y=null},y.ontimeout=function(){let $=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const C=n.transitional||transitionalDefaults;n.timeoutErrorMessage&&($=n.timeoutErrorMessage),o(new AxiosError($,C.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,n,y)),y=null},platform.isStandardBrowserEnv){const P=(n.withCredentials||isURLSameOrigin(b))&&n.xsrfCookieName&&cookies.read(n.xsrfCookieName);P&&d.set(n.xsrfHeaderName,P)}l===void 0&&d.setContentType(null),"setRequestHeader"in y&&utils.forEach(d.toJSON(),function($,C){y.setRequestHeader(C,$)}),utils.isUndefined(n.withCredentials)||(y.withCredentials=!!n.withCredentials),h&&h!=="json"&&(y.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&y.addEventListener("progress",progressEventReducer(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&y.upload&&y.upload.addEventListener("progress",progressEventReducer(n.onUploadProgress)),(n.cancelToken||n.signal)&&(g=P=>{y&&(o(!P||P.type?new CanceledError(null,n,y):P),y.abort(),y=null)},n.cancelToken&&n.cancelToken.subscribe(g),n.signal&&(n.signal.aborted?g():n.signal.addEventListener("abort",g)));const E=parseProtocol(b);if(E&&platform.protocols.indexOf(E)===-1){o(new AxiosError("Unsupported protocol "+E+":",AxiosError.ERR_BAD_REQUEST,n));return}y.send(l||null)})};const knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils.forEach(knownAdapters,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});var adapters$1={getAdapter:n=>{n=utils.isArray(n)?n:[n];const{length:e}=n;let t,o;for(let l=0;l<e&&(t=n[l],!(o=utils.isString(t)?knownAdapters[t.toLowerCase()]:t));l++);if(!o)throw o===!1?new AxiosError(`Adapter ${t} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils.hasOwnProp(knownAdapters,t)?`Adapter '${t}' is not available in the build`:`Unknown adapter '${t}'`);if(!utils.isFunction(o))throw new TypeError("adapter is not a function");return o},adapters:knownAdapters};function throwIfCancellationRequested(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new CanceledError(null,n)}function dispatchRequest(n){return throwIfCancellationRequested(n),n.headers=AxiosHeaders$1.from(n.headers),n.data=transformData.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),adapters$1.getAdapter(n.adapter||defaults$1$1.adapter)(n).then(function(o){return throwIfCancellationRequested(n),o.data=transformData.call(n,n.transformResponse,o),o.headers=AxiosHeaders$1.from(o.headers),o},function(o){return isCancel(o)||(throwIfCancellationRequested(n),o&&o.response&&(o.response.data=transformData.call(n,n.transformResponse,o.response),o.response.headers=AxiosHeaders$1.from(o.response.headers))),Promise.reject(o)})}const headersToObject=n=>n instanceof AxiosHeaders$1?n.toJSON():n;function mergeConfig(n,e){e=e||{};const t={};function o(y,b,w){return utils.isPlainObject(y)&&utils.isPlainObject(b)?utils.merge.call({caseless:w},y,b):utils.isPlainObject(b)?utils.merge({},b):utils.isArray(b)?b.slice():b}function l(y,b,w){if(utils.isUndefined(b)){if(!utils.isUndefined(y))return o(void 0,y,w)}else return o(y,b,w)}function d(y,b){if(!utils.isUndefined(b))return o(void 0,b)}function h(y,b){if(utils.isUndefined(b)){if(!utils.isUndefined(y))return o(void 0,y)}else return o(void 0,b)}function g(y,b,w){if(w in e)return o(y,b);if(w in n)return o(void 0,y)}const m={url:d,method:d,data:d,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:g,headers:(y,b)=>l(headersToObject(y),headersToObject(b),!0)};return utils.forEach(Object.keys(n).concat(Object.keys(e)),function(b){const w=m[b]||l,E=w(n[b],e[b],b);utils.isUndefined(E)&&w!==g||(t[b]=E)}),t}const VERSION="1.2.3",validators$1={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{validators$1[n]=function(o){return typeof o===n||"a"+(e<1?"n ":" ")+n}});const deprecatedWarnings={};validators$1.transitional=function n(e,t,o){function l(d,h){return"[Axios v"+VERSION+"] Transitional option '"+d+"'"+h+(o?". "+o:"")}return(d,h,g)=>{if(e===!1)throw new AxiosError(l(h," has been removed"+(t?" in "+t:"")),AxiosError.ERR_DEPRECATED);return t&&!deprecatedWarnings[h]&&(deprecatedWarnings[h]=!0,console.warn(l(h," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(d,h,g):!0}};function assertOptions(n,e,t){if(typeof n!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const o=Object.keys(n);let l=o.length;for(;l-- >0;){const d=o[l],h=e[d];if(h){const g=n[d],m=g===void 0||h(g,d,n);if(m!==!0)throw new AxiosError("option "+d+" must be "+m,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new AxiosError("Unknown option "+d,AxiosError.ERR_BAD_OPTION)}}var validator={assertOptions,validators:validators$1};const validators=validator.validators;class Axios{constructor(e){this.defaults=e,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=mergeConfig(this.defaults,t);const{transitional:o,paramsSerializer:l,headers:d}=t;o!==void 0&&validator.assertOptions(o,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),l!==void 0&&validator.assertOptions(l,{encode:validators.function,serialize:validators.function},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let h;h=d&&utils.merge(d.common,d[t.method]),h&&utils.forEach(["delete","get","head","post","put","patch","common"],$=>{delete d[$]}),t.headers=AxiosHeaders$1.concat(h,d);const g=[];let m=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(t)===!1||(m=m&&C.synchronous,g.unshift(C.fulfilled,C.rejected))});const y=[];this.interceptors.response.forEach(function(C){y.push(C.fulfilled,C.rejected)});let b,w=0,E;if(!m){const $=[dispatchRequest.bind(this),void 0];for($.unshift.apply($,g),$.push.apply($,y),E=$.length,b=Promise.resolve(t);w<E;)b=b.then($[w++],$[w++]);return b}E=g.length;let P=t;for(w=0;w<E;){const $=g[w++],C=g[w++];try{P=$(P)}catch(L){C.call(this,L);break}}try{b=dispatchRequest.call(this,P)}catch($){return Promise.reject($)}for(w=0,E=y.length;w<E;)b=b.then(y[w++],y[w++]);return b}getUri(e){e=mergeConfig(this.defaults,e);const t=buildFullPath(e.baseURL,e.url);return buildURL(t,e.params,e.paramsSerializer)}}utils.forEach(["delete","get","head","options"],function n(e){Axios.prototype[e]=function(t,o){return this.request(mergeConfig(o||{},{method:e,url:t,data:(o||{}).data}))}});utils.forEach(["post","put","patch"],function n(e){function t(o){return function(d,h,g){return this.request(mergeConfig(g||{},{method:e,headers:o?{"Content-Type":"multipart/form-data"}:{},url:d,data:h}))}}Axios.prototype[e]=t(),Axios.prototype[e+"Form"]=t(!0)});var Axios$1=Axios;class CancelToken{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(d){t=d});const o=this;this.promise.then(l=>{if(!o._listeners)return;let d=o._listeners.length;for(;d-- >0;)o._listeners[d](l);o._listeners=null}),this.promise.then=l=>{let d;const h=new Promise(g=>{o.subscribe(g),d=g}).then(l);return h.cancel=function(){o.unsubscribe(d)},h},e(function(d,h,g){o.reason||(o.reason=new CanceledError(d,h,g),t(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new CancelToken(function(l){e=l}),cancel:e}}}var CancelToken$1=CancelToken;function spread(n){return function(t){return n.apply(null,t)}}function isAxiosError(n){return utils.isObject(n)&&n.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([n,e])=>{HttpStatusCode[e]=n});var HttpStatusCode$1=HttpStatusCode;function createInstance(n){const e=new Axios$1(n),t=bind(Axios$1.prototype.request,e);return utils.extend(t,Axios$1.prototype,e,{allOwnKeys:!0}),utils.extend(t,e,null,{allOwnKeys:!0}),t.create=function(l){return createInstance(mergeConfig(n,l))},t}const axios=createInstance(defaults$1$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function n(e){return Promise.all(e)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=n=>formDataToJSON(utils.isHTMLForm(n)?new FormData(n):n);axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;var axios_1$1=axios;const crypto$1=crypto,isCryptoKey=n=>n instanceof CryptoKey,digest=async(n,e)=>{const t=`SHA-${n.slice(-3)}`;return new Uint8Array(await crypto$1.subtle.digest(t,e))},digest$1=digest,encoder=new TextEncoder,decoder=new TextDecoder,MAX_INT32=2**32;function concat(...n){const e=n.reduce((l,{length:d})=>l+d,0),t=new Uint8Array(e);let o=0;return n.forEach(l=>{t.set(l,o),o+=l.length}),t}function p2s(n,e){return concat(encoder.encode(n),new Uint8Array([0]),e)}function writeUInt32BE(n,e,t){if(e<0||e>=MAX_INT32)throw new RangeError(`value must be >= 0 and <= ${MAX_INT32-1}. Received ${e}`);n.set([e>>>24,e>>>16,e>>>8,e&255],t)}function uint64be(n){const e=Math.floor(n/MAX_INT32),t=n%MAX_INT32,o=new Uint8Array(8);return writeUInt32BE(o,e,0),writeUInt32BE(o,t,4),o}function uint32be(n){const e=new Uint8Array(4);return writeUInt32BE(e,n),e}function lengthAndInput(n){return concat(uint32be(n.length),n)}async function concatKdf(n,e,t){const o=Math.ceil((e>>3)/32),l=new Uint8Array(o*32);for(let d=0;d<o;d++){const h=new Uint8Array(4+n.length+t.length);h.set(uint32be(d+1)),h.set(n,4),h.set(t,4+n.length),l.set(await digest$1("sha256",h),d*32)}return l.slice(0,e>>3)}const encodeBase64=n=>{let e=n;typeof e=="string"&&(e=encoder.encode(e));const t=32768,o=[];for(let l=0;l<e.length;l+=t)o.push(String.fromCharCode.apply(null,e.subarray(l,l+t)));return btoa(o.join(""))},encode$1=n=>encodeBase64(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),decodeBase64=n=>{const e=atob(n),t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t},decode$1=n=>{let e=n;e instanceof Uint8Array&&(e=decoder.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return decodeBase64(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class JOSEError extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(t=Error.captureStackTrace)===null||t===void 0||t.call(Error,this,this.constructor)}}class JWTClaimValidationFailed extends JOSEError{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,t="unspecified",o="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=t,this.reason=o}}class JWTExpired extends JOSEError{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,t="unspecified",o="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=t,this.reason=o}}class JOSEAlgNotAllowed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class JOSENotSupported extends JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class JWEDecryptionFailed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class JWEInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class JWSInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class JWTInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class JWKInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class JWKSInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class JWKSNoMatchingKey extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class JWKSMultipleMatchingKeys extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class JWKSTimeout extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class JWSSignatureVerificationFailed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const errors=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed,JOSEError,JOSENotSupported,JWEDecryptionFailed,JWEInvalid,JWKInvalid,JWKSInvalid,JWKSMultipleMatchingKeys,JWKSNoMatchingKey,JWKSTimeout,JWSInvalid,JWSSignatureVerificationFailed,JWTClaimValidationFailed,JWTExpired,JWTInvalid},Symbol.toStringTag,{value:"Module"})),random=crypto$1.getRandomValues.bind(crypto$1);function bitLength$1(n){switch(n){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new JOSENotSupported(`Unsupported JWE Algorithm: ${n}`)}}const generateIv=n=>random(new Uint8Array(bitLength$1(n)>>3)),checkIvLength=(n,e)=>{if(e.length<<3!==bitLength$1(n))throw new JWEInvalid("Invalid Initialization Vector length")},checkIvLength$1=checkIvLength,checkCekLength=(n,e)=>{const t=n.byteLength<<3;if(t!==e)throw new JWEInvalid(`Invalid Content Encryption Key length. Expected ${e} bits, got ${t} bits`)},checkCekLength$1=checkCekLength,timingSafeEqual=(n,e)=>{if(!(n instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(e instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(n.length!==e.length)throw new TypeError("Input buffers must have the same length");const t=n.length;let o=0,l=-1;for(;++l<t;)o|=n[l]^e[l];return o===0},timingSafeEqual$1=timingSafeEqual;function isCloudflareWorkers(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}function unusable(n,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${n}`)}function isAlgorithm(n,e){return n.name===e}function getHashLength(n){return parseInt(n.name.slice(4),10)}function getNamedCurve$1(n){switch(n){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function checkUsage(n,e){if(e.length&&!e.some(t=>n.usages.includes(t))){let t="CryptoKey does not support this operation, its usages must include ";if(e.length>2){const o=e.pop();t+=`one of ${e.join(", ")}, or ${o}.`}else e.length===2?t+=`one of ${e[0]} or ${e[1]}.`:t+=`${e[0]}.`;throw new TypeError(t)}}function checkSigCryptoKey(n,e,...t){switch(e){case"HS256":case"HS384":case"HS512":{if(!isAlgorithm(n.algorithm,"HMAC"))throw unusable("HMAC");const o=parseInt(e.slice(2),10);if(getHashLength(n.algorithm.hash)!==o)throw unusable(`SHA-${o}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!isAlgorithm(n.algorithm,"RSASSA-PKCS1-v1_5"))throw unusable("RSASSA-PKCS1-v1_5");const o=parseInt(e.slice(2),10);if(getHashLength(n.algorithm.hash)!==o)throw unusable(`SHA-${o}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!isAlgorithm(n.algorithm,"RSA-PSS"))throw unusable("RSA-PSS");const o=parseInt(e.slice(2),10);if(getHashLength(n.algorithm.hash)!==o)throw unusable(`SHA-${o}`,"algorithm.hash");break}case(isCloudflareWorkers()&&"EdDSA"):{if(!isAlgorithm(n.algorithm,"NODE-ED25519"))throw unusable("NODE-ED25519");break}case"EdDSA":{if(n.algorithm.name!=="Ed25519"&&n.algorithm.name!=="Ed448")throw unusable("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!isAlgorithm(n.algorithm,"ECDSA"))throw unusable("ECDSA");const o=getNamedCurve$1(e);if(n.algorithm.namedCurve!==o)throw unusable(o,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}checkUsage(n,t)}function checkEncCryptoKey(n,e,...t){switch(e){case"A128GCM":case"A192GCM":case"A256GCM":{if(!isAlgorithm(n.algorithm,"AES-GCM"))throw unusable("AES-GCM");const o=parseInt(e.slice(1,4),10);if(n.algorithm.length!==o)throw unusable(o,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!isAlgorithm(n.algorithm,"AES-KW"))throw unusable("AES-KW");const o=parseInt(e.slice(1,4),10);if(n.algorithm.length!==o)throw unusable(o,"algorithm.length");break}case"ECDH":{switch(n.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw unusable("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!isAlgorithm(n.algorithm,"PBKDF2"))throw unusable("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!isAlgorithm(n.algorithm,"RSA-OAEP"))throw unusable("RSA-OAEP");const o=parseInt(e.slice(9),10)||1;if(getHashLength(n.algorithm.hash)!==o)throw unusable(`SHA-${o}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}checkUsage(n,t)}function message(n,e,...t){if(t.length>2){const o=t.pop();n+=`one of type ${t.join(", ")}, or ${o}.`}else t.length===2?n+=`one of type ${t[0]} or ${t[1]}.`:n+=`of type ${t[0]}.`;return e==null?n+=` Received ${e}`:typeof e=="function"&&e.name?n+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&e.constructor&&e.constructor.name&&(n+=` Received an instance of ${e.constructor.name}`),n}const invalidKeyInput=(n,...e)=>message("Key must be ",n,...e);function withAlg(n,e,...t){return message(`Key for the ${n} algorithm must be `,e,...t)}const isKeyLike=n=>isCryptoKey(n),types=["CryptoKey"];async function cbcDecrypt(n,e,t,o,l,d){if(!(e instanceof Uint8Array))throw new TypeError(invalidKeyInput(e,"Uint8Array"));const h=parseInt(n.slice(1,4),10),g=await crypto$1.subtle.importKey("raw",e.subarray(h>>3),"AES-CBC",!1,["decrypt"]),m=await crypto$1.subtle.importKey("raw",e.subarray(0,h>>3),{hash:`SHA-${h<<1}`,name:"HMAC"},!1,["sign"]),y=concat(d,o,t,uint64be(d.length<<3)),b=new Uint8Array((await crypto$1.subtle.sign("HMAC",m,y)).slice(0,h>>3));let w;try{w=timingSafeEqual$1(l,b)}catch{}if(!w)throw new JWEDecryptionFailed;let E;try{E=new Uint8Array(await crypto$1.subtle.decrypt({iv:o,name:"AES-CBC"},g,t))}catch{}if(!E)throw new JWEDecryptionFailed;return E}async function gcmDecrypt(n,e,t,o,l,d){let h;e instanceof Uint8Array?h=await crypto$1.subtle.importKey("raw",e,"AES-GCM",!1,["decrypt"]):(checkEncCryptoKey(e,n,"decrypt"),h=e);try{return new Uint8Array(await crypto$1.subtle.decrypt({additionalData:d,iv:o,name:"AES-GCM",tagLength:128},h,concat(t,l)))}catch{throw new JWEDecryptionFailed}}const decrypt$2=async(n,e,t,o,l,d)=>{if(!isCryptoKey(e)&&!(e instanceof Uint8Array))throw new TypeError(invalidKeyInput(e,...types,"Uint8Array"));switch(checkIvLength$1(n,o),n){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return e instanceof Uint8Array&&checkCekLength$1(e,parseInt(n.slice(-3),10)),cbcDecrypt(n,e,t,o,l,d);case"A128GCM":case"A192GCM":case"A256GCM":return e instanceof Uint8Array&&checkCekLength$1(e,parseInt(n.slice(1,4),10)),gcmDecrypt(n,e,t,o,l,d);default:throw new JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}},decrypt$3=decrypt$2,inflate=async()=>{throw new JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},deflate=async()=>{throw new JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},isDisjoint=(...n)=>{const e=n.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const o of e){const l=Object.keys(o);if(!t||t.size===0){t=new Set(l);continue}for(const d of l){if(t.has(d))return!1;t.add(d)}}return!0},isDisjoint$1=isDisjoint;function isObjectLike(n){return typeof n=="object"&&n!==null}function isObject$1(n){if(!isObjectLike(n)||Object.prototype.toString.call(n)!=="[object Object]")return!1;if(Object.getPrototypeOf(n)===null)return!0;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}const bogusWebCrypto=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]],bogusWebCrypto$1=bogusWebCrypto;function checkKeySize(n,e){if(n.algorithm.length!==parseInt(e.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${e}`)}function getCryptoKey$2(n,e,t){if(isCryptoKey(n))return checkEncCryptoKey(n,e,t),n;if(n instanceof Uint8Array)return crypto$1.subtle.importKey("raw",n,"AES-KW",!0,[t]);throw new TypeError(invalidKeyInput(n,...types,"Uint8Array"))}const wrap$1=async(n,e,t)=>{const o=await getCryptoKey$2(e,n,"wrapKey");checkKeySize(o,n);const l=await crypto$1.subtle.importKey("raw",t,...bogusWebCrypto$1);return new Uint8Array(await crypto$1.subtle.wrapKey("raw",l,o,"AES-KW"))},unwrap$1=async(n,e,t)=>{const o=await getCryptoKey$2(e,n,"unwrapKey");checkKeySize(o,n);const l=await crypto$1.subtle.unwrapKey("raw",t,o,"AES-KW",...bogusWebCrypto$1);return new Uint8Array(await crypto$1.subtle.exportKey("raw",l))};async function deriveKey$1(n,e,t,o,l=new Uint8Array(0),d=new Uint8Array(0)){if(!isCryptoKey(n))throw new TypeError(invalidKeyInput(n,...types));if(checkEncCryptoKey(n,"ECDH"),!isCryptoKey(e))throw new TypeError(invalidKeyInput(e,...types));checkEncCryptoKey(e,"ECDH","deriveBits");const h=concat(lengthAndInput(encoder.encode(t)),lengthAndInput(l),lengthAndInput(d),uint32be(o));let g;n.algorithm.name==="X25519"?g=256:n.algorithm.name==="X448"?g=448:g=Math.ceil(parseInt(n.algorithm.namedCurve.substr(-3),10)/8)<<3;const m=new Uint8Array(await crypto$1.subtle.deriveBits({name:n.algorithm.name,public:n},e,g));return concatKdf(m,o,h)}async function generateEpk(n){if(!isCryptoKey(n))throw new TypeError(invalidKeyInput(n,...types));return crypto$1.subtle.generateKey(n.algorithm,!0,["deriveBits"])}function ecdhAllowed(n){if(!isCryptoKey(n))throw new TypeError(invalidKeyInput(n,...types));return["P-256","P-384","P-521"].includes(n.algorithm.namedCurve)||n.algorithm.name==="X25519"||n.algorithm.name==="X448"}function checkP2s(n){if(!(n instanceof Uint8Array)||n.length<8)throw new JWEInvalid("PBES2 Salt Input must be 8 or more octets")}function getCryptoKey$1(n,e){if(n instanceof Uint8Array)return crypto$1.subtle.importKey("raw",n,"PBKDF2",!1,["deriveBits"]);if(isCryptoKey(n))return checkEncCryptoKey(n,e,"deriveBits","deriveKey"),n;throw new TypeError(invalidKeyInput(n,...types,"Uint8Array"))}async function deriveKey(n,e,t,o){checkP2s(n);const l=p2s(e,n),d=parseInt(e.slice(13,16),10),h={hash:`SHA-${e.slice(8,11)}`,iterations:t,name:"PBKDF2",salt:l},g={length:d,name:"AES-KW"},m=await getCryptoKey$1(o,e);if(m.usages.includes("deriveBits"))return new Uint8Array(await crypto$1.subtle.deriveBits(h,m,d));if(m.usages.includes("deriveKey"))return crypto$1.subtle.deriveKey(h,m,g,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const encrypt$3=async(n,e,t,o=2048,l=random(new Uint8Array(16)))=>{const d=await deriveKey(l,n,o,e);return{encryptedKey:await wrap$1(n.slice(-6),d,t),p2c:o,p2s:encode$1(l)}},decrypt$1=async(n,e,t,o,l)=>{const d=await deriveKey(l,n,o,e);return unwrap$1(n.slice(-6),d,t)};function subtleRsaEs(n){switch(n){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new JOSENotSupported(`alg ${n} is not supported either by JOSE or your javascript runtime`)}}const checkKeyLength=(n,e)=>{if(n.startsWith("RS")||n.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${n} requires key modulusLength to be 2048 bits or larger`)}},encrypt$2=async(n,e,t)=>{if(!isCryptoKey(e))throw new TypeError(invalidKeyInput(e,...types));if(checkEncCryptoKey(e,n,"encrypt","wrapKey"),checkKeyLength(n,e),e.usages.includes("encrypt"))return new Uint8Array(await crypto$1.subtle.encrypt(subtleRsaEs(n),e,t));if(e.usages.includes("wrapKey")){const o=await crypto$1.subtle.importKey("raw",t,...bogusWebCrypto$1);return new Uint8Array(await crypto$1.subtle.wrapKey("raw",o,e,subtleRsaEs(n)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},decrypt=async(n,e,t)=>{if(!isCryptoKey(e))throw new TypeError(invalidKeyInput(e,...types));if(checkEncCryptoKey(e,n,"decrypt","unwrapKey"),checkKeyLength(n,e),e.usages.includes("decrypt"))return new Uint8Array(await crypto$1.subtle.decrypt(subtleRsaEs(n),e,t));if(e.usages.includes("unwrapKey")){const o=await crypto$1.subtle.unwrapKey("raw",t,e,subtleRsaEs(n),...bogusWebCrypto$1);return new Uint8Array(await crypto$1.subtle.exportKey("raw",o))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function bitLength(n){switch(n){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new JOSENotSupported(`Unsupported JWE Algorithm: ${n}`)}}const generateCek=n=>random(new Uint8Array(bitLength(n)>>3)),formatPEM=(n,e)=>{const t=(n.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${e}-----
${t}
-----END ${e}-----`},genericExport=async(n,e,t)=>{if(!isCryptoKey(t))throw new TypeError(invalidKeyInput(t,...types));if(!t.extractable)throw new TypeError("CryptoKey is not extractable");if(t.type!==n)throw new TypeError(`key is not a ${n} key`);return formatPEM(encodeBase64(new Uint8Array(await crypto$1.subtle.exportKey(e,t))),`${n.toUpperCase()} KEY`)},toSPKI=n=>genericExport("public","spki",n),toPKCS8=n=>genericExport("private","pkcs8",n),findOid=(n,e,t=0)=>{t===0&&(e.unshift(e.length),e.unshift(6));let o=n.indexOf(e[0],t);if(o===-1)return!1;const l=n.subarray(o,o+e.length);return l.length!==e.length?!1:l.every((d,h)=>d===e[h])||findOid(n,e,o+1)},getNamedCurve=n=>{switch(!0){case findOid(n,[42,134,72,206,61,3,1,7]):return"P-256";case findOid(n,[43,129,4,0,34]):return"P-384";case findOid(n,[43,129,4,0,35]):return"P-521";case findOid(n,[43,101,110]):return"X25519";case findOid(n,[43,101,111]):return"X448";case findOid(n,[43,101,112]):return"Ed25519";case findOid(n,[43,101,113]):return"Ed448";default:throw new JOSENotSupported("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},genericImport=async(n,e,t,o,l)=>{var d;let h,g;const m=new Uint8Array(atob(t.replace(n,"")).split("").map(b=>b.charCodeAt(0))),y=e==="spki";switch(o){case"PS256":case"PS384":case"PS512":h={name:"RSA-PSS",hash:`SHA-${o.slice(-3)}`},g=y?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":h={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${o.slice(-3)}`},g=y?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":h={name:"RSA-OAEP",hash:`SHA-${parseInt(o.slice(-3),10)||1}`},g=y?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":h={name:"ECDSA",namedCurve:"P-256"},g=y?["verify"]:["sign"];break;case"ES384":h={name:"ECDSA",namedCurve:"P-384"},g=y?["verify"]:["sign"];break;case"ES512":h={name:"ECDSA",namedCurve:"P-521"},g=y?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const b=getNamedCurve(m);h=b.startsWith("P-")?{name:"ECDH",namedCurve:b}:{name:b},g=y?[]:["deriveBits"];break}case(isCloudflareWorkers()&&"EdDSA"):{const b=getNamedCurve(m).toUpperCase();h={name:`NODE-${b}`,namedCurve:`NODE-${b}`},g=y?["verify"]:["sign"];break}case"EdDSA":h={name:getNamedCurve(m)},g=y?["verify"]:["sign"];break;default:throw new JOSENotSupported('Invalid or unsupported "alg" (Algorithm) value')}return crypto$1.subtle.importKey(e,m,h,(d=l==null?void 0:l.extractable)!==null&&d!==void 0?d:!1,g)},fromPKCS8=(n,e,t)=>genericImport(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",n,e,t),fromSPKI=(n,e,t)=>genericImport(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",n,e,t);function subtleMapping(n){let e,t;switch(n.kty){case"oct":{switch(n.alg){case"HS256":case"HS384":case"HS512":e={name:"HMAC",hash:`SHA-${n.alg.slice(-3)}`},t=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new JOSENotSupported(`${n.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":e={name:"AES-GCM"},t=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":e={name:"AES-KW"},t=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":e={name:"PBKDF2"},t=["deriveBits"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(n.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${n.alg.slice(-3)}`},t=n.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.alg.slice(-3)}`},t=n.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(n.alg.slice(-3),10)||1}`},t=n.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(n.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=n.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=n.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=n.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:n.crv},t=n.d?["deriveBits"]:[];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case(isCloudflareWorkers()&&"OKP"):if(n.alg!=="EdDSA")throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');switch(n.crv){case"Ed25519":e={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},t=n.d?["sign"]:["verify"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":{switch(n.alg){case"EdDSA":e={name:n.crv},t=n.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:n.crv},t=n.d?["deriveBits"]:[];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}const parse$1=async n=>{var e,t;const{algorithm:o,keyUsages:l}=subtleMapping(n),d=[o,(e=n.ext)!==null&&e!==void 0?e:!1,(t=n.key_ops)!==null&&t!==void 0?t:l];if(o.name==="PBKDF2")return crypto$1.subtle.importKey("raw",decode$1(n.k),...d);const h={...n};return delete h.alg,delete h.use,crypto$1.subtle.importKey("jwk",h,...d)},asKeyObject=parse$1;function getElement(n){let e=[],t=0;for(;t<n.length;){let o=parseElement(n.subarray(t));e.push(o),t+=o.byteLength}return e}function parseElement(n){let e=0,t=n[0]&31;if(e++,t===31){for(t=0;n[e]>=128;)t=t*128+n[e]-128,e++;t=t*128+n[e]-128,e++}let o=0;if(n[e]<128)o=n[e],e++;else if(o===128){for(o=0;n[e+o]!==0||n[e+o+1]!==0;){if(o>n.byteLength)throw new TypeError("invalid indefinite form length");o++}const d=e+o+2;return{byteLength:d,contents:n.subarray(e,e+o),raw:n.subarray(0,d)}}else{let d=n[e]&127;e++,o=0;for(let h=0;h<d;h++)o=o*256+n[e],e++}const l=e+o;return{byteLength:l,contents:n.subarray(e,l),raw:n.subarray(0,l)}}function spkiFromX509(n){const e=getElement(getElement(parseElement(n).contents)[0].contents);return encodeBase64(e[e[0].raw[0]===160?6:5].raw)}function getSPKI(n){const e=n.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),t=decodeBase64(e);return formatPEM(spkiFromX509(t),"PUBLIC KEY")}async function importSPKI(n,e,t){if(typeof n!="string"||n.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return fromSPKI(n,e,t)}async function importX509(n,e,t){if(typeof n!="string"||n.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');let o;try{o=getSPKI(n)}catch(l){throw new TypeError("failed to parse the X.509 certificate",{cause:l})}return fromSPKI(o,e,t)}async function importPKCS8(n,e,t){if(typeof n!="string"||n.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return fromPKCS8(n,e,t)}async function importJWK(n,e,t){var o;if(!isObject$1(n))throw new TypeError("JWK must be an object");if(e||(e=n.alg),typeof e!="string"||!e)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(n.kty){case"oct":if(typeof n.k!="string"||!n.k)throw new TypeError('missing "k" (Key Value) Parameter value');return t??(t=n.ext!==!0),t?asKeyObject({...n,alg:e,ext:(o=n.ext)!==null&&o!==void 0?o:!1}):decode$1(n.k);case"RSA":if(n.oth!==void 0)throw new JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return asKeyObject({...n,alg:e});default:throw new JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}const symmetricTypeCheck=(n,e)=>{if(!(e instanceof Uint8Array)){if(!isKeyLike(e))throw new TypeError(withAlg(n,e,...types,"Uint8Array"));if(e.type!=="secret")throw new TypeError(`${types.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},asymmetricTypeCheck=(n,e,t)=>{if(!isKeyLike(e))throw new TypeError(withAlg(n,e,...types));if(e.type==="secret")throw new TypeError(`${types.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(t==="sign"&&e.type==="public")throw new TypeError(`${types.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(t==="decrypt"&&e.type==="public")throw new TypeError(`${types.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(e.algorithm&&t==="verify"&&e.type==="private")throw new TypeError(`${types.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(e.algorithm&&t==="encrypt"&&e.type==="private")throw new TypeError(`${types.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},checkKeyType=(n,e,t)=>{n.startsWith("HS")||n==="dir"||n.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(n)?symmetricTypeCheck(n,e):asymmetricTypeCheck(n,e,t)},checkKeyType$1=checkKeyType;async function cbcEncrypt(n,e,t,o,l){if(!(t instanceof Uint8Array))throw new TypeError(invalidKeyInput(t,"Uint8Array"));const d=parseInt(n.slice(1,4),10),h=await crypto$1.subtle.importKey("raw",t.subarray(d>>3),"AES-CBC",!1,["encrypt"]),g=await crypto$1.subtle.importKey("raw",t.subarray(0,d>>3),{hash:`SHA-${d<<1}`,name:"HMAC"},!1,["sign"]),m=new Uint8Array(await crypto$1.subtle.encrypt({iv:o,name:"AES-CBC"},h,e)),y=concat(l,o,m,uint64be(l.length<<3)),b=new Uint8Array((await crypto$1.subtle.sign("HMAC",g,y)).slice(0,d>>3));return{ciphertext:m,tag:b}}async function gcmEncrypt(n,e,t,o,l){let d;t instanceof Uint8Array?d=await crypto$1.subtle.importKey("raw",t,"AES-GCM",!1,["encrypt"]):(checkEncCryptoKey(t,n,"encrypt"),d=t);const h=new Uint8Array(await crypto$1.subtle.encrypt({additionalData:l,iv:o,name:"AES-GCM",tagLength:128},d,e)),g=h.slice(-16);return{ciphertext:h.slice(0,-16),tag:g}}const encrypt=async(n,e,t,o,l)=>{if(!isCryptoKey(t)&&!(t instanceof Uint8Array))throw new TypeError(invalidKeyInput(t,...types,"Uint8Array"));switch(checkIvLength$1(n,o),n){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&checkCekLength$1(t,parseInt(n.slice(-3),10)),cbcEncrypt(n,e,t,o,l);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&checkCekLength$1(t,parseInt(n.slice(1,4),10)),gcmEncrypt(n,e,t,o,l);default:throw new JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}},encrypt$1=encrypt;async function wrap(n,e,t,o){const l=n.slice(0,7);o||(o=generateIv(l));const{ciphertext:d,tag:h}=await encrypt$1(l,t,e,o,new Uint8Array(0));return{encryptedKey:d,iv:encode$1(o),tag:encode$1(h)}}async function unwrap(n,e,t,o,l){const d=n.slice(0,7);return decrypt$3(d,e,t,o,l,new Uint8Array(0))}async function decryptKeyManagement(n,e,t,o,l){switch(checkKeyType$1(n,e,"decrypt"),n){case"dir":{if(t!==void 0)throw new JWEInvalid("Encountered unexpected JWE Encrypted Key");return e}case"ECDH-ES":if(t!==void 0)throw new JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!isObject$1(o.epk))throw new JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!ecdhAllowed(e))throw new JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");const d=await importJWK(o.epk,n);let h,g;if(o.apu!==void 0){if(typeof o.apu!="string")throw new JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');h=decode$1(o.apu)}if(o.apv!==void 0){if(typeof o.apv!="string")throw new JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');g=decode$1(o.apv)}const m=await deriveKey$1(d,e,n==="ECDH-ES"?o.enc:n,n==="ECDH-ES"?bitLength(o.enc):parseInt(n.slice(-5,-2),10),h,g);if(n==="ECDH-ES")return m;if(t===void 0)throw new JWEInvalid("JWE Encrypted Key missing");return unwrap$1(n.slice(-6),m,t)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(t===void 0)throw new JWEInvalid("JWE Encrypted Key missing");return decrypt(n,e,t)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(t===void 0)throw new JWEInvalid("JWE Encrypted Key missing");if(typeof o.p2c!="number")throw new JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');const d=(l==null?void 0:l.maxPBES2Count)||1e4;if(o.p2c>d)throw new JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof o.p2s!="string")throw new JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');return decrypt$1(n,e,t,o.p2c,decode$1(o.p2s))}case"A128KW":case"A192KW":case"A256KW":{if(t===void 0)throw new JWEInvalid("JWE Encrypted Key missing");return unwrap$1(n,e,t)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(t===void 0)throw new JWEInvalid("JWE Encrypted Key missing");if(typeof o.iv!="string")throw new JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof o.tag!="string")throw new JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');const d=decode$1(o.iv),h=decode$1(o.tag);return unwrap(n,e,t,d,h)}default:throw new JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function validateCrit(n,e,t,o,l){if(l.crit!==void 0&&o.crit===void 0)throw new n('"crit" (Critical) Header Parameter MUST be integrity protected');if(!o||o.crit===void 0)return new Set;if(!Array.isArray(o.crit)||o.crit.length===0||o.crit.some(h=>typeof h!="string"||h.length===0))throw new n('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let d;t!==void 0?d=new Map([...Object.entries(t),...e.entries()]):d=e;for(const h of o.crit){if(!d.has(h))throw new JOSENotSupported(`Extension Header Parameter "${h}" is not recognized`);if(l[h]===void 0)throw new n(`Extension Header Parameter "${h}" is missing`);if(d.get(h)&&o[h]===void 0)throw new n(`Extension Header Parameter "${h}" MUST be integrity protected`)}return new Set(o.crit)}const validateAlgorithms=(n,e)=>{if(e!==void 0&&(!Array.isArray(e)||e.some(t=>typeof t!="string")))throw new TypeError(`"${n}" option must be an array of strings`);if(e)return new Set(e)},validateAlgorithms$1=validateAlgorithms;async function flattenedDecrypt(n,e,t){var o;if(!isObject$1(n))throw new JWEInvalid("Flattened JWE must be an object");if(n.protected===void 0&&n.header===void 0&&n.unprotected===void 0)throw new JWEInvalid("JOSE Header missing");if(typeof n.iv!="string")throw new JWEInvalid("JWE Initialization Vector missing or incorrect type");if(typeof n.ciphertext!="string")throw new JWEInvalid("JWE Ciphertext missing or incorrect type");if(typeof n.tag!="string")throw new JWEInvalid("JWE Authentication Tag missing or incorrect type");if(n.protected!==void 0&&typeof n.protected!="string")throw new JWEInvalid("JWE Protected Header incorrect type");if(n.encrypted_key!==void 0&&typeof n.encrypted_key!="string")throw new JWEInvalid("JWE Encrypted Key incorrect type");if(n.aad!==void 0&&typeof n.aad!="string")throw new JWEInvalid("JWE AAD incorrect type");if(n.header!==void 0&&!isObject$1(n.header))throw new JWEInvalid("JWE Shared Unprotected Header incorrect type");if(n.unprotected!==void 0&&!isObject$1(n.unprotected))throw new JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");let l;if(n.protected)try{const D=decode$1(n.protected);l=JSON.parse(decoder.decode(D))}catch{throw new JWEInvalid("JWE Protected Header is invalid")}if(!isDisjoint$1(l,n.header,n.unprotected))throw new JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const d={...l,...n.header,...n.unprotected};if(validateCrit(JWEInvalid,new Map,t==null?void 0:t.crit,l,d),d.zip!==void 0){if(!l||!l.zip)throw new JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(d.zip!=="DEF")throw new JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:h,enc:g}=d;if(typeof h!="string"||!h)throw new JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if(typeof g!="string"||!g)throw new JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");const m=t&&validateAlgorithms$1("keyManagementAlgorithms",t.keyManagementAlgorithms),y=t&&validateAlgorithms$1("contentEncryptionAlgorithms",t.contentEncryptionAlgorithms);if(m&&!m.has(h))throw new JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(y&&!y.has(g))throw new JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');let b;n.encrypted_key!==void 0&&(b=decode$1(n.encrypted_key));let w=!1;typeof e=="function"&&(e=await e(l,n),w=!0);let E;try{E=await decryptKeyManagement(h,e,b,d,t)}catch(D){if(D instanceof TypeError||D instanceof JWEInvalid||D instanceof JOSENotSupported)throw D;E=generateCek(g)}const P=decode$1(n.iv),$=decode$1(n.tag),C=encoder.encode((o=n.protected)!==null&&o!==void 0?o:"");let L;n.aad!==void 0?L=concat(C,encoder.encode("."),encoder.encode(n.aad)):L=C;let W=await decrypt$3(g,E,decode$1(n.ciphertext),P,$,L);d.zip==="DEF"&&(W=await((t==null?void 0:t.inflateRaw)||inflate)(W));const Y={plaintext:W};return n.protected!==void 0&&(Y.protectedHeader=l),n.aad!==void 0&&(Y.additionalAuthenticatedData=decode$1(n.aad)),n.unprotected!==void 0&&(Y.sharedUnprotectedHeader=n.unprotected),n.header!==void 0&&(Y.unprotectedHeader=n.header),w?{...Y,key:e}:Y}async function compactDecrypt(n,e,t){if(n instanceof Uint8Array&&(n=decoder.decode(n)),typeof n!="string")throw new JWEInvalid("Compact JWE must be a string or Uint8Array");const{0:o,1:l,2:d,3:h,4:g,length:m}=n.split(".");if(m!==5)throw new JWEInvalid("Invalid Compact JWE");const y=await flattenedDecrypt({ciphertext:h,iv:d||void 0,protected:o||void 0,tag:g||void 0,encrypted_key:l||void 0},e,t),b={plaintext:y.plaintext,protectedHeader:y.protectedHeader};return typeof e=="function"?{...b,key:y.key}:b}async function generalDecrypt(n,e,t){if(!isObject$1(n))throw new JWEInvalid("General JWE must be an object");if(!Array.isArray(n.recipients)||!n.recipients.every(isObject$1))throw new JWEInvalid("JWE Recipients missing or incorrect type");if(!n.recipients.length)throw new JWEInvalid("JWE Recipients has no members");for(const o of n.recipients)try{return await flattenedDecrypt({aad:n.aad,ciphertext:n.ciphertext,encrypted_key:o.encrypted_key,header:o.header,iv:n.iv,protected:n.protected,tag:n.tag,unprotected:n.unprotected},e,t)}catch{}throw new JWEDecryptionFailed}const keyToJWK=async n=>{if(n instanceof Uint8Array)return{kty:"oct",k:encode$1(n)};if(!isCryptoKey(n))throw new TypeError(invalidKeyInput(n,...types,"Uint8Array"));if(!n.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:e,key_ops:t,alg:o,use:l,...d}=await crypto$1.subtle.exportKey("jwk",n);return d},keyToJWK$1=keyToJWK;async function exportSPKI(n){return toSPKI(n)}async function exportPKCS8(n){return toPKCS8(n)}async function exportJWK(n){return keyToJWK$1(n)}async function encryptKeyManagement(n,e,t,o,l={}){let d,h,g;switch(checkKeyType$1(n,t,"encrypt"),n){case"dir":{g=t;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!ecdhAllowed(t))throw new JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:m,apv:y}=l;let{epk:b}=l;b||(b=(await generateEpk(t)).privateKey);const{x:w,y:E,crv:P,kty:$}=await exportJWK(b),C=await deriveKey$1(t,b,n==="ECDH-ES"?e:n,n==="ECDH-ES"?bitLength(e):parseInt(n.slice(-5,-2),10),m,y);if(h={epk:{x:w,crv:P,kty:$}},$==="EC"&&(h.epk.y=E),m&&(h.apu=encode$1(m)),y&&(h.apv=encode$1(y)),n==="ECDH-ES"){g=C;break}g=o||generateCek(e);const L=n.slice(-6);d=await wrap$1(L,C,g);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{g=o||generateCek(e),d=await encrypt$2(n,t,g);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{g=o||generateCek(e);const{p2c:m,p2s:y}=l;({encryptedKey:d,...h}=await encrypt$3(n,t,g,m,y));break}case"A128KW":case"A192KW":case"A256KW":{g=o||generateCek(e),d=await wrap$1(n,t,g);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{g=o||generateCek(e);const{iv:m}=l;({encryptedKey:d,...h}=await wrap(n,t,g,m));break}default:throw new JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:g,encryptedKey:d,parameters:h}}const unprotected=Symbol();class FlattenedEncrypt{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,t){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!isDisjoint$1(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const o={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(validateCrit(JWEInvalid,new Map,t==null?void 0:t.crit,this._protectedHeader,o),o.zip!==void 0){if(!this._protectedHeader||!this._protectedHeader.zip)throw new JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(o.zip!=="DEF")throw new JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:l,enc:d}=o;if(typeof l!="string"||!l)throw new JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof d!="string"||!d)throw new JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let h;if(l==="dir"){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if(l==="ECDH-ES"&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");let g;{let $;({cek:g,encryptedKey:h,parameters:$}=await encryptKeyManagement(l,d,e,this._cek,this._keyManagementParameters)),$&&(t&&unprotected in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...$}:this.setUnprotectedHeader($):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...$}:this.setProtectedHeader($))}this._iv||(this._iv=generateIv(d));let m,y,b;this._protectedHeader?y=encoder.encode(encode$1(JSON.stringify(this._protectedHeader))):y=encoder.encode(""),this._aad?(b=encode$1(this._aad),m=concat(y,encoder.encode("."),encoder.encode(b))):m=y;let w,E;if(o.zip==="DEF"){const $=await((t==null?void 0:t.deflateRaw)||deflate)(this._plaintext);({ciphertext:w,tag:E}=await encrypt$1(d,$,g,this._iv,m))}else({ciphertext:w,tag:E}=await encrypt$1(d,this._plaintext,g,this._iv,m));const P={ciphertext:encode$1(w),iv:encode$1(this._iv),tag:encode$1(E)};return h&&(P.encrypted_key=encode$1(h)),b&&(P.aad=b),this._protectedHeader&&(P.protected=decoder.decode(y)),this._sharedUnprotectedHeader&&(P.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(P.header=this._unprotectedHeader),P}}class IndividualRecipient{constructor(e,t,o){this.parent=e,this.key=t,this.options=o}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}}class GeneralEncrypt{constructor(e){this._recipients=[],this._plaintext=e}addRecipient(e,t){const o=new IndividualRecipient(this,e,{crit:t==null?void 0:t.crit});return this._recipients.push(o),o}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(e){var t,o,l;if(!this._recipients.length)throw new JWEInvalid("at least one recipient must be added");if(e={deflateRaw:e==null?void 0:e.deflateRaw},this._recipients.length===1){const[m]=this._recipients,y=await new FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(m.unprotectedHeader).encrypt(m.key,{...m.options,...e});let b={ciphertext:y.ciphertext,iv:y.iv,recipients:[{}],tag:y.tag};return y.aad&&(b.aad=y.aad),y.protected&&(b.protected=y.protected),y.unprotected&&(b.unprotected=y.unprotected),y.encrypted_key&&(b.recipients[0].encrypted_key=y.encrypted_key),y.header&&(b.recipients[0].header=y.header),b}let d;for(let m=0;m<this._recipients.length;m++){const y=this._recipients[m];if(!isDisjoint$1(this._protectedHeader,this._unprotectedHeader,y.unprotectedHeader))throw new JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const b={...this._protectedHeader,...this._unprotectedHeader,...y.unprotectedHeader},{alg:w}=b;if(typeof w!="string"||!w)throw new JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(w==="dir"||w==="ECDH-ES")throw new JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof b.enc!="string"||!b.enc)throw new JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!d)d=b.enc;else if(d!==b.enc)throw new JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(validateCrit(JWEInvalid,new Map,y.options.crit,this._protectedHeader,b),b.zip!==void 0&&(!this._protectedHeader||!this._protectedHeader.zip))throw new JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}const h=generateCek(d);let g={ciphertext:"",iv:"",recipients:[],tag:""};for(let m=0;m<this._recipients.length;m++){const y=this._recipients[m],b={};g.recipients.push(b);const E={...this._protectedHeader,...this._unprotectedHeader,...y.unprotectedHeader}.alg.startsWith("PBES2")?2048+m:void 0;if(m===0){const C=await new FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(h).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(y.unprotectedHeader).setKeyManagementParameters({p2c:E}).encrypt(y.key,{...y.options,...e,[unprotected]:!0});g.ciphertext=C.ciphertext,g.iv=C.iv,g.tag=C.tag,C.aad&&(g.aad=C.aad),C.protected&&(g.protected=C.protected),C.unprotected&&(g.unprotected=C.unprotected),b.encrypted_key=C.encrypted_key,C.header&&(b.header=C.header);continue}const{encryptedKey:P,parameters:$}=await encryptKeyManagement(((t=y.unprotectedHeader)===null||t===void 0?void 0:t.alg)||((o=this._protectedHeader)===null||o===void 0?void 0:o.alg)||((l=this._unprotectedHeader)===null||l===void 0?void 0:l.alg),d,y.key,h,{p2c:E});b.encrypted_key=encode$1(P),(y.unprotectedHeader||$)&&(b.header={...y.unprotectedHeader,...$})}return g}}function subtleDsa(n,e){const t=`SHA-${n.slice(-3)}`;switch(n){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:n.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case(isCloudflareWorkers()&&"EdDSA"):const{namedCurve:o}=e;return{name:o,namedCurve:o};case"EdDSA":return{name:e.name};default:throw new JOSENotSupported(`alg ${n} is not supported either by JOSE or your javascript runtime`)}}function getCryptoKey(n,e,t){if(isCryptoKey(e))return checkSigCryptoKey(e,n,t),e;if(e instanceof Uint8Array){if(!n.startsWith("HS"))throw new TypeError(invalidKeyInput(e,...types));return crypto$1.subtle.importKey("raw",e,{hash:`SHA-${n.slice(-3)}`,name:"HMAC"},!1,[t])}throw new TypeError(invalidKeyInput(e,...types,"Uint8Array"))}const verify=async(n,e,t,o)=>{const l=await getCryptoKey(n,e,"verify");checkKeyLength(n,l);const d=subtleDsa(n,l.algorithm);try{return await crypto$1.subtle.verify(d,l,t,o)}catch{return!1}},verify$1=verify;async function flattenedVerify(n,e,t){var o;if(!isObject$1(n))throw new JWSInvalid("Flattened JWS must be an object");if(n.protected===void 0&&n.header===void 0)throw new JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(n.protected!==void 0&&typeof n.protected!="string")throw new JWSInvalid("JWS Protected Header incorrect type");if(n.payload===void 0)throw new JWSInvalid("JWS Payload missing");if(typeof n.signature!="string")throw new JWSInvalid("JWS Signature missing or incorrect type");if(n.header!==void 0&&!isObject$1(n.header))throw new JWSInvalid("JWS Unprotected Header incorrect type");let l={};if(n.protected)try{const L=decode$1(n.protected);l=JSON.parse(decoder.decode(L))}catch{throw new JWSInvalid("JWS Protected Header is invalid")}if(!isDisjoint$1(l,n.header))throw new JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const d={...l,...n.header},h=validateCrit(JWSInvalid,new Map([["b64",!0]]),t==null?void 0:t.crit,l,d);let g=!0;if(h.has("b64")&&(g=l.b64,typeof g!="boolean"))throw new JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:m}=d;if(typeof m!="string"||!m)throw new JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');const y=t&&validateAlgorithms$1("algorithms",t.algorithms);if(y&&!y.has(m))throw new JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(g){if(typeof n.payload!="string")throw new JWSInvalid("JWS Payload must be a string")}else if(typeof n.payload!="string"&&!(n.payload instanceof Uint8Array))throw new JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let b=!1;typeof e=="function"&&(e=await e(l,n),b=!0),checkKeyType$1(m,e,"verify");const w=concat(encoder.encode((o=n.protected)!==null&&o!==void 0?o:""),encoder.encode("."),typeof n.payload=="string"?encoder.encode(n.payload):n.payload),E=decode$1(n.signature);if(!await verify$1(m,e,E,w))throw new JWSSignatureVerificationFailed;let $;g?$=decode$1(n.payload):typeof n.payload=="string"?$=encoder.encode(n.payload):$=n.payload;const C={payload:$};return n.protected!==void 0&&(C.protectedHeader=l),n.header!==void 0&&(C.unprotectedHeader=n.header),b?{...C,key:e}:C}async function compactVerify(n,e,t){if(n instanceof Uint8Array&&(n=decoder.decode(n)),typeof n!="string")throw new JWSInvalid("Compact JWS must be a string or Uint8Array");const{0:o,1:l,2:d,length:h}=n.split(".");if(h!==3)throw new JWSInvalid("Invalid Compact JWS");const g=await flattenedVerify({payload:l,protected:o,signature:d},e,t),m={payload:g.payload,protectedHeader:g.protectedHeader};return typeof e=="function"?{...m,key:g.key}:m}async function generalVerify(n,e,t){if(!isObject$1(n))throw new JWSInvalid("General JWS must be an object");if(!Array.isArray(n.signatures)||!n.signatures.every(isObject$1))throw new JWSInvalid("JWS Signatures missing or incorrect type");for(const o of n.signatures)try{return await flattenedVerify({header:o.header,payload:n.payload,protected:o.protected,signature:o.signature},e,t)}catch{}throw new JWSSignatureVerificationFailed}const epoch=n=>Math.floor(n.getTime()/1e3),minute=60,hour=minute*60,day=hour*24,week=day*7,year=day*365.25,REGEX=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,secs=n=>{const e=REGEX.exec(n);if(!e)throw new TypeError("Invalid time period format");const t=parseFloat(e[1]);switch(e[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(t);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(t*minute);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(t*hour);case"day":case"days":case"d":return Math.round(t*day);case"week":case"weeks":case"w":return Math.round(t*week);default:return Math.round(t*year)}},normalizeTyp=n=>n.toLowerCase().replace(/^application\//,""),checkAudiencePresence=(n,e)=>typeof n=="string"?e.includes(n):Array.isArray(n)?e.some(Set.prototype.has.bind(new Set(n))):!1,jwtPayload=(n,e,t={})=>{const{typ:o}=t;if(o&&(typeof n.typ!="string"||normalizeTyp(n.typ)!==normalizeTyp(o)))throw new JWTClaimValidationFailed('unexpected "typ" JWT header value',"typ","check_failed");let l;try{l=JSON.parse(decoder.decode(e))}catch{}if(!isObject$1(l))throw new JWTInvalid("JWT Claims Set must be a top-level JSON object");const{issuer:d}=t;if(d&&!(Array.isArray(d)?d:[d]).includes(l.iss))throw new JWTClaimValidationFailed('unexpected "iss" claim value',"iss","check_failed");const{subject:h}=t;if(h&&l.sub!==h)throw new JWTClaimValidationFailed('unexpected "sub" claim value',"sub","check_failed");const{audience:g}=t;if(g&&!checkAudiencePresence(l.aud,typeof g=="string"?[g]:g))throw new JWTClaimValidationFailed('unexpected "aud" claim value',"aud","check_failed");let m;switch(typeof t.clockTolerance){case"string":m=secs(t.clockTolerance);break;case"number":m=t.clockTolerance;break;case"undefined":m=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:y}=t,b=epoch(y||new Date);if((l.iat!==void 0||t.maxTokenAge)&&typeof l.iat!="number")throw new JWTClaimValidationFailed('"iat" claim must be a number',"iat","invalid");if(l.nbf!==void 0){if(typeof l.nbf!="number")throw new JWTClaimValidationFailed('"nbf" claim must be a number',"nbf","invalid");if(l.nbf>b+m)throw new JWTClaimValidationFailed('"nbf" claim timestamp check failed',"nbf","check_failed")}if(l.exp!==void 0){if(typeof l.exp!="number")throw new JWTClaimValidationFailed('"exp" claim must be a number',"exp","invalid");if(l.exp<=b-m)throw new JWTExpired('"exp" claim timestamp check failed',"exp","check_failed")}if(t.maxTokenAge){const w=b-l.iat,E=typeof t.maxTokenAge=="number"?t.maxTokenAge:secs(t.maxTokenAge);if(w-m>E)throw new JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(w<0-m)throw new JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return l};async function jwtVerify(n,e,t){var o;const l=await compactVerify(n,e,t);if(!((o=l.protectedHeader.crit)===null||o===void 0)&&o.includes("b64")&&l.protectedHeader.b64===!1)throw new JWTInvalid("JWTs MUST NOT use unencoded payload");const h={payload:jwtPayload(l.protectedHeader,l.payload,t),protectedHeader:l.protectedHeader};return typeof e=="function"?{...h,key:l.key}:h}async function jwtDecrypt(n,e,t){const o=await compactDecrypt(n,e,t),l=jwtPayload(o.protectedHeader,o.plaintext,t),{protectedHeader:d}=o;if(d.iss!==void 0&&d.iss!==l.iss)throw new JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(d.sub!==void 0&&d.sub!==l.sub)throw new JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(d.aud!==void 0&&JSON.stringify(d.aud)!==JSON.stringify(l.aud))throw new JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',"aud","mismatch");const h={payload:l,protectedHeader:d};return typeof e=="function"?{...h,key:o.key}:h}class CompactEncrypt{constructor(e){this._flattened=new FlattenedEncrypt(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){const o=await this._flattened.encrypt(e,t);return[o.protected,o.encrypted_key,o.iv,o.ciphertext,o.tag].join(".")}}const sign$1=async(n,e,t)=>{const o=await getCryptoKey(n,e,"sign");checkKeyLength(n,o);const l=await crypto$1.subtle.sign(subtleDsa(n,o.algorithm),o,t);return new Uint8Array(l)},sign$2=sign$1;class FlattenedSign{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){if(!this._protectedHeader&&!this._unprotectedHeader)throw new JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!isDisjoint$1(this._protectedHeader,this._unprotectedHeader))throw new JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const o={...this._protectedHeader,...this._unprotectedHeader},l=validateCrit(JWSInvalid,new Map([["b64",!0]]),t==null?void 0:t.crit,this._protectedHeader,o);let d=!0;if(l.has("b64")&&(d=this._protectedHeader.b64,typeof d!="boolean"))throw new JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:h}=o;if(typeof h!="string"||!h)throw new JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');checkKeyType$1(h,e,"sign");let g=this._payload;d&&(g=encoder.encode(encode$1(g)));let m;this._protectedHeader?m=encoder.encode(encode$1(JSON.stringify(this._protectedHeader))):m=encoder.encode("");const y=concat(m,encoder.encode("."),g),b=await sign$2(h,e,y),w={signature:encode$1(b),payload:""};return d&&(w.payload=decoder.decode(g)),this._unprotectedHeader&&(w.header=this._unprotectedHeader),this._protectedHeader&&(w.protected=decoder.decode(m)),w}}class CompactSign{constructor(e){this._flattened=new FlattenedSign(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){const o=await this._flattened.sign(e,t);if(o.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${o.protected}.${o.payload}.${o.signature}`}}class IndividualSignature{constructor(e,t,o){this.parent=e,this.key=t,this.options=o}setProtectedHeader(e){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}}class GeneralSign{constructor(e){this._signatures=[],this._payload=e}addSignature(e,t){const o=new IndividualSignature(this,e,t);return this._signatures.push(o),o}async sign(){if(!this._signatures.length)throw new JWSInvalid("at least one signature must be added");const e={signatures:[],payload:""};for(let t=0;t<this._signatures.length;t++){const o=this._signatures[t],l=new FlattenedSign(this._payload);l.setProtectedHeader(o.protectedHeader),l.setUnprotectedHeader(o.unprotectedHeader);const{payload:d,...h}=await l.sign(o.key,o.options);if(t===0)e.payload=d;else if(e.payload!==d)throw new JWSInvalid("inconsistent use of JWS Unencoded Payload Option (RFC7797)");e.signatures.push(h)}return e}}class ProduceJWT{constructor(e){if(!isObject$1(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return typeof e=="number"?this._payload={...this._payload,nbf:e}:this._payload={...this._payload,nbf:epoch(new Date)+secs(e)},this}setExpirationTime(e){return typeof e=="number"?this._payload={...this._payload,exp:e}:this._payload={...this._payload,exp:epoch(new Date)+secs(e)},this}setIssuedAt(e){return typeof e>"u"?this._payload={...this._payload,iat:epoch(new Date)}:this._payload={...this._payload,iat:e},this}}class SignJWT extends ProduceJWT{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){var o;const l=new CompactSign(encoder.encode(JSON.stringify(this._payload)));if(l.setProtectedHeader(this._protectedHeader),Array.isArray((o=this._protectedHeader)===null||o===void 0?void 0:o.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new JWTInvalid("JWTs MUST NOT use unencoded payload");return l.sign(e,t)}}class EncryptJWT extends ProduceJWT{setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){const o=new CompactEncrypt(encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),o.setProtectedHeader(this._protectedHeader),this._iv&&o.setInitializationVector(this._iv),this._cek&&o.setContentEncryptionKey(this._cek),this._keyManagementParameters&&o.setKeyManagementParameters(this._keyManagementParameters),o.encrypt(e,t)}}const check=(n,e)=>{if(typeof n!="string"||!n)throw new JWKInvalid(`${e} missing or invalid`)};async function calculateJwkThumbprint(n,e){if(!isObject$1(n))throw new TypeError("JWK must be an object");if(e??(e="sha256"),e!=="sha256"&&e!=="sha384"&&e!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let t;switch(n.kty){case"EC":check(n.crv,'"crv" (Curve) Parameter'),check(n.x,'"x" (X Coordinate) Parameter'),check(n.y,'"y" (Y Coordinate) Parameter'),t={crv:n.crv,kty:n.kty,x:n.x,y:n.y};break;case"OKP":check(n.crv,'"crv" (Subtype of Key Pair) Parameter'),check(n.x,'"x" (Public Key) Parameter'),t={crv:n.crv,kty:n.kty,x:n.x};break;case"RSA":check(n.e,'"e" (Exponent) Parameter'),check(n.n,'"n" (Modulus) Parameter'),t={e:n.e,kty:n.kty,n:n.n};break;case"oct":check(n.k,'"k" (Key Value) Parameter'),t={k:n.k,kty:n.kty};break;default:throw new JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}const o=encoder.encode(JSON.stringify(t));return encode$1(await digest$1(e,o))}async function calculateJwkThumbprintUri(n,e){e??(e="sha256");const t=await calculateJwkThumbprint(n,e);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${e.slice(-3)}:${t}`}async function EmbeddedJWK(n,e){const t={...n,...e.header};if(!isObject$1(t.jwk))throw new JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const o=await importJWK({...t.jwk,ext:!0},t.alg,!0);if(o instanceof Uint8Array||o.type!=="public")throw new JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return o}function getKtyFromAlg(n){switch(typeof n=="string"&&n.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}function isJWKSLike(n){return n&&typeof n=="object"&&Array.isArray(n.keys)&&n.keys.every(isJWKLike)}function isJWKLike(n){return isObject$1(n)}function clone$2(n){return typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n))}class LocalJWKSet{constructor(e){if(this._cached=new WeakMap,!isJWKSLike(e))throw new JWKSInvalid("JSON Web Key Set malformed");this._jwks=clone$2(e)}async getKey(e,t){const{alg:o,kid:l}={...e,...t.header},d=getKtyFromAlg(o),h=this._jwks.keys.filter(b=>{let w=d===b.kty;if(w&&typeof l=="string"&&(w=l===b.kid),w&&typeof b.alg=="string"&&(w=o===b.alg),w&&typeof b.use=="string"&&(w=b.use==="sig"),w&&Array.isArray(b.key_ops)&&(w=b.key_ops.includes("verify")),w&&o==="EdDSA"&&(w=b.crv==="Ed25519"||b.crv==="Ed448"),w)switch(o){case"ES256":w=b.crv==="P-256";break;case"ES256K":w=b.crv==="secp256k1";break;case"ES384":w=b.crv==="P-384";break;case"ES512":w=b.crv==="P-521";break}return w}),{0:g,length:m}=h;if(m===0)throw new JWKSNoMatchingKey;if(m!==1)throw new JWKSMultipleMatchingKeys;const y=this._cached.get(g)||this._cached.set(g,{}).get(g);if(y[o]===void 0){const b=await importJWK({...g,ext:!0},o);if(b instanceof Uint8Array||b.type!=="public")throw new JWKSInvalid("JSON Web Key Set members must be public keys");y[o]=b}return y[o]}}function createLocalJWKSet(n){return LocalJWKSet.prototype.getKey.bind(new LocalJWKSet(n))}const fetchJwks=async(n,e,t)=>{let o,l,d=!1;typeof AbortController=="function"&&(o=new AbortController,l=setTimeout(()=>{d=!0,o.abort()},e));const h=await fetch(n.href,{signal:o?o.signal:void 0,redirect:"manual",headers:t.headers}).catch(g=>{throw d?new JWKSTimeout:g});if(l!==void 0&&clearTimeout(l),h.status!==200)throw new JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await h.json()}catch{throw new JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}},fetchJwks$1=fetchJwks;class RemoteJWKSet extends LocalJWKSet{constructor(e,t){if(super({keys:[]}),this._jwks=void 0,!(e instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:t==null?void 0:t.agent,headers:t==null?void 0:t.headers},this._timeoutDuration=typeof(t==null?void 0:t.timeoutDuration)=="number"?t==null?void 0:t.timeoutDuration:5e3,this._cooldownDuration=typeof(t==null?void 0:t.cooldownDuration)=="number"?t==null?void 0:t.cooldownDuration:3e4,this._cacheMaxAge=typeof(t==null?void 0:t.cacheMaxAge)=="number"?t==null?void 0:t.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(e,t){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(e,t)}catch(o){if(o instanceof JWKSNoMatchingKey&&this.coolingDown()===!1)return await this.reload(),super.getKey(e,t);throw o}}async reload(){if(this._pendingFetch&&isCloudflareWorkers())return new Promise(e=>{const t=()=>{this._pendingFetch===void 0?e():setTimeout(t,5)};t()});this._pendingFetch||(this._pendingFetch=fetchJwks$1(this._url,this._timeoutDuration,this._options).then(e=>{if(!isJWKSLike(e))throw new JWKSInvalid("JSON Web Key Set malformed");this._jwks={keys:e.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}}function createRemoteJWKSet(n,e){return RemoteJWKSet.prototype.getKey.bind(new RemoteJWKSet(n,e))}class UnsecuredJWT extends ProduceJWT{encode(){const e=encode$1(JSON.stringify({alg:"none"})),t=encode$1(JSON.stringify(this._payload));return`${e}.${t}.`}static decode(e,t){if(typeof e!="string")throw new JWTInvalid("Unsecured JWT must be a string");const{0:o,1:l,2:d,length:h}=e.split(".");if(h!==3||d!=="")throw new JWTInvalid("Invalid Unsecured JWT");let g;try{if(g=JSON.parse(decoder.decode(decode$1(o))),g.alg!=="none")throw new Error}catch{throw new JWTInvalid("Invalid Unsecured JWT")}return{payload:jwtPayload(g,decode$1(l),t),header:g}}}const encode=encode$1,decode=decode$1,base64url=Object.freeze(Object.defineProperty({__proto__:null,decode,encode},Symbol.toStringTag,{value:"Module"}));function decodeProtectedHeader(n){let e;if(typeof n=="string"){const t=n.split(".");(t.length===3||t.length===5)&&([e]=t)}else if(typeof n=="object"&&n)if("protected"in n)e=n.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof e!="string"||!e)throw new Error;const t=JSON.parse(decoder.decode(decode(e)));if(!isObject$1(t))throw new Error;return t}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function decodeJwt(n){if(typeof n!="string")throw new JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:t}=n.split(".");if(t===5)throw new JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(t!==3)throw new JWTInvalid("Invalid JWT");if(!e)throw new JWTInvalid("JWTs must contain a payload");let o;try{o=decode(e)}catch{throw new JWTInvalid("Failed to parse the base64url encoded payload")}let l;try{l=JSON.parse(decoder.decode(o))}catch{throw new JWTInvalid("Failed to parse the decoded payload as JSON")}if(!isObject$1(l))throw new JWTInvalid("Invalid JWT Claims Set");return l}async function generateSecret$1(n,e){var t;let o,l,d;switch(n){case"HS256":case"HS384":case"HS512":o=parseInt(n.slice(-3),10),l={name:"HMAC",hash:`SHA-${o}`,length:o},d=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return o=parseInt(n.slice(-3),10),random(new Uint8Array(o>>3));case"A128KW":case"A192KW":case"A256KW":o=parseInt(n.slice(1,4),10),l={name:"AES-KW",length:o},d=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":o=parseInt(n.slice(1,4),10),l={name:"AES-GCM",length:o},d=["encrypt","decrypt"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return crypto$1.subtle.generateKey(l,(t=e==null?void 0:e.extractable)!==null&&t!==void 0?t:!1,d)}function getModulusLengthOption(n){var e;const t=(e=n==null?void 0:n.modulusLength)!==null&&e!==void 0?e:2048;if(typeof t!="number"||t<2048)throw new JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return t}async function generateKeyPair$1(n,e){var t,o,l;let d,h;switch(n){case"PS256":case"PS384":case"PS512":d={name:"RSA-PSS",hash:`SHA-${n.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:getModulusLengthOption(e)},h=["sign","verify"];break;case"RS256":case"RS384":case"RS512":d={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:getModulusLengthOption(e)},h=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":d={name:"RSA-OAEP",hash:`SHA-${parseInt(n.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:getModulusLengthOption(e)},h=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":d={name:"ECDSA",namedCurve:"P-256"},h=["sign","verify"];break;case"ES384":d={name:"ECDSA",namedCurve:"P-384"},h=["sign","verify"];break;case"ES512":d={name:"ECDSA",namedCurve:"P-521"},h=["sign","verify"];break;case(isCloudflareWorkers()&&"EdDSA"):switch(e==null?void 0:e.crv){case void 0:case"Ed25519":d={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},h=["sign","verify"];break;default:throw new JOSENotSupported("Invalid or unsupported crv option provided")}break;case"EdDSA":h=["sign","verify"];const g=(t=e==null?void 0:e.crv)!==null&&t!==void 0?t:"Ed25519";switch(g){case"Ed25519":case"Ed448":d={name:g};break;default:throw new JOSENotSupported("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{h=["deriveKey","deriveBits"];const m=(o=e==null?void 0:e.crv)!==null&&o!==void 0?o:"P-256";switch(m){case"P-256":case"P-384":case"P-521":{d={name:"ECDH",namedCurve:m};break}case"X25519":case"X448":d={name:m};break;default:throw new JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return crypto$1.subtle.generateKey(d,(l=e==null?void 0:e.extractable)!==null&&l!==void 0?l:!1,h)}async function generateKeyPair(n,e){return generateKeyPair$1(n,e)}async function generateSecret(n,e){return generateSecret$1(n,e)}const browser=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt,CompactSign,EmbeddedJWK,EncryptJWT,FlattenedEncrypt,FlattenedSign,GeneralEncrypt,GeneralSign,SignJWT,UnsecuredJWT,base64url,calculateJwkThumbprint,calculateJwkThumbprintUri,compactDecrypt,compactVerify,createLocalJWKSet,createRemoteJWKSet,decodeJwt,decodeProtectedHeader,errors,exportJWK,exportPKCS8,exportSPKI,flattenedDecrypt,flattenedVerify,generalDecrypt,generalVerify,generateKeyPair,generateSecret,importJWK,importPKCS8,importSPKI,importX509,jwtDecrypt,jwtVerify},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(browser);var __awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(n,e,t,o){function l(d){return d instanceof t?d:new t(function(h){h(d)})}return new(t||(t=Promise))(function(d,h){function g(b){try{y(o.next(b))}catch(w){h(w)}}function m(b){try{y(o.throw(b))}catch(w){h(w)}}function y(b){b.done?d(b.value):l(b.value).then(g,m)}y((o=o.apply(n,e||[])).next())})},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(MangroveReviews$1,"__esModule",{value:!0});MangroveReviews$1.MangroveReviews=void 0;const jwk_to_pem_1=__importDefault(jwkToPem),axios_1=__importDefault(axios_1$1),jose_1=require$$2;class MangroveReviews{static signReview(e,t){return __awaiter(this,void 0,void 0,function*(){t=MangroveReviews.cleanPayload(t);const o="ES256",l=yield MangroveReviews.publicToPem(e.publicKey),d=JSON.stringify(yield crypto.subtle.exportKey("jwk",e.publicKey));return yield new jose_1.SignJWT(t).setProtectedHeader({alg:o,kid:l,jwk:d,enc:"utf-8"}).sign(e.privateKey)})}static submitReview(e,t=MangroveReviews.ORIGINAL_API){return axios_1.default.put(`${t}/submit/${e}`)}static signAndSubmitReview(e,t,o=MangroveReviews.ORIGINAL_API){return __awaiter(this,void 0,void 0,function*(){const l=yield MangroveReviews.signReview(e,t);return MangroveReviews.submitReview(l,o)})}static getReviews(e,t=MangroveReviews.ORIGINAL_API){return __awaiter(this,void 0,void 0,function*(){const{data:o}=yield axios_1.default.get(`${t}/reviews`,{params:e,headers:{"Content-Type":"application/json"}});return o})}static getSubject(e,t=MangroveReviews.ORIGINAL_API){return axios_1.default.get(`${t}/subject/${encodeURIComponent(e)}`).then(({data:o})=>o)}static getIssuer(e,t=MangroveReviews.ORIGINAL_API){return axios_1.default.get(`${t}/issuer/${encodeURIComponent(e)}`).then(({data:o})=>o)}static batchAggregate(e,t=MangroveReviews.ORIGINAL_API){return!e.pems&&!e.subs?null:axios_1.default.post(`${t}/batch`,e).then(({data:o})=>o)}static generateKeypair(){return crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"])}static jwkToKeypair(e){return __awaiter(this,void 0,void 0,function*(){let t=Object.assign({},e);if(!t||t.metadata!==MangroveReviews.PRIVATE_KEY_METADATA)throw new Error(`does not contain the required metadata field "${MangroveReviews.PRIVATE_KEY_METADATA}"`);const o=yield crypto.subtle.importKey("jwk",t,{name:"ECDSA",namedCurve:"P-256"},!0,["sign"]);delete t.d,delete t.dp,delete t.dq,delete t.q,delete t.qi,t.key_ops=["verify"];const l=yield crypto.subtle.importKey("jwk",t,{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);return{privateKey:o,publicKey:l}})}static keypairToJwk(e){return __awaiter(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("jwk",e.privateKey);return t.metadata=MangroveReviews.PRIVATE_KEY_METADATA,t})}static u8aToString(e){return new TextDecoder().decode(e)}static privateToPem(e){return __awaiter(this,void 0,void 0,function*(){try{const t=yield crypto.subtle.exportKey("pkcs8",e);return`-----BEGIN PRIVATE KEY-----
${btoa(String.fromCharCode(...new Uint8Array(t)))}
-----END PRIVATE KEY-----`}catch{const o=yield crypto.subtle.exportKey("jwk",e);return(0,jwk_to_pem_1.default)(o,{private:!0})}})}static publicToPem(e){return __awaiter(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("spki",e);return`-----BEGIN PUBLIC KEY-----${btoa(String.fromCharCode(...new Uint8Array(t)))}-----END PUBLIC KEY-----`})}static cleanPayload(e){if(!e.sub)throw"Payload must include subject URI in `sub` field.";if(!e.rating&&!e.opinion)throw"Payload must include either rating or opinion.";if(e.rating!==void 0&&(e.rating<0||e.rating>100))throw"Rating must be in the range from 0 to 100.";e.iat=Math.floor(Date.now()/1e3),e.rating===null&&delete e.rating,e.opinion||delete e.opinion,(!e.images||!e.images.length)&&delete e.images;const t=Object.assign({client_id:window.location.href},e.metadata);for(const o in t){const l=t[o];(l===null||l===!1)&&delete t[o]}return e.metadata=t,e}}MangroveReviews$1.MangroveReviews=MangroveReviews;MangroveReviews.ORIGINAL_API="https://api.mangrove.reviews";MangroveReviews.PRIVATE_KEY_METADATA="Mangrove private key";(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.MangroveReviews=void 0;const e=MangroveReviews$1;Object.defineProperty(n,"MangroveReviews",{enumerable:!0,get:function(){return e.MangroveReviews}})})(dist);class MangroveIdentity{constructor(e){ge(this,"keypair");ge(this,"key_id");const t=new UIEventSource(void 0);this.key_id=t;const o=new UIEventSource(void 0);this.keypair=o,e.addCallbackAndRunD(async l=>{if(l==="")return;const d=await dist.MangroveReviews.jwkToKeypair(JSON.parse(l));o.setData(d);const h=await dist.MangroveReviews.publicToPem(d.publicKey);t.setData(h)});try{!Utils.runningFromConsole&&(e.data??"")===""&&MangroveIdentity.CreateIdentity(e).then(l=>{})}catch(l){console.error("Could not create identity: ",l)}}static async CreateIdentity(e){const t=await dist.MangroveReviews.generateKeypair(),o=await dist.MangroveReviews.keypairToJwk(t);(e.data??"")===""&&e.setData(JSON.stringify(o))}}const ss=class{constructor(e,t,o){ge(this,"subjectUri");ge(this,"_reviews",new UIEventSource([]));ge(this,"reviews",this._reviews);ge(this,"_lat");ge(this,"_lon");ge(this,"_uncertainty");ge(this,"_name");ge(this,"_identity");const l=GeoOperations.centerpointCoordinates(e);[this._lon,this._lat]=l,this._identity=(t==null?void 0:t.mangroveIdentity)??new MangroveIdentity(new UIEventSource(void 0));const d=(o==null?void 0:o.nameKey)??"name";if(e.geometry.type==="Point")this._uncertainty=(o==null?void 0:o.uncertaintyRadius)??10;else{let g;e.geometry.type==="LineString"?g=[e.geometry.coordinates]:(e.geometry.type==="MultiLineString"||e.geometry.type==="Polygon")&&(g=e.geometry.coordinates);let m=0;for(const y of g)for(const b of y)m=Math.max(m,GeoOperations.distanceBetween(l,b));this._uncertainty=(o==null?void 0:o.uncertaintyRadius)??m}this._name=t.allElements.getEventSourceById(e.properties.id).map(g=>g[d]??(o==null?void 0:o.fallbackName)),this.subjectUri=this.ConstructSubjectUri();const h=this;this.subjectUri.addCallbackAndRunD(async g=>{const m=await dist.MangroveReviews.getReviews({sub:g});h.addReviews(m.reviews)}),this.ConstructSubjectUri(!0).addCallbackAndRunD(async g=>{try{const m=await dist.MangroveReviews.getReviews({sub:g});h.addReviews(m.reviews)}catch{console.log("Could not fetch reviews for partially incorrect query ",g)}})}static construct(e,t,o){const l=e.properties.id,d=ss._featureReviewsCache[l];if(d!==void 0)return d;const h=new ss(e,t,o);return ss._featureReviewsCache[l]=h,h}async createReview(e){const t={sub:this.subjectUri.data,...e},o=this._identity.keypair.data;console.log(t);const l=await dist.MangroveReviews.signReview(o,t);console.log("Signed:",l),await dist.MangroveReviews.submitReview(l),this._reviews.data.push({...t,madeByLoggedInUser:new ImmutableStore(!0)}),this._reviews.ping()}addReviews(e){const t=this,o=new Set(t._reviews.data.map(d=>d.rating+" "+d.opinion));let l=!1;for(const d of e){const h=d.payload;try{const m=new URL(h.sub);if(console.log("URL is",m),m.protocol==="geo:"){const y=m.pathname.split(",").map(w=>Number(w));if(GeoOperations.distanceBetween([this._lat,this._lon],y)>this._uncertainty)continue}}catch(m){console.warn(m)}const g=h.rating+" "+h.opinion;o.has(g)||(t._reviews.data.push({...h,madeByLoggedInUser:this._identity.key_id.map(m=>d.kid===m)}),l=!0)}l&&t._reviews.ping()}ConstructSubjectUri(e=!1){const t=this;return this._name.map(function(o){let l=`geo:${t._lat},${t._lon}?u=${t._uncertainty}`;return o&&(l+="&q="+(e?o:encodeURIComponent(o))),l})}};let FeatureReviews=ss;ge(FeatureReviews,"_featureReviewsCache",{});class FeatureSwitchState{constructor(e){ge(this,"layoutToUse");ge(this,"featureSwitchUserbadge");ge(this,"featureSwitchSearch");ge(this,"featureSwitchBackgroundSelection");ge(this,"featureSwitchAddNew");ge(this,"featureSwitchWelcomeMessage");ge(this,"featureSwitchCommunityIndex");ge(this,"featureSwitchExtraLinkEnabled");ge(this,"featureSwitchMoreQuests");ge(this,"featureSwitchShareScreen");ge(this,"featureSwitchGeolocation");ge(this,"featureSwitchIsTesting");ge(this,"featureSwitchIsDebugging");ge(this,"featureSwitchShowAllQuestions");ge(this,"featureSwitchApiURL");ge(this,"featureSwitchFilter");ge(this,"featureSwitchEnableExport");ge(this,"featureSwitchFakeUser");ge(this,"featureSwitchExportAsPdf");ge(this,"overpassUrl");ge(this,"overpassTimeout");ge(this,"overpassMaxZoom");ge(this,"osmApiTileSize");ge(this,"backgroundLayerId");this.layoutToUse=e;function t(l,d,h){const g=d(e);return QueryParameters.GetQueryParameter(l,""+g,h).sync(y=>y===void 0?g:y!=="false",[],y=>y==g?void 0:""+y)}this.featureSwitchUserbadge=t("fs-userbadge",l=>(l==null?void 0:l.enableUserBadge)??!0,"Disables/Enables the user information pill (userbadge) at the top left. Disabling this disables logging in and thus disables editing all together, effectively putting MapComplete into read-only mode."),this.featureSwitchSearch=t("fs-search",l=>(l==null?void 0:l.enableSearch)??!0,"Disables/Enables the search bar"),this.featureSwitchBackgroundSelection=t("fs-background",l=>(l==null?void 0:l.enableBackgroundLayerSelection)??!0,"Disables/Enables the background layer control"),this.featureSwitchFilter=t("fs-filter",l=>(l==null?void 0:l.enableLayers)??!0,"Disables/Enables the filter view"),this.featureSwitchAddNew=t("fs-add-new",l=>(l==null?void 0:l.enableAddNewPoints)??!0,"Disables/Enables the 'add new feature'-popup. (A theme without presets might not have it in the first place)"),this.featureSwitchWelcomeMessage=t("fs-welcome-message",()=>!0,"Disables/enables the help menu or welcome message"),this.featureSwitchCommunityIndex=t("fs-community-index",()=>!0,"Disables/enables the button to get in touch with the community"),this.featureSwitchExtraLinkEnabled=t("fs-iframe-popout",l=>!0,"Disables/Enables the extraLink button. By default, if in iframe mode and the welcome message is hidden, a popout button to the full mapcomplete instance is shown instead (unless disabled with this switch or another extraLink button is enabled)"),this.featureSwitchMoreQuests=t("fs-more-quests",l=>(l==null?void 0:l.enableMoreQuests)??!0,"Disables/Enables the 'More Quests'-tab in the welcome message"),this.featureSwitchShareScreen=t("fs-share-screen",l=>(l==null?void 0:l.enableShareScreen)??!0,"Disables/Enables the 'Share-screen'-tab in the welcome message"),this.featureSwitchGeolocation=t("fs-geolocation",l=>(l==null?void 0:l.enableGeolocation)??!0,"Disables/Enables the geolocation button"),this.featureSwitchShowAllQuestions=t("fs-all-questions",l=>(l==null?void 0:l.enableShowAllQuestions)??!1,"Always show all questions"),this.featureSwitchEnableExport=t("fs-export",l=>(l==null?void 0:l.enableExportButton)??!1,"Enable the export as GeoJSON and CSV button"),this.featureSwitchExportAsPdf=t("fs-pdf",l=>(l==null?void 0:l.enablePdfDownload)??!1,"Enable the PDF download button"),this.featureSwitchApiURL=QueryParameters.GetQueryParameter("backend","osm","The OSM backend to use - can be used to redirect mapcomplete to the testing backend when using 'osm-test'");let o=!1;this.featureSwitchApiURL.data!=="osm-test"&&!Utils.runningFromConsole&&(location.hostname==="localhost"||location.hostname==="127.0.0.1")&&(o=!0),this.featureSwitchIsTesting=QueryParameters.GetBooleanQueryParameter("test",o,"If true, 'dryrun' mode is activated. The app will behave as normal, except that changes to OSM will be printed onto the console instead of actually uploaded to osm.org"),this.featureSwitchIsDebugging=QueryParameters.GetBooleanQueryParameter("debug",!1,"If true, shows some extra debugging help such as all the available tags on every object"),this.featureSwitchFakeUser=QueryParameters.GetBooleanQueryParameter("fake-user",!1,"If true, 'dryrun' mode is activated and a fake user account is loaded"),this.overpassUrl=QueryParameters.GetQueryParameter("overpassUrl",((e==null?void 0:e.overpassUrl)??Constants.defaultOverpassUrls).join(","),"Point mapcomplete to a different overpass-instance. Example: https://overpass-api.de/api/interpreter").sync(l=>l==null?void 0:l.split(","),[],l=>l==null?void 0:l.join(",")),this.overpassTimeout=UIEventSource.asFloat(QueryParameters.GetQueryParameter("overpassTimeout",""+(e==null?void 0:e.overpassTimeout),"Set a different timeout (in seconds) for queries in overpass")),this.overpassMaxZoom=UIEventSource.asFloat(QueryParameters.GetQueryParameter("overpassMaxZoom",""+(e==null?void 0:e.overpassMaxZoom)," point to switch between OSM-api and overpass")),this.osmApiTileSize=UIEventSource.asFloat(QueryParameters.GetQueryParameter("osmApiTileSize",""+(e==null?void 0:e.osmApiTileSize),"Tilesize when the OSM-API is used to fetch data within a BBOX")),this.featureSwitchUserbadge.addCallbackAndRun(l=>{l||this.featureSwitchAddNew.setData(!1)}),this.backgroundLayerId=QueryParameters.GetQueryParameter("background",(e==null?void 0:e.defaultBackgroundId)??"osm","The id of the background layer to start with")}}class ElementStorage{constructor(){ge(this,"ContainingFeatures",new Map);ge(this,"_elements",new Map)}addElementById(e,t){this._elements.set(e,t)}addOrGetElement(e){const t=e.properties.id,o=e.properties,l=this.addOrGetById(t,o);return e.properties=l.data,this.ContainingFeatures.has(t)||this.ContainingFeatures.set(t,e),l}getEventSourceById(e){if(e!==void 0)return this._elements.get(e)}has(e){return this._elements.has(e)}addAlias(e,t){if(t===void 0){const l=this.getEventSourceById(e);l.data._deleted="yes",l.ping();return}if(e==t)return;const o=this.getEventSourceById(e);o!==void 0&&(o.data.id=t,this.addElementById(t,o),this.ContainingFeatures.set(t,this.ContainingFeatures.get(e)),o.ping())}addOrGetById(e,t){if(!this._elements.has(e)){const h=new UIEventSource(t,"tags of "+e);return this._elements.set(e,h),h}const o=this._elements.get(e);if(o.data==t)return o;const l=o.data;let d=!1;for(const h in t){if(!t.hasOwnProperty(h))continue;const g=t[h];l[h]!==g&&(g===void 0?h.startsWith("_")||delete l[h]:l[h]=g,d=!0)}return d&&o.ping(),o}}class ElementsState extends FeatureSwitchState{constructor(t){super(t);ge(this,"allElements",new ElementStorage);ge(this,"selectedElement",new UIEventSource(void 0,"Selected element"));ge(this,"locationControl",new UIEventSource(void 0,"locationControl"));ge(this,"currentBounds",new UIEventSource(void 0));function o(g,m,y){const b=LocalStorageSource.Get(g),w=b.data,E=UIEventSource.asFloat(QueryParameters.GetQueryParameter(g,""+m,y).syncWith(b));if(E.data===m){const P=Number(w);isNaN(P)||E.setData(P)}return E}const l=o("z",(t==null?void 0:t.startZoom)??1,"The initial/current zoom level"),d=o("lat",(t==null?void 0:t.startLat)??0,"The initial/current latitude"),h=o("lon",(t==null?void 0:t.startLon)??0,"The initial/current longitude of the app");this.locationControl.setData({zoom:Utils.asFloat(l.data),lat:Utils.asFloat(d.data),lon:Utils.asFloat(h.data)}),this.locationControl.addCallback(g=>{l.setData(g.zoom),d.setData(g.lat),h.setData(g.lon)})}}const Us=class{constructor(e){e.osmConnection.isLoggedIn.addCallbackAndRun(t=>{if(t)return Us.installCallback(e),!0})}static installCallback(e){e.selectedElement.addCallbackAndRunD(async t=>{var d;let o=(d=t.properties)==null?void 0:d.id;const l=e.osmConnection._oauth_config.url;if(o.startsWith(l)&&(o=o.substring(l.length)),!!(o.startsWith("way")||o.startsWith("node")||o.startsWith("relation"))&&!(o.indexOf("-")>=0))try{const h=await OsmObject.DownloadPropertiesOf(o);if(h==="deleted"){console.warn("The current selected element has been deleted upstream!");const g=e.allElements.getEventSourceById(o);if(g.data._deleted==="yes")return;g.data._deleted="yes",g.ping();return}Us.applyUpdate(e,h,o),console.log("Updated",o)}catch(h){console.warn("Could not update",o," due to",h)}})}static applyUpdate(e,t,o){try{e.layoutToUse.isLeftRightSensitive()&&SimpleMetaTaggers.removeBothTagging(t);const d=e.changes.pendingChanges.data.filter(y=>y.type+"/"+y.id===o).filter(y=>y.tags!==void 0);for(const y of d){const b=y.tags;for(const w of b){const E=w.k,P=w.v;P===void 0||P===""?delete t[E]:t[E]=P}}let h=!1;const g=e.allElements.getEventSourceById(o),m=g.data;for(const y in t){let b=t[y];typeof b=="number"&&(b=""+b),m[y]!==b&&(h=!0,m[y]=b)}for(const y in m)y.startsWith("_")||this.metatags.has(y)||y in t||(console.log("Removing key as deleted upstream",y),delete m[y],h=!0);h?(console.log("Detected upstream changes to the object when opening it, updating..."),g.ping()):console.debug("Fetched latest tags for ",o,"but detected no changes")}catch(l){console.error("Updating the tags of selected element ",o,"failed due to",l)}}};let SelectedElementTagsUpdater=Us;ge(SelectedElementTagsUpdater,"metatags",new Set(["timestamp","version","changeset","user","uid","id"]));class Changes{constructor(e,t=!1){ge(this,"name","Newly added features");ge(this,"features",new UIEventSource([]));ge(this,"pendingChanges",LocalStorageSource.GetParsed("pending-changes",[]));ge(this,"allChanges",new UIEventSource(void 0));ge(this,"state");ge(this,"extraComment",new UIEventSource(void 0));ge(this,"historicalUserLocations");ge(this,"_nextId",-1);ge(this,"isUploading",new UIEventSource(!1));ge(this,"previouslyCreated",[]);ge(this,"_leftRightSensitive");ge(this,"_changesetHandler");var o,l;this._leftRightSensitive=t,this.allChanges.setData([...this.pendingChanges.data]),this._nextId=Math.min(-1,...((o=this.pendingChanges.data)==null?void 0:o.map(d=>d.id))??[]),this.state=e,this._changesetHandler=(l=e==null?void 0:e.osmConnection)==null?void 0:l.CreateChangesetHandler(e.allElements,this)}static createChangesetFor(e,t){const o=t.modifiedObjects??[],l=t.newObjects??[],d=t.deletedObjects??[];let h=`<osmChange version='0.6' generator='Mapcomplete ${Constants.vNumber}'>`;return l.length>0&&(h+=`
<create>
`+l.map(g=>g.ChangesetXML(e)).join(`
`)+"</create>"),o.length>0&&(h+=`
<modify>
`+o.map(g=>g.ChangesetXML(e)).join(`
`)+`
</modify>`),d.length>0&&(h+=`
<delete>
`+d.map(g=>g.ChangesetXML(e)).join(`
`)+`
</delete>`),h+="</osmChange>",h}static GetNeededIds(e){return Utils.Dedup(e.filter(t=>t.id>=0).map(t=>t.type+"/"+t.id))}getNewID(){return this._nextId--}async flushChanges(e=void 0){if(this.pendingChanges.data.length!==0){if(this.isUploading.data){console.log("Is already uploading... Abort");return}console.log("Uploading changes due to: ",e),this.isUploading.setData(!0);try{const t=await this.flushChangesAsync();this.isUploading.setData(!1),console.log("Changes flushed. Your changeset is "+t)}catch(t){this.isUploading.setData(!1),console.error("Flushing changes failed due to",t)}}}async applyAction(e){const t=await e.Perform(this);t[0].meta.distanceToObject=this.calculateDistanceToChanges(e,t),this.applyChanges(t)}applyChanges(e){console.log("Received changes:",e),this.pendingChanges.data.push(...e),this.pendingChanges.ping(),this.allChanges.data.push(...e),this.allChanges.ping()}calculateDistanceToChanges(e,t){var m,y;const o=(y=(m=this.historicalUserLocations)==null?void 0:m.features)==null?void 0:y.data;if(o===void 0||!e.trackStatistics)return;const l=new Date,d=o.map(b=>b.feature).filter(b=>b.geometry.type==="Point").filter(b=>{const w=new Date(b.properties.date);return(l.getTime()-w.getTime())/1e3<Constants.nearbyVisitTime});if(d.length===0)return;const h=[],g=this.state.allElements.ContainingFeatures.get(e.mainObjectId);g!==void 0&&h.push(GeoOperations.centerpointCoordinates(g));for(const b of t){const w=b.changes;w!==void 0&&(w.lat!==void 0&&h.push([w.lat,w.lon]),w.coordinates!==void 0&&h.push(...w.coordinates))}return Math.min(...h.map(b=>Math.min(...d.map(w=>{const E=GeoOperations.centerpointCoordinates(w);return GeoOperations.distanceBetween(b,E)}))))}async flushSelectChanges(e,t){const o=this,l=Changes.GetNeededIds(e),d=Utils.NoNull(await Promise.all(l.map(async L=>OsmObject.DownloadObjectAsync(L).catch(W=>{console.error("Could not download OSM-object",L," dropping it from the changes ("+W+")"),e=e.filter(Y=>Y.type+"/"+Y.id!==L)}))));if(this._leftRightSensitive&&d.forEach(L=>SimpleMetaTaggers.removeBothTagging(L.tags)),console.log("Got the fresh objects!",d,"pending: ",e),e.length==0)return console.log("No pending changes..."),!0;const h=Array.from(Utils.Hist(e.filter(L=>L.meta.changeType!==void 0&&L.meta.changeType!==null).map(L=>L.meta.changeType)),([L,W])=>({key:L,value:W,aggregate:!0})),g=e.filter(L=>L.meta.specialMotivation!==void 0).map(L=>({key:L.meta.changeType+":"+L.type+"/"+L.id,value:L.meta.specialMotivation})),m=Utils.NoNull(e.map(L=>L.meta.distanceToObject));m.sort((L,W)=>L-W);const y=Constants.distanceToChangeObjectBins.map(L=>0);let b=0;const w=Constants.distanceToChangeObjectBins;for(let L=0;L<w.length;L++){const W=w[L];for(;b<m.length&&m[b]<W;)y[L]++,b++}const E=Utils.NoNull(y.map((L,W)=>{if(L===0)return;const Y=w[W];let D=`change_within_${Y}m`;return Y===Number.MAX_VALUE&&(D=`change_over_${w[W-1]}m`),{key:D,value:L,aggregate:!0}})),P=e[0].meta.theme;let $="Adding data with #MapComplete for theme #"+P;this.extraComment.data!==void 0&&($+=`

`+this.extraComment.data);const C=[{key:"comment",value:$},{key:"theme",value:P},...h,...g,...E];return await this._changesetHandler.UploadChangeset((L,W)=>{W.size>0&&(console.log("Rewriting pending changes from",e,"with",W),e=e.map(D=>ChangeDescriptionTools.rewriteIds(D,W)),console.log("Result is",e));const Y=o.CreateChangesetObjects(e,d);return Changes.createChangesetFor(""+L,Y)},C,t),console.log("Upload successfull!"),!0}async flushChangesAsync(){const e=this;try{const t=e.pendingChanges.data,o=new Map;for(const d of t){const h=d.meta.theme;o.has(h)||o.set(h,[]),o.get(h).push(d)}(await Promise.all(Array.from(o,async([d,h])=>{try{const g=this.state.osmConnection.GetPreference("current-open-changeset-"+d).sync(m=>{const y=Number(m);if(!isNaN(y))return y},[],m=>""+m);return console.log("Using current-open-changeset-"+d+" from the preferences, got "+g.data),await e.flushSelectChanges(h,g)}catch(g){return console.error("Could not upload some changes:",g),!1}}))).some(d=>d==!1)||this.pendingChanges.setData([])}catch(t){console.error("Could not handle changes - probably an old, pending changeset in localstorage with an invalid format; erasing those",t),e.pendingChanges.setData([])}finally{e.isUploading.setData(!1)}}CreateChangesetObjects(e,t){const o=new Map,l=new Map;for(const h of t)o.set(h.type+"/"+h.id,h),l.set(h.type+"/"+h.id,"unchanged");for(const h of this.previouslyCreated)o.set(h.type+"/"+h.id,h),l.set(h.type+"/"+h.id,"unchanged");for(const h of e){let g=!1;const m=h.type+"/"+h.id;if(!o.has(m)){if(h.id>=0)throw"Did not get an object that should be known: "+m;if(h.changes===void 0)throw"Not a creation of the object";l.set(m,"created"),console.log("Creating object for changeDescription",h);let w;switch(h.type){case"node":const E=new OsmNode(h.id);E.lat=h.changes.lat,E.lon=h.changes.lon,w=E;break;case"way":const P=new OsmWay(h.id);P.nodes=h.changes.nodes,w=P;break;case"relation":const $=new OsmRelation(h.id);$.members=h.changes.members,w=$;break}if(w===void 0)throw"Hmm? This is a bug";o.set(m,w),this.previouslyCreated.push(w)}const y=l.get(m);h.doDelete&&(y==="created"?l.set(m,"unchanged"):l.set(m,"deleted"));const b=o.get(m);for(const w of h.tags??[]){const E=w.k;let P=w.v;P===""&&(P=void 0),b.tags[E]!==P&&(b.tags[E]=P,g=!0)}if(h.changes!==void 0)switch(h.type){case"node":const w=h.changes.lat,E=h.changes.lon,P=b;(P.lat!==w||P.lon!==E)&&(P.lat=w,P.lon=E,g=!0);break;case"way":const $=h.changes.nodes,C=b;Utils.Identical($,C.nodes)||(C.nodes=$,g=!0);break;case"relation":const L=h.changes.members,W=b;Utils.Identical(L,W.members,(Y,D)=>Y.role===D.role&&Y.type===D.type&&Y.ref===D.ref)||(W.members=L,g=!0);break}g&&l.get(m)==="unchanged"&&l.set(m,"modified")}const d={newObjects:[],modifiedObjects:[],deletedObjects:[]};return o.forEach((h,g)=>{const m=l.get(g);m==="created"&&d.newObjects.push(h),m==="modified"&&d.modifiedObjects.push(h),m==="deleted"&&d.deletedObjects.push(h)}),console.debug("Calculated the pending changes: ",d.newObjects.length,"new; ",d.modifiedObjects.length,"modified;",d.deletedObjects,"deleted"),d}setHistoricalUserLocations(e){this.historicalUserLocations=e}}class ChangeToElementsActor{constructor(e,t){e.pendingChanges.addCallbackAndRun(o=>{for(const l of o){const d=l.type+"/"+l.id;if(!t.has(d))continue;const h=t.getEventSourceById(d);let g=!1;for(const m of l.tags??[]){const y=m.k;let b=m.v;b===""&&(b=void 0),h.data[y]!==b&&(g=!0,h.data[y]=b)}g&&h.ping()}})}}class PendingChangesUploader{constructor(e,t){ge(this,"lastChange");const o=this;if(this.lastChange=new Date,e.pendingChanges.addCallback(()=>{o.lastChange=new Date,window.setTimeout(()=>{const d=(new Date().getTime()-o.lastChange.getTime())/1e3;Constants.updateTimeoutSec>=d-1&&e.flushChanges("Flushing changes due to timeout")},Constants.updateTimeoutSec*1e3)}),t.stabilized(1e4).addCallback(d=>{d===void 0&&e.flushChanges("Flushing changes due to popup closed")}),Utils.runningFromConsole)return;document.addEventListener("mouseout",d=>{!d.toElement&&!d.relatedTarget&&e.flushChanges("Flushing changes due to focus lost")}),document.onfocus=()=>{e.flushChanges("OnFocus")},document.onblur=()=>{e.flushChanges("OnFocus")};try{document.addEventListener("visibilitychange",()=>{e.flushChanges("Visibility change")},!1)}catch(d){console.warn("Could not register visibility change listener",d)}function l(d){if(e.pendingChanges.data.length!=0)return e.flushChanges("onbeforeunload - probably closing or something similar"),d.preventDefault(),"Saving your last changes..."}window.onbeforeunload=l,window.addEventListener("pagehide",l)}}const lo=class{constructor(e="https://maproulette.org/api/v2"){ge(this,"endpoint");ge(this,"apiKey");this.endpoint=e,this.apiKey=Constants.MaprouletteApiKey}async closeTask(e,t=lo.STATUS_FIXED,o){const l=await fetch(`${this.endpoint}/task/${e}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",apiKey:this.apiKey},body:o!==void 0?JSON.stringify(o):void 0});if(l.status!==204)throw console.log(`Failed to close task: ${l.status}`),`Failed to close task: ${l.status}`}};let Maproulette=lo;ge(Maproulette,"STATUS_OPEN",0),ge(Maproulette,"STATUS_FIXED",1),ge(Maproulette,"STATUS_FALSE_POSITIVE",2),ge(Maproulette,"STATUS_SKIPPED",3),ge(Maproulette,"STATUS_DELETED",4),ge(Maproulette,"STATUS_ALREADY_FIXED",5),ge(Maproulette,"STATUS_TOO_HARD",6),ge(Maproulette,"STATUS_DISABLED",9),ge(Maproulette,"STATUS_MEANING",{0:"Open",1:"Fixed",2:"False positive",3:"Skipped",4:"Deleted",5:"Already fixed",6:"Too hard",9:"Disabled"});class UserRelatedState extends ElementsState{constructor(t,o){super(t);ge(this,"osmConnection");ge(this,"changes");ge(this,"mangroveIdentity");ge(this,"maprouletteConnection");ge(this,"installedUserThemes");ge(this,"showAllQuestionsAtOnce");this.osmConnection=new OsmConnection({dryRun:this.featureSwitchIsTesting,fakeUser:this.featureSwitchFakeUser.data,oauth_token:QueryParameters.GetQueryParameter("oauth_token",void 0,"Used to complete the login"),osmConfiguration:this.featureSwitchApiURL.data,attemptLogin:o==null?void 0:o.attemptLogin}),this.osmConnection.GetPreference("translation-mode").addCallbackAndRunD(d=>{d=d.toLowerCase(),d==="true"||d==="yes"?(Locale.showLinkOnMobile.setData(!1),Locale.showLinkToWeblate.setData(!0)):d==="false"||d==="no"?Locale.showLinkToWeblate.setData(!1):d==="mobile"?(Locale.showLinkOnMobile.setData(!0),Locale.showLinkToWeblate.setData(!0)):(Locale.showLinkOnMobile.setData(!1),Locale.showLinkToWeblate.setData(!1))}),this.changes=new Changes(this,(t==null?void 0:t.isLeftRightSensitive())??!1),this.showAllQuestionsAtOnce=UIEventSource.asBoolean(this.osmConnection.GetPreference("show-all-questions","false",{documentation:"Either 'true' or 'false'. If set, all questions will be shown all at once"})),new ChangeToElementsActor(this.changes,this.allElements),new PendingChangesUploader(this.changes,this.selectedElement),this.mangroveIdentity=new MangroveIdentity(this.osmConnection.GetLongPreference("identity","mangrove")),this.maprouletteConnection=new Maproulette,t!=null&&t.hideFromOverview&&this.osmConnection.isLoggedIn.addCallbackAndRunD(l=>{if(l)return this.osmConnection.GetPreference("hidden-theme-"+(t==null?void 0:t.id)+"-enabled").setData("true"),!0}),this.layoutToUse!==void 0&&!this.layoutToUse.official&&(console.log("Marking unofficial theme as visited"),this.osmConnection.GetLongPreference("unofficial-theme-"+this.layoutToUse.id).setData(JSON.stringify({id:this.layoutToUse.id,icon:this.layoutToUse.icon,title:this.layoutToUse.title.translations,shortDescription:this.layoutToUse.shortDescription.translations,definition:this.layoutToUse.definition}))),this.InitializeLanguage(),new SelectedElementTagsUpdater(this),this.installedUserThemes=this.InitInstalledUserThemes()}GetUnofficialTheme(t){console.log("GETTING UNOFFICIAL THEME");const o=this.osmConnection.GetLongPreference("unofficial-theme-"+t),l=o.data;if(l===void 0||l==="undefined"||l===""){o.setData(null);return}try{const d=JSON.parse(l);return d.isOfficial=!1,d}catch{console.warn("Removing theme "+t+" as it could not be parsed from the preferences; the content is:",l),o.setData(null);return}}InitializeLanguage(){const t=this.layoutToUse;Locale.language.syncWith(this.osmConnection.GetPreference("language")),Locale.language.addCallback(o=>{if(t!==void 0){if(Locale.showLinkToWeblate.data)return!0;this.layoutToUse.language.indexOf(o)<0&&(console.log("Resetting language to",t.language[0],"as",o," is unsupported"),Locale.language.setData(t.language[0]))}}),Locale.language.ping()}InitInstalledUserThemes(){const t="mapcomplete-unofficial-theme-",o="-combined-length";return this.osmConnection.preferencesHandler.preferences.map(l=>Object.keys(l).filter(d=>d.startsWith(t)&&d.endsWith(o)).map(d=>d.substring(t.length,d.length-o.length)))}}class LoginButton extends SubtleButton{constructor(e,t,o){super(o??Svg.login_ui(),e),this.onClick(()=>{t.osmConnection.AttemptLogin()})}}class LoginToggle extends VariableUiElement{constructor(e,t,o){const l=new Loading("Trying to log in..."),d=t===void 0?void 0:new LoginButton(t,o),h=Translations.t.general,g={offline:h.loginFailedOfflineMode,unreachable:h.loginFailedUnreachableMode,readonly:h.loginFailedReadonlyMode};super(o.osmConnection.loadingStatus.map(m=>{if(o.featureSwitchUserbadge.data==!1)return;const y=o.osmConnection.apiIsOnline.data,b=g[y];return b!==void 0?new Combine([Svg.invalid_svg().SetClass("w-8 h-8 m-2 shrink-0"),b]).SetClass("flex items-center alert max-w-64"):m==="loading"?l:m==="not-attempted"?d:m==="logged-in"?e:new LoginButton(Translations.t.general.loginFailed,o,Svg.invalid_svg())},[o.featureSwitchUserbadge,o.osmConnection.apiIsOnline]))}}class Button extends BaseUIElement{constructor(t,o){super();ge(this,"_text");this._text=Translations.W(t),this.onClick(o)}InnerConstructElement(){const t=this._text.ConstructElement();if(t===void 0)return;const o=document.createElement("form"),l=document.createElement("button");return l.type="button",l.appendChild(t),o.appendChild(l),o}}/*!
 * Chart.js v3.9.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */function noop(){}const uid=function(){let n=0;return function(){return n++}}();function isNullOrUndef(n){return n===null||typeof n>"u"}function isArray(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function isObject(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}const isNumberFinite=n=>(typeof n=="number"||n instanceof Number)&&isFinite(+n);function finiteOrDefault(n,e){return isNumberFinite(n)?n:e}function valueOrDefault(n,e){return typeof n>"u"?e:n}const toPercentage=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:n/e,toDimension=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function callback(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function each(n,e,t,o){let l,d,h;if(isArray(n))if(d=n.length,o)for(l=d-1;l>=0;l--)e.call(t,n[l],l);else for(l=0;l<d;l++)e.call(t,n[l],l);else if(isObject(n))for(h=Object.keys(n),d=h.length,l=0;l<d;l++)e.call(t,n[h[l]],h[l])}function _elementsEqual(n,e){let t,o,l,d;if(!n||!e||n.length!==e.length)return!1;for(t=0,o=n.length;t<o;++t)if(l=n[t],d=e[t],l.datasetIndex!==d.datasetIndex||l.index!==d.index)return!1;return!0}function clone$1(n){if(isArray(n))return n.map(clone$1);if(isObject(n)){const e=Object.create(null),t=Object.keys(n),o=t.length;let l=0;for(;l<o;++l)e[t[l]]=clone$1(n[t[l]]);return e}return n}function isValidKey(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function _merger(n,e,t,o){if(!isValidKey(n))return;const l=e[n],d=t[n];isObject(l)&&isObject(d)?merge(l,d,o):e[n]=clone$1(d)}function merge(n,e,t){const o=isArray(e)?e:[e],l=o.length;if(!isObject(n))return n;t=t||{};const d=t.merger||_merger;for(let h=0;h<l;++h){if(e=o[h],!isObject(e))continue;const g=Object.keys(e);for(let m=0,y=g.length;m<y;++m)d(g[m],n,e,t)}return n}function mergeIf(n,e){return merge(n,e,{merger:_mergerIf})}function _mergerIf(n,e,t){if(!isValidKey(n))return;const o=e[n],l=t[n];isObject(o)&&isObject(l)?mergeIf(o,l):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=clone$1(l))}const keyResolvers={"":n=>n,x:n=>n.x,y:n=>n.y};function resolveObjectKey(n,e){return(keyResolvers[e]||(keyResolvers[e]=_getKeyResolver(e)))(n)}function _getKeyResolver(n){const e=_splitKey(n);return t=>{for(const o of e){if(o==="")break;t=t&&t[o]}return t}}function _splitKey(n){const e=n.split("."),t=[];let o="";for(const l of e)o+=l,o.endsWith("\\")?o=o.slice(0,-1)+".":(t.push(o),o="");return t}function _capitalize(n){return n.charAt(0).toUpperCase()+n.slice(1)}const defined=n=>typeof n<"u",isFunction=n=>typeof n=="function",setsEqual=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function _isClickEvent(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const PI=Math.PI,TAU=2*PI,PITAU=TAU+PI,INFINITY=Number.POSITIVE_INFINITY,RAD_PER_DEG=PI/180,HALF_PI=PI/2,QUARTER_PI=PI/4,TWO_THIRDS_PI=PI*2/3,log10=Math.log10,sign=Math.sign;function niceNum(n){const e=Math.round(n);n=almostEquals(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(log10(n))),o=n/t;return(o<=1?1:o<=2?2:o<=5?5:10)*t}function _factorize(n){const e=[],t=Math.sqrt(n);let o;for(o=1;o<t;o++)n%o===0&&(e.push(o),e.push(n/o));return t===(t|0)&&e.push(t),e.sort((l,d)=>l-d).pop(),e}function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function almostEquals(n,e,t){return Math.abs(n-e)<t}function almostWhole(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function _setMinAndMaxByKey(n,e,t){let o,l,d;for(o=0,l=n.length;o<l;o++)d=n[o][t],isNaN(d)||(e.min=Math.min(e.min,d),e.max=Math.max(e.max,d))}function toRadians(n){return n*(PI/180)}function toDegrees(n){return n*(180/PI)}function _decimalPlaces(n){if(!isNumberFinite(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function getAngleFromPoint(n,e){const t=e.x-n.x,o=e.y-n.y,l=Math.sqrt(t*t+o*o);let d=Math.atan2(o,t);return d<-.5*PI&&(d+=TAU),{angle:d,distance:l}}function distanceBetweenPoints(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function _angleDiff(n,e){return(n-e+PITAU)%TAU-PI}function _normalizeAngle(n){return(n%TAU+TAU)%TAU}function _angleBetween(n,e,t,o){const l=_normalizeAngle(n),d=_normalizeAngle(e),h=_normalizeAngle(t),g=_normalizeAngle(d-l),m=_normalizeAngle(h-l),y=_normalizeAngle(l-d),b=_normalizeAngle(l-h);return l===d||l===h||o&&d===h||g>m&&y<b}function _limitValue(n,e,t){return Math.max(e,Math.min(t,n))}function _int16Range(n){return _limitValue(n,-32768,32767)}function _isBetween(n,e,t,o=1e-6){return n>=Math.min(e,t)-o&&n<=Math.max(e,t)+o}function _lookup(n,e,t){t=t||(h=>n[h]<e);let o=n.length-1,l=0,d;for(;o-l>1;)d=l+o>>1,t(d)?l=d:o=d;return{lo:l,hi:o}}const _lookupByKey=(n,e,t,o)=>_lookup(n,t,o?l=>n[l][e]<=t:l=>n[l][e]<t),_rlookupByKey=(n,e,t)=>_lookup(n,t,o=>n[o][e]>=t);function _filterBetween(n,e,t){let o=0,l=n.length;for(;o<l&&n[o]<e;)o++;for(;l>o&&n[l-1]>t;)l--;return o>0||l<n.length?n.slice(o,l):n}const arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),arrayEvents.forEach(t=>{const o="_onData"+_capitalize(t),l=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...d){const h=l.apply(this,d);return n._chartjs.listeners.forEach(g=>{typeof g[o]=="function"&&g[o](...d)}),h}})})}function unlistenArrayEvents(n,e){const t=n._chartjs;if(!t)return;const o=t.listeners,l=o.indexOf(e);l!==-1&&o.splice(l,1),!(o.length>0)&&(arrayEvents.forEach(d=>{delete n[d]}),delete n._chartjs)}function _arrayUnique(n){const e=new Set;let t,o;for(t=0,o=n.length;t<o;++t)e.add(n[t]);return e.size===o?n:Array.from(e)}const requestAnimFrame=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function throttled(n,e,t){const o=t||(h=>Array.prototype.slice.call(h));let l=!1,d=[];return function(...h){d=o(h),l||(l=!0,requestAnimFrame.call(window,()=>{l=!1,n.apply(e,d)}))}}function debounce(n,e){let t;return function(...o){return e?(clearTimeout(t),t=setTimeout(n,e,o)):n.apply(this,o),e}}const _toLeftRightCenter=n=>n==="start"?"left":n==="end"?"right":"center",_alignStartEnd=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,_textX=(n,e,t,o)=>n===(o?"left":"right")?t:n==="center"?(e+t)/2:e;function _getStartAndCountOfVisiblePoints(n,e,t){const o=e.length;let l=0,d=o;if(n._sorted){const{iScale:h,_parsed:g}=n,m=h.axis,{min:y,max:b,minDefined:w,maxDefined:E}=h.getUserBounds();w&&(l=_limitValue(Math.min(_lookupByKey(g,h.axis,y).lo,t?o:_lookupByKey(e,m,h.getPixelForValue(y)).lo),0,o-1)),E?d=_limitValue(Math.max(_lookupByKey(g,h.axis,b,!0).hi+1,t?0:_lookupByKey(e,m,h.getPixelForValue(b),!0).hi+1),l,o)-l:d=o-l}return{start:l,count:d}}function _scaleRangesChanged(n){const{xScale:e,yScale:t,_scaleRanges:o}=n,l={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!o)return n._scaleRanges=l,!0;const d=o.xmin!==e.min||o.xmax!==e.max||o.ymin!==t.min||o.ymax!==t.max;return Object.assign(o,l),d}const atEdge=n=>n===0||n===1,elasticIn=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*TAU/t)),elasticOut=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*TAU/t)+1,effects={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*HALF_PI)+1,easeOutSine:n=>Math.sin(n*HALF_PI),easeInOutSine:n=>-.5*(Math.cos(PI*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>atEdge(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>atEdge(n)?n:elasticIn(n,.075,.3),easeOutElastic:n=>atEdge(n)?n:elasticOut(n,.075,.3),easeInOutElastic(n){return atEdge(n)?n:n<.5?.5*elasticIn(n*2,.1125,.45):.5+.5*elasticOut(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-effects.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?effects.easeInBounce(n*2)*.5:effects.easeOutBounce(n*2-1)*.5+.5};/*!
 * @kurkle/color v0.2.1
 * https://github.com/kurkle/color#readme
 * (c) 2022 Jukka Kurkela
 * Released under the MIT License
 */function round(n){return n+.5|0}const lim=(n,e,t)=>Math.max(Math.min(n,t),e);function p2b(n){return lim(round(n*2.55),0,255)}function n2b(n){return lim(round(n*255),0,255)}function b2n(n){return lim(round(n/2.55)/100,0,1)}function n2p(n){return lim(round(n*100),0,100)}const map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hex$1=[..."0123456789ABCDEF"],h1=n=>hex$1[n&15],h2=n=>hex$1[(n&240)>>4]+hex$1[n&15],eq=n=>(n&240)>>4===(n&15),isShort=n=>eq(n.r)&&eq(n.g)&&eq(n.b)&&eq(n.a);function hexParse(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&map$1[n[1]]*17,g:255&map$1[n[2]]*17,b:255&map$1[n[3]]*17,a:e===5?map$1[n[4]]*17:255}:(e===7||e===9)&&(t={r:map$1[n[1]]<<4|map$1[n[2]],g:map$1[n[3]]<<4|map$1[n[4]],b:map$1[n[5]]<<4|map$1[n[6]],a:e===9?map$1[n[7]]<<4|map$1[n[8]]:255})),t}const alpha=(n,e)=>n<255?e(n):"";function hexString(n){var e=isShort(n)?h1:h2;return n?"#"+e(n.r)+e(n.g)+e(n.b)+alpha(n.a,e):void 0}const HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(n,e,t){const o=e*Math.min(t,1-t),l=(d,h=(d+n/30)%12)=>t-o*Math.max(Math.min(h-3,9-h,1),-1);return[l(0),l(8),l(4)]}function hsv2rgbn(n,e,t){const o=(l,d=(l+n/60)%6)=>t-t*e*Math.max(Math.min(d,4-d,1),0);return[o(5),o(3),o(1)]}function hwb2rgbn(n,e,t){const o=hsl2rgbn(n,1,.5);let l;for(e+t>1&&(l=1/(e+t),e*=l,t*=l),l=0;l<3;l++)o[l]*=1-e-t,o[l]+=e;return o}function hueValue(n,e,t,o,l){return n===l?(e-t)/o+(e<t?6:0):e===l?(t-n)/o+2:(n-e)/o+4}function rgb2hsl(n){const t=n.r/255,o=n.g/255,l=n.b/255,d=Math.max(t,o,l),h=Math.min(t,o,l),g=(d+h)/2;let m,y,b;return d!==h&&(b=d-h,y=g>.5?b/(2-d-h):b/(d+h),m=hueValue(t,o,l,b,d),m=m*60+.5),[m|0,y||0,g]}function calln(n,e,t,o){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,o)).map(n2b)}function hsl2rgb(n,e,t){return calln(hsl2rgbn,n,e,t)}function hwb2rgb(n,e,t){return calln(hwb2rgbn,n,e,t)}function hsv2rgb(n,e,t){return calln(hsv2rgbn,n,e,t)}function hue(n){return(n%360+360)%360}function hueParse(n){const e=HUE_RE.exec(n);let t=255,o;if(!e)return;e[5]!==o&&(t=e[6]?p2b(+e[5]):n2b(+e[5]));const l=hue(+e[2]),d=+e[3]/100,h=+e[4]/100;return e[1]==="hwb"?o=hwb2rgb(l,d,h):e[1]==="hsv"?o=hsv2rgb(l,d,h):o=hsl2rgb(l,d,h),{r:o[0],g:o[1],b:o[2],a:t}}function rotate(n,e){var t=rgb2hsl(n);t[0]=hue(t[0]+e),t=hsl2rgb(t),n.r=t[0],n.g=t[1],n.b=t[2]}function hslString(n){if(!n)return;const e=rgb2hsl(n),t=e[0],o=n2p(e[1]),l=n2p(e[2]);return n.a<255?`hsla(${t}, ${o}%, ${l}%, ${b2n(n.a)})`:`hsl(${t}, ${o}%, ${l}%)`}const map$2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},names$1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function unpack(){const n={},e=Object.keys(names$1),t=Object.keys(map$2);let o,l,d,h,g;for(o=0;o<e.length;o++){for(h=g=e[o],l=0;l<t.length;l++)d=t[l],g=g.replace(d,map$2[d]);d=parseInt(names$1[h],16),n[g]=[d>>16&255,d>>8&255,d&255]}return n}let names;function nameParse(n){names||(names=unpack(),names.transparent=[0,0,0,0]);const e=names[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rgbParse(n){const e=RGB_RE.exec(n);let t=255,o,l,d;if(e){if(e[7]!==o){const h=+e[7];t=e[8]?p2b(h):lim(h*255,0,255)}return o=+e[1],l=+e[3],d=+e[5],o=255&(e[2]?p2b(o):lim(o,0,255)),l=255&(e[4]?p2b(l):lim(l,0,255)),d=255&(e[6]?p2b(d):lim(d,0,255)),{r:o,g:l,b:d,a:t}}}function rgbString(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${b2n(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const to=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,from=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function interpolate$1(n,e,t){const o=from(b2n(n.r)),l=from(b2n(n.g)),d=from(b2n(n.b));return{r:n2b(to(o+t*(from(b2n(e.r))-o))),g:n2b(to(l+t*(from(b2n(e.g))-l))),b:n2b(to(d+t*(from(b2n(e.b))-d))),a:n.a+t*(e.a-n.a)}}function modHSL(n,e,t){if(n){let o=rgb2hsl(n);o[e]=Math.max(0,Math.min(o[e]+o[e]*t,e===0?360:1)),o=hsl2rgb(o),n.r=o[0],n.g=o[1],n.b=o[2]}}function clone(n,e){return n&&Object.assign(e||{},n)}function fromObject(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=n2b(n[3]))):(e=clone(n,{r:0,g:0,b:0,a:1}),e.a=n2b(e.a)),e}function functionParse(n){return n.charAt(0)==="r"?rgbParse(n):hueParse(n)}class Color{constructor(e){if(e instanceof Color)return e;const t=typeof e;let o;t==="object"?o=fromObject(e):t==="string"&&(o=hexParse(e)||nameParse(e)||functionParse(e)),this._rgb=o,this._valid=!!o}get valid(){return this._valid}get rgb(){var e=clone(this._rgb);return e&&(e.a=b2n(e.a)),e}set rgb(e){this._rgb=fromObject(e)}rgbString(){return this._valid?rgbString(this._rgb):void 0}hexString(){return this._valid?hexString(this._rgb):void 0}hslString(){return this._valid?hslString(this._rgb):void 0}mix(e,t){if(e){const o=this.rgb,l=e.rgb;let d;const h=t===d?.5:t,g=2*h-1,m=o.a-l.a,y=((g*m===-1?g:(g+m)/(1+g*m))+1)/2;d=1-y,o.r=255&y*o.r+d*l.r+.5,o.g=255&y*o.g+d*l.g+.5,o.b=255&y*o.b+d*l.b+.5,o.a=h*o.a+(1-h)*l.a,this.rgb=o}return this}interpolate(e,t){return e&&(this._rgb=interpolate$1(this._rgb,e._rgb,t)),this}clone(){return new Color(this.rgb)}alpha(e){return this._rgb.a=n2b(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=round(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return modHSL(this._rgb,2,e),this}darken(e){return modHSL(this._rgb,2,-e),this}saturate(e){return modHSL(this._rgb,1,e),this}desaturate(e){return modHSL(this._rgb,1,-e),this}rotate(e){return rotate(this._rgb,e),this}}function index_esm(n){return new Color(n)}function isPatternOrGradient(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function color(n){return isPatternOrGradient(n)?n:index_esm(n)}function getHoverColor(n){return isPatternOrGradient(n)?n:index_esm(n).saturate(.5).darken(.1).hexString()}const overrides=Object.create(null),descriptors=Object.create(null);function getScope$1(n,e){if(!e)return n;const t=e.split(".");for(let o=0,l=t.length;o<l;++o){const d=t[o];n=n[d]||(n[d]=Object.create(null))}return n}function set(n,e,t){return typeof e=="string"?merge(getScope$1(n,e),t):merge(getScope$1(n,""),e)}class Defaults{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,o)=>getHoverColor(o.backgroundColor),this.hoverBorderColor=(t,o)=>getHoverColor(o.borderColor),this.hoverColor=(t,o)=>getHoverColor(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,t){return set(this,e,t)}get(e){return getScope$1(this,e)}describe(e,t){return set(descriptors,e,t)}override(e,t){return set(overrides,e,t)}route(e,t,o,l){const d=getScope$1(this,e),h=getScope$1(this,o),g="_"+t;Object.defineProperties(d,{[g]:{value:d[t],writable:!0},[t]:{enumerable:!0,get(){const m=this[g],y=h[l];return isObject(m)?Object.assign({},y,m):valueOrDefault(m,y)},set(m){this[g]=m}}})}}var defaults=new Defaults({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function toFontString(n){return!n||isNullOrUndef(n.size)||isNullOrUndef(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function _measureText(n,e,t,o,l){let d=e[l];return d||(d=e[l]=n.measureText(l).width,t.push(l)),d>o&&(o=d),o}function _longestText(n,e,t,o){o=o||{};let l=o.data=o.data||{},d=o.garbageCollect=o.garbageCollect||[];o.font!==e&&(l=o.data={},d=o.garbageCollect=[],o.font=e),n.save(),n.font=e;let h=0;const g=t.length;let m,y,b,w,E;for(m=0;m<g;m++)if(w=t[m],w!=null&&isArray(w)!==!0)h=_measureText(n,l,d,h,w);else if(isArray(w))for(y=0,b=w.length;y<b;y++)E=w[y],E!=null&&!isArray(E)&&(h=_measureText(n,l,d,h,E));n.restore();const P=d.length/2;if(P>t.length){for(m=0;m<P;m++)delete l[d[m]];d.splice(0,P)}return h}function _alignPixel(n,e,t){const o=n.currentDevicePixelRatio,l=t!==0?Math.max(t/2,.5):0;return Math.round((e-l)*o)/o+l}function clearCanvas(n,e){e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore()}function drawPoint(n,e,t,o){drawPointLegend(n,e,t,o,null)}function drawPointLegend(n,e,t,o,l){let d,h,g,m,y,b;const w=e.pointStyle,E=e.rotation,P=e.radius;let $=(E||0)*RAD_PER_DEG;if(w&&typeof w=="object"&&(d=w.toString(),d==="[object HTMLImageElement]"||d==="[object HTMLCanvasElement]")){n.save(),n.translate(t,o),n.rotate($),n.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),n.restore();return}if(!(isNaN(P)||P<=0)){switch(n.beginPath(),w){default:l?n.ellipse(t,o,l/2,P,0,0,TAU):n.arc(t,o,P,0,TAU),n.closePath();break;case"triangle":n.moveTo(t+Math.sin($)*P,o-Math.cos($)*P),$+=TWO_THIRDS_PI,n.lineTo(t+Math.sin($)*P,o-Math.cos($)*P),$+=TWO_THIRDS_PI,n.lineTo(t+Math.sin($)*P,o-Math.cos($)*P),n.closePath();break;case"rectRounded":y=P*.516,m=P-y,h=Math.cos($+QUARTER_PI)*m,g=Math.sin($+QUARTER_PI)*m,n.arc(t-h,o-g,y,$-PI,$-HALF_PI),n.arc(t+g,o-h,y,$-HALF_PI,$),n.arc(t+h,o+g,y,$,$+HALF_PI),n.arc(t-g,o+h,y,$+HALF_PI,$+PI),n.closePath();break;case"rect":if(!E){m=Math.SQRT1_2*P,b=l?l/2:m,n.rect(t-b,o-m,2*b,2*m);break}$+=QUARTER_PI;case"rectRot":h=Math.cos($)*P,g=Math.sin($)*P,n.moveTo(t-h,o-g),n.lineTo(t+g,o-h),n.lineTo(t+h,o+g),n.lineTo(t-g,o+h),n.closePath();break;case"crossRot":$+=QUARTER_PI;case"cross":h=Math.cos($)*P,g=Math.sin($)*P,n.moveTo(t-h,o-g),n.lineTo(t+h,o+g),n.moveTo(t+g,o-h),n.lineTo(t-g,o+h);break;case"star":h=Math.cos($)*P,g=Math.sin($)*P,n.moveTo(t-h,o-g),n.lineTo(t+h,o+g),n.moveTo(t+g,o-h),n.lineTo(t-g,o+h),$+=QUARTER_PI,h=Math.cos($)*P,g=Math.sin($)*P,n.moveTo(t-h,o-g),n.lineTo(t+h,o+g),n.moveTo(t+g,o-h),n.lineTo(t-g,o+h);break;case"line":h=l?l/2:Math.cos($)*P,g=Math.sin($)*P,n.moveTo(t-h,o-g),n.lineTo(t+h,o+g);break;case"dash":n.moveTo(t,o),n.lineTo(t+Math.cos($)*P,o+Math.sin($)*P);break}n.fill(),e.borderWidth>0&&n.stroke()}}function _isPointInArea(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function clipArea(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function unclipArea(n){n.restore()}function _steppedLineTo(n,e,t,o,l){if(!e)return n.lineTo(t.x,t.y);if(l==="middle"){const d=(e.x+t.x)/2;n.lineTo(d,e.y),n.lineTo(d,t.y)}else l==="after"!=!!o?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function _bezierCurveTo(n,e,t,o){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(o?e.cp1x:e.cp2x,o?e.cp1y:e.cp2y,o?t.cp2x:t.cp1x,o?t.cp2y:t.cp1y,t.x,t.y)}function renderText(n,e,t,o,l,d={}){const h=isArray(e)?e:[e],g=d.strokeWidth>0&&d.strokeColor!=="";let m,y;for(n.save(),n.font=l.string,setRenderOpts(n,d),m=0;m<h.length;++m)y=h[m],g&&(d.strokeColor&&(n.strokeStyle=d.strokeColor),isNullOrUndef(d.strokeWidth)||(n.lineWidth=d.strokeWidth),n.strokeText(y,t,o,d.maxWidth)),n.fillText(y,t,o,d.maxWidth),decorateText(n,t,o,y,d),o+=l.lineHeight;n.restore()}function setRenderOpts(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),isNullOrUndef(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function decorateText(n,e,t,o,l){if(l.strikethrough||l.underline){const d=n.measureText(o),h=e-d.actualBoundingBoxLeft,g=e+d.actualBoundingBoxRight,m=t-d.actualBoundingBoxAscent,y=t+d.actualBoundingBoxDescent,b=l.strikethrough?(m+y)/2:y;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=l.decorationWidth||2,n.moveTo(h,b),n.lineTo(g,b),n.stroke()}}function addRoundedRectPath(n,e){const{x:t,y:o,w:l,h:d,radius:h}=e;n.arc(t+h.topLeft,o+h.topLeft,h.topLeft,-HALF_PI,PI,!0),n.lineTo(t,o+d-h.bottomLeft),n.arc(t+h.bottomLeft,o+d-h.bottomLeft,h.bottomLeft,PI,HALF_PI,!0),n.lineTo(t+l-h.bottomRight,o+d),n.arc(t+l-h.bottomRight,o+d-h.bottomRight,h.bottomRight,HALF_PI,0,!0),n.lineTo(t+l,o+h.topRight),n.arc(t+l-h.topRight,o+h.topRight,h.topRight,0,-HALF_PI,!0),n.lineTo(t+h.topLeft,o)}const LINE_HEIGHT=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),FONT_STYLE=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function toLineHeight(n,e){const t=(""+n).match(LINE_HEIGHT);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const numberOrZero=n=>+n||0;function _readValueToProps(n,e){const t={},o=isObject(e),l=o?Object.keys(e):e,d=isObject(n)?o?h=>valueOrDefault(n[h],n[e[h]]):h=>n[h]:()=>n;for(const h of l)t[h]=numberOrZero(d(h));return t}function toTRBL(n){return _readValueToProps(n,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(n){return _readValueToProps(n,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(n){const e=toTRBL(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function toFont(n,e){n=n||{},e=e||defaults.font;let t=valueOrDefault(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let o=valueOrDefault(n.style,e.style);o&&!(""+o).match(FONT_STYLE)&&(console.warn('Invalid font style specified: "'+o+'"'),o="");const l={family:valueOrDefault(n.family,e.family),lineHeight:toLineHeight(valueOrDefault(n.lineHeight,e.lineHeight),t),size:t,style:o,weight:valueOrDefault(n.weight,e.weight),string:""};return l.string=toFontString(l),l}function resolve(n,e,t,o){let l=!0,d,h,g;for(d=0,h=n.length;d<h;++d)if(g=n[d],g!==void 0&&(e!==void 0&&typeof g=="function"&&(g=g(e),l=!1),t!==void 0&&isArray(g)&&(g=g[t%g.length],l=!1),g!==void 0))return o&&!l&&(o.cacheable=!1),g}function _addGrace(n,e,t){const{min:o,max:l}=n,d=toDimension(e,(l-o)/2),h=(g,m)=>t&&g===0?0:g+m;return{min:h(o,-Math.abs(d)),max:h(l,d)}}function createContext(n,e){return Object.assign(Object.create(n),e)}function _createResolver(n,e=[""],t=n,o,l=()=>n[0]){defined(o)||(o=_resolve("_fallback",n));const d={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:t,_fallback:o,_getTarget:l,override:h=>_createResolver([h,...n],e,t,o)};return new Proxy(d,{deleteProperty(h,g){return delete h[g],delete h._keys,delete n[0][g],!0},get(h,g){return _cached(h,g,()=>_resolveWithPrefixes(g,e,n,h))},getOwnPropertyDescriptor(h,g){return Reflect.getOwnPropertyDescriptor(h._scopes[0],g)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(h,g){return getKeysFromAllScopes(h).includes(g)},ownKeys(h){return getKeysFromAllScopes(h)},set(h,g,m){const y=h._storage||(h._storage=l());return h[g]=y[g]=m,delete h._keys,!0}})}function _attachContext(n,e,t,o){const l={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:_descriptors(n,o),setContext:d=>_attachContext(n,d,t,o),override:d=>_attachContext(n.override(d),e,t,o)};return new Proxy(l,{deleteProperty(d,h){return delete d[h],delete n[h],!0},get(d,h,g){return _cached(d,h,()=>_resolveWithContext(d,h,g))},getOwnPropertyDescriptor(d,h){return d._descriptors.allKeys?Reflect.has(n,h)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,h)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(d,h){return Reflect.has(n,h)},ownKeys(){return Reflect.ownKeys(n)},set(d,h,g){return n[h]=g,delete d[h],!0}})}function _descriptors(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:o=e.indexable,_allKeys:l=e.allKeys}=n;return{allKeys:l,scriptable:t,indexable:o,isScriptable:isFunction(t)?t:()=>t,isIndexable:isFunction(o)?o:()=>o}}const readKey=(n,e)=>n?n+_capitalize(e):e,needsSubResolver=(n,e)=>isObject(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function _cached(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e))return n[e];const o=t();return n[e]=o,o}function _resolveWithContext(n,e,t){const{_proxy:o,_context:l,_subProxy:d,_descriptors:h}=n;let g=o[e];return isFunction(g)&&h.isScriptable(e)&&(g=_resolveScriptable(e,g,n,t)),isArray(g)&&g.length&&(g=_resolveArray(e,g,n,h.isIndexable)),needsSubResolver(e,g)&&(g=_attachContext(g,l,d&&d[e],h)),g}function _resolveScriptable(n,e,t,o){const{_proxy:l,_context:d,_subProxy:h,_stack:g}=t;if(g.has(n))throw new Error("Recursion detected: "+Array.from(g).join("->")+"->"+n);return g.add(n),e=e(d,h||o),g.delete(n),needsSubResolver(n,e)&&(e=createSubResolver(l._scopes,l,n,e)),e}function _resolveArray(n,e,t,o){const{_proxy:l,_context:d,_subProxy:h,_descriptors:g}=t;if(defined(d.index)&&o(n))e=e[d.index%e.length];else if(isObject(e[0])){const m=e,y=l._scopes.filter(b=>b!==m);e=[];for(const b of m){const w=createSubResolver(y,l,n,b);e.push(_attachContext(w,d,h&&h[n],g))}}return e}function resolveFallback(n,e,t){return isFunction(n)?n(e,t):n}const getScope=(n,e)=>n===!0?e:typeof n=="string"?resolveObjectKey(e,n):void 0;function addScopes(n,e,t,o,l){for(const d of e){const h=getScope(t,d);if(h){n.add(h);const g=resolveFallback(h._fallback,t,l);if(defined(g)&&g!==t&&g!==o)return g}else if(h===!1&&defined(o)&&t!==o)return null}return!1}function createSubResolver(n,e,t,o){const l=e._rootScopes,d=resolveFallback(e._fallback,t,o),h=[...n,...l],g=new Set;g.add(o);let m=addScopesFromKey(g,h,t,d||t,o);return m===null||defined(d)&&d!==t&&(m=addScopesFromKey(g,h,d,m,o),m===null)?!1:_createResolver(Array.from(g),[""],l,d,()=>subGetTarget(e,t,o))}function addScopesFromKey(n,e,t,o,l){for(;t;)t=addScopes(n,e,t,o,l);return t}function subGetTarget(n,e,t){const o=n._getTarget();e in o||(o[e]={});const l=o[e];return isArray(l)&&isObject(t)?t:l}function _resolveWithPrefixes(n,e,t,o){let l;for(const d of e)if(l=_resolve(readKey(d,n),t),defined(l))return needsSubResolver(n,l)?createSubResolver(t,o,n,l):l}function _resolve(n,e){for(const t of e){if(!t)continue;const o=t[n];if(defined(o))return o}}function getKeysFromAllScopes(n){let e=n._keys;return e||(e=n._keys=resolveKeysFromAllScopes(n._scopes)),e}function resolveKeysFromAllScopes(n){const e=new Set;for(const t of n)for(const o of Object.keys(t).filter(l=>!l.startsWith("_")))e.add(o);return Array.from(e)}function _parseObjectDataRadialScale(n,e,t,o){const{iScale:l}=n,{key:d="r"}=this._parsing,h=new Array(o);let g,m,y,b;for(g=0,m=o;g<m;++g)y=g+t,b=e[y],h[g]={r:l.parse(resolveObjectKey(b,d),y)};return h}const EPSILON=Number.EPSILON||1e-14,getPoint=(n,e)=>e<n.length&&!n[e].skip&&n[e],getValueAxis=n=>n==="x"?"y":"x";function splineCurve(n,e,t,o){const l=n.skip?e:n,d=e,h=t.skip?e:t,g=distanceBetweenPoints(d,l),m=distanceBetweenPoints(h,d);let y=g/(g+m),b=m/(g+m);y=isNaN(y)?0:y,b=isNaN(b)?0:b;const w=o*y,E=o*b;return{previous:{x:d.x-w*(h.x-l.x),y:d.y-w*(h.y-l.y)},next:{x:d.x+E*(h.x-l.x),y:d.y+E*(h.y-l.y)}}}function monotoneAdjust(n,e,t){const o=n.length;let l,d,h,g,m,y=getPoint(n,0);for(let b=0;b<o-1;++b)if(m=y,y=getPoint(n,b+1),!(!m||!y)){if(almostEquals(e[b],0,EPSILON)){t[b]=t[b+1]=0;continue}l=t[b]/e[b],d=t[b+1]/e[b],g=Math.pow(l,2)+Math.pow(d,2),!(g<=9)&&(h=3/Math.sqrt(g),t[b]=l*h*e[b],t[b+1]=d*h*e[b])}}function monotoneCompute(n,e,t="x"){const o=getValueAxis(t),l=n.length;let d,h,g,m=getPoint(n,0);for(let y=0;y<l;++y){if(h=g,g=m,m=getPoint(n,y+1),!g)continue;const b=g[t],w=g[o];h&&(d=(b-h[t])/3,g[`cp1${t}`]=b-d,g[`cp1${o}`]=w-d*e[y]),m&&(d=(m[t]-b)/3,g[`cp2${t}`]=b+d,g[`cp2${o}`]=w+d*e[y])}}function splineCurveMonotone(n,e="x"){const t=getValueAxis(e),o=n.length,l=Array(o).fill(0),d=Array(o);let h,g,m,y=getPoint(n,0);for(h=0;h<o;++h)if(g=m,m=y,y=getPoint(n,h+1),!!m){if(y){const b=y[e]-m[e];l[h]=b!==0?(y[t]-m[t])/b:0}d[h]=g?y?sign(l[h-1])!==sign(l[h])?0:(l[h-1]+l[h])/2:l[h-1]:l[h]}monotoneAdjust(n,l,d),monotoneCompute(n,d,e)}function capControlPoint(n,e,t){return Math.max(Math.min(n,t),e)}function capBezierPoints(n,e){let t,o,l,d,h,g=_isPointInArea(n[0],e);for(t=0,o=n.length;t<o;++t)h=d,d=g,g=t<o-1&&_isPointInArea(n[t+1],e),d&&(l=n[t],h&&(l.cp1x=capControlPoint(l.cp1x,e.left,e.right),l.cp1y=capControlPoint(l.cp1y,e.top,e.bottom)),g&&(l.cp2x=capControlPoint(l.cp2x,e.left,e.right),l.cp2y=capControlPoint(l.cp2y,e.top,e.bottom)))}function _updateBezierControlPoints(n,e,t,o,l){let d,h,g,m;if(e.spanGaps&&(n=n.filter(y=>!y.skip)),e.cubicInterpolationMode==="monotone")splineCurveMonotone(n,l);else{let y=o?n[n.length-1]:n[0];for(d=0,h=n.length;d<h;++d)g=n[d],m=splineCurve(y,g,n[Math.min(d+1,h-(o?0:1))%h],e.tension),g.cp1x=m.previous.x,g.cp1y=m.previous.y,g.cp2x=m.next.x,g.cp2y=m.next.y,y=g}e.capBezierPoints&&capBezierPoints(n,t)}function _isDomSupported(){return typeof window<"u"&&typeof document<"u"}function _getParentNode(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function parseMaxStyle(n,e,t){let o;return typeof n=="string"?(o=parseInt(n,10),n.indexOf("%")!==-1&&(o=o/100*e.parentNode[t])):o=n,o}const getComputedStyle=n=>window.getComputedStyle(n,null);function getStyle(n,e){return getComputedStyle(n).getPropertyValue(e)}const positions=["top","right","bottom","left"];function getPositionedStyle(n,e,t){const o={};t=t?"-"+t:"";for(let l=0;l<4;l++){const d=positions[l];o[d]=parseFloat(n[e+"-"+d+t])||0}return o.width=o.left+o.right,o.height=o.top+o.bottom,o}const useOffsetPos=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function getCanvasPosition(n,e){const t=n.touches,o=t&&t.length?t[0]:n,{offsetX:l,offsetY:d}=o;let h=!1,g,m;if(useOffsetPos(l,d,n.target))g=l,m=d;else{const y=e.getBoundingClientRect();g=o.clientX-y.left,m=o.clientY-y.top,h=!0}return{x:g,y:m,box:h}}function getRelativePosition(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:o}=e,l=getComputedStyle(t),d=l.boxSizing==="border-box",h=getPositionedStyle(l,"padding"),g=getPositionedStyle(l,"border","width"),{x:m,y,box:b}=getCanvasPosition(n,t),w=h.left+(b&&g.left),E=h.top+(b&&g.top);let{width:P,height:$}=e;return d&&(P-=h.width+g.width,$-=h.height+g.height),{x:Math.round((m-w)/P*t.width/o),y:Math.round((y-E)/$*t.height/o)}}function getContainerSize(n,e,t){let o,l;if(e===void 0||t===void 0){const d=_getParentNode(n);if(!d)e=n.clientWidth,t=n.clientHeight;else{const h=d.getBoundingClientRect(),g=getComputedStyle(d),m=getPositionedStyle(g,"border","width"),y=getPositionedStyle(g,"padding");e=h.width-y.width-m.width,t=h.height-y.height-m.height,o=parseMaxStyle(g.maxWidth,d,"clientWidth"),l=parseMaxStyle(g.maxHeight,d,"clientHeight")}}return{width:e,height:t,maxWidth:o||INFINITY,maxHeight:l||INFINITY}}const round1=n=>Math.round(n*10)/10;function getMaximumSize(n,e,t,o){const l=getComputedStyle(n),d=getPositionedStyle(l,"margin"),h=parseMaxStyle(l.maxWidth,n,"clientWidth")||INFINITY,g=parseMaxStyle(l.maxHeight,n,"clientHeight")||INFINITY,m=getContainerSize(n,e,t);let{width:y,height:b}=m;if(l.boxSizing==="content-box"){const w=getPositionedStyle(l,"border","width"),E=getPositionedStyle(l,"padding");y-=E.width+w.width,b-=E.height+w.height}return y=Math.max(0,y-d.width),b=Math.max(0,o?Math.floor(y/o):b-d.height),y=round1(Math.min(y,h,m.maxWidth)),b=round1(Math.min(b,g,m.maxHeight)),y&&!b&&(b=round1(y/2)),{width:y,height:b}}function retinaScale(n,e,t){const o=e||1,l=Math.floor(n.height*o),d=Math.floor(n.width*o);n.height=l/o,n.width=d/o;const h=n.canvas;return h.style&&(t||!h.style.height&&!h.style.width)&&(h.style.height=`${n.height}px`,h.style.width=`${n.width}px`),n.currentDevicePixelRatio!==o||h.height!==l||h.width!==d?(n.currentDevicePixelRatio=o,h.height=l,h.width=d,n.ctx.setTransform(o,0,0,o,0,0),!0):!1}const supportsEventListenerOptions=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return n}();function readUsedSize(n,e){const t=getStyle(n,e),o=t&&t.match(/^(\d+)(\.\d+)?px$/);return o?+o[1]:void 0}function _pointInLine(n,e,t,o){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function _steppedInterpolation(n,e,t,o){return{x:n.x+t*(e.x-n.x),y:o==="middle"?t<.5?n.y:e.y:o==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function _bezierInterpolation(n,e,t,o){const l={x:n.cp2x,y:n.cp2y},d={x:e.cp1x,y:e.cp1y},h=_pointInLine(n,l,t),g=_pointInLine(l,d,t),m=_pointInLine(d,e,t),y=_pointInLine(h,g,t),b=_pointInLine(g,m,t);return _pointInLine(y,b,t)}const intlCache=new Map;function getNumberFormat(n,e){e=e||{};const t=n+JSON.stringify(e);let o=intlCache.get(t);return o||(o=new Intl.NumberFormat(n,e),intlCache.set(t,o)),o}function formatNumber(n,e,t){return getNumberFormat(e,t).format(n)}const getRightToLeftAdapter=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,o){return t-o},leftForLtr(t,o){return t-o}}},getLeftToRightAdapter=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function getRtlAdapter(n,e,t){return n?getRightToLeftAdapter(e,t):getLeftToRightAdapter()}function overrideTextDirection(n,e){let t,o;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,o=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=o)}function restoreTextDirection(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function propertyFn(n){return n==="angle"?{between:_angleBetween,compare:_angleDiff,normalize:_normalizeAngle}:{between:_isBetween,compare:(e,t)=>e-t,normalize:e=>e}}function normalizeSegment({start:n,end:e,count:t,loop:o,style:l}){return{start:n%t,end:e%t,loop:o&&(e-n+1)%t===0,style:l}}function getSegment(n,e,t){const{property:o,start:l,end:d}=t,{between:h,normalize:g}=propertyFn(o),m=e.length;let{start:y,end:b,loop:w}=n,E,P;if(w){for(y+=m,b+=m,E=0,P=m;E<P&&h(g(e[y%m][o]),l,d);++E)y--,b--;y%=m,b%=m}return b<y&&(b+=m),{start:y,end:b,loop:w,style:n.style}}function _boundSegment(n,e,t){if(!t)return[n];const{property:o,start:l,end:d}=t,h=e.length,{compare:g,between:m,normalize:y}=propertyFn(o),{start:b,end:w,loop:E,style:P}=getSegment(n,e,t),$=[];let C=!1,L=null,W,Y,D;const k=()=>m(l,D,W)&&g(l,D)!==0,F=()=>g(d,W)===0||m(d,D,W),ce=()=>C||k(),q=()=>!C||F();for(let te=b,Q=b;te<=w;++te)Y=e[te%h],!Y.skip&&(W=y(Y[o]),W!==D&&(C=m(W,l,d),L===null&&ce()&&(L=g(W,l)===0?te:Q),L!==null&&q()&&($.push(normalizeSegment({start:L,end:te,loop:E,count:h,style:P})),L=null),Q=te,D=W));return L!==null&&$.push(normalizeSegment({start:L,end:w,loop:E,count:h,style:P})),$}function _boundSegments(n,e){const t=[],o=n.segments;for(let l=0;l<o.length;l++){const d=_boundSegment(o[l],n.points,e);d.length&&t.push(...d)}return t}function findStartAndEnd(n,e,t,o){let l=0,d=e-1;if(t&&!o)for(;l<e&&!n[l].skip;)l++;for(;l<e&&n[l].skip;)l++;for(l%=e,t&&(d+=l);d>l&&n[d%e].skip;)d--;return d%=e,{start:l,end:d}}function solidSegments(n,e,t,o){const l=n.length,d=[];let h=e,g=n[e],m;for(m=e+1;m<=t;++m){const y=n[m%l];y.skip||y.stop?g.skip||(o=!1,d.push({start:e%l,end:(m-1)%l,loop:o}),e=h=y.stop?m:null):(h=m,g.skip&&(e=m)),g=y}return h!==null&&d.push({start:e%l,end:h%l,loop:o}),d}function _computeSegments(n,e){const t=n.points,o=n.options.spanGaps,l=t.length;if(!l)return[];const d=!!n._loop,{start:h,end:g}=findStartAndEnd(t,l,d,o);if(o===!0)return splitByStyles(n,[{start:h,end:g,loop:d}],t,e);const m=g<h?g+l:g,y=!!n._fullLoop&&h===0&&g===l-1;return splitByStyles(n,solidSegments(t,h,m,y),t,e)}function splitByStyles(n,e,t,o){return!o||!o.setContext||!t?e:doSplitByStyles(n,e,t,o)}function doSplitByStyles(n,e,t,o){const l=n._chart.getContext(),d=readStyle(n.options),{_datasetIndex:h,options:{spanGaps:g}}=n,m=t.length,y=[];let b=d,w=e[0].start,E=w;function P($,C,L,W){const Y=g?-1:1;if($!==C){for($+=m;t[$%m].skip;)$-=Y;for(;t[C%m].skip;)C+=Y;$%m!==C%m&&(y.push({start:$%m,end:C%m,loop:L,style:W}),b=W,w=C%m)}}for(const $ of e){w=g?w:$.start;let C=t[w%m],L;for(E=w+1;E<=$.end;E++){const W=t[E%m];L=readStyle(o.setContext(createContext(l,{type:"segment",p0:C,p1:W,p0DataIndex:(E-1)%m,p1DataIndex:E%m,datasetIndex:h}))),styleChanged(L,b)&&P(w,E-1,$.loop,b),C=W,b=L}w<E-1&&P(w,E-1,$.loop,b)}return y}function readStyle(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function styleChanged(n,e){return e&&JSON.stringify(n)!==JSON.stringify(e)}/*!
 * Chart.js v3.9.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */class Animator{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,o,l){const d=t.listeners[l],h=t.duration;d.forEach(g=>g({chart:e,initial:t.initial,numSteps:h,currentStep:Math.min(o-t.start,h)}))}_refresh(){this._request||(this._running=!0,this._request=requestAnimFrame.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((o,l)=>{if(!o.running||!o.items.length)return;const d=o.items;let h=d.length-1,g=!1,m;for(;h>=0;--h)m=d[h],m._active?(m._total>o.duration&&(o.duration=m._total),m.tick(e),g=!0):(d[h]=d[d.length-1],d.pop());g&&(l.draw(),this._notify(l,o,e,"progress")),d.length||(o.running=!1,this._notify(l,o,e,"complete"),o.initial=!1),t+=d.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let o=t.get(e);return o||(o={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,o)),o}listen(e,t,o){this._getAnims(e).listeners[t].push(o)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((o,l)=>Math.max(o,l._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const o=t.items;let l=o.length-1;for(;l>=0;--l)o[l].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var animator=new Animator;const transparent="transparent",interpolators={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const o=color(n||transparent),l=o.valid&&color(e||transparent);return l&&l.valid?l.mix(o,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class Animation{constructor(e,t,o,l){const d=t[o];l=resolve([e.to,l,d,e.from]);const h=resolve([e.from,d,l]);this._active=!0,this._fn=e.fn||interpolators[e.type||typeof h],this._easing=effects[e.easing]||effects.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=o,this._from=h,this._to=l,this._promises=void 0}active(){return this._active}update(e,t,o){if(this._active){this._notify(!1);const l=this._target[this._prop],d=o-this._start,h=this._duration-d;this._start=o,this._duration=Math.floor(Math.max(h,e.duration)),this._total+=d,this._loop=!!e.loop,this._to=resolve([e.to,t,l,e.from]),this._from=resolve([e.from,l,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,o=this._duration,l=this._prop,d=this._from,h=this._loop,g=this._to;let m;if(this._active=d!==g&&(h||t<o),!this._active){this._target[l]=g,this._notify(!0);return}if(t<0){this._target[l]=d;return}m=t/o%2,m=h&&m>1?2-m:m,m=this._easing(Math.min(1,Math.max(0,m))),this._target[l]=this._fn(d,g,m)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,o)=>{e.push({res:t,rej:o})})}_notify(e){const t=e?"res":"rej",o=this._promises||[];for(let l=0;l<o.length;l++)o[l][t]()}}const numbers=["x","y","borderWidth","radius","tension"],colors=["color","borderColor","backgroundColor"];defaults.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const animationOptions=Object.keys(defaults.animation);defaults.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:n=>n!=="onProgress"&&n!=="onComplete"&&n!=="fn"});defaults.set("animations",{colors:{type:"color",properties:colors},numbers:{type:"number",properties:numbers}});defaults.describe("animations",{_fallback:"animation"});defaults.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:n=>n|0}}}});class Animations{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!isObject(e))return;const t=this._properties;Object.getOwnPropertyNames(e).forEach(o=>{const l=e[o];if(!isObject(l))return;const d={};for(const h of animationOptions)d[h]=l[h];(isArray(l.properties)&&l.properties||[o]).forEach(h=>{(h===o||!t.has(h))&&t.set(h,d)})})}_animateOptions(e,t){const o=t.options,l=resolveTargetOptions(e,o);if(!l)return[];const d=this._createAnimations(l,o);return o.$shared&&awaitAll(e.options.$animations,o).then(()=>{e.options=o},()=>{}),d}_createAnimations(e,t){const o=this._properties,l=[],d=e.$animations||(e.$animations={}),h=Object.keys(t),g=Date.now();let m;for(m=h.length-1;m>=0;--m){const y=h[m];if(y.charAt(0)==="$")continue;if(y==="options"){l.push(...this._animateOptions(e,t));continue}const b=t[y];let w=d[y];const E=o.get(y);if(w)if(E&&w.active()){w.update(E,b,g);continue}else w.cancel();if(!E||!E.duration){e[y]=b;continue}d[y]=w=new Animation(E,e,y,b),l.push(w)}return l}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const o=this._createAnimations(e,t);if(o.length)return animator.add(this._chart,o),!0}}function awaitAll(n,e){const t=[],o=Object.keys(e);for(let l=0;l<o.length;l++){const d=n[o[l]];d&&d.active()&&t.push(d.wait())}return Promise.all(t)}function resolveTargetOptions(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function scaleClip(n,e){const t=n&&n.options||{},o=t.reverse,l=t.min===void 0?e:0,d=t.max===void 0?e:0;return{start:o?d:l,end:o?l:d}}function defaultClip(n,e,t){if(t===!1)return!1;const o=scaleClip(n,t),l=scaleClip(e,t);return{top:l.end,right:o.end,bottom:l.start,left:o.start}}function toClip(n){let e,t,o,l;return isObject(n)?(e=n.top,t=n.right,o=n.bottom,l=n.left):e=t=o=l=n,{top:e,right:t,bottom:o,left:l,disabled:n===!1}}function getSortedDatasetIndices(n,e){const t=[],o=n._getSortedDatasetMetas(e);let l,d;for(l=0,d=o.length;l<d;++l)t.push(o[l].index);return t}function applyStack(n,e,t,o={}){const l=n.keys,d=o.mode==="single";let h,g,m,y;if(e!==null){for(h=0,g=l.length;h<g;++h){if(m=+l[h],m===t){if(o.all)continue;break}y=n.values[m],isNumberFinite(y)&&(d||e===0||sign(e)===sign(y))&&(e+=y)}return e}}function convertObjectDataToArray(n){const e=Object.keys(n),t=new Array(e.length);let o,l,d;for(o=0,l=e.length;o<l;++o)d=e[o],t[o]={x:d,y:n[d]};return t}function isStacked(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function getStackKey(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function getUserBounds(n){const{min:e,max:t,minDefined:o,maxDefined:l}=n.getUserBounds();return{min:o?e:Number.NEGATIVE_INFINITY,max:l?t:Number.POSITIVE_INFINITY}}function getOrCreateStack(n,e,t){const o=n[e]||(n[e]={});return o[t]||(o[t]={})}function getLastIndexInStack(n,e,t,o){for(const l of e.getMatchingVisibleMetas(o).reverse()){const d=n[l.index];if(t&&d>0||!t&&d<0)return l.index}return null}function updateStacks(n,e){const{chart:t,_cachedMeta:o}=n,l=t._stacks||(t._stacks={}),{iScale:d,vScale:h,index:g}=o,m=d.axis,y=h.axis,b=getStackKey(d,h,o),w=e.length;let E;for(let P=0;P<w;++P){const $=e[P],{[m]:C,[y]:L}=$,W=$._stacks||($._stacks={});E=W[y]=getOrCreateStack(l,b,C),E[g]=L,E._top=getLastIndexInStack(E,h,!0,o.type),E._bottom=getLastIndexInStack(E,h,!1,o.type)}}function getFirstScaleId(n,e){const t=n.scales;return Object.keys(t).filter(o=>t[o].axis===e).shift()}function createDatasetContext(n,e){return createContext(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function createDataContext(n,e,t){return createContext(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function clearStacks(n,e){const t=n.controller.index,o=n.vScale&&n.vScale.axis;if(o){e=e||n._parsed;for(const l of e){const d=l._stacks;if(!d||d[o]===void 0||d[o][t]===void 0)return;delete d[o][t]}}}const isDirectUpdateMode=n=>n==="reset"||n==="none",cloneIfNotShared=(n,e)=>e?n:Object.assign({},n),createStack=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:getSortedDatasetIndices(t,!0),values:null};class DatasetController{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=isStacked(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&clearStacks(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,o=this.getDataset(),l=(w,E,P,$)=>w==="x"?E:w==="r"?$:P,d=t.xAxisID=valueOrDefault(o.xAxisID,getFirstScaleId(e,"x")),h=t.yAxisID=valueOrDefault(o.yAxisID,getFirstScaleId(e,"y")),g=t.rAxisID=valueOrDefault(o.rAxisID,getFirstScaleId(e,"r")),m=t.indexAxis,y=t.iAxisID=l(m,d,h,g),b=t.vAxisID=l(m,h,d,g);t.xScale=this.getScaleForId(d),t.yScale=this.getScaleForId(h),t.rScale=this.getScaleForId(g),t.iScale=this.getScaleForId(y),t.vScale=this.getScaleForId(b)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&unlistenArrayEvents(this._data,this),e._stacked&&clearStacks(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),o=this._data;if(isObject(t))this._data=convertObjectDataToArray(t);else if(o!==t){if(o){unlistenArrayEvents(o,this);const l=this._cachedMeta;clearStacks(l),l._parsed=[]}t&&Object.isExtensible(t)&&listenArrayEvents(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,o=this.getDataset();let l=!1;this._dataCheck();const d=t._stacked;t._stacked=isStacked(t.vScale,t),t.stack!==o.stack&&(l=!0,clearStacks(t),t.stack=o.stack),this._resyncElements(e),(l||d!==t._stacked)&&updateStacks(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),o=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(o,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:o,_data:l}=this,{iScale:d,_stacked:h}=o,g=d.axis;let m=e===0&&t===l.length?!0:o._sorted,y=e>0&&o._parsed[e-1],b,w,E;if(this._parsing===!1)o._parsed=l,o._sorted=!0,E=l;else{isArray(l[e])?E=this.parseArrayData(o,l,e,t):isObject(l[e])?E=this.parseObjectData(o,l,e,t):E=this.parsePrimitiveData(o,l,e,t);const P=()=>w[g]===null||y&&w[g]<y[g];for(b=0;b<t;++b)o._parsed[b+e]=w=E[b],m&&(P()&&(m=!1),y=w);o._sorted=m}h&&updateStacks(this,E)}parsePrimitiveData(e,t,o,l){const{iScale:d,vScale:h}=e,g=d.axis,m=h.axis,y=d.getLabels(),b=d===h,w=new Array(l);let E,P,$;for(E=0,P=l;E<P;++E)$=E+o,w[E]={[g]:b||d.parse(y[$],$),[m]:h.parse(t[$],$)};return w}parseArrayData(e,t,o,l){const{xScale:d,yScale:h}=e,g=new Array(l);let m,y,b,w;for(m=0,y=l;m<y;++m)b=m+o,w=t[b],g[m]={x:d.parse(w[0],b),y:h.parse(w[1],b)};return g}parseObjectData(e,t,o,l){const{xScale:d,yScale:h}=e,{xAxisKey:g="x",yAxisKey:m="y"}=this._parsing,y=new Array(l);let b,w,E,P;for(b=0,w=l;b<w;++b)E=b+o,P=t[E],y[b]={x:d.parse(resolveObjectKey(P,g),E),y:h.parse(resolveObjectKey(P,m),E)};return y}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,o){const l=this.chart,d=this._cachedMeta,h=t[e.axis],g={keys:getSortedDatasetIndices(l,!0),values:t._stacks[e.axis]};return applyStack(g,h,d.index,{mode:o})}updateRangeFromParsed(e,t,o,l){const d=o[t.axis];let h=d===null?NaN:d;const g=l&&o._stacks[t.axis];l&&g&&(l.values=g,h=applyStack(l,d,this._cachedMeta.index)),e.min=Math.min(e.min,h),e.max=Math.max(e.max,h)}getMinMax(e,t){const o=this._cachedMeta,l=o._parsed,d=o._sorted&&e===o.iScale,h=l.length,g=this._getOtherScale(e),m=createStack(t,o,this.chart),y={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:b,max:w}=getUserBounds(g);let E,P;function $(){P=l[E];const C=P[g.axis];return!isNumberFinite(P[e.axis])||b>C||w<C}for(E=0;E<h&&!(!$()&&(this.updateRangeFromParsed(y,e,P,m),d));++E);if(d){for(E=h-1;E>=0;--E)if(!$()){this.updateRangeFromParsed(y,e,P,m);break}}return y}getAllParsedValues(e){const t=this._cachedMeta._parsed,o=[];let l,d,h;for(l=0,d=t.length;l<d;++l)h=t[l][e.axis],isNumberFinite(h)&&o.push(h);return o}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,o=t.iScale,l=t.vScale,d=this.getParsed(e);return{label:o?""+o.getLabelForValue(d[o.axis]):"",value:l?""+l.getLabelForValue(d[l.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=toClip(valueOrDefault(this.options.clip,defaultClip(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,o=this._cachedMeta,l=o.data||[],d=t.chartArea,h=[],g=this._drawStart||0,m=this._drawCount||l.length-g,y=this.options.drawActiveElementsOnTop;let b;for(o.dataset&&o.dataset.draw(e,d,g,m),b=g;b<g+m;++b){const w=l[b];w.hidden||(w.active&&y?h.push(w):w.draw(e,d))}for(b=0;b<h.length;++b)h[b].draw(e,d)}getStyle(e,t){const o=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(o):this.resolveDataElementOptions(e||0,o)}getContext(e,t,o){const l=this.getDataset();let d;if(e>=0&&e<this._cachedMeta.data.length){const h=this._cachedMeta.data[e];d=h.$context||(h.$context=createDataContext(this.getContext(),e,h)),d.parsed=this.getParsed(e),d.raw=l.data[e],d.index=d.dataIndex=e}else d=this.$context||(this.$context=createDatasetContext(this.chart.getContext(),this.index)),d.dataset=l,d.index=d.datasetIndex=this.index;return d.active=!!t,d.mode=o,d}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",o){const l=t==="active",d=this._cachedDataOpts,h=e+"-"+t,g=d[h],m=this.enableOptionSharing&&defined(o);if(g)return cloneIfNotShared(g,m);const y=this.chart.config,b=y.datasetElementScopeKeys(this._type,e),w=l?[`${e}Hover`,"hover",e,""]:[e,""],E=y.getOptionScopes(this.getDataset(),b),P=Object.keys(defaults.elements[e]),$=()=>this.getContext(o,l),C=y.resolveNamedOptions(E,P,$,w);return C.$shared&&(C.$shared=m,d[h]=Object.freeze(cloneIfNotShared(C,m))),C}_resolveAnimations(e,t,o){const l=this.chart,d=this._cachedDataOpts,h=`animation-${t}`,g=d[h];if(g)return g;let m;if(l.options.animation!==!1){const b=this.chart.config,w=b.datasetAnimationScopeKeys(this._type,t),E=b.getOptionScopes(this.getDataset(),w);m=b.createResolver(E,this.getContext(e,o,t))}const y=new Animations(l,m&&m.animations);return m&&m._cacheable&&(d[h]=Object.freeze(y)),y}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||isDirectUpdateMode(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const o=this.resolveDataElementOptions(e,t),l=this._sharedOptions,d=this.getSharedOptions(o),h=this.includeOptions(t,d)||d!==l;return this.updateSharedOptions(d,t,o),{sharedOptions:d,includeOptions:h}}updateElement(e,t,o,l){isDirectUpdateMode(l)?Object.assign(e,o):this._resolveAnimations(t,l).update(e,o)}updateSharedOptions(e,t,o){e&&!isDirectUpdateMode(t)&&this._resolveAnimations(void 0,t).update(e,o)}_setStyle(e,t,o,l){e.active=l;const d=this.getStyle(t,l);this._resolveAnimations(t,o,l).update(e,{options:!l&&this.getSharedOptions(d)||d})}removeHoverStyle(e,t,o){this._setStyle(e,o,"active",!1)}setHoverStyle(e,t,o){this._setStyle(e,o,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,o=this._cachedMeta.data;for(const[g,m,y]of this._syncList)this[g](m,y);this._syncList=[];const l=o.length,d=t.length,h=Math.min(d,l);h&&this.parse(0,h),d>l?this._insertElements(l,d-l,e):d<l&&this._removeElements(d,l-d)}_insertElements(e,t,o=!0){const l=this._cachedMeta,d=l.data,h=e+t;let g;const m=y=>{for(y.length+=t,g=y.length-1;g>=h;g--)y[g]=y[g-t]};for(m(d),g=e;g<h;++g)d[g]=new this.dataElementType;this._parsing&&m(l._parsed),this.parse(e,t),o&&this.updateElements(d,e,t,"reset")}updateElements(e,t,o,l){}_removeElements(e,t){const o=this._cachedMeta;if(this._parsing){const l=o._parsed.splice(e,t);o._stacked&&clearStacks(o,l)}o.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,o,l]=e;this[t](o,l)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const o=arguments.length-2;o&&this._sync(["_insertElements",e,o])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}DatasetController.defaults={};DatasetController.prototype.datasetElementType=null;DatasetController.prototype.dataElementType=null;function getAllScaleValues(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let o=[];for(let l=0,d=t.length;l<d;l++)o=o.concat(t[l].controller.getAllParsedValues(n));n._cache.$bar=_arrayUnique(o.sort((l,d)=>l-d))}return n._cache.$bar}function computeMinSampleSize(n){const e=n.iScale,t=getAllScaleValues(e,n.type);let o=e._length,l,d,h,g;const m=()=>{h===32767||h===-32768||(defined(g)&&(o=Math.min(o,Math.abs(h-g)||o)),g=h)};for(l=0,d=t.length;l<d;++l)h=e.getPixelForValue(t[l]),m();for(g=void 0,l=0,d=e.ticks.length;l<d;++l)h=e.getPixelForTick(l),m();return o}function computeFitCategoryTraits(n,e,t,o){const l=t.barThickness;let d,h;return isNullOrUndef(l)?(d=e.min*t.categoryPercentage,h=t.barPercentage):(d=l*o,h=1),{chunk:d/o,ratio:h,start:e.pixels[n]-d/2}}function computeFlexCategoryTraits(n,e,t,o){const l=e.pixels,d=l[n];let h=n>0?l[n-1]:null,g=n<l.length-1?l[n+1]:null;const m=t.categoryPercentage;h===null&&(h=d-(g===null?e.end-e.start:g-d)),g===null&&(g=d+d-h);const y=d-(d-Math.min(h,g))/2*m;return{chunk:Math.abs(g-h)/2*m/o,ratio:t.barPercentage,start:y}}function parseFloatBar(n,e,t,o){const l=t.parse(n[0],o),d=t.parse(n[1],o),h=Math.min(l,d),g=Math.max(l,d);let m=h,y=g;Math.abs(h)>Math.abs(g)&&(m=g,y=h),e[t.axis]=y,e._custom={barStart:m,barEnd:y,start:l,end:d,min:h,max:g}}function parseValue(n,e,t,o){return isArray(n)?parseFloatBar(n,e,t,o):e[t.axis]=t.parse(n,o),e}function parseArrayOrPrimitive(n,e,t,o){const l=n.iScale,d=n.vScale,h=l.getLabels(),g=l===d,m=[];let y,b,w,E;for(y=t,b=t+o;y<b;++y)E=e[y],w={},w[l.axis]=g||l.parse(h[y],y),m.push(parseValue(E,w,d,y));return m}function isFloatBar(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function barSign(n,e,t){return n!==0?sign(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function borderProps(n){let e,t,o,l,d;return n.horizontal?(e=n.base>n.x,t="left",o="right"):(e=n.base<n.y,t="bottom",o="top"),e?(l="end",d="start"):(l="start",d="end"),{start:t,end:o,reverse:e,top:l,bottom:d}}function setBorderSkipped(n,e,t,o){let l=e.borderSkipped;const d={};if(!l){n.borderSkipped=d;return}if(l===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:h,end:g,reverse:m,top:y,bottom:b}=borderProps(n);l==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===o?l=y:(t._bottom||0)===o?l=b:(d[parseEdge(b,h,g,m)]=!0,l=y)),d[parseEdge(l,h,g,m)]=!0,n.borderSkipped=d}function parseEdge(n,e,t,o){return o?(n=swap(n,e,t),n=startEnd(n,t,e)):n=startEnd(n,e,t),n}function swap(n,e,t){return n===e?t:n===t?e:n}function startEnd(n,e,t){return n==="start"?e:n==="end"?t:n}function setInflateAmount(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class BarController extends DatasetController{parsePrimitiveData(e,t,o,l){return parseArrayOrPrimitive(e,t,o,l)}parseArrayData(e,t,o,l){return parseArrayOrPrimitive(e,t,o,l)}parseObjectData(e,t,o,l){const{iScale:d,vScale:h}=e,{xAxisKey:g="x",yAxisKey:m="y"}=this._parsing,y=d.axis==="x"?g:m,b=h.axis==="x"?g:m,w=[];let E,P,$,C;for(E=o,P=o+l;E<P;++E)C=t[E],$={},$[d.axis]=d.parse(resolveObjectKey(C,y),E),w.push(parseValue(resolveObjectKey(C,b),$,h,E));return w}updateRangeFromParsed(e,t,o,l){super.updateRangeFromParsed(e,t,o,l);const d=o._custom;d&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,d.min),e.max=Math.max(e.max,d.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:o,vScale:l}=t,d=this.getParsed(e),h=d._custom,g=isFloatBar(h)?"["+h.start+", "+h.end+"]":""+l.getLabelForValue(d[l.axis]);return{label:""+o.getLabelForValue(d[o.axis]),value:g}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,o,l){const d=l==="reset",{index:h,_cachedMeta:{vScale:g}}=this,m=g.getBasePixel(),y=g.isHorizontal(),b=this._getRuler(),{sharedOptions:w,includeOptions:E}=this._getSharedOptions(t,l);for(let P=t;P<t+o;P++){const $=this.getParsed(P),C=d||isNullOrUndef($[g.axis])?{base:m,head:m}:this._calculateBarValuePixels(P),L=this._calculateBarIndexPixels(P,b),W=($._stacks||{})[g.axis],Y={horizontal:y,base:C.base,enableBorderRadius:!W||isFloatBar($._custom)||h===W._top||h===W._bottom,x:y?C.head:L.center,y:y?L.center:C.head,height:y?L.size:Math.abs(C.size),width:y?Math.abs(C.size):L.size};E&&(Y.options=w||this.resolveDataElementOptions(P,e[P].active?"active":l));const D=Y.options||e[P].options;setBorderSkipped(Y,D,W,h),setInflateAmount(Y,D,b.ratio),this.updateElement(e[P],P,Y,l)}}_getStacks(e,t){const{iScale:o}=this._cachedMeta,l=o.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),d=o.options.stacked,h=[],g=m=>{const y=m.controller.getParsed(t),b=y&&y[m.vScale.axis];if(isNullOrUndef(b)||isNaN(b))return!0};for(const m of l)if(!(t!==void 0&&g(m))&&((d===!1||h.indexOf(m.stack)===-1||d===void 0&&m.stack===void 0)&&h.push(m.stack),m.index===e))break;return h.length||h.push(void 0),h}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,o){const l=this._getStacks(e,o),d=t!==void 0?l.indexOf(t):-1;return d===-1?l.length-1:d}_getRuler(){const e=this.options,t=this._cachedMeta,o=t.iScale,l=[];let d,h;for(d=0,h=t.data.length;d<h;++d)l.push(o.getPixelForValue(this.getParsed(d)[o.axis],d));const g=e.barThickness;return{min:g||computeMinSampleSize(t),pixels:l,start:o._startPixel,end:o._endPixel,stackCount:this._getStackCount(),scale:o,grouped:e.grouped,ratio:g?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:o},options:{base:l,minBarLength:d}}=this,h=l||0,g=this.getParsed(e),m=g._custom,y=isFloatBar(m);let b=g[t.axis],w=0,E=o?this.applyStack(t,g,o):b,P,$;E!==b&&(w=E-b,E=b),y&&(b=m.barStart,E=m.barEnd-m.barStart,b!==0&&sign(b)!==sign(m.barEnd)&&(w=0),w+=b);const C=!isNullOrUndef(l)&&!y?l:w;let L=t.getPixelForValue(C);if(this.chart.getDataVisibility(e)?P=t.getPixelForValue(w+E):P=L,$=P-L,Math.abs($)<d){$=barSign($,t,h)*d,b===h&&(L-=$/2);const W=t.getPixelForDecimal(0),Y=t.getPixelForDecimal(1),D=Math.min(W,Y),k=Math.max(W,Y);L=Math.max(Math.min(L,k),D),P=L+$}if(L===t.getPixelForValue(h)){const W=sign($)*t.getLineWidthForValue(h)/2;L+=W,$-=W}return{size:$,base:L,head:P,center:P+$/2}}_calculateBarIndexPixels(e,t){const o=t.scale,l=this.options,d=l.skipNull,h=valueOrDefault(l.maxBarThickness,1/0);let g,m;if(t.grouped){const y=d?this._getStackCount(e):t.stackCount,b=l.barThickness==="flex"?computeFlexCategoryTraits(e,t,l,y):computeFitCategoryTraits(e,t,l,y),w=this._getStackIndex(this.index,this._cachedMeta.stack,d?e:void 0);g=b.start+b.chunk*w+b.chunk/2,m=Math.min(h,b.chunk*b.ratio)}else g=o.getPixelForValue(this.getParsed(e)[o.axis],e),m=Math.min(h,t.min*t.ratio);return{base:g-m/2,head:g+m/2,center:g,size:m}}draw(){const e=this._cachedMeta,t=e.vScale,o=e.data,l=o.length;let d=0;for(;d<l;++d)this.getParsed(d)[t.axis]!==null&&o[d].draw(this._ctx)}}BarController.id="bar";BarController.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};BarController.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class BubbleController extends DatasetController{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,o,l){const d=super.parsePrimitiveData(e,t,o,l);for(let h=0;h<d.length;h++)d[h]._custom=this.resolveDataElementOptions(h+o).radius;return d}parseArrayData(e,t,o,l){const d=super.parseArrayData(e,t,o,l);for(let h=0;h<d.length;h++){const g=t[o+h];d[h]._custom=valueOrDefault(g[2],this.resolveDataElementOptions(h+o).radius)}return d}parseObjectData(e,t,o,l){const d=super.parseObjectData(e,t,o,l);for(let h=0;h<d.length;h++){const g=t[o+h];d[h]._custom=valueOrDefault(g&&g.r&&+g.r,this.resolveDataElementOptions(h+o).radius)}return d}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let o=e.length-1;o>=0;--o)t=Math.max(t,e[o].size(this.resolveDataElementOptions(o))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,{xScale:o,yScale:l}=t,d=this.getParsed(e),h=o.getLabelForValue(d.x),g=l.getLabelForValue(d.y),m=d._custom;return{label:t.label,value:"("+h+", "+g+(m?", "+m:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,o,l){const d=l==="reset",{iScale:h,vScale:g}=this._cachedMeta,{sharedOptions:m,includeOptions:y}=this._getSharedOptions(t,l),b=h.axis,w=g.axis;for(let E=t;E<t+o;E++){const P=e[E],$=!d&&this.getParsed(E),C={},L=C[b]=d?h.getPixelForDecimal(.5):h.getPixelForValue($[b]),W=C[w]=d?g.getBasePixel():g.getPixelForValue($[w]);C.skip=isNaN(L)||isNaN(W),y&&(C.options=m||this.resolveDataElementOptions(E,P.active?"active":l),d&&(C.options.radius=0)),this.updateElement(P,E,C,l)}}resolveDataElementOptions(e,t){const o=this.getParsed(e);let l=super.resolveDataElementOptions(e,t);l.$shared&&(l=Object.assign({},l,{$shared:!1}));const d=l.radius;return t!=="active"&&(l.radius=0),l.radius+=valueOrDefault(o&&o._custom,d),l}}BubbleController.id="bubble";BubbleController.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};BubbleController.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}};function getRatioAndOffset(n,e,t){let o=1,l=1,d=0,h=0;if(e<TAU){const g=n,m=g+e,y=Math.cos(g),b=Math.sin(g),w=Math.cos(m),E=Math.sin(m),P=(D,k,F)=>_angleBetween(D,g,m,!0)?1:Math.max(k,k*t,F,F*t),$=(D,k,F)=>_angleBetween(D,g,m,!0)?-1:Math.min(k,k*t,F,F*t),C=P(0,y,w),L=P(HALF_PI,b,E),W=$(PI,y,w),Y=$(PI+HALF_PI,b,E);o=(C-W)/2,l=(L-Y)/2,d=-(C+W)/2,h=-(L+Y)/2}return{ratioX:o,ratioY:l,offsetX:d,offsetY:h}}class DoughnutController extends DatasetController{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const o=this.getDataset().data,l=this._cachedMeta;if(this._parsing===!1)l._parsed=o;else{let d=m=>+o[m];if(isObject(o[e])){const{key:m="value"}=this._parsing;d=y=>+resolveObjectKey(o[y],m)}let h,g;for(h=e,g=e+t;h<g;++h)l._parsed[h]=d(h)}}_getRotation(){return toRadians(this.options.rotation-90)}_getCircumference(){return toRadians(this.options.circumference)}_getRotationExtents(){let e=TAU,t=-TAU;for(let o=0;o<this.chart.data.datasets.length;++o)if(this.chart.isDatasetVisible(o)){const l=this.chart.getDatasetMeta(o).controller,d=l._getRotation(),h=l._getCircumference();e=Math.min(e,d),t=Math.max(t,d+h)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:o}=t,l=this._cachedMeta,d=l.data,h=this.getMaxBorderWidth()+this.getMaxOffset(d)+this.options.spacing,g=Math.max((Math.min(o.width,o.height)-h)/2,0),m=Math.min(toPercentage(this.options.cutout,g),1),y=this._getRingWeight(this.index),{circumference:b,rotation:w}=this._getRotationExtents(),{ratioX:E,ratioY:P,offsetX:$,offsetY:C}=getRatioAndOffset(w,b,m),L=(o.width-h)/E,W=(o.height-h)/P,Y=Math.max(Math.min(L,W)/2,0),D=toDimension(this.options.radius,Y),k=Math.max(D*m,0),F=(D-k)/this._getVisibleDatasetWeightTotal();this.offsetX=$*D,this.offsetY=C*D,l.total=this.calculateTotal(),this.outerRadius=D-F*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-F*y,0),this.updateElements(d,0,d.length,e)}_circumference(e,t){const o=this.options,l=this._cachedMeta,d=this._getCircumference();return t&&o.animation.animateRotate||!this.chart.getDataVisibility(e)||l._parsed[e]===null||l.data[e].hidden?0:this.calculateCircumference(l._parsed[e]*d/TAU)}updateElements(e,t,o,l){const d=l==="reset",h=this.chart,g=h.chartArea,y=h.options.animation,b=(g.left+g.right)/2,w=(g.top+g.bottom)/2,E=d&&y.animateScale,P=E?0:this.innerRadius,$=E?0:this.outerRadius,{sharedOptions:C,includeOptions:L}=this._getSharedOptions(t,l);let W=this._getRotation(),Y;for(Y=0;Y<t;++Y)W+=this._circumference(Y,d);for(Y=t;Y<t+o;++Y){const D=this._circumference(Y,d),k=e[Y],F={x:b+this.offsetX,y:w+this.offsetY,startAngle:W,endAngle:W+D,circumference:D,outerRadius:$,innerRadius:P};L&&(F.options=C||this.resolveDataElementOptions(Y,k.active?"active":l)),W+=D,this.updateElement(k,Y,F,l)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let o=0,l;for(l=0;l<t.length;l++){const d=e._parsed[l];d!==null&&!isNaN(d)&&this.chart.getDataVisibility(l)&&!t[l].hidden&&(o+=Math.abs(d))}return o}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?TAU*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,o=this.chart,l=o.data.labels||[],d=formatNumber(t._parsed[e],o.options.locale);return{label:l[e]||"",value:d}}getMaxBorderWidth(e){let t=0;const o=this.chart;let l,d,h,g,m;if(!e){for(l=0,d=o.data.datasets.length;l<d;++l)if(o.isDatasetVisible(l)){h=o.getDatasetMeta(l),e=h.data,g=h.controller;break}}if(!e)return 0;for(l=0,d=e.length;l<d;++l)m=g.resolveDataElementOptions(l),m.borderAlign!=="inner"&&(t=Math.max(t,m.borderWidth||0,m.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let o=0,l=e.length;o<l;++o){const d=this.resolveDataElementOptions(o);t=Math.max(t,d.offset||0,d.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let o=0;o<e;++o)this.chart.isDatasetVisible(o)&&(t+=this._getRingWeight(o));return t}_getRingWeight(e){return Math.max(valueOrDefault(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}DoughnutController.id="doughnut";DoughnutController.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};DoughnutController.descriptors={_scriptable:n=>n!=="spacing",_indexable:n=>n!=="spacing"};DoughnutController.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const e=n.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t}}=n.legend.options;return e.labels.map((o,l)=>{const h=n.getDatasetMeta(0).controller.getStyle(l);return{text:o,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,lineWidth:h.borderWidth,pointStyle:t,hidden:!n.getDataVisibility(l),index:l}})}return[]}},onClick(n,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}},tooltip:{callbacks:{title(){return""},label(n){let e=n.label;const t=": "+n.formattedValue;return isArray(e)?(e=e.slice(),e[0]+=t):e+=t,e}}}}};class LineController extends DatasetController{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:o,data:l=[],_dataset:d}=t,h=this.chart._animationsDisabled;let{start:g,count:m}=_getStartAndCountOfVisiblePoints(t,l,h);this._drawStart=g,this._drawCount=m,_scaleRangesChanged(t)&&(g=0,m=l.length),o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!d._decimated,o.points=l;const y=this.resolveDatasetElementOptions(e);this.options.showLine||(y.borderWidth=0),y.segment=this.options.segment,this.updateElement(o,void 0,{animated:!h,options:y},e),this.updateElements(l,g,m,e)}updateElements(e,t,o,l){const d=l==="reset",{iScale:h,vScale:g,_stacked:m,_dataset:y}=this._cachedMeta,{sharedOptions:b,includeOptions:w}=this._getSharedOptions(t,l),E=h.axis,P=g.axis,{spanGaps:$,segment:C}=this.options,L=isNumber($)?$:Number.POSITIVE_INFINITY,W=this.chart._animationsDisabled||d||l==="none";let Y=t>0&&this.getParsed(t-1);for(let D=t;D<t+o;++D){const k=e[D],F=this.getParsed(D),ce=W?k:{},q=isNullOrUndef(F[P]),te=ce[E]=h.getPixelForValue(F[E],D),Q=ce[P]=d||q?g.getBasePixel():g.getPixelForValue(m?this.applyStack(g,F,m):F[P],D);ce.skip=isNaN(te)||isNaN(Q)||q,ce.stop=D>0&&Math.abs(F[E]-Y[E])>L,C&&(ce.parsed=F,ce.raw=y.data[D]),w&&(ce.options=b||this.resolveDataElementOptions(D,k.active?"active":l)),W||this.updateElement(k,D,ce,l),Y=F}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,o=t.options&&t.options.borderWidth||0,l=e.data||[];if(!l.length)return o;const d=l[0].size(this.resolveDataElementOptions(0)),h=l[l.length-1].size(this.resolveDataElementOptions(l.length-1));return Math.max(o,d,h)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}LineController.id="line";LineController.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};LineController.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class PolarAreaController extends DatasetController{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,o=this.chart,l=o.data.labels||[],d=formatNumber(t._parsed[e].r,o.options.locale);return{label:l[e]||"",value:d}}parseObjectData(e,t,o,l){return _parseObjectDataRadialScale.bind(this)(e,t,o,l)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((o,l)=>{const d=this.getParsed(l).r;!isNaN(d)&&this.chart.getDataVisibility(l)&&(d<t.min&&(t.min=d),d>t.max&&(t.max=d))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,o=e.options,l=Math.min(t.right-t.left,t.bottom-t.top),d=Math.max(l/2,0),h=Math.max(o.cutoutPercentage?d/100*o.cutoutPercentage:1,0),g=(d-h)/e.getVisibleDatasetCount();this.outerRadius=d-g*this.index,this.innerRadius=this.outerRadius-g}updateElements(e,t,o,l){const d=l==="reset",h=this.chart,m=h.options.animation,y=this._cachedMeta.rScale,b=y.xCenter,w=y.yCenter,E=y.getIndexAngle(0)-.5*PI;let P=E,$;const C=360/this.countVisibleElements();for($=0;$<t;++$)P+=this._computeAngle($,l,C);for($=t;$<t+o;$++){const L=e[$];let W=P,Y=P+this._computeAngle($,l,C),D=h.getDataVisibility($)?y.getDistanceFromCenterForValue(this.getParsed($).r):0;P=Y,d&&(m.animateScale&&(D=0),m.animateRotate&&(W=Y=E));const k={x:b,y:w,innerRadius:0,outerRadius:D,startAngle:W,endAngle:Y,options:this.resolveDataElementOptions($,L.active?"active":l)};this.updateElement(L,$,k,l)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((o,l)=>{!isNaN(this.getParsed(l).r)&&this.chart.getDataVisibility(l)&&t++}),t}_computeAngle(e,t,o){return this.chart.getDataVisibility(e)?toRadians(this.resolveDataElementOptions(e,t).angle||o):0}}PolarAreaController.id="polarArea";PolarAreaController.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};PolarAreaController.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const e=n.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t}}=n.legend.options;return e.labels.map((o,l)=>{const h=n.getDatasetMeta(0).controller.getStyle(l);return{text:o,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,lineWidth:h.borderWidth,pointStyle:t,hidden:!n.getDataVisibility(l),index:l}})}return[]}},onClick(n,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}},tooltip:{callbacks:{title(){return""},label(n){return n.chart.data.labels[n.dataIndex]+": "+n.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class PieController extends DoughnutController{}PieController.id="pie";PieController.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class RadarController extends DatasetController{getLabelAndValue(e){const t=this._cachedMeta.vScale,o=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(o[t.axis])}}parseObjectData(e,t,o,l){return _parseObjectDataRadialScale.bind(this)(e,t,o,l)}update(e){const t=this._cachedMeta,o=t.dataset,l=t.data||[],d=t.iScale.getLabels();if(o.points=l,e!=="resize"){const h=this.resolveDatasetElementOptions(e);this.options.showLine||(h.borderWidth=0);const g={_loop:!0,_fullLoop:d.length===l.length,options:h};this.updateElement(o,void 0,g,e)}this.updateElements(l,0,l.length,e)}updateElements(e,t,o,l){const d=this._cachedMeta.rScale,h=l==="reset";for(let g=t;g<t+o;g++){const m=e[g],y=this.resolveDataElementOptions(g,m.active?"active":l),b=d.getPointPositionForValue(g,this.getParsed(g).r),w=h?d.xCenter:b.x,E=h?d.yCenter:b.y,P={x:w,y:E,angle:b.angle,skip:isNaN(w)||isNaN(E),options:y};this.updateElement(m,g,P,l)}}}RadarController.id="radar";RadarController.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};RadarController.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class Element{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:o}=this.getProps(["x","y"],e);return{x:t,y:o}}hasValue(){return isNumber(this.x)&&isNumber(this.y)}getProps(e,t){const o=this.$animations;if(!t||!o)return this;const l={};return e.forEach(d=>{l[d]=o[d]&&o[d].active()?o[d]._to:this[d]}),l}}Element.defaults={};Element.defaultRoutes=void 0;const formatters={values(n){return isArray(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const o=this.chart.options.locale;let l,d=n;if(t.length>1){const y=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(y<1e-4||y>1e15)&&(l="scientific"),d=calculateDelta(n,t)}const h=log10(Math.abs(d)),g=Math.max(Math.min(-1*Math.floor(h),20),0),m={notation:l,minimumFractionDigits:g,maximumFractionDigits:g};return Object.assign(m,this.options.ticks.format),formatNumber(n,o,m)},logarithmic(n,e,t){if(n===0)return"0";const o=n/Math.pow(10,Math.floor(log10(n)));return o===1||o===2||o===5?formatters.numeric.call(this,n,e,t):""}};function calculateDelta(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var Ticks={formatters};defaults.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(n,e)=>e.lineWidth,tickColor:(n,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});defaults.route("scale.ticks","color","","color");defaults.route("scale.grid","color","","borderColor");defaults.route("scale.grid","borderColor","","borderColor");defaults.route("scale.title","color","","color");defaults.describe("scale",{_fallback:!1,_scriptable:n=>!n.startsWith("before")&&!n.startsWith("after")&&n!=="callback"&&n!=="parser",_indexable:n=>n!=="borderDash"&&n!=="tickBorderDash"});defaults.describe("scales",{_fallback:"scale"});defaults.describe("scale.ticks",{_scriptable:n=>n!=="backdropPadding"&&n!=="callback",_indexable:n=>n!=="backdropPadding"});function autoSkip(n,e){const t=n.options.ticks,o=t.maxTicksLimit||determineMaxTicks(n),l=t.major.enabled?getMajorIndices(e):[],d=l.length,h=l[0],g=l[d-1],m=[];if(d>o)return skipMajors(e,m,l,d/o),m;const y=calculateSpacing(l,e,o);if(d>0){let b,w;const E=d>1?Math.round((g-h)/(d-1)):null;for(skip(e,m,y,isNullOrUndef(E)?0:h-E,h),b=0,w=d-1;b<w;b++)skip(e,m,y,l[b],l[b+1]);return skip(e,m,y,g,isNullOrUndef(E)?e.length:g+E),m}return skip(e,m,y),m}function determineMaxTicks(n){const e=n.options.offset,t=n._tickSize(),o=n._length/t+(e?0:1),l=n._maxLength/t;return Math.floor(Math.min(o,l))}function calculateSpacing(n,e,t){const o=getEvenSpacing(n),l=e.length/t;if(!o)return Math.max(l,1);const d=_factorize(o);for(let h=0,g=d.length-1;h<g;h++){const m=d[h];if(m>l)return m}return Math.max(l,1)}function getMajorIndices(n){const e=[];let t,o;for(t=0,o=n.length;t<o;t++)n[t].major&&e.push(t);return e}function skipMajors(n,e,t,o){let l=0,d=t[0],h;for(o=Math.ceil(o),h=0;h<n.length;h++)h===d&&(e.push(n[h]),l++,d=t[l*o])}function skip(n,e,t,o,l){const d=valueOrDefault(o,0),h=Math.min(valueOrDefault(l,n.length),n.length);let g=0,m,y,b;for(t=Math.ceil(t),l&&(m=l-o,t=m/Math.floor(m/t)),b=d;b<0;)g++,b=Math.round(d+g*t);for(y=Math.max(d,0);y<h;y++)y===b&&(e.push(n[y]),g++,b=Math.round(d+g*t))}function getEvenSpacing(n){const e=n.length;let t,o;if(e<2)return!1;for(o=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==o)return!1;return o}const reverseAlign=n=>n==="left"?"right":n==="right"?"left":n,offsetFromEdge=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t;function sample(n,e){const t=[],o=n.length/e,l=n.length;let d=0;for(;d<l;d+=o)t.push(n[Math.floor(d)]);return t}function getPixelForGridLine(n,e,t){const o=n.ticks.length,l=Math.min(e,o-1),d=n._startPixel,h=n._endPixel,g=1e-6;let m=n.getPixelForTick(l),y;if(!(t&&(o===1?y=Math.max(m-d,h-m):e===0?y=(n.getPixelForTick(1)-m)/2:y=(m-n.getPixelForTick(l-1))/2,m+=l<e?y:-y,m<d-g||m>h+g)))return m}function garbageCollect(n,e){each(n,t=>{const o=t.gc,l=o.length/2;let d;if(l>e){for(d=0;d<l;++d)delete t.data[o[d]];o.splice(0,l)}})}function getTickMarkLength(n){return n.drawTicks?n.tickLength:0}function getTitleHeight(n,e){if(!n.display)return 0;const t=toFont(n.font,e),o=toPadding(n.padding);return(isArray(n.text)?n.text.length:1)*t.lineHeight+o.height}function createScaleContext(n,e){return createContext(n,{scale:e,type:"scale"})}function createTickContext(n,e,t){return createContext(n,{tick:t,index:e,type:"tick"})}function titleAlign(n,e,t){let o=_toLeftRightCenter(n);return(t&&e!=="right"||!t&&e==="right")&&(o=reverseAlign(o)),o}function titleArgs(n,e,t,o){const{top:l,left:d,bottom:h,right:g,chart:m}=n,{chartArea:y,scales:b}=m;let w=0,E,P,$;const C=h-l,L=g-d;if(n.isHorizontal()){if(P=_alignStartEnd(o,d,g),isObject(t)){const W=Object.keys(t)[0],Y=t[W];$=b[W].getPixelForValue(Y)+C-e}else t==="center"?$=(y.bottom+y.top)/2+C-e:$=offsetFromEdge(n,t,e);E=g-d}else{if(isObject(t)){const W=Object.keys(t)[0],Y=t[W];P=b[W].getPixelForValue(Y)-L+e}else t==="center"?P=(y.left+y.right)/2-L+e:P=offsetFromEdge(n,t,e);$=_alignStartEnd(o,h,l),w=t==="left"?-HALF_PI:HALF_PI}return{titleX:P,titleY:$,maxWidth:E,rotation:w}}class Scale extends Element{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:o,_suggestedMax:l}=this;return e=finiteOrDefault(e,Number.POSITIVE_INFINITY),t=finiteOrDefault(t,Number.NEGATIVE_INFINITY),o=finiteOrDefault(o,Number.POSITIVE_INFINITY),l=finiteOrDefault(l,Number.NEGATIVE_INFINITY),{min:finiteOrDefault(e,o),max:finiteOrDefault(t,l),minDefined:isNumberFinite(e),maxDefined:isNumberFinite(t)}}getMinMax(e){let{min:t,max:o,minDefined:l,maxDefined:d}=this.getUserBounds(),h;if(l&&d)return{min:t,max:o};const g=this.getMatchingVisibleMetas();for(let m=0,y=g.length;m<y;++m)h=g[m].controller.getMinMax(this,e),l||(t=Math.min(t,h.min)),d||(o=Math.max(o,h.max));return t=d&&t>o?o:t,o=l&&t>o?t:o,{min:finiteOrDefault(t,finiteOrDefault(o,t)),max:finiteOrDefault(o,finiteOrDefault(t,o))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){callback(this.options.beforeUpdate,[this])}update(e,t,o){const{beginAtZero:l,grace:d,ticks:h}=this.options,g=h.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=o=Object.assign({left:0,right:0,top:0,bottom:0},o),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+o.left+o.right:this.height+o.top+o.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_addGrace(this,d,l),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const m=g<this.ticks.length;this._convertTicksToLabels(m?sample(this.ticks,g):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),h.display&&(h.autoSkip||h.source==="auto")&&(this.ticks=autoSkip(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),m&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,o;this.isHorizontal()?(t=this.left,o=this.right):(t=this.top,o=this.bottom,e=!e),this._startPixel=t,this._endPixel=o,this._reversePixels=e,this._length=o-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){callback(this.options.afterUpdate,[this])}beforeSetDimensions(){callback(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){callback(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),callback(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){callback(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let o,l,d;for(o=0,l=e.length;o<l;o++)d=e[o],d.label=callback(t.callback,[d.value,o,e],this)}afterTickToLabelConversion(){callback(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){callback(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,o=this.ticks.length,l=t.minRotation||0,d=t.maxRotation;let h=l,g,m,y;if(!this._isVisible()||!t.display||l>=d||o<=1||!this.isHorizontal()){this.labelRotation=l;return}const b=this._getLabelSizes(),w=b.widest.width,E=b.highest.height,P=_limitValue(this.chart.width-w,0,this.maxWidth);g=e.offset?this.maxWidth/o:P/(o-1),w+6>g&&(g=P/(o-(e.offset?.5:1)),m=this.maxHeight-getTickMarkLength(e.grid)-t.padding-getTitleHeight(e.title,this.chart.options.font),y=Math.sqrt(w*w+E*E),h=toDegrees(Math.min(Math.asin(_limitValue((b.highest.height+6)/g,-1,1)),Math.asin(_limitValue(m/y,-1,1))-Math.asin(_limitValue(E/y,-1,1)))),h=Math.max(l,Math.min(d,h))),this.labelRotation=h}afterCalculateLabelRotation(){callback(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){callback(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:o,title:l,grid:d}}=this,h=this._isVisible(),g=this.isHorizontal();if(h){const m=getTitleHeight(l,t.options.font);if(g?(e.width=this.maxWidth,e.height=getTickMarkLength(d)+m):(e.height=this.maxHeight,e.width=getTickMarkLength(d)+m),o.display&&this.ticks.length){const{first:y,last:b,widest:w,highest:E}=this._getLabelSizes(),P=o.padding*2,$=toRadians(this.labelRotation),C=Math.cos($),L=Math.sin($);if(g){const W=o.mirror?0:L*w.width+C*E.height;e.height=Math.min(this.maxHeight,e.height+W+P)}else{const W=o.mirror?0:C*w.width+L*E.height;e.width=Math.min(this.maxWidth,e.width+W+P)}this._calculatePadding(y,b,L,C)}}this._handleMargins(),g?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,o,l){const{ticks:{align:d,padding:h},position:g}=this.options,m=this.labelRotation!==0,y=g!=="top"&&this.axis==="x";if(this.isHorizontal()){const b=this.getPixelForTick(0)-this.left,w=this.right-this.getPixelForTick(this.ticks.length-1);let E=0,P=0;m?y?(E=l*e.width,P=o*t.height):(E=o*e.height,P=l*t.width):d==="start"?P=t.width:d==="end"?E=e.width:d!=="inner"&&(E=e.width/2,P=t.width/2),this.paddingLeft=Math.max((E-b+h)*this.width/(this.width-b),0),this.paddingRight=Math.max((P-w+h)*this.width/(this.width-w),0)}else{let b=t.height/2,w=e.height/2;d==="start"?(b=0,w=e.height):d==="end"&&(b=t.height,w=0),this.paddingTop=b+h,this.paddingBottom=w+h}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){callback(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,o;for(t=0,o=e.length;t<o;t++)isNullOrUndef(e[t].label)&&(e.splice(t,1),o--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let o=this.ticks;t<o.length&&(o=sample(o,t)),this._labelSizes=e=this._computeLabelSizes(o,o.length)}return e}_computeLabelSizes(e,t){const{ctx:o,_longestTextCache:l}=this,d=[],h=[];let g=0,m=0,y,b,w,E,P,$,C,L,W,Y,D;for(y=0;y<t;++y){if(E=e[y].label,P=this._resolveTickFontOptions(y),o.font=$=P.string,C=l[$]=l[$]||{data:{},gc:[]},L=P.lineHeight,W=Y=0,!isNullOrUndef(E)&&!isArray(E))W=_measureText(o,C.data,C.gc,W,E),Y=L;else if(isArray(E))for(b=0,w=E.length;b<w;++b)D=E[b],!isNullOrUndef(D)&&!isArray(D)&&(W=_measureText(o,C.data,C.gc,W,D),Y+=L);d.push(W),h.push(Y),g=Math.max(W,g),m=Math.max(Y,m)}garbageCollect(l,t);const k=d.indexOf(g),F=h.indexOf(m),ce=q=>({width:d[q]||0,height:h[q]||0});return{first:ce(0),last:ce(t-1),widest:ce(k),highest:ce(F),widths:d,heights:h}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return _int16Range(this._alignToPixels?_alignPixel(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const o=t[e];return o.$context||(o.$context=createTickContext(this.getContext(),e,o))}return this.$context||(this.$context=createScaleContext(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=toRadians(this.labelRotation),o=Math.abs(Math.cos(t)),l=Math.abs(Math.sin(t)),d=this._getLabelSizes(),h=e.autoSkipPadding||0,g=d?d.widest.width+h:0,m=d?d.highest.height+h:0;return this.isHorizontal()?m*o>g*l?g/o:m/l:m*l<g*o?m/o:g/l}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,o=this.chart,l=this.options,{grid:d,position:h}=l,g=d.offset,m=this.isHorizontal(),b=this.ticks.length+(g?1:0),w=getTickMarkLength(d),E=[],P=d.setContext(this.getContext()),$=P.drawBorder?P.borderWidth:0,C=$/2,L=function(B){return _alignPixel(o,B,$)};let W,Y,D,k,F,ce,q,te,Q,ie,J,x;if(h==="top")W=L(this.bottom),ce=this.bottom-w,te=W-C,ie=L(e.top)+C,x=e.bottom;else if(h==="bottom")W=L(this.top),ie=e.top,x=L(e.bottom)-C,ce=W+C,te=this.top+w;else if(h==="left")W=L(this.right),F=this.right-w,q=W-C,Q=L(e.left)+C,J=e.right;else if(h==="right")W=L(this.left),Q=e.left,J=L(e.right)-C,F=W+C,q=this.left+w;else if(t==="x"){if(h==="center")W=L((e.top+e.bottom)/2+.5);else if(isObject(h)){const B=Object.keys(h)[0],ee=h[B];W=L(this.chart.scales[B].getPixelForValue(ee))}ie=e.top,x=e.bottom,ce=W+C,te=ce+w}else if(t==="y"){if(h==="center")W=L((e.left+e.right)/2);else if(isObject(h)){const B=Object.keys(h)[0],ee=h[B];W=L(this.chart.scales[B].getPixelForValue(ee))}F=W-C,q=F-w,Q=e.left,J=e.right}const I=valueOrDefault(l.ticks.maxTicksLimit,b),R=Math.max(1,Math.ceil(b/I));for(Y=0;Y<b;Y+=R){const B=d.setContext(this.getContext(Y)),ee=B.lineWidth,ne=B.color,z=B.borderDash||[],X=B.borderDashOffset,A=B.tickWidth,Z=B.tickColor,$e=B.tickBorderDash||[],Ne=B.tickBorderDashOffset;D=getPixelForGridLine(this,Y,g),D!==void 0&&(k=_alignPixel(o,D,ee),m?F=q=Q=J=k:ce=te=ie=x=k,E.push({tx1:F,ty1:ce,tx2:q,ty2:te,x1:Q,y1:ie,x2:J,y2:x,width:ee,color:ne,borderDash:z,borderDashOffset:X,tickWidth:A,tickColor:Z,tickBorderDash:$e,tickBorderDashOffset:Ne}))}return this._ticksLength=b,this._borderValue=W,E}_computeLabelItems(e){const t=this.axis,o=this.options,{position:l,ticks:d}=o,h=this.isHorizontal(),g=this.ticks,{align:m,crossAlign:y,padding:b,mirror:w}=d,E=getTickMarkLength(o.grid),P=E+b,$=w?-b:P,C=-toRadians(this.labelRotation),L=[];let W,Y,D,k,F,ce,q,te,Q,ie,J,x,I="middle";if(l==="top")ce=this.bottom-$,q=this._getXAxisLabelAlignment();else if(l==="bottom")ce=this.top+$,q=this._getXAxisLabelAlignment();else if(l==="left"){const B=this._getYAxisLabelAlignment(E);q=B.textAlign,F=B.x}else if(l==="right"){const B=this._getYAxisLabelAlignment(E);q=B.textAlign,F=B.x}else if(t==="x"){if(l==="center")ce=(e.top+e.bottom)/2+P;else if(isObject(l)){const B=Object.keys(l)[0],ee=l[B];ce=this.chart.scales[B].getPixelForValue(ee)+P}q=this._getXAxisLabelAlignment()}else if(t==="y"){if(l==="center")F=(e.left+e.right)/2-P;else if(isObject(l)){const B=Object.keys(l)[0],ee=l[B];F=this.chart.scales[B].getPixelForValue(ee)}q=this._getYAxisLabelAlignment(E).textAlign}t==="y"&&(m==="start"?I="top":m==="end"&&(I="bottom"));const R=this._getLabelSizes();for(W=0,Y=g.length;W<Y;++W){D=g[W],k=D.label;const B=d.setContext(this.getContext(W));te=this.getPixelForTick(W)+d.labelOffset,Q=this._resolveTickFontOptions(W),ie=Q.lineHeight,J=isArray(k)?k.length:1;const ee=J/2,ne=B.color,z=B.textStrokeColor,X=B.textStrokeWidth;let A=q;h?(F=te,q==="inner"&&(W===Y-1?A=this.options.reverse?"left":"right":W===0?A=this.options.reverse?"right":"left":A="center"),l==="top"?y==="near"||C!==0?x=-J*ie+ie/2:y==="center"?x=-R.highest.height/2-ee*ie+ie:x=-R.highest.height+ie/2:y==="near"||C!==0?x=ie/2:y==="center"?x=R.highest.height/2-ee*ie:x=R.highest.height-J*ie,w&&(x*=-1)):(ce=te,x=(1-J)*ie/2);let Z;if(B.showLabelBackdrop){const $e=toPadding(B.backdropPadding),Ne=R.heights[W],Me=R.widths[W];let Ee=ce+x-$e.top,Ve=F-$e.left;switch(I){case"middle":Ee-=Ne/2;break;case"bottom":Ee-=Ne;break}switch(q){case"center":Ve-=Me/2;break;case"right":Ve-=Me;break}Z={left:Ve,top:Ee,width:Me+$e.width,height:Ne+$e.height,color:B.backdropColor}}L.push({rotation:C,label:k,font:Q,color:ne,strokeColor:z,strokeWidth:X,textOffset:x,textAlign:A,textBaseline:I,translation:[F,ce],backdrop:Z})}return L}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-toRadians(this.labelRotation))return e==="top"?"left":"right";let l="center";return t.align==="start"?l="left":t.align==="end"?l="right":t.align==="inner"&&(l="inner"),l}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:o,mirror:l,padding:d}}=this.options,h=this._getLabelSizes(),g=e+d,m=h.widest.width;let y,b;return t==="left"?l?(b=this.right+d,o==="near"?y="left":o==="center"?(y="center",b+=m/2):(y="right",b+=m)):(b=this.right-g,o==="near"?y="right":o==="center"?(y="center",b-=m/2):(y="left",b=this.left)):t==="right"?l?(b=this.left+d,o==="near"?y="right":o==="center"?(y="center",b-=m/2):(y="left",b-=m)):(b=this.left+g,o==="near"?y="left":o==="center"?(y="center",b+=m/2):(y="right",b=this.right)):y="right",{textAlign:y,x:b}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:o,top:l,width:d,height:h}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(o,l,d,h),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const l=this.ticks.findIndex(d=>d.value===e);return l>=0?t.setContext(this.getContext(l)).lineWidth:0}drawGrid(e){const t=this.options.grid,o=this.ctx,l=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let d,h;const g=(m,y,b)=>{!b.width||!b.color||(o.save(),o.lineWidth=b.width,o.strokeStyle=b.color,o.setLineDash(b.borderDash||[]),o.lineDashOffset=b.borderDashOffset,o.beginPath(),o.moveTo(m.x,m.y),o.lineTo(y.x,y.y),o.stroke(),o.restore())};if(t.display)for(d=0,h=l.length;d<h;++d){const m=l[d];t.drawOnChartArea&&g({x:m.x1,y:m.y1},{x:m.x2,y:m.y2},m),t.drawTicks&&g({x:m.tx1,y:m.ty1},{x:m.tx2,y:m.ty2},{color:m.tickColor,width:m.tickWidth,borderDash:m.tickBorderDash,borderDashOffset:m.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{grid:o}}=this,l=o.setContext(this.getContext()),d=o.drawBorder?l.borderWidth:0;if(!d)return;const h=o.setContext(this.getContext(0)).lineWidth,g=this._borderValue;let m,y,b,w;this.isHorizontal()?(m=_alignPixel(e,this.left,d)-d/2,y=_alignPixel(e,this.right,h)+h/2,b=w=g):(b=_alignPixel(e,this.top,d)-d/2,w=_alignPixel(e,this.bottom,h)+h/2,m=y=g),t.save(),t.lineWidth=l.borderWidth,t.strokeStyle=l.borderColor,t.beginPath(),t.moveTo(m,b),t.lineTo(y,w),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const o=this.ctx,l=this._computeLabelArea();l&&clipArea(o,l);const d=this._labelItems||(this._labelItems=this._computeLabelItems(e));let h,g;for(h=0,g=d.length;h<g;++h){const m=d[h],y=m.font,b=m.label;m.backdrop&&(o.fillStyle=m.backdrop.color,o.fillRect(m.backdrop.left,m.backdrop.top,m.backdrop.width,m.backdrop.height));let w=m.textOffset;renderText(o,b,0,w,y,m)}l&&unclipArea(o)}drawTitle(){const{ctx:e,options:{position:t,title:o,reverse:l}}=this;if(!o.display)return;const d=toFont(o.font),h=toPadding(o.padding),g=o.align;let m=d.lineHeight/2;t==="bottom"||t==="center"||isObject(t)?(m+=h.bottom,isArray(o.text)&&(m+=d.lineHeight*(o.text.length-1))):m+=h.top;const{titleX:y,titleY:b,maxWidth:w,rotation:E}=titleArgs(this,m,t,g);renderText(e,o.text,0,0,d,{color:o.color,maxWidth:w,rotation:E,textAlign:titleAlign(g,t,l),textBaseline:"middle",translation:[y,b]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,o=valueOrDefault(e.grid&&e.grid.z,-1);return!this._isVisible()||this.draw!==Scale.prototype.draw?[{z:t,draw:l=>{this.draw(l)}}]:[{z:o,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:o+1,draw:()=>{this.drawBorder()}},{z:t,draw:l=>{this.drawLabels(l)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),o=this.axis+"AxisID",l=[];let d,h;for(d=0,h=t.length;d<h;++d){const g=t[d];g[o]===this.id&&(!e||g.type===e)&&l.push(g)}return l}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return toFont(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class TypedRegistry{constructor(e,t,o){this.type=e,this.scope=t,this.override=o,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let o;isIChartComponent(t)&&(o=this.register(t));const l=this.items,d=e.id,h=this.scope+"."+d;if(!d)throw new Error("class does not have id: "+e);return d in l||(l[d]=e,registerDefaults(e,h,o),this.override&&defaults.override(e.id,e.overrides)),h}get(e){return this.items[e]}unregister(e){const t=this.items,o=e.id,l=this.scope;o in t&&delete t[o],l&&o in defaults[l]&&(delete defaults[l][o],this.override&&delete overrides[o])}}function registerDefaults(n,e,t){const o=merge(Object.create(null),[t?defaults.get(t):{},defaults.get(e),n.defaults]);defaults.set(e,o),n.defaultRoutes&&routeDefaults(e,n.defaultRoutes),n.descriptors&&defaults.describe(e,n.descriptors)}function routeDefaults(n,e){Object.keys(e).forEach(t=>{const o=t.split("."),l=o.pop(),d=[n].concat(o).join("."),h=e[t].split("."),g=h.pop(),m=h.join(".");defaults.route(d,l,m,g)})}function isIChartComponent(n){return"id"in n&&"defaults"in n}class Registry{constructor(){this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(Element,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,o){[...t].forEach(l=>{const d=o||this._getRegistryForType(l);o||d.isForType(l)||d===this.plugins&&l.id?this._exec(e,d,l):each(l,h=>{const g=o||this._getRegistryForType(h);this._exec(e,g,h)})})}_exec(e,t,o){const l=_capitalize(e);callback(o["before"+l],[],o),t[e](o),callback(o["after"+l],[],o)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const o=this._typedRegistries[t];if(o.isForType(e))return o}return this.plugins}_get(e,t,o){const l=t.get(e);if(l===void 0)throw new Error('"'+e+'" is not a registered '+o+".");return l}}var registry=new Registry;class ScatterController extends DatasetController{update(e){const t=this._cachedMeta,{data:o=[]}=t,l=this.chart._animationsDisabled;let{start:d,count:h}=_getStartAndCountOfVisiblePoints(t,o,l);if(this._drawStart=d,this._drawCount=h,_scaleRangesChanged(t)&&(d=0,h=o.length),this.options.showLine){const{dataset:g,_dataset:m}=t;g._chart=this.chart,g._datasetIndex=this.index,g._decimated=!!m._decimated,g.points=o;const y=this.resolveDatasetElementOptions(e);y.segment=this.options.segment,this.updateElement(g,void 0,{animated:!l,options:y},e)}this.updateElements(o,d,h,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=registry.getElement("line")),super.addElements()}updateElements(e,t,o,l){const d=l==="reset",{iScale:h,vScale:g,_stacked:m,_dataset:y}=this._cachedMeta,b=this.resolveDataElementOptions(t,l),w=this.getSharedOptions(b),E=this.includeOptions(l,w),P=h.axis,$=g.axis,{spanGaps:C,segment:L}=this.options,W=isNumber(C)?C:Number.POSITIVE_INFINITY,Y=this.chart._animationsDisabled||d||l==="none";let D=t>0&&this.getParsed(t-1);for(let k=t;k<t+o;++k){const F=e[k],ce=this.getParsed(k),q=Y?F:{},te=isNullOrUndef(ce[$]),Q=q[P]=h.getPixelForValue(ce[P],k),ie=q[$]=d||te?g.getBasePixel():g.getPixelForValue(m?this.applyStack(g,ce,m):ce[$],k);q.skip=isNaN(Q)||isNaN(ie)||te,q.stop=k>0&&Math.abs(ce[P]-D[P])>W,L&&(q.parsed=ce,q.raw=y.data[k]),E&&(q.options=w||this.resolveDataElementOptions(k,F.active?"active":l)),Y||this.updateElement(F,k,q,l),D=ce}this.updateSharedOptions(w,l,b)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let g=0;for(let m=t.length-1;m>=0;--m)g=Math.max(g,t[m].size(this.resolveDataElementOptions(m))/2);return g>0&&g}const o=e.dataset,l=o.options&&o.options.borderWidth||0;if(!t.length)return l;const d=t[0].size(this.resolveDataElementOptions(0)),h=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(l,d,h)/2}}ScatterController.id="scatter";ScatterController.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};ScatterController.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(n){return"("+n.label+", "+n.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var controllers=Object.freeze({__proto__:null,BarController,BubbleController,DoughnutController,LineController,PolarAreaController,PieController,RadarController,ScatterController});function abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class DateAdapter{constructor(e){this.options=e||{}}init(e){}formats(){return abstract()}parse(e,t){return abstract()}format(e,t){return abstract()}add(e,t,o){return abstract()}diff(e,t,o){return abstract()}startOf(e,t,o){return abstract()}endOf(e,t){return abstract()}}DateAdapter.override=function(n){Object.assign(DateAdapter.prototype,n)};var adapters={_date:DateAdapter};function binarySearch(n,e,t,o){const{controller:l,data:d,_sorted:h}=n,g=l._cachedMeta.iScale;if(g&&e===g.axis&&e!=="r"&&h&&d.length){const m=g._reversePixels?_rlookupByKey:_lookupByKey;if(o){if(l._sharedOptions){const y=d[0],b=typeof y.getRange=="function"&&y.getRange(e);if(b){const w=m(d,e,t-b),E=m(d,e,t+b);return{lo:w.lo,hi:E.hi}}}}else return m(d,e,t)}return{lo:0,hi:d.length-1}}function evaluateInteractionItems(n,e,t,o,l){const d=n.getSortedVisibleDatasetMetas(),h=t[e];for(let g=0,m=d.length;g<m;++g){const{index:y,data:b}=d[g],{lo:w,hi:E}=binarySearch(d[g],e,h,l);for(let P=w;P<=E;++P){const $=b[P];$.skip||o($,y,P)}}}function getDistanceMetricForAxis(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(o,l){const d=e?Math.abs(o.x-l.x):0,h=t?Math.abs(o.y-l.y):0;return Math.sqrt(Math.pow(d,2)+Math.pow(h,2))}}function getIntersectItems(n,e,t,o,l){const d=[];return!l&&!n.isPointInArea(e)||evaluateInteractionItems(n,t,e,function(g,m,y){!l&&!_isPointInArea(g,n.chartArea,0)||g.inRange(e.x,e.y,o)&&d.push({element:g,datasetIndex:m,index:y})},!0),d}function getNearestRadialItems(n,e,t,o){let l=[];function d(h,g,m){const{startAngle:y,endAngle:b}=h.getProps(["startAngle","endAngle"],o),{angle:w}=getAngleFromPoint(h,{x:e.x,y:e.y});_angleBetween(w,y,b)&&l.push({element:h,datasetIndex:g,index:m})}return evaluateInteractionItems(n,t,e,d),l}function getNearestCartesianItems(n,e,t,o,l,d){let h=[];const g=getDistanceMetricForAxis(t);let m=Number.POSITIVE_INFINITY;function y(b,w,E){const P=b.inRange(e.x,e.y,l);if(o&&!P)return;const $=b.getCenterPoint(l);if(!(!!d||n.isPointInArea($))&&!P)return;const L=g(e,$);L<m?(h=[{element:b,datasetIndex:w,index:E}],m=L):L===m&&h.push({element:b,datasetIndex:w,index:E})}return evaluateInteractionItems(n,t,e,y),h}function getNearestItems(n,e,t,o,l,d){return!d&&!n.isPointInArea(e)?[]:t==="r"&&!o?getNearestRadialItems(n,e,t,l):getNearestCartesianItems(n,e,t,o,l,d)}function getAxisItems(n,e,t,o,l){const d=[],h=t==="x"?"inXRange":"inYRange";let g=!1;return evaluateInteractionItems(n,t,e,(m,y,b)=>{m[h](e[t],l)&&(d.push({element:m,datasetIndex:y,index:b}),g=g||m.inRange(e.x,e.y,l))}),o&&!g?[]:d}var Interaction={evaluateInteractionItems,modes:{index(n,e,t,o){const l=getRelativePosition(e,n),d=t.axis||"x",h=t.includeInvisible||!1,g=t.intersect?getIntersectItems(n,l,d,o,h):getNearestItems(n,l,d,!1,o,h),m=[];return g.length?(n.getSortedVisibleDatasetMetas().forEach(y=>{const b=g[0].index,w=y.data[b];w&&!w.skip&&m.push({element:w,datasetIndex:y.index,index:b})}),m):[]},dataset(n,e,t,o){const l=getRelativePosition(e,n),d=t.axis||"xy",h=t.includeInvisible||!1;let g=t.intersect?getIntersectItems(n,l,d,o,h):getNearestItems(n,l,d,!1,o,h);if(g.length>0){const m=g[0].datasetIndex,y=n.getDatasetMeta(m).data;g=[];for(let b=0;b<y.length;++b)g.push({element:y[b],datasetIndex:m,index:b})}return g},point(n,e,t,o){const l=getRelativePosition(e,n),d=t.axis||"xy",h=t.includeInvisible||!1;return getIntersectItems(n,l,d,o,h)},nearest(n,e,t,o){const l=getRelativePosition(e,n),d=t.axis||"xy",h=t.includeInvisible||!1;return getNearestItems(n,l,d,t.intersect,o,h)},x(n,e,t,o){const l=getRelativePosition(e,n);return getAxisItems(n,l,"x",t.intersect,o)},y(n,e,t,o){const l=getRelativePosition(e,n);return getAxisItems(n,l,"y",t.intersect,o)}}};const STATIC_POSITIONS=["left","top","right","bottom"];function filterByPosition(n,e){return n.filter(t=>t.pos===e)}function filterDynamicPositionByAxis(n,e){return n.filter(t=>STATIC_POSITIONS.indexOf(t.pos)===-1&&t.box.axis===e)}function sortByWeight(n,e){return n.sort((t,o)=>{const l=e?o:t,d=e?t:o;return l.weight===d.weight?l.index-d.index:l.weight-d.weight})}function wrapBoxes(n){const e=[];let t,o,l,d,h,g;for(t=0,o=(n||[]).length;t<o;++t)l=n[t],{position:d,options:{stack:h,stackWeight:g=1}}=l,e.push({index:t,box:l,pos:d,horizontal:l.isHorizontal(),weight:l.weight,stack:h&&d+h,stackWeight:g});return e}function buildStacks(n){const e={};for(const t of n){const{stack:o,pos:l,stackWeight:d}=t;if(!o||!STATIC_POSITIONS.includes(l))continue;const h=e[o]||(e[o]={count:0,placed:0,weight:0,size:0});h.count++,h.weight+=d}return e}function setLayoutDims(n,e){const t=buildStacks(n),{vBoxMaxWidth:o,hBoxMaxHeight:l}=e;let d,h,g;for(d=0,h=n.length;d<h;++d){g=n[d];const{fullSize:m}=g.box,y=t[g.stack],b=y&&g.stackWeight/y.weight;g.horizontal?(g.width=b?b*o:m&&e.availableWidth,g.height=l):(g.width=o,g.height=b?b*l:m&&e.availableHeight)}return t}function buildLayoutBoxes(n){const e=wrapBoxes(n),t=sortByWeight(e.filter(y=>y.box.fullSize),!0),o=sortByWeight(filterByPosition(e,"left"),!0),l=sortByWeight(filterByPosition(e,"right")),d=sortByWeight(filterByPosition(e,"top"),!0),h=sortByWeight(filterByPosition(e,"bottom")),g=filterDynamicPositionByAxis(e,"x"),m=filterDynamicPositionByAxis(e,"y");return{fullSize:t,leftAndTop:o.concat(d),rightAndBottom:l.concat(m).concat(h).concat(g),chartArea:filterByPosition(e,"chartArea"),vertical:o.concat(l).concat(m),horizontal:d.concat(h).concat(g)}}function getCombinedMax(n,e,t,o){return Math.max(n[t],e[t])+Math.max(n[o],e[o])}function updateMaxPadding(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function updateDims(n,e,t,o){const{pos:l,box:d}=t,h=n.maxPadding;if(!isObject(l)){t.size&&(n[l]-=t.size);const w=o[t.stack]||{size:0,count:1};w.size=Math.max(w.size,t.horizontal?d.height:d.width),t.size=w.size/w.count,n[l]+=t.size}d.getPadding&&updateMaxPadding(h,d.getPadding());const g=Math.max(0,e.outerWidth-getCombinedMax(h,n,"left","right")),m=Math.max(0,e.outerHeight-getCombinedMax(h,n,"top","bottom")),y=g!==n.w,b=m!==n.h;return n.w=g,n.h=m,t.horizontal?{same:y,other:b}:{same:b,other:y}}function handleMaxPadding(n){const e=n.maxPadding;function t(o){const l=Math.max(e[o]-n[o],0);return n[o]+=l,l}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function getMargins(n,e){const t=e.maxPadding;function o(l){const d={left:0,top:0,right:0,bottom:0};return l.forEach(h=>{d[h]=Math.max(e[h],t[h])}),d}return o(n?["left","right"]:["top","bottom"])}function fitBoxes(n,e,t,o){const l=[];let d,h,g,m,y,b;for(d=0,h=n.length,y=0;d<h;++d){g=n[d],m=g.box,m.update(g.width||e.w,g.height||e.h,getMargins(g.horizontal,e));const{same:w,other:E}=updateDims(e,t,g,o);y|=w&&l.length,b=b||E,m.fullSize||l.push(g)}return y&&fitBoxes(l,e,t,o)||b}function setBoxDims(n,e,t,o,l){n.top=t,n.left=e,n.right=e+o,n.bottom=t+l,n.width=o,n.height=l}function placeBoxes(n,e,t,o){const l=t.padding;let{x:d,y:h}=e;for(const g of n){const m=g.box,y=o[g.stack]||{count:1,placed:0,weight:1},b=g.stackWeight/y.weight||1;if(g.horizontal){const w=e.w*b,E=y.size||m.height;defined(y.start)&&(h=y.start),m.fullSize?setBoxDims(m,l.left,h,t.outerWidth-l.right-l.left,E):setBoxDims(m,e.left+y.placed,h,w,E),y.start=h,y.placed+=w,h=m.bottom}else{const w=e.h*b,E=y.size||m.width;defined(y.start)&&(d=y.start),m.fullSize?setBoxDims(m,d,l.top,E,t.outerHeight-l.bottom-l.top):setBoxDims(m,d,e.top+y.placed,E,w),y.start=d,y.placed+=w,d=m.right}}e.x=d,e.y=h}defaults.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var layouts={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,o){if(!n)return;const l=toPadding(n.options.layout.padding),d=Math.max(e-l.width,0),h=Math.max(t-l.height,0),g=buildLayoutBoxes(n.boxes),m=g.vertical,y=g.horizontal;each(n.boxes,C=>{typeof C.beforeLayout=="function"&&C.beforeLayout()});const b=m.reduce((C,L)=>L.box.options&&L.box.options.display===!1?C:C+1,0)||1,w=Object.freeze({outerWidth:e,outerHeight:t,padding:l,availableWidth:d,availableHeight:h,vBoxMaxWidth:d/2/b,hBoxMaxHeight:h/2}),E=Object.assign({},l);updateMaxPadding(E,toPadding(o));const P=Object.assign({maxPadding:E,w:d,h,x:l.left,y:l.top},l),$=setLayoutDims(m.concat(y),w);fitBoxes(g.fullSize,P,w,$),fitBoxes(m,P,w,$),fitBoxes(y,P,w,$)&&fitBoxes(m,P,w,$),handleMaxPadding(P),placeBoxes(g.leftAndTop,P,w,$),P.x+=P.w,P.y+=P.h,placeBoxes(g.rightAndBottom,P,w,$),n.chartArea={left:P.left,top:P.top,right:P.left+P.w,bottom:P.top+P.h,height:P.h,width:P.w},each(g.chartArea,C=>{const L=C.box;Object.assign(L,n.chartArea),L.update(P.w,P.h,{left:0,top:0,right:0,bottom:0})})}};class BasePlatform{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,o){}removeEventListener(e,t,o){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,o,l){return t=Math.max(0,t||e.width),o=o||e.height,{width:t,height:Math.max(0,l?Math.floor(t/l):o)}}isAttached(e){return!0}updateConfig(e){}}class BasicPlatform extends BasePlatform{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const EXPANDO_KEY="$chartjs",EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},isNullOrEmpty=n=>n===null||n==="";function initCanvas(n,e){const t=n.style,o=n.getAttribute("height"),l=n.getAttribute("width");if(n[EXPANDO_KEY]={initial:{height:o,width:l,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",isNullOrEmpty(l)){const d=readUsedSize(n,"width");d!==void 0&&(n.width=d)}if(isNullOrEmpty(o))if(n.style.height==="")n.height=n.width/(e||2);else{const d=readUsedSize(n,"height");d!==void 0&&(n.height=d)}return n}const eventListenerOptions=supportsEventListenerOptions?{passive:!0}:!1;function addListener(n,e,t){n.addEventListener(e,t,eventListenerOptions)}function removeListener(n,e,t){n.canvas.removeEventListener(e,t,eventListenerOptions)}function fromNativeEvent(n,e){const t=EVENT_TYPES[n.type]||n.type,{x:o,y:l}=getRelativePosition(n,e);return{type:t,chart:e,native:n,x:o!==void 0?o:null,y:l!==void 0?l:null}}function nodeListContains(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function createAttachObserver(n,e,t){const o=n.canvas,l=new MutationObserver(d=>{let h=!1;for(const g of d)h=h||nodeListContains(g.addedNodes,o),h=h&&!nodeListContains(g.removedNodes,o);h&&t()});return l.observe(document,{childList:!0,subtree:!0}),l}function createDetachObserver(n,e,t){const o=n.canvas,l=new MutationObserver(d=>{let h=!1;for(const g of d)h=h||nodeListContains(g.removedNodes,o),h=h&&!nodeListContains(g.addedNodes,o);h&&t()});return l.observe(document,{childList:!0,subtree:!0}),l}const drpListeningCharts=new Map;let oldDevicePixelRatio=0;function onWindowResize(){const n=window.devicePixelRatio;n!==oldDevicePixelRatio&&(oldDevicePixelRatio=n,drpListeningCharts.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function listenDevicePixelRatioChanges(n,e){drpListeningCharts.size||window.addEventListener("resize",onWindowResize),drpListeningCharts.set(n,e)}function unlistenDevicePixelRatioChanges(n){drpListeningCharts.delete(n),drpListeningCharts.size||window.removeEventListener("resize",onWindowResize)}function createResizeObserver(n,e,t){const o=n.canvas,l=o&&_getParentNode(o);if(!l)return;const d=throttled((g,m)=>{const y=l.clientWidth;t(g,m),y<l.clientWidth&&t()},window),h=new ResizeObserver(g=>{const m=g[0],y=m.contentRect.width,b=m.contentRect.height;y===0&&b===0||d(y,b)});return h.observe(l),listenDevicePixelRatioChanges(n,d),h}function releaseObserver(n,e,t){t&&t.disconnect(),e==="resize"&&unlistenDevicePixelRatioChanges(n)}function createProxyAndListen(n,e,t){const o=n.canvas,l=throttled(d=>{n.ctx!==null&&t(fromNativeEvent(d,n))},n,d=>{const h=d[0];return[h,h.offsetX,h.offsetY]});return addListener(o,e,l),l}class DomPlatform extends BasePlatform{acquireContext(e,t){const o=e&&e.getContext&&e.getContext("2d");return o&&o.canvas===e?(initCanvas(e,t),o):null}releaseContext(e){const t=e.canvas;if(!t[EXPANDO_KEY])return!1;const o=t[EXPANDO_KEY].initial;["height","width"].forEach(d=>{const h=o[d];isNullOrUndef(h)?t.removeAttribute(d):t.setAttribute(d,h)});const l=o.style||{};return Object.keys(l).forEach(d=>{t.style[d]=l[d]}),t.width=t.width,delete t[EXPANDO_KEY],!0}addEventListener(e,t,o){this.removeEventListener(e,t);const l=e.$proxies||(e.$proxies={}),h={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver}[t]||createProxyAndListen;l[t]=h(e,t,o)}removeEventListener(e,t){const o=e.$proxies||(e.$proxies={}),l=o[t];if(!l)return;({attach:releaseObserver,detach:releaseObserver,resize:releaseObserver}[t]||removeListener)(e,t,l),o[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,o,l){return getMaximumSize(e,t,o,l)}isAttached(e){const t=_getParentNode(e);return!!(t&&t.isConnected)}}function _detectPlatform(n){return!_isDomSupported()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?BasicPlatform:DomPlatform}class PluginService{constructor(){this._init=[]}notify(e,t,o,l){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const d=l?this._descriptors(e).filter(l):this._descriptors(e),h=this._notify(d,e,t,o);return t==="afterDestroy"&&(this._notify(d,e,"stop"),this._notify(this._init,e,"uninstall")),h}_notify(e,t,o,l){l=l||{};for(const d of e){const h=d.plugin,g=h[o],m=[t,l,d.options];if(callback(g,m,h)===!1&&l.cancelable)return!1}return!0}invalidate(){isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const o=e&&e.config,l=valueOrDefault(o.options&&o.options.plugins,{}),d=allPlugins(o);return l===!1&&!t?[]:createDescriptors(e,d,l,t)}_notifyStateChanges(e){const t=this._oldCache||[],o=this._cache,l=(d,h)=>d.filter(g=>!h.some(m=>g.plugin.id===m.plugin.id));this._notify(l(t,o),e,"stop"),this._notify(l(o,t),e,"start")}}function allPlugins(n){const e={},t=[],o=Object.keys(registry.plugins.items);for(let d=0;d<o.length;d++)t.push(registry.getPlugin(o[d]));const l=n.plugins||[];for(let d=0;d<l.length;d++){const h=l[d];t.indexOf(h)===-1&&(t.push(h),e[h.id]=!0)}return{plugins:t,localIds:e}}function getOpts(n,e){return!e&&n===!1?null:n===!0?{}:n}function createDescriptors(n,{plugins:e,localIds:t},o,l){const d=[],h=n.getContext();for(const g of e){const m=g.id,y=getOpts(o[m],l);y!==null&&d.push({plugin:g,options:pluginOpts(n.config,{plugin:g,local:t[m]},y,h)})}return d}function pluginOpts(n,{plugin:e,local:t},o,l){const d=n.pluginScopeKeys(e),h=n.getOptionScopes(o,d);return t&&e.defaults&&h.push(e.defaults),n.createResolver(h,l,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function getIndexAxis(n,e){const t=defaults.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function getAxisFromDefaultScaleID(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function getDefaultScaleIDFromAxis(n,e){return n===e?"_index_":"_value_"}function axisFromPosition(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function determineAxis(n,e){return n==="x"||n==="y"?n:e.axis||axisFromPosition(e.position)||n.charAt(0).toLowerCase()}function mergeScaleConfig(n,e){const t=overrides[n.type]||{scales:{}},o=e.scales||{},l=getIndexAxis(n.type,e),d=Object.create(null),h=Object.create(null);return Object.keys(o).forEach(g=>{const m=o[g];if(!isObject(m))return console.error(`Invalid scale configuration for scale: ${g}`);if(m._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${g}`);const y=determineAxis(g,m),b=getDefaultScaleIDFromAxis(y,l),w=t.scales||{};d[y]=d[y]||g,h[g]=mergeIf(Object.create(null),[{axis:y},m,w[y],w[b]])}),n.data.datasets.forEach(g=>{const m=g.type||n.type,y=g.indexAxis||getIndexAxis(m,e),w=(overrides[m]||{}).scales||{};Object.keys(w).forEach(E=>{const P=getAxisFromDefaultScaleID(E,y),$=g[P+"AxisID"]||d[P]||P;h[$]=h[$]||Object.create(null),mergeIf(h[$],[{axis:P},o[$],w[E]])})}),Object.keys(h).forEach(g=>{const m=h[g];mergeIf(m,[defaults.scales[m.type],defaults.scale])}),h}function initOptions(n){const e=n.options||(n.options={});e.plugins=valueOrDefault(e.plugins,{}),e.scales=mergeScaleConfig(n,e)}function initData(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function initConfig(n){return n=n||{},n.data=initData(n.data),initOptions(n),n}const keyCache=new Map,keysCached=new Set;function cachedKeys(n,e){let t=keyCache.get(n);return t||(t=e(),keyCache.set(n,t),keysCached.add(t)),t}const addIfFound=(n,e,t)=>{const o=resolveObjectKey(e,t);o!==void 0&&n.add(o)};class Config{constructor(e){this._config=initConfig(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=initData(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),initOptions(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return cachedKeys(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return cachedKeys(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return cachedKeys(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,o=this.type;return cachedKeys(`${o}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const o=this._scopeCache;let l=o.get(e);return(!l||t)&&(l=new Map,o.set(e,l)),l}getOptionScopes(e,t,o){const{options:l,type:d}=this,h=this._cachedScopes(e,o),g=h.get(t);if(g)return g;const m=new Set;t.forEach(b=>{e&&(m.add(e),b.forEach(w=>addIfFound(m,e,w))),b.forEach(w=>addIfFound(m,l,w)),b.forEach(w=>addIfFound(m,overrides[d]||{},w)),b.forEach(w=>addIfFound(m,defaults,w)),b.forEach(w=>addIfFound(m,descriptors,w))});const y=Array.from(m);return y.length===0&&y.push(Object.create(null)),keysCached.has(t)&&h.set(t,y),y}chartOptionScopes(){const{options:e,type:t}=this;return[e,overrides[t]||{},defaults.datasets[t]||{},{type:t},defaults,descriptors]}resolveNamedOptions(e,t,o,l=[""]){const d={$shared:!0},{resolver:h,subPrefixes:g}=getResolver(this._resolverCache,e,l);let m=h;if(needContext(h,t)){d.$shared=!1,o=isFunction(o)?o():o;const y=this.createResolver(e,o,g);m=_attachContext(h,o,y)}for(const y of t)d[y]=m[y];return d}createResolver(e,t,o=[""],l){const{resolver:d}=getResolver(this._resolverCache,e,o);return isObject(t)?_attachContext(d,t,void 0,l):d}}function getResolver(n,e,t){let o=n.get(e);o||(o=new Map,n.set(e,o));const l=t.join();let d=o.get(l);return d||(d={resolver:_createResolver(e,t),subPrefixes:t.filter(g=>!g.toLowerCase().includes("hover"))},o.set(l,d)),d}const hasFunction=n=>isObject(n)&&Object.getOwnPropertyNames(n).reduce((e,t)=>e||isFunction(n[t]),!1);function needContext(n,e){const{isScriptable:t,isIndexable:o}=_descriptors(n);for(const l of e){const d=t(l),h=o(l),g=(h||d)&&n[l];if(d&&(isFunction(g)||hasFunction(g))||h&&isArray(g))return!0}return!1}var version="3.9.1";const KNOWN_POSITIONS=["top","bottom","left","right","chartArea"];function positionIsHorizontal(n,e){return n==="top"||n==="bottom"||KNOWN_POSITIONS.indexOf(n)===-1&&e==="x"}function compare2Level(n,e){return function(t,o){return t[n]===o[n]?t[e]-o[e]:t[n]-o[n]}}function onAnimationsComplete(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),callback(t&&t.onComplete,[n],e)}function onAnimationProgress(n){const e=n.chart,t=e.options.animation;callback(t&&t.onProgress,[n],e)}function getCanvas(n){return _isDomSupported()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const instances={},getChart=n=>{const e=getCanvas(n);return Object.values(instances).filter(t=>t.canvas===e).pop()};function moveNumericKeys(n,e,t){const o=Object.keys(n);for(const l of o){const d=+l;if(d>=e){const h=n[l];delete n[l],(t>0||d>e)&&(n[d+t]=h)}}}function determineLastEvent(n,e,t,o){return!t||n.type==="mouseout"?null:o?e:n}class Chart{constructor(e,t){const o=this.config=new Config(t),l=getCanvas(e),d=getChart(l);if(d)throw new Error("Canvas is already in use. Chart with ID '"+d.id+"' must be destroyed before the canvas with ID '"+d.canvas.id+"' can be reused.");const h=o.createResolver(o.chartOptionScopes(),this.getContext());this.platform=new(o.platform||_detectPlatform(l)),this.platform.updateConfig(o);const g=this.platform.acquireContext(l,h.aspectRatio),m=g&&g.canvas,y=m&&m.height,b=m&&m.width;if(this.id=uid(),this.ctx=g,this.canvas=m,this.width=b,this.height=y,this._options=h,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=debounce(w=>this.update(w),h.resizeDelay||0),this._dataChanges=[],instances[this.id]=this,!g||!m){console.error("Failed to create chart: can't acquire context from the given item");return}animator.listen(this,"complete",onAnimationsComplete),animator.listen(this,"progress",onAnimationProgress),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:o,height:l,_aspectRatio:d}=this;return isNullOrUndef(e)?t&&d?d:l?o/l:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return clearCanvas(this.canvas,this.ctx),this}stop(){return animator.stop(this),this}resize(e,t){animator.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const o=this.options,l=this.canvas,d=o.maintainAspectRatio&&this.aspectRatio,h=this.platform.getMaximumSize(l,e,t,d),g=o.devicePixelRatio||this.platform.getDevicePixelRatio(),m=this.width?"resize":"attach";this.width=h.width,this.height=h.height,this._aspectRatio=this.aspectRatio,retinaScale(this,g,!0)&&(this.notifyPlugins("resize",{size:h}),callback(o.onResize,[this,h],this),this.attached&&this._doResize(m)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};each(t,(o,l)=>{o.id=l})}buildOrUpdateScales(){const e=this.options,t=e.scales,o=this.scales,l=Object.keys(o).reduce((h,g)=>(h[g]=!1,h),{});let d=[];t&&(d=d.concat(Object.keys(t).map(h=>{const g=t[h],m=determineAxis(h,g),y=m==="r",b=m==="x";return{options:g,dposition:y?"chartArea":b?"bottom":"left",dtype:y?"radialLinear":b?"category":"linear"}}))),each(d,h=>{const g=h.options,m=g.id,y=determineAxis(m,g),b=valueOrDefault(g.type,h.dtype);(g.position===void 0||positionIsHorizontal(g.position,y)!==positionIsHorizontal(h.dposition))&&(g.position=h.dposition),l[m]=!0;let w=null;if(m in o&&o[m].type===b)w=o[m];else{const E=registry.getScale(b);w=new E({id:m,type:b,ctx:this.ctx,chart:this}),o[w.id]=w}w.init(g,e)}),each(l,(h,g)=>{h||delete o[g]}),each(o,h=>{layouts.configure(this,h,h.options),layouts.addBox(this,h)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,o=e.length;if(e.sort((l,d)=>l.index-d.index),o>t){for(let l=t;l<o;++l)this._destroyDatasetMeta(l);e.splice(t,o-t)}this._sortedMetasets=e.slice(0).sort(compare2Level("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((o,l)=>{t.filter(d=>d===o._dataset).length===0&&this._destroyDatasetMeta(l)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let o,l;for(this._removeUnreferencedMetasets(),o=0,l=t.length;o<l;o++){const d=t[o];let h=this.getDatasetMeta(o);const g=d.type||this.config.type;if(h.type&&h.type!==g&&(this._destroyDatasetMeta(o),h=this.getDatasetMeta(o)),h.type=g,h.indexAxis=d.indexAxis||getIndexAxis(g,this.options),h.order=d.order||0,h.index=o,h.label=""+d.label,h.visible=this.isDatasetVisible(o),h.controller)h.controller.updateIndex(o),h.controller.linkScales();else{const m=registry.getController(g),{datasetElementType:y,dataElementType:b}=defaults.datasets[g];Object.assign(m.prototype,{dataElementType:registry.getElement(b),datasetElementType:y&&registry.getElement(y)}),h.controller=new m(this,o),e.push(h.controller)}}return this._updateMetasets(),e}_resetElements(){each(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const o=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),l=this._animationsDisabled=!o.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const d=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let h=0;for(let y=0,b=this.data.datasets.length;y<b;y++){const{controller:w}=this.getDatasetMeta(y),E=!l&&d.indexOf(w)===-1;w.buildOrUpdateElements(E),h=Math.max(+w.getMaxOverflow(),h)}h=this._minPadding=o.layout.autoPadding?h:0,this._updateLayout(h),l||each(d,y=>{y.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(compare2Level("z","_idx"));const{_active:g,_lastEvent:m}=this;m?this._eventHandler(m,!0):g.length&&this._updateHoverStyles(g,g,!0),this.render()}_updateScales(){each(this.scales,e=>{layouts.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),o=new Set(e.events);(!setsEqual(t,o)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:o,start:l,count:d}of t){const h=o==="_removeElements"?-d:d;moveNumericKeys(e,l,h)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,o=d=>new Set(e.filter(h=>h[0]===d).map((h,g)=>g+","+h.splice(1).join(","))),l=o(0);for(let d=1;d<t;d++)if(!setsEqual(l,o(d)))return;return Array.from(l).map(d=>d.split(",")).map(d=>({method:d[1],start:+d[2],count:+d[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;layouts.update(this,this.width,this.height,e);const t=this.chartArea,o=t.width<=0||t.height<=0;this._layers=[],each(this.boxes,l=>{o&&l.position==="chartArea"||(l.configure&&l.configure(),this._layers.push(...l._layers()))},this),this._layers.forEach((l,d)=>{l._idx=d}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,o=this.data.datasets.length;t<o;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,o=this.data.datasets.length;t<o;++t)this._updateDataset(t,isFunction(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const o=this.getDatasetMeta(e),l={meta:o,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",l)!==!1&&(o.controller._update(t),l.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",l))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(animator.has(this)?this.attached&&!animator.running(this)&&animator.start(this):(this.draw(),onAnimationsComplete({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:o,height:l}=this._resizeBeforeDraw;this._resize(o,l),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,o=[];let l,d;for(l=0,d=t.length;l<d;++l){const h=t[l];(!e||h.visible)&&o.push(h)}return o}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,o=e._clip,l=!o.disabled,d=this.chartArea,h={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",h)!==!1&&(l&&clipArea(t,{left:o.left===!1?0:d.left-o.left,right:o.right===!1?this.width:d.right+o.right,top:o.top===!1?0:d.top-o.top,bottom:o.bottom===!1?this.height:d.bottom+o.bottom}),e.controller.draw(),l&&unclipArea(t),h.cancelable=!1,this.notifyPlugins("afterDatasetDraw",h))}isPointInArea(e){return _isPointInArea(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,o,l){const d=Interaction.modes[t];return typeof d=="function"?d(this,e,o,l):[]}getDatasetMeta(e){const t=this.data.datasets[e],o=this._metasets;let l=o.filter(d=>d&&d._dataset===t).pop();return l||(l={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},o.push(l)),l}getContext(){return this.$context||(this.$context=createContext(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const o=this.getDatasetMeta(e);return typeof o.hidden=="boolean"?!o.hidden:!t.hidden}setDatasetVisibility(e,t){const o=this.getDatasetMeta(e);o.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,o){const l=o?"show":"hide",d=this.getDatasetMeta(e),h=d.controller._resolveAnimations(void 0,l);defined(t)?(d.data[t].hidden=!o,this.update()):(this.setDatasetVisibility(e,o),h.update(d,{visible:o}),this.update(g=>g.datasetIndex===e?l:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),animator.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),clearCanvas(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete instances[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,o=(d,h)=>{t.addEventListener(this,d,h),e[d]=h},l=(d,h,g)=>{d.offsetX=h,d.offsetY=g,this._eventHandler(d)};each(this.options.events,d=>o(d,l))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,o=(m,y)=>{t.addEventListener(this,m,y),e[m]=y},l=(m,y)=>{e[m]&&(t.removeEventListener(this,m,y),delete e[m])},d=(m,y)=>{this.canvas&&this.resize(m,y)};let h;const g=()=>{l("attach",g),this.attached=!0,this.resize(),o("resize",d),o("detach",h)};h=()=>{this.attached=!1,l("resize",d),this._stop(),this._resize(0,0),o("attach",g)},t.isAttached(this.canvas)?g():h()}unbindEvents(){each(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},each(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,o){const l=o?"set":"remove";let d,h,g,m;for(t==="dataset"&&(d=this.getDatasetMeta(e[0].datasetIndex),d.controller["_"+l+"DatasetHoverStyle"]()),g=0,m=e.length;g<m;++g){h=e[g];const y=h&&this.getDatasetMeta(h.datasetIndex).controller;y&&y[l+"HoverStyle"](h.element,h.datasetIndex,h.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],o=e.map(({datasetIndex:d,index:h})=>{const g=this.getDatasetMeta(d);if(!g)throw new Error("No dataset found at index "+d);return{datasetIndex:d,element:g.data[h],index:h}});!_elementsEqual(o,t)&&(this._active=o,this._lastEvent=null,this._updateHoverStyles(o,t))}notifyPlugins(e,t,o){return this._plugins.notify(this,e,t,o)}_updateHoverStyles(e,t,o){const l=this.options.hover,d=(m,y)=>m.filter(b=>!y.some(w=>b.datasetIndex===w.datasetIndex&&b.index===w.index)),h=d(t,e),g=o?e:d(e,t);h.length&&this.updateHoverStyle(h,l.mode,!1),g.length&&l.mode&&this.updateHoverStyle(g,l.mode,!0)}_eventHandler(e,t){const o={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},l=h=>(h.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",o,l)===!1)return;const d=this._handleEvent(e,t,o.inChartArea);return o.cancelable=!1,this.notifyPlugins("afterEvent",o,l),(d||o.changed)&&this.render(),this}_handleEvent(e,t,o){const{_active:l=[],options:d}=this,h=t,g=this._getActiveElements(e,l,o,h),m=_isClickEvent(e),y=determineLastEvent(e,this._lastEvent,o,m);o&&(this._lastEvent=null,callback(d.onHover,[e,g,this],this),m&&callback(d.onClick,[e,g,this],this));const b=!_elementsEqual(g,l);return(b||t)&&(this._active=g,this._updateHoverStyles(g,l,t)),this._lastEvent=y,b}_getActiveElements(e,t,o,l){if(e.type==="mouseout")return[];if(!o)return t;const d=this.options.hover;return this.getElementsAtEventForMode(e,d.mode,d,l)}}const invalidatePlugins=()=>each(Chart.instances,n=>n._plugins.invalidate()),enumerable=!0;Object.defineProperties(Chart,{defaults:{enumerable,value:defaults},instances:{enumerable,value:instances},overrides:{enumerable,value:overrides},registry:{enumerable,value:registry},version:{enumerable,value:version},getChart:{enumerable,value:getChart},register:{enumerable,value:(...n)=>{registry.add(...n),invalidatePlugins()}},unregister:{enumerable,value:(...n)=>{registry.remove(...n),invalidatePlugins()}}});function clipArc(n,e,t){const{startAngle:o,pixelMargin:l,x:d,y:h,outerRadius:g,innerRadius:m}=e;let y=l/g;n.beginPath(),n.arc(d,h,g,o-y,t+y),m>l?(y=l/m,n.arc(d,h,m,t+y,o-y,!0)):n.arc(d,h,l,t+HALF_PI,o-HALF_PI),n.closePath(),n.clip()}function toRadiusCorners(n){return _readValueToProps(n,["outerStart","outerEnd","innerStart","innerEnd"])}function parseBorderRadius$1(n,e,t,o){const l=toRadiusCorners(n.options.borderRadius),d=(t-e)/2,h=Math.min(d,o*e/2),g=m=>{const y=(t-Math.min(d,m))*o/2;return _limitValue(m,0,Math.min(d,y))};return{outerStart:g(l.outerStart),outerEnd:g(l.outerEnd),innerStart:_limitValue(l.innerStart,0,h),innerEnd:_limitValue(l.innerEnd,0,h)}}function rThetaToXY(n,e,t,o){return{x:t+n*Math.cos(e),y:o+n*Math.sin(e)}}function pathArc(n,e,t,o,l,d){const{x:h,y:g,startAngle:m,pixelMargin:y,innerRadius:b}=e,w=Math.max(e.outerRadius+o+t-y,0),E=b>0?b+o+t+y:0;let P=0;const $=l-m;if(o){const B=b>0?b-o:0,ee=w>0?w-o:0,ne=(B+ee)/2,z=ne!==0?$*ne/(ne+o):$;P=($-z)/2}const C=Math.max(.001,$*w-t/PI)/w,L=($-C)/2,W=m+L+P,Y=l-L-P,{outerStart:D,outerEnd:k,innerStart:F,innerEnd:ce}=parseBorderRadius$1(e,E,w,Y-W),q=w-D,te=w-k,Q=W+D/q,ie=Y-k/te,J=E+F,x=E+ce,I=W+F/J,R=Y-ce/x;if(n.beginPath(),d){if(n.arc(h,g,w,Q,ie),k>0){const ne=rThetaToXY(te,ie,h,g);n.arc(ne.x,ne.y,k,ie,Y+HALF_PI)}const B=rThetaToXY(x,Y,h,g);if(n.lineTo(B.x,B.y),ce>0){const ne=rThetaToXY(x,R,h,g);n.arc(ne.x,ne.y,ce,Y+HALF_PI,R+Math.PI)}if(n.arc(h,g,E,Y-ce/E,W+F/E,!0),F>0){const ne=rThetaToXY(J,I,h,g);n.arc(ne.x,ne.y,F,I+Math.PI,W-HALF_PI)}const ee=rThetaToXY(q,W,h,g);if(n.lineTo(ee.x,ee.y),D>0){const ne=rThetaToXY(q,Q,h,g);n.arc(ne.x,ne.y,D,W-HALF_PI,Q)}}else{n.moveTo(h,g);const B=Math.cos(Q)*w+h,ee=Math.sin(Q)*w+g;n.lineTo(B,ee);const ne=Math.cos(ie)*w+h,z=Math.sin(ie)*w+g;n.lineTo(ne,z)}n.closePath()}function drawArc(n,e,t,o,l){const{fullCircles:d,startAngle:h,circumference:g}=e;let m=e.endAngle;if(d){pathArc(n,e,t,o,h+TAU,l);for(let y=0;y<d;++y)n.fill();isNaN(g)||(m=h+g%TAU,g%TAU===0&&(m+=TAU))}return pathArc(n,e,t,o,m,l),n.fill(),m}function drawFullCircleBorders(n,e,t){const{x:o,y:l,startAngle:d,pixelMargin:h,fullCircles:g}=e,m=Math.max(e.outerRadius-h,0),y=e.innerRadius+h;let b;for(t&&clipArc(n,e,d+TAU),n.beginPath(),n.arc(o,l,y,d+TAU,d,!0),b=0;b<g;++b)n.stroke();for(n.beginPath(),n.arc(o,l,m,d,d+TAU),b=0;b<g;++b)n.stroke()}function drawBorder(n,e,t,o,l,d){const{options:h}=e,{borderWidth:g,borderJoinStyle:m}=h,y=h.borderAlign==="inner";g&&(y?(n.lineWidth=g*2,n.lineJoin=m||"round"):(n.lineWidth=g,n.lineJoin=m||"bevel"),e.fullCircles&&drawFullCircleBorders(n,e,y),y&&clipArc(n,e,l),pathArc(n,e,t,o,l,d),n.stroke())}class ArcElement extends Element{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,o){const l=this.getProps(["x","y"],o),{angle:d,distance:h}=getAngleFromPoint(l,{x:e,y:t}),{startAngle:g,endAngle:m,innerRadius:y,outerRadius:b,circumference:w}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],o),E=this.options.spacing/2,$=valueOrDefault(w,m-g)>=TAU||_angleBetween(d,g,m),C=_isBetween(h,y+E,b+E);return $&&C}getCenterPoint(e){const{x:t,y:o,startAngle:l,endAngle:d,innerRadius:h,outerRadius:g}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:m,spacing:y}=this.options,b=(l+d)/2,w=(h+g+y+m)/2;return{x:t+Math.cos(b)*w,y:o+Math.sin(b)*w}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:o}=this,l=(t.offset||0)/2,d=(t.spacing||0)/2,h=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=o>TAU?Math.floor(o/TAU):0,o===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let g=0;if(l){g=l/2;const y=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(y)*g,Math.sin(y)*g),this.circumference>=PI&&(g=l)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;const m=drawArc(e,this,g,d,h);drawBorder(e,this,g,d,m,h),e.restore()}}ArcElement.id="arc";ArcElement.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};ArcElement.defaultRoutes={backgroundColor:"backgroundColor"};function setStyle(n,e,t=e){n.lineCap=valueOrDefault(t.borderCapStyle,e.borderCapStyle),n.setLineDash(valueOrDefault(t.borderDash,e.borderDash)),n.lineDashOffset=valueOrDefault(t.borderDashOffset,e.borderDashOffset),n.lineJoin=valueOrDefault(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=valueOrDefault(t.borderWidth,e.borderWidth),n.strokeStyle=valueOrDefault(t.borderColor,e.borderColor)}function lineTo(n,e,t){n.lineTo(t.x,t.y)}function getLineMethod(n){return n.stepped?_steppedLineTo:n.tension||n.cubicInterpolationMode==="monotone"?_bezierCurveTo:lineTo}function pathVars(n,e,t={}){const o=n.length,{start:l=0,end:d=o-1}=t,{start:h,end:g}=e,m=Math.max(l,h),y=Math.min(d,g),b=l<h&&d<h||l>g&&d>g;return{count:o,start:m,loop:e.loop,ilen:y<m&&!b?o+y-m:y-m}}function pathSegment(n,e,t,o){const{points:l,options:d}=e,{count:h,start:g,loop:m,ilen:y}=pathVars(l,t,o),b=getLineMethod(d);let{move:w=!0,reverse:E}=o||{},P,$,C;for(P=0;P<=y;++P)$=l[(g+(E?y-P:P))%h],!$.skip&&(w?(n.moveTo($.x,$.y),w=!1):b(n,C,$,E,d.stepped),C=$);return m&&($=l[(g+(E?y:0))%h],b(n,C,$,E,d.stepped)),!!m}function fastPathSegment(n,e,t,o){const l=e.points,{count:d,start:h,ilen:g}=pathVars(l,t,o),{move:m=!0,reverse:y}=o||{};let b=0,w=0,E,P,$,C,L,W;const Y=k=>(h+(y?g-k:k))%d,D=()=>{C!==L&&(n.lineTo(b,L),n.lineTo(b,C),n.lineTo(b,W))};for(m&&(P=l[Y(0)],n.moveTo(P.x,P.y)),E=0;E<=g;++E){if(P=l[Y(E)],P.skip)continue;const k=P.x,F=P.y,ce=k|0;ce===$?(F<C?C=F:F>L&&(L=F),b=(w*b+k)/++w):(D(),n.lineTo(k,F),$=ce,w=0,C=L=F),W=F}D()}function _getSegmentMethod(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?fastPathSegment:pathSegment}function _getInterpolationMethod(n){return n.stepped?_steppedInterpolation:n.tension||n.cubicInterpolationMode==="monotone"?_bezierInterpolation:_pointInLine}function strokePathWithCache(n,e,t,o){let l=e._path;l||(l=e._path=new Path2D,e.path(l,t,o)&&l.closePath()),setStyle(n,e.options),n.stroke(l)}function strokePathDirect(n,e,t,o){const{segments:l,options:d}=e,h=_getSegmentMethod(e);for(const g of l)setStyle(n,d,g.style),n.beginPath(),h(n,e,g,{start:t,end:t+o-1})&&n.closePath(),n.stroke()}const usePath2D=typeof Path2D=="function";function draw(n,e,t,o){usePath2D&&!e.options.segment?strokePathWithCache(n,e,t,o):strokePathDirect(n,e,t,o)}class LineElement extends Element{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const o=this.options;if((o.tension||o.cubicInterpolationMode==="monotone")&&!o.stepped&&!this._pointsUpdated){const l=o.spanGaps?this._loop:this._fullLoop;_updateBezierControlPoints(this._points,o,e,l,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_computeSegments(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,o=e.length;return o&&t[e[o-1].end]}interpolate(e,t){const o=this.options,l=e[t],d=this.points,h=_boundSegments(this,{property:t,start:l,end:l});if(!h.length)return;const g=[],m=_getInterpolationMethod(o);let y,b;for(y=0,b=h.length;y<b;++y){const{start:w,end:E}=h[y],P=d[w],$=d[E];if(P===$){g.push(P);continue}const C=Math.abs((l-P[t])/($[t]-P[t])),L=m(P,$,C,o.stepped);L[t]=e[t],g.push(L)}return g.length===1?g[0]:g}pathSegment(e,t,o){return _getSegmentMethod(this)(e,this,t,o)}path(e,t,o){const l=this.segments,d=_getSegmentMethod(this);let h=this._loop;t=t||0,o=o||this.points.length-t;for(const g of l)h&=d(e,this,g,{start:t,end:t+o-1});return!!h}draw(e,t,o,l){const d=this.options||{};(this.points||[]).length&&d.borderWidth&&(e.save(),draw(e,this,o,l),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}LineElement.id="line";LineElement.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};LineElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};LineElement.descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"&&n!=="fill"};function inRange$1(n,e,t,o){const l=n.options,{[t]:d}=n.getProps([t],o);return Math.abs(e-d)<l.radius+l.hitRadius}class PointElement extends Element{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,o){const l=this.options,{x:d,y:h}=this.getProps(["x","y"],o);return Math.pow(e-d,2)+Math.pow(t-h,2)<Math.pow(l.hitRadius+l.radius,2)}inXRange(e,t){return inRange$1(this,e,"x",t)}inYRange(e,t){return inRange$1(this,e,"y",t)}getCenterPoint(e){const{x:t,y:o}=this.getProps(["x","y"],e);return{x:t,y:o}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const o=t&&e.borderWidth||0;return(t+o)*2}draw(e,t){const o=this.options;this.skip||o.radius<.1||!_isPointInArea(this,t,this.size(o)/2)||(e.strokeStyle=o.borderColor,e.lineWidth=o.borderWidth,e.fillStyle=o.backgroundColor,drawPoint(e,o,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}PointElement.id="point";PointElement.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};PointElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function getBarBounds(n,e){const{x:t,y:o,base:l,width:d,height:h}=n.getProps(["x","y","base","width","height"],e);let g,m,y,b,w;return n.horizontal?(w=h/2,g=Math.min(t,l),m=Math.max(t,l),y=o-w,b=o+w):(w=d/2,g=t-w,m=t+w,y=Math.min(o,l),b=Math.max(o,l)),{left:g,top:y,right:m,bottom:b}}function skipOrLimit(n,e,t,o){return n?0:_limitValue(e,t,o)}function parseBorderWidth(n,e,t){const o=n.options.borderWidth,l=n.borderSkipped,d=toTRBL(o);return{t:skipOrLimit(l.top,d.top,0,t),r:skipOrLimit(l.right,d.right,0,e),b:skipOrLimit(l.bottom,d.bottom,0,t),l:skipOrLimit(l.left,d.left,0,e)}}function parseBorderRadius(n,e,t){const{enableBorderRadius:o}=n.getProps(["enableBorderRadius"]),l=n.options.borderRadius,d=toTRBLCorners(l),h=Math.min(e,t),g=n.borderSkipped,m=o||isObject(l);return{topLeft:skipOrLimit(!m||g.top||g.left,d.topLeft,0,h),topRight:skipOrLimit(!m||g.top||g.right,d.topRight,0,h),bottomLeft:skipOrLimit(!m||g.bottom||g.left,d.bottomLeft,0,h),bottomRight:skipOrLimit(!m||g.bottom||g.right,d.bottomRight,0,h)}}function boundingRects(n){const e=getBarBounds(n),t=e.right-e.left,o=e.bottom-e.top,l=parseBorderWidth(n,t/2,o/2),d=parseBorderRadius(n,t/2,o/2);return{outer:{x:e.left,y:e.top,w:t,h:o,radius:d},inner:{x:e.left+l.l,y:e.top+l.t,w:t-l.l-l.r,h:o-l.t-l.b,radius:{topLeft:Math.max(0,d.topLeft-Math.max(l.t,l.l)),topRight:Math.max(0,d.topRight-Math.max(l.t,l.r)),bottomLeft:Math.max(0,d.bottomLeft-Math.max(l.b,l.l)),bottomRight:Math.max(0,d.bottomRight-Math.max(l.b,l.r))}}}}function inRange(n,e,t,o){const l=e===null,d=t===null,g=n&&!(l&&d)&&getBarBounds(n,o);return g&&(l||_isBetween(e,g.left,g.right))&&(d||_isBetween(t,g.top,g.bottom))}function hasRadius(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function addNormalRectPath(n,e){n.rect(e.x,e.y,e.w,e.h)}function inflateRect(n,e,t={}){const o=n.x!==t.x?-e:0,l=n.y!==t.y?-e:0,d=(n.x+n.w!==t.x+t.w?e:0)-o,h=(n.y+n.h!==t.y+t.h?e:0)-l;return{x:n.x+o,y:n.y+l,w:n.w+d,h:n.h+h,radius:n.radius}}class BarElement extends Element{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:o,backgroundColor:l}}=this,{inner:d,outer:h}=boundingRects(this),g=hasRadius(h.radius)?addRoundedRectPath:addNormalRectPath;e.save(),(h.w!==d.w||h.h!==d.h)&&(e.beginPath(),g(e,inflateRect(h,t,d)),e.clip(),g(e,inflateRect(d,-t,h)),e.fillStyle=o,e.fill("evenodd")),e.beginPath(),g(e,inflateRect(d,t)),e.fillStyle=l,e.fill(),e.restore()}inRange(e,t,o){return inRange(this,e,t,o)}inXRange(e,t){return inRange(this,e,null,t)}inYRange(e,t){return inRange(this,null,e,t)}getCenterPoint(e){const{x:t,y:o,base:l,horizontal:d}=this.getProps(["x","y","base","horizontal"],e);return{x:d?(t+l)/2:t,y:d?o:(o+l)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}BarElement.id="bar";BarElement.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};BarElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var elements=Object.freeze({__proto__:null,ArcElement,LineElement,PointElement,BarElement});function lttbDecimation(n,e,t,o,l){const d=l.samples||o;if(d>=t)return n.slice(e,e+t);const h=[],g=(t-2)/(d-2);let m=0;const y=e+t-1;let b=e,w,E,P,$,C;for(h[m++]=n[b],w=0;w<d-2;w++){let L=0,W=0,Y;const D=Math.floor((w+1)*g)+1+e,k=Math.min(Math.floor((w+2)*g)+1,t)+e,F=k-D;for(Y=D;Y<k;Y++)L+=n[Y].x,W+=n[Y].y;L/=F,W/=F;const ce=Math.floor(w*g)+1+e,q=Math.min(Math.floor((w+1)*g)+1,t)+e,{x:te,y:Q}=n[b];for(P=$=-1,Y=ce;Y<q;Y++)$=.5*Math.abs((te-L)*(n[Y].y-Q)-(te-n[Y].x)*(W-Q)),$>P&&(P=$,E=n[Y],C=Y);h[m++]=E,b=C}return h[m++]=n[y],h}function minMaxDecimation(n,e,t,o){let l=0,d=0,h,g,m,y,b,w,E,P,$,C;const L=[],W=e+t-1,Y=n[e].x,k=n[W].x-Y;for(h=e;h<e+t;++h){g=n[h],m=(g.x-Y)/k*o,y=g.y;const F=m|0;if(F===b)y<$?($=y,w=h):y>C&&(C=y,E=h),l=(d*l+g.x)/++d;else{const ce=h-1;if(!isNullOrUndef(w)&&!isNullOrUndef(E)){const q=Math.min(w,E),te=Math.max(w,E);q!==P&&q!==ce&&L.push({...n[q],x:l}),te!==P&&te!==ce&&L.push({...n[te],x:l})}h>0&&ce!==P&&L.push(n[ce]),L.push(g),b=F,d=0,$=C=y,w=E=P=h}}return L}function cleanDecimatedDataset(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{value:e})}}function cleanDecimatedData(n){n.data.datasets.forEach(e=>{cleanDecimatedDataset(e)})}function getStartAndCountOfVisiblePointsSimplified(n,e){const t=e.length;let o=0,l;const{iScale:d}=n,{min:h,max:g,minDefined:m,maxDefined:y}=d.getUserBounds();return m&&(o=_limitValue(_lookupByKey(e,d.axis,h).lo,0,t-1)),y?l=_limitValue(_lookupByKey(e,d.axis,g).hi+1,o,t)-o:l=t-o,{start:o,count:l}}var plugin_decimation={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){cleanDecimatedData(n);return}const o=n.width;n.data.datasets.forEach((l,d)=>{const{_data:h,indexAxis:g}=l,m=n.getDatasetMeta(d),y=h||l.data;if(resolve([g,n.options.indexAxis])==="y"||!m.controller.supportsDecimation)return;const b=n.scales[m.xAxisID];if(b.type!=="linear"&&b.type!=="time"||n.options.parsing)return;let{start:w,count:E}=getStartAndCountOfVisiblePointsSimplified(m,y);const P=t.threshold||4*o;if(E<=P){cleanDecimatedDataset(l);return}isNullOrUndef(h)&&(l._data=y,delete l.data,Object.defineProperty(l,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(C){this._data=C}}));let $;switch(t.algorithm){case"lttb":$=lttbDecimation(y,w,E,o,t);break;case"min-max":$=minMaxDecimation(y,w,E,o);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}l._decimated=$})},destroy(n){cleanDecimatedData(n)}};function _segments(n,e,t){const o=n.segments,l=n.points,d=e.points,h=[];for(const g of o){let{start:m,end:y}=g;y=_findSegmentEnd(m,y,l);const b=_getBounds(t,l[m],l[y],g.loop);if(!e.segments){h.push({source:g,target:b,start:l[m],end:l[y]});continue}const w=_boundSegments(e,b);for(const E of w){const P=_getBounds(t,d[E.start],d[E.end],E.loop),$=_boundSegment(g,l,P);for(const C of $)h.push({source:C,target:E,start:{[t]:_getEdge(b,P,"start",Math.max)},end:{[t]:_getEdge(b,P,"end",Math.min)}})}}return h}function _getBounds(n,e,t,o){if(o)return;let l=e[n],d=t[n];return n==="angle"&&(l=_normalizeAngle(l),d=_normalizeAngle(d)),{property:n,start:l,end:d}}function _pointsFromSegments(n,e){const{x:t=null,y:o=null}=n||{},l=e.points,d=[];return e.segments.forEach(({start:h,end:g})=>{g=_findSegmentEnd(h,g,l);const m=l[h],y=l[g];o!==null?(d.push({x:m.x,y:o}),d.push({x:y.x,y:o})):t!==null&&(d.push({x:t,y:m.y}),d.push({x:t,y:y.y}))}),d}function _findSegmentEnd(n,e,t){for(;e>n;e--){const o=t[e];if(!isNaN(o.x)&&!isNaN(o.y))break}return e}function _getEdge(n,e,t,o){return n&&e?o(n[t],e[t]):n?n[t]:e?e[t]:0}function _createBoundaryLine(n,e){let t=[],o=!1;return isArray(n)?(o=!0,t=n):t=_pointsFromSegments(n,e),t.length?new LineElement({points:t,options:{tension:0},_loop:o,_fullLoop:o}):null}function _shouldApplyFill(n){return n&&n.fill!==!1}function _resolveTarget(n,e,t){let l=n[e].fill;const d=[e];let h;if(!t)return l;for(;l!==!1&&d.indexOf(l)===-1;){if(!isNumberFinite(l))return l;if(h=n[l],!h)return!1;if(h.visible)return l;d.push(l),l=h.fill}return!1}function _decodeFill(n,e,t){const o=parseFillOption(n);if(isObject(o))return isNaN(o.value)?!1:o;let l=parseFloat(o);return isNumberFinite(l)&&Math.floor(l)===l?decodeTargetIndex(o[0],e,l,t):["origin","start","end","stack","shape"].indexOf(o)>=0&&o}function decodeTargetIndex(n,e,t,o){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=o?!1:t}function _getTargetPixel(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:isObject(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function _getTargetValue(n,e,t){let o;return n==="start"?o=t:n==="end"?o=e.options.reverse?e.min:e.max:isObject(n)?o=n.value:o=e.getBaseValue(),o}function parseFillOption(n){const e=n.options,t=e.fill;let o=valueOrDefault(t&&t.target,t);return o===void 0&&(o=!!e.backgroundColor),o===!1||o===null?!1:o===!0?"origin":o}function _buildStackLine(n){const{scale:e,index:t,line:o}=n,l=[],d=o.segments,h=o.points,g=getLinesBelow(e,t);g.push(_createBoundaryLine({x:null,y:e.bottom},o));for(let m=0;m<d.length;m++){const y=d[m];for(let b=y.start;b<=y.end;b++)addPointsBelow(l,h[b],g)}return new LineElement({points:l,options:{}})}function getLinesBelow(n,e){const t=[],o=n.getMatchingVisibleMetas("line");for(let l=0;l<o.length;l++){const d=o[l];if(d.index===e)break;d.hidden||t.unshift(d.dataset)}return t}function addPointsBelow(n,e,t){const o=[];for(let l=0;l<t.length;l++){const d=t[l],{first:h,last:g,point:m}=findPoint(d,e,"x");if(!(!m||h&&g)){if(h)o.unshift(m);else if(n.push(m),!g)break}}n.push(...o)}function findPoint(n,e,t){const o=n.interpolate(e,t);if(!o)return{};const l=o[t],d=n.segments,h=n.points;let g=!1,m=!1;for(let y=0;y<d.length;y++){const b=d[y],w=h[b.start][t],E=h[b.end][t];if(_isBetween(l,w,E)){g=l===w,m=l===E;break}}return{first:g,last:m,point:o}}class simpleArc{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,o){const{x:l,y:d,radius:h}=this;return t=t||{start:0,end:TAU},e.arc(l,d,h,t.end,t.start,!0),!o.bounds}interpolate(e){const{x:t,y:o,radius:l}=this,d=e.angle;return{x:t+Math.cos(d)*l,y:o+Math.sin(d)*l,angle:d}}}function _getTarget(n){const{chart:e,fill:t,line:o}=n;if(isNumberFinite(t))return getLineByIndex(e,t);if(t==="stack")return _buildStackLine(n);if(t==="shape")return!0;const l=computeBoundary(n);return l instanceof simpleArc?l:_createBoundaryLine(l,o)}function getLineByIndex(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function computeBoundary(n){return(n.scale||{}).getPointPositionForValue?computeCircularBoundary(n):computeLinearBoundary(n)}function computeLinearBoundary(n){const{scale:e={},fill:t}=n,o=_getTargetPixel(t,e);if(isNumberFinite(o)){const l=e.isHorizontal();return{x:l?o:null,y:l?null:o}}return null}function computeCircularBoundary(n){const{scale:e,fill:t}=n,o=e.options,l=e.getLabels().length,d=o.reverse?e.max:e.min,h=_getTargetValue(t,e,d),g=[];if(o.grid.circular){const m=e.getPointPositionForValue(0,d);return new simpleArc({x:m.x,y:m.y,radius:e.getDistanceFromCenterForValue(h)})}for(let m=0;m<l;++m)g.push(e.getPointPositionForValue(m,h));return g}function _drawfill(n,e,t){const o=_getTarget(e),{line:l,scale:d,axis:h}=e,g=l.options,m=g.fill,y=g.backgroundColor,{above:b=y,below:w=y}=m||{};o&&l.points.length&&(clipArea(n,t),doFill(n,{line:l,target:o,above:b,below:w,area:t,scale:d,axis:h}),unclipArea(n))}function doFill(n,e){const{line:t,target:o,above:l,below:d,area:h,scale:g}=e,m=t._loop?"angle":e.axis;n.save(),m==="x"&&d!==l&&(clipVertical(n,o,h.top),fill(n,{line:t,target:o,color:l,scale:g,property:m}),n.restore(),n.save(),clipVertical(n,o,h.bottom)),fill(n,{line:t,target:o,color:d,scale:g,property:m}),n.restore()}function clipVertical(n,e,t){const{segments:o,points:l}=e;let d=!0,h=!1;n.beginPath();for(const g of o){const{start:m,end:y}=g,b=l[m],w=l[_findSegmentEnd(m,y,l)];d?(n.moveTo(b.x,b.y),d=!1):(n.lineTo(b.x,t),n.lineTo(b.x,b.y)),h=!!e.pathSegment(n,g,{move:h}),h?n.closePath():n.lineTo(w.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function fill(n,e){const{line:t,target:o,property:l,color:d,scale:h}=e,g=_segments(t,o,l);for(const{source:m,target:y,start:b,end:w}of g){const{style:{backgroundColor:E=d}={}}=m,P=o!==!0;n.save(),n.fillStyle=E,clipBounds(n,h,P&&_getBounds(l,b,w)),n.beginPath();const $=!!t.pathSegment(n,m);let C;if(P){$?n.closePath():interpolatedLineTo(n,o,w,l);const L=!!o.pathSegment(n,y,{move:$,reverse:!0});C=$&&L,C||interpolatedLineTo(n,o,b,l)}n.closePath(),n.fill(C?"evenodd":"nonzero"),n.restore()}}function clipBounds(n,e,t){const{top:o,bottom:l}=e.chart.chartArea,{property:d,start:h,end:g}=t||{};d==="x"&&(n.beginPath(),n.rect(h,o,g-h,l-o),n.clip())}function interpolatedLineTo(n,e,t,o){const l=e.interpolate(t,o);l&&n.lineTo(l.x,l.y)}var index={id:"filler",afterDatasetsUpdate(n,e,t){const o=(n.data.datasets||[]).length,l=[];let d,h,g,m;for(h=0;h<o;++h)d=n.getDatasetMeta(h),g=d.dataset,m=null,g&&g.options&&g instanceof LineElement&&(m={visible:n.isDatasetVisible(h),index:h,fill:_decodeFill(g,h,o),chart:n,axis:d.controller.options.indexAxis,scale:d.vScale,line:g}),d.$filler=m,l.push(m);for(h=0;h<o;++h)m=l[h],!(!m||m.fill===!1)&&(m.fill=_resolveTarget(l,h,t.propagate))},beforeDraw(n,e,t){const o=t.drawTime==="beforeDraw",l=n.getSortedVisibleDatasetMetas(),d=n.chartArea;for(let h=l.length-1;h>=0;--h){const g=l[h].$filler;g&&(g.line.updateControlPoints(d,g.axis),o&&g.fill&&_drawfill(n.ctx,g,d))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const o=n.getSortedVisibleDatasetMetas();for(let l=o.length-1;l>=0;--l){const d=o[l].$filler;_shouldApplyFill(d)&&_drawfill(n.ctx,d,n.chartArea)}},beforeDatasetDraw(n,e,t){const o=e.meta.$filler;!_shouldApplyFill(o)||t.drawTime!=="beforeDatasetDraw"||_drawfill(n.ctx,o,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const getBoxSize=(n,e)=>{let{boxHeight:t=e,boxWidth:o=e}=n;return n.usePointStyle&&(t=Math.min(t,e),o=n.pointStyleWidth||Math.min(o,e)),{boxWidth:o,boxHeight:t,itemHeight:Math.max(e,t)}},itemsEqual=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class Legend extends Element{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,o){this.maxWidth=e,this.maxHeight=t,this._margins=o,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=callback(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(o=>e.filter(o,this.chart.data))),e.sort&&(t=t.sort((o,l)=>e.sort(o,l,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const o=e.labels,l=toFont(o.font),d=l.size,h=this._computeTitleHeight(),{boxWidth:g,itemHeight:m}=getBoxSize(o,d);let y,b;t.font=l.string,this.isHorizontal()?(y=this.maxWidth,b=this._fitRows(h,d,g,m)+10):(b=this.maxHeight,y=this._fitCols(h,d,g,m)+10),this.width=Math.min(y,e.maxWidth||this.maxWidth),this.height=Math.min(b,e.maxHeight||this.maxHeight)}_fitRows(e,t,o,l){const{ctx:d,maxWidth:h,options:{labels:{padding:g}}}=this,m=this.legendHitBoxes=[],y=this.lineWidths=[0],b=l+g;let w=e;d.textAlign="left",d.textBaseline="middle";let E=-1,P=-b;return this.legendItems.forEach(($,C)=>{const L=o+t/2+d.measureText($.text).width;(C===0||y[y.length-1]+L+2*g>h)&&(w+=b,y[y.length-(C>0?0:1)]=0,P+=b,E++),m[C]={left:0,top:P,row:E,width:L,height:l},y[y.length-1]+=L+g}),w}_fitCols(e,t,o,l){const{ctx:d,maxHeight:h,options:{labels:{padding:g}}}=this,m=this.legendHitBoxes=[],y=this.columnSizes=[],b=h-e;let w=g,E=0,P=0,$=0,C=0;return this.legendItems.forEach((L,W)=>{const Y=o+t/2+d.measureText(L.text).width;W>0&&P+l+2*g>b&&(w+=E+g,y.push({width:E,height:P}),$+=E+g,C++,E=P=0),m[W]={left:$,top:P,col:C,width:Y,height:l},E=Math.max(E,Y),P+=l+g}),w+=E,y.push({width:E,height:P}),w}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:o,labels:{padding:l},rtl:d}}=this,h=getRtlAdapter(d,this.left,this.width);if(this.isHorizontal()){let g=0,m=_alignStartEnd(o,this.left+l,this.right-this.lineWidths[g]);for(const y of t)g!==y.row&&(g=y.row,m=_alignStartEnd(o,this.left+l,this.right-this.lineWidths[g])),y.top+=this.top+e+l,y.left=h.leftForLtr(h.x(m),y.width),m+=y.width+l}else{let g=0,m=_alignStartEnd(o,this.top+e+l,this.bottom-this.columnSizes[g].height);for(const y of t)y.col!==g&&(g=y.col,m=_alignStartEnd(o,this.top+e+l,this.bottom-this.columnSizes[g].height)),y.top=m,y.left+=this.left+l,y.left=h.leftForLtr(h.x(y.left),y.width),m+=y.height+l}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;clipArea(e,this),this._draw(),unclipArea(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:o,ctx:l}=this,{align:d,labels:h}=e,g=defaults.color,m=getRtlAdapter(e.rtl,this.left,this.width),y=toFont(h.font),{color:b,padding:w}=h,E=y.size,P=E/2;let $;this.drawTitle(),l.textAlign=m.textAlign("left"),l.textBaseline="middle",l.lineWidth=.5,l.font=y.string;const{boxWidth:C,boxHeight:L,itemHeight:W}=getBoxSize(h,E),Y=function(q,te,Q){if(isNaN(C)||C<=0||isNaN(L)||L<0)return;l.save();const ie=valueOrDefault(Q.lineWidth,1);if(l.fillStyle=valueOrDefault(Q.fillStyle,g),l.lineCap=valueOrDefault(Q.lineCap,"butt"),l.lineDashOffset=valueOrDefault(Q.lineDashOffset,0),l.lineJoin=valueOrDefault(Q.lineJoin,"miter"),l.lineWidth=ie,l.strokeStyle=valueOrDefault(Q.strokeStyle,g),l.setLineDash(valueOrDefault(Q.lineDash,[])),h.usePointStyle){const J={radius:L*Math.SQRT2/2,pointStyle:Q.pointStyle,rotation:Q.rotation,borderWidth:ie},x=m.xPlus(q,C/2),I=te+P;drawPointLegend(l,J,x,I,h.pointStyleWidth&&C)}else{const J=te+Math.max((E-L)/2,0),x=m.leftForLtr(q,C),I=toTRBLCorners(Q.borderRadius);l.beginPath(),Object.values(I).some(R=>R!==0)?addRoundedRectPath(l,{x,y:J,w:C,h:L,radius:I}):l.rect(x,J,C,L),l.fill(),ie!==0&&l.stroke()}l.restore()},D=function(q,te,Q){renderText(l,Q.text,q,te+W/2,y,{strikethrough:Q.hidden,textAlign:m.textAlign(Q.textAlign)})},k=this.isHorizontal(),F=this._computeTitleHeight();k?$={x:_alignStartEnd(d,this.left+w,this.right-o[0]),y:this.top+w+F,line:0}:$={x:this.left+w,y:_alignStartEnd(d,this.top+F+w,this.bottom-t[0].height),line:0},overrideTextDirection(this.ctx,e.textDirection);const ce=W+w;this.legendItems.forEach((q,te)=>{l.strokeStyle=q.fontColor||b,l.fillStyle=q.fontColor||b;const Q=l.measureText(q.text).width,ie=m.textAlign(q.textAlign||(q.textAlign=h.textAlign)),J=C+P+Q;let x=$.x,I=$.y;m.setWidth(this.width),k?te>0&&x+J+w>this.right&&(I=$.y+=ce,$.line++,x=$.x=_alignStartEnd(d,this.left+w,this.right-o[$.line])):te>0&&I+ce>this.bottom&&(x=$.x=x+t[$.line].width+w,$.line++,I=$.y=_alignStartEnd(d,this.top+F+w,this.bottom-t[$.line].height));const R=m.x(x);Y(R,I,q),x=_textX(ie,x+C+P,k?x+J:this.right,e.rtl),D(m.x(x),I,q),k?$.x+=J+w:$.y+=ce}),restoreTextDirection(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,o=toFont(t.font),l=toPadding(t.padding);if(!t.display)return;const d=getRtlAdapter(e.rtl,this.left,this.width),h=this.ctx,g=t.position,m=o.size/2,y=l.top+m;let b,w=this.left,E=this.width;if(this.isHorizontal())E=Math.max(...this.lineWidths),b=this.top+y,w=_alignStartEnd(e.align,w,this.right-E);else{const $=this.columnSizes.reduce((C,L)=>Math.max(C,L.height),0);b=y+_alignStartEnd(e.align,this.top,this.bottom-$-e.labels.padding-this._computeTitleHeight())}const P=_alignStartEnd(g,w,w+E);h.textAlign=d.textAlign(_toLeftRightCenter(g)),h.textBaseline="middle",h.strokeStyle=t.color,h.fillStyle=t.color,h.font=o.string,renderText(h,t.text,P,b,o)}_computeTitleHeight(){const e=this.options.title,t=toFont(e.font),o=toPadding(e.padding);return e.display?t.lineHeight+o.height:0}_getLegendItemAt(e,t){let o,l,d;if(_isBetween(e,this.left,this.right)&&_isBetween(t,this.top,this.bottom)){for(d=this.legendHitBoxes,o=0;o<d.length;++o)if(l=d[o],_isBetween(e,l.left,l.left+l.width)&&_isBetween(t,l.top,l.top+l.height))return this.legendItems[o]}return null}handleEvent(e){const t=this.options;if(!isListened(e.type,t))return;const o=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const l=this._hoveredItem,d=itemsEqual(l,o);l&&!d&&callback(t.onLeave,[e,l,this],this),this._hoveredItem=o,o&&!d&&callback(t.onHover,[e,o,this],this)}else o&&callback(t.onClick,[e,o,this],this)}}function isListened(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var plugin_legend={id:"legend",_element:Legend,start(n,e,t){const o=n.legend=new Legend({ctx:n.ctx,options:t,chart:n});layouts.configure(n,o,t),layouts.addBox(n,o)},stop(n){layouts.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const o=n.legend;layouts.configure(n,o,t),o.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const o=e.datasetIndex,l=t.chart;l.isDatasetVisible(o)?(l.hide(o),e.hidden=!0):(l.show(o),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:o,textAlign:l,color:d}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const g=h.controller.getStyle(t?0:void 0),m=toPadding(g.borderWidth);return{text:e[h.index].label,fillStyle:g.backgroundColor,fontColor:d,hidden:!h.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:g.borderColor,pointStyle:o||g.pointStyle,rotation:g.rotation,textAlign:l||g.textAlign,borderRadius:0,datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Title extends Element{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const o=this.options;if(this.left=0,this.top=0,!o.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const l=isArray(o.text)?o.text.length:1;this._padding=toPadding(o.padding);const d=l*toFont(o.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=d:this.width=d}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:o,bottom:l,right:d,options:h}=this,g=h.align;let m=0,y,b,w;return this.isHorizontal()?(b=_alignStartEnd(g,o,d),w=t+e,y=d-o):(h.position==="left"?(b=o+e,w=_alignStartEnd(g,l,t),m=PI*-.5):(b=d-e,w=_alignStartEnd(g,t,l),m=PI*.5),y=l-t),{titleX:b,titleY:w,maxWidth:y,rotation:m}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const o=toFont(t.font),d=o.lineHeight/2+this._padding.top,{titleX:h,titleY:g,maxWidth:m,rotation:y}=this._drawArgs(d);renderText(e,t.text,0,0,o,{color:t.color,maxWidth:m,rotation:y,textAlign:_toLeftRightCenter(t.align),textBaseline:"middle",translation:[h,g]})}}function createTitle(n,e){const t=new Title({ctx:n.ctx,options:e,chart:n});layouts.configure(n,t,e),layouts.addBox(n,t),n.titleBlock=t}var plugin_title={id:"title",_element:Title,start(n,e,t){createTitle(n,t)},stop(n){const e=n.titleBlock;layouts.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const o=n.titleBlock;layouts.configure(n,o,t),o.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const map=new WeakMap;var plugin_subtitle={id:"subtitle",start(n,e,t){const o=new Title({ctx:n.ctx,options:t,chart:n});layouts.configure(n,o,t),layouts.addBox(n,o),map.set(n,o)},stop(n){layouts.removeBox(n,map.get(n)),map.delete(n)},beforeUpdate(n,e,t){const o=map.get(n);layouts.configure(n,o,t),o.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const positioners={average(n){if(!n.length)return!1;let e,t,o=0,l=0,d=0;for(e=0,t=n.length;e<t;++e){const h=n[e].element;if(h&&h.hasValue()){const g=h.tooltipPosition();o+=g.x,l+=g.y,++d}}return{x:o/d,y:l/d}},nearest(n,e){if(!n.length)return!1;let t=e.x,o=e.y,l=Number.POSITIVE_INFINITY,d,h,g;for(d=0,h=n.length;d<h;++d){const m=n[d].element;if(m&&m.hasValue()){const y=m.getCenterPoint(),b=distanceBetweenPoints(e,y);b<l&&(l=b,g=m)}}if(g){const m=g.tooltipPosition();t=m.x,o=m.y}return{x:t,y:o}}};function pushOrConcat(n,e){return e&&(isArray(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function splitNewlines(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function createTooltipItem(n,e){const{element:t,datasetIndex:o,index:l}=e,d=n.getDatasetMeta(o).controller,{label:h,value:g}=d.getLabelAndValue(l);return{chart:n,label:h,parsed:d.getParsed(l),raw:n.data.datasets[o].data[l],formattedValue:g,dataset:d.getDataset(),dataIndex:l,datasetIndex:o,element:t}}function getTooltipSize(n,e){const t=n.chart.ctx,{body:o,footer:l,title:d}=n,{boxWidth:h,boxHeight:g}=e,m=toFont(e.bodyFont),y=toFont(e.titleFont),b=toFont(e.footerFont),w=d.length,E=l.length,P=o.length,$=toPadding(e.padding);let C=$.height,L=0,W=o.reduce((k,F)=>k+F.before.length+F.lines.length+F.after.length,0);if(W+=n.beforeBody.length+n.afterBody.length,w&&(C+=w*y.lineHeight+(w-1)*e.titleSpacing+e.titleMarginBottom),W){const k=e.displayColors?Math.max(g,m.lineHeight):m.lineHeight;C+=P*k+(W-P)*m.lineHeight+(W-1)*e.bodySpacing}E&&(C+=e.footerMarginTop+E*b.lineHeight+(E-1)*e.footerSpacing);let Y=0;const D=function(k){L=Math.max(L,t.measureText(k).width+Y)};return t.save(),t.font=y.string,each(n.title,D),t.font=m.string,each(n.beforeBody.concat(n.afterBody),D),Y=e.displayColors?h+2+e.boxPadding:0,each(o,k=>{each(k.before,D),each(k.lines,D),each(k.after,D)}),Y=0,t.font=b.string,each(n.footer,D),t.restore(),L+=$.width,{width:L,height:C}}function determineYAlign(n,e){const{y:t,height:o}=e;return t<o/2?"top":t>n.height-o/2?"bottom":"center"}function doesNotFitWithAlign(n,e,t,o){const{x:l,width:d}=o,h=t.caretSize+t.caretPadding;if(n==="left"&&l+d+h>e.width||n==="right"&&l-d-h<0)return!0}function determineXAlign(n,e,t,o){const{x:l,width:d}=t,{width:h,chartArea:{left:g,right:m}}=n;let y="center";return o==="center"?y=l<=(g+m)/2?"left":"right":l<=d/2?y="left":l>=h-d/2&&(y="right"),doesNotFitWithAlign(y,n,e,t)&&(y="center"),y}function determineAlignment(n,e,t){const o=t.yAlign||e.yAlign||determineYAlign(n,t);return{xAlign:t.xAlign||e.xAlign||determineXAlign(n,e,t,o),yAlign:o}}function alignX(n,e){let{x:t,width:o}=n;return e==="right"?t-=o:e==="center"&&(t-=o/2),t}function alignY(n,e,t){let{y:o,height:l}=n;return e==="top"?o+=t:e==="bottom"?o-=l+t:o-=l/2,o}function getBackgroundPoint(n,e,t,o){const{caretSize:l,caretPadding:d,cornerRadius:h}=n,{xAlign:g,yAlign:m}=t,y=l+d,{topLeft:b,topRight:w,bottomLeft:E,bottomRight:P}=toTRBLCorners(h);let $=alignX(e,g);const C=alignY(e,m,y);return m==="center"?g==="left"?$+=y:g==="right"&&($-=y):g==="left"?$-=Math.max(b,E)+l:g==="right"&&($+=Math.max(w,P)+l),{x:_limitValue($,0,o.width-e.width),y:_limitValue(C,0,o.height-e.height)}}function getAlignedX(n,e,t){const o=toPadding(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-o.right:n.x+o.left}function getBeforeAfterBodyLines(n){return pushOrConcat([],splitNewlines(n))}function createTooltipContext(n,e,t){return createContext(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function overrideCallbacks(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}class Tooltip extends Element{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,o=this.options.setContext(this.getContext()),l=o.enabled&&t.options.animation&&o.animations,d=new Animations(this.chart,l);return l._cacheable&&(this._cachedAnimations=Object.freeze(d)),d}getContext(){return this.$context||(this.$context=createTooltipContext(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:o}=t,l=o.beforeTitle.apply(this,[e]),d=o.title.apply(this,[e]),h=o.afterTitle.apply(this,[e]);let g=[];return g=pushOrConcat(g,splitNewlines(l)),g=pushOrConcat(g,splitNewlines(d)),g=pushOrConcat(g,splitNewlines(h)),g}getBeforeBody(e,t){return getBeforeAfterBodyLines(t.callbacks.beforeBody.apply(this,[e]))}getBody(e,t){const{callbacks:o}=t,l=[];return each(e,d=>{const h={before:[],lines:[],after:[]},g=overrideCallbacks(o,d);pushOrConcat(h.before,splitNewlines(g.beforeLabel.call(this,d))),pushOrConcat(h.lines,g.label.call(this,d)),pushOrConcat(h.after,splitNewlines(g.afterLabel.call(this,d))),l.push(h)}),l}getAfterBody(e,t){return getBeforeAfterBodyLines(t.callbacks.afterBody.apply(this,[e]))}getFooter(e,t){const{callbacks:o}=t,l=o.beforeFooter.apply(this,[e]),d=o.footer.apply(this,[e]),h=o.afterFooter.apply(this,[e]);let g=[];return g=pushOrConcat(g,splitNewlines(l)),g=pushOrConcat(g,splitNewlines(d)),g=pushOrConcat(g,splitNewlines(h)),g}_createItems(e){const t=this._active,o=this.chart.data,l=[],d=[],h=[];let g=[],m,y;for(m=0,y=t.length;m<y;++m)g.push(createTooltipItem(this.chart,t[m]));return e.filter&&(g=g.filter((b,w,E)=>e.filter(b,w,E,o))),e.itemSort&&(g=g.sort((b,w)=>e.itemSort(b,w,o))),each(g,b=>{const w=overrideCallbacks(e.callbacks,b);l.push(w.labelColor.call(this,b)),d.push(w.labelPointStyle.call(this,b)),h.push(w.labelTextColor.call(this,b))}),this.labelColors=l,this.labelPointStyles=d,this.labelTextColors=h,this.dataPoints=g,g}update(e,t){const o=this.options.setContext(this.getContext()),l=this._active;let d,h=[];if(!l.length)this.opacity!==0&&(d={opacity:0});else{const g=positioners[o.position].call(this,l,this._eventPosition);h=this._createItems(o),this.title=this.getTitle(h,o),this.beforeBody=this.getBeforeBody(h,o),this.body=this.getBody(h,o),this.afterBody=this.getAfterBody(h,o),this.footer=this.getFooter(h,o);const m=this._size=getTooltipSize(this,o),y=Object.assign({},g,m),b=determineAlignment(this.chart,o,y),w=getBackgroundPoint(o,y,b,this.chart);this.xAlign=b.xAlign,this.yAlign=b.yAlign,d={opacity:1,x:w.x,y:w.y,width:m.width,height:m.height,caretX:g.x,caretY:g.y}}this._tooltipItems=h,this.$context=void 0,d&&this._resolveAnimations().update(this,d),e&&o.external&&o.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,o,l){const d=this.getCaretPosition(e,o,l);t.lineTo(d.x1,d.y1),t.lineTo(d.x2,d.y2),t.lineTo(d.x3,d.y3)}getCaretPosition(e,t,o){const{xAlign:l,yAlign:d}=this,{caretSize:h,cornerRadius:g}=o,{topLeft:m,topRight:y,bottomLeft:b,bottomRight:w}=toTRBLCorners(g),{x:E,y:P}=e,{width:$,height:C}=t;let L,W,Y,D,k,F;return d==="center"?(k=P+C/2,l==="left"?(L=E,W=L-h,D=k+h,F=k-h):(L=E+$,W=L+h,D=k-h,F=k+h),Y=L):(l==="left"?W=E+Math.max(m,b)+h:l==="right"?W=E+$-Math.max(y,w)-h:W=this.caretX,d==="top"?(D=P,k=D-h,L=W-h,Y=W+h):(D=P+C,k=D+h,L=W+h,Y=W-h),F=D),{x1:L,x2:W,x3:Y,y1:D,y2:k,y3:F}}drawTitle(e,t,o){const l=this.title,d=l.length;let h,g,m;if(d){const y=getRtlAdapter(o.rtl,this.x,this.width);for(e.x=getAlignedX(this,o.titleAlign,o),t.textAlign=y.textAlign(o.titleAlign),t.textBaseline="middle",h=toFont(o.titleFont),g=o.titleSpacing,t.fillStyle=o.titleColor,t.font=h.string,m=0;m<d;++m)t.fillText(l[m],y.x(e.x),e.y+h.lineHeight/2),e.y+=h.lineHeight+g,m+1===d&&(e.y+=o.titleMarginBottom-g)}}_drawColorBox(e,t,o,l,d){const h=this.labelColors[o],g=this.labelPointStyles[o],{boxHeight:m,boxWidth:y,boxPadding:b}=d,w=toFont(d.bodyFont),E=getAlignedX(this,"left",d),P=l.x(E),$=m<w.lineHeight?(w.lineHeight-m)/2:0,C=t.y+$;if(d.usePointStyle){const L={radius:Math.min(y,m)/2,pointStyle:g.pointStyle,rotation:g.rotation,borderWidth:1},W=l.leftForLtr(P,y)+y/2,Y=C+m/2;e.strokeStyle=d.multiKeyBackground,e.fillStyle=d.multiKeyBackground,drawPoint(e,L,W,Y),e.strokeStyle=h.borderColor,e.fillStyle=h.backgroundColor,drawPoint(e,L,W,Y)}else{e.lineWidth=isObject(h.borderWidth)?Math.max(...Object.values(h.borderWidth)):h.borderWidth||1,e.strokeStyle=h.borderColor,e.setLineDash(h.borderDash||[]),e.lineDashOffset=h.borderDashOffset||0;const L=l.leftForLtr(P,y-b),W=l.leftForLtr(l.xPlus(P,1),y-b-2),Y=toTRBLCorners(h.borderRadius);Object.values(Y).some(D=>D!==0)?(e.beginPath(),e.fillStyle=d.multiKeyBackground,addRoundedRectPath(e,{x:L,y:C,w:y,h:m,radius:Y}),e.fill(),e.stroke(),e.fillStyle=h.backgroundColor,e.beginPath(),addRoundedRectPath(e,{x:W,y:C+1,w:y-2,h:m-2,radius:Y}),e.fill()):(e.fillStyle=d.multiKeyBackground,e.fillRect(L,C,y,m),e.strokeRect(L,C,y,m),e.fillStyle=h.backgroundColor,e.fillRect(W,C+1,y-2,m-2))}e.fillStyle=this.labelTextColors[o]}drawBody(e,t,o){const{body:l}=this,{bodySpacing:d,bodyAlign:h,displayColors:g,boxHeight:m,boxWidth:y,boxPadding:b}=o,w=toFont(o.bodyFont);let E=w.lineHeight,P=0;const $=getRtlAdapter(o.rtl,this.x,this.width),C=function(te){t.fillText(te,$.x(e.x+P),e.y+E/2),e.y+=E+d},L=$.textAlign(h);let W,Y,D,k,F,ce,q;for(t.textAlign=h,t.textBaseline="middle",t.font=w.string,e.x=getAlignedX(this,L,o),t.fillStyle=o.bodyColor,each(this.beforeBody,C),P=g&&L!=="right"?h==="center"?y/2+b:y+2+b:0,k=0,ce=l.length;k<ce;++k){for(W=l[k],Y=this.labelTextColors[k],t.fillStyle=Y,each(W.before,C),D=W.lines,g&&D.length&&(this._drawColorBox(t,e,k,$,o),E=Math.max(w.lineHeight,m)),F=0,q=D.length;F<q;++F)C(D[F]),E=w.lineHeight;each(W.after,C)}P=0,E=w.lineHeight,each(this.afterBody,C),e.y-=d}drawFooter(e,t,o){const l=this.footer,d=l.length;let h,g;if(d){const m=getRtlAdapter(o.rtl,this.x,this.width);for(e.x=getAlignedX(this,o.footerAlign,o),e.y+=o.footerMarginTop,t.textAlign=m.textAlign(o.footerAlign),t.textBaseline="middle",h=toFont(o.footerFont),t.fillStyle=o.footerColor,t.font=h.string,g=0;g<d;++g)t.fillText(l[g],m.x(e.x),e.y+h.lineHeight/2),e.y+=h.lineHeight+o.footerSpacing}}drawBackground(e,t,o,l){const{xAlign:d,yAlign:h}=this,{x:g,y:m}=e,{width:y,height:b}=o,{topLeft:w,topRight:E,bottomLeft:P,bottomRight:$}=toTRBLCorners(l.cornerRadius);t.fillStyle=l.backgroundColor,t.strokeStyle=l.borderColor,t.lineWidth=l.borderWidth,t.beginPath(),t.moveTo(g+w,m),h==="top"&&this.drawCaret(e,t,o,l),t.lineTo(g+y-E,m),t.quadraticCurveTo(g+y,m,g+y,m+E),h==="center"&&d==="right"&&this.drawCaret(e,t,o,l),t.lineTo(g+y,m+b-$),t.quadraticCurveTo(g+y,m+b,g+y-$,m+b),h==="bottom"&&this.drawCaret(e,t,o,l),t.lineTo(g+P,m+b),t.quadraticCurveTo(g,m+b,g,m+b-P),h==="center"&&d==="left"&&this.drawCaret(e,t,o,l),t.lineTo(g,m+w),t.quadraticCurveTo(g,m,g+w,m),t.closePath(),t.fill(),l.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,o=this.$animations,l=o&&o.x,d=o&&o.y;if(l||d){const h=positioners[e.position].call(this,this._active,this._eventPosition);if(!h)return;const g=this._size=getTooltipSize(this,e),m=Object.assign({},h,this._size),y=determineAlignment(t,e,m),b=getBackgroundPoint(e,m,y,t);(l._to!==b.x||d._to!==b.y)&&(this.xAlign=y.xAlign,this.yAlign=y.yAlign,this.width=g.width,this.height=g.height,this.caretX=h.x,this.caretY=h.y,this._resolveAnimations().update(this,b))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let o=this.opacity;if(!o)return;this._updateAnimationTarget(t);const l={width:this.width,height:this.height},d={x:this.x,y:this.y};o=Math.abs(o)<.001?0:o;const h=toPadding(t.padding),g=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&g&&(e.save(),e.globalAlpha=o,this.drawBackground(d,e,l,t),overrideTextDirection(e,t.textDirection),d.y+=h.top,this.drawTitle(d,e,t),this.drawBody(d,e,t),this.drawFooter(d,e,t),restoreTextDirection(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const o=this._active,l=e.map(({datasetIndex:g,index:m})=>{const y=this.chart.getDatasetMeta(g);if(!y)throw new Error("Cannot find a dataset at index "+g);return{datasetIndex:g,element:y.data[m],index:m}}),d=!_elementsEqual(o,l),h=this._positionChanged(l,t);(d||h)&&(this._active=l,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,o=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const l=this.options,d=this._active||[],h=this._getActiveElements(e,d,t,o),g=this._positionChanged(h,e),m=t||!_elementsEqual(h,d)||g;return m&&(this._active=h,(l.enabled||l.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),m}_getActiveElements(e,t,o,l){const d=this.options;if(e.type==="mouseout")return[];if(!l)return t;const h=this.chart.getElementsAtEventForMode(e,d.mode,d,o);return d.reverse&&h.reverse(),h}_positionChanged(e,t){const{caretX:o,caretY:l,options:d}=this,h=positioners[d.position].call(this,e,t);return h!==!1&&(o!==h.x||l!==h.y)}}Tooltip.positioners=positioners;var plugin_tooltip={id:"tooltip",_element:Tooltip,positioners,afterInit(n,e,t){t&&(n.tooltip=new Tooltip({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",t)===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:noop,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,o=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(o>0&&e.dataIndex<o)return t[e.dataIndex]}return""},afterTitle:noop,beforeBody:noop,beforeLabel:noop,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return isNullOrUndef(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:noop,afterBody:noop,beforeFooter:noop,footer:noop,afterFooter:noop}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},plugins=Object.freeze({__proto__:null,Decimation:plugin_decimation,Filler:index,Legend:plugin_legend,SubTitle:plugin_subtitle,Title:plugin_title,Tooltip:plugin_tooltip});const addIfString=(n,e,t,o)=>(typeof e=="string"?(t=n.push(e)-1,o.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function findOrAddLabel(n,e,t,o){const l=n.indexOf(e);if(l===-1)return addIfString(n,e,t,o);const d=n.lastIndexOf(e);return l!==d?t:l}const validIndex=(n,e)=>n===null?null:_limitValue(Math.round(n),0,e);class CategoryScale extends Scale{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const o=this.getLabels();for(const{index:l,label:d}of t)o[l]===d&&o.splice(l,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(isNullOrUndef(e))return null;const o=this.getLabels();return t=isFinite(t)&&o[t]===e?t:findOrAddLabel(o,e,valueOrDefault(t,e),this._addedLabels),validIndex(t,o.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:o,max:l}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(o=0),t||(l=this.getLabels().length-1)),this.min=o,this.max=l}buildTicks(){const e=this.min,t=this.max,o=this.options.offset,l=[];let d=this.getLabels();d=e===0&&t===d.length-1?d:d.slice(e,t+1),this._valueRange=Math.max(d.length-(o?0:1),1),this._startValue=this.min-(o?.5:0);for(let h=e;h<=t;h++)l.push({value:h});return l}getLabelForValue(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}CategoryScale.id="category";CategoryScale.defaults={ticks:{callback:CategoryScale.prototype.getLabelForValue}};function generateTicks$1(n,e){const t=[],{bounds:l,step:d,min:h,max:g,precision:m,count:y,maxTicks:b,maxDigits:w,includeBounds:E}=n,P=d||1,$=b-1,{min:C,max:L}=e,W=!isNullOrUndef(h),Y=!isNullOrUndef(g),D=!isNullOrUndef(y),k=(L-C)/(w+1);let F=niceNum((L-C)/$/P)*P,ce,q,te,Q;if(F<1e-14&&!W&&!Y)return[{value:C},{value:L}];Q=Math.ceil(L/F)-Math.floor(C/F),Q>$&&(F=niceNum(Q*F/$/P)*P),isNullOrUndef(m)||(ce=Math.pow(10,m),F=Math.ceil(F*ce)/ce),l==="ticks"?(q=Math.floor(C/F)*F,te=Math.ceil(L/F)*F):(q=C,te=L),W&&Y&&d&&almostWhole((g-h)/d,F/1e3)?(Q=Math.round(Math.min((g-h)/F,b)),F=(g-h)/Q,q=h,te=g):D?(q=W?h:q,te=Y?g:te,Q=y-1,F=(te-q)/Q):(Q=(te-q)/F,almostEquals(Q,Math.round(Q),F/1e3)?Q=Math.round(Q):Q=Math.ceil(Q));const ie=Math.max(_decimalPlaces(F),_decimalPlaces(q));ce=Math.pow(10,isNullOrUndef(m)?ie:m),q=Math.round(q*ce)/ce,te=Math.round(te*ce)/ce;let J=0;for(W&&(E&&q!==h?(t.push({value:h}),q<h&&J++,almostEquals(Math.round((q+J*F)*ce)/ce,h,relativeLabelSize(h,k,n))&&J++):q<h&&J++);J<Q;++J)t.push({value:Math.round((q+J*F)*ce)/ce});return Y&&E&&te!==g?t.length&&almostEquals(t[t.length-1].value,g,relativeLabelSize(g,k,n))?t[t.length-1].value=g:t.push({value:g}):(!Y||te===g)&&t.push({value:te}),t}function relativeLabelSize(n,e,{horizontal:t,minRotation:o}){const l=toRadians(o),d=(t?Math.sin(l):Math.cos(l))||.001,h=.75*e*(""+n).length;return Math.min(e/d,h)}class LinearScaleBase extends Scale{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return isNullOrUndef(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:o}=this.getUserBounds();let{min:l,max:d}=this;const h=m=>l=t?l:m,g=m=>d=o?d:m;if(e){const m=sign(l),y=sign(d);m<0&&y<0?g(0):m>0&&y>0&&h(0)}if(l===d){let m=1;(d>=Number.MAX_SAFE_INTEGER||l<=Number.MIN_SAFE_INTEGER)&&(m=Math.abs(d*.05)),g(d+m),e||h(l-m)}this.min=l,this.max=d}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:o}=e,l;return o?(l=Math.ceil(this.max/o)-Math.floor(this.min/o)+1,l>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${o} would result generating up to ${l} ticks. Limiting to 1000.`),l=1e3)):(l=this.computeTickLimit(),t=t||11),t&&(l=Math.min(t,l)),l}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let o=this.getTickLimit();o=Math.max(2,o);const l={maxTicks:o,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},d=this._range||this,h=generateTicks$1(l,d);return e.bounds==="ticks"&&_setMinAndMaxByKey(h,this,"value"),e.reverse?(h.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),h}configure(){const e=this.ticks;let t=this.min,o=this.max;if(super.configure(),this.options.offset&&e.length){const l=(o-t)/Math.max(e.length-1,1)/2;t-=l,o+=l}this._startValue=t,this._endValue=o,this._valueRange=o-t}getLabelForValue(e){return formatNumber(e,this.chart.options.locale,this.options.ticks.format)}}class LinearScale extends LinearScaleBase{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=isNumberFinite(e)?e:0,this.max=isNumberFinite(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,o=toRadians(this.options.ticks.minRotation),l=(e?Math.sin(o):Math.cos(o))||.001,d=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,d.lineHeight/l))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}LinearScale.id="linear";LinearScale.defaults={ticks:{callback:Ticks.formatters.numeric}};function isMajor(n){return n/Math.pow(10,Math.floor(log10(n)))===1}function generateTicks(n,e){const t=Math.floor(log10(e.max)),o=Math.ceil(e.max/Math.pow(10,t)),l=[];let d=finiteOrDefault(n.min,Math.pow(10,Math.floor(log10(e.min)))),h=Math.floor(log10(d)),g=Math.floor(d/Math.pow(10,h)),m=h<0?Math.pow(10,Math.abs(h)):1;do l.push({value:d,major:isMajor(d)}),++g,g===10&&(g=1,++h,m=h>=0?1:m),d=Math.round(g*Math.pow(10,h)*m)/m;while(h<t||h===t&&g<o);const y=finiteOrDefault(n.max,d);return l.push({value:y,major:isMajor(d)}),l}class LogarithmicScale extends Scale{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const o=LinearScaleBase.prototype.parse.apply(this,[e,t]);if(o===0){this._zero=!0;return}return isNumberFinite(o)&&o>0?o:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=isNumberFinite(e)?Math.max(0,e):null,this.max=isNumberFinite(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let o=this.min,l=this.max;const d=m=>o=e?o:m,h=m=>l=t?l:m,g=(m,y)=>Math.pow(10,Math.floor(log10(m))+y);o===l&&(o<=0?(d(1),h(10)):(d(g(o,-1)),h(g(l,1)))),o<=0&&d(g(l,-1)),l<=0&&h(g(o,1)),this._zero&&this.min!==this._suggestedMin&&o===g(this.min,0)&&d(g(o,-1)),this.min=o,this.max=l}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},o=generateTicks(t,this);return e.bounds==="ticks"&&_setMinAndMaxByKey(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}getLabelForValue(e){return e===void 0?"0":formatNumber(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=log10(e),this._valueRange=log10(this.max)-log10(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(log10(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}LogarithmicScale.id="logarithmic";LogarithmicScale.defaults={ticks:{callback:Ticks.formatters.logarithmic,major:{enabled:!0}}};function getTickBackdropHeight(n){const e=n.ticks;if(e.display&&n.display){const t=toPadding(e.backdropPadding);return valueOrDefault(e.font&&e.font.size,defaults.font.size)+t.height}return 0}function measureLabelSize(n,e,t){return t=isArray(t)?t:[t],{w:_longestText(n,e.string,t),h:t.length*e.lineHeight}}function determineLimits(n,e,t,o,l){return n===o||n===l?{start:e-t/2,end:e+t/2}:n<o||n>l?{start:e-t,end:e}:{start:e,end:e+t}}function fitWithPointLabels(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),o=[],l=[],d=n._pointLabels.length,h=n.options.pointLabels,g=h.centerPointLabels?PI/d:0;for(let m=0;m<d;m++){const y=h.setContext(n.getPointLabelContext(m));l[m]=y.padding;const b=n.getPointPosition(m,n.drawingArea+l[m],g),w=toFont(y.font),E=measureLabelSize(n.ctx,w,n._pointLabels[m]);o[m]=E;const P=_normalizeAngle(n.getIndexAngle(m)+g),$=Math.round(toDegrees(P)),C=determineLimits($,b.x,E.w,0,180),L=determineLimits($,b.y,E.h,90,270);updateLimits(t,e,P,C,L)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=buildPointLabelItems(n,o,l)}function updateLimits(n,e,t,o,l){const d=Math.abs(Math.sin(t)),h=Math.abs(Math.cos(t));let g=0,m=0;o.start<e.l?(g=(e.l-o.start)/d,n.l=Math.min(n.l,e.l-g)):o.end>e.r&&(g=(o.end-e.r)/d,n.r=Math.max(n.r,e.r+g)),l.start<e.t?(m=(e.t-l.start)/h,n.t=Math.min(n.t,e.t-m)):l.end>e.b&&(m=(l.end-e.b)/h,n.b=Math.max(n.b,e.b+m))}function buildPointLabelItems(n,e,t){const o=[],l=n._pointLabels.length,d=n.options,h=getTickBackdropHeight(d)/2,g=n.drawingArea,m=d.pointLabels.centerPointLabels?PI/l:0;for(let y=0;y<l;y++){const b=n.getPointPosition(y,g+h+t[y],m),w=Math.round(toDegrees(_normalizeAngle(b.angle+HALF_PI))),E=e[y],P=yForAngle(b.y,E.h,w),$=getTextAlignForAngle(w),C=leftForTextAlign(b.x,E.w,$);o.push({x:b.x,y:P,textAlign:$,left:C,top:P,right:C+E.w,bottom:P+E.h})}return o}function getTextAlignForAngle(n){return n===0||n===180?"center":n<180?"left":"right"}function leftForTextAlign(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function yForAngle(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function drawPointLabels(n,e){const{ctx:t,options:{pointLabels:o}}=n;for(let l=e-1;l>=0;l--){const d=o.setContext(n.getPointLabelContext(l)),h=toFont(d.font),{x:g,y:m,textAlign:y,left:b,top:w,right:E,bottom:P}=n._pointLabelItems[l],{backdropColor:$}=d;if(!isNullOrUndef($)){const C=toTRBLCorners(d.borderRadius),L=toPadding(d.backdropPadding);t.fillStyle=$;const W=b-L.left,Y=w-L.top,D=E-b+L.width,k=P-w+L.height;Object.values(C).some(F=>F!==0)?(t.beginPath(),addRoundedRectPath(t,{x:W,y:Y,w:D,h:k,radius:C}),t.fill()):t.fillRect(W,Y,D,k)}renderText(t,n._pointLabels[l],g,m+h.lineHeight/2,h,{color:d.color,textAlign:y,textBaseline:"middle"})}}function pathRadiusLine(n,e,t,o){const{ctx:l}=n;if(t)l.arc(n.xCenter,n.yCenter,e,0,TAU);else{let d=n.getPointPosition(0,e);l.moveTo(d.x,d.y);for(let h=1;h<o;h++)d=n.getPointPosition(h,e),l.lineTo(d.x,d.y)}}function drawRadiusLine(n,e,t,o){const l=n.ctx,d=e.circular,{color:h,lineWidth:g}=e;!d&&!o||!h||!g||t<0||(l.save(),l.strokeStyle=h,l.lineWidth=g,l.setLineDash(e.borderDash),l.lineDashOffset=e.borderDashOffset,l.beginPath(),pathRadiusLine(n,t,d,o),l.closePath(),l.stroke(),l.restore())}function createPointLabelContext(n,e,t){return createContext(n,{label:t,index:e,type:"pointLabel"})}class RadialLinearScale extends LinearScaleBase{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=toPadding(getTickBackdropHeight(this.options)/2),t=this.width=this.maxWidth-e.width,o=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+o/2+e.top),this.drawingArea=Math.floor(Math.min(t,o)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=isNumberFinite(e)&&!isNaN(e)?e:0,this.max=isNumberFinite(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))}generateTickLabels(e){LinearScaleBase.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,o)=>{const l=callback(this.options.pointLabels.callback,[t,o],this);return l||l===0?l:""}).filter((t,o)=>this.chart.getDataVisibility(o))}fit(){const e=this.options;e.display&&e.pointLabels.display?fitWithPointLabels(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,o,l){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((o-l)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,o,l))}getIndexAngle(e){const t=TAU/(this._pointLabels.length||1),o=this.options.startAngle||0;return _normalizeAngle(e*t+toRadians(o))}getDistanceFromCenterForValue(e){if(isNullOrUndef(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(isNullOrUndef(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const o=t[e];return createPointLabelContext(this.getContext(),e,o)}}getPointPosition(e,t,o=0){const l=this.getIndexAngle(e)-HALF_PI+o;return{x:Math.cos(l)*t+this.xCenter,y:Math.sin(l)*t+this.yCenter,angle:l}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:o,right:l,bottom:d}=this._pointLabelItems[e];return{left:t,top:o,right:l,bottom:d}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const o=this.ctx;o.save(),o.beginPath(),pathRadiusLine(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),o.closePath(),o.fillStyle=e,o.fill(),o.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:o,grid:l}=t,d=this._pointLabels.length;let h,g,m;if(t.pointLabels.display&&drawPointLabels(this,d),l.display&&this.ticks.forEach((y,b)=>{if(b!==0){g=this.getDistanceFromCenterForValue(y.value);const w=l.setContext(this.getContext(b-1));drawRadiusLine(this,w,g,d)}}),o.display){for(e.save(),h=d-1;h>=0;h--){const y=o.setContext(this.getPointLabelContext(h)),{color:b,lineWidth:w}=y;!w||!b||(e.lineWidth=w,e.strokeStyle=b,e.setLineDash(y.borderDash),e.lineDashOffset=y.borderDashOffset,g=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),m=this.getPointPosition(h,g),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(m.x,m.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,o=t.ticks;if(!o.display)return;const l=this.getIndexAngle(0);let d,h;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(l),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((g,m)=>{if(m===0&&!t.reverse)return;const y=o.setContext(this.getContext(m)),b=toFont(y.font);if(d=this.getDistanceFromCenterForValue(this.ticks[m].value),y.showLabelBackdrop){e.font=b.string,h=e.measureText(g.label).width,e.fillStyle=y.backdropColor;const w=toPadding(y.backdropPadding);e.fillRect(-h/2-w.left,-d-b.size/2-w.top,h+w.width,b.size+w.height)}renderText(e,g.label,0,-d,b,{color:y.color})}),e.restore()}drawTitle(){}}RadialLinearScale.id="radialLinear";RadialLinearScale.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ticks.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(n){return n},padding:5,centerPointLabels:!1}};RadialLinearScale.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};RadialLinearScale.descriptors={angleLines:{_fallback:"grid"}};const INTERVALS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},UNITS=Object.keys(INTERVALS);function sorter(n,e){return n-e}function parse(n,e){if(isNullOrUndef(e))return null;const t=n._adapter,{parser:o,round:l,isoWeekday:d}=n._parseOpts;let h=e;return typeof o=="function"&&(h=o(h)),isNumberFinite(h)||(h=typeof o=="string"?t.parse(h,o):t.parse(h)),h===null?null:(l&&(h=l==="week"&&(isNumber(d)||d===!0)?t.startOf(h,"isoWeek",d):t.startOf(h,l)),+h)}function determineUnitForAutoTicks(n,e,t,o){const l=UNITS.length;for(let d=UNITS.indexOf(n);d<l-1;++d){const h=INTERVALS[UNITS[d]],g=h.steps?h.steps:Number.MAX_SAFE_INTEGER;if(h.common&&Math.ceil((t-e)/(g*h.size))<=o)return UNITS[d]}return UNITS[l-1]}function determineUnitForFormatting(n,e,t,o,l){for(let d=UNITS.length-1;d>=UNITS.indexOf(t);d--){const h=UNITS[d];if(INTERVALS[h].common&&n._adapter.diff(l,o,h)>=e-1)return h}return UNITS[t?UNITS.indexOf(t):0]}function determineMajorUnit(n){for(let e=UNITS.indexOf(n)+1,t=UNITS.length;e<t;++e)if(INTERVALS[UNITS[e]].common)return UNITS[e]}function addTick(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:o,hi:l}=_lookup(t,e),d=t[o]>=e?t[o]:t[l];n[d]=!0}}function setMajorTicks(n,e,t,o){const l=n._adapter,d=+l.startOf(e[0].value,o),h=e[e.length-1].value;let g,m;for(g=d;g<=h;g=+l.add(g,1,o))m=t[g],m>=0&&(e[m].major=!0);return e}function ticksFromTimestamps(n,e,t){const o=[],l={},d=e.length;let h,g;for(h=0;h<d;++h)g=e[h],l[g]=h,o.push({value:g,major:!1});return d===0||!t?o:setMajorTicks(n,o,l,t)}class TimeScale extends Scale{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t){const o=e.time||(e.time={}),l=this._adapter=new adapters._date(e.adapters.date);l.init(t),mergeIf(o.displayFormats,l.formats()),this._parseOpts={parser:o.parser,round:o.round,isoWeekday:o.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:parse(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,o=e.time.unit||"day";let{min:l,max:d,minDefined:h,maxDefined:g}=this.getUserBounds();function m(y){!h&&!isNaN(y.min)&&(l=Math.min(l,y.min)),!g&&!isNaN(y.max)&&(d=Math.max(d,y.max))}(!h||!g)&&(m(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&m(this.getMinMax(!1))),l=isNumberFinite(l)&&!isNaN(l)?l:+t.startOf(Date.now(),o),d=isNumberFinite(d)&&!isNaN(d)?d:+t.endOf(Date.now(),o)+1,this.min=Math.min(l,d-1),this.max=Math.max(l+1,d)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],o=e[e.length-1]),{min:t,max:o}}buildTicks(){const e=this.options,t=e.time,o=e.ticks,l=o.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&l.length&&(this.min=this._userMin||l[0],this.max=this._userMax||l[l.length-1]);const d=this.min,h=this.max,g=_filterBetween(l,d,h);return this._unit=t.unit||(o.autoSkip?determineUnitForAutoTicks(t.minUnit,this.min,this.max,this._getLabelCapacity(d)):determineUnitForFormatting(this,g.length,t.minUnit,this.min,this.max)),this._majorUnit=!o.major.enabled||this._unit==="year"?void 0:determineMajorUnit(this._unit),this.initOffsets(l),e.reverse&&g.reverse(),ticksFromTimestamps(this,g,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e){let t=0,o=0,l,d;this.options.offset&&e.length&&(l=this.getDecimalForValue(e[0]),e.length===1?t=1-l:t=(this.getDecimalForValue(e[1])-l)/2,d=this.getDecimalForValue(e[e.length-1]),e.length===1?o=d:o=(d-this.getDecimalForValue(e[e.length-2]))/2);const h=e.length<3?.5:.25;t=_limitValue(t,0,h),o=_limitValue(o,0,h),this._offsets={start:t,end:o,factor:1/(t+1+o)}}_generate(){const e=this._adapter,t=this.min,o=this.max,l=this.options,d=l.time,h=d.unit||determineUnitForAutoTicks(d.minUnit,t,o,this._getLabelCapacity(t)),g=valueOrDefault(d.stepSize,1),m=h==="week"?d.isoWeekday:!1,y=isNumber(m)||m===!0,b={};let w=t,E,P;if(y&&(w=+e.startOf(w,"isoWeek",m)),w=+e.startOf(w,y?"day":h),e.diff(o,t,h)>1e5*g)throw new Error(t+" and "+o+" are too far apart with stepSize of "+g+" "+h);const $=l.ticks.source==="data"&&this.getDataTimestamps();for(E=w,P=0;E<o;E=+e.add(E,g,h),P++)addTick(b,E,$);return(E===o||l.bounds==="ticks"||P===1)&&addTick(b,E,$),Object.keys(b).sort((C,L)=>C-L).map(C=>+C)}getLabelForValue(e){const t=this._adapter,o=this.options.time;return o.tooltipFormat?t.format(e,o.tooltipFormat):t.format(e,o.displayFormats.datetime)}_tickFormatFunction(e,t,o,l){const d=this.options,h=d.time.displayFormats,g=this._unit,m=this._majorUnit,y=g&&h[g],b=m&&h[m],w=o[t],E=m&&b&&w&&w.major,P=this._adapter.format(e,l||(E?b:y)),$=d.ticks.callback;return $?callback($,[P,t,o],this):P}generateTickLabels(e){let t,o,l;for(t=0,o=e.length;t<o;++t)l=e[t],l.label=this._tickFormatFunction(l.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,o=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+o)*t.factor)}getValueForPixel(e){const t=this._offsets,o=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+o*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,o=this.ctx.measureText(e).width,l=toRadians(this.isHorizontal()?t.maxRotation:t.minRotation),d=Math.cos(l),h=Math.sin(l),g=this._resolveTickFontOptions(0).size;return{w:o*d+g*h,h:o*h+g*d}}_getLabelCapacity(e){const t=this.options.time,o=t.displayFormats,l=o[t.unit]||o.millisecond,d=this._tickFormatFunction(e,0,ticksFromTimestamps(this,[e],this._majorUnit),l),h=this._getLabelSize(d),g=Math.floor(this.isHorizontal()?this.width/h.w:this.height/h.h)-1;return g>0?g:1}getDataTimestamps(){let e=this._cache.data||[],t,o;if(e.length)return e;const l=this.getMatchingVisibleMetas();if(this._normalized&&l.length)return this._cache.data=l[0].controller.getAllParsedValues(this);for(t=0,o=l.length;t<o;++t)e=e.concat(l[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,o;if(e.length)return e;const l=this.getLabels();for(t=0,o=l.length;t<o;++t)e.push(parse(this,l[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return _arrayUnique(e.sort(sorter))}}TimeScale.id="time";TimeScale.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};function interpolate(n,e,t){let o=0,l=n.length-1,d,h,g,m;t?(e>=n[o].pos&&e<=n[l].pos&&({lo:o,hi:l}=_lookupByKey(n,"pos",e)),{pos:d,time:g}=n[o],{pos:h,time:m}=n[l]):(e>=n[o].time&&e<=n[l].time&&({lo:o,hi:l}=_lookupByKey(n,"time",e)),{time:d,pos:g}=n[o],{time:h,pos:m}=n[l]);const y=h-d;return y?g+(m-g)*(e-d)/y:g}class TimeSeriesScale extends TimeScale{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=interpolate(t,this.min),this._tableRange=interpolate(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:o}=this,l=[],d=[];let h,g,m,y,b;for(h=0,g=e.length;h<g;++h)y=e[h],y>=t&&y<=o&&l.push(y);if(l.length<2)return[{time:t,pos:0},{time:o,pos:1}];for(h=0,g=l.length;h<g;++h)b=l[h+1],m=l[h-1],y=l[h],Math.round((b+m)/2)!==y&&d.push({time:y,pos:h/(g-1)});return d}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),o=this.getLabelTimestamps();return t.length&&o.length?e=this.normalize(t.concat(o)):e=t.length?t:o,e=this._cache.all=e,e}getDecimalForValue(e){return(interpolate(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,o=this.getDecimalForPixel(e)/t.factor-t.end;return interpolate(this._table,o*this._tableRange+this._minPos,!0)}}TimeSeriesScale.id="timeseries";TimeSeriesScale.defaults=TimeScale.defaults;var scales=Object.freeze({__proto__:null,CategoryScale,LinearScale,LogarithmicScale,RadialLinearScale,TimeScale,TimeSeriesScale});const registerables=[controllers,elements,plugins,scales];Chart==null||Chart.register(...registerables??[]);class ChartJs extends BaseUIElement{constructor(t){super();ge(this,"_config");this._config=t}InnerConstructElement(){var o;const t=document.createElement("canvas");if(this.style!==void 0&&(t.style.cssText=this.style),((o=this.clss)==null?void 0:o.size)>0)try{t.classList.add(...Array.from(this.clss))}catch(l){console.error("Invalid class name detected in:",Array.from(this.clss).join(" "),`
Err msg is `,l)}return new Chart(t,this._config),t}}export{AvailableBaseLayers as A,BackgroundMapSwitch as B,ChangeDescriptionTools as C,FixedInputElement as F,Hotkeys as H,InputElementMap as I,LoginToggle as L,Minimap as M,Or as O,Paragraph as P,RegexTag as R,SimpleMetaTaggers as S,TabbedComponent as T,UserRelatedState as U,ValidatedTextField as V,Wikidata as W,TagUtils as a,Tag as b,And as c,Table as d,OsmObject as e,OsmRelation as f,OsmWay as g,OsmNode as h,TextField as i,Button as j,WikidataPreviewBox as k,WikipediaBox as l,ImageProvider as m,LicenseInfo as n,osmtogeojson_1 as o,WikimediaImageProvider as p,OsmConnection as q,OH as r,ChartJs as s,FeatureReviews as t,Maproulette as u};
