{
  "id": "atm",
  "name": {
    "en": "ATMs",
    "de": "Geldautomaten",
    "fr": "DABs",
    "nl": "Geldautomaten"
  },
  "description": {
    "en": "ATMs to withdraw money",
    "de": "Geldautomaten zum Geld abheben",
    "fr": "DAB pour retirer de l'argent",
    "nl": "Geldautomaten om geld op te nemen"
  },
  "title": {
    "render": {
      "en": "ATM",
      "de": "Geldautomat",
      "fr": "DAB",
      "nl": "Geldautomaat"
    },
    "mappings": [
      {
        "if": "brand~*",
        "then": {
          "en": "{brand} ATM",
          "de": "{brand} Geldautomat",
          "fr": "DAB {brand}",
          "nl": "{brand} Geldautomaat"
        }
      }
    ]
  },
  "source": {
    "osmTags": {
      "or": [
        "amenity=atm",
        {
          "and": [
            "amenity=bank",
            "atm=yes"
          ]
        }
      ]
    }
  },
  "minzoom": 13,
  "presets": [
    {
      "tags": [
        "amenity=atm"
      ],
      "title": {
        "en": "an ATM",
        "de": "ein Geldautomat",
        "fr": "un DAB",
        "nl": "een geldautomaat"
      }
    }
  ],
  "tagRenderings": [
    {
      "builtin": "images",
      "override": {
        "condition": "amenity!=bank"
      }
    },
    {
      "id": "bank-images",
      "render": "{image_carousel()}",
      "condition": "amenity=bank"
    },
    {
      "id": "atm-in-bank-notice",
      "condition": "amenity=bank",
      "render": {
        "en": "This ATM is located in or near a bank",
        "de": "Dieser Geldautomat befindet sich in oder in der Nähe einer Bank"
      }
    },
    {
      "id": "name",
      "render": {
        "en": "The name of this ATM is {name}",
        "de": "Der Name dieses Geldautomaten ist {name}",
        "fr": "Le nom de ce DAB est {name}",
        "nl": "De naam van deze geldautomaat is {name}"
      },
      "condition": "name~*"
    },
    {
      "id": "brand",
      "question": {
        "en": "What brand is this ATM?",
        "de": "Von welcher Marke ist dieser Geldautomat?",
        "fr": "De quelle marque est ce DAB ?",
        "nl": "Van welk merk is deze geldautomaat?"
      },
      "freeform": {
        "key": "brand",
        "type": "string",
        "placeholder": {
          "en": "Brand name",
          "de": "Markenname",
          "fr": "Nom de marque",
          "nl": "Merknaam"
        }
      },
      "render": {
        "en": "The brand of this ATM is {brand}",
        "de": "Die Marke dieses Geldautomaten ist {brand}",
        "fr": "La marque de ce DAB est {brand}",
        "nl": "Het merk van deze geldautomaat is {brand}"
      }
    },
    {
      "id": "operator",
      "condition": "amenity!=bank",
      "question": {
        "en": "What company operates this ATM?",
        "de": "Welches Unternehmen betreibt den Geldautomaten?",
        "fr": "Quelle société exploite ce DAB ?",
        "nl": "Welk bedrijf beheert deze geldautomaat?"
      },
      "freeform": {
        "key": "operator",
        "type": "string",
        "placeholder": {
          "en": "Operator",
          "de": "Betreiber",
          "fr": "Opérateur",
          "nl": "Beheerder"
        }
      },
      "render": {
        "en": "The ATM is operated by {operator}",
        "de": "Der Geldautomat wird von {operator} betrieben",
        "fr": "Ce DAB est exploité par {operator}",
        "nl": "Deze geldautomaat wordt beheerd door {operator}"
      }
    },
    {
      "builtin": "opening_hours",
      "override": {
        "condition": "amenity!=bank"
      }
    },
    {
      "id": "cash_out",
      "question": {
        "en": "Can you withdraw cash from this ATM?"
      },
      "mappings": [
        {
          "if": "cash_out=",
          "then": {
            "en": "You can withdraw cash from this ATM"
          },
          "hideInAnswer": true
        },
        {
          "if": "cash_out=yes",
          "then": {
            "en": "You can withdraw cash from this ATM"
          }
        },
        {
          "if": "cash_out=no",
          "then": {
            "en": "You cannot withdraw cash from this ATM"
          }
        }
      ]
    },
    {
      "id": "cash_in",
      "question": {
        "en": "Can you deposit cash into this ATM?"
      },
      "mappings": [
        {
          "if": "cash_in=",
          "then": {
            "en": "You probably cannot deposit cash into this ATM"
          },
          "hideInAnswer": true
        },
        {
          "if": "cash_in=yes",
          "then": {
            "en": "You can deposit cash into this ATM"
          }
        },
        {
          "if": "cash_in=no",
          "then": {
            "en": "You cannot deposit cash into this ATM"
          }
        }
      ]
    },
    {
      "id": "speech_output",
      "question": {
        "en": "Does this ATM have speech output for visually impaired users?"
      },
      "mappings": [
        {
          "if": "speech_output=yes",
          "then": {
            "en": "This ATM has speech output, usually available through a headphone jack"
          }
        },
        {
          "if": "speech_output=no",
          "then": {
            "en": "This ATM does not have speech output"
          }
        }
      ]
    },
    {
      "id": "speech_output_language",
      "condition": "speech_output=yes",
      "render": {
        "special": {
          "type": "language_chooser",
          "key": "speech_output",
          "question": {
            "en": "In which languages does this ATM have speech output?"
          },
          "render_list_item": {
            "en": "This ATM has speech output in {language():font-bold}"
          },
          "render_single_language": {
            "en": "This ATM has speech output in {language():font-bold}"
          }
        }
      }
    }
  ],
  "mapRendering": [
    {
      "icon": "circle:white;./assets/layers/atm/atm.svg",
      "location": [
        "point",
        "centroid"
      ]
    }
  ],
  "filter": [
    "open_now",
    {
      "id": "speech_output",
      "options": [
        {
          "question": {
            "en": "With speech output"
          },
          "osmTags": "speech_output=yes"
        }
      ]
    }
  ]
}