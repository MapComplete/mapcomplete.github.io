{"version":3,"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","names":["ctx","insert","target","svg","anchor","append","path","EditJsonState","schema","server","category","osmConnection","options","__publicField","LocalStorageSource","UIEventSource","layerId","config","id","enabled","u","entry","i","breadcrumb","key","store","v","value","noInitialSync","unsync","sch","part","origConfig","p","schemas","isUndefined","lastBreadcrumb","msgs","msg","pth","messages","ContextRewritingStep","Conversion","state","step","getTagRenderings","json","context","converted","originalIds","_a","tr","newTagRenderings","PrepareLayer","newPath","idToSearch","oldIndex","EditLayerState","LayerConfig","cleanArray","data","lBefore","cleaned","Utils","layer","changed","qtr","Pipe","ValidateLayer","t","trs","_b","_d","_c","_e","_f","TagUtils","configuration","layers","AllSharedLayers","questions","sharedQuestions","question","prepare","ConversionContext","e","EditThemeState","PrevalidateTheme","PrepareTheme","ValidateTheme","l","ConfigMetaUtils","configMeta","t1_value","div1","div0","current","dirty","set_data","t1","message","$$props","create_if_block_2","if_block1","create_if_block_1","div","span","each_blocks","span1","b","span0","t3","t3_value","t5","t5_value","mightBeBoolean","type","startInEditModeIfUnset","mightBeTag","hasAnd","obj","hasOr","hasString","isTranslation","rendervalue","helperArgs","inline","inlineValue","configJson","err","TagRenderingConfig","startValue","startInEditMode","tags","onDestroy","tgs","t_value","create_if_block_5","ImmutableStore","tagrenderingeditable_changes","fromhtml_changes","show_if","create_if_block_3","div2","h3","each_blocks_1","perId","tagRendering","questions.tagRenderings","label","x","configs","override","description","func","click_handler","t2_value","t0","t0_value","t2","t4","t4_value","if_block2","create_if_block","expertMode","defaultOption","hasBooleanOption","types","lastIsString","opt","chosenOption","existingValue","hasOverride","possibleTypes","outer","optionalMatches","numberOfMatches","requiredAttribute","a","directValue","subSchemas","subpath","$$invalidate","oldOption","o","cleanPath","crumble","schemabasedmultitype_changes","button0","button1","if_block0","create_if_block_8","create_if_block_7","button","Translations","icon_changes","tr_changes","isTagRenderingBlock","currentValue","singular","expanded","subparts","usesOverride","schemaForMultitype","fusePath","subpartPath","toAdd","indexInToAdd","resting","del","swap","j","moveTo","source","genTitle","genIconF","genIcon","genColor","$currentValue","markdown_changes","if_block","title","article","datapath","createItem","valueToSet","values","schemabasedinput_changes","get_key","configsNoHidden","configsFiltered","$expertMode","create_if_block_6","create_if_block_4","if_block3","if_block4","if_block5","if_block6","condition0","condition1","condition2","condition3","condition4","condition5","condition6","tab","tabElements","getTab","$$value","selected","twJoin","$condition0","$condition1","$condition2","$condition3","$condition4","$condition5","$condition6","$tab","firstPaths","messagesCount","parsedTag","exampleTags","pt","keys","thenText","thenTextEn","translation","editMode","$thenText","mappingConfigs","c","schemabasedfield0_changes","schemabasedfield1_changes","schemabasedfield2_changes","schemabasedfield_changes","hasSeenIntro","onMount","allowQuestions","mappingsBuiltin","perLabel","forbidden","labels","labelMapping","configBuiltin","mappings","topLevelItems","item","questionableTagRenderingSchemaRaw","initMappings","items","ignored","freeformSchemaAll","$allowQuestions","freeformSchema","missing","click_handler_2","t6_value","li","t6","_defineProperty","ownKeys","object","enumerableOnly","symbols","sym","_objectSpread2","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_arr","_n","_i","_s","minLen","_arrayLikeToArray","n","len","arr2","compose","_len","fns","_key","y","f","curry","fn","curried","_this","_len2","args","_key2","_len3","nextArgs","_key3","isObject","isEmpty","isFunction","hasOwnProperty","property","validateChanges","initial","changes","errorHandler","field","validateSelector","selector","validateHandler","handler","_handler","validateInitial","throwError","errorMessages","validators","create","didUpdate","didStateUpdate","update","updateState","validate","getChanges","extractChanges","getState","setState","causedChanges","_handler$field","index","validateConfig","informAboutDeprecation","merge","CANCELATION_MESSAGE","makeCancelable","promise","hasCanceled_","wrappedPromise","resolve","reject","val","_state$create","config$1","_state$create2","globalConfig","_validators$config","monaco","init","_ref","isInitialized","wrapperPromise","storeMonacoInstance","injectScripts","getMonacoLoaderScript","configureLoader","script","createScript","src","_ref2","loaderScript","_ref3","require","error","__getMonacoInstance","_ref4","loader","textarea","rawConfig","container","editor","model","save","newConfig","useFallback","isLoaded","monacoEditor","schemaUri","layerSchemaJSON","layoutSchemaJSON","modelUri","timeout","$rawConfig","backToStudio","objectType","deleteLayer","StudioHashSetter","mode","name","Hash","a0","a1","tabbedgroup_changes","region_changes","region0_changes","region1_changes","div4","div3","alltagspanel_changes","tagrenderinginput_changes","layerSchema","layerSchemaRaw","hasErrors","m","allNames","meta","perRegion","region","wl","baseUrl","firstPathsFor","regionNames","pathNames","regionName","requiredFields","currentlyMissing","requiredField","highlightedItem","StudioServer","url","userId","isDirect","allFiles","layerOverview","file","parts","owner","Constants","uid","overview","uidStr","info","dispatch","createEventDispatcher","displayName","response","selfId","ud","fetchIconDescription","AllKnownLayouts","layerIds","islast","isFirst","pageNumber","totalPages","click_handler_1","walkthroughstep_changes","pages","currentPage","incr","back_handler","next_handler","selfLayers","otherLayers","suggestions","mapping","userInfo","schemaElement","ul","h2","form","input","h30","h31","attr","h1","intro","intro_tagrenderings","directEntry","QueryParameters","studioUrl","oauth_token","fakeUser","OsmConnection","expert","createdBy","studio","layersWithErr","layerFilterTerm","themeFilterTerm","themes","editLayerState","showIntro","layoutSchema","layoutSchemaRaw","editThemeState","version","meta.version","editLayer","event","editTheme","layout","createNewLayer","initialLayerConfig","selectStateBasedOnHash","hash","click_handler_3","d","$$subscribe_selfLayers","ls","$$subscribe_officialLayers","officialLayers","$$subscribe_selfThemes","selfThemes","otherThemes","$$subscribe_officialThemes","officialThemes","StudioGui","StudioGUI"],"sources":["../../node_modules/@rgossiaux/svelte-heroicons/solid/InformationCircle/InformationCircle.svelte","../../node_modules/@rgossiaux/svelte-heroicons/solid/QuestionMarkCircle/QuestionMarkCircle.svelte","../../node_modules/@babeard/svelte-heroicons/mini/QuestionMarkCircle/QuestionMarkCircle.svelte","../../node_modules/@rgossiaux/svelte-heroicons/outline/Pencil/Pencil.svelte","../../node_modules/@rgossiaux/svelte-heroicons/outline/Trash/Trash.svelte","../../src/UI/Studio/EditLayerState.ts","../../src/UI/Studio/configMeta.ts","../../src/UI/Studio/ShowConversionMessage.svelte","../../src/UI/Studio/SchemaBasedField.svelte","../../src/UI/Studio/QuestionPreview.svelte","../../src/UI/Studio/SchemaBasedMultiType.svelte","../../src/UI/Studio/CollapsedTagRenderingPreview.svelte","../../src/UI/Studio/SchemaBasedArray.svelte","../../src/UI/Studio/ArrayMultiAnswer.svelte","../../src/UI/Studio/SchemaBasedInput.svelte","../../src/UI/Studio/Region.svelte","../../src/UI/Base/TabbedGroup.svelte","../../src/UI/Studio/ErrorIndicatorForRegion.svelte","../../src/UI/Studio/MappingInput.svelte","../../src/UI/Studio/TagRenderingInput.svelte","../../src/UI/Studio/ShowConversionMessages.svelte","../../node_modules/@monaco-editor/loader/lib/es/_virtual/_rollupPluginBabelHelpers.js","../../node_modules/state-local/lib/es/state-local.js","../../node_modules/@monaco-editor/loader/lib/es/config/index.js","../../node_modules/@monaco-editor/loader/lib/es/utils/curry.js","../../node_modules/@monaco-editor/loader/lib/es/utils/isObject.js","../../node_modules/@monaco-editor/loader/lib/es/validators/index.js","../../node_modules/@monaco-editor/loader/lib/es/utils/compose.js","../../node_modules/@monaco-editor/loader/lib/es/utils/deepMerge.js","../../node_modules/@monaco-editor/loader/lib/es/utils/makeCancelable.js","../../node_modules/@monaco-editor/loader/lib/es/loader/index.js","../../src/UI/Studio/RawEditor.svelte","../../src/UI/Studio/DeleteButton.svelte","../../src/UI/Studio/StudioHashSetter.ts","../../src/UI/Studio/EditLayer.svelte","../../src/UI/Studio/StudioServer.ts","../../src/UI/Studio/EditItemButton.svelte","../../src/UI/Studio/ChooseLayerToEdit.svelte","../../src/UI/Walkthrough/WalkthroughStep.svelte","../../src/UI/Walkthrough/Walkthrough.svelte","../../src/UI/Studio/EditTheme.svelte","../../src/UI/StudioGUI.svelte","../../src/UI/StudioGui.ts"],"sourcesContent":["<!-- svelte-ignore a11y-mouse-events-have-key-events --><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\" {...$$restProps} on:click on:mouseover on:mouseenter on:mouseleave on:keydown><slot />\n  <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clip-rule=\"evenodd\"/>\n</svg>","<!-- svelte-ignore a11y-mouse-events-have-key-events --><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\" {...$$restProps} on:click on:mouseover on:mouseenter on:mouseleave on:keydown><slot />\n  <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z\" clip-rule=\"evenodd\"/>\n</svg>","<!-- svelte-ignore a11y-mouse-events-have-key-events --><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\" {...$$restProps} on:click on:mouseover on:mouseenter on:mouseleave on:keydown><slot />\n  <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.94 6.94a.75.75 0 11-1.061-1.061 3 3 0 112.871 5.026v.345a.75.75 0 01-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 108.94 6.94zM10 15a1 1 0 100-2 1 1 0 000 2z\" clip-rule=\"evenodd\"/>\n</svg>","<!-- svelte-ignore a11y-mouse-events-have-key-events --><svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\" {...$$restProps} on:click on:mouseover on:mouseenter on:mouseleave on:keydown><slot />\n  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\"/>\n</svg>","<!-- svelte-ignore a11y-mouse-events-have-key-events --><svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\" {...$$restProps} on:click on:mouseover on:mouseenter on:mouseleave on:keydown><slot />\n  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"/>\n</svg>","import { ConfigMeta } from \"./configMeta\"\nimport { Store, UIEventSource } from \"../../Logic/UIEventSource\"\nimport { LayerConfigJson } from \"../../Models/ThemeConfig/Json/LayerConfigJson\"\nimport {\n    Conversion,\n    ConversionMessage,\n    DesugaringContext,\n    Pipe,\n} from \"../../Models/ThemeConfig/Conversion/Conversion\"\nimport { PrepareLayer } from \"../../Models/ThemeConfig/Conversion/PrepareLayer\"\nimport { PrevalidateTheme, ValidateLayer } from \"../../Models/ThemeConfig/Conversion/Validation\"\nimport { AllSharedLayers } from \"../../Customizations/AllSharedLayers\"\nimport { QuestionableTagRenderingConfigJson } from \"../../Models/ThemeConfig/Json/QuestionableTagRenderingConfigJson\"\nimport { TagUtils } from \"../../Logic/Tags/TagUtils\"\nimport StudioServer from \"./StudioServer\"\nimport { Utils } from \"../../Utils\"\nimport { OsmConnection } from \"../../Logic/Osm/OsmConnection\"\nimport { OsmTags } from \"../../Models/OsmFeature\"\nimport { Feature, Point } from \"geojson\"\nimport LayerConfig from \"../../Models/ThemeConfig/LayerConfig\"\nimport { ThemeConfigJson } from \"../../Models/ThemeConfig/Json/ThemeConfigJson\"\nimport { PrepareTheme } from \"../../Models/ThemeConfig/Conversion/PrepareTheme\"\nimport { ConversionContext } from \"../../Models/ThemeConfig/Conversion/ConversionContext\"\nimport { LocalStorageSource } from \"../../Logic/Web/LocalStorageSource\"\nimport { TagRenderingConfigJson } from \"../../Models/ThemeConfig/Json/TagRenderingConfigJson\"\nimport { ValidateTheme } from \"../../Models/ThemeConfig/Conversion/ValidateTheme\"\n\nexport interface HighlightedTagRendering {\n    path: ReadonlyArray<string | number>\n    schema: ConfigMeta\n}\n\nexport abstract class EditJsonState<T> {\n    public readonly schema: ConfigMeta[]\n    public readonly category: \"layers\" | \"themes\"\n    public readonly server: StudioServer\n    public readonly osmConnection: OsmConnection\n\n    public readonly showIntro: UIEventSource<\"no\" | \"intro\" | \"tagrenderings\"> = <any>(\n        LocalStorageSource.get(\"studio-show-intro\", \"intro\")\n    )\n\n    public readonly expertMode: UIEventSource<boolean>\n\n    public readonly configuration: UIEventSource<Partial<T>> = new UIEventSource<Partial<T>>({})\n    public readonly messages: Store<ConversionMessage[]>\n\n    /**\n     * The tab in the UI that is selected, used for deeplinks\n     */\n    public readonly selectedTab: UIEventSource<number> = new UIEventSource<number>(0)\n\n    /**\n     * The EditLayerUI shows a 'schemaBasedInput' for this path to pop advanced questions out\n     */\n    public readonly highlightedItem: UIEventSource<HighlightedTagRendering> = new UIEventSource(\n        undefined\n    )\n    private sendingUpdates = false\n    private readonly _stores = new Map<string, UIEventSource<any>>()\n\n    constructor(\n        schema: ConfigMeta[],\n        server: StudioServer,\n        category: \"layers\" | \"themes\",\n        osmConnection: OsmConnection,\n        options?: {\n            expertMode?: UIEventSource<boolean>\n        }\n    ) {\n        this.osmConnection = osmConnection\n        this.schema = schema\n        this.server = server\n        this.category = category\n        this.expertMode = options?.expertMode ?? new UIEventSource<boolean>(false)\n\n        const layerId = this.getId()\n        this.configuration\n            .mapD((config) => {\n                if (!this.sendingUpdates) {\n                    console.log(\"Not sending updates yet! Trigger 'startSendingUpdates' first\")\n                    return undefined\n                }\n                return JSON.stringify(config, null, \"  \")\n            })\n            .stabilized(100)\n            .addCallbackD(async (config) => {\n                const id = layerId.data\n                if (id === undefined) {\n                    console.warn(\"No id found in layer, not updating\")\n                    return\n                }\n                await this.server.update(id, config, this.category)\n            })\n        this.messages = this.createMessagesStore()\n    }\n\n    public startSavingUpdates(enabled = true) {\n        this.sendingUpdates = enabled\n        if (!this.server.isDirect) {\n            this.register(\n                [\"credits\"],\n                this.osmConnection.userDetails.mapD((u) => u.name),\n                false\n            )\n            this.register(\n                [\"credits:uid\"],\n                this.osmConnection.userDetails.mapD((u) => u.uid),\n                false\n            )\n        }\n        if (enabled) {\n            this.configuration.ping()\n        }\n    }\n\n    public getCurrentValueFor(path: ReadonlyArray<string | number>): any | undefined {\n        // Walk the path down to see if we find something\n        let entry = this.configuration.data\n        for (let i = 0; i < path.length; i++) {\n            if (entry === undefined || entry === null) {\n                // We reached a dead end - no old vlaue\n                return undefined\n            }\n            const breadcrumb = path[i]\n            entry = entry[breadcrumb]\n        }\n        return entry\n    }\n\n    public async delete() {\n        await this.server.delete(this.getId().data, this.category)\n    }\n\n    public getStoreFor<T>(path: ReadonlyArray<string | number>): UIEventSource<T | undefined> {\n        const key = path.join(\".\")\n\n        const store = new UIEventSource<any>(this.getCurrentValueFor(path))\n        store.addCallback((v) => {\n            this.setValueAt(path, v)\n        })\n        this._stores.set(key, store)\n        this.configuration.addCallbackD(() => {\n            store.setData(this.getCurrentValueFor(path))\n        })\n        return store\n    }\n\n    public register(\n        path: ReadonlyArray<string | number>,\n        value: Store<any>,\n        noInitialSync: boolean = true\n    ): () => void {\n        const unsync = value.addCallback((v) => {\n            this.setValueAt(path, v)\n        })\n        if (!noInitialSync) {\n            this.setValueAt(path, value.data)\n        }\n        return unsync\n    }\n\n    public getSchemaStartingWith(path: string[]) {\n        if (path === undefined) {\n            return undefined\n        }\n        return this.schema.filter(\n            (sch) =>\n                !path.some((part, i) => !(sch.path.length > path.length && sch.path[i] === part))\n        )\n    }\n\n    public getTranslationAt(path: string[]): ConfigMeta {\n        const origConfig = this.getSchema(path)[0]\n        return {\n            path,\n            type: \"translation\",\n            hints: {\n                typehint: \"translation\",\n            },\n            required: origConfig.required ?? false,\n            description: origConfig.description ?? \"A translatable object\",\n        }\n    }\n\n    public getSchema(path: (string | number)[]): ConfigMeta[] {\n        path = path.filter((p) => typeof p === \"string\")\n        const schemas = this.schema.filter(\n            (sch) =>\n                sch !== undefined &&\n                !path.some((part, i) => !(sch.path.length == path.length && sch.path[i] === part))\n        )\n        if (schemas.length == 0) {\n            console.warn(\"No schemas found for path\", path.join(\".\"))\n        }\n        return schemas\n    }\n\n    public setValueAt(path: ReadonlyArray<string | number>, v: any) {\n        let entry = this.configuration.data\n        const isUndefined =\n            v === undefined ||\n            v === null ||\n            v === \"\" ||\n            (typeof v === \"object\" && Object.keys(v).length === 0)\n\n        for (let i = 0; i < path.length - 1; i++) {\n            const breadcrumb = path[i]\n            if (entry[breadcrumb] === undefined || entry[breadcrumb] === null) {\n                if (isUndefined) {\n                    // we have a dead end _and_ we do not need to set a value - we do an early return\n                    return\n                }\n                entry[breadcrumb] = typeof path[i + 1] === \"number\" ? [] : {}\n            }\n            entry = entry[breadcrumb]\n        }\n\n        const lastBreadcrumb = path.at(-1)\n        if (isUndefined) {\n            if (entry && entry[lastBreadcrumb]) {\n                delete entry[lastBreadcrumb]\n                this.configuration.ping()\n            }\n        } else if (entry[lastBreadcrumb] !== v) {\n            entry[lastBreadcrumb] = v\n            this.configuration.ping()\n        }\n    }\n\n    public messagesFor(path: ReadonlyArray<string | number>): Store<ConversionMessage[]> {\n        return this.messages.map((msgs) => {\n            if (!msgs) {\n                return []\n            }\n            return msgs.filter((msg) => {\n                if (msg.level === \"debug\" || msg.level === \"information\") {\n                    return false\n                }\n                const pth = msg.context.path\n                for (let i = 0; i < Math.min(pth.length, path.length); i++) {\n                    if (pth[i] !== path[i]) {\n                        return false\n                    }\n                }\n                return true\n            })\n        })\n    }\n\n    protected abstract buildValidation(state: DesugaringContext): Conversion<T, any>\n\n    protected abstract getId(): Store<string>\n\n    protected abstract validate(configuration: Partial<T>): Promise<ConversionMessage[]>\n\n    /**\n     * Creates a store that validates the configuration and which contains all relevant (error)-messages\n     * @private\n     */\n    private createMessagesStore(): Store<ConversionMessage[]> {\n        return this.configuration\n            .mapAsyncD(async (config) => {\n                if (!this.validate) {\n                    return []\n                }\n                return await this.validate(config)\n            })\n            .map((messages) => messages ?? [])\n    }\n}\n\nclass ContextRewritingStep<T> extends Conversion<LayerConfigJson, T> {\n    private readonly _step: Conversion<LayerConfigJson, T>\n    private readonly _state: DesugaringContext\n    private readonly _getTagRenderings: (t: T) => TagRenderingConfigJson[]\n\n    constructor(\n        state: DesugaringContext,\n        step: Conversion<LayerConfigJson, T>,\n        getTagRenderings: (t: T) => TagRenderingConfigJson[]\n    ) {\n        super(\n            \"When validating a layer, the tagRenderings are first expanded. Some builtin tagRendering-calls (e.g. `contact`) will introduce _multiple_ tagRenderings, causing the count to be off. This class rewrites the error messages to fix this\",\n            [],\n            \"ContextRewritingStep\"\n        )\n        this._state = state\n        this._step = step\n        this._getTagRenderings = getTagRenderings\n    }\n\n    convert(json: LayerConfigJson, context: ConversionContext): T {\n        const converted = this._step.convert(json, context)\n        const originalIds = json.tagRenderings?.map(\n            (tr) => (<QuestionableTagRenderingConfigJson>tr)[\"id\"]\n        )\n        if (!originalIds) {\n            return converted\n        }\n\n        let newTagRenderings: TagRenderingConfigJson[]\n        if (converted === undefined) {\n            const prepared = new PrepareLayer(this._state)\n            newTagRenderings = <TagRenderingConfigJson[]>(\n                prepared.convert(json, context).tagRenderings\n            )\n        } else {\n            newTagRenderings = this._getTagRenderings(converted)\n        }\n        context.rewriteMessages((path) => {\n            if (path[0] !== \"tagRenderings\") {\n                return undefined\n            }\n            const newPath = [...path]\n            const idToSearch = newTagRenderings[newPath[1]]?.id ?? \"\"\n            const oldIndex = originalIds.indexOf(idToSearch)\n            if (oldIndex < 0) {\n                console.warn(\"Original ID was not found: \", idToSearch)\n                return undefined // We don't modify the message\n            }\n            newPath[1] = oldIndex\n            return newPath\n        })\n        return converted\n    }\n}\n\nexport default class EditLayerState extends EditJsonState<LayerConfigJson> {\n    // Needed for the special visualisations\n    public readonly imageUploadManager = {\n        getCountsFor() {\n            return 0\n        },\n    }\n    public readonly theme: { getMatchingLayer: (key: any) => LayerConfig }\n    public readonly featureSwitches: {\n        featureSwitchIsDebugging: UIEventSource<boolean>\n    }\n\n    /**\n     * Used to preview and interact with the questions\n     */\n    public readonly testTags = new UIEventSource<OsmTags>({ id: \"node/-12345\" })\n    public readonly exampleFeature: Feature<Point> = {\n        type: \"Feature\",\n        properties: this.testTags.data,\n        geometry: {\n            type: \"Point\",\n            coordinates: [3.21, 51.2],\n        },\n    }\n\n    constructor(\n        schema: ConfigMeta[],\n        server: StudioServer,\n        osmConnection: OsmConnection,\n        options: { expertMode: UIEventSource<boolean> }\n    ) {\n        super(schema, server, \"layers\", osmConnection, options)\n        this.theme = {\n            getMatchingLayer: () => {\n                try {\n                    return new LayerConfig(<LayerConfigJson>this.configuration.data, \"dynamic\")\n                } catch (e) {\n                    return undefined\n                }\n            },\n        }\n        this.featureSwitches = {\n            featureSwitchIsDebugging: new UIEventSource<boolean>(true),\n        }\n\n        this.addMissingTagRenderingIds()\n\n        function cleanArray(data: object, key: string): boolean {\n            if (!data) {\n                return false\n            }\n            if (data[key]) {\n                // A bit of cleanup\n                const lBefore = data[key].length\n                const cleaned = Utils.NoNull(data[key])\n                if (cleaned.length != lBefore) {\n                    data[key] = cleaned\n                    return true\n                }\n            }\n            return false\n        }\n\n        this.configuration.addCallbackAndRunD((layer) => {\n            let changed = cleanArray(layer, \"tagRenderings\") || cleanArray(layer, \"pointRenderings\")\n            for (const tr of layer.tagRenderings ?? []) {\n                if (typeof tr === \"string\") {\n                    continue\n                }\n\n                const qtr = <QuestionableTagRenderingConfigJson>tr\n                if (qtr.freeform && Object.keys(qtr.freeform).length === 0) {\n                    delete qtr.freeform\n                    changed = true\n                }\n            }\n            if (changed) {\n                this.configuration.ping()\n            }\n        })\n    }\n\n    protected buildValidation(state: DesugaringContext) {\n        return new ContextRewritingStep(\n            state,\n            new Pipe(new PrepareLayer(state), new ValidateLayer(\"dynamic\", false, undefined, true)),\n            (t) => <TagRenderingConfigJson[]>t.raw.tagRenderings\n        )\n    }\n\n    protected getId(): Store<string> {\n        return this.configuration.mapD((config) => config.id)\n    }\n\n    private addMissingTagRenderingIds() {\n        this.configuration.addCallbackD((config) => {\n            const trs = Utils.NoNull(config.tagRenderings ?? [])\n            for (let i = 0; i < trs.length; i++) {\n                const tr = trs[i]\n                if (typeof tr === \"string\") {\n                    continue\n                }\n                if (!tr[\"id\"] && !tr[\"override\"]) {\n                    const qtr = <QuestionableTagRenderingConfigJson>tr\n                    let id = \"\" + i + \"_\" + Utils.randomString(5)\n                    if (qtr?.freeform?.key) {\n                        id = qtr?.freeform?.key\n                    } else if (qtr.mappings?.[0]?.if) {\n                        id =\n                            qtr.freeform?.key ??\n                            TagUtils.Tag(qtr.mappings[0].if).usedKeys()?.[0] ??\n                            \"\" + i\n                    }\n                    qtr[\"id\"] = id\n                }\n            }\n        })\n    }\n\n    protected async validate(\n        configuration: Partial<LayerConfigJson>\n    ): Promise<ConversionMessage[]> {\n        const layers = AllSharedLayers.getSharedLayersConfigs()\n\n        const questions = layers.get(\"questions\")\n        const sharedQuestions = new Map<string, QuestionableTagRenderingConfigJson>()\n        for (const question of questions.tagRenderings) {\n            sharedQuestions.set(question[\"id\"], <QuestionableTagRenderingConfigJson>question)\n        }\n        const state: DesugaringContext = {\n            tagRenderings: sharedQuestions,\n            sharedLayers: layers,\n            tagRenderingOrder: [],\n        }\n        const prepare = this.buildValidation(state)\n        const context = ConversionContext.construct([], [\"prepare\"])\n        try {\n            prepare.convert(<LayerConfigJson>configuration, context)\n        } catch (e) {\n            console.error(e)\n            context.err(e)\n        }\n        return context.messages\n    }\n}\n\nexport class EditThemeState extends EditJsonState<ThemeConfigJson> {\n    constructor(\n        schema: ConfigMeta[],\n        server: StudioServer,\n        osmConnection: OsmConnection,\n        options: { expertMode: UIEventSource<boolean> }\n    ) {\n        super(schema, server, \"themes\", osmConnection, options)\n        this.setupFixers()\n    }\n\n    protected buildValidation(state: DesugaringContext): Conversion<ThemeConfigJson, any> {\n        return new Pipe(\n            new PrevalidateTheme(),\n            new Pipe(\n                new PrepareTheme(state),\n                new ValidateTheme(undefined, \"\", false, new Set(state.tagRenderings.keys()))\n            ),\n            true\n        )\n    }\n\n    protected getId(): Store<string> {\n        return this.configuration.mapD((config) => config.id)\n    }\n\n    /** Applies a few bandaids to get everything smoothed out in case of errors; a big bunch of hacks basically\n     */\n    public setupFixers() {\n        this.configuration.addCallbackAndRunD((config) => {\n            if (config.layers) {\n                // Remove 'null' and 'undefined' values from the layer array if any are found\n                for (let i = config.layers.length; i >= 0; i--) {\n                    if (!config.layers[i]) {\n                        config.layers.splice(i, 1)\n                    }\n                }\n            }\n        })\n    }\n\n    protected async validate(configuration: Partial<ThemeConfigJson>) {\n        const layers = AllSharedLayers.getSharedLayersConfigs()\n\n        for (const l of configuration.layers ?? []) {\n            if (typeof l !== \"string\") {\n                continue\n            }\n            if (!l.startsWith(\"https://\")) {\n                continue\n            }\n            const config = <LayerConfigJson>await Utils.downloadJsonCached(l, 1000 * 60 * 10)\n            layers.set(l, config)\n        }\n\n        const questions = layers.get(\"questions\")\n        const sharedQuestions = new Map<string, QuestionableTagRenderingConfigJson>()\n        for (const question of questions.tagRenderings) {\n            sharedQuestions.set(question[\"id\"], <QuestionableTagRenderingConfigJson>question)\n        }\n        const state: DesugaringContext = {\n            tagRenderings: sharedQuestions,\n            sharedLayers: layers,\n            tagRenderingOrder: [],\n        }\n        const prepare = this.buildValidation(state)\n        const context = ConversionContext.construct([], [\"prepare\"])\n        if (configuration.layers) {\n            Utils.NoNullInplace(configuration.layers)\n        }\n        try {\n            prepare.convert(<ThemeConfigJson>configuration, context)\n        } catch (e) {\n            console.error(e)\n            context.err(e)\n        }\n        return context.messages\n    }\n}\n","import { JsonSchema, JsonSchemaType } from \"./jsonSchema\"\n\nexport interface ConfigMeta {\n    path: string[]\n    type: JsonSchemaType | JsonSchema[]\n    /**\n     * All fields are lowercase, as they should be case-insensitive\n     */\n    hints: {\n        group?: string\n        typehint?: string\n        typehelper?: string\n        /**\n         * If multiple subcategories can be chosen\n         */\n        types?: string\n        question?: string\n        iftrue?: string\n        iffalse?: string\n        ifunset?: string\n        inline?: string\n        default?: string\n        typesdefault?: string\n        suggestions?: []\n        title?: string\n        multianswer?: \"true\" | string\n        icon?: string\n    }\n    required: boolean\n    description: string\n}\n\nexport class ConfigMetaUtils {\n    static isTranslation(configMeta: ConfigMeta) {\n        /*      {\n    \"$ref\": \"#/definitions/Record<string,string>\"\n  },\n  {\n    \"type\": \"string\"\n  }*/\n        if (!configMeta.type) {\n            return false\n        }\n        if (Array.isArray(configMeta.type)) {\n            return configMeta.type.some((t) => t[\"$ref\"] === \"#/definitions/Record<string,string>\")\n        } else {\n            return configMeta.type[\"$ref\"] === \"#/definitions/Record<string,string>\"\n        }\n    }\n}\n","<script lang=\"ts\">\n  import type { ConversionMessage } from \"../../Models/ThemeConfig/Conversion/Conversion\"\n  import { ExclamationIcon, InformationCircleIcon } from \"@rgossiaux/svelte-heroicons/solid\"\n\n  /**\n   * Single conversion message, styled depending on the type\n   */\n  export let message: ConversionMessage\n</script>\n\n{#if message.level === \"error\"}\n  <div class=\"alert flex items-center justify-between\">\n    <ExclamationIcon class=\"mx-1 h-6 w-6 shrink-0\" />\n    {message.message}\n    <div />\n  </div>\n{:else if message.level === \"warning\"}\n  <div class=\"warning flex items-center justify-between\">\n    <ExclamationIcon class=\"mx-1 h-6 w-6 shrink-0\" />\n    {message.message}\n    <div />\n  </div>\n{:else if message.level === \"information\"}\n  <div class=\"information flex items-center justify-between\">\n    <InformationCircleIcon class=\"mx-1 h-6 w-6 shrink-0\" />\n    {message.message}\n    <div />\n  </div>\n{/if}\n","<script lang=\"ts\">\n  import { UIEventSource } from \"../../Logic/UIEventSource\"\n  import type { ConfigMeta } from \"./configMeta\"\n  import TagRenderingEditable from \"../Popup/TagRendering/TagRenderingEditable.svelte\"\n  import TagRenderingConfig from \"../../Models/ThemeConfig/TagRenderingConfig\"\n  import type { QuestionableTagRenderingConfigJson } from \"../../Models/ThemeConfig/Json/QuestionableTagRenderingConfigJson\"\n  import { EditJsonState } from \"./EditLayerState\"\n  import { onDestroy } from \"svelte\"\n  import type { JsonSchemaType } from \"./jsonSchema\"\n  import { ConfigMetaUtils } from \"./configMeta\"\n  import ShowConversionMessage from \"./ShowConversionMessage.svelte\"\n\n  export let state: EditJsonState<any>\n  export let path: (string | number)[] = []\n  export let schema: ConfigMeta\n  export let startInEditModeIfUnset: boolean = schema.hints && !schema.hints.ifunset\n\n  function mightBeBoolean(type: undefined | JsonSchemaType): boolean {\n    if (type === undefined) {\n      return false\n    }\n    if (type[\"type\"]) {\n      type = type[\"type\"]\n    }\n    if (type === \"boolean\") {\n      return true\n    }\n    if (!Array.isArray(type)) {\n      return false\n    }\n\n    return type.some((t) => mightBeBoolean(t))\n  }\n\n  function mightBeTag() {\n    const t = schema.type\n    if (!Array.isArray(t)) {\n      return false\n    }\n    const hasAnd = t.some((obj) => obj[\"$ref\"] === \"#/definitions/{and:TagConfigJson[];}\")\n    const hasOr = t.some((obj) => obj[\"$ref\"] === \"#/definitions/{or:TagConfigJson[];}\")\n    const hasString = t.some((obj) => obj[\"type\"] === \"string\")\n    return hasAnd && hasOr && hasString\n  }\n\n  const isTranslation =\n    schema.hints?.typehint === \"translation\" ||\n    schema.hints?.typehint === \"rendered\" ||\n    ConfigMetaUtils.isTranslation(schema)\n\n  let type = schema.hints.typehint ?? (mightBeTag() ? \"tag\" : \"string\")\n  let rendervalue =\n    (schema.hints.inline ?? schema.path.join(\".\")) +\n    (isTranslation ? \" <b>{translated(value)}</b>\" : \" <b>{value}</b>\")\n\n  if (schema.type === \"boolean\") {\n    rendervalue = undefined\n  }\n  if (schema.hints.typehint === \"tag\" || schema.hints.typehint === \"simple_tag\") {\n    rendervalue = \"{tags()}\"\n  }\n\n  let helperArgs = schema.hints.typehelper?.split(\",\")\n  let inline = schema.hints.inline !== undefined\n  if (isTranslation) {\n    type = \"translation\"\n    if (schema.hints.inline) {\n      const inlineValue = schema.hints.inline\n      rendervalue = inlineValue\n      inline = false\n      helperArgs = [\n        inlineValue.substring(0, inlineValue.indexOf(\"{\")),\n        inlineValue.substring(inlineValue.indexOf(\"}\") + 1),\n      ]\n    }\n  }\n  if (type.endsWith(\"[]\")) {\n    type = type.substring(0, type.length - 2)\n  }\n\n  const configJson: QuestionableTagRenderingConfigJson & { questionHintIsMd: boolean } = {\n    id: path.join(\"_\"),\n    render: rendervalue,\n    question: schema.hints.question,\n    questionHint: schema.description,\n    questionHintIsMd: true,\n    freeform:\n      schema.type === \"boolean\"\n        ? undefined\n        : {\n            key: \"value\",\n            type,\n            inline,\n            helperArgs,\n          },\n  }\n\n  if (schema.hints.default) {\n    configJson.mappings = [\n      {\n        if: \"value=\", // We leave this blank\n        then:\n          path.at(-1) +\n          \" is not set. The default value <b>\" +\n          schema.hints.default +\n          \"</b> will be used. \" +\n          (schema.hints.ifunset ?? \"\"),\n        hideInAnswer: mightBeBoolean(schema.type),\n      },\n    ]\n  } else if (!schema.required) {\n    configJson.mappings = [\n      {\n        if: \"value=\",\n        then: path.at(-1) + \" is not set. \" + (schema.hints.ifunset ?? \"\"),\n      },\n    ]\n  }\n\n  if (mightBeBoolean(schema.type)) {\n    configJson.mappings = configJson.mappings ?? []\n    configJson.mappings.push(\n      {\n        if: \"value=true\",\n        then: schema.hints?.iftrue ?? \"Yes\",\n      },\n      {\n        if: \"value=false\",\n        then: schema.hints?.iffalse ?? \"No\",\n      }\n    )\n  }\n\n  if (schema.hints.suggestions) {\n    if (!configJson.mappings) {\n      configJson.mappings = []\n    }\n    configJson.mappings.push(...schema.hints.suggestions)\n  }\n  let config: TagRenderingConfig\n  let err: string = undefined\n  let messages = state.messagesFor(path)\n  try {\n    config = new TagRenderingConfig(configJson, \"config based on \" + schema.path.join(\".\"))\n  } catch (e) {\n    console.error(e, config)\n    err = path.join(\".\") + \" \" + e\n  }\n  let startValue = state.getCurrentValueFor(path)\n  let startInEditMode = startValue === undefined && startInEditModeIfUnset\n  const tags = new UIEventSource<Record<string, string>>({ value: startValue })\n  try {\n    onDestroy(\n      state.register(\n        path,\n        tags.map((tgs) => {\n          const v = tgs[\"value\"]\n          if (typeof v === \"object\") {\n            return { ...(<object>v) }\n          }\n          if (schema.type === \"boolean\") {\n            if (v === null || v === undefined) {\n              return v\n            }\n            return v === \"true\" || v === \"yes\" || v === \"1\"\n          }\n          if (mightBeBoolean(schema.type)) {\n            if (v === \"true\" || v === \"yes\" || v === \"1\") {\n              return true\n            }\n            if (v === \"false\" || v === \"no\" || v === \"0\" || <any>v === false) {\n              return false\n            }\n          }\n          if (schema.type === \"number\") {\n            if (v === \"\" || v === null || isNaN(Number(v))) {\n              return undefined\n            }\n            return Number(v)\n          }\n          if (isTranslation && typeof v === \"string\") {\n            if (v === \"\") {\n              return {}\n            }\n            return JSON.parse(v)\n          }\n          return v\n        }),\n        isTranslation\n      )\n    )\n  } catch (e) {\n    console.error(\"Could not register\", path, \"due to\", e)\n  }\n</script>\n\n{#if err !== undefined}\n  <span class=\"alert\">{err}</span>\n{:else}\n  <div class=\"flex w-full flex-col\">\n    <TagRenderingEditable\n      editMode={startInEditMode}\n      {config}\n      selectedElement={undefined}\n      {state}\n      {tags}\n    />\n    {#if $messages.length > 0}\n      {#each $messages as message}\n        <ShowConversionMessage {message} />\n      {/each}\n    {/if}\n    {#if window.location.hostname === \"127.0.0.1\"}\n      <span class=\"subtle\" on:click={() => console.log(schema)}>\n        SchemaBasedField <b>{path.join(\".\")}</b>\n        <span class=\"cursor-pointer\" on:click={() => console.log(schema)}>\n          {schema.hints.typehint}\n        </span>\n        Group: {schema.hints.group}\n      </span>\n    {/if}\n  </div>\n{/if}\n","<script lang=\"ts\">\n  import type { ConfigMeta } from \"./configMeta\"\n  import EditLayerState, { EditJsonState } from \"./EditLayerState\"\n  import * as questions from \"../../assets/generated/layers/questions.json\"\n  import { ImmutableStore, Store } from \"../../Logic/UIEventSource\"\n  import TagRenderingEditable from \"../Popup/TagRendering/TagRenderingEditable.svelte\"\n  import TagRenderingConfig from \"../../Models/ThemeConfig/TagRenderingConfig\"\n  import type { QuestionableTagRenderingConfigJson } from \"../../Models/ThemeConfig/Json/QuestionableTagRenderingConfigJson.js\"\n  import type { TagRenderingConfigJson } from \"../../Models/ThemeConfig/Json/TagRenderingConfigJson\"\n  import FromHtml from \"../Base/FromHtml.svelte\"\n  import ShowConversionMessage from \"./ShowConversionMessage.svelte\"\n  import NextButton from \"../Base/NextButton.svelte\"\n  import Markdown from \"../Base/Markdown.svelte\"\n\n  export let state: EditLayerState\n  export let path: ReadonlyArray<string | number>\n  export let schema: ConfigMeta\n  let value = state.getStoreFor(path)\n\n  let perId: Record<string, TagRenderingConfigJson[]> = {}\n  for (let tagRendering of questions.tagRenderings) {\n    if (tagRendering.labels) {\n      for (let label of tagRendering.labels) {\n        perId[label] = (perId[label] ?? []).concat(tagRendering)\n      }\n    }\n    perId[tagRendering.id] = [tagRendering]\n  }\n\n  let configJson: Store<QuestionableTagRenderingConfigJson[]> = value.map((x) => {\n    if (x === undefined) {\n      console.log(\"No config found for \", path)\n      return []\n    }\n    if (typeof x === \"string\") {\n      return perId[x]\n    } else {\n      return <any>[x]\n    }\n  })\n  let configs: Store<TagRenderingConfig[]> = configJson.map((configs) => {\n    if (!configs) {\n      return [{ error: \"No configuartions found\" }]\n    }\n    console.log(\"Configs are\", configs)\n    return configs.map((config) => {\n      if (config[\"builtin\"]) {\n        let override = \"\"\n        if (config[\"override\"]) {\n          override =\n            \". Some items are changed with an override. Editing this is not yet supported with Studio.\"\n        }\n        return new TagRenderingConfig({\n          render: {\n            en: \"This question reuses <b>\" + JSON.stringify(config[\"builtin\"]) + \"</b>\" + override,\n          },\n        })\n      }\n      try {\n        return new TagRenderingConfig(config)\n      } catch (e) {\n        return { error: e }\n      }\n    })\n  })\n\n  let tags = state.testTags\n\n  let messages = state.messagesFor(path)\n\n  let description = schema.description\n</script>\n\n<div class=\"flex\">\n  <div class=\"m-4 flex w-full flex-col\">\n    {#if $configJson.some((config) => config[\"builtin\"] !== undefined)}\n      <div class=\"interactive rounded-2xl p-2\">\n        This question uses an advanced 'builtin'+'override' construction in the source code. Editing\n        this with Studio is not supported.\n      </div>\n    {:else}\n      <NextButton clss=\"primary\" on:click={() => state.highlightedItem.setData({ path, schema })}>\n        {#if schema.hints.question}\n          {schema.hints.question}\n        {/if}\n      </NextButton>\n    {/if}\n    {#if description}\n      <Markdown src={description} />\n    {/if}\n    {#each $messages as message}\n      <ShowConversionMessage {message} />\n    {/each}\n\n    <slot class=\"my-4 self-end\" />\n  </div>\n\n  <div class=\"m-4 flex w-full flex-col\">\n    <h3>Preview of this question</h3>\n    {#each $configs as config}\n      {#if config.error !== undefined}\n        <div class=\"alert\">Could not create a preview of this tagRendering: {config.error}</div>\n        {JSON.stringify($value)}\n      {:else if config.condition && !config.condition.matchesProperties($tags)}\n        This tagRendering is currently not shown. It will appear if the feature matches the\n        condition\n        <b>\n          <FromHtml src={config.condition.asHumanString(true, false, {})} />\n        </b>\n\n        Try to answer the relevant question above\n      {:else if config.metacondition && !config.metacondition.matchesProperties($tags)}\n        This tagRendering is currently not shown. It will appear if the feature matches the\n        metacondition\n        <b>\n          <FromHtml src={config.metacondition.asHumanString(true, false, {})} />\n        </b>\n        For a breakdown of usable meta conditions, go to a mapcomplete theme > settings and enable debug-data.\n        The meta-tags will appear at the bottom\n      {:else}\n        <TagRenderingEditable\n          selectedElement={state.exampleFeature}\n          {config}\n          editingEnabled={new ImmutableStore(true)}\n          {state}\n          {tags}\n        />\n      {/if}\n    {/each}\n  </div>\n</div>\n","<script lang=\"ts\">\n  import EditLayerState from \"./EditLayerState\"\n  import type { ConfigMeta } from \"./configMeta\"\n  import { UIEventSource } from \"../../Logic/UIEventSource\"\n  import type { QuestionableTagRenderingConfigJson } from \"../../Models/ThemeConfig/Json/QuestionableTagRenderingConfigJson\"\n  import TagRenderingEditable from \"../Popup/TagRendering/TagRenderingEditable.svelte\"\n  import TagRenderingConfig from \"../../Models/ThemeConfig/TagRenderingConfig\"\n  import { onDestroy } from \"svelte\"\n  import SchemaBasedInput from \"./SchemaBasedInput.svelte\"\n  import type { JsonSchemaType } from \"./jsonSchema\"\n  import ShowConversionMessage from \"./ShowConversionMessage.svelte\"\n  import type { Translatable } from \"../../Models/ThemeConfig/Json/Translatable\"\n\n  /**\n   * If 'types' is defined: allow the user to pick one of the types to input.\n   */\n\n  export let state: EditLayerState\n  export let path: (string | number)[] = []\n  export let schema: ConfigMeta\n  let expertMode = state.expertMode\n  const defaultOption = schema.hints.typesdefault ? Number(schema.hints.typesdefault) : undefined\n\n  const hasBooleanOption = (<JsonSchemaType[]>schema.type)?.findIndex(\n    (t) => t[\"type\"] === \"boolean\"\n  )\n  const types = schema.hints.types.split(\";\")\n  if (hasBooleanOption >= 0) {\n    types.splice(hasBooleanOption)\n  }\n\n  let lastIsString = false\n  {\n    const types: string | string[] = Array.isArray(schema.type)\n      ? schema.type[schema.type.length - 1].type\n      : []\n    lastIsString = types === \"string\" || (Array.isArray(types) && types.some((i) => i === \"string\"))\n  }\n\n  if (lastIsString) {\n    types.splice(types.length - 1, 1)\n  }\n  const configJson: QuestionableTagRenderingConfigJson & { questionHintIsMd: boolean } = {\n    id: \"TYPE_OF:\" + path.join(\"_\"),\n    question:\n      schema.hints.question ?? \"Which subcategory is needed for \" + schema.path.at(-1) + \"?\",\n    questionHint: schema.description,\n    questionHintIsMd: true,\n    mappings: types\n      .map((opt) => opt.trim())\n      .filter((opt) => opt.length > 0)\n      .map((opt, i) => ({\n        if: \"chosen_type_index=\" + i,\n        addExtraTags: [\"value=\"],\n        then: opt + (i === defaultOption ? \" (Default)\" : \"\"),\n      })),\n    render: !lastIsString\n      ? undefined\n      : schema.hints.inline ?? \"Use a hardcoded value: <b>{value}</b>\",\n    freeform: !lastIsString\n      ? undefined\n      : {\n          key: \"value\",\n          inline: true,\n          type: schema.hints.typehint,\n          addExtraTags: [\"chosen_type_index=\"],\n        },\n  }\n  let tags = new UIEventSource<Record<string, string>>({})\n\n  if (schema.hints.ifunset) {\n    configJson.mappings.push({\n      if: { and: [\"value=\", \"chosen_type_index=\"] },\n      then: schema.hints.ifunset,\n    })\n  }\n  if (schema.hints.suggestions) {\n    configJson.mappings.push(...schema.hints.suggestions)\n  }\n\n  if (hasBooleanOption >= 0) {\n    configJson.mappings.unshift(\n      {\n        if: \"value=true\",\n        then: schema.hints.iftrue ?? \"Yes\",\n        addExtraTags: [\"chosen_type_index=\"],\n      },\n      {\n        if: \"value=false\",\n        then: schema.hints.iffalse ?? \"No\",\n        addExtraTags: [\"chosen_type_index=\"],\n      }\n    )\n  }\n  const config = new TagRenderingConfig(configJson, \"config based on \" + schema.path.join(\".\"))\n  let chosenOption: number = defaultOption\n\n  const existingValue = state.getCurrentValueFor(path)\n  let hasOverride = existingValue?.override !== undefined\n  if (hasBooleanOption >= 0 && (existingValue === true || existingValue === false)) {\n    tags.setData({ value: \"\" + existingValue })\n  } else if (lastIsString && typeof existingValue === \"string\") {\n    tags.setData({ value: existingValue })\n    chosenOption = undefined\n  } else if (existingValue) {\n    // We found an existing value. Let's figure out what type it matches and select that one\n    // We run over all possibilities and check what is required\n    const possibleTypes: {\n      index: number\n      matchingPropertiesCount: number\n      optionalMatches: number\n    }[] = []\n    outer: for (let i = 0; i < (<[]>schema.type).length; i++) {\n      const type = schema.type[i]\n      let optionalMatches = 0\n      for (const key of Object.keys(type.properties ?? {})) {\n        if (!!existingValue[key]) {\n          optionalMatches++\n        }\n      }\n      if (type.required) {\n        let numberOfMatches = 0\n\n        for (const requiredAttribute of type.required) {\n          if (existingValue[requiredAttribute] === undefined) {\n            // The 'existingValue' does _not_ have this required attribute, so it cannot be of this type\n            continue outer\n          }\n          numberOfMatches++\n        }\n        possibleTypes.push({ index: i, matchingPropertiesCount: numberOfMatches, optionalMatches })\n      } else {\n        possibleTypes.push({ index: i, matchingPropertiesCount: 0, optionalMatches })\n      }\n    }\n    possibleTypes.sort((a, b) => b.optionalMatches - a.optionalMatches)\n    possibleTypes.sort((a, b) => b.matchingPropertiesCount - a.matchingPropertiesCount)\n    if (possibleTypes.length > 0) {\n      chosenOption = possibleTypes[0].index\n      tags.setData({ chosen_type_index: \"\" + chosenOption })\n    }\n  } else if (defaultOption !== undefined) {\n    tags.setData({ chosen_type_index: \"\" + defaultOption })\n  } else {\n    chosenOption = defaultOption\n  }\n\n  if (hasBooleanOption >= 0 || lastIsString) {\n    const directValue = tags.mapD((tags) => {\n      if (tags[\"chosen_type_index\"]) {\n        return \"\"\n      }\n      if (lastIsString) {\n        return tags[\"value\"]\n      }\n      return tags[\"value\"] === \"true\"\n    })\n    onDestroy(state.register(path, directValue))\n  }\n\n  let subSchemas: ConfigMeta[] = []\n\n  let subpath = path\n  const store = state.getStoreFor(path)\n  onDestroy(\n    tags.addCallbackAndRun((tags) => {\n      if (tags[\"value\"] !== undefined && tags[\"value\"] !== \"\") {\n        chosenOption = undefined\n        return\n      }\n      const oldOption = chosenOption\n      chosenOption = tags[\"chosen_type_index\"] ? Number(tags[\"chosen_type_index\"]) : defaultOption\n      const type = schema.type[chosenOption]\n      if (chosenOption !== oldOption) {\n        // Reset the values beneath\n        subSchemas = []\n        const o = state.getCurrentValueFor(path) ?? {}\n        for (const key of type?.required ?? []) {\n          o[key] ??= {}\n        }\n        store.setData(o)\n      }\n      if (!type) {\n        return\n      }\n      subpath = path\n      const cleanPath = <string[]>path.filter((p) => typeof p === \"string\")\n      if (type[\"$ref\"] === \"#/definitions/Record<string,string>\") {\n        // The subtype is a translation object\n        const schema = state.getTranslationAt(cleanPath)\n        subSchemas.push(schema)\n        subpath = path.slice(0, path.length - 2)\n        return\n      }\n      if (!type.properties) {\n        return\n      }\n      for (const crumble of Object.keys(type.properties)) {\n        subSchemas.push(...state.getSchema([...cleanPath, crumble]))\n      }\n    })\n  )\n  let messages = state.messagesFor(path)\n</script>\n\n<div class=\"m-1 flex flex-col gap-y-2 border-2 border-dashed border-gray-300 p-2\">\n  {#if schema.hints.title !== undefined && typeof path.at(-1) !== \"number\"}\n    <h3>{schema.hints.title}</h3>\n    <div>{schema.description}</div>\n    {path.join(\".\")}\n  {/if}\n  {#if hasOverride}\n    This object refers to {existingValue.builtin} and overrides some properties. This cannot be edited\n    with MapComplete Studio\n  {:else}\n    <div>\n      <TagRenderingEditable {config} selectedElement={undefined} {state} {tags} />\n    </div>\n\n    {#if chosenOption !== undefined}\n      {#each subSchemas as subschema}\n        {#if $expertMode || subschema.hints?.group !== \"expert\"}\n          <SchemaBasedInput {state} path={[...subpath, subschema?.path?.at(-1) ?? \"???\"]} />\n        {:else if window.location.hostname === \"127.0.0.1\"}\n          <span class=\"subtle\">Omitted expert question {subschema.path.join(\".\")}</span>\n        {/if}\n      {/each}\n    {:else if $messages.length > 0}\n      {#each $messages as message}\n        <ShowConversionMessage {message} />\n      {/each}\n    {/if}\n  {/if}\n  {#if window.location.hostname === \"127.0.0.1\"}\n    <span class=\"subtle\">\n      SchemaBasedMultiType <b>{path.join(\".\")}</b>\n      <span class=\"cursor-pointer\" on:click={() => console.log(schema)}>\n        {schema.hints.typehint}\n      </span>\n    </span>\n  {/if}\n</div>\n","<script lang=\"ts\">\n  import Translations from \"../i18n/Translations\"\n  import type { ConfigMeta } from \"./configMeta\"\n  import Icon from \"../Map/Icon.svelte\"\n  import Tr from \"../Base/Tr.svelte\"\n  import { Translation } from \"../i18n/Translation\"\n  import { UIEventSource } from \"../../Logic/UIEventSource\"\n  import SchemaBasedInput from \"./SchemaBasedInput.svelte\"\n  import { TrashIcon } from \"@babeard/svelte-heroicons/mini\"\n  import QuestionPreview from \"./QuestionPreview.svelte\"\n  import SchemaBasedMultiType from \"./SchemaBasedMultiType.svelte\"\n  import { EditJsonState } from \"./EditLayerState\"\n  import type { QuestionableTagRenderingConfigJson } from \"../../Models/ThemeConfig/Json/QuestionableTagRenderingConfigJson\"\n  import { AccordionItem } from \"flowbite-svelte\"\n\n  export let state: EditJsonState<any>\n\n  export let isTagRenderingBlock: boolean\n  export let schema: ConfigMeta\n  export let currentValue: UIEventSource<(string | QuestionableTagRenderingConfigJson)[]>\n\n  export let value: any\n  export let singular: string\n  export let i: number\n  export let path: (string | number)[] = []\n\n  export let expanded = new UIEventSource(false)\n\n  const subparts: ConfigMeta[] = state\n    .getSchemaStartingWith(schema.path)\n    .filter((part) => part.path.length - 1 === schema.path.length)\n\n  let usesOverride = value?.[\"builtin\"] !== undefined\n\n  function schemaForMultitype() {\n    const sch = { ...schema }\n    sch.hints.typehint = undefined\n    return sch\n  }\n\n  function fusePath(subpartPath: string[]): (string | number)[] {\n    const newPath = [...path] // has indices, e.g. [\"A\", 1, \"B\", \"C\", 2]\n    const toAdd = [...subpartPath] // doesn't have indices, e.g. [\"A\", \"B\", \"C\", \"D\"]\n\n    let indexInToAdd = 0\n    for (let i = 0; i < newPath.length; i++) {\n      if (newPath[i] === toAdd[indexInToAdd]) {\n        indexInToAdd++\n      }\n    }\n\n    // indexToAdd should now point to the last common index, '2' in the example\n    const resting = toAdd.slice(indexInToAdd)\n\n    newPath.push(...resting)\n    return newPath\n  }\n\n  function del(i: number) {\n    expanded.setData(false)\n    currentValue.data.splice(i, 1)\n    currentValue.ping()\n  }\n\n  function swap(i: number, j: number) {\n    expanded.setData(false)\n    const x = currentValue.data[i]\n    currentValue.data[i] = currentValue.data[j]\n    currentValue.data[j] = x\n    currentValue.ping()\n  }\n\n  function moveTo(source: number, target: number) {\n    expanded.setData(false)\n    const x = currentValue.data[source]\n    currentValue.data.splice(source, 1)\n    currentValue.data.splice(target, 0, x)\n    currentValue.ping()\n  }\n\n  function genTitle(value: any, singular: string, i: number): Translation {\n    try {\n      if (schema.hints.title) {\n        const v = Function(\"value\", \"return \" + schema.hints.title)(value)\n        return Translations.T(v)\n      }\n    } catch (e) {\n      console.log(\n        \"Warning: could not translate a title for \" +\n          `${singular} ${i} with function ` +\n          schema.hints.title +\n          \" and value \" +\n          JSON.stringify(value)\n      )\n    }\n    return Translations.T(`${singular} ${i}`)\n  }\n\n  let genIconF: (x: any) => { icon: string; color: string } = <any>(\n    Function(\"value\", \"return \" + schema.hints.icon)\n  )\n\n  function genIcon(value: any): string {\n    return genIconF(value)?.icon\n  }\n\n  function genColor(value: any): string {\n    if (!schema.hints.icon) {\n      return undefined\n    }\n    return genIconF(value)?.color\n  }\n</script>\n\n<AccordionItem open={$expanded} paddingDefault=\"p-0\" inactiveClass=\"text-black m-0\">\n  <div slot=\"header\" class=\"m-0 w-full p-1 text-base text-black\">\n    {#if !isTagRenderingBlock}\n      <div class=\"flex w-full items-center justify-between\">\n        <div class=\"m-0 flex\">\n          {#if schema.hints.icon}\n            <Icon clss=\"w-6 h-6\" icon={genIcon(value)} color={genColor(value)} />\n          {/if}\n          {#if schema.hints.title}\n            <Tr t={genTitle(value, singular, i)} />\n            <div class=\"subtle ml-2\">\n              {singular}\n              {i}\n            </div>\n          {:else}\n            {singular}\n            {i}\n          {/if}\n        </div>\n        <button\n          class=\"h-fit w-fit rounded-full border border-black p-1\"\n          on:click={() => {\n            del(i)\n          }}\n        >\n          <TrashIcon class=\"h-4 w-4\" />\n        </button>\n      </div>\n    {:else if typeof value === \"string\"}\n      Builtin: <b>{value}</b>\n    {:else if value?.[\"builtin\"]}\n      reused tagrendering <span class=\"font-bold\">{JSON.stringify(value[\"builtin\"])}</span>\n    {:else}\n      <Tr cls=\"font-bold\" t={Translations.T(value?.question ?? value?.render)} />\n    {/if}\n  </div>\n  <div class=\"normal-background border border-gray-300 p-2\">\n    {#if usesOverride}\n      This block uses an builtin/override construction and cannot be edited in Studio. Edit the code\n      directly\n    {:else if isTagRenderingBlock}\n      <QuestionPreview {state} {path} {schema}>\n        <button\n          on:click={() => {\n            del(i)\n          }}\n        >\n          <TrashIcon class=\"h-4 w-4\" />\n          Delete this question\n        </button>\n\n        {#if i > 0}\n          <button\n            on:click={() => {\n              moveTo(i, 0)\n            }}\n          >\n            Move to front\n          </button>\n\n          <button\n            on:click={() => {\n              swap(i, i - 1)\n            }}\n          >\n            Move up\n          </button>\n        {/if}\n        {#if i + 1 < $currentValue.length}\n          <button\n            on:click={() => {\n              swap(i, i + 1)\n            }}\n          >\n            Move down\n          </button>\n          <button\n            on:click={() => {\n              moveTo(i, $currentValue.length - 1)\n            }}\n          >\n            Move to back\n          </button>\n        {/if}\n      </QuestionPreview>\n    {:else if schema.hints.types}\n      <SchemaBasedMultiType {state} path={[...path, i]} schema={schemaForMultitype()} />\n    {:else}\n      {#each subparts as subpart}\n        <SchemaBasedInput {state} path={fusePath(subpart.path)} schema={subpart} />\n      {/each}\n    {/if}\n  </div>\n</AccordionItem>\n","<script lang=\"ts\">\n  import { EditJsonState } from \"./EditLayerState\"\n  import type { ConfigMeta } from \"./configMeta\"\n  import SchemaBasedField from \"./SchemaBasedField.svelte\"\n  import { TrashIcon } from \"@babeard/svelte-heroicons/mini\"\n  import ShowConversionMessage from \"./ShowConversionMessage.svelte\"\n  import Markdown from \"../Base/Markdown.svelte\"\n  import type { QuestionableTagRenderingConfigJson } from \"../../Models/ThemeConfig/Json/QuestionableTagRenderingConfigJson\"\n  import CollapsedTagRenderingPreview from \"./CollapsedTagRenderingPreview.svelte\"\n  import { Accordion } from \"flowbite-svelte\"\n  import { Utils } from \"../../Utils\"\n\n  export let state: EditJsonState<any>\n  export let path: (string | number)[] = []\n  let schema: ConfigMeta = state.getSchema(path)[0]\n  console.log(\"SBA got schema\", schema, \"for path\", path)\n\n  let title = schema?.path?.at(-1)\n  let singular = title\n  if (title?.endsWith(\"s\")) {\n    singular = title?.slice(0, title.length - 1)\n  }\n  let article = \"a\"\n  if (singular?.match(/^[aeoui]/)) {\n    article = \"an\"\n  }\n\n  const isTagRenderingBlock = path.length === 1 && path[0] === \"tagRenderings\"\n\n  if (isTagRenderingBlock && schema !== undefined) {\n    schema = { ...schema }\n    schema.description = undefined\n  }\n\n  const subparts: ConfigMeta[] = state\n    .getSchemaStartingWith(schema?.path)\n    ?.filter((part) => part.path.length - 1 === schema?.path?.length)\n  let messages = state.messagesFor(path)\n\n  let datapath = path\n  const currentValue = state.getStoreFor<(string | QuestionableTagRenderingConfigJson)[]>(datapath)\n  currentValue.set(Utils.DedupT(currentValue.data))\n  console.log(\"Current value is\", currentValue.data)\n  if (currentValue.data === undefined) {\n    currentValue.setData([])\n  }\n\n  function createItem(valueToSet?: string | QuestionableTagRenderingConfigJson) {\n    if (currentValue.data === undefined) {\n      currentValue.setData([])\n    }\n    currentValue.data.push(valueToSet)\n    currentValue.ping()\n\n    if (isTagRenderingBlock) {\n      state.highlightedItem?.setData({ path: [...path, currentValue.data.length - 1], schema })\n    }\n  }\n\n  function fusePath(i: number): (string | number)[] {\n    return [...path, i]\n  }\n\n  function del(i: number) {\n    currentValue.data.splice(i, 1)\n    currentValue.ping()\n  }\n</script>\n\n{#if schema !== undefined}\n  <div class=\"pl-2\">\n    <h3>{schema.path.at(-1)}</h3>\n\n    {#if subparts.length > 0}\n      <Markdown src={schema.description} />\n    {/if}\n    {#if $currentValue === undefined}\n      No array defined\n    {:else if !Array.isArray($currentValue)}\n      Not an array: {typeof $currentValue}\n      {JSON.stringify(path)}\n      {JSON.stringify($currentValue).slice(0, 120)}\n    {:else if $currentValue?.length === 0}\n      No values are defined\n      {#if $messages.length > 0}\n        {#each $messages as message}\n          <ShowConversionMessage {message} />\n        {/each}\n      {/if}\n    {:else if subparts.length === 0}\n      <!-- We need an array of values, so we use the typehint of the _parent_ element as field -->\n      {#each $currentValue as value, i}\n        <div class=\"flex w-full\">\n          <SchemaBasedField {state} {schema} path={fusePath(i)} />\n          <button\n            class=\"h-fit w-fit rounded-full border border-black p-1\"\n            on:click={() => {\n              del(i)\n            }}\n          >\n            <TrashIcon class=\"h-4 w-4\" />\n          </button>\n        </div>\n      {/each}\n    {:else}\n      <Accordion>\n        <!-- The CollapsedTagRenderingPreview contains the accordeon items -->\n        {#each $currentValue as value, i}\n          <CollapsedTagRenderingPreview\n            {state}\n            {isTagRenderingBlock}\n            {schema}\n            {currentValue}\n            {value}\n            {i}\n            {singular}\n            path={fusePath(i)}\n          />\n        {/each}\n      </Accordion>\n    {/if}\n    <div class=\"flex\">\n      <button on:click={() => createItem()}>Add {article} {singular}</button>\n      {#if path.length === 1 && path[0] === \"tagRenderings\"}\n        <button\n          on:click={() => {\n            createItem(\"images\")\n          }}\n        >\n          Add a builtin tagRendering\n        </button>\n      {/if}\n      <slot name=\"extra-button\" />\n    </div>\n  </div>\n{/if}\n","<script lang=\"ts\">\n  import type { ConfigMeta } from \"./configMeta\"\n  import EditLayerState from \"./EditLayerState\"\n  import type { QuestionableTagRenderingConfigJson } from \"../../Models/ThemeConfig/Json/QuestionableTagRenderingConfigJson\"\n  import { UIEventSource } from \"../../Logic/UIEventSource\"\n  import TagRenderingEditable from \"../Popup/TagRendering/TagRenderingEditable.svelte\"\n  import TagRenderingConfig from \"../../Models/ThemeConfig/TagRenderingConfig\"\n\n  export let schema: ConfigMeta\n  export let state: EditLayerState\n  export let path: (string | number)[] = []\n\n  const configJson: QuestionableTagRenderingConfigJson = {\n    mappings: schema.hints.suggestions,\n    multiAnswer: true,\n    id: \"multi_anwser_\" + path.join(\"_\"),\n    question: schema.hints.question,\n  }\n  const tags = new UIEventSource({})\n\n  {\n    // Setting the initial value\n    const v = <string[]>state.getCurrentValueFor(path)\n    if (v && v.length > 0) {\n      tags.setData({ value: v.join(\";\") })\n    }\n  }\n\n  tags.addCallbackD((tags) => {\n    const values = tags[\"value\"]?.split(\";\")\n    if (!values) {\n      return\n    }\n    state.setValueAt(path, values)\n  })\n  const config = new TagRenderingConfig(configJson)\n</script>\n\n<div>\n  <TagRenderingEditable {config} selectedElement={undefined} {state} {tags} />\n</div>\n","<script lang=\"ts\">\n  import type { ConfigMeta } from \"./configMeta\"\n  import SchemaBasedField from \"./SchemaBasedField.svelte\"\n  import { EditJsonState } from \"./EditLayerState\"\n  import SchemaBasedArray from \"./SchemaBasedArray.svelte\"\n  import SchemaBasedMultiType from \"./SchemaBasedMultiType.svelte\"\n  import ArrayMultiAnswer from \"./ArrayMultiAnswer.svelte\"\n\n  export let state: EditJsonState<any>\n  export let path: (string | number)[] = []\n  export let schema: ConfigMeta = state.getSchema(<any>path)[0]\n  let expertMode = state.expertMode\n</script>\n\n{#if schema === undefined}\n  <div>ERROR: no schema found for {path.join(\".\")}</div>\n{:else if (schema.hints?.group !== \"expert\" || $expertMode) && schema.hints.group !== \"hidden\"}\n  {#if schema.hints?.typehint?.endsWith(\"[]\")}\n    <!-- We cheat a bit here by matching this 'magical' type... -->\n    <SchemaBasedArray {path} {state} />\n  {:else if schema.type === \"array\" && schema.hints.multianswer === \"true\"}\n    <ArrayMultiAnswer {path} {state} {schema} />\n  {:else if schema.type === \"array\"}\n    <SchemaBasedArray {path} {state} />\n  {:else if schema.hints?.types}\n    <SchemaBasedMultiType {path} {state} {schema} />\n  {:else}\n    <SchemaBasedField {path} {state} {schema} />\n  {/if}\n{:else if window.location.hostname === \"127.0.0.1\"}\n  <div class=\"subtle\">\n    Not showing SBI {schema.path.join(\".\")} due to group {schema.hints.group}\n  </div>\n{/if}\n","<script lang=\"ts\">\n  /***\n   * A 'region' is a collection of properties that can be edited which are somewhat related.\n   * They will typically be a subset of some properties\n   */\n  import type { ConfigMeta } from \"./configMeta\"\n  import EditLayerState, { EditJsonState } from \"./EditLayerState\"\n  import SchemaBasedInput from \"./SchemaBasedInput.svelte\"\n  import AccordionSingle from \"../Flowbite/AccordionSingle.svelte\"\n  import { Utils } from \"../../Utils\"\n\n  export let state: EditLayerState\n  export let configs: ConfigMeta[]\n  export let title: string | undefined = undefined\n\n  export let path: readonly (string | number)[] = []\n\n  let expertMode = state.expertMode\n  let configsNoHidden = configs.filter((schema) => schema.hints?.group !== \"hidden\")\n  let configsFiltered = $expertMode\n    ? configsNoHidden\n    : configsNoHidden.filter((schema) => schema.hints?.group !== \"expert\")\n</script>\n\n{#if configs === undefined}\n  Bug: 'Region' received 'undefined' at {path.join(\".\")}\n{:else if configs.length === 0}\n  Bug: Region received empty list as configuration at {path.join(\".\")}\n{:else if title}\n  <AccordionSingle>\n    <div slot=\"header\">{title}</div>\n    <div class=\"flex w-full flex-col gap-y-1 pl-2\">\n      <slot name=\"description\" />\n      {#each configsFiltered as config (config.path)}\n        <SchemaBasedInput {state} path={config.path} } />\n      {/each}\n    </div>\n  </AccordionSingle>\n{:else}\n  <div class=\"flex w-full flex-col gap-y-1 pl-2\">\n    {#each configsFiltered as config}\n      <SchemaBasedInput {state} path={path.concat(config.path)} schema={config} />\n    {/each}\n  </div>\n{/if}\n","<script lang=\"ts\">\n  /**\n   * Thin wrapper around 'TabGroup' which binds the state\n   */\n\n  import { Tab, TabGroup, TabList, TabPanel, TabPanels } from \"@rgossiaux/svelte-headlessui\"\n  import { ImmutableStore, Store, UIEventSource } from \"../../Logic/UIEventSource\"\n  import { twJoin } from \"tailwind-merge\"\n\n  /**\n   * If a condition is given for a certain tab, it will only be shown if this condition is true.\n   * E.g.\n   * condition3 = new ImmutableStore(false) will always hide tab3 (the fourth tab)\n   */\n  const tr = new ImmutableStore(true)\n  export let condition0: Store<boolean> = tr\n  export let condition1: Store<boolean> = tr\n  export let condition2: Store<boolean> = tr\n  export let condition3: Store<boolean> = tr\n  export let condition4: Store<boolean> = tr\n  export let condition5: Store<boolean> = tr\n  export let condition6: Store<boolean> = tr\n  export let tab: UIEventSource<number> = new UIEventSource<number>(0)\n  let tabElements: HTMLElement[] = []\n  $: tabElements[$tab]?.click()\n  $: {\n    if (tabElements[tab.data]) {\n      window.setTimeout(() => tabElements[tab.data].click(), 50)\n    }\n  }\n  export function getTab() {\n    return tab\n  }\n</script>\n\n<div class=\"tabbedgroup flex h-full w-full\">\n  <TabGroup\n    class=\"flex h-full w-full flex-col\"\n    defaultIndex={1}\n    on:change={(e) => {\n      if (e.detail >= 0) {\n        tab.setData(e.detail)\n      }\n    }}\n  >\n    <div class=\"interactive sticky top-0 flex items-center justify-between\">\n      <TabList class=\"flex flex-wrap\">\n        {#if $$slots.title0}\n          <Tab\n            class={({ selected }) => twJoin(\"tab\", selected && \"primary\", !$condition0 && \"hidden\")}\n          >\n            <div bind:this={tabElements[0]} class=\"flex\">\n              <slot name=\"title0\">Tab 0</slot>\n            </div>\n          </Tab>\n        {/if}\n        {#if $$slots.title1}\n          <Tab\n            class={({ selected }) => twJoin(\"tab\", selected && \"primary\", !$condition1 && \"hidden\")}\n          >\n            <div bind:this={tabElements[1]} class=\"flex\">\n              <slot name=\"title1\" />\n            </div>\n          </Tab>\n        {/if}\n        {#if $$slots.title2}\n          <Tab\n            class={({ selected }) => twJoin(\"tab\", selected && \"primary\", !$condition2 && \"hidden\")}\n          >\n            <div bind:this={tabElements[2]} class=\"flex\">\n              <slot name=\"title2\" />\n            </div>\n          </Tab>\n        {/if}\n        {#if $$slots.title3}\n          <Tab\n            class={({ selected }) => twJoin(\"tab\", selected && \"primary\", !$condition3 && \"hidden\")}\n          >\n            <div bind:this={tabElements[3]} class=\"flex\">\n              <slot name=\"title3\" />\n            </div>\n          </Tab>\n        {/if}\n        {#if $$slots.title4}\n          <Tab\n            class={({ selected }) => twJoin(\"tab\", selected && \"primary\", !$condition4 && \"hidden\")}\n          >\n            <div bind:this={tabElements[4]} class=\"flex\">\n              <slot name=\"title4\" />\n            </div>\n          </Tab>\n        {/if}\n        {#if $$slots.title5}\n          <Tab\n            class={({ selected }) => twJoin(\"tab\", selected && \"primary\", !$condition5 && \"hidden\")}\n          >\n            <div bind:this={tabElements[5]} class=\"flex\">\n              <slot name=\"title5\" />\n            </div>\n          </Tab>\n        {/if}\n        {#if $$slots.title6}\n          <Tab\n            class={({ selected }) => twJoin(\"tab\", selected && \"primary\", !$condition6 && \"hidden\")}\n          >\n            <div bind:this={tabElements[6]} class=\"flex\">\n              <slot name=\"title6\" />\n            </div>\n          </Tab>\n        {/if}\n      </TabList>\n      <slot name=\"post-tablist\" />\n    </div>\n    <div class=\"normal-background h-full overflow-y-auto\">\n      <TabPanels class=\"tabpanels\" defaultIndex={$tab}>\n        <TabPanel class=\"tabpanel\">\n          <slot name=\"content0\">\n            <div>Empty</div>\n          </slot>\n        </TabPanel>\n        <TabPanel class=\"tabpanel\">\n          <slot name=\"content1\">\n            <div />\n          </slot>\n        </TabPanel>\n        <TabPanel class=\"tabpanel\">\n          <slot name=\"content2\">\n            <div />\n          </slot>\n        </TabPanel>\n        <TabPanel class=\"tabpanel\">\n          <slot name=\"content3\">\n            <div />\n          </slot>\n        </TabPanel>\n        <TabPanel class=\"tabpanel\">\n          <slot name=\"content4\">\n            <div />\n          </slot>\n        </TabPanel>\n        <TabPanel class=\"tabpanel\">\n          <slot name=\"content5\">\n            <div />\n          </slot>\n        </TabPanel>\n        <TabPanel class=\"tabpanel\">\n          <slot name=\"content6\">\n            <div />\n          </slot>\n        </TabPanel>\n      </TabPanels>\n    </div>\n  </TabGroup>\n</div>\n\n<style>\n  .tabbedgroup {\n    max-height: 100vh;\n    height: 100%;\n  }\n\n  :global(.tabpanel) {\n    height: 100%;\n  }\n\n  :global(.tabpanels) {\n    height: calc(100% - 2rem);\n  }\n\n  :global(.tab) {\n    margin: 0.25rem;\n    padding: 0.25rem;\n    padding-left: 0.75rem;\n    padding-right: 0.75rem;\n    border-radius: 1rem;\n  }\n\n  :global(.tab .flex) {\n    align-items: center;\n    gap: 0.25rem;\n  }\n\n  :global(.tab span|div) {\n    align-items: center;\n    gap: 0.25rem;\n    display: flex;\n  }\n\n  :global(.tab-selected svg) {\n    fill: var(--catch-detail-color-contrast);\n  }\n\n  :global(.tab-unselected) {\n    background-color: var(--background-color) !important;\n    color: var(--foreground-color) !important;\n  }\n</style>\n","<script lang=\"ts\">\n  import EditLayerState from \"./EditLayerState\"\n  import { ExclamationIcon } from \"@rgossiaux/svelte-heroicons/solid\"\n\n  export let firstPaths: Set<string | number>\n  export let state: EditLayerState\n  let messagesCount = state.messages.map(\n    (msgs) =>\n      msgs.filter((msg) => {\n        const pth = msg.context.path\n        return firstPaths.has(pth[0]) || (pth.length > 1 && firstPaths.has(pth[1]))\n      }).length\n  )\n</script>\n\n{#if $messagesCount > 0}\n  <span class=\"alert flex w-min\">\n    <ExclamationIcon class=\"h-6 w-6\" />\n    {$messagesCount}\n  </span>\n{/if}\n","<script lang=\"ts\">\n  import EditLayerState from \"./EditLayerState\"\n  import { UIEventSource } from \"../../Logic/UIEventSource\"\n  import type { TagConfigJson } from \"../../Models/ThemeConfig/Json/TagConfigJson\"\n  import { TagUtils } from \"../../Logic/Tags/TagUtils\"\n  import FromHtml from \"../Base/FromHtml.svelte\"\n  import { PencilIcon } from \"@rgossiaux/svelte-heroicons/outline\"\n  import Region from \"./Region.svelte\"\n  import type { ConfigMeta } from \"./configMeta\"\n  import configs from \"../../assets/schemas/questionabletagrenderingconfigmeta.json\"\n  import { Utils } from \"../../Utils\"\n  import { ExclamationTriangle } from \"@babeard/svelte-heroicons/solid/ExclamationTriangle\"\n\n  export let state: EditLayerState\n  export let path: (string | number)[]\n  let messages = state.messagesFor(path)\n  let tag: UIEventSource<TagConfigJson> = state.getStoreFor([...path, \"if\"])\n  let parsedTag = tag.map((t) => (t ? TagUtils.Tag(t) : undefined))\n  let exampleTags = parsedTag.map((pt) => {\n    if (!pt) {\n      return {}\n    }\n    const keys = pt.usedKeys()\n    const o = {}\n    for (const key of keys) {\n      o[key] = \"value\"\n    }\n    return o\n  })\n\n  let thenText: UIEventSource<Record<string, string>> = state.getStoreFor([...path, \"then\"])\n  let thenTextEn = thenText.mapD((translation) =>\n    typeof translation === \"string\" ? translation : translation[\"en\"]\n  )\n  let editMode = Object.keys($thenText ?? {})?.length === 0\n\n  let mappingConfigs: ConfigMeta[] = configs\n    .filter((c) => c.path[0] === \"mappings\")\n    .map((c) => <ConfigMeta>Utils.Clone(c))\n    .map((c) => {\n      c.path.splice(0, 1)\n      return c\n    })\n    .filter((c) => c.path.length == 1 && c.hints.group !== \"hidden\")\n</script>\n\n<button\n  on:click={() => {\n    editMode = !editMode\n  }}\n>\n  <PencilIcon class=\"h-6 w-6\" />\n</button>\n\n{#if editMode}\n  <div class=\"flex w-full items-start justify-between\">\n    <div class=\"flex w-full flex-col\">\n      <Region {state} configs={mappingConfigs} {path} />\n    </div>\n\n    <slot name=\"delete\" />\n  </div>\n{:else}\n  <div>\n    {#if Object.keys($thenText).length > 0}\n      <b>\n        {$thenTextEn}\n      </b>\n    {:else}\n      <i>No then is set</i>\n    {/if}\n    <FromHtml src={$parsedTag?.asHumanString(false, false, $exampleTags)} />\n    {#if $messages.length > 0}\n      <div class=\"alert m-2 flex\">\n        <ExclamationTriangle class=\"h-6 w-6\" />\n        {$messages.length} errors\n      </div>\n    {/if}\n  </div>\n{/if}\n","<script lang=\"ts\">\n  /**\n   * Little helper class to deal with choosing a builtin tagRendering or defining one yourself.\n   * Breaks the ideology that everything should be schema based\n   */\n  import EditLayerState from \"./EditLayerState\"\n  import type { ConfigMeta } from \"./configMeta\"\n  import type {\n    MappingConfigJson,\n    QuestionableTagRenderingConfigJson,\n  } from \"../../Models/ThemeConfig/Json/QuestionableTagRenderingConfigJson\"\n  import TagRenderingConfig from \"../../Models/ThemeConfig/TagRenderingConfig\"\n  import TagRenderingEditable from \"../Popup/TagRendering/TagRenderingEditable.svelte\"\n  import { Store, UIEventSource } from \"../../Logic/UIEventSource\"\n  import * as questions from \"../../assets/generated/layers/questions.json\"\n  import MappingInput from \"./MappingInput.svelte\"\n  import { TrashIcon } from \"@rgossiaux/svelte-heroicons/outline\"\n  import questionableTagRenderingSchemaRaw from \"../../assets/schemas/questionabletagrenderingconfigmeta.json\"\n  import SchemaBasedField from \"./SchemaBasedField.svelte\"\n  import Region from \"./Region.svelte\"\n  import NextButton from \"../Base/NextButton.svelte\"\n  import { QuestionMarkCircleIcon } from \"@rgossiaux/svelte-heroicons/solid\"\n  import { LocalStorageSource } from \"../../Logic/Web/LocalStorageSource\"\n  import { onMount } from \"svelte\"\n\n  export let state: EditLayerState\n  export let path: ReadonlyArray<string | number>\n  let expertMode = state.expertMode\n  const store = state.getStoreFor(path)\n  let value = store.data\n  let hasSeenIntro = UIEventSource.asBoolean(\n    LocalStorageSource.get(\"studio-seen-tagrendering-tutorial\", \"false\")\n  )\n  onMount(() => {\n    if (!hasSeenIntro.data) {\n      state.showIntro.setData(\"tagrenderings\")\n      hasSeenIntro.setData(true)\n    }\n  })\n  /**\n   * Allows the theme builder to create 'writable' themes.\n   * Should only be enabled for 'tagrenderings' in the theme, if the source is OSM\n   */\n  let allowQuestions: Store<boolean> = state.configuration.mapD(\n    (config) => path.at(0) === \"tagRenderings\" && config.source?.[\"geoJson\"] === undefined\n  )\n\n  let mappingsBuiltin: MappingConfigJson[] = []\n  let perLabel: Record<string, MappingConfigJson> = {}\n  {\n    // Build the list of options that one can choose for builtin questions\n    const forbidden = new Set([\"ignore_docs\", \"all_tags\"])\n\n    for (const tr of questions.tagRenderings) {\n      if (forbidden.has(tr.id)) {\n        continue\n      }\n      let description = tr[\"description\"] ?? tr[\"question\"] ?? \"No description available\"\n      description = description[\"en\"] ?? description\n      if (tr[\"labels\"]) {\n        const labels: string[] = tr[\"labels\"]\n        if (labels.some((l) => forbidden.has(l))) {\n          continue\n        }\n        for (const label of labels) {\n          let labelMapping: MappingConfigJson = perLabel[label]\n\n          if (!labelMapping) {\n            labelMapping = {\n              if: \"value=\" + label,\n              then: {\n                en: \"Builtin collection <b>\" + label + \"</b>:\",\n              },\n            }\n            perLabel[label] = labelMapping\n            mappingsBuiltin.push(labelMapping)\n          }\n          labelMapping.then.en = labelMapping.then.en + \"<div>\" + description + \"</div>\"\n        }\n      }\n\n      mappingsBuiltin.push({\n        if: \"value=\" + tr[\"id\"],\n        then: {\n          en: \"Builtin <b>\" + tr[\"id\"] + \"</b> <div class='subtle'>\" + description + \"</div>\",\n        },\n      })\n    }\n  }\n\n  const configBuiltin = new TagRenderingConfig(<QuestionableTagRenderingConfigJson>{\n    question: \"Which builtin element should be shown?\",\n    mappings: mappingsBuiltin,\n  })\n\n  const tags = new UIEventSource({ value })\n\n  tags.addCallbackAndRunD((tgs) => {\n    store.setData(tgs[\"value\"])\n  })\n\n  let mappings: UIEventSource<MappingConfigJson[]> = state.getStoreFor([...path, \"mappings\"])\n\n  const topLevelItems: Record<string, ConfigMeta> = {}\n  for (const item of questionableTagRenderingSchemaRaw) {\n    if (item.path.length === 1) {\n      topLevelItems[item.path[0]] = <ConfigMeta>item\n    }\n  }\n\n  function initMappings() {\n    if (mappings.data === undefined) {\n      mappings.setData([])\n    }\n  }\n\n  const items = new Set([\n    \"question\",\n    \"questionHint\",\n    \"multiAnswer\",\n    \"freeform\",\n    \"render\",\n    \"condition\",\n    \"metacondition\",\n    \"mappings\",\n    \"icon\",\n  ])\n  const ignored = new Set([\"labels\", \"description\", \"classes\"])\n\n  const freeformSchemaAll = <ConfigMeta[]>(\n    questionableTagRenderingSchemaRaw.filter(\n      (schema) => schema.path.length == 2 && schema.path[0] === \"freeform\" && $allowQuestions\n    )\n  )\n  let freeformSchema = $expertMode\n    ? freeformSchemaAll\n    : freeformSchemaAll.filter((schema) => schema.hints?.group !== \"expert\")\n  const missing: string[] = questionableTagRenderingSchemaRaw\n    .filter(\n      (schema) =>\n        schema.path.length >= 1 && !items.has(schema.path[0]) && !ignored.has(schema.path[0])\n    )\n    .map((schema) => schema.path.join(\".\"))\n  console.log({ state })\n</script>\n\n{#if typeof $store === \"string\"}\n  <div class=\"low-interaction flex\">\n    <TagRenderingEditable\n      config={configBuiltin}\n      selectedElement={undefined}\n      {state}\n      {tags}\n      editMode={true}\n      clss=\"w-full\"\n    />\n    <slot name=\"upper-right\" />\n  </div>\n{:else}\n  <div class=\"flex w-full flex-col gap-y-1 p-1 pr-12\">\n    <div class=\"flex justify-end\">\n      <slot name=\"upper-right\" />\n    </div>\n    {#if $allowQuestions}\n      <SchemaBasedField\n        startInEditModeIfUnset={true}\n        {state}\n        path={[...path, \"question\"]}\n        schema={topLevelItems[\"question\"]}\n      />\n      <SchemaBasedField\n        {state}\n        path={[...path, \"questionHint\"]}\n        schema={topLevelItems[\"questionHint\"]}\n      />\n    {/if}\n    {#each $mappings ?? [] as mapping, i (mapping)}\n      <div class=\"interactive flex w-full\">\n        <MappingInput {state} path={[...path, \"mappings\", i]}>\n          <button\n            slot=\"delete\"\n            class=\"no-image-background rounded-full\"\n            on:click={() => {\n              initMappings()\n              mappings.data.splice(i, 1)\n              mappings.ping()\n            }}\n          >\n            <TrashIcon class=\"h-4 w-4\" />\n          </button>\n        </MappingInput>\n      </div>\n    {/each}\n\n    <button\n      class=\"primary\"\n      on:click={() => {\n        initMappings()\n        mappings.data.push({ if: undefined, then: {} })\n        mappings.ping()\n      }}\n    >\n      Add a predefined option\n    </button>\n\n    {#if $allowQuestions}\n      <SchemaBasedField\n        {state}\n        path={[...path, \"multiAnswer\"]}\n        schema={topLevelItems[\"multiAnswer\"]}\n      />\n    {/if}\n\n    <h3>Text field and input element configuration</h3>\n    <div class=\"border-l border-dashed border-gray-800 pl-2\">\n      <SchemaBasedField {state} path={[...path, \"render\"]} schema={topLevelItems[\"render\"]} />\n      {#if freeformSchema?.length > 0}\n        <!-- In read-only cases, (e.g. popup title) there will be no freeform-schema to set and thus freeformSchema will be undefined -->\n        <Region {state} {path} configs={freeformSchema} />\n      {/if}\n      <SchemaBasedField {state} path={[...path, \"icon\"]} schema={topLevelItems[\"icon\"]} />\n    </div>\n\n    <SchemaBasedField {state} path={[...path, \"condition\"]} schema={topLevelItems[\"condition\"]} />\n    {#if $expertMode}\n      <SchemaBasedField\n        {state}\n        path={[...path, \"metacondition\"]}\n        schema={topLevelItems[\"metacondition\"]}\n      />\n    {/if}\n    {#each missing as field}\n      <SchemaBasedField {state} path={[...path, field]} schema={topLevelItems[field]} />\n    {/each}\n\n    <NextButton clss=\"small mt-8\" on:click={() => state.showIntro.setData(\"tagrenderings\")}>\n      <QuestionMarkCircleIcon class=\"h-6 w-6\" />\n      Show the introduction again\n    </NextButton>\n  </div>\n{/if}\n","<script lang=\"ts\">\n  import type { ConversionMessage } from \"../../Models/ThemeConfig/Conversion/Conversion\"\n\n  export let messages: ConversionMessage[]\n</script>\n\n{#if messages.length === 0}\n  <div class=\"thanks\">No errors, warnings or messages</div>\n{/if}\n\n{#each messages as message}\n  <li>\n    {message.level}\n    <span class=\"literal-code\">{message.context.path.join(\".\")}</span>\n    {message.message}\n    <span class=\"literal-code\">\n      {message.context.operation.join(\".\")}\n    </span>\n  </li>\n{/each}\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nexport { _arrayLikeToArray as arrayLikeToArray, _arrayWithHoles as arrayWithHoles, _defineProperty as defineProperty, _iterableToArrayLimit as iterableToArrayLimit, _nonIterableRest as nonIterableRest, _objectSpread2 as objectSpread2, _objectWithoutProperties as objectWithoutProperties, _objectWithoutPropertiesLoose as objectWithoutPropertiesLoose, _slicedToArray as slicedToArray, _unsupportedIterableToArray as unsupportedIterableToArray };\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction compose() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function (x) {\n    return fns.reduceRight(function (y, f) {\n      return f(y);\n    }, x);\n  };\n}\n\nfunction curry(fn) {\n  return function curried() {\n    var _this = this;\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return args.length >= fn.length ? fn.apply(this, args) : function () {\n      for (var _len3 = arguments.length, nextArgs = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        nextArgs[_key3] = arguments[_key3];\n      }\n\n      return curried.apply(_this, [].concat(args, nextArgs));\n    };\n  };\n}\n\nfunction isObject(value) {\n  return {}.toString.call(value).includes('Object');\n}\n\nfunction isEmpty(obj) {\n  return !Object.keys(obj).length;\n}\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nfunction hasOwnProperty(object, property) {\n  return Object.prototype.hasOwnProperty.call(object, property);\n}\n\nfunction validateChanges(initial, changes) {\n  if (!isObject(changes)) errorHandler('changeType');\n  if (Object.keys(changes).some(function (field) {\n    return !hasOwnProperty(initial, field);\n  })) errorHandler('changeField');\n  return changes;\n}\n\nfunction validateSelector(selector) {\n  if (!isFunction(selector)) errorHandler('selectorType');\n}\n\nfunction validateHandler(handler) {\n  if (!(isFunction(handler) || isObject(handler))) errorHandler('handlerType');\n  if (isObject(handler) && Object.values(handler).some(function (_handler) {\n    return !isFunction(_handler);\n  })) errorHandler('handlersType');\n}\n\nfunction validateInitial(initial) {\n  if (!initial) errorHandler('initialIsRequired');\n  if (!isObject(initial)) errorHandler('initialType');\n  if (isEmpty(initial)) errorHandler('initialContent');\n}\n\nfunction throwError(errorMessages, type) {\n  throw new Error(errorMessages[type] || errorMessages[\"default\"]);\n}\n\nvar errorMessages = {\n  initialIsRequired: 'initial state is required',\n  initialType: 'initial state should be an object',\n  initialContent: 'initial state shouldn\\'t be an empty object',\n  handlerType: 'handler should be an object or a function',\n  handlersType: 'all handlers should be a functions',\n  selectorType: 'selector should be a function',\n  changeType: 'provided value of changes should be an object',\n  changeField: 'it seams you want to change a field in the state which is not specified in the \"initial\" state',\n  \"default\": 'an unknown error accured in `state-local` package'\n};\nvar errorHandler = curry(throwError)(errorMessages);\nvar validators = {\n  changes: validateChanges,\n  selector: validateSelector,\n  handler: validateHandler,\n  initial: validateInitial\n};\n\nfunction create(initial) {\n  var handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  validators.initial(initial);\n  validators.handler(handler);\n  var state = {\n    current: initial\n  };\n  var didUpdate = curry(didStateUpdate)(state, handler);\n  var update = curry(updateState)(state);\n  var validate = curry(validators.changes)(initial);\n  var getChanges = curry(extractChanges)(state);\n\n  function getState() {\n    var selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function (state) {\n      return state;\n    };\n    validators.selector(selector);\n    return selector(state.current);\n  }\n\n  function setState(causedChanges) {\n    compose(didUpdate, update, validate, getChanges)(causedChanges);\n  }\n\n  return [getState, setState];\n}\n\nfunction extractChanges(state, causedChanges) {\n  return isFunction(causedChanges) ? causedChanges(state.current) : causedChanges;\n}\n\nfunction updateState(state, changes) {\n  state.current = _objectSpread2(_objectSpread2({}, state.current), changes);\n  return changes;\n}\n\nfunction didStateUpdate(state, handler, changes) {\n  isFunction(handler) ? handler(state.current) : Object.keys(changes).forEach(function (field) {\n    var _handler$field;\n\n    return (_handler$field = handler[field]) === null || _handler$field === void 0 ? void 0 : _handler$field.call(handler, state.current[field]);\n  });\n  return changes;\n}\n\nvar index = {\n  create: create\n};\n\nexport default index;\n","var config = {\n  paths: {\n    vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs'\n  }\n};\n\nexport default config;\n","function curry(fn) {\n  return function curried() {\n    var _this = this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return args.length >= fn.length ? fn.apply(this, args) : function () {\n      for (var _len2 = arguments.length, nextArgs = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        nextArgs[_key2] = arguments[_key2];\n      }\n\n      return curried.apply(_this, [].concat(args, nextArgs));\n    };\n  };\n}\n\nexport default curry;\n","function isObject(value) {\n  return {}.toString.call(value).includes('Object');\n}\n\nexport default isObject;\n","import curry from '../utils/curry.js';\nimport isObject from '../utils/isObject.js';\n\n/**\n * validates the configuration object and informs about deprecation\n * @param {Object} config - the configuration object \n * @return {Object} config - the validated configuration object\n */\n\nfunction validateConfig(config) {\n  if (!config) errorHandler('configIsRequired');\n  if (!isObject(config)) errorHandler('configType');\n\n  if (config.urls) {\n    informAboutDeprecation();\n    return {\n      paths: {\n        vs: config.urls.monacoBase\n      }\n    };\n  }\n\n  return config;\n}\n/**\n * logs deprecation message\n */\n\n\nfunction informAboutDeprecation() {\n  console.warn(errorMessages.deprecation);\n}\n\nfunction throwError(errorMessages, type) {\n  throw new Error(errorMessages[type] || errorMessages[\"default\"]);\n}\n\nvar errorMessages = {\n  configIsRequired: 'the configuration object is required',\n  configType: 'the configuration object should be an object',\n  \"default\": 'an unknown error accured in `@monaco-editor/loader` package',\n  deprecation: \"Deprecation warning!\\n    You are using deprecated way of configuration.\\n\\n    Instead of using\\n      monaco.config({ urls: { monacoBase: '...' } })\\n    use\\n      monaco.config({ paths: { vs: '...' } })\\n\\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\\n  \"\n};\nvar errorHandler = curry(throwError)(errorMessages);\nvar validators = {\n  config: validateConfig\n};\n\nexport default validators;\nexport { errorHandler, errorMessages };\n","var compose = function compose() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function (x) {\n    return fns.reduceRight(function (y, f) {\n      return f(y);\n    }, x);\n  };\n};\n\nexport default compose;\n","import { objectSpread2 as _objectSpread2 } from '../_virtual/_rollupPluginBabelHelpers.js';\n\nfunction merge(target, source) {\n  Object.keys(source).forEach(function (key) {\n    if (source[key] instanceof Object) {\n      if (target[key]) {\n        Object.assign(source[key], merge(target[key], source[key]));\n      }\n    }\n  });\n  return _objectSpread2(_objectSpread2({}, target), source);\n}\n\nexport default merge;\n","// The source (has been changed) is https://github.com/facebook/react/issues/5465#issuecomment-157888325\nvar CANCELATION_MESSAGE = {\n  type: 'cancelation',\n  msg: 'operation is manually canceled'\n};\n\nfunction makeCancelable(promise) {\n  var hasCanceled_ = false;\n  var wrappedPromise = new Promise(function (resolve, reject) {\n    promise.then(function (val) {\n      return hasCanceled_ ? reject(CANCELATION_MESSAGE) : resolve(val);\n    });\n    promise[\"catch\"](reject);\n  });\n  return wrappedPromise.cancel = function () {\n    return hasCanceled_ = true;\n  }, wrappedPromise;\n}\n\nexport default makeCancelable;\nexport { CANCELATION_MESSAGE };\n","import { slicedToArray as _slicedToArray, objectWithoutProperties as _objectWithoutProperties } from '../_virtual/_rollupPluginBabelHelpers.js';\nimport state from 'state-local';\nimport config$1 from '../config/index.js';\nimport validators from '../validators/index.js';\nimport compose from '../utils/compose.js';\nimport merge from '../utils/deepMerge.js';\nimport makeCancelable from '../utils/makeCancelable.js';\n\n/** the local state of the module */\n\nvar _state$create = state.create({\n  config: config$1,\n  isInitialized: false,\n  resolve: null,\n  reject: null,\n  monaco: null\n}),\n    _state$create2 = _slicedToArray(_state$create, 2),\n    getState = _state$create2[0],\n    setState = _state$create2[1];\n/**\n * set the loader configuration\n * @param {Object} config - the configuration object\n */\n\n\nfunction config(globalConfig) {\n  var _validators$config = validators.config(globalConfig),\n      monaco = _validators$config.monaco,\n      config = _objectWithoutProperties(_validators$config, [\"monaco\"]);\n\n  setState(function (state) {\n    return {\n      config: merge(state.config, config),\n      monaco: monaco\n    };\n  });\n}\n/**\n * handles the initialization of the monaco-editor\n * @return {Promise} - returns an instance of monaco (with a cancelable promise)\n */\n\n\nfunction init() {\n  var state = getState(function (_ref) {\n    var monaco = _ref.monaco,\n        isInitialized = _ref.isInitialized,\n        resolve = _ref.resolve;\n    return {\n      monaco: monaco,\n      isInitialized: isInitialized,\n      resolve: resolve\n    };\n  });\n\n  if (!state.isInitialized) {\n    setState({\n      isInitialized: true\n    });\n\n    if (state.monaco) {\n      state.resolve(state.monaco);\n      return makeCancelable(wrapperPromise);\n    }\n\n    if (window.monaco && window.monaco.editor) {\n      storeMonacoInstance(window.monaco);\n      state.resolve(window.monaco);\n      return makeCancelable(wrapperPromise);\n    }\n\n    compose(injectScripts, getMonacoLoaderScript)(configureLoader);\n  }\n\n  return makeCancelable(wrapperPromise);\n}\n/**\n * injects provided scripts into the document.body\n * @param {Object} script - an HTML script element\n * @return {Object} - the injected HTML script element\n */\n\n\nfunction injectScripts(script) {\n  return document.body.appendChild(script);\n}\n/**\n * creates an HTML script element with/without provided src\n * @param {string} [src] - the source path of the script\n * @return {Object} - the created HTML script element\n */\n\n\nfunction createScript(src) {\n  var script = document.createElement('script');\n  return src && (script.src = src), script;\n}\n/**\n * creates an HTML script element with the monaco loader src\n * @return {Object} - the created HTML script element\n */\n\n\nfunction getMonacoLoaderScript(configureLoader) {\n  var state = getState(function (_ref2) {\n    var config = _ref2.config,\n        reject = _ref2.reject;\n    return {\n      config: config,\n      reject: reject\n    };\n  });\n  var loaderScript = createScript(\"\".concat(state.config.paths.vs, \"/loader.js\"));\n\n  loaderScript.onload = function () {\n    return configureLoader();\n  };\n\n  loaderScript.onerror = state.reject;\n  return loaderScript;\n}\n/**\n * configures the monaco loader\n */\n\n\nfunction configureLoader() {\n  var state = getState(function (_ref3) {\n    var config = _ref3.config,\n        resolve = _ref3.resolve,\n        reject = _ref3.reject;\n    return {\n      config: config,\n      resolve: resolve,\n      reject: reject\n    };\n  });\n  var require = window.require;\n\n  require.config(state.config);\n\n  require(['vs/editor/editor.main'], function (monaco) {\n    storeMonacoInstance(monaco);\n    state.resolve(monaco);\n  }, function (error) {\n    state.reject(error);\n  });\n}\n/**\n * store monaco instance in local state\n */\n\n\nfunction storeMonacoInstance(monaco) {\n  if (!getState().monaco) {\n    setState({\n      monaco: monaco\n    });\n  }\n}\n/**\n * internal helper function\n * extracts stored monaco instance\n * @return {Object|null} - the monaco instance\n */\n\n\nfunction __getMonacoInstance() {\n  return getState(function (_ref4) {\n    var monaco = _ref4.monaco;\n    return monaco;\n  });\n}\n\nvar wrapperPromise = new Promise(function (resolve, reject) {\n  return setState({\n    resolve: resolve,\n    reject: reject\n  });\n});\nvar loader = {\n  config: config,\n  init: init,\n  __getMonacoInstance: __getMonacoInstance\n};\n\nexport default loader;\n","<script lang=\"ts\">\n  import { onDestroy, onMount } from \"svelte\"\n  import EditLayerState, { EditThemeState } from \"./EditLayerState\"\n  import loader from \"@monaco-editor/loader\"\n  import type * as Monaco from \"monaco-editor/esm/vs/editor/editor.api\"\n  import layerSchemaJSON from \"../../../Docs/Schemas/LayerConfigJson.schema.json\"\n  import layoutSchemaJSON from \"../../../Docs/Schemas/LayoutConfigJson.schema.json\"\n  import Loading from \"../Base/Loading.svelte\"\n\n  export let state: EditLayerState | EditThemeState\n\n  let rawConfig = state.configuration.sync(\n    (f) => JSON.stringify(f, null, \"  \"),\n    [],\n    (json) => {\n      try {\n        return JSON.parse(json)\n      } catch (e) {\n        console.error(\"Could not parse\", json)\n        return undefined\n      }\n    }\n  )\n\n  let container: HTMLDivElement\n  let monaco: typeof Monaco\n  let editor: Monaco.editor.IStandaloneCodeEditor\n  let model: Monaco.editor.ITextModel\n\n  function save() {\n    try {\n      const newConfig = JSON.parse(editor.getValue())\n      state.configuration.setData(newConfig)\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  // Catch keyboard shortcuts\n  onMount(() => {\n    const handler = (e: KeyboardEvent) => {\n      if (e.key === \"s\" && (e.ctrlKey || e.metaKey)) {\n        e.preventDefault()\n        save()\n      }\n    }\n    window.addEventListener(\"keydown\", handler)\n    return () => window.removeEventListener(\"keydown\", handler)\n  })\n\n  let useFallback = false\n  let isLoaded = false\n  onMount(async () => {\n    const monacoEditor = await import(\"monaco-editor\")\n    loader.config({\n      monaco: monacoEditor.default,\n    })\n\n    try {\n      monaco = await loader.init()\n    } catch (e) {\n      console.error(\"Could not load Monaco Editor, falling back\", e)\n      useFallback = true\n    }\n\n    // Determine schema based on the state\n    let schemaUri: string\n    if (state instanceof EditLayerState) {\n      schemaUri = \"https://mapcomplete.org/schemas/layerconfig.json\"\n    } else {\n      schemaUri = \"https://mapcomplete.org/schemas/layoutconfig.json\"\n    }\n\n    monaco?.languages?.json?.jsonDefaults?.setDiagnosticsOptions({\n      validate: true,\n      schemas: [\n        {\n          uri: schemaUri,\n          fileMatch: [\"file.json\"],\n          schema:\n            schemaUri === \"https://mapcomplete.org/schemas/layerconfig.json\"\n              ? layerSchemaJSON\n              : layoutSchemaJSON,\n        },\n      ],\n    })\n\n    let modelUri = monaco?.Uri?.parse(\"inmemory://inmemory/file.json\")\n\n    // Create a new model\n    try {\n      model = monaco?.editor?.createModel(\n        JSON.stringify(state.configuration.data, null, \"  \"),\n        \"json\",\n        modelUri\n      )\n    } catch (e) {\n      console.error(\"Could not create model in MOnaco Editor\", e)\n      useFallback = true\n    }\n\n    editor = monaco?.editor?.create(container, {\n      model,\n      automaticLayout: true,\n    })\n\n    // When the editor is changed, update the configuration, but only if the user hasn't typed for 500ms and the JSON is valid\n    let timeout: number\n    editor?.onDidChangeModelContent(() => {\n      clearTimeout(timeout)\n      timeout = setTimeout(() => {\n        save()\n      }, 500)\n    })\n    isLoaded = true\n  })\n\n  onDestroy(() => {\n    if (editor) {\n      editor.dispose()\n    }\n    if (model) {\n      model.dispose()\n    }\n  })\n</script>\n\n{#if useFallback}\n  <textarea class=\"w-full\" rows=\"25\" bind:value={$rawConfig} />\n{:else}\n  <div bind:this={container} class=\"h-full w-full\">\n    {#if !isLoaded}\n      <div class=\"align-center flex h-full w-full items-center\">\n        <Loading />\n      </div>\n    {/if}\n  </div>\n{/if}\n","<script lang=\"ts\">\n  import { EditJsonState } from \"./EditLayerState\"\n  import { TrashIcon } from \"@rgossiaux/svelte-heroicons/solid\"\n  import NextButton from \"../Base/NextButton.svelte\"\n  import AccordionSingle from \"../Flowbite/AccordionSingle.svelte\"\n\n  export let backToStudio: () => void\n  export let state: EditJsonState\n\n  export let objectType: \"layer\" | \"theme\"\n\n  function deleteLayer() {\n    state.delete()\n    backToStudio()\n  }\n</script>\n\n<AccordionSingle>\n  <div slot=\"header\" class=\"flex gap-x-2\">\n    <TrashIcon class=\"h-6 w-6\" />\n    Delete this {objectType}\n  </div>\n\n  <div class=\"flex flex-col\">\n    <div>\n      Deleting this layer will delete your version. If you clicked a layer made by someone else,\n      their version will remain. If you ever accidentally delete a layer, contact Pietervdvn. He\n      might have a backup\n    </div>\n\n    <NextButton clss=\"primary\" on:click={() => deleteLayer()}>\n      <div class=\"alert flex p-2\">\n        <TrashIcon class=\"h-6 w-6\" />\n        Do delete this {objectType}\n      </div>\n    </NextButton>\n  </div>\n</AccordionSingle>\n","import { Store, UIEventSource } from \"../../Logic/UIEventSource\"\nimport Hash from \"../../Logic/Web/Hash\"\n\nexport default class StudioHashSetter {\n    constructor(mode: \"layer\" | \"theme\", tab: Store<number>, name: Store<string>) {\n        tab.mapD(\n            (tab) => {\n                Hash.hash.setData(mode + \"/\" + name.data + \"/\" + tab)\n            },\n            [name]\n        )\n    }\n}\n","<script lang=\"ts\">\n  import type { HighlightedTagRendering } from \"./EditLayerState\"\n  import EditLayerState from \"./EditLayerState\"\n  import layerSchemaRaw from \"../../assets/schemas/layerconfigmeta.json\"\n  import Region from \"./Region.svelte\"\n  import TabbedGroup from \"../Base/TabbedGroup.svelte\"\n  import { Store, UIEventSource } from \"../../Logic/UIEventSource\"\n  import type { ConfigMeta } from \"./configMeta\"\n  import { Utils } from \"../../Utils\"\n  import type { ConversionMessage } from \"../../Models/ThemeConfig/Conversion/Conversion\"\n  import ErrorIndicatorForRegion from \"./ErrorIndicatorForRegion.svelte\"\n  import { ChevronRightIcon, TrashIcon } from \"@rgossiaux/svelte-heroicons/solid\"\n  import SchemaBasedInput from \"./SchemaBasedInput.svelte\"\n  import FloatOver from \"../Base/FloatOver.svelte\"\n  import TagRenderingInput from \"./TagRenderingInput.svelte\"\n  import AllTagsPanel from \"../Popup/AllTagsPanel.svelte\"\n  import QuestionPreview from \"./QuestionPreview.svelte\"\n  import ShowConversionMessages from \"./ShowConversionMessages.svelte\"\n  import RawEditor from \"./RawEditor.svelte\"\n  import DeleteButton from \"./DeleteButton.svelte\"\n  import StudioHashSetter from \"./StudioHashSetter\"\n  import TitledPanel from \"../Base/TitledPanel.svelte\"\n\n  const layerSchema: ConfigMeta[] = <any>layerSchemaRaw\n\n  export let state: EditLayerState\n\n  export let backToStudio: () => void\n\n  new StudioHashSetter(\"layer\", state.selectedTab, state.getStoreFor([\"id\"]))\n\n  let messages = state.messages\n  let hasErrors = messages.mapD(\n    (m: ConversionMessage[]) => m.filter((m) => m.level === \"error\").length\n  )\n  const configuration = state.configuration\n\n  const allNames = Utils.Dedup(layerSchema.map((meta) => meta.hints.group))\n\n  const perRegion: Record<string, ConfigMeta[]> = {}\n  for (const region of allNames) {\n    perRegion[region] = layerSchema.filter((meta) => meta.hints.group === region)\n  }\n\n  let title: Store<string> = state.getStoreFor([\"id\"])\n  const wl = window.location\n  const baseUrl = wl.protocol + \"//\" + wl.host + \"/theme.html?userlayout=\"\n\n  function firstPathsFor(...regionNames: string[]): Set<string> {\n    const pathNames = new Set<string>()\n    for (const regionName of regionNames) {\n      const region: ConfigMeta[] = perRegion[regionName]\n      for (const configMeta of region) {\n        pathNames.add(configMeta.path[0])\n      }\n    }\n    return pathNames\n  }\n\n  function configForRequiredField(id: string): ConfigMeta {\n    let config = layerSchema.find((config) => config.path.length === 1 && config.path[0] === id)\n    config = Utils.Clone(config)\n    config.required = true\n    config.hints.ifunset = undefined\n    return config\n  }\n\n  let requiredFields = [\"id\", \"name\", \"description\", \"source\"]\n  let currentlyMissing = configuration.map((config) => {\n    if (!config) {\n      return []\n    }\n    const missing = []\n    for (const requiredField of requiredFields) {\n      if (!config[requiredField]) {\n        missing.push(requiredField)\n      }\n    }\n    return missing\n  })\n\n  let highlightedItem: UIEventSource<HighlightedTagRendering> = state.highlightedItem\n</script>\n\n<div class=\"link-underline flex h-screen flex-col\">\n  <div class=\"my-2 flex w-full flex-wrap justify-between\">\n    <slot />\n    {#if $title === undefined}\n      <h3>Creating a new layer</h3>\n    {:else}\n      <h3>Editing layer {$title}</h3>\n    {/if}\n    {#if $currentlyMissing.length > 0}\n      <div class=\"w-16\" />\n      <!-- Empty div, simply hide this -->\n    {:else if $hasErrors > 0}\n      <div class=\"alert\">{$hasErrors} errors detected</div>\n    {:else}\n      <div class=\"flex\">\n        <a\n          class=\"button small\"\n          href={baseUrl + state.server.layerUrl(title.data) + \"&test=true\"}\n          target=\"_blank\"\n          rel=\"noopener\"\n        >\n          <div class=\"flex flex-col\">\n            <b>Test in safe mode</b>\n            <div>No changes are recoded to OSM</div>\n          </div>\n          <ChevronRightIcon class=\"h-6 w-6 shrink-0\" />\n        </a>\n        <a\n          class=\"primary button\"\n          href={baseUrl + state.server.layerUrl(title.data)}\n          target=\"_blank\"\n          rel=\"noopener\"\n        >\n          Try it out\n          <ChevronRightIcon class=\"h-6 w-6 shrink-0\" />\n        </a>\n      </div>\n    {/if}\n  </div>\n\n  {#if $currentlyMissing.length > 0}\n    {#each requiredFields as required}\n      <SchemaBasedInput {state} path={[required]} />\n    {/each}\n  {:else}\n    <div class=\"m4 h-full overflow-y-auto\">\n      <TabbedGroup tab={state.selectedTab}>\n        <div slot=\"title0\" class=\"flex\">\n          General properties\n          <ErrorIndicatorForRegion firstPaths={firstPathsFor(\"Basic\")} {state} />\n        </div>\n        <div class=\"mb-8 flex flex-col\" slot=\"content0\">\n          <Region {state} configs={perRegion[\"Basic\"]} />\n          <DeleteButton {state} {backToStudio} objectType=\"layer\" />\n        </div>\n\n        <div slot=\"title1\" class=\"flex\">\n          Information panel (questions and answers)\n          <ErrorIndicatorForRegion\n            firstPaths={firstPathsFor(\"title\", \"tagrenderings\", \"editing\")}\n            {state}\n          />\n        </div>\n        <div slot=\"content1\">\n          <QuestionPreview path={[\"title\"]} {state} schema={perRegion[\"title\"][0]} />\n          <Region configs={perRegion[\"tagrenderings\"]} {state} title=\"Popup contents\" />\n          <Region configs={perRegion[\"editing\"]} {state} title=\"Other editing elements\" />\n        </div>\n\n        <div slot=\"title2\">\n          Creating a new point\n          <ErrorIndicatorForRegion firstPaths={firstPathsFor(\"presets\")} {state} />\n        </div>\n\n        <div slot=\"content2\">\n          <Region {state} configs={perRegion[\"presets\"]} />\n        </div>\n\n        <div slot=\"title3\" class=\"flex\">\n          Rendering on the map\n          <ErrorIndicatorForRegion\n            firstPaths={firstPathsFor(\"linerendering\", \"pointrendering\")}\n            {state}\n          />\n        </div>\n        <div slot=\"content3\">\n          <Region configs={perRegion[\"linerendering\"]} {state} />\n          <Region configs={perRegion[\"pointrendering\"]} {state} />\n        </div>\n\n        <div slot=\"title4\" class=\"flex\">\n          Advanced functionality\n          <ErrorIndicatorForRegion firstPaths={firstPathsFor(\"advanced\")} {state} />\n        </div>\n        <div slot=\"content4\">\n          <Region configs={perRegion[\"advanced\"]} {state} />\n          <Region configs={perRegion[\"expert\"]} {state} />\n        </div>\n        <div slot=\"title5\">Configuration file</div>\n        <div slot=\"content5\" class=\"flex h-full flex-col\">\n          <div>\n            Below, you'll find the raw configuration file in `.json`-format. This is mostly for\n            debugging purposes, but you can also edit the file directly if you want.\n          </div>\n          <div class=\"literal-code h-full overflow-y-auto\" style=\"min-height: 75%\">\n            <RawEditor {state} />\n          </div>\n          <ShowConversionMessages messages={$messages} />\n\n          <div class=\"flex w-full flex-col\">\n            <div>\n              The testobject (which is used to render the questions in the 'information panel' item\n              has the following tags:\n            </div>\n\n            <AllTagsPanel tags={state.testTags} />\n          </div>\n        </div>\n      </TabbedGroup>\n    </div>\n    {#if $highlightedItem !== undefined}\n      <FloatOver on:close={() => highlightedItem.setData(undefined)}>\n        <TitledPanel>\n          <h3 slot=\"title\">Select a builtin question below</h3>\n\n          <TagRenderingInput path={$highlightedItem.path} {state} />\n        </TitledPanel>\n      </FloatOver>\n    {/if}\n  {/if}\n</div>\n","import { Utils } from \"../../Utils\"\nimport Constants from \"../../Models/Constants\"\nimport { LayerConfigJson } from \"../../Models/ThemeConfig/Json/LayerConfigJson\"\nimport { Store, UIEventSource } from \"../../Logic/UIEventSource\"\nimport { ThemeConfigJson } from \"../../Models/ThemeConfig/Json/ThemeConfigJson\"\n\n/**\n * A small class wrapping around the Server API.\n * This is _not_ the script which actually hosts!\n */\nexport default class StudioServer {\n    private readonly url: string\n    private readonly _userId: Store<number>\n    private readonly overview: UIEventSource<\n        | {\n              success: { id: string; owner: number; category: \"layers\" | \"themes\" }[]\n          }\n        | { error: any }\n        | undefined\n    >\n    public isDirect: boolean\n\n    constructor(url: string, userId: Store<number | undefined>, isDirect: boolean) {\n        this.url = url\n        this._userId = userId\n        this.overview = UIEventSource.FromPromiseWithErr(this.fetchOverviewRaw())\n    }\n\n    public fetchOverview(): Store<\n        | {\n              success: { id: string; owner: number; category: \"layers\" | \"themes\" }[]\n          }\n        | { error }\n        | undefined\n    > {\n        return this.overview\n    }\n\n    private async fetchOverviewRaw(): Promise<\n        {\n            id: string\n            owner: number\n            category: \"layers\" | \"themes\"\n        }[]\n    > {\n        const { allFiles } = <{ allFiles: string[] }>(\n            await Utils.downloadJson(this.url + \"/overview\")\n        )\n        const layerOverview: {\n            id: string\n            owner: number | undefined\n            category: \"layers\" | \"themes\"\n        }[] = []\n        for (let file of allFiles) {\n            const parts = file.split(\"/\")\n            let owner = Number(parts[0])\n            if (!isNaN(owner)) {\n                parts.splice(0, 1)\n                file = file.substring(file.indexOf(\"/\") + 1)\n            } else {\n                owner = undefined\n            }\n            const category = <\"layers\" | \"themes\">parts[0]\n            const id = file.substring(file.lastIndexOf(\"/\") + 1, file.length - \".json\".length)\n            if (Constants.priviliged_layers.indexOf(<any>id) > 0) {\n                continue\n            }\n            layerOverview.push({ id, owner, category })\n        }\n        return layerOverview\n    }\n\n    async fetch(layerId: string, category: \"layers\", uid?: number): Promise<LayerConfigJson>\n    async fetch(layerId: string, category: \"themes\", uid?: number): Promise<ThemeConfigJson>\n    async fetch(\n        layerId: string,\n        category: \"layers\" | \"themes\",\n        uid?: number\n    ): Promise<LayerConfigJson | ThemeConfigJson> {\n        try {\n            return <any>await Utils.downloadJson(this.urlFor(layerId, category, uid))\n        } catch (e) {\n            return undefined\n        }\n    }\n\n    async delete(id: string, category: \"layers\" | \"themes\") {\n        if (id === undefined || id === \"\") {\n            return\n        }\n        await fetch(this.urlFor(id, category), {\n            method: \"DELETE\",\n        })\n        const overview: { id: string; owner: number; category: \"layers\" | \"themes\" }[] =\n            this.overview.data?.[\"success\"]\n        if (overview) {\n            const index = overview.findIndex(\n                (obj) =>\n                    obj.id === id && obj.category === category && obj.owner === this._userId.data\n            )\n            if (index >= 0) {\n                overview.splice(index, 1)\n                this.overview.ping()\n            }\n        }\n    }\n\n    async update(id: string, config: string, category: \"layers\" | \"themes\") {\n        if (id === undefined || id === \"\") {\n            return\n        }\n        await fetch(this.urlFor(id, category), {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json;charset=utf-8\",\n            },\n            body: config,\n        })\n    }\n\n    public layerUrl(id: string) {\n        return this.urlFor(id, \"layers\")\n    }\n\n    public urlFor(id: string, category: \"layers\" | \"themes\", uid?: number) {\n        uid ??= this._userId.data\n        const uidStr = uid !== null ? \"/\" + uid : \"\"\n        return `${this.url}${uidStr}/${category}/${id}/${id}.json`\n    }\n}\n","<script lang=\"ts\">\n  import { UIEventSource } from \"../../Logic/UIEventSource\"\n  import { OsmConnection } from \"../../Logic/Osm/OsmConnection\"\n  import Marker from \"../Map/Marker.svelte\"\n  import NextButton from \"../Base/NextButton.svelte\"\n  import { AllKnownLayouts } from \"../../Customizations/AllKnownLayouts\"\n  import { AllSharedLayers } from \"../../Customizations/AllSharedLayers\"\n  import { createEventDispatcher } from \"svelte\"\n\n  export let info: { id: string; owner: number }\n  export let category: \"layers\" | \"themes\"\n  export let osmConnection: OsmConnection\n  const dispatch = createEventDispatcher<{ layerSelected: string }>()\n\n  let displayName = UIEventSource.FromPromise(\n    osmConnection.getInformationAboutUser(info.owner)\n  ).mapD((response) => response.display_name)\n  let selfId = osmConnection.userDetails.mapD((ud) => ud.uid)\n\n  function fetchIconDescription(layerId): any {\n    if (category === \"themes\") {\n      return AllKnownLayouts.allKnownLayouts.get(layerId).icon\n    }\n    return AllSharedLayers.getSharedLayersConfigs().get(layerId)?._layerIcon\n  }\n</script>\n\n<NextButton clss=\"small\" on:click={() => dispatch(\"layerSelected\", info)}>\n  <div class=\"mr-1 h-4 w-4\">\n    <Marker icons={fetchIconDescription(info.id)} />\n  </div>\n  <b class=\"px-1\">{info.id}</b>\n  {#if info.owner && info.owner !== $selfId}\n    {#if $displayName}\n      (made by {$displayName}\n      {#if window.location.host.startsWith(\"127.0.0.1\")}\n        - {info.owner}\n      {/if}\n      )\n    {:else}\n      ({info.owner})\n    {/if}\n  {/if}\n</NextButton>\n","<script lang=\"ts\">\n  import { OsmConnection } from \"../../Logic/Osm/OsmConnection\"\n  import EditItemButton from \"./EditItemButton.svelte\"\n\n  export let layerIds: { id: string; owner: number }[]\n  export let category: \"layers\" | \"themes\" = \"layers\"\n  export let osmConnection: OsmConnection\n</script>\n\n{#if layerIds.length > 0}\n  <slot name=\"title\" />\n  <div class=\"flex flex-wrap\">\n    {#each Array.from(layerIds) as layer}\n      <EditItemButton info={layer} {category} {osmConnection} on:layerSelected />\n    {/each}\n  </div>\n{/if}\n","<script lang=\"ts\">\n  import BackButton from \"../Base/BackButton.svelte\"\n  import NextButton from \"../Base/NextButton.svelte\"\n  import { createEventDispatcher } from \"svelte\"\n\n  const dispatch = createEventDispatcher<{ back; next }>()\n  export let islast = false\n  export let isFirst = false\n  export let pageNumber: number = undefined\n  export let totalPages: number = undefined\n</script>\n\n<div class=\"link-underline flex h-full w-full flex-col justify-between\">\n  <div class=\"h-full overflow-y-auto\">\n    <slot />\n  </div>\n\n  <div class=\"flex flex-col\">\n    {#if pageNumber !== undefined && totalPages !== undefined}\n      <div class=\"flex justify-end\">\n        <div class=\"subtle\">{pageNumber + 1}/{totalPages}</div>\n      </div>\n    {/if}\n    <div class=\"flex w-full\">\n      {#if !isFirst}\n        <BackButton clss=\"w-full\" on:click={() => dispatch(\"back\")}>Back</BackButton>\n      {:else}\n        <div class=\"w-full\" />\n      {/if}\n      <NextButton clss=\"primary w-full\" on:click={() => dispatch(\"next\")}>\n        {#if islast}\n          Finish\n        {:else}\n          Next\n        {/if}\n      </NextButton>\n    </div>\n  </div>\n</div>\n","<script lang=\"ts\">\n  import { createEventDispatcher } from \"svelte\"\n  import WalkthroughStep from \"./WalkthroughStep.svelte\"\n  import FromHtml from \"../Base/FromHtml.svelte\"\n  import Markdown from \"../Base/Markdown.svelte\"\n\n  /**\n   * Markdown\n   */\n  export let pages: string[]\n\n  let currentPage: number = 0\n\n  const dispatch = createEventDispatcher<{ done }>()\n\n  function step(incr: number) {\n    if (incr > 0 && currentPage + 1 === pages.length) {\n      dispatch(\"done\")\n      currentPage = 0\n      return\n    }\n    currentPage = Math.min(Math.max(0, currentPage + incr), pages.length)\n  }\n</script>\n\n<WalkthroughStep\n  on:back={() => step(-1)}\n  on:next={() => step(1)}\n  isFirst={currentPage === 0}\n  islast={currentPage + 1 === pages.length}\n  totalPages={pages.length}\n  pageNumber={currentPage}\n>\n  <Markdown src={pages[currentPage]} />\n</WalkthroughStep>\n","<script lang=\"ts\">\n  import { EditThemeState } from \"./EditLayerState\"\n  import type { ConfigMeta } from \"./configMeta\"\n  import { ChevronRightIcon } from \"@rgossiaux/svelte-heroicons/solid\"\n  import type { ConversionMessage } from \"../../Models/ThemeConfig/Conversion/Conversion\"\n  import TabbedGroup from \"../Base/TabbedGroup.svelte\"\n  import ShowConversionMessages from \"./ShowConversionMessages.svelte\"\n  import Region from \"./Region.svelte\"\n  import RawEditor from \"./RawEditor.svelte\"\n  import { OsmConnection } from \"../../Logic/Osm/OsmConnection\"\n  import DeleteButton from \"./DeleteButton.svelte\"\n  import { UIEventSource } from \"../../Logic/UIEventSource\"\n  import StudioHashSetter from \"./StudioHashSetter\"\n\n  export let state: EditThemeState\n  export let osmConnection: OsmConnection\n  export let backToStudio: () => void\n\n  let schema: ConfigMeta[] = state.schema.filter((schema) => schema.path.length > 0)\n  new StudioHashSetter(\"theme\", state.selectedTab, state.getStoreFor([\"id\"]))\n\n  export let selfLayers: { owner: number; id: string }[]\n  export let otherLayers: { owner: number; id: string }[]\n  {\n    /**\n     * We modify the schema and inject options for self-declared layers\n     */\n\n    const layerSchema = schema.find((l) => l.path.join(\".\") === \"layers\")\n    const suggestions: { if: string; then: string }[] = layerSchema.hints.suggestions\n    suggestions.unshift(\n      ...selfLayers.map((l) => ({\n        if: `value=https://studio.mapcomplete.org/${l.owner}/layers/${l.id}/${l.id}.json`,\n        then: `<b>${l.id}</b> (made by you)`,\n      }))\n    )\n\n    for (let i = 0; i < otherLayers.length; i++) {\n      const l = otherLayers[i]\n      const mapping = {\n        if: `value=https://studio.mapcomplete.org/${l.owner}/layers/${l.id}/${l.id}.json`,\n        then: `<b>${l.id}</b> (made by ${l.owner})`,\n      }\n      /**\n       * This is a filthy hack which is time-sensitive and will break\n       * It downloads the username and patches the suggestion, assuming that the list with all layers will be shown a while _after_ loading the view.\n       * Caching in 'getInformationAboutUser' helps with this as well\n       */\n      osmConnection.getInformationAboutUser(l.owner).then((userInfo) => {\n        mapping.then = `<b>${l.id}</b> (made by ${userInfo.display_name})`\n      })\n      suggestions.push(mapping)\n    }\n  }\n\n  let messages = state.messages\n  let hasErrors = messages.map(\n    (m: ConversionMessage[]) => m.filter((m) => m.level === \"error\").length\n  )\n  let title = state.getStoreFor([\"id\"])\n  const wl = window.location\n  const baseUrl = wl.protocol + \"//\" + wl.host + \"/theme.html?userlayout=\"\n\n  const perRegion: Record<string, ConfigMeta[]> = {}\n  for (const schemaElement of schema) {\n    if (schemaElement.path.length > 1 && schemaElement.path[0] === \"layers\") {\n      continue\n    }\n    const key = schemaElement.hints.group ?? \"no-group\"\n    const list = perRegion[key] ?? (perRegion[key] = [])\n    list.push(schemaElement)\n  }\n  console.log({ perRegion, schema })\n</script>\n\n<div class=\"flex h-screen flex-col\">\n  <div class=\"my-2 flex w-full justify-between\">\n    <slot />\n    <h3>Editing theme {$title}</h3>\n    {#if $hasErrors > 0}\n      <div class=\"alert\">{$hasErrors} errors detected</div>\n    {:else}\n      <a\n        class=\"primary button\"\n        href={baseUrl + state.server.urlFor($title, \"themes\")}\n        target=\"_blank\"\n        rel=\"noopener\"\n      >\n        Try it out\n        <ChevronRightIcon class=\"h-6 w-6 shrink-0\" />\n      </a>\n    {/if}\n  </div>\n\n  <div class=\"m4 h-full overflow-y-auto\">\n    <!-- {Object.keys(perRegion).join(\";\")} -->\n    <TabbedGroup tab={state.selectedTab}>\n      <div slot=\"title0\">Basic properties</div>\n      <div slot=\"content0\" class=\"mb-8\">\n        <Region configs={perRegion[\"basic\"]} path={[]} {state} title=\"Basic properties\" />\n        <Region configs={perRegion[\"start_location\"]} path={[]} {state} title=\"Start location\" />\n        <DeleteButton {state} {backToStudio} objectType=\"theme\" />\n      </div>\n\n      <div slot=\"title1\">Layers</div>\n      <div slot=\"content1\">\n        <Region configs={perRegion[\"layers\"]} path={[]} {state} />\n      </div>\n      <div slot=\"title2\">Feature switches</div>\n      <div slot=\"content2\">\n        <Region configs={perRegion[\"feature_switches\"]} path={[]} {state} />\n      </div>\n\n      <div slot=\"title3\">Advanced options</div>\n      <div slot=\"content3\">\n        <Region configs={perRegion[\"advanced\"]} path={[]} {state} />\n      </div>\n\n      <div slot=\"title4\">Configuration file</div>\n      <div slot=\"content4\" class=\"flex h-full flex-col\">\n        <div>\n          Below, you'll find the raw configuration file in `.json`-format. This is mostly for\n          debugging purposes, but you can also edit the file directly if you want.\n        </div>\n        <div class=\"literal-code h-full overflow-y-auto\" style=\"min-height: 75%\">\n          <RawEditor {state} />\n        </div>\n        <ShowConversionMessages messages={$messages} />\n      </div>\n    </TabbedGroup>\n  </div>\n</div>\n","<script lang=\"ts\">\n  import NextButton from \"./Base/NextButton.svelte\"\n  import { Store, UIEventSource } from \"../Logic/UIEventSource\"\n  import EditLayerState, { EditJsonState, EditThemeState } from \"./Studio/EditLayerState\"\n  import EditLayer from \"./Studio/EditLayer.svelte\"\n  import Loading from \"../assets/svg/Loading.svelte\"\n  import StudioServer from \"./Studio/StudioServer\"\n  import LoginToggle from \"./Base/LoginToggle.svelte\"\n  import { OsmConnection } from \"../Logic/Osm/OsmConnection\"\n  import { QueryParameters } from \"../Logic/Web/QueryParameters\"\n\n  import layerSchemaRaw from \"../../src/assets/schemas/layerconfigmeta.json\"\n  import layoutSchemaRaw from \"../../src/assets/schemas/layoutconfigmeta.json\"\n\n  import If from \"./Base/If.svelte\"\n  import BackButton from \"./Base/BackButton.svelte\"\n  import ChooseLayerToEdit from \"./Studio/ChooseLayerToEdit.svelte\"\n  import FloatOver from \"./Base/FloatOver.svelte\"\n  import Walkthrough from \"./Walkthrough/Walkthrough.svelte\"\n  import * as intro from \"../assets/studio_introduction.json\"\n  import * as intro_tagrenderings from \"../assets/studio_tagrenderings_intro.json\"\n\n  import { QuestionMarkCircleIcon } from \"@babeard/svelte-heroicons/mini\"\n  import type { ConfigMeta } from \"./Studio/configMeta\"\n  import EditTheme from \"./Studio/EditTheme.svelte\"\n  import * as meta from \"../../package.json\"\n  import Checkbox from \"./Base/Checkbox.svelte\"\n  import { Utils } from \"../Utils\"\n  import Translations from \"./i18n/Translations\"\n  import Tr from \"./Base/Tr.svelte\"\n  import Add from \"../assets/svg/Add.svelte\"\n  import { SearchIcon } from \"@rgossiaux/svelte-heroicons/solid\"\n  import Hash from \"../Logic/Web/Hash\"\n  const directEntry = QueryParameters.GetBooleanQueryParameter(\n    \"direct\",\n    false,\n    \"If set, write directly into the theme files\"\n  )\n\n  export let studioUrl =\n    window.location.hostname === \"127.0.0.2\" || directEntry.data\n      ? \"http://127.0.0.1:1235\"\n      : \"https://studio.mapcomplete.org\"\n\n  console.log(\"Using studio URL\", studioUrl, \"direct?\", directEntry.data)\n\n  const oauth_token = QueryParameters.GetQueryParameter(\n    \"oauth_token\",\n    undefined,\n    \"Used to complete the login\"\n  )\n  const fakeUser = UIEventSource.asBoolean(\n    QueryParameters.GetQueryParameter(\"fake-user\", \"Test switch for fake login\")\n  )\n  let osmConnection = new OsmConnection({\n    oauth_token,\n    checkOnlineRegularly: true,\n    fakeUser: fakeUser.data,\n  })\n  const expertMode = UIEventSource.asBoolean(\n    osmConnection.GetPreference(\"studio-expert-mode\", \"false\", {\n      documentation: \"Indicates if more options are shown in mapcomplete studio\",\n    })\n  )\n  expertMode.addCallbackAndRunD((expert) => console.log(\"Expert mode is\", expert))\n  const createdBy = osmConnection.userDetails.data.name\n  const uid = osmConnection.userDetails.map(\n    (ud) => (directEntry.data ? null : ud?.uid),\n    [directEntry]\n  )\n  const studio = new StudioServer(studioUrl, uid, directEntry.data)\n\n  let layersWithErr = studio.fetchOverview()\n  let layerFilterTerm: string = \"\"\n  let layers: Store<{ owner: number; id: string }[]> = layersWithErr.mapD((l) =>\n    l[\"success\"]?.filter((l) => l.category === \"layers\")\n  )\n  $: selfLayers = layers.mapD(\n    (ls) =>\n      ls.filter(\n        (l) => l.owner === uid.data && l.id.toLowerCase().includes(layerFilterTerm.toLowerCase())\n      ),\n    [uid]\n  )\n  $: otherLayers = layers.mapD(\n    (ls) =>\n      ls.filter(\n        (l) =>\n          l.owner !== undefined &&\n          l.owner !== uid.data &&\n          l.id.toLowerCase().includes(layerFilterTerm.toLowerCase())\n      ),\n    [uid]\n  )\n  $: officialLayers = layers.mapD(\n    (ls) =>\n      ls.filter(\n        (l) => l.owner === undefined && l.id.toLowerCase().includes(layerFilterTerm.toLowerCase())\n      ),\n    [uid]\n  )\n\n  let themeFilterTerm: string = \"\"\n\n  let themes: Store<{ owner: number; id: string }[]> = layersWithErr.mapD((l) =>\n    l[\"success\"]?.filter((l) => l.category === \"themes\")\n  )\n  $: selfThemes = themes.mapD(\n    (ls) =>\n      ls.filter(\n        (l) => l.owner === uid.data && l.id.toLowerCase().includes(themeFilterTerm.toLowerCase())\n      ),\n    [uid]\n  )\n  $: otherThemes = themes.mapD(\n    (ls) =>\n      ls.filter(\n        (l) =>\n          l.owner !== undefined &&\n          l.owner !== uid.data &&\n          l.id.toLowerCase().includes(themeFilterTerm.toLowerCase())\n      ),\n    [uid]\n  )\n  $: officialThemes = themes.mapD(\n    (ls) =>\n      ls.filter(\n        (l) => l.owner === undefined && l.id.toLowerCase().includes(themeFilterTerm.toLowerCase())\n      ),\n    [uid]\n  )\n\n  let state:\n    | undefined\n    | \"edit_layer\"\n    | \"edit_theme\"\n    | \"editing_layer\"\n    | \"editing_theme\"\n    | \"loading\" = undefined\n\n  const layerSchema: ConfigMeta[] = <any>layerSchemaRaw\n  let editLayerState = new EditLayerState(layerSchema, studio, osmConnection, { expertMode })\n  let showIntro = editLayerState.showIntro\n\n  const layoutSchema: ConfigMeta[] = <any>layoutSchemaRaw\n  let editThemeState = new EditThemeState(layoutSchema, studio, osmConnection, { expertMode })\n\n  const version = meta.version\n\n  async function editLayer(event: { detail }): Promise<EditLayerState> {\n    const layerId: { owner: number; id: string } = event[\"detail\"]\n    state = \"loading\"\n    editLayerState.startSavingUpdates(false)\n    editLayerState.configuration.setData(await studio.fetch(layerId.id, \"layers\", layerId.owner))\n    editLayerState.startSavingUpdates()\n    state = \"editing_layer\"\n    return editLayerState\n  }\n\n  async function editTheme(event: { detail }): Promise<EditThemeState> {\n    const id: { id: string; owner: number } = event[\"detail\"]\n    state = \"loading\"\n    editThemeState.startSavingUpdates(false)\n    const layout = await studio.fetch(id.id, \"themes\", id.owner)\n    editThemeState.configuration.setData(layout)\n    editThemeState.startSavingUpdates()\n    state = \"editing_theme\"\n    return editThemeState\n  }\n\n  async function createNewLayer() {\n    state = \"loading\"\n    const initialLayerConfig = {\n      credits: createdBy,\n      minzoom: 15,\n      pointRendering: [\n        {\n          location: [\"point\", \"centroid\"],\n          marker: [\n            {\n              icon: \"circle\",\n              color: \"white\",\n            },\n          ],\n        },\n      ],\n      tagRenderings: [\"images\"],\n      lineRendering: [\n        {\n          width: 1,\n          color: \"blue\",\n        },\n      ],\n    }\n    editLayerState.configuration.setData(initialLayerConfig)\n    editLayerState.startSavingUpdates()\n    state = \"editing_layer\"\n  }\n\n  async function selectStateBasedOnHash(uid: number) {\n    const hash = Hash.hash.data\n    if (!hash) {\n      return\n    }\n    console.log(\"Selecting state based on \", hash, uid)\n    const [mode, id, tab] = hash.split(\"/\")\n    // Not really an event, we just set the 'detail'\n    const event = {\n      detail: {\n        id,\n        owner: uid,\n      },\n    }\n    const statePromise: Promise<EditJsonState<any>> =\n      mode === \"layer\" ? editLayer(event) : editTheme(event)\n    const state = await statePromise\n    state.selectedTab.setData(Number(tab))\n  }\n\n  uid.AsPromise().then((uid) => selectStateBasedOnHash(uid))\n\n  function backToStudio() {\n    console.log(\"Back to studio\")\n    state = undefined\n    Hash.hash.setData(undefined)\n  }\n</script>\n\n<If condition={layersWithErr.map((d) => d?.[\"error\"] !== undefined)}>\n  <div>\n    <div class=\"alert\">\n      Something went wrong while contacting the MapComplete Studio Server: {$layersWithErr[\"error\"]}\n    </div>\n    The server might be offline. Please:\n    <ul>\n      <li>Try again in a few minutes</li>\n      <li>\n        Contact <a href=\"https://app.element.io/#/room/#MapComplete:matrix.org\">\n          the MapComplete community via the chat.\n        </a>\n        Someone might be able to help you\n      </li>\n      <li>\n        File <a href=\"https://github.com/pietervdvn/MapComplete/issues\">an issue</a>\n      </li>\n      <li>\n        Contact the devs via <a href=\"mailto:info@posteo.net\">email</a>\n      </li>\n    </ul>\n  </div>\n  <LoginToggle ignoreLoading={true} slot=\"else\" state={{ osmConnection }}>\n    <div slot=\"not-logged-in\">\n      <NextButton clss=\"primary\" on:click={() => osmConnection.AttemptLogin()}>\n        Please log in to use MapComplete Studio\n      </NextButton>\n    </div>\n    {#if state === undefined}\n      <div class=\"flex h-full flex-col justify-between p-4\">\n        <div class=\"flex w-full flex-col\">\n          <h1>MapComplete Studio</h1>\n\n          <NextButton on:click={() => (state = \"edit_layer\")}>\n            <div class=\"flex flex-col items-start\">\n              <div>Edit an existing layer</div>\n              <div class=\"font-normal\">\n                Edit layers you created, others created or from the official MapComplete\n              </div>\n            </div>\n          </NextButton>\n          <NextButton on:click={() => createNewLayer()}>Create a new layer</NextButton>\n          <NextButton on:click={() => (state = \"edit_theme\")}>Edit a theme</NextButton>\n          <NextButton\n            on:click={() => {\n              editThemeState.configuration.setData({})\n              editThemeState.startSavingUpdates()\n              state = \"editing_theme\"\n            }}\n          >\n            Create a new theme\n          </NextButton>\n          <button\n            class=\"small\"\n            on:click={() => {\n              showIntro.setData(\"intro\")\n            }}\n          >\n            <QuestionMarkCircleIcon class=\"h-6 w-6\" />\n            Show the introduction again\n          </button>\n          <a class=\"button flex\" href={Utils.HomepageLink()}>\n            <Add class=\"h-6 w-6\" />\n            <Tr t={Translations.t.general.backToIndex} />\n          </a>\n        </div>\n        <div class=\"flex justify-between\">\n          <Checkbox selected={expertMode}>Enable more options (expert mode)</Checkbox>\n          <span class=\"subtle\">MapComplete version {version}</span>\n          <div>\n            {$uid}\n            {studioUrl}\n            {#if $directEntry}\n              <b>direct</b>\n            {/if}\n          </div>\n        </div>\n      </div>\n    {:else if state === \"edit_layer\"}\n      <div class=\"m-4 flex flex-col\">\n        <BackButton clss=\"small p-1\" imageClass=\"w-8 h-8\" on:click={() => backToStudio()}>\n          MapComplete Studio\n        </BackButton>\n        <h2>Choose a layer to edit</h2>\n\n        <form class=\"flex justify-center\">\n          <label\n            class=\"neutral-label my-2 flex w-full items-center rounded-full border-2 border-black sm:w-1/2\"\n          >\n            <SearchIcon aria-hidden=\"true\" class=\"h-8 w-8\" />\n            <input\n              class=\"mr-4 w-full outline-none\"\n              id=\"layer-search\"\n              type=\"search\"\n              placeholder=\"Filter layers by name\"\n              bind:value={layerFilterTerm}\n            />\n          </label>\n        </form>\n\n        <ChooseLayerToEdit {osmConnection} layerIds={$selfLayers} on:layerSelected={editLayer}>\n          <h3 slot=\"title\">Your layers</h3>\n          <div class=\"subtle\">Your id is {$uid}</div>\n        </ChooseLayerToEdit>\n        <h3>Layers by other contributors</h3>\n        <div>\n          Selecting a layer will create a copy in your account that you edit. You will not change\n          the version of the other contributor\n        </div>\n        <ChooseLayerToEdit {osmConnection} layerIds={$otherLayers} on:layerSelected={editLayer} />\n\n        <h3>Official layers by MapComplete</h3>\n        <div>\n          Selecting a layer will create a copy in your account. You will not change the version that\n          is in MapComplete\n        </div>\n        <ChooseLayerToEdit\n          {osmConnection}\n          layerIds={$officialLayers}\n          on:layerSelected={editLayer}\n        />\n      </div>\n    {:else if state === \"edit_theme\"}\n      <div class=\"m-4 flex flex-col\">\n        <BackButton clss=\"small p-1\" imageClass=\"w-8 h-8\" on:click={() => backToStudio()}>\n          MapComplete Studio\n        </BackButton>\n        <h2>Choose a theme to edit</h2>\n\n        <form class=\"flex justify-center\">\n          <label\n            class=\"neutral-label my-2 flex w-full items-center rounded-full border-2 border-black sm:w-1/2\"\n          >\n            <SearchIcon aria-hidden=\"true\" class=\"h-8 w-8\" />\n            <input\n              class=\"mr-4 w-full outline-none\"\n              id=\"theme-search\"\n              type=\"search\"\n              placeholder=\"Filter themes by name\"\n              bind:value={themeFilterTerm}\n            />\n          </label>\n        </form>\n\n        <ChooseLayerToEdit {osmConnection} layerIds={$selfThemes} on:layerSelected={editTheme}>\n          <h3 slot=\"title\">Your themes</h3>\n        </ChooseLayerToEdit>\n        <h3>Themes by other contributors</h3>\n        <ChooseLayerToEdit {osmConnection} layerIds={$otherThemes} on:layerSelected={editTheme} />\n        <h3>Official themes by MapComplete</h3>\n        <ChooseLayerToEdit\n          {osmConnection}\n          layerIds={$officialThemes}\n          on:layerSelected={editTheme}\n        />\n      </div>\n    {:else if state === \"loading\"}\n      <div class=\"h-8 w-8\">\n        <Loading>Fetching information from {studioUrl}</Loading>\n      </div>\n    {:else if state === \"editing_layer\"}\n      <EditLayer state={editLayerState} {backToStudio}>\n        <BackButton clss=\"small p-1\" imageClass=\"w-8 h-8\" on:click={() => backToStudio()}>\n          Studio\n        </BackButton>\n      </EditLayer>\n    {:else if state === \"editing_theme\"}\n      <EditTheme\n        state={editThemeState}\n        selfLayers={$selfLayers}\n        otherLayers={$otherLayers}\n        {osmConnection}\n        {backToStudio}\n      >\n        <BackButton clss=\"small p-1\" imageClass=\"w-8 h-8\" on:click={() => backToStudio()}>\n          MapComplete Studio\n        </BackButton>\n      </EditTheme>\n    {/if}\n\n    {#if { intro, tagrenderings: intro_tagrenderings }[$showIntro]?.sections}\n      <FloatOver\n        on:close={() => {\n          showIntro.setData(\"no\")\n        }}\n      >\n        <div class=\"flex h-full p-4 pr-12\">\n          <Walkthrough\n            pages={{ intro, tagrenderings: intro_tagrenderings }[$showIntro]?.sections}\n            on:done={() => {\n              showIntro.setData(\"no\")\n            }}\n          />\n        </div>\n      </FloatOver>\n    {/if}\n  </LoginToggle>\n</If>\n","import SvelteUIElement from \"./Base/SvelteUIElement\"\nimport StudioGUI from \"./StudioGUI.svelte\"\n\nexport default class StudioGui {\n    public setup() {\n        new StudioGUI({\n            target: document.getElementById(\"main\"),\n        })\n    }\n}\n\nnew StudioGui().setup()\n"],"file":"assets/studio-169efdd0.js"}