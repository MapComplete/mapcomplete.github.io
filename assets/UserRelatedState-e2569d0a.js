var Ds=Object.defineProperty;var Ts=(n,e,t)=>e in n?Ds(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ke=(n,e,t)=>(Ts(n,typeof e!="symbol"?e+"":e,t),t);import{c as commonjsGlobal,g as getAugmentedNamespace,r as requireToPropertyKey,a as require_typeof,b as requireDefineProperty}from"./defineProperty-1d73cb61.js";import{a as Utils,U as UIEventSource,C as Combine,F as FixedUiElement,c as Locale,g as Stores,d as ImmutableStore,Q as QueryParameters,b as LocalStorageSource}from"./Translations-12d0b742.js";import{T as Title}from"./List-981d9381.js";var leafletSrcExports={},leafletSrc={get exports(){return leafletSrcExports},set exports(n){leafletSrcExports=n}};/* @preserve
 * Leaflet 1.9.3, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(n,e){(function(t,a){a(e)})(commonjsGlobal,function(t){var a="1.9.3";function l(m){var w,P,$,ne;for(P=1,$=arguments.length;P<$;P++){ne=arguments[P];for(w in ne)m[w]=ne[w]}return m}var h=Object.create||function(){function m(){}return function(w){return m.prototype=w,new m}}();function g(m,w){var P=Array.prototype.slice;if(m.bind)return m.bind.apply(m,P.call(arguments,1));var $=P.call(arguments,2);return function(){return m.apply(w,$.length?$.concat(P.call(arguments)):arguments)}}var p=0;function y(m){return"_leaflet_id"in m||(m._leaflet_id=++p),m._leaflet_id}function b(m,w,P){var $,ne,ve,De;return De=function(){$=!1,ne&&(ve.apply(P,ne),ne=!1)},ve=function(){$?ne=arguments:(m.apply(P,arguments),setTimeout(De,w),$=!0)},ve}function E(m,w,P){var $=w[1],ne=w[0],ve=$-ne;return m===$&&P?m:((m-ne)%ve+ve)%ve+ne}function C(){return!1}function A(m,w){if(w===!1)return m;var P=Math.pow(10,w===void 0?6:w);return Math.round(m*P)/P}function B(m){return m.trim?m.trim():m.replace(/^\s+|\s+$/g,"")}function M(m){return B(m).split(/\s+/)}function N(m,w){Object.prototype.hasOwnProperty.call(m,"options")||(m.options=m.options?h(m.options):{});for(var P in w)m.options[P]=w[P];return m.options}function Z(m,w,P){var $=[];for(var ne in m)$.push(encodeURIComponent(P?ne.toUpperCase():ne)+"="+encodeURIComponent(m[ne]));return(!w||w.indexOf("?")===-1?"?":"&")+$.join("&")}var ee=/\{ *([\w_ -]+) *\}/g;function F(m,w){return m.replace(ee,function(P,$){var ne=w[$];if(ne===void 0)throw new Error("No value provided for variable "+P);return typeof ne=="function"&&(ne=ne(w)),ne})}var O=Array.isArray||function(m){return Object.prototype.toString.call(m)==="[object Array]"};function k(m,w){for(var P=0;P<m.length;P++)if(m[P]===w)return P;return-1}var H="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ce(m){return window["webkit"+m]||window["moz"+m]||window["ms"+m]}var U=0;function te(m){var w=+new Date,P=Math.max(0,16-(w-U));return U=w+P,window.setTimeout(m,P)}var re=window.requestAnimationFrame||ce("RequestAnimationFrame")||te,ue=window.cancelAnimationFrame||ce("CancelAnimationFrame")||ce("CancelRequestAnimationFrame")||function(m){window.clearTimeout(m)};function V(m,w,P){if(P&&re===te)m.call(w);else return re.call(window,g(m,w))}function S(m){m&&ue.call(window,m)}var T={__proto__:null,extend:l,create:h,bind:g,get lastId(){return p},stamp:y,throttle:b,wrapNum:E,falseFn:C,formatNum:A,trim:B,splitWords:M,setOptions:N,getParamString:Z,template:F,isArray:O,indexOf:k,emptyImageUrl:H,requestFn:re,cancelFn:ue,requestAnimFrame:V,cancelAnimFrame:S};function G(){}G.extend=function(m){var w=function(){N(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},P=w.__super__=this.prototype,$=h(P);$.constructor=w,w.prototype=$;for(var ne in this)Object.prototype.hasOwnProperty.call(this,ne)&&ne!=="prototype"&&ne!=="__super__"&&(w[ne]=this[ne]);return m.statics&&l(w,m.statics),m.includes&&(Q(m.includes),l.apply(null,[$].concat(m.includes))),l($,m),delete $.statics,delete $.includes,$.options&&($.options=P.options?h(P.options):{},l($.options,m.options)),$._initHooks=[],$.callInitHooks=function(){if(!this._initHooksCalled){P.callInitHooks&&P.callInitHooks.call(this),this._initHooksCalled=!0;for(var ve=0,De=$._initHooks.length;ve<De;ve++)$._initHooks[ve].call(this)}},w},G.include=function(m){var w=this.prototype.options;return l(this.prototype,m),m.options&&(this.prototype.options=w,this.mergeOptions(m.options)),this},G.mergeOptions=function(m){return l(this.prototype.options,m),this},G.addInitHook=function(m){var w=Array.prototype.slice.call(arguments,1),P=typeof m=="function"?m:function(){this[m].apply(this,w)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(P),this};function Q(m){if(!(typeof L>"u"||!L||!L.Mixin)){m=O(m)?m:[m];for(var w=0;w<m.length;w++)m[w]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var le={on:function(m,w,P){if(typeof m=="object")for(var $ in m)this._on($,m[$],w);else{m=M(m);for(var ne=0,ve=m.length;ne<ve;ne++)this._on(m[ne],w,P)}return this},off:function(m,w,P){if(!arguments.length)delete this._events;else if(typeof m=="object")for(var $ in m)this._off($,m[$],w);else{m=M(m);for(var ne=arguments.length===1,ve=0,De=m.length;ve<De;ve++)ne?this._off(m[ve]):this._off(m[ve],w,P)}return this},_on:function(m,w,P,$){if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}if(this._listens(m,w,P)===!1){P===this&&(P=void 0);var ne={fn:w,ctx:P};$&&(ne.once=!0),this._events=this._events||{},this._events[m]=this._events[m]||[],this._events[m].push(ne)}},_off:function(m,w,P){var $,ne,ve;if(this._events&&($=this._events[m],!!$)){if(arguments.length===1){if(this._firingCount)for(ne=0,ve=$.length;ne<ve;ne++)$[ne].fn=C;delete this._events[m];return}if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}var De=this._listens(m,w,P);if(De!==!1){var $e=$[De];this._firingCount&&($e.fn=C,this._events[m]=$=$.slice()),$.splice(De,1)}}},fire:function(m,w,P){if(!this.listens(m,P))return this;var $=l({},w,{type:m,target:this,sourceTarget:w&&w.sourceTarget||this});if(this._events){var ne=this._events[m];if(ne){this._firingCount=this._firingCount+1||1;for(var ve=0,De=ne.length;ve<De;ve++){var $e=ne[ve],Ke=$e.fn;$e.once&&this.off(m,Ke,$e.ctx),Ke.call($e.ctx||this,$)}this._firingCount--}}return P&&this._propagateEvent($),this},listens:function(m,w,P,$){typeof m!="string"&&console.warn('"string" type argument expected');var ne=w;typeof w!="function"&&($=!!w,ne=void 0,P=void 0);var ve=this._events&&this._events[m];if(ve&&ve.length&&this._listens(m,ne,P)!==!1)return!0;if($){for(var De in this._eventParents)if(this._eventParents[De].listens(m,w,P,$))return!0}return!1},_listens:function(m,w,P){if(!this._events)return!1;var $=this._events[m]||[];if(!w)return!!$.length;P===this&&(P=void 0);for(var ne=0,ve=$.length;ne<ve;ne++)if($[ne].fn===w&&$[ne].ctx===P)return ne;return!1},once:function(m,w,P){if(typeof m=="object")for(var $ in m)this._on($,m[$],w,!0);else{m=M(m);for(var ne=0,ve=m.length;ne<ve;ne++)this._on(m[ne],w,P,!0)}return this},addEventParent:function(m){return this._eventParents=this._eventParents||{},this._eventParents[y(m)]=m,this},removeEventParent:function(m){return this._eventParents&&delete this._eventParents[y(m)],this},_propagateEvent:function(m){for(var w in this._eventParents)this._eventParents[w].fire(m.type,l({layer:m.target,propagatedFrom:m.target},m),!0)}};le.addEventListener=le.on,le.removeEventListener=le.clearAllEventListeners=le.off,le.addOneTimeEventListener=le.once,le.fireEvent=le.fire,le.hasEventListeners=le.listens;var fe=G.extend(le);function q(m,w,P){this.x=P?Math.round(m):m,this.y=P?Math.round(w):w}var se=Math.trunc||function(m){return m>0?Math.floor(m):Math.ceil(m)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(m){return this.clone()._add(D(m))},_add:function(m){return this.x+=m.x,this.y+=m.y,this},subtract:function(m){return this.clone()._subtract(D(m))},_subtract:function(m){return this.x-=m.x,this.y-=m.y,this},divideBy:function(m){return this.clone()._divideBy(m)},_divideBy:function(m){return this.x/=m,this.y/=m,this},multiplyBy:function(m){return this.clone()._multiplyBy(m)},_multiplyBy:function(m){return this.x*=m,this.y*=m,this},scaleBy:function(m){return new q(this.x*m.x,this.y*m.y)},unscaleBy:function(m){return new q(this.x/m.x,this.y/m.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=se(this.x),this.y=se(this.y),this},distanceTo:function(m){m=D(m);var w=m.x-this.x,P=m.y-this.y;return Math.sqrt(w*w+P*P)},equals:function(m){return m=D(m),m.x===this.x&&m.y===this.y},contains:function(m){return m=D(m),Math.abs(m.x)<=Math.abs(this.x)&&Math.abs(m.y)<=Math.abs(this.y)},toString:function(){return"Point("+A(this.x)+", "+A(this.y)+")"}};function D(m,w,P){return m instanceof q?m:O(m)?new q(m[0],m[1]):m==null?m:typeof m=="object"&&"x"in m&&"y"in m?new q(m.x,m.y):new q(m,w,P)}function oe(m,w){if(m)for(var P=w?[m,w]:m,$=0,ne=P.length;$<ne;$++)this.extend(P[$])}oe.prototype={extend:function(m){var w,P;if(!m)return this;if(m instanceof q||typeof m[0]=="number"||"x"in m)w=P=D(m);else if(m=Pe(m),w=m.min,P=m.max,!w||!P)return this;return!this.min&&!this.max?(this.min=w.clone(),this.max=P.clone()):(this.min.x=Math.min(w.x,this.min.x),this.max.x=Math.max(P.x,this.max.x),this.min.y=Math.min(w.y,this.min.y),this.max.y=Math.max(P.y,this.max.y)),this},getCenter:function(m){return D((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,m)},getBottomLeft:function(){return D(this.min.x,this.max.y)},getTopRight:function(){return D(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(m){var w,P;return typeof m[0]=="number"||m instanceof q?m=D(m):m=Pe(m),m instanceof oe?(w=m.min,P=m.max):w=P=m,w.x>=this.min.x&&P.x<=this.max.x&&w.y>=this.min.y&&P.y<=this.max.y},intersects:function(m){m=Pe(m);var w=this.min,P=this.max,$=m.min,ne=m.max,ve=ne.x>=w.x&&$.x<=P.x,De=ne.y>=w.y&&$.y<=P.y;return ve&&De},overlaps:function(m){m=Pe(m);var w=this.min,P=this.max,$=m.min,ne=m.max,ve=ne.x>w.x&&$.x<P.x,De=ne.y>w.y&&$.y<P.y;return ve&&De},isValid:function(){return!!(this.min&&this.max)},pad:function(m){var w=this.min,P=this.max,$=Math.abs(w.x-P.x)*m,ne=Math.abs(w.y-P.y)*m;return Pe(D(w.x-$,w.y-ne),D(P.x+$,P.y+ne))},equals:function(m){return m?(m=Pe(m),this.min.equals(m.getTopLeft())&&this.max.equals(m.getBottomRight())):!1}};function Pe(m,w){return!m||m instanceof oe?m:new oe(m,w)}function Re(m,w){if(m)for(var P=w?[m,w]:m,$=0,ne=P.length;$<ne;$++)this.extend(P[$])}Re.prototype={extend:function(m){var w=this._southWest,P=this._northEast,$,ne;if(m instanceof Ne)$=m,ne=m;else if(m instanceof Re){if($=m._southWest,ne=m._northEast,!$||!ne)return this}else return m?this.extend(Ue(m)||Oe(m)):this;return!w&&!P?(this._southWest=new Ne($.lat,$.lng),this._northEast=new Ne(ne.lat,ne.lng)):(w.lat=Math.min($.lat,w.lat),w.lng=Math.min($.lng,w.lng),P.lat=Math.max(ne.lat,P.lat),P.lng=Math.max(ne.lng,P.lng)),this},pad:function(m){var w=this._southWest,P=this._northEast,$=Math.abs(w.lat-P.lat)*m,ne=Math.abs(w.lng-P.lng)*m;return new Re(new Ne(w.lat-$,w.lng-ne),new Ne(P.lat+$,P.lng+ne))},getCenter:function(){return new Ne((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ne(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ne(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(m){typeof m[0]=="number"||m instanceof Ne||"lat"in m?m=Ue(m):m=Oe(m);var w=this._southWest,P=this._northEast,$,ne;return m instanceof Re?($=m.getSouthWest(),ne=m.getNorthEast()):$=ne=m,$.lat>=w.lat&&ne.lat<=P.lat&&$.lng>=w.lng&&ne.lng<=P.lng},intersects:function(m){m=Oe(m);var w=this._southWest,P=this._northEast,$=m.getSouthWest(),ne=m.getNorthEast(),ve=ne.lat>=w.lat&&$.lat<=P.lat,De=ne.lng>=w.lng&&$.lng<=P.lng;return ve&&De},overlaps:function(m){m=Oe(m);var w=this._southWest,P=this._northEast,$=m.getSouthWest(),ne=m.getNorthEast(),ve=ne.lat>w.lat&&$.lat<P.lat,De=ne.lng>w.lng&&$.lng<P.lng;return ve&&De},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(m,w){return m?(m=Oe(m),this._southWest.equals(m.getSouthWest(),w)&&this._northEast.equals(m.getNorthEast(),w)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Oe(m,w){return m instanceof Re?m:new Re(m,w)}function Ne(m,w,P){if(isNaN(m)||isNaN(w))throw new Error("Invalid LatLng object: ("+m+", "+w+")");this.lat=+m,this.lng=+w,P!==void 0&&(this.alt=+P)}Ne.prototype={equals:function(m,w){if(!m)return!1;m=Ue(m);var P=Math.max(Math.abs(this.lat-m.lat),Math.abs(this.lng-m.lng));return P<=(w===void 0?1e-9:w)},toString:function(m){return"LatLng("+A(this.lat,m)+", "+A(this.lng,m)+")"},distanceTo:function(m){return bt.distance(this,Ue(m))},wrap:function(){return bt.wrapLatLng(this)},toBounds:function(m){var w=180*m/40075017,P=w/Math.cos(Math.PI/180*this.lat);return Oe([this.lat-w,this.lng-P],[this.lat+w,this.lng+P])},clone:function(){return new Ne(this.lat,this.lng,this.alt)}};function Ue(m,w,P){return m instanceof Ne?m:O(m)&&typeof m[0]!="object"?m.length===3?new Ne(m[0],m[1],m[2]):m.length===2?new Ne(m[0],m[1]):null:m==null?m:typeof m=="object"&&"lat"in m?new Ne(m.lat,"lng"in m?m.lng:m.lon,m.alt):w===void 0?null:new Ne(m,w,P)}var Ze={latLngToPoint:function(m,w){var P=this.projection.project(m),$=this.scale(w);return this.transformation._transform(P,$)},pointToLatLng:function(m,w){var P=this.scale(w),$=this.transformation.untransform(m,P);return this.projection.unproject($)},project:function(m){return this.projection.project(m)},unproject:function(m){return this.projection.unproject(m)},scale:function(m){return 256*Math.pow(2,m)},zoom:function(m){return Math.log(m/256)/Math.LN2},getProjectedBounds:function(m){if(this.infinite)return null;var w=this.projection.bounds,P=this.scale(m),$=this.transformation.transform(w.min,P),ne=this.transformation.transform(w.max,P);return new oe($,ne)},infinite:!1,wrapLatLng:function(m){var w=this.wrapLng?E(m.lng,this.wrapLng,!0):m.lng,P=this.wrapLat?E(m.lat,this.wrapLat,!0):m.lat,$=m.alt;return new Ne(P,w,$)},wrapLatLngBounds:function(m){var w=m.getCenter(),P=this.wrapLatLng(w),$=w.lat-P.lat,ne=w.lng-P.lng;if($===0&&ne===0)return m;var ve=m.getSouthWest(),De=m.getNorthEast(),$e=new Ne(ve.lat-$,ve.lng-ne),Ke=new Ne(De.lat-$,De.lng-ne);return new Re($e,Ke)}},bt=l({},Ze,{wrapLng:[-180,180],R:6371e3,distance:function(m,w){var P=Math.PI/180,$=m.lat*P,ne=w.lat*P,ve=Math.sin((w.lat-m.lat)*P/2),De=Math.sin((w.lng-m.lng)*P/2),$e=ve*ve+Math.cos($)*Math.cos(ne)*De*De,Ke=2*Math.atan2(Math.sqrt($e),Math.sqrt(1-$e));return this.R*Ke}}),it=6378137,ut={R:it,MAX_LATITUDE:85.0511287798,project:function(m){var w=Math.PI/180,P=this.MAX_LATITUDE,$=Math.max(Math.min(P,m.lat),-P),ne=Math.sin($*w);return new q(this.R*m.lng*w,this.R*Math.log((1+ne)/(1-ne))/2)},unproject:function(m){var w=180/Math.PI;return new Ne((2*Math.atan(Math.exp(m.y/this.R))-Math.PI/2)*w,m.x*w/this.R)},bounds:function(){var m=it*Math.PI;return new oe([-m,-m],[m,m])}()};function ft(m,w,P,$){if(O(m)){this._a=m[0],this._b=m[1],this._c=m[2],this._d=m[3];return}this._a=m,this._b=w,this._c=P,this._d=$}ft.prototype={transform:function(m,w){return this._transform(m.clone(),w)},_transform:function(m,w){return w=w||1,m.x=w*(this._a*m.x+this._b),m.y=w*(this._c*m.y+this._d),m},untransform:function(m,w){return w=w||1,new q((m.x/w-this._b)/this._a,(m.y/w-this._d)/this._c)}};function He(m,w,P,$){return new ft(m,w,P,$)}var Mt=l({},bt,{code:"EPSG:3857",projection:ut,transformation:function(){var m=.5/(Math.PI*ut.R);return He(m,.5,-m,.5)}()}),wn=l({},Mt,{code:"EPSG:900913"});function Ct(m){return document.createElementNS("http://www.w3.org/2000/svg",m)}function _e(m,w){var P="",$,ne,ve,De,$e,Ke;for($=0,ve=m.length;$<ve;$++){for($e=m[$],ne=0,De=$e.length;ne<De;ne++)Ke=$e[ne],P+=(ne?"L":"M")+Ke.x+" "+Ke.y;P+=w?me.svg?"z":"x":""}return P||"M0 0"}var Y=document.documentElement.style,X="ActiveXObject"in window,we=X&&!document.addEventListener,Me="msLaunchUri"in navigator&&!("documentMode"in document),qe=de("webkit"),je=de("android"),We=de("android 2")||de("android 3"),pt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Gt=je&&de("Google")&&pt<537&&!("AudioNode"in window),rn=!!window.opera,St=!Me&&de("chrome"),gn=de("gecko")&&!qe&&!rn&&!X,Xe=!St&&de("safari"),En=de("phantom"),yn="OTransition"in Y,Yt=navigator.platform.indexOf("Win")===0,Pt=X&&"transition"in Y,an="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!We,Dr="MozPerspective"in Y,Gn=!window.L_DISABLE_3D&&(Pt||an||Dr)&&!yn&&!En,Cn=typeof orientation<"u"||de("mobile"),Jr=Cn&&qe,Pn=Cn&&an,jt=!window.PointerEvent&&window.MSPointerEvent,zn=!!(window.PointerEvent||jt),Et="ontouchstart"in window||!!window.TouchEvent,lt=!window.L_NO_TOUCH&&(Et||zn),Wt=Cn&&rn,Nn=Cn&&gn,Lt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,or=function(){var m=!1;try{var w=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("testPassiveEventSupport",C,w),window.removeEventListener("testPassiveEventSupport",C,w)}catch{}return m}(),Kt=function(){return!!document.createElement("canvas").getContext}(),Ee=!!(document.createElementNS&&Ct("svg").createSVGRect),be=!!Ee&&function(){var m=document.createElement("div");return m.innerHTML="<svg/>",(m.firstChild&&m.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),pe=!Ee&&function(){try{var m=document.createElement("div");m.innerHTML='<v:shape adj="1"/>';var w=m.firstChild;return w.style.behavior="url(#default#VML)",w&&typeof w.adj=="object"}catch{return!1}}(),he=navigator.platform.indexOf("Mac")===0,ae=navigator.platform.indexOf("Linux")===0;function de(m){return navigator.userAgent.toLowerCase().indexOf(m)>=0}var me={ie:X,ielt9:we,edge:Me,webkit:qe,android:je,android23:We,androidStock:Gt,opera:rn,chrome:St,gecko:gn,safari:Xe,phantom:En,opera12:yn,win:Yt,ie3d:Pt,webkit3d:an,gecko3d:Dr,any3d:Gn,mobile:Cn,mobileWebkit:Jr,mobileWebkit3d:Pn,msPointer:jt,pointer:zn,touch:lt,touchNative:Et,mobileOpera:Wt,mobileGecko:Nn,retina:Lt,passiveEvents:or,canvas:Kt,svg:Ee,vml:pe,inlineSvg:be,mac:he,linux:ae},Be=me.msPointer?"MSPointerDown":"pointerdown",Fe=me.msPointer?"MSPointerMove":"pointermove",et=me.msPointer?"MSPointerUp":"pointerup",dt=me.msPointer?"MSPointerCancel":"pointercancel",Ye={touchstart:Be,touchmove:Fe,touchend:et,touchcancel:dt},Te={touchstart:Zn,touchmove:Un,touchend:Un,touchcancel:Un},xt={},cn=!1;function zt(m,w,P){return w==="touchstart"&&Ln(),Te[w]?(P=Te[w].bind(this,P),m.addEventListener(Ye[w],P,!1),P):(console.warn("wrong event specified:",w),C)}function on(m,w,P){if(!Ye[w]){console.warn("wrong event specified:",w);return}m.removeEventListener(Ye[w],P,!1)}function Dt(m){xt[m.pointerId]=m}function Ft(m){xt[m.pointerId]&&(xt[m.pointerId]=m)}function An(m){delete xt[m.pointerId]}function Ln(){cn||(document.addEventListener(Be,Dt,!0),document.addEventListener(Fe,Ft,!0),document.addEventListener(et,An,!0),document.addEventListener(dt,An,!0),cn=!0)}function Un(m,w){if(w.pointerType!==(w.MSPOINTER_TYPE_MOUSE||"mouse")){w.touches=[];for(var P in xt)w.touches.push(xt[P]);w.changedTouches=[w],m(w)}}function Zn(m,w){w.MSPOINTER_TYPE_TOUCH&&w.pointerType===w.MSPOINTER_TYPE_TOUCH&&Bn(w),Un(m,w)}function yr(m){var w={},P,$;for($ in m)P=m[$],w[$]=P&&P.bind?P.bind(m):P;return m=w,w.type="dblclick",w.detail=2,w.isTrusted=!1,w._simulated=!0,w}var _n=200;function Vn(m,w){m.addEventListener("dblclick",w);var P=0,$;function ne(ve){if(ve.detail!==1){$=ve.detail;return}if(!(ve.pointerType==="mouse"||ve.sourceCapabilities&&!ve.sourceCapabilities.firesTouchEvents)){var De=dr(ve);if(!(De.some(function(Ke){return Ke instanceof HTMLLabelElement&&Ke.attributes.for})&&!De.some(function(Ke){return Ke instanceof HTMLInputElement||Ke instanceof HTMLSelectElement}))){var $e=Date.now();$e-P<=_n?($++,$===2&&w(yr(ve))):$=1,P=$e}}}return m.addEventListener("click",ne),{dblclick:w,simDblclick:ne}}function pn(m,w){m.removeEventListener("dblclick",w.dblclick),m.removeEventListener("click",w.simDblclick)}var Qn=Se(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ut=Se(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Kr=Ut==="webkitTransition"||Ut==="OTransition"?Ut+"End":"transitionend";function $n(m){return typeof m=="string"?document.getElementById(m):m}function nn(m,w){var P=m.style[w]||m.currentStyle&&m.currentStyle[w];if((!P||P==="auto")&&document.defaultView){var $=document.defaultView.getComputedStyle(m,null);P=$?$[w]:null}return P==="auto"?null:P}function Zt(m,w,P){var $=document.createElement(m);return $.className=w||"",P&&P.appendChild($),$}function Dn(m){var w=m.parentNode;w&&w.removeChild(m)}function $r(m){for(;m.firstChild;)m.removeChild(m.firstChild)}function rt(m){var w=m.parentNode;w&&w.lastChild!==m&&w.appendChild(m)}function Qt(m){var w=m.parentNode;w&&w.firstChild!==m&&w.insertBefore(m,w.firstChild)}function sn(m,w){if(m.classList!==void 0)return m.classList.contains(w);var P=qr(m);return P.length>0&&new RegExp("(^|\\s)"+w+"(\\s|$)").test(P)}function un(m,w){if(m.classList!==void 0)for(var P=M(w),$=0,ne=P.length;$<ne;$++)m.classList.add(P[$]);else if(!sn(m,w)){var ve=qr(m);Kn(m,(ve?ve+" ":"")+w)}}function Wn(m,w){m.classList!==void 0?m.classList.remove(w):Kn(m,B((" "+qr(m)+" ").replace(" "+w+" "," ")))}function Kn(m,w){m.className.baseVal===void 0?m.className=w:m.className.baseVal=w}function qr(m){return m.correspondingElement&&(m=m.correspondingElement),m.className.baseVal===void 0?m.className:m.className.baseVal}function z(m,w){"opacity"in m.style?m.style.opacity=w:"filter"in m.style&&ie(m,w)}function ie(m,w){var P=!1,$="DXImageTransform.Microsoft.Alpha";try{P=m.filters.item($)}catch{if(w===1)return}w=Math.round(w*100),P?(P.Enabled=w!==100,P.Opacity=w):m.style.filter+=" progid:"+$+"(opacity="+w+")"}function Se(m){for(var w=document.documentElement.style,P=0;P<m.length;P++)if(m[P]in w)return m[P];return!1}function Ae(m,w,P){var $=w||new q(0,0);m.style[Qn]=(me.ie3d?"translate("+$.x+"px,"+$.y+"px)":"translate3d("+$.x+"px,"+$.y+"px,0)")+(P?" scale("+P+")":"")}function xe(m,w){m._leaflet_pos=w,me.any3d?Ae(m,w):(m.style.left=w.x+"px",m.style.top=w.y+"px")}function Ge(m){return m._leaflet_pos||new q(0,0)}var Ce,Qe,ht;if("onselectstart"in document)Ce=function(){At(window,"selectstart",Bn)},Qe=function(){nt(window,"selectstart",Bn)};else{var yt=Se(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ce=function(){if(yt){var m=document.documentElement.style;ht=m[yt],m[yt]="none"}},Qe=function(){yt&&(document.documentElement.style[yt]=ht,ht=void 0)}}function ot(){At(window,"dragstart",Bn)}function wt(){nt(window,"dragstart",Bn)}var qt,Tt;function vt(m){for(;m.tabIndex===-1;)m=m.parentNode;m.style&&(tt(),qt=m,Tt=m.style.outline,m.style.outline="none",At(window,"keydown",tt))}function tt(){qt&&(qt.style.outline=Tt,qt=void 0,Tt=void 0,nt(window,"keydown",tt))}function _t(m){do m=m.parentNode;while((!m.offsetWidth||!m.offsetHeight)&&m!==document.body);return m}function Jt(m){var w=m.getBoundingClientRect();return{x:w.width/m.offsetWidth||1,y:w.height/m.offsetHeight||1,boundingClientRect:w}}var Vt={__proto__:null,TRANSFORM:Qn,TRANSITION:Ut,TRANSITION_END:Kr,get:$n,getStyle:nn,create:Zt,remove:Dn,empty:$r,toFront:rt,toBack:Qt,hasClass:sn,addClass:un,removeClass:Wn,setClass:Kn,getClass:qr,setOpacity:z,testProp:Se,setTransform:Ae,setPosition:xe,getPosition:Ge,get disableTextSelection(){return Ce},get enableTextSelection(){return Qe},disableImageDrag:ot,enableImageDrag:wt,preventOutline:vt,restoreOutline:tt,getSizedParentNode:_t,getScale:Jt};function At(m,w,P,$){if(w&&typeof w=="object")for(var ne in w)mn(m,ne,w[ne],P);else{w=M(w);for(var ve=0,De=w.length;ve<De;ve++)mn(m,w[ve],P,$)}return this}var It="_leaflet_events";function nt(m,w,P,$){if(arguments.length===1)gt(m),delete m[It];else if(w&&typeof w=="object")for(var ne in w)Xt(m,ne,w[ne],P);else if(w=M(w),arguments.length===2)gt(m,function($e){return k(w,$e)!==-1});else for(var ve=0,De=w.length;ve<De;ve++)Xt(m,w[ve],P,$);return this}function gt(m,w){for(var P in m[It]){var $=P.split(/\d/)[0];(!w||w($))&&Xt(m,$,null,null,P)}}var kt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function mn(m,w,P,$){var ne=w+y(P)+($?"_"+y($):"");if(m[It]&&m[It][ne])return this;var ve=function($e){return P.call($||m,$e||window.event)},De=ve;!me.touchNative&&me.pointer&&w.indexOf("touch")===0?ve=zt(m,w,ve):me.touch&&w==="dblclick"?ve=Vn(m,ve):"addEventListener"in m?w==="touchstart"||w==="touchmove"||w==="wheel"||w==="mousewheel"?m.addEventListener(kt[w]||w,ve,me.passiveEvents?{passive:!1}:!1):w==="mouseenter"||w==="mouseleave"?(ve=function($e){$e=$e||window.event,xn(m,$e)&&De($e)},m.addEventListener(kt[w],ve,!1)):m.addEventListener(w,De,!1):m.attachEvent("on"+w,ve),m[It]=m[It]||{},m[It][ne]=ve}function Xt(m,w,P,$,ne){ne=ne||w+y(P)+($?"_"+y($):"");var ve=m[It]&&m[It][ne];if(!ve)return this;!me.touchNative&&me.pointer&&w.indexOf("touch")===0?on(m,w,ve):me.touch&&w==="dblclick"?pn(m,ve):"removeEventListener"in m?m.removeEventListener(kt[w]||w,ve,!1):m.detachEvent("on"+w,ve),m[It][ne]=null}function fn(m){return m.stopPropagation?m.stopPropagation():m.originalEvent?m.originalEvent._stopped=!0:m.cancelBubble=!0,this}function hn(m){return mn(m,"wheel",fn),this}function Sn(m){return At(m,"mousedown touchstart dblclick contextmenu",fn),m._leaflet_disable_click=!0,this}function Bn(m){return m.preventDefault?m.preventDefault():m.returnValue=!1,this}function Cr(m){return Bn(m),fn(m),this}function dr(m){if(m.composedPath)return m.composedPath();for(var w=[],P=m.target;P;)w.push(P),P=P.parentNode;return w}function Ir(m,w){if(!w)return new q(m.clientX,m.clientY);var P=Jt(w),$=P.boundingClientRect;return new q((m.clientX-$.left)/P.x-w.clientLeft,(m.clientY-$.top)/P.y-w.clientTop)}var br=me.linux&&me.chrome?window.devicePixelRatio:me.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Fi(m){return me.edge?m.wheelDeltaY/2:m.deltaY&&m.deltaMode===0?-m.deltaY/br:m.deltaY&&m.deltaMode===1?-m.deltaY*20:m.deltaY&&m.deltaMode===2?-m.deltaY*60:m.deltaX||m.deltaZ?0:m.wheelDelta?(m.wheelDeltaY||m.wheelDelta)/2:m.detail&&Math.abs(m.detail)<32765?-m.detail*20:m.detail?m.detail/-32765*60:0}function xn(m,w){var P=w.relatedTarget;if(!P)return!0;try{for(;P&&P!==m;)P=P.parentNode}catch{return!1}return P!==m}var Vr={__proto__:null,on:At,off:nt,stopPropagation:fn,disableScrollPropagation:hn,disableClickPropagation:Sn,preventDefault:Bn,stop:Cr,getPropagationPath:dr,getMousePosition:Ir,getWheelDelta:Fi,isExternalTarget:xn,addListener:At,removeListener:nt},ea=fe.extend({run:function(m,w,P,$){this.stop(),this._el=m,this._inProgress=!0,this._duration=P||.25,this._easeOutPower=1/Math.max($||.5,.2),this._startPos=Ge(m),this._offset=w.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(m){var w=+new Date-this._startTime,P=this._duration*1e3;w<P?this._runFrame(this._easeOut(w/P),m):(this._runFrame(1),this._complete())},_runFrame:function(m,w){var P=this._startPos.add(this._offset.multiplyBy(m));w&&P._round(),xe(this._el,P),this.fire("step")},_complete:function(){S(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(m){return 1-Math.pow(1-m,this._easeOutPower)}}),Tn=fe.extend({options:{crs:Mt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(m,w){w=N(this,w),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(m),this._initLayout(),this._onResize=g(this._onResize,this),this._initEvents(),w.maxBounds&&this.setMaxBounds(w.maxBounds),w.zoom!==void 0&&(this._zoom=this._limitZoom(w.zoom)),w.center&&w.zoom!==void 0&&this.setView(Ue(w.center),w.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ut&&me.any3d&&!me.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),At(this._proxy,Kr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(m,w,P){if(w=w===void 0?this._zoom:this._limitZoom(w),m=this._limitCenter(Ue(m),w,this.options.maxBounds),P=P||{},this._stop(),this._loaded&&!P.reset&&P!==!0){P.animate!==void 0&&(P.zoom=l({animate:P.animate},P.zoom),P.pan=l({animate:P.animate,duration:P.duration},P.pan));var $=this._zoom!==w?this._tryAnimatedZoom&&this._tryAnimatedZoom(m,w,P.zoom):this._tryAnimatedPan(m,P.pan);if($)return clearTimeout(this._sizeTimer),this}return this._resetView(m,w,P.pan&&P.pan.noMoveStart),this},setZoom:function(m,w){return this._loaded?this.setView(this.getCenter(),m,{zoom:w}):(this._zoom=m,this)},zoomIn:function(m,w){return m=m||(me.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+m,w)},zoomOut:function(m,w){return m=m||(me.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-m,w)},setZoomAround:function(m,w,P){var $=this.getZoomScale(w),ne=this.getSize().divideBy(2),ve=m instanceof q?m:this.latLngToContainerPoint(m),De=ve.subtract(ne).multiplyBy(1-1/$),$e=this.containerPointToLatLng(ne.add(De));return this.setView($e,w,{zoom:P})},_getBoundsCenterZoom:function(m,w){w=w||{},m=m.getBounds?m.getBounds():Oe(m);var P=D(w.paddingTopLeft||w.padding||[0,0]),$=D(w.paddingBottomRight||w.padding||[0,0]),ne=this.getBoundsZoom(m,!1,P.add($));if(ne=typeof w.maxZoom=="number"?Math.min(w.maxZoom,ne):ne,ne===1/0)return{center:m.getCenter(),zoom:ne};var ve=$.subtract(P).divideBy(2),De=this.project(m.getSouthWest(),ne),$e=this.project(m.getNorthEast(),ne),Ke=this.unproject(De.add($e).divideBy(2).add(ve),ne);return{center:Ke,zoom:ne}},fitBounds:function(m,w){if(m=Oe(m),!m.isValid())throw new Error("Bounds are not valid.");var P=this._getBoundsCenterZoom(m,w);return this.setView(P.center,P.zoom,w)},fitWorld:function(m){return this.fitBounds([[-90,-180],[90,180]],m)},panTo:function(m,w){return this.setView(m,this._zoom,{pan:w})},panBy:function(m,w){if(m=D(m).round(),w=w||{},!m.x&&!m.y)return this.fire("moveend");if(w.animate!==!0&&!this.getSize().contains(m))return this._resetView(this.unproject(this.project(this.getCenter()).add(m)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ea,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),w.noMoveStart||this.fire("movestart"),w.animate!==!1){un(this._mapPane,"leaflet-pan-anim");var P=this._getMapPanePos().subtract(m).round();this._panAnim.run(this._mapPane,P,w.duration||.25,w.easeLinearity)}else this._rawPanBy(m),this.fire("move").fire("moveend");return this},flyTo:function(m,w,P){if(P=P||{},P.animate===!1||!me.any3d)return this.setView(m,w,P);this._stop();var $=this.project(this.getCenter()),ne=this.project(m),ve=this.getSize(),De=this._zoom;m=Ue(m),w=w===void 0?De:w;var $e=Math.max(ve.x,ve.y),Ke=$e*this.getZoomScale(De,w),at=ne.distanceTo($)||1,$t=1.42,dn=$t*$t;function On(hr){var la=hr?-1:1,ja=hr?Ke:$e,Za=Ke*Ke-$e*$e+la*dn*dn*at*at,Ga=2*ja*dn*at,Ia=Za/Ga,Pa=Math.sqrt(Ia*Ia+1)-Ia,co=Pa<1e-9?-18:Math.log(Pa);return co}function ti(hr){return(Math.exp(hr)-Math.exp(-hr))/2}function di(hr){return(Math.exp(hr)+Math.exp(-hr))/2}function _a(hr){return ti(hr)/di(hr)}var Di=On(0);function ba(hr){return $e*(di(Di)/di(Di+$t*hr))}function Xa(hr){return $e*(di(Di)*_a(Di+$t*hr)-ti(Di))/dn}function gi(hr){return 1-Math.pow(1-hr,1.5)}var lo=Date.now(),fr=(On(1)-Di)/$t,Zr=P.duration?1e3*P.duration:1e3*fr*.8;function $a(){var hr=(Date.now()-lo)/Zr,la=gi(hr)*fr;hr<=1?(this._flyToFrame=V($a,this),this._move(this.unproject($.add(ne.subtract($).multiplyBy(Xa(la)/at)),De),this.getScaleZoom($e/ba(la),De),{flyTo:!0})):this._move(m,w)._moveEnd(!0)}return this._moveStart(!0,P.noMoveStart),$a.call(this),this},flyToBounds:function(m,w){var P=this._getBoundsCenterZoom(m,w);return this.flyTo(P.center,P.zoom,w)},setMaxBounds:function(m){return m=Oe(m),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),m.isValid()?(this.options.maxBounds=m,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(m){var w=this.options.minZoom;return this.options.minZoom=m,this._loaded&&w!==m&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(m):this},setMaxZoom:function(m){var w=this.options.maxZoom;return this.options.maxZoom=m,this._loaded&&w!==m&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(m):this},panInsideBounds:function(m,w){this._enforcingBounds=!0;var P=this.getCenter(),$=this._limitCenter(P,this._zoom,Oe(m));return P.equals($)||this.panTo($,w),this._enforcingBounds=!1,this},panInside:function(m,w){w=w||{};var P=D(w.paddingTopLeft||w.padding||[0,0]),$=D(w.paddingBottomRight||w.padding||[0,0]),ne=this.project(this.getCenter()),ve=this.project(m),De=this.getPixelBounds(),$e=Pe([De.min.add(P),De.max.subtract($)]),Ke=$e.getSize();if(!$e.contains(ve)){this._enforcingBounds=!0;var at=ve.subtract($e.getCenter()),$t=$e.extend(ve).getSize().subtract(Ke);ne.x+=at.x<0?-$t.x:$t.x,ne.y+=at.y<0?-$t.y:$t.y,this.panTo(this.unproject(ne),w),this._enforcingBounds=!1}return this},invalidateSize:function(m){if(!this._loaded)return this;m=l({animate:!1,pan:!0},m===!0?{animate:!0}:m);var w=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var P=this.getSize(),$=w.divideBy(2).round(),ne=P.divideBy(2).round(),ve=$.subtract(ne);return!ve.x&&!ve.y?this:(m.animate&&m.pan?this.panBy(ve):(m.pan&&this._rawPanBy(ve),this.fire("move"),m.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(g(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:w,newSize:P}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(m){if(m=this._locateOptions=l({timeout:1e4,watch:!1},m),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var w=g(this._handleGeolocationResponse,this),P=g(this._handleGeolocationError,this);return m.watch?this._locationWatchId=navigator.geolocation.watchPosition(w,P,m):navigator.geolocation.getCurrentPosition(w,P,m),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(m){if(this._container._leaflet_id){var w=m.code,P=m.message||(w===1?"permission denied":w===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:w,message:"Geolocation error: "+P+"."})}},_handleGeolocationResponse:function(m){if(this._container._leaflet_id){var w=m.coords.latitude,P=m.coords.longitude,$=new Ne(w,P),ne=$.toBounds(m.coords.accuracy*2),ve=this._locateOptions;if(ve.setView){var De=this.getBoundsZoom(ne);this.setView($,ve.maxZoom?Math.min(De,ve.maxZoom):De)}var $e={latlng:$,bounds:ne,timestamp:m.timestamp};for(var Ke in m.coords)typeof m.coords[Ke]=="number"&&($e[Ke]=m.coords[Ke]);this.fire("locationfound",$e)}},addHandler:function(m,w){if(!w)return this;var P=this[m]=new w(this);return this._handlers.push(P),this.options[m]&&P.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Dn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(S(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var m;for(m in this._layers)this._layers[m].remove();for(m in this._panes)Dn(this._panes[m]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(m,w){var P="leaflet-pane"+(m?" leaflet-"+m.replace("Pane","")+"-pane":""),$=Zt("div",P,w||this._mapPane);return m&&(this._panes[m]=$),$},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var m=this.getPixelBounds(),w=this.unproject(m.getBottomLeft()),P=this.unproject(m.getTopRight());return new Re(w,P)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(m,w,P){m=Oe(m),P=D(P||[0,0]);var $=this.getZoom()||0,ne=this.getMinZoom(),ve=this.getMaxZoom(),De=m.getNorthWest(),$e=m.getSouthEast(),Ke=this.getSize().subtract(P),at=Pe(this.project($e,$),this.project(De,$)).getSize(),$t=me.any3d?this.options.zoomSnap:1,dn=Ke.x/at.x,On=Ke.y/at.y,ti=w?Math.max(dn,On):Math.min(dn,On);return $=this.getScaleZoom(ti,$),$t&&($=Math.round($/($t/100))*($t/100),$=w?Math.ceil($/$t)*$t:Math.floor($/$t)*$t),Math.max(ne,Math.min(ve,$))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(m,w){var P=this._getTopLeftPoint(m,w);return new oe(P,P.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(m){return this.options.crs.getProjectedBounds(m===void 0?this.getZoom():m)},getPane:function(m){return typeof m=="string"?this._panes[m]:m},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(m,w){var P=this.options.crs;return w=w===void 0?this._zoom:w,P.scale(m)/P.scale(w)},getScaleZoom:function(m,w){var P=this.options.crs;w=w===void 0?this._zoom:w;var $=P.zoom(m*P.scale(w));return isNaN($)?1/0:$},project:function(m,w){return w=w===void 0?this._zoom:w,this.options.crs.latLngToPoint(Ue(m),w)},unproject:function(m,w){return w=w===void 0?this._zoom:w,this.options.crs.pointToLatLng(D(m),w)},layerPointToLatLng:function(m){var w=D(m).add(this.getPixelOrigin());return this.unproject(w)},latLngToLayerPoint:function(m){var w=this.project(Ue(m))._round();return w._subtract(this.getPixelOrigin())},wrapLatLng:function(m){return this.options.crs.wrapLatLng(Ue(m))},wrapLatLngBounds:function(m){return this.options.crs.wrapLatLngBounds(Oe(m))},distance:function(m,w){return this.options.crs.distance(Ue(m),Ue(w))},containerPointToLayerPoint:function(m){return D(m).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(m){return D(m).add(this._getMapPanePos())},containerPointToLatLng:function(m){var w=this.containerPointToLayerPoint(D(m));return this.layerPointToLatLng(w)},latLngToContainerPoint:function(m){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ue(m)))},mouseEventToContainerPoint:function(m){return Ir(m,this._container)},mouseEventToLayerPoint:function(m){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(m))},mouseEventToLatLng:function(m){return this.layerPointToLatLng(this.mouseEventToLayerPoint(m))},_initContainer:function(m){var w=this._container=$n(m);if(w){if(w._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");At(w,"scroll",this._onScroll,this),this._containerId=y(w)},_initLayout:function(){var m=this._container;this._fadeAnimated=this.options.fadeAnimation&&me.any3d,un(m,"leaflet-container"+(me.touch?" leaflet-touch":"")+(me.retina?" leaflet-retina":"")+(me.ielt9?" leaflet-oldie":"")+(me.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var w=nn(m,"position");w!=="absolute"&&w!=="relative"&&w!=="fixed"&&w!=="sticky"&&(m.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var m=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),xe(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(un(m.markerPane,"leaflet-zoom-hide"),un(m.shadowPane,"leaflet-zoom-hide"))},_resetView:function(m,w,P){xe(this._mapPane,new q(0,0));var $=!this._loaded;this._loaded=!0,w=this._limitZoom(w),this.fire("viewprereset");var ne=this._zoom!==w;this._moveStart(ne,P)._move(m,w)._moveEnd(ne),this.fire("viewreset"),$&&this.fire("load")},_moveStart:function(m,w){return m&&this.fire("zoomstart"),w||this.fire("movestart"),this},_move:function(m,w,P,$){w===void 0&&(w=this._zoom);var ne=this._zoom!==w;return this._zoom=w,this._lastCenter=m,this._pixelOrigin=this._getNewPixelOrigin(m),$?P&&P.pinch&&this.fire("zoom",P):((ne||P&&P.pinch)&&this.fire("zoom",P),this.fire("move",P)),this},_moveEnd:function(m){return m&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return S(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(m){xe(this._mapPane,this._getMapPanePos().subtract(m))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(m){this._targets={},this._targets[y(this._container)]=this;var w=m?nt:At;w(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&w(window,"resize",this._onResize,this),me.any3d&&this.options.transform3DLimit&&(m?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){S(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var m=this._getMapPanePos();Math.max(Math.abs(m.x),Math.abs(m.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(m,w){for(var P=[],$,ne=w==="mouseout"||w==="mouseover",ve=m.target||m.srcElement,De=!1;ve;){if($=this._targets[y(ve)],$&&(w==="click"||w==="preclick")&&this._draggableMoved($)){De=!0;break}if($&&$.listens(w,!0)&&(ne&&!xn(ve,m)||(P.push($),ne))||ve===this._container)break;ve=ve.parentNode}return!P.length&&!De&&!ne&&this.listens(w,!0)&&(P=[this]),P},_isClickDisabled:function(m){for(;m&&m!==this._container;){if(m._leaflet_disable_click)return!0;m=m.parentNode}},_handleDOMEvent:function(m){var w=m.target||m.srcElement;if(!(!this._loaded||w._leaflet_disable_events||m.type==="click"&&this._isClickDisabled(w))){var P=m.type;P==="mousedown"&&vt(w),this._fireDOMEvent(m,P)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(m,w,P){if(m.type==="click"){var $=l({},m);$.type="preclick",this._fireDOMEvent($,$.type,P)}var ne=this._findEventTargets(m,w);if(P){for(var ve=[],De=0;De<P.length;De++)P[De].listens(w,!0)&&ve.push(P[De]);ne=ve.concat(ne)}if(ne.length){w==="contextmenu"&&Bn(m);var $e=ne[0],Ke={originalEvent:m};if(m.type!=="keypress"&&m.type!=="keydown"&&m.type!=="keyup"){var at=$e.getLatLng&&(!$e._radius||$e._radius<=10);Ke.containerPoint=at?this.latLngToContainerPoint($e.getLatLng()):this.mouseEventToContainerPoint(m),Ke.layerPoint=this.containerPointToLayerPoint(Ke.containerPoint),Ke.latlng=at?$e.getLatLng():this.layerPointToLatLng(Ke.layerPoint)}for(De=0;De<ne.length;De++)if(ne[De].fire(w,Ke,!0),Ke.originalEvent._stopped||ne[De].options.bubblingMouseEvents===!1&&k(this._mouseEvents,w)!==-1)return}},_draggableMoved:function(m){return m=m.dragging&&m.dragging.enabled()?m:this,m.dragging&&m.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var m=0,w=this._handlers.length;m<w;m++)this._handlers[m].disable()},whenReady:function(m,w){return this._loaded?m.call(w||this,{target:this}):this.on("load",m,w),this},_getMapPanePos:function(){return Ge(this._mapPane)||new q(0,0)},_moved:function(){var m=this._getMapPanePos();return m&&!m.equals([0,0])},_getTopLeftPoint:function(m,w){var P=m&&w!==void 0?this._getNewPixelOrigin(m,w):this.getPixelOrigin();return P.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(m,w){var P=this.getSize()._divideBy(2);return this.project(m,w)._subtract(P)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(m,w,P){var $=this._getNewPixelOrigin(P,w);return this.project(m,w)._subtract($)},_latLngBoundsToNewLayerBounds:function(m,w,P){var $=this._getNewPixelOrigin(P,w);return Pe([this.project(m.getSouthWest(),w)._subtract($),this.project(m.getNorthWest(),w)._subtract($),this.project(m.getSouthEast(),w)._subtract($),this.project(m.getNorthEast(),w)._subtract($)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(m){return this.latLngToLayerPoint(m).subtract(this._getCenterLayerPoint())},_limitCenter:function(m,w,P){if(!P)return m;var $=this.project(m,w),ne=this.getSize().divideBy(2),ve=new oe($.subtract(ne),$.add(ne)),De=this._getBoundsOffset(ve,P,w);return Math.abs(De.x)<=1&&Math.abs(De.y)<=1?m:this.unproject($.add(De),w)},_limitOffset:function(m,w){if(!w)return m;var P=this.getPixelBounds(),$=new oe(P.min.add(m),P.max.add(m));return m.add(this._getBoundsOffset($,w))},_getBoundsOffset:function(m,w,P){var $=Pe(this.project(w.getNorthEast(),P),this.project(w.getSouthWest(),P)),ne=$.min.subtract(m.min),ve=$.max.subtract(m.max),De=this._rebound(ne.x,-ve.x),$e=this._rebound(ne.y,-ve.y);return new q(De,$e)},_rebound:function(m,w){return m+w>0?Math.round(m-w)/2:Math.max(0,Math.ceil(m))-Math.max(0,Math.floor(w))},_limitZoom:function(m){var w=this.getMinZoom(),P=this.getMaxZoom(),$=me.any3d?this.options.zoomSnap:1;return $&&(m=Math.round(m/$)*$),Math.max(w,Math.min(P,m))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Wn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(m,w){var P=this._getCenterOffset(m)._trunc();return(w&&w.animate)!==!0&&!this.getSize().contains(P)?!1:(this.panBy(P,w),!0)},_createAnimProxy:function(){var m=this._proxy=Zt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(m),this.on("zoomanim",function(w){var P=Qn,$=this._proxy.style[P];Ae(this._proxy,this.project(w.center,w.zoom),this.getZoomScale(w.zoom,1)),$===this._proxy.style[P]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Dn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var m=this.getCenter(),w=this.getZoom();Ae(this._proxy,this.project(m,w),this.getZoomScale(w,1))},_catchTransitionEnd:function(m){this._animatingZoom&&m.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(m,w,P){if(this._animatingZoom)return!0;if(P=P||{},!this._zoomAnimated||P.animate===!1||this._nothingToAnimate()||Math.abs(w-this._zoom)>this.options.zoomAnimationThreshold)return!1;var $=this.getZoomScale(w),ne=this._getCenterOffset(m)._divideBy(1-1/$);return P.animate!==!0&&!this.getSize().contains(ne)?!1:(V(function(){this._moveStart(!0,!1)._animateZoom(m,w,!0)},this),!0)},_animateZoom:function(m,w,P,$){this._mapPane&&(P&&(this._animatingZoom=!0,this._animateToCenter=m,this._animateToZoom=w,un(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:m,zoom:w,noUpdate:$}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(g(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Wn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function yi(m,w){return new Tn(m,w)}var Gr=G.extend({options:{position:"topright"},initialize:function(m){N(this,m)},getPosition:function(){return this.options.position},setPosition:function(m){var w=this._map;return w&&w.removeControl(this),this.options.position=m,w&&w.addControl(this),this},getContainer:function(){return this._container},addTo:function(m){this.remove(),this._map=m;var w=this._container=this.onAdd(m),P=this.getPosition(),$=m._controlCorners[P];return un(w,"leaflet-control"),P.indexOf("bottom")!==-1?$.insertBefore(w,$.firstChild):$.appendChild(w),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Dn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(m){this._map&&m&&m.screenX>0&&m.screenY>0&&this._map.getContainer().focus()}}),sr=function(m){return new Gr(m)};Tn.include({addControl:function(m){return m.addTo(this),this},removeControl:function(m){return m.remove(),this},_initControlPos:function(){var m=this._controlCorners={},w="leaflet-",P=this._controlContainer=Zt("div",w+"control-container",this._container);function $(ne,ve){var De=w+ne+" "+w+ve;m[ne+ve]=Zt("div",De,P)}$("top","left"),$("top","right"),$("bottom","left"),$("bottom","right")},_clearControlPos:function(){for(var m in this._controlCorners)Dn(this._controlCorners[m]);Dn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ta=Gr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(m,w,P,$){return P<$?-1:$<P?1:0}},initialize:function(m,w,P){N(this,P),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var $ in m)this._addLayer(m[$],$);for($ in w)this._addLayer(w[$],$,!0)},onAdd:function(m){this._initLayout(),this._update(),this._map=m,m.on("zoomend",this._checkDisabledLayers,this);for(var w=0;w<this._layers.length;w++)this._layers[w].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(m){return Gr.prototype.addTo.call(this,m),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var m=0;m<this._layers.length;m++)this._layers[m].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(m,w){return this._addLayer(m,w),this._map?this._update():this},addOverlay:function(m,w){return this._addLayer(m,w,!0),this._map?this._update():this},removeLayer:function(m){m.off("add remove",this._onLayerChange,this);var w=this._getLayer(y(m));return w&&this._layers.splice(this._layers.indexOf(w),1),this._map?this._update():this},expand:function(){un(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var m=this._map.getSize().y-(this._container.offsetTop+50);return m<this._section.clientHeight?(un(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=m+"px"):Wn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Wn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var m="leaflet-control-layers",w=this._container=Zt("div",m),P=this.options.collapsed;w.setAttribute("aria-haspopup",!0),Sn(w),hn(w);var $=this._section=Zt("section",m+"-list");P&&(this._map.on("click",this.collapse,this),At(w,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ne=this._layersLink=Zt("a",m+"-toggle",w);ne.href="#",ne.title="Layers",ne.setAttribute("role","button"),At(ne,{keydown:function(ve){ve.keyCode===13&&this._expandSafely()},click:function(ve){Bn(ve),this._expandSafely()}},this),P||this.expand(),this._baseLayersList=Zt("div",m+"-base",$),this._separator=Zt("div",m+"-separator",$),this._overlaysList=Zt("div",m+"-overlays",$),w.appendChild($)},_getLayer:function(m){for(var w=0;w<this._layers.length;w++)if(this._layers[w]&&y(this._layers[w].layer)===m)return this._layers[w]},_addLayer:function(m,w,P){this._map&&m.on("add remove",this._onLayerChange,this),this._layers.push({layer:m,name:w,overlay:P}),this.options.sortLayers&&this._layers.sort(g(function($,ne){return this.options.sortFunction($.layer,ne.layer,$.name,ne.name)},this)),this.options.autoZIndex&&m.setZIndex&&(this._lastZIndex++,m.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;$r(this._baseLayersList),$r(this._overlaysList),this._layerControlInputs=[];var m,w,P,$,ne=0;for(P=0;P<this._layers.length;P++)$=this._layers[P],this._addItem($),w=w||$.overlay,m=m||!$.overlay,ne+=$.overlay?0:1;return this.options.hideSingleBase&&(m=m&&ne>1,this._baseLayersList.style.display=m?"":"none"),this._separator.style.display=w&&m?"":"none",this},_onLayerChange:function(m){this._handlingClick||this._update();var w=this._getLayer(y(m.target)),P=w.overlay?m.type==="add"?"overlayadd":"overlayremove":m.type==="add"?"baselayerchange":null;P&&this._map.fire(P,w)},_createRadioElement:function(m,w){var P='<input type="radio" class="leaflet-control-layers-selector" name="'+m+'"'+(w?' checked="checked"':"")+"/>",$=document.createElement("div");return $.innerHTML=P,$.firstChild},_addItem:function(m){var w=document.createElement("label"),P=this._map.hasLayer(m.layer),$;m.overlay?($=document.createElement("input"),$.type="checkbox",$.className="leaflet-control-layers-selector",$.defaultChecked=P):$=this._createRadioElement("leaflet-base-layers_"+y(this),P),this._layerControlInputs.push($),$.layerId=y(m.layer),At($,"click",this._onInputClick,this);var ne=document.createElement("span");ne.innerHTML=" "+m.name;var ve=document.createElement("span");w.appendChild(ve),ve.appendChild($),ve.appendChild(ne);var De=m.overlay?this._overlaysList:this._baseLayersList;return De.appendChild(w),this._checkDisabledLayers(),w},_onInputClick:function(){var m=this._layerControlInputs,w,P,$=[],ne=[];this._handlingClick=!0;for(var ve=m.length-1;ve>=0;ve--)w=m[ve],P=this._getLayer(w.layerId).layer,w.checked?$.push(P):w.checked||ne.push(P);for(ve=0;ve<ne.length;ve++)this._map.hasLayer(ne[ve])&&this._map.removeLayer(ne[ve]);for(ve=0;ve<$.length;ve++)this._map.hasLayer($[ve])||this._map.addLayer($[ve]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var m=this._layerControlInputs,w,P,$=this._map.getZoom(),ne=m.length-1;ne>=0;ne--)w=m[ne],P=this._getLayer(w.layerId).layer,w.disabled=P.options.minZoom!==void 0&&$<P.options.minZoom||P.options.maxZoom!==void 0&&$>P.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var m=this._section;At(m,"click",Bn),this.expand(),setTimeout(function(){nt(m,"click",Bn)})}}),_i=function(m,w,P){return new ta(m,w,P)},Bi=Gr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(m){var w="leaflet-control-zoom",P=Zt("div",w+" leaflet-bar"),$=this.options;return this._zoomInButton=this._createButton($.zoomInText,$.zoomInTitle,w+"-in",P,this._zoomIn),this._zoomOutButton=this._createButton($.zoomOutText,$.zoomOutTitle,w+"-out",P,this._zoomOut),this._updateDisabled(),m.on("zoomend zoomlevelschange",this._updateDisabled,this),P},onRemove:function(m){m.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(m){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(m.shiftKey?3:1))},_zoomOut:function(m){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(m.shiftKey?3:1))},_createButton:function(m,w,P,$,ne){var ve=Zt("a",P,$);return ve.innerHTML=m,ve.href="#",ve.title=w,ve.setAttribute("role","button"),ve.setAttribute("aria-label",w),Sn(ve),At(ve,"click",Cr),At(ve,"click",ne,this),At(ve,"click",this._refocusOnMap,this),ve},_updateDisabled:function(){var m=this._map,w="leaflet-disabled";Wn(this._zoomInButton,w),Wn(this._zoomOutButton,w),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||m._zoom===m.getMinZoom())&&(un(this._zoomOutButton,w),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||m._zoom===m.getMaxZoom())&&(un(this._zoomInButton,w),this._zoomInButton.setAttribute("aria-disabled","true"))}});Tn.mergeOptions({zoomControl:!0}),Tn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Bi,this.addControl(this.zoomControl))});var ki=function(m){return new Bi(m)},$i=Gr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(m){var w="leaflet-control-scale",P=Zt("div",w),$=this.options;return this._addScales($,w+"-line",P),m.on($.updateWhenIdle?"moveend":"move",this._update,this),m.whenReady(this._update,this),P},onRemove:function(m){m.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(m,w,P){m.metric&&(this._mScale=Zt("div",w,P)),m.imperial&&(this._iScale=Zt("div",w,P))},_update:function(){var m=this._map,w=m.getSize().y/2,P=m.distance(m.containerPointToLatLng([0,w]),m.containerPointToLatLng([this.options.maxWidth,w]));this._updateScales(P)},_updateScales:function(m){this.options.metric&&m&&this._updateMetric(m),this.options.imperial&&m&&this._updateImperial(m)},_updateMetric:function(m){var w=this._getRoundNum(m),P=w<1e3?w+" m":w/1e3+" km";this._updateScale(this._mScale,P,w/m)},_updateImperial:function(m){var w=m*3.2808399,P,$,ne;w>5280?(P=w/5280,$=this._getRoundNum(P),this._updateScale(this._iScale,$+" mi",$/P)):(ne=this._getRoundNum(w),this._updateScale(this._iScale,ne+" ft",ne/w))},_updateScale:function(m,w,P){m.style.width=Math.round(this.options.maxWidth*P)+"px",m.innerHTML=w},_getRoundNum:function(m){var w=Math.pow(10,(Math.floor(m)+"").length-1),P=m/w;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:1,w*P}}),ct=function(m){return new $i(m)},Tr='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Jn=Gr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(me.inlineSvg?Tr+" ":"")+"Leaflet</a>"},initialize:function(m){N(this,m),this._attributions={}},onAdd:function(m){m.attributionControl=this,this._container=Zt("div","leaflet-control-attribution"),Sn(this._container);for(var w in m._layers)m._layers[w].getAttribution&&this.addAttribution(m._layers[w].getAttribution());return this._update(),m.on("layeradd",this._addAttribution,this),this._container},onRemove:function(m){m.off("layeradd",this._addAttribution,this)},_addAttribution:function(m){m.layer.getAttribution&&(this.addAttribution(m.layer.getAttribution()),m.layer.once("remove",function(){this.removeAttribution(m.layer.getAttribution())},this))},setPrefix:function(m){return this.options.prefix=m,this._update(),this},addAttribution:function(m){return m?(this._attributions[m]||(this._attributions[m]=0),this._attributions[m]++,this._update(),this):this},removeAttribution:function(m){return m?(this._attributions[m]&&(this._attributions[m]--,this._update()),this):this},_update:function(){if(this._map){var m=[];for(var w in this._attributions)this._attributions[w]&&m.push(w);var P=[];this.options.prefix&&P.push(this.options.prefix),m.length&&P.push(m.join(", ")),this._container.innerHTML=P.join(' <span aria-hidden="true">|</span> ')}}});Tn.mergeOptions({attributionControl:!0}),Tn.addInitHook(function(){this.options.attributionControl&&new Jn().addTo(this)});var na=function(m){return new Jn(m)};Gr.Layers=ta,Gr.Zoom=Bi,Gr.Scale=$i,Gr.Attribution=Jn,sr.layers=_i,sr.zoom=ki,sr.scale=ct,sr.attribution=na;var Yr=G.extend({initialize:function(m){this._map=m},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Yr.addTo=function(m,w){return m.addHandler(w,this),this};var ga={Events:le},bi=me.touch?"touchstart mousedown":"mousedown",xr=fe.extend({options:{clickTolerance:3},initialize:function(m,w,P,$){N(this,$),this._element=m,this._dragStartTarget=w||m,this._preventOutline=P},enable:function(){this._enabled||(At(this._dragStartTarget,bi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(xr._dragging===this&&this.finishDrag(!0),nt(this._dragStartTarget,bi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(m){if(this._enabled&&(this._moved=!1,!sn(this._element,"leaflet-zoom-anim"))){if(m.touches&&m.touches.length!==1){xr._dragging===this&&this.finishDrag();return}if(!(xr._dragging||m.shiftKey||m.which!==1&&m.button!==1&&!m.touches)&&(xr._dragging=this,this._preventOutline&&vt(this._element),ot(),Ce(),!this._moving)){this.fire("down");var w=m.touches?m.touches[0]:m,P=_t(this._element);this._startPoint=new q(w.clientX,w.clientY),this._startPos=Ge(this._element),this._parentScale=Jt(P);var $=m.type==="mousedown";At(document,$?"mousemove":"touchmove",this._onMove,this),At(document,$?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(m){if(this._enabled){if(m.touches&&m.touches.length>1){this._moved=!0;return}var w=m.touches&&m.touches.length===1?m.touches[0]:m,P=new q(w.clientX,w.clientY)._subtract(this._startPoint);!P.x&&!P.y||Math.abs(P.x)+Math.abs(P.y)<this.options.clickTolerance||(P.x/=this._parentScale.x,P.y/=this._parentScale.y,Bn(m),this._moved||(this.fire("dragstart"),this._moved=!0,un(document.body,"leaflet-dragging"),this._lastTarget=m.target||m.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),un(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(P),this._moving=!0,this._lastEvent=m,this._updatePosition())}},_updatePosition:function(){var m={originalEvent:this._lastEvent};this.fire("predrag",m),xe(this._element,this._newPos),this.fire("drag",m)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(m){Wn(document.body,"leaflet-dragging"),this._lastTarget&&(Wn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),nt(document,"mousemove touchmove",this._onMove,this),nt(document,"mouseup touchend touchcancel",this._onUp,this),wt(),Qe(),this._moved&&this._moving&&this.fire("dragend",{noInertia:m,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,xr._dragging=!1}});function Gi(m,w){if(!w||!m.length)return m.slice();var P=w*w;return m=Ea(m,P),m=Hi(m,P),m}function ei(m,w,P){return Math.sqrt(Ni(m,w,P,!0))}function zi(m,w,P){return Ni(m,w,P)}function Hi(m,w){var P=m.length,$=typeof Uint8Array!=void 0+""?Uint8Array:Array,ne=new $(P);ne[0]=ne[P-1]=1,Rr(m,ne,w,0,P-1);var ve,De=[];for(ve=0;ve<P;ve++)ne[ve]&&De.push(m[ve]);return De}function Rr(m,w,P,$,ne){var ve=0,De,$e,Ke;for($e=$+1;$e<=ne-1;$e++)Ke=Ni(m[$e],m[$],m[ne],!0),Ke>ve&&(De=$e,ve=Ke);ve>P&&(w[De]=1,Rr(m,w,P,$,De),Rr(m,w,P,De,ne))}function Ea(m,w){for(var P=[m[0]],$=1,ne=0,ve=m.length;$<ve;$++)Ui(m[$],m[ne])>w&&(P.push(m[$]),ne=$);return ne<ve-1&&P.push(m[ve-1]),P}var xi;function pa(m,w,P,$,ne){var ve=$?xi:gr(m,P),De=gr(w,P),$e,Ke,at;for(xi=De;;){if(!(ve|De))return[m,w];if(ve&De)return!1;$e=ve||De,Ke=Fr(m,w,$e,P,ne),at=gr(Ke,P),$e===ve?(m=Ke,ve=at):(w=Ke,De=at)}}function Fr(m,w,P,$,ne){var ve=w.x-m.x,De=w.y-m.y,$e=$.min,Ke=$.max,at,$t;return P&8?(at=m.x+ve*(Ke.y-m.y)/De,$t=Ke.y):P&4?(at=m.x+ve*($e.y-m.y)/De,$t=$e.y):P&2?(at=Ke.x,$t=m.y+De*(Ke.x-m.x)/ve):P&1&&(at=$e.x,$t=m.y+De*($e.x-m.x)/ve),new q(at,$t,ne)}function gr(m,w){var P=0;return m.x<w.min.x?P|=1:m.x>w.max.x&&(P|=2),m.y<w.min.y?P|=4:m.y>w.max.y&&(P|=8),P}function Ui(m,w){var P=w.x-m.x,$=w.y-m.y;return P*P+$*$}function Ni(m,w,P,$){var ne=w.x,ve=w.y,De=P.x-ne,$e=P.y-ve,Ke=De*De+$e*$e,at;return Ke>0&&(at=((m.x-ne)*De+(m.y-ve)*$e)/Ke,at>1?(ne=P.x,ve=P.y):at>0&&(ne+=De*at,ve+=$e*at)),De=m.x-ne,$e=m.y-ve,$?De*De+$e*$e:new q(ne,ve)}function Pr(m){return!O(m[0])||typeof m[0][0]!="object"&&typeof m[0][0]<"u"}function ra(m){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Pr(m)}function ni(m,w){var P,$,ne,ve,De,$e,Ke,at;if(!m||m.length===0)throw new Error("latlngs not passed");Pr(m)||(console.warn("latlngs are not flat! Only the first ring will be used"),m=m[0]);var $t=[];for(var dn in m)$t.push(w.project(Ue(m[dn])));var On=$t.length;for(P=0,$=0;P<On-1;P++)$+=$t[P].distanceTo($t[P+1])/2;if($===0)at=$t[0];else for(P=0,ve=0;P<On-1;P++)if(De=$t[P],$e=$t[P+1],ne=De.distanceTo($e),ve+=ne,ve>$){Ke=(ve-$)/ne,at=[$e.x-Ke*($e.x-De.x),$e.y-Ke*($e.y-De.y)];break}return w.unproject(D(at))}var qi={__proto__:null,simplify:Gi,pointToSegmentDistance:ei,closestPointOnSegment:zi,clipSegment:pa,_getEdgeIntersection:Fr,_getBitCode:gr,_sqClosestPointOnSegment:Ni,isFlat:Pr,_flat:ra,polylineCenter:ni};function wi(m,w,P){var $,ne=[1,4,2,8],ve,De,$e,Ke,at,$t,dn,On;for(ve=0,$t=m.length;ve<$t;ve++)m[ve]._code=gr(m[ve],w);for($e=0;$e<4;$e++){for(dn=ne[$e],$=[],ve=0,$t=m.length,De=$t-1;ve<$t;De=ve++)Ke=m[ve],at=m[De],Ke._code&dn?at._code&dn||(On=Fr(at,Ke,dn,w,P),On._code=gr(On,w),$.push(On)):(at._code&dn&&(On=Fr(at,Ke,dn,w,P),On._code=gr(On,w),$.push(On)),$.push(Ke));m=$}return m}function ma(m,w){var P,$,ne,ve,De,$e,Ke,at,$t;if(!m||m.length===0)throw new Error("latlngs not passed");Pr(m)||(console.warn("latlngs are not flat! Only the first ring will be used"),m=m[0]);var dn=[];for(var On in m)dn.push(w.project(Ue(m[On])));var ti=dn.length;for($e=Ke=at=0,P=0,$=ti-1;P<ti;$=P++)ne=dn[P],ve=dn[$],De=ne.y*ve.x-ve.y*ne.x,Ke+=(ne.x+ve.x)*De,at+=(ne.y+ve.y)*De,$e+=De*3;return $e===0?$t=dn[0]:$t=[Ke/$e,at/$e],w.unproject(D($t))}var oi={__proto__:null,clipPolygon:wi,polygonCenter:ma},ia={project:function(m){return new q(m.lng,m.lat)},unproject:function(m){return new Ne(m.y,m.x)},bounds:new oe([-180,-90],[180,90])},Vi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new oe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(m){var w=Math.PI/180,P=this.R,$=m.lat*w,ne=this.R_MINOR/P,ve=Math.sqrt(1-ne*ne),De=ve*Math.sin($),$e=Math.tan(Math.PI/4-$/2)/Math.pow((1-De)/(1+De),ve/2);return $=-P*Math.log(Math.max($e,1e-10)),new q(m.lng*w*P,$)},unproject:function(m){for(var w=180/Math.PI,P=this.R,$=this.R_MINOR/P,ne=Math.sqrt(1-$*$),ve=Math.exp(-m.y/P),De=Math.PI/2-2*Math.atan(ve),$e=0,Ke=.1,at;$e<15&&Math.abs(Ke)>1e-7;$e++)at=ne*Math.sin(De),at=Math.pow((1-at)/(1+at),ne/2),Ke=Math.PI/2-2*Math.atan(ve*at)-De,De+=Ke;return new Ne(De*w,m.x*w/P)}},Sa={__proto__:null,LonLat:ia,Mercator:Vi,SphericalMercator:ut},Oa=l({},bt,{code:"EPSG:3395",projection:Vi,transformation:function(){var m=.5/(Math.PI*Vi.R);return He(m,.5,-m,.5)}()}),nr=l({},bt,{code:"EPSG:4326",projection:ia,transformation:He(1/180,1,-1/180,.5)}),si=l({},Ze,{projection:ia,transformation:He(1,0,-1,0),scale:function(m){return Math.pow(2,m)},zoom:function(m){return Math.log(m)/Math.LN2},distance:function(m,w){var P=w.lng-m.lng,$=w.lat-m.lat;return Math.sqrt(P*P+$*$)},infinite:!0});Ze.Earth=bt,Ze.EPSG3395=Oa,Ze.EPSG3857=Mt,Ze.EPSG900913=wn,Ze.EPSG4326=nr,Ze.Simple=si;var zr=fe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(m){return m.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(m){return m&&m.removeLayer(this),this},getPane:function(m){return this._map.getPane(m?this.options[m]||m:this.options.pane)},addInteractiveTarget:function(m){return this._map._targets[y(m)]=this,this},removeInteractiveTarget:function(m){return delete this._map._targets[y(m)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(m){var w=m.target;if(w.hasLayer(this)){if(this._map=w,this._zoomAnimated=w._zoomAnimated,this.getEvents){var P=this.getEvents();w.on(P,this),this.once("remove",function(){w.off(P,this)},this)}this.onAdd(w),this.fire("add"),w.fire("layeradd",{layer:this})}}});Tn.include({addLayer:function(m){if(!m._layerAdd)throw new Error("The provided object is not a Layer.");var w=y(m);return this._layers[w]?this:(this._layers[w]=m,m._mapToAdd=this,m.beforeAdd&&m.beforeAdd(this),this.whenReady(m._layerAdd,m),this)},removeLayer:function(m){var w=y(m);return this._layers[w]?(this._loaded&&m.onRemove(this),delete this._layers[w],this._loaded&&(this.fire("layerremove",{layer:m}),m.fire("remove")),m._map=m._mapToAdd=null,this):this},hasLayer:function(m){return y(m)in this._layers},eachLayer:function(m,w){for(var P in this._layers)m.call(w,this._layers[P]);return this},_addLayers:function(m){m=m?O(m)?m:[m]:[];for(var w=0,P=m.length;w<P;w++)this.addLayer(m[w])},_addZoomLimit:function(m){(!isNaN(m.options.maxZoom)||!isNaN(m.options.minZoom))&&(this._zoomBoundLayers[y(m)]=m,this._updateZoomLevels())},_removeZoomLimit:function(m){var w=y(m);this._zoomBoundLayers[w]&&(delete this._zoomBoundLayers[w],this._updateZoomLevels())},_updateZoomLevels:function(){var m=1/0,w=-1/0,P=this._getZoomSpan();for(var $ in this._zoomBoundLayers){var ne=this._zoomBoundLayers[$].options;m=ne.minZoom===void 0?m:Math.min(m,ne.minZoom),w=ne.maxZoom===void 0?w:Math.max(w,ne.maxZoom)}this._layersMaxZoom=w===-1/0?void 0:w,this._layersMinZoom=m===1/0?void 0:m,P!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ui=zr.extend({initialize:function(m,w){N(this,w),this._layers={};var P,$;if(m)for(P=0,$=m.length;P<$;P++)this.addLayer(m[P])},addLayer:function(m){var w=this.getLayerId(m);return this._layers[w]=m,this._map&&this._map.addLayer(m),this},removeLayer:function(m){var w=m in this._layers?m:this.getLayerId(m);return this._map&&this._layers[w]&&this._map.removeLayer(this._layers[w]),delete this._layers[w],this},hasLayer:function(m){var w=typeof m=="number"?m:this.getLayerId(m);return w in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(m){var w=Array.prototype.slice.call(arguments,1),P,$;for(P in this._layers)$=this._layers[P],$[m]&&$[m].apply($,w);return this},onAdd:function(m){this.eachLayer(m.addLayer,m)},onRemove:function(m){this.eachLayer(m.removeLayer,m)},eachLayer:function(m,w){for(var P in this._layers)m.call(w,this._layers[P]);return this},getLayer:function(m){return this._layers[m]},getLayers:function(){var m=[];return this.eachLayer(m.push,m),m},setZIndex:function(m){return this.invoke("setZIndex",m)},getLayerId:function(m){return y(m)}}),Wi=function(m,w){return new ui(m,w)},ri=ui.extend({addLayer:function(m){return this.hasLayer(m)?this:(m.addEventParent(this),ui.prototype.addLayer.call(this,m),this.fire("layeradd",{layer:m}))},removeLayer:function(m){return this.hasLayer(m)?(m in this._layers&&(m=this._layers[m]),m.removeEventParent(this),ui.prototype.removeLayer.call(this,m),this.fire("layerremove",{layer:m})):this},setStyle:function(m){return this.invoke("setStyle",m)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var m=new Re;for(var w in this._layers){var P=this._layers[w];m.extend(P.getBounds?P.getBounds():P.getLatLng())}return m}}),Li=function(m,w){return new ri(m,w)},Hr=G.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(m){N(this,m)},createIcon:function(m){return this._createIcon("icon",m)},createShadow:function(m){return this._createIcon("shadow",m)},_createIcon:function(m,w){var P=this._getIconUrl(m);if(!P){if(m==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var $=this._createImg(P,w&&w.tagName==="IMG"?w:null);return this._setIconStyles($,m),(this.options.crossOrigin||this.options.crossOrigin==="")&&($.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),$},_setIconStyles:function(m,w){var P=this.options,$=P[w+"Size"];typeof $=="number"&&($=[$,$]);var ne=D($),ve=D(w==="shadow"&&P.shadowAnchor||P.iconAnchor||ne&&ne.divideBy(2,!0));m.className="leaflet-marker-"+w+" "+(P.className||""),ve&&(m.style.marginLeft=-ve.x+"px",m.style.marginTop=-ve.y+"px"),ne&&(m.style.width=ne.x+"px",m.style.height=ne.y+"px")},_createImg:function(m,w){return w=w||document.createElement("img"),w.src=m,w},_getIconUrl:function(m){return me.retina&&this.options[m+"RetinaUrl"]||this.options[m+"Url"]}});function Nr(m){return new Hr(m)}var rr=Hr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(m){return typeof rr.imagePath!="string"&&(rr.imagePath=this._detectIconPath()),(this.options.imagePath||rr.imagePath)+Hr.prototype._getIconUrl.call(this,m)},_stripUrl:function(m){var w=function(P,$,ne){var ve=$.exec(P);return ve&&ve[ne]};return m=w(m,/^url\((['"])?(.+)\1\)$/,2),m&&w(m,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var m=Zt("div","leaflet-default-icon-path",document.body),w=nn(m,"background-image")||nn(m,"backgroundImage");if(document.body.removeChild(m),w=this._stripUrl(w),w)return w;var P=document.querySelector('link[href$="leaflet.css"]');return P?P.href.substring(0,P.href.length-11-1):""}}),Br=Yr.extend({initialize:function(m){this._marker=m},addHooks:function(){var m=this._marker._icon;this._draggable||(this._draggable=new xr(m,m,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),un(m,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Wn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(m){var w=this._marker,P=w._map,$=this._marker.options.autoPanSpeed,ne=this._marker.options.autoPanPadding,ve=Ge(w._icon),De=P.getPixelBounds(),$e=P.getPixelOrigin(),Ke=Pe(De.min._subtract($e).add(ne),De.max._subtract($e).subtract(ne));if(!Ke.contains(ve)){var at=D((Math.max(Ke.max.x,ve.x)-Ke.max.x)/(De.max.x-Ke.max.x)-(Math.min(Ke.min.x,ve.x)-Ke.min.x)/(De.min.x-Ke.min.x),(Math.max(Ke.max.y,ve.y)-Ke.max.y)/(De.max.y-Ke.max.y)-(Math.min(Ke.min.y,ve.y)-Ke.min.y)/(De.min.y-Ke.min.y)).multiplyBy($);P.panBy(at,{animate:!1}),this._draggable._newPos._add(at),this._draggable._startPos._add(at),xe(w._icon,this._draggable._newPos),this._onDrag(m),this._panRequest=V(this._adjustPan.bind(this,m))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(m){this._marker.options.autoPan&&(S(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,m)))},_onDrag:function(m){var w=this._marker,P=w._shadow,$=Ge(w._icon),ne=w._map.layerPointToLatLng($);P&&xe(P,$),w._latlng=ne,m.latlng=ne,m.oldLatLng=this._oldLatLng,w.fire("move",m).fire("drag",m)},_onDragEnd:function(m){S(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",m)}}),pr=zr.extend({options:{icon:new rr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(m,w){N(this,w),this._latlng=Ue(m)},onAdd:function(m){this._zoomAnimated=this._zoomAnimated&&m.options.markerZoomAnimation,this._zoomAnimated&&m.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(m){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&m.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(m){var w=this._latlng;return this._latlng=Ue(m),this.update(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},setZIndexOffset:function(m){return this.options.zIndexOffset=m,this.update()},getIcon:function(){return this.options.icon},setIcon:function(m){return this.options.icon=m,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var m=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(m)}return this},_initIcon:function(){var m=this.options,w="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),P=m.icon.createIcon(this._icon),$=!1;P!==this._icon&&(this._icon&&this._removeIcon(),$=!0,m.title&&(P.title=m.title),P.tagName==="IMG"&&(P.alt=m.alt||"")),un(P,w),m.keyboard&&(P.tabIndex="0",P.setAttribute("role","button")),this._icon=P,m.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&At(P,"focus",this._panOnFocus,this);var ne=m.icon.createShadow(this._shadow),ve=!1;ne!==this._shadow&&(this._removeShadow(),ve=!0),ne&&(un(ne,w),ne.alt=""),this._shadow=ne,m.opacity<1&&this._updateOpacity(),$&&this.getPane().appendChild(this._icon),this._initInteraction(),ne&&ve&&this.getPane(m.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&nt(this._icon,"focus",this._panOnFocus,this),Dn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Dn(this._shadow),this._shadow=null},_setPos:function(m){this._icon&&xe(this._icon,m),this._shadow&&xe(this._shadow,m),this._zIndex=m.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(m){this._icon&&(this._icon.style.zIndex=this._zIndex+m)},_animateZoom:function(m){var w=this._map._latLngToNewLayerPoint(this._latlng,m.zoom,m.center).round();this._setPos(w)},_initInteraction:function(){if(this.options.interactive&&(un(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Br)){var m=this.options.draggable;this.dragging&&(m=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Br(this),m&&this.dragging.enable()}},setOpacity:function(m){return this.options.opacity=m,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var m=this.options.opacity;this._icon&&z(this._icon,m),this._shadow&&z(this._shadow,m)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var m=this._map;if(m){var w=this.options.icon.options,P=w.iconSize?D(w.iconSize):D(0,0),$=w.iconAnchor?D(w.iconAnchor):D(0,0);m.panInside(this._latlng,{paddingTopLeft:$,paddingBottomRight:P.subtract($)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ai(m,w){return new pr(m,w)}var wr=zr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(m){this._renderer=m.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(m){return N(this,m),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&m&&Object.prototype.hasOwnProperty.call(m,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),li=wr.extend({options:{fill:!0,radius:10},initialize:function(m,w){N(this,w),this._latlng=Ue(m),this._radius=this.options.radius},setLatLng:function(m){var w=this._latlng;return this._latlng=Ue(m),this.redraw(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(m){return this.options.radius=this._radius=m,this.redraw()},getRadius:function(){return this._radius},setStyle:function(m){var w=m&&m.radius||this._radius;return wr.prototype.setStyle.call(this,m),this.setRadius(w),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var m=this._radius,w=this._radiusY||m,P=this._clickTolerance(),$=[m+P,w+P];this._pxBounds=new oe(this._point.subtract($),this._point.add($))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(m){return m.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ot(m,w){return new li(m,w)}var mr=li.extend({initialize:function(m,w,P){if(typeof w=="number"&&(w=l({},P,{radius:w})),N(this,w),this._latlng=Ue(m),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(m){return this._mRadius=m,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var m=[this._radius,this._radiusY||this._radius];return new Re(this._map.layerPointToLatLng(this._point.subtract(m)),this._map.layerPointToLatLng(this._point.add(m)))},setStyle:wr.prototype.setStyle,_project:function(){var m=this._latlng.lng,w=this._latlng.lat,P=this._map,$=P.options.crs;if($.distance===bt.distance){var ne=Math.PI/180,ve=this._mRadius/bt.R/ne,De=P.project([w+ve,m]),$e=P.project([w-ve,m]),Ke=De.add($e).divideBy(2),at=P.unproject(Ke).lat,$t=Math.acos((Math.cos(ve*ne)-Math.sin(w*ne)*Math.sin(at*ne))/(Math.cos(w*ne)*Math.cos(at*ne)))/ne;(isNaN($t)||$t===0)&&($t=ve/Math.cos(Math.PI/180*w)),this._point=Ke.subtract(P.getPixelOrigin()),this._radius=isNaN($t)?0:Ke.x-P.project([at,m-$t]).x,this._radiusY=Ke.y-De.y}else{var dn=$.unproject($.project(this._latlng).subtract([this._mRadius,0]));this._point=P.latLngToLayerPoint(this._latlng),this._radius=this._point.x-P.latLngToLayerPoint(dn).x}this._updateBounds()}});function ir(m,w,P){return new mr(m,w,P)}var er=wr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(m,w){N(this,w),this._setLatLngs(m)},getLatLngs:function(){return this._latlngs},setLatLngs:function(m){return this._setLatLngs(m),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(m){for(var w=1/0,P=null,$=Ni,ne,ve,De=0,$e=this._parts.length;De<$e;De++)for(var Ke=this._parts[De],at=1,$t=Ke.length;at<$t;at++){ne=Ke[at-1],ve=Ke[at];var dn=$(m,ne,ve,!0);dn<w&&(w=dn,P=$(m,ne,ve))}return P&&(P.distance=Math.sqrt(w)),P},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ni(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(m,w){return w=w||this._defaultShape(),m=Ue(m),w.push(m),this._bounds.extend(m),this.redraw()},_setLatLngs:function(m){this._bounds=new Re,this._latlngs=this._convertLatLngs(m)},_defaultShape:function(){return Pr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(m){for(var w=[],P=Pr(m),$=0,ne=m.length;$<ne;$++)P?(w[$]=Ue(m[$]),this._bounds.extend(w[$])):w[$]=this._convertLatLngs(m[$]);return w},_project:function(){var m=new oe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,m),this._bounds.isValid()&&m.isValid()&&(this._rawPxBounds=m,this._updateBounds())},_updateBounds:function(){var m=this._clickTolerance(),w=new q(m,m);this._rawPxBounds&&(this._pxBounds=new oe([this._rawPxBounds.min.subtract(w),this._rawPxBounds.max.add(w)]))},_projectLatlngs:function(m,w,P){var $=m[0]instanceof Ne,ne=m.length,ve,De;if($){for(De=[],ve=0;ve<ne;ve++)De[ve]=this._map.latLngToLayerPoint(m[ve]),P.extend(De[ve]);w.push(De)}else for(ve=0;ve<ne;ve++)this._projectLatlngs(m[ve],w,P)},_clipPoints:function(){var m=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(m))){if(this.options.noClip){this._parts=this._rings;return}var w=this._parts,P,$,ne,ve,De,$e,Ke;for(P=0,ne=0,ve=this._rings.length;P<ve;P++)for(Ke=this._rings[P],$=0,De=Ke.length;$<De-1;$++)$e=pa(Ke[$],Ke[$+1],m,$,!0),$e&&(w[ne]=w[ne]||[],w[ne].push($e[0]),($e[1]!==Ke[$+1]||$===De-2)&&(w[ne].push($e[1]),ne++))}},_simplifyPoints:function(){for(var m=this._parts,w=this.options.smoothFactor,P=0,$=m.length;P<$;P++)m[P]=Gi(m[P],w)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(m,w){var P,$,ne,ve,De,$e,Ke=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(m))return!1;for(P=0,ve=this._parts.length;P<ve;P++)for($e=this._parts[P],$=0,De=$e.length,ne=De-1;$<De;ne=$++)if(!(!w&&$===0)&&ei(m,$e[ne],$e[$])<=Ke)return!0;return!1}});function Ei(m,w){return new er(m,w)}er._flat=ra;var ci=er.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ma(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(m){var w=er.prototype._convertLatLngs.call(this,m),P=w.length;return P>=2&&w[0]instanceof Ne&&w[0].equals(w[P-1])&&w.pop(),w},_setLatLngs:function(m){er.prototype._setLatLngs.call(this,m),Pr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Pr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var m=this._renderer._bounds,w=this.options.weight,P=new q(w,w);if(m=new oe(m.min.subtract(P),m.max.add(P)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(m))){if(this.options.noClip){this._parts=this._rings;return}for(var $=0,ne=this._rings.length,ve;$<ne;$++)ve=wi(this._rings[$],m,!0),ve.length&&this._parts.push(ve)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(m){var w=!1,P,$,ne,ve,De,$e,Ke,at;if(!this._pxBounds||!this._pxBounds.contains(m))return!1;for(ve=0,Ke=this._parts.length;ve<Ke;ve++)for(P=this._parts[ve],De=0,at=P.length,$e=at-1;De<at;$e=De++)$=P[De],ne=P[$e],$.y>m.y!=ne.y>m.y&&m.x<(ne.x-$.x)*(m.y-$.y)/(ne.y-$.y)+$.x&&(w=!w);return w||er.prototype._containsPoint.call(this,m,!0)}});function va(m,w){return new ci(m,w)}var en=ri.extend({initialize:function(m,w){N(this,w),this._layers={},m&&this.addData(m)},addData:function(m){var w=O(m)?m:m.features,P,$,ne;if(w){for(P=0,$=w.length;P<$;P++)ne=w[P],(ne.geometries||ne.geometry||ne.features||ne.coordinates)&&this.addData(ne);return this}var ve=this.options;if(ve.filter&&!ve.filter(m))return this;var De=Rn(m,ve);return De?(De.feature=fi(m),De.defaultOptions=De.options,this.resetStyle(De),ve.onEachFeature&&ve.onEachFeature(m,De),this.addLayer(De)):this},resetStyle:function(m){return m===void 0?this.eachLayer(this.resetStyle,this):(m.options=l({},m.defaultOptions),this._setLayerStyle(m,this.options.style),this)},setStyle:function(m){return this.eachLayer(function(w){this._setLayerStyle(w,m)},this)},_setLayerStyle:function(m,w){m.setStyle&&(typeof w=="function"&&(w=w(m.feature)),m.setStyle(w))}});function Rn(m,w){var P=m.type==="Feature"?m.geometry:m,$=P?P.coordinates:null,ne=[],ve=w&&w.pointToLayer,De=w&&w.coordsToLatLng||ur,$e,Ke,at,$t;if(!$&&!P)return null;switch(P.type){case"Point":return $e=De($),Lr(ve,m,$e,w);case"MultiPoint":for(at=0,$t=$.length;at<$t;at++)$e=De($[at]),ne.push(Lr(ve,m,$e,w));return new ri(ne);case"LineString":case"MultiLineString":return Ke=ii($,P.type==="LineString"?0:1,De),new er(Ke,w);case"Polygon":case"MultiPolygon":return Ke=ii($,P.type==="Polygon"?1:2,De),new ci(Ke,w);case"GeometryCollection":for(at=0,$t=P.geometries.length;at<$t;at++){var dn=Rn({geometry:P.geometries[at],type:"Feature",properties:m.properties},w);dn&&ne.push(dn)}return new ri(ne);case"FeatureCollection":for(at=0,$t=P.features.length;at<$t;at++){var On=Rn(P.features[at],w);On&&ne.push(On)}return new ri(ne);default:throw new Error("Invalid GeoJSON object.")}}function Lr(m,w,P,$){return m?m(w,P):new pr(P,$&&$.markersInheritOptions&&$)}function ur(m){return new Ne(m[1],m[0],m[2])}function ii(m,w,P){for(var $=[],ne=0,ve=m.length,De;ne<ve;ne++)De=w?ii(m[ne],w-1,P):(P||ur)(m[ne]),$.push(De);return $}function Mi(m,w){return m=Ue(m),m.alt!==void 0?[A(m.lng,w),A(m.lat,w),A(m.alt,w)]:[A(m.lng,w),A(m.lat,w)]}function Ur(m,w,P,$){for(var ne=[],ve=0,De=m.length;ve<De;ve++)ne.push(w?Ur(m[ve],Pr(m[ve])?0:w-1,P,$):Mi(m[ve],$));return!w&&P&&ne.push(ne[0].slice()),ne}function lr(m,w){return m.feature?l({},m.feature,{geometry:w}):fi(w)}function fi(m){return m.type==="Feature"||m.type==="FeatureCollection"?m:{type:"Feature",properties:{},geometry:m}}var Ji={toGeoJSON:function(m){return lr(this,{type:"Point",coordinates:Mi(this.getLatLng(),m)})}};pr.include(Ji),mr.include(Ji),li.include(Ji),er.include({toGeoJSON:function(m){var w=!Pr(this._latlngs),P=Ur(this._latlngs,w?1:0,!1,m);return lr(this,{type:(w?"Multi":"")+"LineString",coordinates:P})}}),ci.include({toGeoJSON:function(m){var w=!Pr(this._latlngs),P=w&&!Pr(this._latlngs[0]),$=Ur(this._latlngs,P?2:w?1:0,!0,m);return w||($=[$]),lr(this,{type:(P?"Multi":"")+"Polygon",coordinates:$})}}),ui.include({toMultiPoint:function(m){var w=[];return this.eachLayer(function(P){w.push(P.toGeoJSON(m).geometry.coordinates)}),lr(this,{type:"MultiPoint",coordinates:w})},toGeoJSON:function(m){var w=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(w==="MultiPoint")return this.toMultiPoint(m);var P=w==="GeometryCollection",$=[];return this.eachLayer(function(ne){if(ne.toGeoJSON){var ve=ne.toGeoJSON(m);if(P)$.push(ve.geometry);else{var De=fi(ve);De.type==="FeatureCollection"?$.push.apply($,De.features):$.push(De)}}}),P?lr(this,{geometries:$,type:"GeometryCollection"}):{type:"FeatureCollection",features:$}}});function W(m,w){return new en(m,w)}var ye=W,Le=zr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(m,w,P){this._url=m,this._bounds=Oe(w),N(this,P)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(un(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Dn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(m){return this.options.opacity=m,this._image&&this._updateOpacity(),this},setStyle:function(m){return m.opacity&&this.setOpacity(m.opacity),this},bringToFront:function(){return this._map&&rt(this._image),this},bringToBack:function(){return this._map&&Qt(this._image),this},setUrl:function(m){return this._url=m,this._image&&(this._image.src=m),this},setBounds:function(m){return this._bounds=Oe(m),this._map&&this._reset(),this},getEvents:function(){var m={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(m.zoomanim=this._animateZoom),m},setZIndex:function(m){return this.options.zIndex=m,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var m=this._url.tagName==="IMG",w=this._image=m?this._url:Zt("img");if(un(w,"leaflet-image-layer"),this._zoomAnimated&&un(w,"leaflet-zoom-animated"),this.options.className&&un(w,this.options.className),w.onselectstart=C,w.onmousemove=C,w.onload=g(this.fire,this,"load"),w.onerror=g(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),m){this._url=w.src;return}w.src=this._url,w.alt=this.options.alt},_animateZoom:function(m){var w=this._map.getZoomScale(m.zoom),P=this._map._latLngBoundsToNewLayerBounds(this._bounds,m.zoom,m.center).min;Ae(this._image,P,w)},_reset:function(){var m=this._image,w=new oe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),P=w.getSize();xe(m,w.min),m.style.width=P.x+"px",m.style.height=P.y+"px"},_updateOpacity:function(){z(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var m=this.options.errorOverlayUrl;m&&this._url!==m&&(this._url=m,this._image.src=m)},getCenter:function(){return this._bounds.getCenter()}}),Je=function(m,w,P){return new Le(m,w,P)},Nt=Le.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var m=this._url.tagName==="VIDEO",w=this._image=m?this._url:Zt("video");if(un(w,"leaflet-image-layer"),this._zoomAnimated&&un(w,"leaflet-zoom-animated"),this.options.className&&un(w,this.options.className),w.onselectstart=C,w.onmousemove=C,w.onloadeddata=g(this.fire,this,"load"),m){for(var P=w.getElementsByTagName("source"),$=[],ne=0;ne<P.length;ne++)$.push(P[ne].src);this._url=P.length>0?$:[w.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(w.style,"objectFit")&&(w.style.objectFit="fill"),w.autoplay=!!this.options.autoplay,w.loop=!!this.options.loop,w.muted=!!this.options.muted,w.playsInline=!!this.options.playsInline;for(var ve=0;ve<this._url.length;ve++){var De=Zt("source");De.src=this._url[ve],w.appendChild(De)}}});function mt(m,w,P){return new Nt(m,w,P)}var Bt=Le.extend({_initImage:function(){var m=this._image=this._url;un(m,"leaflet-image-layer"),this._zoomAnimated&&un(m,"leaflet-zoom-animated"),this.options.className&&un(m,this.options.className),m.onselectstart=C,m.onmousemove=C}});function Ht(m,w,P){return new Bt(m,w,P)}var tn=zr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(m,w){m&&(m instanceof Ne||O(m))?(this._latlng=Ue(m),N(this,w)):(N(this,m),this._source=w),this.options.content&&(this._content=this.options.content)},openOn:function(m){return m=arguments.length?m:this._source._map,m.hasLayer(this)||m.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(m){return this._map?this.close():(arguments.length?this._source=m:m=this._source,this._prepareOpen(),this.openOn(m._map)),this},onAdd:function(m){this._zoomAnimated=m._zoomAnimated,this._container||this._initLayout(),m._fadeAnimated&&z(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),m._fadeAnimated&&z(this._container,1),this.bringToFront(),this.options.interactive&&(un(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(m){m._fadeAnimated?(z(this._container,0),this._removeTimeout=setTimeout(g(Dn,void 0,this._container),200)):Dn(this._container),this.options.interactive&&(Wn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(m){return this._latlng=Ue(m),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(m){return this._content=m,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var m={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(m.zoomanim=this._animateZoom),m},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&rt(this._container),this},bringToBack:function(){return this._map&&Qt(this._container),this},_prepareOpen:function(m){var w=this._source;if(!w._map)return!1;if(w instanceof ri){w=null;var P=this._source._layers;for(var $ in P)if(P[$]._map){w=P[$];break}if(!w)return!1;this._source=w}if(!m)if(w.getCenter)m=w.getCenter();else if(w.getLatLng)m=w.getLatLng();else if(w.getBounds)m=w.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(m),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var m=this._contentNode,w=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof w=="string")m.innerHTML=w;else{for(;m.hasChildNodes();)m.removeChild(m.firstChild);m.appendChild(w)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var m=this._map.latLngToLayerPoint(this._latlng),w=D(this.options.offset),P=this._getAnchor();this._zoomAnimated?xe(this._container,m.add(P)):w=w.add(m).add(P);var $=this._containerBottom=-w.y,ne=this._containerLeft=-Math.round(this._containerWidth/2)+w.x;this._container.style.bottom=$+"px",this._container.style.left=ne+"px"}},_getAnchor:function(){return[0,0]}});Tn.include({_initOverlay:function(m,w,P,$){var ne=w;return ne instanceof m||(ne=new m($).setContent(w)),P&&ne.setLatLng(P),ne}}),zr.include({_initOverlay:function(m,w,P,$){var ne=P;return ne instanceof m?(N(ne,$),ne._source=this):(ne=w&&!$?w:new m($,this),ne.setContent(P)),ne}});var Mn=tn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(m){return m=arguments.length?m:this._source._map,!m.hasLayer(this)&&m._popup&&m._popup.options.autoClose&&m.removeLayer(m._popup),m._popup=this,tn.prototype.openOn.call(this,m)},onAdd:function(m){tn.prototype.onAdd.call(this,m),m.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof wr||this._source.on("preclick",fn))},onRemove:function(m){tn.prototype.onRemove.call(this,m),m.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof wr||this._source.off("preclick",fn))},getEvents:function(){var m=tn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(m.preclick=this.close),this.options.keepInView&&(m.moveend=this._adjustPan),m},_initLayout:function(){var m="leaflet-popup",w=this._container=Zt("div",m+" "+(this.options.className||"")+" leaflet-zoom-animated"),P=this._wrapper=Zt("div",m+"-content-wrapper",w);if(this._contentNode=Zt("div",m+"-content",P),Sn(w),hn(this._contentNode),At(w,"contextmenu",fn),this._tipContainer=Zt("div",m+"-tip-container",w),this._tip=Zt("div",m+"-tip",this._tipContainer),this.options.closeButton){var $=this._closeButton=Zt("a",m+"-close-button",w);$.setAttribute("role","button"),$.setAttribute("aria-label","Close popup"),$.href="#close",$.innerHTML='<span aria-hidden="true">&#215;</span>',At($,"click",function(ne){Bn(ne),this.close()},this)}},_updateLayout:function(){var m=this._contentNode,w=m.style;w.width="",w.whiteSpace="nowrap";var P=m.offsetWidth;P=Math.min(P,this.options.maxWidth),P=Math.max(P,this.options.minWidth),w.width=P+1+"px",w.whiteSpace="",w.height="";var $=m.offsetHeight,ne=this.options.maxHeight,ve="leaflet-popup-scrolled";ne&&$>ne?(w.height=ne+"px",un(m,ve)):Wn(m,ve),this._containerWidth=this._container.offsetWidth},_animateZoom:function(m){var w=this._map._latLngToNewLayerPoint(this._latlng,m.zoom,m.center),P=this._getAnchor();xe(this._container,w.add(P))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var m=this._map,w=parseInt(nn(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+w,$=this._containerWidth,ne=new q(this._containerLeft,-P-this._containerBottom);ne._add(Ge(this._container));var ve=m.layerPointToContainerPoint(ne),De=D(this.options.autoPanPadding),$e=D(this.options.autoPanPaddingTopLeft||De),Ke=D(this.options.autoPanPaddingBottomRight||De),at=m.getSize(),$t=0,dn=0;ve.x+$+Ke.x>at.x&&($t=ve.x+$-at.x+Ke.x),ve.x-$t-$e.x<0&&($t=ve.x-$e.x),ve.y+P+Ke.y>at.y&&(dn=ve.y+P-at.y+Ke.y),ve.y-dn-$e.y<0&&(dn=ve.y-$e.y),($t||dn)&&(this.options.keepInView&&(this._autopanning=!0),m.fire("autopanstart").panBy([$t,dn]))}},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Hn=function(m,w){return new Mn(m,w)};Tn.mergeOptions({closePopupOnClick:!0}),Tn.include({openPopup:function(m,w,P){return this._initOverlay(Mn,m,w,P).openOn(this),this},closePopup:function(m){return m=arguments.length?m:this._popup,m&&m.close(),this}}),zr.include({bindPopup:function(m,w){return this._popup=this._initOverlay(Mn,this._popup,m,w),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(m){return this._popup&&(this instanceof ri||(this._popup._source=this),this._popup._prepareOpen(m||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(m){return this._popup&&this._popup.setContent(m),this},getPopup:function(){return this._popup},_openPopup:function(m){if(!(!this._popup||!this._map)){Cr(m);var w=m.layer||m.target;if(this._popup._source===w&&!(w instanceof wr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(m.latlng);return}this._popup._source=w,this.openPopup(m.latlng)}},_movePopup:function(m){this._popup.setLatLng(m.latlng)},_onKeyPress:function(m){m.originalEvent.keyCode===13&&this._openPopup(m)}});var Yn=tn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(m){tn.prototype.onAdd.call(this,m),this.setOpacity(this.options.opacity),m.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(m){tn.prototype.onRemove.call(this,m),m.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var m=tn.prototype.getEvents.call(this);return this.options.permanent||(m.preclick=this.close),m},_initLayout:function(){var m="leaflet-tooltip",w=m+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Zt("div",w),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(m){var w,P,$=this._map,ne=this._container,ve=$.latLngToContainerPoint($.getCenter()),De=$.layerPointToContainerPoint(m),$e=this.options.direction,Ke=ne.offsetWidth,at=ne.offsetHeight,$t=D(this.options.offset),dn=this._getAnchor();$e==="top"?(w=Ke/2,P=at):$e==="bottom"?(w=Ke/2,P=0):$e==="center"?(w=Ke/2,P=at/2):$e==="right"?(w=0,P=at/2):$e==="left"?(w=Ke,P=at/2):De.x<ve.x?($e="right",w=0,P=at/2):($e="left",w=Ke+($t.x+dn.x)*2,P=at/2),m=m.subtract(D(w,P,!0)).add($t).add(dn),Wn(ne,"leaflet-tooltip-right"),Wn(ne,"leaflet-tooltip-left"),Wn(ne,"leaflet-tooltip-top"),Wn(ne,"leaflet-tooltip-bottom"),un(ne,"leaflet-tooltip-"+$e),xe(ne,m)},_updatePosition:function(){var m=this._map.latLngToLayerPoint(this._latlng);this._setPosition(m)},setOpacity:function(m){this.options.opacity=m,this._container&&z(this._container,m)},_animateZoom:function(m){var w=this._map._latLngToNewLayerPoint(this._latlng,m.zoom,m.center);this._setPosition(w)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ar=function(m,w){return new Yn(m,w)};Tn.include({openTooltip:function(m,w,P){return this._initOverlay(Yn,m,w,P).openOn(this),this},closeTooltip:function(m){return m.close(),this}}),zr.include({bindTooltip:function(m,w){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Yn,this._tooltip,m,w),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(m){if(!(!m&&this._tooltipHandlersAdded)){var w=m?"off":"on",P={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?P.add=this._openTooltip:(P.mouseover=this._openTooltip,P.mouseout=this.closeTooltip,P.click=this._openTooltip,this._map?this._addFocusListeners():P.add=this._addFocusListeners),this._tooltip.options.sticky&&(P.mousemove=this._moveTooltip),this[w](P),this._tooltipHandlersAdded=!m}},openTooltip:function(m){return this._tooltip&&(this instanceof ri||(this._tooltip._source=this),this._tooltip._prepareOpen(m)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(m){return this._tooltip&&this._tooltip.setContent(m),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(m){var w=m.getElement();w&&(At(w,"focus",function(){this._tooltip._source=m,this.openTooltip()},this),At(w,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(m){var w=m.getElement();w&&w.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(m){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=m.layer||m.target,this.openTooltip(this._tooltip.options.sticky?m.latlng:void 0))},_moveTooltip:function(m){var w=m.latlng,P,$;this._tooltip.options.sticky&&m.originalEvent&&(P=this._map.mouseEventToContainerPoint(m.originalEvent),$=this._map.containerPointToLayerPoint(P),w=this._map.layerPointToLatLng($)),this._tooltip.setLatLng(w)}});var Er=Hr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(m){var w=m&&m.tagName==="DIV"?m:document.createElement("div"),P=this.options;if(P.html instanceof Element?($r(w),w.appendChild(P.html)):w.innerHTML=P.html!==!1?P.html:"",P.bgPos){var $=D(P.bgPos);w.style.backgroundPosition=-$.x+"px "+-$.y+"px"}return this._setIconStyles(w,"icon"),w},createShadow:function(){return null}});function cr(m){return new Er(m)}Hr.Default=rr;var Xr=zr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:me.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(m){N(this,m)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(m){m._addZoomLimit(this)},onRemove:function(m){this._removeAllTiles(),Dn(this._container),m._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(rt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Qt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(m){return this.options.opacity=m,this._updateOpacity(),this},setZIndex:function(m){return this.options.zIndex=m,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var m=this._clampZoom(this._map.getZoom());m!==this._tileZoom&&(this._tileZoom=m,this._updateLevels()),this._update()}return this},getEvents:function(){var m={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=b(this._onMoveEnd,this.options.updateInterval,this)),m.move=this._onMove),this._zoomAnimated&&(m.zoomanim=this._animateZoom),m},createTile:function(){return document.createElement("div")},getTileSize:function(){var m=this.options.tileSize;return m instanceof q?m:new q(m,m)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(m){for(var w=this.getPane().children,P=-m(-1/0,1/0),$=0,ne=w.length,ve;$<ne;$++)ve=w[$].style.zIndex,w[$]!==this._container&&ve&&(P=m(P,+ve));isFinite(P)&&(this.options.zIndex=P+m(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!me.ielt9){z(this._container,this.options.opacity);var m=+new Date,w=!1,P=!1;for(var $ in this._tiles){var ne=this._tiles[$];if(!(!ne.current||!ne.loaded)){var ve=Math.min(1,(m-ne.loaded)/200);z(ne.el,ve),ve<1?w=!0:(ne.active?P=!0:this._onOpaqueTile(ne),ne.active=!0)}}P&&!this._noPrune&&this._pruneTiles(),w&&(S(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:C,_initContainer:function(){this._container||(this._container=Zt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var m=this._tileZoom,w=this.options.maxZoom;if(m!==void 0){for(var P in this._levels)P=Number(P),this._levels[P].el.children.length||P===m?(this._levels[P].el.style.zIndex=w-Math.abs(m-P),this._onUpdateLevel(P)):(Dn(this._levels[P].el),this._removeTilesAtZoom(P),this._onRemoveLevel(P),delete this._levels[P]);var $=this._levels[m],ne=this._map;return $||($=this._levels[m]={},$.el=Zt("div","leaflet-tile-container leaflet-zoom-animated",this._container),$.el.style.zIndex=w,$.origin=ne.project(ne.unproject(ne.getPixelOrigin()),m).round(),$.zoom=m,this._setZoomTransform($,ne.getCenter(),ne.getZoom()),C($.el.offsetWidth),this._onCreateLevel($)),this._level=$,$}},_onUpdateLevel:C,_onRemoveLevel:C,_onCreateLevel:C,_pruneTiles:function(){if(this._map){var m,w,P=this._map.getZoom();if(P>this.options.maxZoom||P<this.options.minZoom){this._removeAllTiles();return}for(m in this._tiles)w=this._tiles[m],w.retain=w.current;for(m in this._tiles)if(w=this._tiles[m],w.current&&!w.active){var $=w.coords;this._retainParent($.x,$.y,$.z,$.z-5)||this._retainChildren($.x,$.y,$.z,$.z+2)}for(m in this._tiles)this._tiles[m].retain||this._removeTile(m)}},_removeTilesAtZoom:function(m){for(var w in this._tiles)this._tiles[w].coords.z===m&&this._removeTile(w)},_removeAllTiles:function(){for(var m in this._tiles)this._removeTile(m)},_invalidateAll:function(){for(var m in this._levels)Dn(this._levels[m].el),this._onRemoveLevel(Number(m)),delete this._levels[m];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(m,w,P,$){var ne=Math.floor(m/2),ve=Math.floor(w/2),De=P-1,$e=new q(+ne,+ve);$e.z=+De;var Ke=this._tileCoordsToKey($e),at=this._tiles[Ke];return at&&at.active?(at.retain=!0,!0):(at&&at.loaded&&(at.retain=!0),De>$?this._retainParent(ne,ve,De,$):!1)},_retainChildren:function(m,w,P,$){for(var ne=2*m;ne<2*m+2;ne++)for(var ve=2*w;ve<2*w+2;ve++){var De=new q(ne,ve);De.z=P+1;var $e=this._tileCoordsToKey(De),Ke=this._tiles[$e];if(Ke&&Ke.active){Ke.retain=!0;continue}else Ke&&Ke.loaded&&(Ke.retain=!0);P+1<$&&this._retainChildren(ne,ve,P+1,$)}},_resetView:function(m){var w=m&&(m.pinch||m.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),w,w)},_animateZoom:function(m){this._setView(m.center,m.zoom,!0,m.noUpdate)},_clampZoom:function(m){var w=this.options;return w.minNativeZoom!==void 0&&m<w.minNativeZoom?w.minNativeZoom:w.maxNativeZoom!==void 0&&w.maxNativeZoom<m?w.maxNativeZoom:m},_setView:function(m,w,P,$){var ne=Math.round(w);this.options.maxZoom!==void 0&&ne>this.options.maxZoom||this.options.minZoom!==void 0&&ne<this.options.minZoom?ne=void 0:ne=this._clampZoom(ne);var ve=this.options.updateWhenZooming&&ne!==this._tileZoom;(!$||ve)&&(this._tileZoom=ne,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ne!==void 0&&this._update(m),P||this._pruneTiles(),this._noPrune=!!P),this._setZoomTransforms(m,w)},_setZoomTransforms:function(m,w){for(var P in this._levels)this._setZoomTransform(this._levels[P],m,w)},_setZoomTransform:function(m,w,P){var $=this._map.getZoomScale(P,m.zoom),ne=m.origin.multiplyBy($).subtract(this._map._getNewPixelOrigin(w,P)).round();me.any3d?Ae(m.el,ne,$):xe(m.el,ne)},_resetGrid:function(){var m=this._map,w=m.options.crs,P=this._tileSize=this.getTileSize(),$=this._tileZoom,ne=this._map.getPixelWorldBounds(this._tileZoom);ne&&(this._globalTileRange=this._pxBoundsToTileRange(ne)),this._wrapX=w.wrapLng&&!this.options.noWrap&&[Math.floor(m.project([0,w.wrapLng[0]],$).x/P.x),Math.ceil(m.project([0,w.wrapLng[1]],$).x/P.y)],this._wrapY=w.wrapLat&&!this.options.noWrap&&[Math.floor(m.project([w.wrapLat[0],0],$).y/P.x),Math.ceil(m.project([w.wrapLat[1],0],$).y/P.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(m){var w=this._map,P=w._animatingZoom?Math.max(w._animateToZoom,w.getZoom()):w.getZoom(),$=w.getZoomScale(P,this._tileZoom),ne=w.project(m,this._tileZoom).floor(),ve=w.getSize().divideBy($*2);return new oe(ne.subtract(ve),ne.add(ve))},_update:function(m){var w=this._map;if(w){var P=this._clampZoom(w.getZoom());if(m===void 0&&(m=w.getCenter()),this._tileZoom!==void 0){var $=this._getTiledPixelBounds(m),ne=this._pxBoundsToTileRange($),ve=ne.getCenter(),De=[],$e=this.options.keepBuffer,Ke=new oe(ne.getBottomLeft().subtract([$e,-$e]),ne.getTopRight().add([$e,-$e]));if(!(isFinite(ne.min.x)&&isFinite(ne.min.y)&&isFinite(ne.max.x)&&isFinite(ne.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var at in this._tiles){var $t=this._tiles[at].coords;($t.z!==this._tileZoom||!Ke.contains(new q($t.x,$t.y)))&&(this._tiles[at].current=!1)}if(Math.abs(P-this._tileZoom)>1){this._setView(m,P);return}for(var dn=ne.min.y;dn<=ne.max.y;dn++)for(var On=ne.min.x;On<=ne.max.x;On++){var ti=new q(On,dn);if(ti.z=this._tileZoom,!!this._isValidTile(ti)){var di=this._tiles[this._tileCoordsToKey(ti)];di?di.current=!0:De.push(ti)}}if(De.sort(function(Di,ba){return Di.distanceTo(ve)-ba.distanceTo(ve)}),De.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var _a=document.createDocumentFragment();for(On=0;On<De.length;On++)this._addTile(De[On],_a);this._level.el.appendChild(_a)}}}},_isValidTile:function(m){var w=this._map.options.crs;if(!w.infinite){var P=this._globalTileRange;if(!w.wrapLng&&(m.x<P.min.x||m.x>P.max.x)||!w.wrapLat&&(m.y<P.min.y||m.y>P.max.y))return!1}if(!this.options.bounds)return!0;var $=this._tileCoordsToBounds(m);return Oe(this.options.bounds).overlaps($)},_keyToBounds:function(m){return this._tileCoordsToBounds(this._keyToTileCoords(m))},_tileCoordsToNwSe:function(m){var w=this._map,P=this.getTileSize(),$=m.scaleBy(P),ne=$.add(P),ve=w.unproject($,m.z),De=w.unproject(ne,m.z);return[ve,De]},_tileCoordsToBounds:function(m){var w=this._tileCoordsToNwSe(m),P=new Re(w[0],w[1]);return this.options.noWrap||(P=this._map.wrapLatLngBounds(P)),P},_tileCoordsToKey:function(m){return m.x+":"+m.y+":"+m.z},_keyToTileCoords:function(m){var w=m.split(":"),P=new q(+w[0],+w[1]);return P.z=+w[2],P},_removeTile:function(m){var w=this._tiles[m];w&&(Dn(w.el),delete this._tiles[m],this.fire("tileunload",{tile:w.el,coords:this._keyToTileCoords(m)}))},_initTile:function(m){un(m,"leaflet-tile");var w=this.getTileSize();m.style.width=w.x+"px",m.style.height=w.y+"px",m.onselectstart=C,m.onmousemove=C,me.ielt9&&this.options.opacity<1&&z(m,this.options.opacity)},_addTile:function(m,w){var P=this._getTilePos(m),$=this._tileCoordsToKey(m),ne=this.createTile(this._wrapCoords(m),g(this._tileReady,this,m));this._initTile(ne),this.createTile.length<2&&V(g(this._tileReady,this,m,null,ne)),xe(ne,P),this._tiles[$]={el:ne,coords:m,current:!0},w.appendChild(ne),this.fire("tileloadstart",{tile:ne,coords:m})},_tileReady:function(m,w,P){w&&this.fire("tileerror",{error:w,tile:P,coords:m});var $=this._tileCoordsToKey(m);P=this._tiles[$],P&&(P.loaded=+new Date,this._map._fadeAnimated?(z(P.el,0),S(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(P.active=!0,this._pruneTiles()),w||(un(P.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:P.el,coords:m})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),me.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(g(this._pruneTiles,this),250)))},_getTilePos:function(m){return m.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(m){var w=new q(this._wrapX?E(m.x,this._wrapX):m.x,this._wrapY?E(m.y,this._wrapY):m.y);return w.z=m.z,w},_pxBoundsToTileRange:function(m){var w=this.getTileSize();return new oe(m.min.unscaleBy(w).floor(),m.max.unscaleBy(w).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var m in this._tiles)if(!this._tiles[m].loaded)return!1;return!0}});function jr(m){return new Xr(m)}var kr=Xr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(m,w){this._url=m,w=N(this,w),w.detectRetina&&me.retina&&w.maxZoom>0?(w.tileSize=Math.floor(w.tileSize/2),w.zoomReverse?(w.zoomOffset--,w.minZoom=Math.min(w.maxZoom,w.minZoom+1)):(w.zoomOffset++,w.maxZoom=Math.max(w.minZoom,w.maxZoom-1)),w.minZoom=Math.max(0,w.minZoom)):w.zoomReverse?w.minZoom=Math.min(w.maxZoom,w.minZoom):w.maxZoom=Math.max(w.minZoom,w.maxZoom),typeof w.subdomains=="string"&&(w.subdomains=w.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(m,w){return this._url===m&&w===void 0&&(w=!0),this._url=m,w||this.redraw(),this},createTile:function(m,w){var P=document.createElement("img");return At(P,"load",g(this._tileOnLoad,this,w,P)),At(P,"error",g(this._tileOnError,this,w,P)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(P.referrerPolicy=this.options.referrerPolicy),P.alt="",P.src=this.getTileUrl(m),P},getTileUrl:function(m){var w={r:me.retina?"@2x":"",s:this._getSubdomain(m),x:m.x,y:m.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var P=this._globalTileRange.max.y-m.y;this.options.tms&&(w.y=P),w["-y"]=P}return F(this._url,l(w,this.options))},_tileOnLoad:function(m,w){me.ielt9?setTimeout(g(m,this,null,w),0):m(null,w)},_tileOnError:function(m,w,P){var $=this.options.errorTileUrl;$&&w.getAttribute("src")!==$&&(w.src=$),m(P,w)},_onTileRemove:function(m){m.tile.onload=null},_getZoomForUrl:function(){var m=this._tileZoom,w=this.options.maxZoom,P=this.options.zoomReverse,$=this.options.zoomOffset;return P&&(m=w-m),m+$},_getSubdomain:function(m){var w=Math.abs(m.x+m.y)%this.options.subdomains.length;return this.options.subdomains[w]},_abortLoading:function(){var m,w;for(m in this._tiles)if(this._tiles[m].coords.z!==this._tileZoom&&(w=this._tiles[m].el,w.onload=C,w.onerror=C,!w.complete)){w.src=H;var P=this._tiles[m].coords;Dn(w),delete this._tiles[m],this.fire("tileabort",{tile:w,coords:P})}},_removeTile:function(m){var w=this._tiles[m];if(w)return w.el.setAttribute("src",H),Xr.prototype._removeTile.call(this,m)},_tileReady:function(m,w,P){if(!(!this._map||P&&P.getAttribute("src")===H))return Xr.prototype._tileReady.call(this,m,w,P)}});function aa(m,w){return new kr(m,w)}var In=kr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(m,w){this._url=m;var P=l({},this.defaultWmsParams);for(var $ in w)$ in this.options||(P[$]=w[$]);w=N(this,w);var ne=w.detectRetina&&me.retina?2:1,ve=this.getTileSize();P.width=ve.x*ne,P.height=ve.y*ne,this.wmsParams=P},onAdd:function(m){this._crs=this.options.crs||m.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var w=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[w]=this._crs.code,kr.prototype.onAdd.call(this,m)},getTileUrl:function(m){var w=this._tileCoordsToNwSe(m),P=this._crs,$=Pe(P.project(w[0]),P.project(w[1])),ne=$.min,ve=$.max,De=(this._wmsVersion>=1.3&&this._crs===nr?[ne.y,ne.x,ve.y,ve.x]:[ne.x,ne.y,ve.x,ve.y]).join(","),$e=kr.prototype.getTileUrl.call(this,m);return $e+Z(this.wmsParams,$e,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+De},setParams:function(m,w){return l(this.wmsParams,m),w||this.redraw(),this}});function oa(m,w){return new In(m,w)}kr.WMS=In,aa.wms=oa;var hi=zr.extend({options:{padding:.1},initialize:function(m){N(this,m),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&un(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var m={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(m.zoomanim=this._onAnimZoom),m},_onAnimZoom:function(m){this._updateTransform(m.center,m.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(m,w){var P=this._map.getZoomScale(w,this._zoom),$=this._map.getSize().multiplyBy(.5+this.options.padding),ne=this._map.project(this._center,w),ve=$.multiplyBy(-P).add(ne).subtract(this._map._getNewPixelOrigin(m,w));me.any3d?Ae(this._container,ve,P):xe(this._container,ve)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var m in this._layers)this._layers[m]._reset()},_onZoomEnd:function(){for(var m in this._layers)this._layers[m]._project()},_updatePaths:function(){for(var m in this._layers)this._layers[m]._update()},_update:function(){var m=this.options.padding,w=this._map.getSize(),P=this._map.containerPointToLayerPoint(w.multiplyBy(-m)).round();this._bounds=new oe(P,P.add(w.multiplyBy(1+m*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Wa=hi.extend({options:{tolerance:0},getEvents:function(){var m=hi.prototype.getEvents.call(this);return m.viewprereset=this._onViewPreReset,m},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){hi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var m=this._container=document.createElement("canvas");At(m,"mousemove",this._onMouseMove,this),At(m,"click dblclick mousedown mouseup contextmenu",this._onClick,this),At(m,"mouseout",this._handleMouseOut,this),m._leaflet_disable_events=!0,this._ctx=m.getContext("2d")},_destroyContainer:function(){S(this._redrawRequest),delete this._ctx,Dn(this._container),nt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var m;this._redrawBounds=null;for(var w in this._layers)m=this._layers[w],m._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){hi.prototype._update.call(this);var m=this._bounds,w=this._container,P=m.getSize(),$=me.retina?2:1;xe(w,m.min),w.width=$*P.x,w.height=$*P.y,w.style.width=P.x+"px",w.style.height=P.y+"px",me.retina&&this._ctx.scale(2,2),this._ctx.translate(-m.min.x,-m.min.y),this.fire("update")}},_reset:function(){hi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(m){this._updateDashArray(m),this._layers[y(m)]=m;var w=m._order={layer:m,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=w),this._drawLast=w,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(m){this._requestRedraw(m)},_removePath:function(m){var w=m._order,P=w.next,$=w.prev;P?P.prev=$:this._drawLast=$,$?$.next=P:this._drawFirst=P,delete m._order,delete this._layers[y(m)],this._requestRedraw(m)},_updatePath:function(m){this._extendRedrawBounds(m),m._project(),m._update(),this._requestRedraw(m)},_updateStyle:function(m){this._updateDashArray(m),this._requestRedraw(m)},_updateDashArray:function(m){if(typeof m.options.dashArray=="string"){var w=m.options.dashArray.split(/[, ]+/),P=[],$,ne;for(ne=0;ne<w.length;ne++){if($=Number(w[ne]),isNaN($))return;P.push($)}m.options._dashArray=P}else m.options._dashArray=m.options.dashArray},_requestRedraw:function(m){this._map&&(this._extendRedrawBounds(m),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(m){if(m._pxBounds){var w=(m.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new oe,this._redrawBounds.extend(m._pxBounds.min.subtract([w,w])),this._redrawBounds.extend(m._pxBounds.max.add([w,w]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var m=this._redrawBounds;if(m){var w=m.getSize();this._ctx.clearRect(m.min.x,m.min.y,w.x,w.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var m,w=this._redrawBounds;if(this._ctx.save(),w){var P=w.getSize();this._ctx.beginPath(),this._ctx.rect(w.min.x,w.min.y,P.x,P.y),this._ctx.clip()}this._drawing=!0;for(var $=this._drawFirst;$;$=$.next)m=$.layer,(!w||m._pxBounds&&m._pxBounds.intersects(w))&&m._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(m,w){if(this._drawing){var P,$,ne,ve,De=m._parts,$e=De.length,Ke=this._ctx;if($e){for(Ke.beginPath(),P=0;P<$e;P++){for($=0,ne=De[P].length;$<ne;$++)ve=De[P][$],Ke[$?"lineTo":"moveTo"](ve.x,ve.y);w&&Ke.closePath()}this._fillStroke(Ke,m)}}},_updateCircle:function(m){if(!(!this._drawing||m._empty())){var w=m._point,P=this._ctx,$=Math.max(Math.round(m._radius),1),ne=(Math.max(Math.round(m._radiusY),1)||$)/$;ne!==1&&(P.save(),P.scale(1,ne)),P.beginPath(),P.arc(w.x,w.y/ne,$,0,Math.PI*2,!1),ne!==1&&P.restore(),this._fillStroke(P,m)}},_fillStroke:function(m,w){var P=w.options;P.fill&&(m.globalAlpha=P.fillOpacity,m.fillStyle=P.fillColor||P.color,m.fill(P.fillRule||"evenodd")),P.stroke&&P.weight!==0&&(m.setLineDash&&m.setLineDash(w.options&&w.options._dashArray||[]),m.globalAlpha=P.opacity,m.lineWidth=P.weight,m.strokeStyle=P.color,m.lineCap=P.lineCap,m.lineJoin=P.lineJoin,m.stroke())},_onClick:function(m){for(var w=this._map.mouseEventToLayerPoint(m),P,$,ne=this._drawFirst;ne;ne=ne.next)P=ne.layer,P.options.interactive&&P._containsPoint(w)&&(!(m.type==="click"||m.type==="preclick")||!this._map._draggableMoved(P))&&($=P);this._fireEvent($?[$]:!1,m)},_onMouseMove:function(m){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var w=this._map.mouseEventToLayerPoint(m);this._handleMouseHover(m,w)}},_handleMouseOut:function(m){var w=this._hoveredLayer;w&&(Wn(this._container,"leaflet-interactive"),this._fireEvent([w],m,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(m,w){if(!this._mouseHoverThrottled){for(var P,$,ne=this._drawFirst;ne;ne=ne.next)P=ne.layer,P.options.interactive&&P._containsPoint(w)&&($=P);$!==this._hoveredLayer&&(this._handleMouseOut(m),$&&(un(this._container,"leaflet-interactive"),this._fireEvent([$],m,"mouseover"),this._hoveredLayer=$)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,m),this._mouseHoverThrottled=!0,setTimeout(g(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(m,w,P){this._map._fireDOMEvent(w,P||w.type,m)},_bringToFront:function(m){var w=m._order;if(w){var P=w.next,$=w.prev;if(P)P.prev=$;else return;$?$.next=P:P&&(this._drawFirst=P),w.prev=this._drawLast,this._drawLast.next=w,w.next=null,this._drawLast=w,this._requestRedraw(m)}},_bringToBack:function(m){var w=m._order;if(w){var P=w.next,$=w.prev;if($)$.next=P;else return;P?P.prev=$:$&&(this._drawLast=$),w.prev=null,w.next=this._drawFirst,this._drawFirst.prev=w,this._drawFirst=w,this._requestRedraw(m)}}});function Sr(m){return me.canvas?new Wa(m):null}var Ki=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(m){return document.createElement("<lvml:"+m+' class="lvml">')}}catch{}return function(m){return document.createElement("<"+m+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Si={_initContainer:function(){this._container=Zt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(hi.prototype._update.call(this),this.fire("update"))},_initPath:function(m){var w=m._container=Ki("shape");un(w,"leaflet-vml-shape "+(this.options.className||"")),w.coordsize="1 1",m._path=Ki("path"),w.appendChild(m._path),this._updateStyle(m),this._layers[y(m)]=m},_addPath:function(m){var w=m._container;this._container.appendChild(w),m.options.interactive&&m.addInteractiveTarget(w)},_removePath:function(m){var w=m._container;Dn(w),m.removeInteractiveTarget(w),delete this._layers[y(m)]},_updateStyle:function(m){var w=m._stroke,P=m._fill,$=m.options,ne=m._container;ne.stroked=!!$.stroke,ne.filled=!!$.fill,$.stroke?(w||(w=m._stroke=Ki("stroke")),ne.appendChild(w),w.weight=$.weight+"px",w.color=$.color,w.opacity=$.opacity,$.dashArray?w.dashStyle=O($.dashArray)?$.dashArray.join(" "):$.dashArray.replace(/( *, *)/g," "):w.dashStyle="",w.endcap=$.lineCap.replace("butt","flat"),w.joinstyle=$.lineJoin):w&&(ne.removeChild(w),m._stroke=null),$.fill?(P||(P=m._fill=Ki("fill")),ne.appendChild(P),P.color=$.fillColor||$.color,P.opacity=$.fillOpacity):P&&(ne.removeChild(P),m._fill=null)},_updateCircle:function(m){var w=m._point.round(),P=Math.round(m._radius),$=Math.round(m._radiusY||P);this._setPath(m,m._empty()?"M0 0":"AL "+w.x+","+w.y+" "+P+","+$+" 0,"+65535*360)},_setPath:function(m,w){m._path.v=w},_bringToFront:function(m){rt(m._container)},_bringToBack:function(m){Qt(m._container)}},sa=me.vml?Ki:Ct,ua=hi.extend({_initContainer:function(){this._container=sa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Dn(this._container),nt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){hi.prototype._update.call(this);var m=this._bounds,w=m.getSize(),P=this._container;(!this._svgSize||!this._svgSize.equals(w))&&(this._svgSize=w,P.setAttribute("width",w.x),P.setAttribute("height",w.y)),xe(P,m.min),P.setAttribute("viewBox",[m.min.x,m.min.y,w.x,w.y].join(" ")),this.fire("update")}},_initPath:function(m){var w=m._path=sa("path");m.options.className&&un(w,m.options.className),m.options.interactive&&un(w,"leaflet-interactive"),this._updateStyle(m),this._layers[y(m)]=m},_addPath:function(m){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(m._path),m.addInteractiveTarget(m._path)},_removePath:function(m){Dn(m._path),m.removeInteractiveTarget(m._path),delete this._layers[y(m)]},_updatePath:function(m){m._project(),m._update()},_updateStyle:function(m){var w=m._path,P=m.options;w&&(P.stroke?(w.setAttribute("stroke",P.color),w.setAttribute("stroke-opacity",P.opacity),w.setAttribute("stroke-width",P.weight),w.setAttribute("stroke-linecap",P.lineCap),w.setAttribute("stroke-linejoin",P.lineJoin),P.dashArray?w.setAttribute("stroke-dasharray",P.dashArray):w.removeAttribute("stroke-dasharray"),P.dashOffset?w.setAttribute("stroke-dashoffset",P.dashOffset):w.removeAttribute("stroke-dashoffset")):w.setAttribute("stroke","none"),P.fill?(w.setAttribute("fill",P.fillColor||P.color),w.setAttribute("fill-opacity",P.fillOpacity),w.setAttribute("fill-rule",P.fillRule||"evenodd")):w.setAttribute("fill","none"))},_updatePoly:function(m,w){this._setPath(m,_e(m._parts,w))},_updateCircle:function(m){var w=m._point,P=Math.max(Math.round(m._radius),1),$=Math.max(Math.round(m._radiusY),1)||P,ne="a"+P+","+$+" 0 1,0 ",ve=m._empty()?"M0 0":"M"+(w.x-P)+","+w.y+ne+P*2+",0 "+ne+-P*2+",0 ";this._setPath(m,ve)},_setPath:function(m,w){m._path.setAttribute("d",w)},_bringToFront:function(m){rt(m._path)},_bringToBack:function(m){Qt(m._path)}});me.vml&&ua.include(Si);function Ra(m){return me.svg||me.vml?new ua(m):null}Tn.include({getRenderer:function(m){var w=m.options.renderer||this._getPaneRenderer(m.options.pane)||this.options.renderer||this._renderer;return w||(w=this._renderer=this._createRenderer()),this.hasLayer(w)||this.addLayer(w),w},_getPaneRenderer:function(m){if(m==="overlayPane"||m===void 0)return!1;var w=this._paneRenderers[m];return w===void 0&&(w=this._createRenderer({pane:m}),this._paneRenderers[m]=w),w},_createRenderer:function(m){return this.options.preferCanvas&&Sr(m)||Ra(m)}});var Ja=ci.extend({initialize:function(m,w){ci.prototype.initialize.call(this,this._boundsToLatLngs(m),w)},setBounds:function(m){return this.setLatLngs(this._boundsToLatLngs(m))},_boundsToLatLngs:function(m){return m=Oe(m),[m.getSouthWest(),m.getNorthWest(),m.getNorthEast(),m.getSouthEast()]}});function Fa(m,w){return new Ja(m,w)}ua.create=sa,ua.pointsToPath=_e,en.geometryToLayer=Rn,en.coordsToLatLng=ur,en.coordsToLatLngs=ii,en.latLngToCoords=Mi,en.latLngsToCoords=Ur,en.getFeature=lr,en.asFeature=fi,Tn.mergeOptions({boxZoom:!0});var Yi=Yr.extend({initialize:function(m){this._map=m,this._container=m._container,this._pane=m._panes.overlayPane,this._resetStateTimeout=0,m.on("unload",this._destroy,this)},addHooks:function(){At(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){nt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Dn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(m){if(!m.shiftKey||m.which!==1&&m.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ce(),ot(),this._startPoint=this._map.mouseEventToContainerPoint(m),At(document,{contextmenu:Cr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(m){this._moved||(this._moved=!0,this._box=Zt("div","leaflet-zoom-box",this._container),un(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(m);var w=new oe(this._point,this._startPoint),P=w.getSize();xe(this._box,w.min),this._box.style.width=P.x+"px",this._box.style.height=P.y+"px"},_finish:function(){this._moved&&(Dn(this._box),Wn(this._container,"leaflet-crosshair")),Qe(),wt(),nt(document,{contextmenu:Cr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(m){if(!(m.which!==1&&m.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(g(this._resetState,this),0);var w=new Re(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(w).fire("boxzoomend",{boxZoomBounds:w})}},_onKeyDown:function(m){m.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Tn.addInitHook("addHandler","boxZoom",Yi),Tn.mergeOptions({doubleClickZoom:!0});var Ca=Yr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(m){var w=this._map,P=w.getZoom(),$=w.options.zoomDelta,ne=m.originalEvent.shiftKey?P-$:P+$;w.options.doubleClickZoom==="center"?w.setZoom(ne):w.setZoomAround(m.containerPoint,ne)}});Tn.addInitHook("addHandler","doubleClickZoom",Ca),Tn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ya=Yr.extend({addHooks:function(){if(!this._draggable){var m=this._map;this._draggable=new xr(m._mapPane,m._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),m.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),m.on("zoomend",this._onZoomEnd,this),m.whenReady(this._onZoomEnd,this))}un(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Wn(this._map._container,"leaflet-grab"),Wn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var m=this._map;if(m._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var w=Oe(this._map.options.maxBounds);this._offsetLimit=Pe(this._map.latLngToContainerPoint(w.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(w.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;m.fire("movestart").fire("dragstart"),m.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(m){if(this._map.options.inertia){var w=this._lastTime=+new Date,P=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(P),this._times.push(w),this._prunePositions(w)}this._map.fire("move",m).fire("drag",m)},_prunePositions:function(m){for(;this._positions.length>1&&m-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var m=this._map.getSize().divideBy(2),w=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=w.subtract(m).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(m,w){return m-(m-w)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var m=this._draggable._newPos.subtract(this._draggable._startPos),w=this._offsetLimit;m.x<w.min.x&&(m.x=this._viscousLimit(m.x,w.min.x)),m.y<w.min.y&&(m.y=this._viscousLimit(m.y,w.min.y)),m.x>w.max.x&&(m.x=this._viscousLimit(m.x,w.max.x)),m.y>w.max.y&&(m.y=this._viscousLimit(m.y,w.max.y)),this._draggable._newPos=this._draggable._startPos.add(m)}},_onPreDragWrap:function(){var m=this._worldWidth,w=Math.round(m/2),P=this._initialWorldOffset,$=this._draggable._newPos.x,ne=($-w+P)%m+w-P,ve=($+w+P)%m-w-P,De=Math.abs(ne+P)<Math.abs(ve+P)?ne:ve;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=De},_onDragEnd:function(m){var w=this._map,P=w.options,$=!P.inertia||m.noInertia||this._times.length<2;if(w.fire("dragend",m),$)w.fire("moveend");else{this._prunePositions(+new Date);var ne=this._lastPos.subtract(this._positions[0]),ve=(this._lastTime-this._times[0])/1e3,De=P.easeLinearity,$e=ne.multiplyBy(De/ve),Ke=$e.distanceTo([0,0]),at=Math.min(P.inertiaMaxSpeed,Ke),$t=$e.multiplyBy(at/Ke),dn=at/(P.inertiaDeceleration*De),On=$t.multiplyBy(-dn/2).round();!On.x&&!On.y?w.fire("moveend"):(On=w._limitOffset(On,w.options.maxBounds),V(function(){w.panBy(On,{duration:dn,easeLinearity:De,noMoveStart:!0,animate:!0})}))}}});Tn.addInitHook("addHandler","dragging",ya),Tn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Xi=Yr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(m){this._map=m,this._setPanDelta(m.options.keyboardPanDelta),this._setZoomDelta(m.options.zoomDelta)},addHooks:function(){var m=this._map._container;m.tabIndex<=0&&(m.tabIndex="0"),At(m,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),nt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var m=document.body,w=document.documentElement,P=m.scrollTop||w.scrollTop,$=m.scrollLeft||w.scrollLeft;this._map._container.focus(),window.scrollTo($,P)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(m){var w=this._panKeys={},P=this.keyCodes,$,ne;for($=0,ne=P.left.length;$<ne;$++)w[P.left[$]]=[-1*m,0];for($=0,ne=P.right.length;$<ne;$++)w[P.right[$]]=[m,0];for($=0,ne=P.down.length;$<ne;$++)w[P.down[$]]=[0,m];for($=0,ne=P.up.length;$<ne;$++)w[P.up[$]]=[0,-1*m]},_setZoomDelta:function(m){var w=this._zoomKeys={},P=this.keyCodes,$,ne;for($=0,ne=P.zoomIn.length;$<ne;$++)w[P.zoomIn[$]]=m;for($=0,ne=P.zoomOut.length;$<ne;$++)w[P.zoomOut[$]]=-m},_addHooks:function(){At(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){nt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(m){if(!(m.altKey||m.ctrlKey||m.metaKey)){var w=m.keyCode,P=this._map,$;if(w in this._panKeys){if(!P._panAnim||!P._panAnim._inProgress)if($=this._panKeys[w],m.shiftKey&&($=D($).multiplyBy(3)),P.options.maxBounds&&($=P._limitOffset(D($),P.options.maxBounds)),P.options.worldCopyJump){var ne=P.wrapLatLng(P.unproject(P.project(P.getCenter()).add($)));P.panTo(ne)}else P.panBy($)}else if(w in this._zoomKeys)P.setZoom(P.getZoom()+(m.shiftKey?3:1)*this._zoomKeys[w]);else if(w===27&&P._popup&&P._popup.options.closeOnEscapeKey)P.closePopup();else return;Cr(m)}}});Tn.addInitHook("addHandler","keyboard",Xi),Tn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ba=Yr.extend({addHooks:function(){At(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){nt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(m){var w=Fi(m),P=this._map.options.wheelDebounceTime;this._delta+=w,this._lastMousePos=this._map.mouseEventToContainerPoint(m),this._startTime||(this._startTime=+new Date);var $=Math.max(P-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(g(this._performZoom,this),$),Cr(m)},_performZoom:function(){var m=this._map,w=m.getZoom(),P=this._map.options.zoomSnap||0;m._stop();var $=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ne=4*Math.log(2/(1+Math.exp(-Math.abs($))))/Math.LN2,ve=P?Math.ceil(ne/P)*P:ne,De=m._limitZoom(w+(this._delta>0?ve:-ve))-w;this._delta=0,this._startTime=null,De&&(m.options.scrollWheelZoom==="center"?m.setZoom(w+De):m.setZoomAround(this._lastMousePos,w+De))}});Tn.addInitHook("addHandler","scrollWheelZoom",Ba);var ka=600;Tn.mergeOptions({tapHold:me.touchNative&&me.safari&&me.mobile,tapTolerance:15});var Ka=Yr.extend({addHooks:function(){At(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){nt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(m){if(clearTimeout(this._holdTimeout),m.touches.length===1){var w=m.touches[0];this._startPos=this._newPos=new q(w.clientX,w.clientY),this._holdTimeout=setTimeout(g(function(){this._cancel(),this._isTapValid()&&(At(document,"touchend",Bn),At(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",w))},this),ka),At(document,"touchend touchcancel contextmenu",this._cancel,this),At(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function m(){nt(document,"touchend",Bn),nt(document,"touchend touchcancel",m)},_cancel:function(){clearTimeout(this._holdTimeout),nt(document,"touchend touchcancel contextmenu",this._cancel,this),nt(document,"touchmove",this._onMove,this)},_onMove:function(m){var w=m.touches[0];this._newPos=new q(w.clientX,w.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(m,w){var P=new MouseEvent(m,{bubbles:!0,cancelable:!0,view:window,screenX:w.screenX,screenY:w.screenY,clientX:w.clientX,clientY:w.clientY});P._simulated=!0,w.target.dispatchEvent(P)}});Tn.addInitHook("addHandler","tapHold",Ka),Tn.mergeOptions({touchZoom:me.touch,bounceAtZoomLimits:!0});var Ya=Yr.extend({addHooks:function(){un(this._map._container,"leaflet-touch-zoom"),At(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Wn(this._map._container,"leaflet-touch-zoom"),nt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(m){var w=this._map;if(!(!m.touches||m.touches.length!==2||w._animatingZoom||this._zooming)){var P=w.mouseEventToContainerPoint(m.touches[0]),$=w.mouseEventToContainerPoint(m.touches[1]);this._centerPoint=w.getSize()._divideBy(2),this._startLatLng=w.containerPointToLatLng(this._centerPoint),w.options.touchZoom!=="center"&&(this._pinchStartLatLng=w.containerPointToLatLng(P.add($)._divideBy(2))),this._startDist=P.distanceTo($),this._startZoom=w.getZoom(),this._moved=!1,this._zooming=!0,w._stop(),At(document,"touchmove",this._onTouchMove,this),At(document,"touchend touchcancel",this._onTouchEnd,this),Bn(m)}},_onTouchMove:function(m){if(!(!m.touches||m.touches.length!==2||!this._zooming)){var w=this._map,P=w.mouseEventToContainerPoint(m.touches[0]),$=w.mouseEventToContainerPoint(m.touches[1]),ne=P.distanceTo($)/this._startDist;if(this._zoom=w.getScaleZoom(ne,this._startZoom),!w.options.bounceAtZoomLimits&&(this._zoom<w.getMinZoom()&&ne<1||this._zoom>w.getMaxZoom()&&ne>1)&&(this._zoom=w._limitZoom(this._zoom)),w.options.touchZoom==="center"){if(this._center=this._startLatLng,ne===1)return}else{var ve=P._add($)._divideBy(2)._subtract(this._centerPoint);if(ne===1&&ve.x===0&&ve.y===0)return;this._center=w.unproject(w.project(this._pinchStartLatLng,this._zoom).subtract(ve),this._zoom)}this._moved||(w._moveStart(!0,!1),this._moved=!0),S(this._animRequest);var De=g(w._move,w,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(De,this,!0),Bn(m)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,S(this._animRequest),nt(document,"touchmove",this._onTouchMove,this),nt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Tn.addInitHook("addHandler","touchZoom",Ya),Tn.BoxZoom=Yi,Tn.DoubleClickZoom=Ca,Tn.Drag=ya,Tn.Keyboard=Xi,Tn.ScrollWheelZoom=Ba,Tn.TapHold=Ka,Tn.TouchZoom=Ya,t.Bounds=oe,t.Browser=me,t.CRS=Ze,t.Canvas=Wa,t.Circle=mr,t.CircleMarker=li,t.Class=G,t.Control=Gr,t.DivIcon=Er,t.DivOverlay=tn,t.DomEvent=Vr,t.DomUtil=Vt,t.Draggable=xr,t.Evented=fe,t.FeatureGroup=ri,t.GeoJSON=en,t.GridLayer=Xr,t.Handler=Yr,t.Icon=Hr,t.ImageOverlay=Le,t.LatLng=Ne,t.LatLngBounds=Re,t.Layer=zr,t.LayerGroup=ui,t.LineUtil=qi,t.Map=Tn,t.Marker=pr,t.Mixin=ga,t.Path=wr,t.Point=q,t.PolyUtil=oi,t.Polygon=ci,t.Polyline=er,t.Popup=Mn,t.PosAnimation=ea,t.Projection=Sa,t.Rectangle=Ja,t.Renderer=hi,t.SVG=ua,t.SVGOverlay=Bt,t.TileLayer=kr,t.Tooltip=Yn,t.Transformation=ft,t.Util=T,t.VideoOverlay=Nt,t.bind=g,t.bounds=Pe,t.canvas=Sr,t.circle=ir,t.circleMarker=Ot,t.control=sr,t.divIcon=cr,t.extend=l,t.featureGroup=Li,t.geoJSON=W,t.geoJson=ye,t.gridLayer=jr,t.icon=Nr,t.imageOverlay=Je,t.latLng=Ue,t.latLngBounds=Oe,t.layerGroup=Wi,t.map=yi,t.marker=Ai,t.point=D,t.polygon=va,t.polyline=Ei,t.popup=Hn,t.rectangle=Fa,t.setOptions=N,t.stamp=y,t.svg=Ra,t.svgOverlay=Ht,t.tileLayer=aa,t.tooltip=ar,t.transformation=He,t.version=a,t.videoOverlay=mt;var Ar=window.L;t.noConflict=function(){return window.L=Ar,this},window.L=t})})(leafletSrc,leafletSrcExports);var earthRadius=63710088e-1,factors$1={centimeters:earthRadius*100,centimetres:earthRadius*100,degrees:earthRadius/111325,feet:earthRadius*3.28084,inches:earthRadius*39.37,kilometers:earthRadius/1e3,kilometres:earthRadius/1e3,meters:earthRadius,metres:earthRadius,miles:earthRadius/1609.344,millimeters:earthRadius*1e3,millimetres:earthRadius*1e3,nauticalmiles:earthRadius/1852,radians:1,yards:earthRadius*1.0936},unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/earthRadius,yards:1.0936133},areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function feature$2(n,e,t){t===void 0&&(t={});var a={type:"Feature"};return(t.id===0||t.id)&&(a.id=t.id),t.bbox&&(a.bbox=t.bbox),a.properties=e||{},a.geometry=n,a}function geometry$1(n,e,t){switch(n){case"Point":return point$d(e).geometry;case"LineString":return lineString(e).geometry;case"Polygon":return polygon$8(e).geometry;case"MultiPoint":return multiPoint(e).geometry;case"MultiLineString":return multiLineString(e).geometry;case"MultiPolygon":return multiPolygon(e).geometry;default:throw new Error(n+" is invalid")}}function point$d(n,e,t){if(t===void 0&&(t={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$1(n[0])||!isNumber$1(n[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:n};return feature$2(a,e,t)}function points(n,e,t){return t===void 0&&(t={}),featureCollection$6(n.map(function(a){return point$d(a,e)}),t)}function polygon$8(n,e,t){t===void 0&&(t={});for(var a=0,l=n;a<l.length;a++){var h=l[a];if(h.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<h[h.length-1].length;g++)if(h[h.length-1][g]!==h[0][g])throw new Error("First and last Position are not equivalent.")}var p={type:"Polygon",coordinates:n};return feature$2(p,e,t)}function polygons(n,e,t){return t===void 0&&(t={}),featureCollection$6(n.map(function(a){return polygon$8(a,e)}),t)}function lineString(n,e,t){if(t===void 0&&(t={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");var a={type:"LineString",coordinates:n};return feature$2(a,e,t)}function lineStrings(n,e,t){return t===void 0&&(t={}),featureCollection$6(n.map(function(a){return lineString(a,e)}),t)}function featureCollection$6(n,e){e===void 0&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function multiLineString(n,e,t){t===void 0&&(t={});var a={type:"MultiLineString",coordinates:n};return feature$2(a,e,t)}function multiPoint(n,e,t){t===void 0&&(t={});var a={type:"MultiPoint",coordinates:n};return feature$2(a,e,t)}function multiPolygon(n,e,t){t===void 0&&(t={});var a={type:"MultiPolygon",coordinates:n};return feature$2(a,e,t)}function geometryCollection(n,e,t){t===void 0&&(t={});var a={type:"GeometryCollection",geometries:n};return feature$2(a,e,t)}function round(n,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,e||0);return Math.round(n*t)/t}function radiansToLength(n,e){e===void 0&&(e="kilometers");var t=factors$1[e];if(!t)throw new Error(e+" units is invalid");return n*t}function lengthToRadians(n,e){e===void 0&&(e="kilometers");var t=factors$1[e];if(!t)throw new Error(e+" units is invalid");return n/t}function lengthToDegrees(n,e){return radiansToDegrees(lengthToRadians(n,e))}function bearingToAzimuth(n){var e=n%360;return e<0&&(e+=360),e}function radiansToDegrees(n){var e=n%(2*Math.PI);return e*180/Math.PI}function degreesToRadians(n){var e=n%360;return e*Math.PI/180}function convertLength(n,e,t){if(e===void 0&&(e="kilometers"),t===void 0&&(t="kilometers"),!(n>=0))throw new Error("length must be a positive number");return radiansToLength(lengthToRadians(n,e),t)}function convertArea(n,e,t){if(e===void 0&&(e="meters"),t===void 0&&(t="kilometers"),!(n>=0))throw new Error("area must be a positive number");var a=areaFactors[e];if(!a)throw new Error("invalid original units");var l=areaFactors[t];if(!l)throw new Error("invalid final units");return n/a*l}function isNumber$1(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function isObject$4(n){return!!n&&n.constructor===Object}function validateBBox(n){if(!n)throw new Error("bbox is required");if(!Array.isArray(n))throw new Error("bbox must be an Array");if(n.length!==4&&n.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");n.forEach(function(e){if(!isNumber$1(e))throw new Error("bbox must only contain numbers")})}function validateId(n){if(!n)throw new Error("id is required");if(["string","number"].indexOf(typeof n)===-1)throw new Error("id must be a number or a string")}const es$2=Object.freeze(Object.defineProperty({__proto__:null,areaFactors,bearingToAzimuth,convertArea,convertLength,degreesToRadians,earthRadius,factors:factors$1,feature:feature$2,featureCollection:featureCollection$6,geometry:geometry$1,geometryCollection,isNumber:isNumber$1,isObject:isObject$4,lengthToDegrees,lengthToRadians,lineString,lineStrings,multiLineString,multiPoint,multiPolygon,point:point$d,points,polygon:polygon$8,polygons,radiansToDegrees,radiansToLength,round,unitsFactors,validateBBox,validateId},Symbol.toStringTag,{value:"Module"}));function coordEach$2(n,e,t){if(n!==null)for(var a,l,h,g,p,y,b,E=0,C=0,A,B=n.type,M=B==="FeatureCollection",N=B==="Feature",Z=M?n.features.length:1,ee=0;ee<Z;ee++){b=M?n.features[ee].geometry:N?n.geometry:n,A=b?b.type==="GeometryCollection":!1,p=A?b.geometries.length:1;for(var F=0;F<p;F++){var O=0,k=0;if(g=A?b.geometries[F]:b,g!==null){y=g.coordinates;var H=g.type;switch(E=t&&(H==="Polygon"||H==="MultiPolygon")?1:0,H){case null:break;case"Point":if(e(y,C,ee,O,k)===!1)return!1;C++,O++;break;case"LineString":case"MultiPoint":for(a=0;a<y.length;a++){if(e(y[a],C,ee,O,k)===!1)return!1;C++,H==="MultiPoint"&&O++}H==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(a=0;a<y.length;a++){for(l=0;l<y[a].length-E;l++){if(e(y[a][l],C,ee,O,k)===!1)return!1;C++}H==="MultiLineString"&&O++,H==="Polygon"&&k++}H==="Polygon"&&O++;break;case"MultiPolygon":for(a=0;a<y.length;a++){for(k=0,l=0;l<y[a].length;l++){for(h=0;h<y[a][l].length-E;h++){if(e(y[a][l][h],C,ee,O,k)===!1)return!1;C++}k++}O++}break;case"GeometryCollection":for(a=0;a<g.geometries.length;a++)if(coordEach$2(g.geometries[a],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function coordReduce$1(n,e,t,a){var l=t;return coordEach$2(n,function(h,g,p,y,b){g===0&&t===void 0?l=h:l=e(l,h,g,p,y,b)},a),l}function propEach$1(n,e){var t;switch(n.type){case"FeatureCollection":for(t=0;t<n.features.length&&e(n.features[t].properties,t)!==!1;t++);break;case"Feature":e(n.properties,0);break}}function propReduce$1(n,e,t){var a=t;return propEach$1(n,function(l,h){h===0&&t===void 0?a=l:a=e(a,l,h)}),a}function featureEach$2(n,e){if(n.type==="Feature")e(n,0);else if(n.type==="FeatureCollection")for(var t=0;t<n.features.length&&e(n.features[t],t)!==!1;t++);}function featureReduce(n,e,t){var a=t;return featureEach$2(n,function(l,h){h===0&&t===void 0?a=l:a=e(a,l,h)}),a}function coordAll$1(n){var e=[];return coordEach$2(n,function(t){e.push(t)}),e}function geomEach(n,e){var t,a,l,h,g,p,y,b,E,C,A=0,B=n.type==="FeatureCollection",M=n.type==="Feature",N=B?n.features.length:1;for(t=0;t<N;t++){for(p=B?n.features[t].geometry:M?n.geometry:n,b=B?n.features[t].properties:M?n.properties:{},E=B?n.features[t].bbox:M?n.bbox:void 0,C=B?n.features[t].id:M?n.id:void 0,y=p?p.type==="GeometryCollection":!1,g=y?p.geometries.length:1,l=0;l<g;l++){if(h=y?p.geometries[l]:p,h===null){if(e(null,A,b,E,C)===!1)return!1;continue}switch(h.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(h,A,b,E,C)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<h.geometries.length;a++)if(e(h.geometries[a],A,b,E,C)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}A++}}function geomReduce(n,e,t){var a=t;return geomEach(n,function(l,h,g,p,y){h===0&&t===void 0?a=l:a=e(a,l,h,g,p,y)}),a}function flattenEach(n,e){geomEach(n,function(t,a,l,h,g){var p=t===null?null:t.type;switch(p){case null:case"Point":case"LineString":case"Polygon":return e(feature$2(t,l,{bbox:h,id:g}),a,0)===!1?!1:void 0}var y;switch(p){case"MultiPoint":y="Point";break;case"MultiLineString":y="LineString";break;case"MultiPolygon":y="Polygon";break}for(var b=0;b<t.coordinates.length;b++){var E=t.coordinates[b],C={type:y,coordinates:E};if(e(feature$2(C,l),a,b)===!1)return!1}})}function flattenReduce(n,e,t){var a=t;return flattenEach(n,function(l,h,g){h===0&&g===0&&t===void 0?a=l:a=e(a,l,h,g)}),a}function segmentEach(n,e){flattenEach(n,function(t,a,l){var h=0;if(t.geometry){var g=t.geometry.type;if(!(g==="Point"||g==="MultiPoint")){var p,y=0,b=0,E=0;if(coordEach$2(t,function(C,A,B,M,N){if(p===void 0||a>y||M>b||N>E){p=C,y=a,b=M,E=N,h=0;return}var Z=lineString([p,C],t.properties);if(e(Z,a,l,N,h)===!1)return!1;h++,p=C})===!1)return!1}}})}function segmentReduce(n,e,t){var a=t,l=!1;return segmentEach(n,function(h,g,p,y,b){l===!1&&t===void 0?a=h:a=e(a,h,g,p,y,b),l=!0}),a}function lineEach(n,e){if(!n)throw new Error("geojson is required");flattenEach(n,function(t,a,l){if(t.geometry!==null){var h=t.geometry.type,g=t.geometry.coordinates;switch(h){case"LineString":if(e(t,a,l,0,0)===!1)return!1;break;case"Polygon":for(var p=0;p<g.length;p++)if(e(lineString(g[p],t.properties),a,l,p)===!1)return!1;break}}})}function lineReduce(n,e,t){var a=t;return lineEach(n,function(l,h,g,p){h===0&&t===void 0?a=l:a=e(a,l,h,g,p)}),a}function findSegment(n,e){if(e=e||{},!isObject$4(e))throw new Error("options is invalid");var t=e.featureIndex||0,a=e.multiFeatureIndex||0,l=e.geometryIndex||0,h=e.segmentIndex||0,g=e.properties,p;switch(n.type){case"FeatureCollection":t<0&&(t=n.features.length+t),g=g||n.features[t].properties,p=n.features[t].geometry;break;case"Feature":g=g||n.properties,p=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":p=n;break;default:throw new Error("geojson is invalid")}if(p===null)return null;var y=p.coordinates;switch(p.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=y.length+h-1),lineString([y[h],y[h+1]],g,e);case"Polygon":return l<0&&(l=y.length+l),h<0&&(h=y[l].length+h-1),lineString([y[l][h],y[l][h+1]],g,e);case"MultiLineString":return a<0&&(a=y.length+a),h<0&&(h=y[a].length+h-1),lineString([y[a][h],y[a][h+1]],g,e);case"MultiPolygon":return a<0&&(a=y.length+a),l<0&&(l=y[a].length+l),h<0&&(h=y[a][l].length-h-1),lineString([y[a][l][h],y[a][l][h+1]],g,e)}throw new Error("geojson is invalid")}function findPoint(n,e){if(e=e||{},!isObject$4(e))throw new Error("options is invalid");var t=e.featureIndex||0,a=e.multiFeatureIndex||0,l=e.geometryIndex||0,h=e.coordIndex||0,g=e.properties,p;switch(n.type){case"FeatureCollection":t<0&&(t=n.features.length+t),g=g||n.features[t].properties,p=n.features[t].geometry;break;case"Feature":g=g||n.properties,p=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":p=n;break;default:throw new Error("geojson is invalid")}if(p===null)return null;var y=p.coordinates;switch(p.type){case"Point":return point$d(y,g,e);case"MultiPoint":return a<0&&(a=y.length+a),point$d(y[a],g,e);case"LineString":return h<0&&(h=y.length+h),point$d(y[h],g,e);case"Polygon":return l<0&&(l=y.length+l),h<0&&(h=y[l].length+h),point$d(y[l][h],g,e);case"MultiLineString":return a<0&&(a=y.length+a),h<0&&(h=y[a].length+h),point$d(y[a][h],g,e);case"MultiPolygon":return a<0&&(a=y.length+a),l<0&&(l=y[a].length+l),h<0&&(h=y[a][l].length-h),point$d(y[a][l][h],g,e)}throw new Error("geojson is invalid")}const es$1=Object.freeze(Object.defineProperty({__proto__:null,coordAll:coordAll$1,coordEach:coordEach$2,coordReduce:coordReduce$1,featureEach:featureEach$2,featureReduce,findPoint,findSegment,flattenEach,flattenReduce,geomEach,geomReduce,lineEach,lineReduce,propEach:propEach$1,propReduce:propReduce$1,segmentEach,segmentReduce},Symbol.toStringTag,{value:"Module"}));function bbox$4(n){var e=[1/0,1/0,-1/0,-1/0];return coordEach$2(n,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}bbox$4.default=bbox$4;const es=Object.freeze(Object.defineProperty({__proto__:null,default:bbox$4},Symbol.toStringTag,{value:"Module"}));function getCoord$4(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return n.geometry.coordinates;if(n.type==="Point")return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function getCoords(n){if(Array.isArray(n))return n;if(n.type==="Feature"){if(n.geometry!==null)return n.geometry.coordinates}else if(n.coordinates)return n.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function getGeom(n){return n.type==="Feature"?n.geometry:n}function getType(n,e){return n.type==="FeatureCollection"?"FeatureCollection":n.type==="GeometryCollection"?"GeometryCollection":n.type==="Feature"&&n.geometry!==null?n.geometry.type:n.type}var concavemanExports={},concaveman$1={get exports(){return concavemanExports},set exports(n){concavemanExports=n}},rbush_minExports$1={},rbush_min$1={get exports(){return rbush_minExports$1},set exports(n){rbush_minExports$1=n}};(function(n,e){(function(t,a){n.exports=a()})(commonjsGlobal,function(){function t(F,O,k,H,ce){(function U(te,re,ue,V,S){for(;V>ue;){if(V-ue>600){var T=V-ue+1,G=re-ue+1,Q=Math.log(T),le=.5*Math.exp(2*Q/3),fe=.5*Math.sqrt(Q*le*(T-le)/T)*(G-T/2<0?-1:1),q=Math.max(ue,Math.floor(re-G*le/T+fe)),se=Math.min(V,Math.floor(re+(T-G)*le/T+fe));U(te,re,q,se,S)}var D=te[re],oe=ue,Pe=V;for(a(te,ue,re),S(te[V],D)>0&&a(te,ue,V);oe<Pe;){for(a(te,oe,Pe),oe++,Pe--;S(te[oe],D)<0;)oe++;for(;S(te[Pe],D)>0;)Pe--}S(te[ue],D)===0?a(te,ue,Pe):a(te,++Pe,V),Pe<=re&&(ue=Pe+1),re<=Pe&&(V=Pe-1)}})(F,O,k||0,H||F.length-1,ce||l)}function a(F,O,k){var H=F[O];F[O]=F[k],F[k]=H}function l(F,O){return F<O?-1:F>O?1:0}var h=function(F){F===void 0&&(F=9),this._maxEntries=Math.max(4,F),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function g(F,O,k){if(!k)return O.indexOf(F);for(var H=0;H<O.length;H++)if(k(F,O[H]))return H;return-1}function p(F,O){y(F,0,F.children.length,O,F)}function y(F,O,k,H,ce){ce||(ce=Z(null)),ce.minX=1/0,ce.minY=1/0,ce.maxX=-1/0,ce.maxY=-1/0;for(var U=O;U<k;U++){var te=F.children[U];b(ce,F.leaf?H(te):te)}return ce}function b(F,O){return F.minX=Math.min(F.minX,O.minX),F.minY=Math.min(F.minY,O.minY),F.maxX=Math.max(F.maxX,O.maxX),F.maxY=Math.max(F.maxY,O.maxY),F}function E(F,O){return F.minX-O.minX}function C(F,O){return F.minY-O.minY}function A(F){return(F.maxX-F.minX)*(F.maxY-F.minY)}function B(F){return F.maxX-F.minX+(F.maxY-F.minY)}function M(F,O){return F.minX<=O.minX&&F.minY<=O.minY&&O.maxX<=F.maxX&&O.maxY<=F.maxY}function N(F,O){return O.minX<=F.maxX&&O.minY<=F.maxY&&O.maxX>=F.minX&&O.maxY>=F.minY}function Z(F){return{children:F,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ee(F,O,k,H,ce){for(var U=[O,k];U.length;)if(!((k=U.pop())-(O=U.pop())<=H)){var te=O+Math.ceil((k-O)/H/2)*H;t(F,te,O,k,ce),U.push(O,te,te,k)}}return h.prototype.all=function(){return this._all(this.data,[])},h.prototype.search=function(F){var O=this.data,k=[];if(!N(F,O))return k;for(var H=this.toBBox,ce=[];O;){for(var U=0;U<O.children.length;U++){var te=O.children[U],re=O.leaf?H(te):te;N(F,re)&&(O.leaf?k.push(te):M(F,re)?this._all(te,k):ce.push(te))}O=ce.pop()}return k},h.prototype.collides=function(F){var O=this.data;if(!N(F,O))return!1;for(var k=[];O;){for(var H=0;H<O.children.length;H++){var ce=O.children[H],U=O.leaf?this.toBBox(ce):ce;if(N(F,U)){if(O.leaf||M(F,U))return!0;k.push(ce)}}O=k.pop()}return!1},h.prototype.load=function(F){if(!F||!F.length)return this;if(F.length<this._minEntries){for(var O=0;O<F.length;O++)this.insert(F[O]);return this}var k=this._build(F.slice(),0,F.length-1,0);if(this.data.children.length)if(this.data.height===k.height)this._splitRoot(this.data,k);else{if(this.data.height<k.height){var H=this.data;this.data=k,k=H}this._insert(k,this.data.height-k.height-1,!0)}else this.data=k;return this},h.prototype.insert=function(F){return F&&this._insert(F,this.data.height-1),this},h.prototype.clear=function(){return this.data=Z([]),this},h.prototype.remove=function(F,O){if(!F)return this;for(var k,H,ce,U=this.data,te=this.toBBox(F),re=[],ue=[];U||re.length;){if(U||(U=re.pop(),H=re[re.length-1],k=ue.pop(),ce=!0),U.leaf){var V=g(F,U.children,O);if(V!==-1)return U.children.splice(V,1),re.push(U),this._condense(re),this}ce||U.leaf||!M(U,te)?H?(k++,U=H.children[k],ce=!1):U=null:(re.push(U),ue.push(k),k=0,H=U,U=U.children[0])}return this},h.prototype.toBBox=function(F){return F},h.prototype.compareMinX=function(F,O){return F.minX-O.minX},h.prototype.compareMinY=function(F,O){return F.minY-O.minY},h.prototype.toJSON=function(){return this.data},h.prototype.fromJSON=function(F){return this.data=F,this},h.prototype._all=function(F,O){for(var k=[];F;)F.leaf?O.push.apply(O,F.children):k.push.apply(k,F.children),F=k.pop();return O},h.prototype._build=function(F,O,k,H){var ce,U=k-O+1,te=this._maxEntries;if(U<=te)return p(ce=Z(F.slice(O,k+1)),this.toBBox),ce;H||(H=Math.ceil(Math.log(U)/Math.log(te)),te=Math.ceil(U/Math.pow(te,H-1))),(ce=Z([])).leaf=!1,ce.height=H;var re=Math.ceil(U/te),ue=re*Math.ceil(Math.sqrt(te));ee(F,O,k,ue,this.compareMinX);for(var V=O;V<=k;V+=ue){var S=Math.min(V+ue-1,k);ee(F,V,S,re,this.compareMinY);for(var T=V;T<=S;T+=re){var G=Math.min(T+re-1,S);ce.children.push(this._build(F,T,G,H-1))}}return p(ce,this.toBBox),ce},h.prototype._chooseSubtree=function(F,O,k,H){for(;H.push(O),!O.leaf&&H.length-1!==k;){for(var ce=1/0,U=1/0,te=void 0,re=0;re<O.children.length;re++){var ue=O.children[re],V=A(ue),S=(T=F,G=ue,(Math.max(G.maxX,T.maxX)-Math.min(G.minX,T.minX))*(Math.max(G.maxY,T.maxY)-Math.min(G.minY,T.minY))-V);S<U?(U=S,ce=V<ce?V:ce,te=ue):S===U&&V<ce&&(ce=V,te=ue)}O=te||O.children[0]}var T,G;return O},h.prototype._insert=function(F,O,k){var H=k?F:this.toBBox(F),ce=[],U=this._chooseSubtree(H,this.data,O,ce);for(U.children.push(F),b(U,H);O>=0&&ce[O].children.length>this._maxEntries;)this._split(ce,O),O--;this._adjustParentBBoxes(H,ce,O)},h.prototype._split=function(F,O){var k=F[O],H=k.children.length,ce=this._minEntries;this._chooseSplitAxis(k,ce,H);var U=this._chooseSplitIndex(k,ce,H),te=Z(k.children.splice(U,k.children.length-U));te.height=k.height,te.leaf=k.leaf,p(k,this.toBBox),p(te,this.toBBox),O?F[O-1].children.push(te):this._splitRoot(k,te)},h.prototype._splitRoot=function(F,O){this.data=Z([F,O]),this.data.height=F.height+1,this.data.leaf=!1,p(this.data,this.toBBox)},h.prototype._chooseSplitIndex=function(F,O,k){for(var H,ce,U,te,re,ue,V,S=1/0,T=1/0,G=O;G<=k-O;G++){var Q=y(F,0,G,this.toBBox),le=y(F,G,k,this.toBBox),fe=(ce=Q,U=le,te=void 0,re=void 0,ue=void 0,V=void 0,te=Math.max(ce.minX,U.minX),re=Math.max(ce.minY,U.minY),ue=Math.min(ce.maxX,U.maxX),V=Math.min(ce.maxY,U.maxY),Math.max(0,ue-te)*Math.max(0,V-re)),q=A(Q)+A(le);fe<S?(S=fe,H=G,T=q<T?q:T):fe===S&&q<T&&(T=q,H=G)}return H||k-O},h.prototype._chooseSplitAxis=function(F,O,k){var H=F.leaf?this.compareMinX:E,ce=F.leaf?this.compareMinY:C;this._allDistMargin(F,O,k,H)<this._allDistMargin(F,O,k,ce)&&F.children.sort(H)},h.prototype._allDistMargin=function(F,O,k,H){F.children.sort(H);for(var ce=this.toBBox,U=y(F,0,O,ce),te=y(F,k-O,k,ce),re=B(U)+B(te),ue=O;ue<k-O;ue++){var V=F.children[ue];b(U,F.leaf?ce(V):V),re+=B(U)}for(var S=k-O-1;S>=O;S--){var T=F.children[S];b(te,F.leaf?ce(T):T),re+=B(te)}return re},h.prototype._adjustParentBBoxes=function(F,O,k){for(var H=k;H>=0;H--)b(O[H],F)},h.prototype._condense=function(F){for(var O=F.length-1,k=void 0;O>=0;O--)F[O].children.length===0?O>0?(k=F[O-1].children).splice(k.indexOf(F[O]),1):this.clear():p(F[O],this.toBBox)},h})})(rbush_min$1);class TinyQueue{constructor(e=[],t=defaultCompare){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:a}=this,l=t[e];for(;e>0;){const h=e-1>>1,g=t[h];if(a(l,g)>=0)break;t[e]=g,e=h}t[e]=l}_down(e){const{data:t,compare:a}=this,l=this.length>>1,h=t[e];for(;e<l;){let g=(e<<1)+1,p=t[g];const y=g+1;if(y<this.length&&a(t[y],p)<0&&(g=y,p=t[y]),a(p,h)>=0)break;t[e]=p,e=g}t[e]=h}}function defaultCompare(n,e){return n<e?-1:n>e?1:0}const tinyqueue=Object.freeze(Object.defineProperty({__proto__:null,default:TinyQueue},Symbol.toStringTag,{value:"Module"})),require$$1$1=getAugmentedNamespace(tinyqueue);var pointInPolygonExports={},pointInPolygon$1={get exports(){return pointInPolygonExports},set exports(n){pointInPolygonExports=n}},flat=function(e,t,a,l){var h=e[0],g=e[1],p=!1;a===void 0&&(a=0),l===void 0&&(l=t.length);for(var y=(l-a)/2,b=0,E=y-1;b<y;E=b++){var C=t[a+b*2+0],A=t[a+b*2+1],B=t[a+E*2+0],M=t[a+E*2+1],N=A>g!=M>g&&h<(B-C)*(g-A)/(M-A)+C;N&&(p=!p)}return p},nested=function(e,t,a,l){var h=e[0],g=e[1],p=!1;a===void 0&&(a=0),l===void 0&&(l=t.length);for(var y=l-a,b=0,E=y-1;b<y;E=b++){var C=t[b+a][0],A=t[b+a][1],B=t[E+a][0],M=t[E+a][1],N=A>g!=M>g&&h<(B-C)*(g-A)/(M-A)+C;N&&(p=!p)}return p},pointInPolygonFlat=flat,pointInPolygonNested=nested;pointInPolygon$1.exports=function(e,t,a,l){return t.length>0&&Array.isArray(t[0])?pointInPolygonNested(e,t,a,l):pointInPolygonFlat(e,t,a,l)};pointInPolygonExports.nested=pointInPolygonNested;pointInPolygonExports.flat=pointInPolygonFlat;var orient2d_minExports={},orient2d_min={get exports(){return orient2d_minExports},set exports(n){orient2d_minExports=n}};(function(n,e){(function(t,a){a(e)})(commonjsGlobal,function(t){const l=33306690738754706e-32;function h(N,Z,ee,F,O){let k,H,ce,U,te=Z[0],re=F[0],ue=0,V=0;re>te==re>-te?(k=te,te=Z[++ue]):(k=re,re=F[++V]);let S=0;if(ue<N&&V<ee)for(re>te==re>-te?(ce=k-((H=te+k)-te),te=Z[++ue]):(ce=k-((H=re+k)-re),re=F[++V]),k=H,ce!==0&&(O[S++]=ce);ue<N&&V<ee;)re>te==re>-te?(ce=k-((H=k+te)-(U=H-k))+(te-U),te=Z[++ue]):(ce=k-((H=k+re)-(U=H-k))+(re-U),re=F[++V]),k=H,ce!==0&&(O[S++]=ce);for(;ue<N;)ce=k-((H=k+te)-(U=H-k))+(te-U),te=Z[++ue],k=H,ce!==0&&(O[S++]=ce);for(;V<ee;)ce=k-((H=k+re)-(U=H-k))+(re-U),re=F[++V],k=H,ce!==0&&(O[S++]=ce);return k===0&&S!==0||(O[S++]=k),S}function g(N){return new Float64Array(N)}const p=33306690738754716e-32,y=22204460492503146e-32,b=11093356479670487e-47,E=g(4),C=g(8),A=g(12),B=g(16),M=g(4);t.orient2d=function(N,Z,ee,F,O,k){const H=(Z-k)*(ee-O),ce=(N-O)*(F-k),U=H-ce;if(H===0||ce===0||H>0!=ce>0)return U;const te=Math.abs(H+ce);return Math.abs(U)>=p*te?U:-function(re,ue,V,S,T,G,Q){let le,fe,q,se,D,oe,Pe,Re,Oe,Ne,Ue,Ze,bt,it,ut,ft,He,Mt;const wn=re-T,Ct=V-T,_e=ue-G,Y=S-G;D=(ut=(Re=wn-(Pe=(oe=134217729*wn)-(oe-wn)))*(Ne=Y-(Oe=(oe=134217729*Y)-(oe-Y)))-((it=wn*Y)-Pe*Oe-Re*Oe-Pe*Ne))-(Ue=ut-(He=(Re=_e-(Pe=(oe=134217729*_e)-(oe-_e)))*(Ne=Ct-(Oe=(oe=134217729*Ct)-(oe-Ct)))-((ft=_e*Ct)-Pe*Oe-Re*Oe-Pe*Ne))),E[0]=ut-(Ue+D)+(D-He),D=(bt=it-((Ze=it+Ue)-(D=Ze-it))+(Ue-D))-(Ue=bt-ft),E[1]=bt-(Ue+D)+(D-ft),D=(Mt=Ze+Ue)-Ze,E[2]=Ze-(Mt-D)+(Ue-D),E[3]=Mt;let X=function(We,pt){let Gt=pt[0];for(let rn=1;rn<We;rn++)Gt+=pt[rn];return Gt}(4,E),we=y*Q;if(X>=we||-X>=we||(le=re-(wn+(D=re-wn))+(D-T),q=V-(Ct+(D=V-Ct))+(D-T),fe=ue-(_e+(D=ue-_e))+(D-G),se=S-(Y+(D=S-Y))+(D-G),le===0&&fe===0&&q===0&&se===0)||(we=b*Q+l*Math.abs(X),(X+=wn*se+Y*le-(_e*q+Ct*fe))>=we||-X>=we))return X;D=(ut=(Re=le-(Pe=(oe=134217729*le)-(oe-le)))*(Ne=Y-(Oe=(oe=134217729*Y)-(oe-Y)))-((it=le*Y)-Pe*Oe-Re*Oe-Pe*Ne))-(Ue=ut-(He=(Re=fe-(Pe=(oe=134217729*fe)-(oe-fe)))*(Ne=Ct-(Oe=(oe=134217729*Ct)-(oe-Ct)))-((ft=fe*Ct)-Pe*Oe-Re*Oe-Pe*Ne))),M[0]=ut-(Ue+D)+(D-He),D=(bt=it-((Ze=it+Ue)-(D=Ze-it))+(Ue-D))-(Ue=bt-ft),M[1]=bt-(Ue+D)+(D-ft),D=(Mt=Ze+Ue)-Ze,M[2]=Ze-(Mt-D)+(Ue-D),M[3]=Mt;const Me=h(4,E,4,M,C);D=(ut=(Re=wn-(Pe=(oe=134217729*wn)-(oe-wn)))*(Ne=se-(Oe=(oe=134217729*se)-(oe-se)))-((it=wn*se)-Pe*Oe-Re*Oe-Pe*Ne))-(Ue=ut-(He=(Re=_e-(Pe=(oe=134217729*_e)-(oe-_e)))*(Ne=q-(Oe=(oe=134217729*q)-(oe-q)))-((ft=_e*q)-Pe*Oe-Re*Oe-Pe*Ne))),M[0]=ut-(Ue+D)+(D-He),D=(bt=it-((Ze=it+Ue)-(D=Ze-it))+(Ue-D))-(Ue=bt-ft),M[1]=bt-(Ue+D)+(D-ft),D=(Mt=Ze+Ue)-Ze,M[2]=Ze-(Mt-D)+(Ue-D),M[3]=Mt;const qe=h(Me,C,4,M,A);D=(ut=(Re=le-(Pe=(oe=134217729*le)-(oe-le)))*(Ne=se-(Oe=(oe=134217729*se)-(oe-se)))-((it=le*se)-Pe*Oe-Re*Oe-Pe*Ne))-(Ue=ut-(He=(Re=fe-(Pe=(oe=134217729*fe)-(oe-fe)))*(Ne=q-(Oe=(oe=134217729*q)-(oe-q)))-((ft=fe*q)-Pe*Oe-Re*Oe-Pe*Ne))),M[0]=ut-(Ue+D)+(D-He),D=(bt=it-((Ze=it+Ue)-(D=Ze-it))+(Ue-D))-(Ue=bt-ft),M[1]=bt-(Ue+D)+(D-ft),D=(Mt=Ze+Ue)-Ze,M[2]=Ze-(Mt-D)+(Ue-D),M[3]=Mt;const je=h(qe,A,4,M,B);return B[je-1]}(N,Z,ee,F,O,k,te)},t.orient2dfast=function(N,Z,ee,F,O,k){return(Z-k)*(ee-O)-(N-O)*(F-k)},Object.defineProperty(t,"__esModule",{value:!0})})})(orient2d_min,orient2d_minExports);var RBush=rbush_minExports$1,Queue=require$$1$1,pointInPolygon=pointInPolygonExports,orient$3=orient2d_minExports.orient2d;Queue.default&&(Queue=Queue.default);concaveman$1.exports=concaveman;concavemanExports.default=concaveman;function concaveman(n,e,t){e=Math.max(0,e===void 0?2:e),t=t||0;var a=fastConvexHull(n),l=new RBush(16);l.toBBox=function(F){return{minX:F[0],minY:F[1],maxX:F[0],maxY:F[1]}},l.compareMinX=function(F,O){return F[0]-O[0]},l.compareMinY=function(F,O){return F[1]-O[1]},l.load(n);for(var h=[],g=0,p;g<a.length;g++){var y=a[g];l.remove(y),p=insertNode$1(y,p),h.push(p)}var b=new RBush(16);for(g=0;g<h.length;g++)b.insert(updateBBox(h[g]));for(var E=e*e,C=t*t;h.length;){var A=h.shift(),B=A.p,M=A.next.p,N=getSqDist(B,M);if(!(N<C)){var Z=N/E;y=findCandidate(l,A.prev.p,B,M,A.next.next.p,Z,b),y&&Math.min(getSqDist(y,B),getSqDist(y,M))<=Z&&(h.push(A),h.push(insertNode$1(y,A)),l.remove(y),b.remove(A),b.insert(updateBBox(A)),b.insert(updateBBox(A.next)))}}A=p;var ee=[];do ee.push(A.p),A=A.next;while(A!==p);return ee.push(A.p),ee}function findCandidate(n,e,t,a,l,h,g){for(var p=new Queue([],compareDist),y=n.data;y;){for(var b=0;b<y.children.length;b++){var E=y.children[b],C=y.leaf?sqSegDist(E,t,a):sqSegBoxDist(t,a,E);C>h||p.push({node:E,dist:C})}for(;p.length&&!p.peek().node.children;){var A=p.pop(),B=A.node,M=sqSegDist(B,e,t),N=sqSegDist(B,a,l);if(A.dist<M&&A.dist<N&&noIntersections(t,B,g)&&noIntersections(a,B,g))return B}y=p.pop(),y&&(y=y.node)}return null}function compareDist(n,e){return n.dist-e.dist}function sqSegBoxDist(n,e,t){if(inside$5(n,t)||inside$5(e,t))return 0;var a=sqSegSegDist(n[0],n[1],e[0],e[1],t.minX,t.minY,t.maxX,t.minY);if(a===0)return 0;var l=sqSegSegDist(n[0],n[1],e[0],e[1],t.minX,t.minY,t.minX,t.maxY);if(l===0)return 0;var h=sqSegSegDist(n[0],n[1],e[0],e[1],t.maxX,t.minY,t.maxX,t.maxY);if(h===0)return 0;var g=sqSegSegDist(n[0],n[1],e[0],e[1],t.minX,t.maxY,t.maxX,t.maxY);return g===0?0:Math.min(a,l,h,g)}function inside$5(n,e){return n[0]>=e.minX&&n[0]<=e.maxX&&n[1]>=e.minY&&n[1]<=e.maxY}function noIntersections(n,e,t){for(var a=Math.min(n[0],e[0]),l=Math.min(n[1],e[1]),h=Math.max(n[0],e[0]),g=Math.max(n[1],e[1]),p=t.search({minX:a,minY:l,maxX:h,maxY:g}),y=0;y<p.length;y++)if(intersects$2(p[y].p,p[y].next.p,n,e))return!1;return!0}function cross(n,e,t){return orient$3(n[0],n[1],e[0],e[1],t[0],t[1])}function intersects$2(n,e,t,a){return n!==a&&e!==t&&cross(n,e,t)>0!=cross(n,e,a)>0&&cross(t,a,n)>0!=cross(t,a,e)>0}function updateBBox(n){var e=n.p,t=n.next.p;return n.minX=Math.min(e[0],t[0]),n.minY=Math.min(e[1],t[1]),n.maxX=Math.max(e[0],t[0]),n.maxY=Math.max(e[1],t[1]),n}function fastConvexHull(n){for(var e=n[0],t=n[0],a=n[0],l=n[0],h=0;h<n.length;h++){var g=n[h];g[0]<e[0]&&(e=g),g[0]>a[0]&&(a=g),g[1]<t[1]&&(t=g),g[1]>l[1]&&(l=g)}var p=[e,t,a,l],y=p.slice();for(h=0;h<n.length;h++)pointInPolygon(n[h],p)||y.push(n[h]);return convexHull$2(y)}function insertNode$1(n,e){var t={p:n,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(t.next=e.next,t.prev=e,e.next.prev=t,e.next=t):(t.prev=t,t.next=t),t}function getSqDist(n,e){var t=n[0]-e[0],a=n[1]-e[1];return t*t+a*a}function sqSegDist(n,e,t){var a=e[0],l=e[1],h=t[0]-a,g=t[1]-l;if(h!==0||g!==0){var p=((n[0]-a)*h+(n[1]-l)*g)/(h*h+g*g);p>1?(a=t[0],l=t[1]):p>0&&(a+=h*p,l+=g*p)}return h=n[0]-a,g=n[1]-l,h*h+g*g}function sqSegSegDist(n,e,t,a,l,h,g,p){var y=t-n,b=a-e,E=g-l,C=p-h,A=n-l,B=e-h,M=y*y+b*b,N=y*E+b*C,Z=E*E+C*C,ee=y*A+b*B,F=E*A+C*B,O=M*Z-N*N,k,H,ce,U,te=O,re=O;O===0?(H=0,te=1,U=F,re=Z):(H=N*F-Z*ee,U=M*F-N*ee,H<0?(H=0,U=F,re=Z):H>te&&(H=te,U=F+N,re=Z)),U<0?(U=0,-ee<0?H=0:-ee>M?H=te:(H=-ee,te=M)):U>re&&(U=re,-ee+N<0?H=0:-ee+N>M?H=te:(H=-ee+N,te=M)),k=H===0?0:H/te,ce=U===0?0:U/re;var ue=(1-k)*n+k*t,V=(1-k)*e+k*a,S=(1-ce)*l+ce*g,T=(1-ce)*h+ce*p,G=S-ue,Q=T-V;return G*G+Q*Q}function compareByX(n,e){return n[0]===e[0]?n[1]-e[1]:n[0]-e[0]}function convexHull$2(n){n.sort(compareByX);for(var e=[],t=0;t<n.length;t++){for(;e.length>=2&&cross(e[e.length-2],e[e.length-1],n[t])<=0;)e.pop();e.push(n[t])}for(var a=[],l=n.length-1;l>=0;l--){for(;a.length>=2&&cross(a[a.length-2],a[a.length-1],n[l])<=0;)a.pop();a.push(n[l])}return a.pop(),e.pop(),e.concat(a)}function convex(n,e){e===void 0&&(e={}),e.concavity=e.concavity||1/0;var t=[];if(coordEach$2(n,function(l){t.push([l[0],l[1]])}),!t.length)return null;var a=concavemanExports(t,e.concavity);return a.length>3?polygon$8([a]):null}function booleanPointInPolygon(n,e,t){if(t===void 0&&(t={}),!n)throw new Error("point is required");if(!e)throw new Error("polygon is required");var a=getCoord$4(n),l=getGeom(e),h=l.type,g=e.bbox,p=l.coordinates;if(g&&inBBox(a,g)===!1)return!1;h==="Polygon"&&(p=[p]);for(var y=!1,b=0;b<p.length&&!y;b++)if(inRing$1(a,p[b][0],t.ignoreBoundary)){for(var E=!1,C=1;C<p[b].length&&!E;)inRing$1(a,p[b][C],!t.ignoreBoundary)&&(E=!0),C++;E||(y=!0)}return y}function inRing$1(n,e,t){var a=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var l=0,h=e.length-1;l<e.length;h=l++){var g=e[l][0],p=e[l][1],y=e[h][0],b=e[h][1],E=n[1]*(g-y)+p*(y-n[0])+b*(n[0]-g)===0&&(g-n[0])*(y-n[0])<=0&&(p-n[1])*(b-n[1])<=0;if(E)return!t;var C=p>n[1]!=b>n[1]&&n[0]<(y-g)*(n[1]-p)/(b-p)+g;C&&(a=!a)}return a}function inBBox(n,e){return e[0]<=n[0]&&e[1]<=n[1]&&e[2]>=n[0]&&e[3]>=n[1]}function distance$b(n,e,t){t===void 0&&(t={});var a=getCoord$4(n),l=getCoord$4(e),h=degreesToRadians(l[1]-a[1]),g=degreesToRadians(l[0]-a[0]),p=degreesToRadians(a[1]),y=degreesToRadians(l[1]),b=Math.pow(Math.sin(h/2),2)+Math.pow(Math.sin(g/2),2)*Math.cos(p)*Math.cos(y);return radiansToLength(2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b)),t.units)}function clone$1(n){if(!n)throw new Error("geojson is required");switch(n.type){case"Feature":return cloneFeature(n);case"FeatureCollection":return cloneFeatureCollection(n);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return cloneGeometry(n);default:throw new Error("unknown GeoJSON type")}}function cloneFeature(n){var e={type:"Feature"};return Object.keys(n).forEach(function(t){switch(t){case"type":case"properties":case"geometry":return;default:e[t]=n[t]}}),e.properties=cloneProperties(n.properties),e.geometry=cloneGeometry(n.geometry),e}function cloneProperties(n){var e={};return n&&Object.keys(n).forEach(function(t){var a=n[t];typeof a=="object"?a===null?e[t]=null:Array.isArray(a)?e[t]=a.map(function(l){return l}):e[t]=cloneProperties(a):e[t]=a}),e}function cloneFeatureCollection(n){var e={type:"FeatureCollection"};return Object.keys(n).forEach(function(t){switch(t){case"type":case"features":return;default:e[t]=n[t]}}),e.features=n.features.map(function(t){return cloneFeature(t)}),e}function cloneGeometry(n){var e={type:n.type};return n.bbox&&(e.bbox=n.bbox),n.type==="GeometryCollection"?(e.geometries=n.geometries.map(function(t){return cloneGeometry(t)}),e):(e.coordinates=deepSlice(n.coordinates),e)}function deepSlice(n){var e=n;return typeof e[0]!="object"?e.slice():e.map(function(t){return deepSlice(t)})}function destination$3(n,e,t,a){a===void 0&&(a={});var l=getCoord$4(n),h=degreesToRadians(l[0]),g=degreesToRadians(l[1]),p=degreesToRadians(t),y=lengthToRadians(e,a.units),b=Math.asin(Math.sin(g)*Math.cos(y)+Math.cos(g)*Math.sin(y)*Math.cos(p)),E=h+Math.atan2(Math.sin(p)*Math.sin(y)*Math.cos(g),Math.cos(y)-Math.sin(g)*Math.sin(b)),C=radiansToDegrees(E),A=radiansToDegrees(b);return point$d([C,A],a.properties)}function bearing$3(n,e,t){if(t===void 0&&(t={}),t.final===!0)return calculateFinalBearing(n,e);var a=getCoord$4(n),l=getCoord$4(e),h=degreesToRadians(a[0]),g=degreesToRadians(l[0]),p=degreesToRadians(a[1]),y=degreesToRadians(l[1]),b=Math.sin(g-h)*Math.cos(y),E=Math.cos(p)*Math.sin(y)-Math.sin(p)*Math.cos(y)*Math.cos(g-h);return radiansToDegrees(Math.atan2(b,E))}function calculateFinalBearing(n,e){var t=bearing$3(e,n);return t=(t+180)%360,t}function center(n,e){e===void 0&&(e={});var t=bbox$4(n),a=(t[0]+t[2])/2,l=(t[1]+t[3])/2;return point$d([a,l],e.properties,e)}var earcutExports={},earcut$2={get exports(){return earcutExports},set exports(n){earcutExports=n}};earcut$2.exports=earcut$1;earcutExports.default=earcut$1;function earcut$1(n,e,t){t=t||2;var a=e&&e.length,l=a?e[0]*t:n.length,h=linkedList(n,0,l,t,!0),g=[];if(!h||h.next===h.prev)return g;var p,y,b,E,C,A,B;if(a&&(h=eliminateHoles(n,e,h,t)),n.length>80*t){p=b=n[0],y=E=n[1];for(var M=t;M<l;M+=t)C=n[M],A=n[M+1],C<p&&(p=C),A<y&&(y=A),C>b&&(b=C),A>E&&(E=A);B=Math.max(b-p,E-y),B=B!==0?32767/B:0}return earcutLinked(h,g,t,p,y,B,0),g}function linkedList(n,e,t,a,l){var h,g;if(l===signedArea(n,e,t,a)>0)for(h=e;h<t;h+=a)g=insertNode(h,n[h],n[h+1],g);else for(h=t-a;h>=e;h-=a)g=insertNode(h,n[h],n[h+1],g);return g&&equals(g,g.next)&&(removeNode(g),g=g.next),g}function filterPoints(n,e){if(!n)return n;e||(e=n);var t=n,a;do if(a=!1,!t.steiner&&(equals(t,t.next)||area$2(t.prev,t,t.next)===0)){if(removeNode(t),t=e=t.prev,t===t.next)break;a=!0}else t=t.next;while(a||t!==e);return e}function earcutLinked(n,e,t,a,l,h,g){if(n){!g&&h&&indexCurve(n,a,l,h);for(var p=n,y,b;n.prev!==n.next;){if(y=n.prev,b=n.next,h?isEarHashed(n,a,l,h):isEar(n)){e.push(y.i/t|0),e.push(n.i/t|0),e.push(b.i/t|0),removeNode(n),n=b.next,p=b.next;continue}if(n=b,n===p){g?g===1?(n=cureLocalIntersections(filterPoints(n),e,t),earcutLinked(n,e,t,a,l,h,2)):g===2&&splitEarcut(n,e,t,a,l,h):earcutLinked(filterPoints(n),e,t,a,l,h,1);break}}}}function isEar(n){var e=n.prev,t=n,a=n.next;if(area$2(e,t,a)>=0)return!1;for(var l=e.x,h=t.x,g=a.x,p=e.y,y=t.y,b=a.y,E=l<h?l<g?l:g:h<g?h:g,C=p<y?p<b?p:b:y<b?y:b,A=l>h?l>g?l:g:h>g?h:g,B=p>y?p>b?p:b:y>b?y:b,M=a.next;M!==e;){if(M.x>=E&&M.x<=A&&M.y>=C&&M.y<=B&&pointInTriangle(l,p,h,y,g,b,M.x,M.y)&&area$2(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function isEarHashed(n,e,t,a){var l=n.prev,h=n,g=n.next;if(area$2(l,h,g)>=0)return!1;for(var p=l.x,y=h.x,b=g.x,E=l.y,C=h.y,A=g.y,B=p<y?p<b?p:b:y<b?y:b,M=E<C?E<A?E:A:C<A?C:A,N=p>y?p>b?p:b:y>b?y:b,Z=E>C?E>A?E:A:C>A?C:A,ee=zOrder(B,M,e,t,a),F=zOrder(N,Z,e,t,a),O=n.prevZ,k=n.nextZ;O&&O.z>=ee&&k&&k.z<=F;){if(O.x>=B&&O.x<=N&&O.y>=M&&O.y<=Z&&O!==l&&O!==g&&pointInTriangle(p,E,y,C,b,A,O.x,O.y)&&area$2(O.prev,O,O.next)>=0||(O=O.prevZ,k.x>=B&&k.x<=N&&k.y>=M&&k.y<=Z&&k!==l&&k!==g&&pointInTriangle(p,E,y,C,b,A,k.x,k.y)&&area$2(k.prev,k,k.next)>=0))return!1;k=k.nextZ}for(;O&&O.z>=ee;){if(O.x>=B&&O.x<=N&&O.y>=M&&O.y<=Z&&O!==l&&O!==g&&pointInTriangle(p,E,y,C,b,A,O.x,O.y)&&area$2(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;k&&k.z<=F;){if(k.x>=B&&k.x<=N&&k.y>=M&&k.y<=Z&&k!==l&&k!==g&&pointInTriangle(p,E,y,C,b,A,k.x,k.y)&&area$2(k.prev,k,k.next)>=0)return!1;k=k.nextZ}return!0}function cureLocalIntersections(n,e,t){var a=n;do{var l=a.prev,h=a.next.next;!equals(l,h)&&intersects$1(l,a,a.next,h)&&locallyInside(l,h)&&locallyInside(h,l)&&(e.push(l.i/t|0),e.push(a.i/t|0),e.push(h.i/t|0),removeNode(a),removeNode(a.next),a=n=h),a=a.next}while(a!==n);return filterPoints(a)}function splitEarcut(n,e,t,a,l,h){var g=n;do{for(var p=g.next.next;p!==g.prev;){if(g.i!==p.i&&isValidDiagonal(g,p)){var y=splitPolygon(g,p);g=filterPoints(g,g.next),y=filterPoints(y,y.next),earcutLinked(g,e,t,a,l,h,0),earcutLinked(y,e,t,a,l,h,0);return}p=p.next}g=g.next}while(g!==n)}function eliminateHoles(n,e,t,a){var l=[],h,g,p,y,b;for(h=0,g=e.length;h<g;h++)p=e[h]*a,y=h<g-1?e[h+1]*a:n.length,b=linkedList(n,p,y,a,!1),b===b.next&&(b.steiner=!0),l.push(getLeftmost(b));for(l.sort(compareX),h=0;h<l.length;h++)t=eliminateHole(l[h],t);return t}function compareX(n,e){return n.x-e.x}function eliminateHole(n,e){var t=findHoleBridge(n,e);if(!t)return e;var a=splitPolygon(t,n);return filterPoints(a,a.next),filterPoints(t,t.next)}function findHoleBridge(n,e){var t=e,a=n.x,l=n.y,h=-1/0,g;do{if(l<=t.y&&l>=t.next.y&&t.next.y!==t.y){var p=t.x+(l-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=a&&p>h&&(h=p,g=t.x<t.next.x?t:t.next,p===a))return g}t=t.next}while(t!==e);if(!g)return null;var y=g,b=g.x,E=g.y,C=1/0,A;t=g;do a>=t.x&&t.x>=b&&a!==t.x&&pointInTriangle(l<E?a:h,l,b,E,l<E?h:a,l,t.x,t.y)&&(A=Math.abs(l-t.y)/(a-t.x),locallyInside(t,n)&&(A<C||A===C&&(t.x>g.x||t.x===g.x&&sectorContainsSector(g,t)))&&(g=t,C=A)),t=t.next;while(t!==y);return g}function sectorContainsSector(n,e){return area$2(n.prev,n,e.prev)<0&&area$2(e.next,n,n.next)<0}function indexCurve(n,e,t,a){var l=n;do l.z===0&&(l.z=zOrder(l.x,l.y,e,t,a)),l.prevZ=l.prev,l.nextZ=l.next,l=l.next;while(l!==n);l.prevZ.nextZ=null,l.prevZ=null,sortLinked(l)}function sortLinked(n){var e,t,a,l,h,g,p,y,b=1;do{for(t=n,n=null,h=null,g=0;t;){for(g++,a=t,p=0,e=0;e<b&&(p++,a=a.nextZ,!!a);e++);for(y=b;p>0||y>0&&a;)p!==0&&(y===0||!a||t.z<=a.z)?(l=t,t=t.nextZ,p--):(l=a,a=a.nextZ,y--),h?h.nextZ=l:n=l,l.prevZ=h,h=l;t=a}h.nextZ=null,b*=2}while(g>1);return n}function zOrder(n,e,t,a,l){return n=(n-t)*l|0,e=(e-a)*l|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function getLeftmost(n){var e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function pointInTriangle(n,e,t,a,l,h,g,p){return(l-g)*(e-p)>=(n-g)*(h-p)&&(n-g)*(a-p)>=(t-g)*(e-p)&&(t-g)*(h-p)>=(l-g)*(a-p)}function isValidDiagonal(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!intersectsPolygon(n,e)&&(locallyInside(n,e)&&locallyInside(e,n)&&middleInside(n,e)&&(area$2(n.prev,n,e.prev)||area$2(n,e.prev,e))||equals(n,e)&&area$2(n.prev,n,n.next)>0&&area$2(e.prev,e,e.next)>0)}function area$2(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function equals(n,e){return n.x===e.x&&n.y===e.y}function intersects$1(n,e,t,a){var l=sign$3(area$2(n,e,t)),h=sign$3(area$2(n,e,a)),g=sign$3(area$2(t,a,n)),p=sign$3(area$2(t,a,e));return!!(l!==h&&g!==p||l===0&&onSegment(n,t,e)||h===0&&onSegment(n,a,e)||g===0&&onSegment(t,n,a)||p===0&&onSegment(t,e,a))}function onSegment(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function sign$3(n){return n>0?1:n<0?-1:0}function intersectsPolygon(n,e){var t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&intersects$1(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function locallyInside(n,e){return area$2(n.prev,n,n.next)<0?area$2(n,e,n.next)>=0&&area$2(n,n.prev,e)>=0:area$2(n,e,n.prev)<0||area$2(n,n.next,e)<0}function middleInside(n,e){var t=n,a=!1,l=(n.x+e.x)/2,h=(n.y+e.y)/2;do t.y>h!=t.next.y>h&&t.next.y!==t.y&&l<(t.next.x-t.x)*(h-t.y)/(t.next.y-t.y)+t.x&&(a=!a),t=t.next;while(t!==n);return a}function splitPolygon(n,e){var t=new Node$5(n.i,n.x,n.y),a=new Node$5(e.i,e.x,e.y),l=n.next,h=e.prev;return n.next=e,e.prev=n,t.next=l,l.prev=t,a.next=t,t.prev=a,h.next=a,a.prev=h,a}function insertNode(n,e,t,a){var l=new Node$5(n,e,t);return a?(l.next=a.next,l.prev=a,a.next.prev=l,a.next=l):(l.prev=l,l.next=l),l}function removeNode(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Node$5(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut$1.deviation=function(n,e,t,a){var l=e&&e.length,h=l?e[0]*t:n.length,g=Math.abs(signedArea(n,0,h,t));if(l)for(var p=0,y=e.length;p<y;p++){var b=e[p]*t,E=p<y-1?e[p+1]*t:n.length;g-=Math.abs(signedArea(n,b,E,t))}var C=0;for(p=0;p<a.length;p+=3){var A=a[p]*t,B=a[p+1]*t,M=a[p+2]*t;C+=Math.abs((n[A]-n[M])*(n[B+1]-n[A+1])-(n[A]-n[B])*(n[M+1]-n[A+1]))}return g===0&&C===0?0:Math.abs((C-g)/g)};function signedArea(n,e,t,a){for(var l=0,h=e,g=t-a;h<t;h+=a)l+=(n[g]-n[h])*(n[h+1]+n[g+1]),g=h;return l}earcut$1.flatten=function(n){for(var e=n[0][0].length,t={vertices:[],holes:[],dimensions:e},a=0,l=0;l<n.length;l++){for(var h=0;h<n[l].length;h++)for(var g=0;g<e;g++)t.vertices.push(n[l][h][g]);l>0&&(a+=n[l-1].length,t.holes.push(a))}return t};function lineSegment(n){if(!n)throw new Error("geojson is required");var e=[];return flattenEach(n,function(t){lineSegmentFeature(t,e)}),featureCollection$6(e)}function lineSegmentFeature(n,e){var t=[],a=n.geometry;if(a!==null){switch(a.type){case"Polygon":t=getCoords(a);break;case"LineString":t=[getCoords(a)]}t.forEach(function(l){var h=createSegments(l,n.properties);h.forEach(function(g){g.id=e.length,e.push(g)})})}}function createSegments(n,e){var t=[];return n.reduce(function(a,l){var h=lineString([a,l],e);return h.bbox=bbox$3(a,l),t.push(h),l}),t}function bbox$3(n,e){var t=n[0],a=n[1],l=e[0],h=e[1],g=t<l?t:l,p=a<h?a:h,y=t>l?t:l,b=a>h?a:h;return[g,p,y,b]}var geojsonRbushExports={},geojsonRbush$1={get exports(){return geojsonRbushExports},set exports(n){geojsonRbushExports=n}},rbush_minExports={},rbush_min={get exports(){return rbush_minExports},set exports(n){rbush_minExports=n}};(function(n,e){(function(t,a){n.exports=a()})(commonjsGlobal,function(){function t(F,O,k,H,ce){(function U(te,re,ue,V,S){for(;V>ue;){if(V-ue>600){var T=V-ue+1,G=re-ue+1,Q=Math.log(T),le=.5*Math.exp(2*Q/3),fe=.5*Math.sqrt(Q*le*(T-le)/T)*(G-T/2<0?-1:1),q=Math.max(ue,Math.floor(re-G*le/T+fe)),se=Math.min(V,Math.floor(re+(T-G)*le/T+fe));U(te,re,q,se,S)}var D=te[re],oe=ue,Pe=V;for(a(te,ue,re),S(te[V],D)>0&&a(te,ue,V);oe<Pe;){for(a(te,oe,Pe),oe++,Pe--;S(te[oe],D)<0;)oe++;for(;S(te[Pe],D)>0;)Pe--}S(te[ue],D)===0?a(te,ue,Pe):a(te,++Pe,V),Pe<=re&&(ue=Pe+1),re<=Pe&&(V=Pe-1)}})(F,O,k||0,H||F.length-1,ce||l)}function a(F,O,k){var H=F[O];F[O]=F[k],F[k]=H}function l(F,O){return F<O?-1:F>O?1:0}var h=function(F){F===void 0&&(F=9),this._maxEntries=Math.max(4,F),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function g(F,O,k){if(!k)return O.indexOf(F);for(var H=0;H<O.length;H++)if(k(F,O[H]))return H;return-1}function p(F,O){y(F,0,F.children.length,O,F)}function y(F,O,k,H,ce){ce||(ce=Z(null)),ce.minX=1/0,ce.minY=1/0,ce.maxX=-1/0,ce.maxY=-1/0;for(var U=O;U<k;U++){var te=F.children[U];b(ce,F.leaf?H(te):te)}return ce}function b(F,O){return F.minX=Math.min(F.minX,O.minX),F.minY=Math.min(F.minY,O.minY),F.maxX=Math.max(F.maxX,O.maxX),F.maxY=Math.max(F.maxY,O.maxY),F}function E(F,O){return F.minX-O.minX}function C(F,O){return F.minY-O.minY}function A(F){return(F.maxX-F.minX)*(F.maxY-F.minY)}function B(F){return F.maxX-F.minX+(F.maxY-F.minY)}function M(F,O){return F.minX<=O.minX&&F.minY<=O.minY&&O.maxX<=F.maxX&&O.maxY<=F.maxY}function N(F,O){return O.minX<=F.maxX&&O.minY<=F.maxY&&O.maxX>=F.minX&&O.maxY>=F.minY}function Z(F){return{children:F,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ee(F,O,k,H,ce){for(var U=[O,k];U.length;)if(!((k=U.pop())-(O=U.pop())<=H)){var te=O+Math.ceil((k-O)/H/2)*H;t(F,te,O,k,ce),U.push(O,te,te,k)}}return h.prototype.all=function(){return this._all(this.data,[])},h.prototype.search=function(F){var O=this.data,k=[];if(!N(F,O))return k;for(var H=this.toBBox,ce=[];O;){for(var U=0;U<O.children.length;U++){var te=O.children[U],re=O.leaf?H(te):te;N(F,re)&&(O.leaf?k.push(te):M(F,re)?this._all(te,k):ce.push(te))}O=ce.pop()}return k},h.prototype.collides=function(F){var O=this.data;if(!N(F,O))return!1;for(var k=[];O;){for(var H=0;H<O.children.length;H++){var ce=O.children[H],U=O.leaf?this.toBBox(ce):ce;if(N(F,U)){if(O.leaf||M(F,U))return!0;k.push(ce)}}O=k.pop()}return!1},h.prototype.load=function(F){if(!F||!F.length)return this;if(F.length<this._minEntries){for(var O=0;O<F.length;O++)this.insert(F[O]);return this}var k=this._build(F.slice(),0,F.length-1,0);if(this.data.children.length)if(this.data.height===k.height)this._splitRoot(this.data,k);else{if(this.data.height<k.height){var H=this.data;this.data=k,k=H}this._insert(k,this.data.height-k.height-1,!0)}else this.data=k;return this},h.prototype.insert=function(F){return F&&this._insert(F,this.data.height-1),this},h.prototype.clear=function(){return this.data=Z([]),this},h.prototype.remove=function(F,O){if(!F)return this;for(var k,H,ce,U=this.data,te=this.toBBox(F),re=[],ue=[];U||re.length;){if(U||(U=re.pop(),H=re[re.length-1],k=ue.pop(),ce=!0),U.leaf){var V=g(F,U.children,O);if(V!==-1)return U.children.splice(V,1),re.push(U),this._condense(re),this}ce||U.leaf||!M(U,te)?H?(k++,U=H.children[k],ce=!1):U=null:(re.push(U),ue.push(k),k=0,H=U,U=U.children[0])}return this},h.prototype.toBBox=function(F){return F},h.prototype.compareMinX=function(F,O){return F.minX-O.minX},h.prototype.compareMinY=function(F,O){return F.minY-O.minY},h.prototype.toJSON=function(){return this.data},h.prototype.fromJSON=function(F){return this.data=F,this},h.prototype._all=function(F,O){for(var k=[];F;)F.leaf?O.push.apply(O,F.children):k.push.apply(k,F.children),F=k.pop();return O},h.prototype._build=function(F,O,k,H){var ce,U=k-O+1,te=this._maxEntries;if(U<=te)return p(ce=Z(F.slice(O,k+1)),this.toBBox),ce;H||(H=Math.ceil(Math.log(U)/Math.log(te)),te=Math.ceil(U/Math.pow(te,H-1))),(ce=Z([])).leaf=!1,ce.height=H;var re=Math.ceil(U/te),ue=re*Math.ceil(Math.sqrt(te));ee(F,O,k,ue,this.compareMinX);for(var V=O;V<=k;V+=ue){var S=Math.min(V+ue-1,k);ee(F,V,S,re,this.compareMinY);for(var T=V;T<=S;T+=re){var G=Math.min(T+re-1,S);ce.children.push(this._build(F,T,G,H-1))}}return p(ce,this.toBBox),ce},h.prototype._chooseSubtree=function(F,O,k,H){for(;H.push(O),!O.leaf&&H.length-1!==k;){for(var ce=1/0,U=1/0,te=void 0,re=0;re<O.children.length;re++){var ue=O.children[re],V=A(ue),S=(T=F,G=ue,(Math.max(G.maxX,T.maxX)-Math.min(G.minX,T.minX))*(Math.max(G.maxY,T.maxY)-Math.min(G.minY,T.minY))-V);S<U?(U=S,ce=V<ce?V:ce,te=ue):S===U&&V<ce&&(ce=V,te=ue)}O=te||O.children[0]}var T,G;return O},h.prototype._insert=function(F,O,k){var H=k?F:this.toBBox(F),ce=[],U=this._chooseSubtree(H,this.data,O,ce);for(U.children.push(F),b(U,H);O>=0&&ce[O].children.length>this._maxEntries;)this._split(ce,O),O--;this._adjustParentBBoxes(H,ce,O)},h.prototype._split=function(F,O){var k=F[O],H=k.children.length,ce=this._minEntries;this._chooseSplitAxis(k,ce,H);var U=this._chooseSplitIndex(k,ce,H),te=Z(k.children.splice(U,k.children.length-U));te.height=k.height,te.leaf=k.leaf,p(k,this.toBBox),p(te,this.toBBox),O?F[O-1].children.push(te):this._splitRoot(k,te)},h.prototype._splitRoot=function(F,O){this.data=Z([F,O]),this.data.height=F.height+1,this.data.leaf=!1,p(this.data,this.toBBox)},h.prototype._chooseSplitIndex=function(F,O,k){for(var H,ce,U,te,re,ue,V,S=1/0,T=1/0,G=O;G<=k-O;G++){var Q=y(F,0,G,this.toBBox),le=y(F,G,k,this.toBBox),fe=(ce=Q,U=le,te=void 0,re=void 0,ue=void 0,V=void 0,te=Math.max(ce.minX,U.minX),re=Math.max(ce.minY,U.minY),ue=Math.min(ce.maxX,U.maxX),V=Math.min(ce.maxY,U.maxY),Math.max(0,ue-te)*Math.max(0,V-re)),q=A(Q)+A(le);fe<S?(S=fe,H=G,T=q<T?q:T):fe===S&&q<T&&(T=q,H=G)}return H||k-O},h.prototype._chooseSplitAxis=function(F,O,k){var H=F.leaf?this.compareMinX:E,ce=F.leaf?this.compareMinY:C;this._allDistMargin(F,O,k,H)<this._allDistMargin(F,O,k,ce)&&F.children.sort(H)},h.prototype._allDistMargin=function(F,O,k,H){F.children.sort(H);for(var ce=this.toBBox,U=y(F,0,O,ce),te=y(F,k-O,k,ce),re=B(U)+B(te),ue=O;ue<k-O;ue++){var V=F.children[ue];b(U,F.leaf?ce(V):V),re+=B(U)}for(var S=k-O-1;S>=O;S--){var T=F.children[S];b(te,F.leaf?ce(T):T),re+=B(te)}return re},h.prototype._adjustParentBBoxes=function(F,O,k){for(var H=k;H>=0;H--)b(O[H],F)},h.prototype._condense=function(F){for(var O=F.length-1,k=void 0;O>=0;O--)F[O].children.length===0?O>0?(k=F[O-1].children).splice(k.indexOf(F[O]),1):this.clear():p(F[O],this.toBBox)},h})})(rbush_min);const require$$1=getAugmentedNamespace(es$2),require$$2$1=getAugmentedNamespace(es$1),require$$3=getAugmentedNamespace(es);var rbush=rbush_minExports,helpers$3=require$$1,meta$1=require$$2$1,turfBBox=require$$3.default,featureEach$1=meta$1.featureEach;meta$1.coordEach;helpers$3.polygon;var featureCollection$5=helpers$3.featureCollection;function geojsonRbush(n){var e=new rbush(n);return e.insert=function(t){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:turfBBox(t),rbush.prototype.insert.call(this,t)},e.load=function(t){var a=[];return Array.isArray(t)?t.forEach(function(l){if(l.type!=="Feature")throw new Error("invalid features");l.bbox=l.bbox?l.bbox:turfBBox(l),a.push(l)}):featureEach$1(t,function(l){if(l.type!=="Feature")throw new Error("invalid features");l.bbox=l.bbox?l.bbox:turfBBox(l),a.push(l)}),rbush.prototype.load.call(this,a)},e.remove=function(t,a){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:turfBBox(t),rbush.prototype.remove.call(this,t,a)},e.clear=function(){return rbush.prototype.clear.call(this)},e.search=function(t){var a=rbush.prototype.search.call(this,this.toBBox(t));return featureCollection$5(a)},e.collides=function(t){return rbush.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=rbush.prototype.all.call(this);return featureCollection$5(t)},e.toJSON=function(){return rbush.prototype.toJSON.call(this)},e.fromJSON=function(t){return rbush.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var a;if(t.bbox)a=t.bbox;else if(Array.isArray(t)&&t.length===4)a=t;else if(Array.isArray(t)&&t.length===6)a=[t[0],t[1],t[3],t[4]];else if(t.type==="Feature")a=turfBBox(t);else if(t.type==="FeatureCollection")a=turfBBox(t);else throw new Error("invalid geojson");return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}},e}geojsonRbush$1.exports=geojsonRbush;geojsonRbushExports.default=geojsonRbush;function lineIntersect(n,e){var t={},a=[];if(n.type==="LineString"&&(n=feature$2(n)),e.type==="LineString"&&(e=feature$2(e)),n.type==="Feature"&&e.type==="Feature"&&n.geometry!==null&&e.geometry!==null&&n.geometry.type==="LineString"&&e.geometry.type==="LineString"&&n.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var l=intersects(n,e);return l&&a.push(l),featureCollection$6(a)}var h=geojsonRbushExports();return h.load(lineSegment(e)),featureEach$2(lineSegment(n),function(g){featureEach$2(h.search(g),function(p){var y=intersects(g,p);if(y){var b=getCoords(y).join(",");t[b]||(t[b]=!0,a.push(y))}})}),featureCollection$6(a)}function intersects(n,e){var t=getCoords(n),a=getCoords(e);if(t.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(a.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var l=t[0][0],h=t[0][1],g=t[1][0],p=t[1][1],y=a[0][0],b=a[0][1],E=a[1][0],C=a[1][1],A=(C-b)*(g-l)-(E-y)*(p-h),B=(E-y)*(h-b)-(C-b)*(l-y),M=(g-l)*(h-b)-(p-h)*(l-y);if(A===0)return B===0&&M===0,null;var N=B/A,Z=M/A;if(N>=0&&N<=1&&Z>=0&&Z<=1){var ee=l+N*(g-l),F=h+N*(p-h);return point$d([ee,F])}return null}function nearestPointOnLine(n,e,t){t===void 0&&(t={});var a=point$d([1/0,1/0],{dist:1/0}),l=0;return flattenEach(n,function(h){for(var g=getCoords(h),p=0;p<g.length-1;p++){var y=point$d(g[p]);y.properties.dist=distance$b(e,y,t);var b=point$d(g[p+1]);b.properties.dist=distance$b(e,b,t);var E=distance$b(y,b,t),C=Math.max(y.properties.dist,b.properties.dist),A=bearing$3(y,b),B=destination$3(e,C,A+90,t),M=destination$3(e,C,A-90,t),N=lineIntersect(lineString([B.geometry.coordinates,M.geometry.coordinates]),lineString([y.geometry.coordinates,b.geometry.coordinates])),Z=null;N.features.length>0&&(Z=N.features[0],Z.properties.dist=distance$b(e,Z,t),Z.properties.location=l+distance$b(y,Z,t)),y.properties.dist<a.properties.dist&&(a=y,a.properties.index=p,a.properties.location=l),b.properties.dist<a.properties.dist&&(a=b,a.properties.index=p+1,a.properties.location=l+E),Z&&Z.properties.dist<a.properties.dist&&(a=Z,a.properties.index=p),l+=E}}),a}var RADIUS=6378137;function area$1(n){return geomReduce(n,function(e,t){return e+calculateArea(t)},0)}function calculateArea(n){var e=0,t;switch(n.type){case"Polygon":return polygonArea$1(n.coordinates);case"MultiPolygon":for(t=0;t<n.coordinates.length;t++)e+=polygonArea$1(n.coordinates[t]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function polygonArea$1(n){var e=0;if(n&&n.length>0){e+=Math.abs(ringArea$1(n[0]));for(var t=1;t<n.length;t++)e-=Math.abs(ringArea$1(n[t]))}return e}function ringArea$1(n){var e,t,a,l,h,g,p,y=0,b=n.length;if(b>2){for(p=0;p<b;p++)p===b-2?(l=b-2,h=b-1,g=0):p===b-1?(l=b-1,h=0,g=1):(l=p,h=p+1,g=p+2),e=n[l],t=n[h],a=n[g],y+=(rad$1(a[0])-rad$1(e[0]))*Math.sin(rad$1(t[1]));y=y*RADIUS*RADIUS/2}return y}function rad$1(n){return n*Math.PI/180}function length$2(n,e){return e===void 0&&(e={}),segmentReduce(n,function(t,a){var l=a.geometry.coordinates;return t+distance$b(l[0],l[1],e)},0)}function lineSlice(n,e,t){var a=getCoords(t);if(getType(t)!=="LineString")throw new Error("line must be a LineString");var l=nearestPointOnLine(t,n),h=nearestPointOnLine(t,e),g;l.properties.index<=h.properties.index?g=[l,h]:g=[h,l];for(var p=[g[0].geometry.coordinates],y=g[0].properties.index+1;y<g[1].properties.index+1;y++)p.push(a[y]);return p.push(g[1].geometry.coordinates),lineString(p,t.properties)}function booleanPointOnLine(n,e,t){t===void 0&&(t={});for(var a=getCoord$4(n),l=getCoords(e),h=0;h<l.length-1;h++){var g=!1;if(t.ignoreEndVertices&&(h===0&&(g="start"),h===l.length-2&&(g="end"),h===0&&h+1===l.length-1&&(g="both")),isPointOnLineSegment(l[h],l[h+1],a,g,typeof t.epsilon>"u"?null:t.epsilon))return!0}return!1}function isPointOnLineSegment(n,e,t,a,l){var h=t[0],g=t[1],p=n[0],y=n[1],b=e[0],E=e[1],C=t[0]-p,A=t[1]-y,B=b-p,M=E-y,N=C*M-A*B;if(l!==null){if(Math.abs(N)>l)return!1}else if(N!==0)return!1;if(a){if(a==="start")return Math.abs(B)>=Math.abs(M)?B>0?p<h&&h<=b:b<=h&&h<p:M>0?y<g&&g<=E:E<=g&&g<y;if(a==="end")return Math.abs(B)>=Math.abs(M)?B>0?p<=h&&h<b:b<h&&h<=p:M>0?y<=g&&g<E:E<g&&g<=y;if(a==="both")return Math.abs(B)>=Math.abs(M)?B>0?p<h&&h<b:b<h&&h<p:M>0?y<g&&g<E:E<g&&g<y}else return Math.abs(B)>=Math.abs(M)?B>0?p<=h&&h<=b:b<=h&&h<=p:M>0?y<=g&&g<=E:E<=g&&g<=y;return!1}function booleanWithin(n,e){var t=getGeom(n),a=getGeom(e),l=t.type,h=a.type;switch(l){case"Point":switch(h){case"MultiPoint":return isPointInMultiPoint(t,a);case"LineString":return booleanPointOnLine(t,a,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return booleanPointInPolygon(t,a,{ignoreBoundary:!0});default:throw new Error("feature2 "+h+" geometry not supported")}case"MultiPoint":switch(h){case"MultiPoint":return isMultiPointInMultiPoint(t,a);case"LineString":return isMultiPointOnLine(t,a);case"Polygon":case"MultiPolygon":return isMultiPointInPoly(t,a);default:throw new Error("feature2 "+h+" geometry not supported")}case"LineString":switch(h){case"LineString":return isLineOnLine(t,a);case"Polygon":case"MultiPolygon":return isLineInPoly(t,a);default:throw new Error("feature2 "+h+" geometry not supported")}case"Polygon":switch(h){case"Polygon":case"MultiPolygon":return isPolyInPoly(t,a);default:throw new Error("feature2 "+h+" geometry not supported")}default:throw new Error("feature1 "+l+" geometry not supported")}}function isPointInMultiPoint(n,e){var t,a=!1;for(t=0;t<e.coordinates.length;t++)if(compareCoords(e.coordinates[t],n.coordinates)){a=!0;break}return a}function isMultiPointInMultiPoint(n,e){for(var t=0;t<n.coordinates.length;t++){for(var a=!1,l=0;l<e.coordinates.length;l++)compareCoords(n.coordinates[t],e.coordinates[l])&&(a=!0);if(!a)return!1}return!0}function isMultiPointOnLine(n,e){for(var t=!1,a=0;a<n.coordinates.length;a++){if(!booleanPointOnLine(n.coordinates[a],e))return!1;t||(t=booleanPointOnLine(n.coordinates[a],e,{ignoreEndVertices:!0}))}return t}function isMultiPointInPoly(n,e){for(var t=!0,a=!1,l=0;l<n.coordinates.length;l++){if(a=booleanPointInPolygon(n.coordinates[1],e),!a){t=!1;break}a=booleanPointInPolygon(n.coordinates[1],e,{ignoreBoundary:!0})}return t&&a}function isLineOnLine(n,e){for(var t=0;t<n.coordinates.length;t++)if(!booleanPointOnLine(n.coordinates[t],e))return!1;return!0}function isLineInPoly(n,e){var t=bbox$4(e),a=bbox$4(n);if(!doBBoxOverlap(t,a))return!1;for(var l=!1,h=0;h<n.coordinates.length-1;h++){if(!booleanPointInPolygon(n.coordinates[h],e))return!1;if(l||(l=booleanPointInPolygon(n.coordinates[h],e,{ignoreBoundary:!0})),!l){var g=getMidpoint(n.coordinates[h],n.coordinates[h+1]);l=booleanPointInPolygon(g,e,{ignoreBoundary:!0})}}return l}function isPolyInPoly(n,e){var t=bbox$4(n),a=bbox$4(e);if(!doBBoxOverlap(a,t))return!1;for(var l=0;l<n.coordinates[0].length;l++)if(!booleanPointInPolygon(n.coordinates[0][l],e))return!1;return!0}function doBBoxOverlap(n,e){return!(n[0]>e[0]||n[2]<e[2]||n[1]>e[1]||n[3]<e[3])}function compareCoords(n,e){return n[0]===e[0]&&n[1]===e[1]}function getMidpoint(n,e){return[(n[0]+e[0])/2,(n[1]+e[1])/2]}function toWgs84(n,e){return e===void 0&&(e={}),convert(n,"wgs84",e)}function convert(n,e,t){t===void 0&&(t={}),t=t||{};var a=t.mutate;if(!n)throw new Error("geojson is required");return Array.isArray(n)&&isNumber$1(n[0])?n=e==="mercator"?convertToMercator(n):convertToWgs84(n):(a!==!0&&(n=clone$1(n)),coordEach$2(n,function(l){var h=e==="mercator"?convertToMercator(l):convertToWgs84(l);l[0]=h[0],l[1]=h[1]})),n}function convertToMercator(n){var e=Math.PI/180,t=6378137,a=20037508342789244e-9,l=Math.abs(n[0])<=180?n[0]:n[0]-sign$2(n[0])*360,h=[t*l*e,t*Math.log(Math.tan(Math.PI*.25+.5*n[1]*e))];return h[0]>a&&(h[0]=a),h[0]<-a&&(h[0]=-a),h[1]>a&&(h[1]=a),h[1]<-a&&(h[1]=-a),h}function convertToWgs84(n){var e=180/Math.PI,t=6378137;return[n[0]*e/t,(Math.PI*.5-2*Math.atan(Math.exp(-n[1]/t)))*e]}function sign$2(n){return n<0?-1:n>0?1:0}/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function __generator(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},a,l,h,g;return g={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function p(b){return function(E){return y([b,E])}}function y(b){if(a)throw new TypeError("Generator is already executing.");for(;t;)try{if(a=1,l&&(h=b[0]&2?l.return:b[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,b[1])).done)return h;switch(l=0,h&&(b=[b[0]&2,h.value]),b[0]){case 0:case 1:h=b;break;case 4:return t.label++,{value:b[1],done:!1};case 5:t.label++,l=b[1],b=[0];continue;case 7:b=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(b[0]===6||b[0]===2)){t=0;continue}if(b[0]===3&&(!h||b[1]>h[0]&&b[1]<h[3])){t.label=b[1];break}if(b[0]===6&&t.label<h[1]){t.label=h[1],h=b;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(b);break}h[2]&&t.ops.pop(),t.trys.pop();continue}b=e.call(n,t)}catch(E){b=[6,E],l=0}finally{a=h=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}}var Node$4=function(){function n(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return n}();function DEFAULT_COMPARE(n,e){return n>e?1:n<e?-1:0}function splay(n,e,t){for(var a=new Node$4(null,null),l=a,h=a;;){var g=t(n,e.key);if(g<0){if(e.left===null)break;if(t(n,e.left.key)<0){var p=e.left;if(e.left=p.right,p.right=e,e=p,e.left===null)break}h.left=e,h=e,e=e.left}else if(g>0){if(e.right===null)break;if(t(n,e.right.key)>0){var p=e.right;if(e.right=p.left,p.left=e,e=p,e.right===null)break}l.right=e,l=e,e=e.right}else break}return l.right=e.left,h.left=e.right,e.left=a.right,e.right=a.left,e}function insert(n,e,t,a){var l=new Node$4(n,e);if(t===null)return l.left=l.right=null,l;t=splay(n,t,a);var h=a(n,t.key);return h<0?(l.left=t.left,l.right=t,t.left=null):h>=0&&(l.right=t.right,l.left=t,t.right=null),l}function split(n,e,t){var a=null,l=null;if(e){e=splay(n,e,t);var h=t(e.key,n);h===0?(a=e.left,l=e.right):h<0?(l=e.right,e.right=null,a=e):(a=e.left,e.left=null,l=e)}return{left:a,right:l}}function merge$3(n,e,t){return e===null?n:(n===null||(e=splay(n.key,e,t),e.left=n),e)}function printRow(n,e,t,a,l){if(n){a(""+e+(t?" ":" ")+l(n)+`
`);var h=e+(t?"    ":"   ");n.left&&printRow(n.left,h,!1,a,l),n.right&&printRow(n.right,h,!0,a,l)}}var Tree=function(){function n(e){e===void 0&&(e=DEFAULT_COMPARE),this._root=null,this._size=0,this._comparator=e}return n.prototype.insert=function(e,t){return this._size++,this._root=insert(e,t,this._root,this._comparator)},n.prototype.add=function(e,t){var a=new Node$4(e,t);this._root===null&&(a.left=a.right=null,this._size++,this._root=a);var l=this._comparator,h=splay(e,this._root,l),g=l(e,h.key);return g===0?this._root=h:(g<0?(a.left=h.left,a.right=h,h.left=null):g>0&&(a.right=h.right,a.left=h,h.right=null),this._size++,this._root=a),this._root},n.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},n.prototype._remove=function(e,t,a){var l;if(t===null)return null;t=splay(e,t,a);var h=a(e,t.key);return h===0?(t.left===null?l=t.right:(l=splay(e,t.left,a),l.right=t.right),this._size--,l):t},n.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=splay(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},n.prototype.findStatic=function(e){for(var t=this._root,a=this._comparator;t;){var l=a(e,t.key);if(l===0)return t;l<0?t=t.left:t=t.right}return null},n.prototype.find=function(e){return this._root&&(this._root=splay(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},n.prototype.contains=function(e){for(var t=this._root,a=this._comparator;t;){var l=a(e,t.key);if(l===0)return!0;l<0?t=t.left:t=t.right}return!1},n.prototype.forEach=function(e,t){for(var a=this._root,l=[],h=!1;!h;)a!==null?(l.push(a),a=a.left):l.length!==0?(a=l.pop(),e.call(t,a),a=a.right):h=!0;return this},n.prototype.range=function(e,t,a,l){for(var h=[],g=this._comparator,p=this._root,y;h.length!==0||p;)if(p)h.push(p),p=p.left;else{if(p=h.pop(),y=g(p.key,t),y>0)break;if(g(p.key,e)>=0&&a.call(l,p))return this;p=p.right}return this},n.prototype.keys=function(){var e=[];return this.forEach(function(t){var a=t.key;return e.push(a)}),e},n.prototype.values=function(){var e=[];return this.forEach(function(t){var a=t.data;return e.push(a)}),e},n.prototype.min=function(){return this._root?this.minNode(this._root).key:null},n.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},n.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},n.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},n.prototype.at=function(e){for(var t=this._root,a=!1,l=0,h=[];!a;)if(t)h.push(t),t=t.left;else if(h.length>0){if(t=h.pop(),l===e)return t;l++,t=t.right}else a=!0;return null},n.prototype.next=function(e){var t=this._root,a=null;if(e.right){for(a=e.right;a.left;)a=a.left;return a}for(var l=this._comparator;t;){var h=l(e.key,t.key);if(h===0)break;h<0?(a=t,t=t.left):t=t.right}return a},n.prototype.prev=function(e){var t=this._root,a=null;if(e.left!==null){for(a=e.left;a.right;)a=a.right;return a}for(var l=this._comparator;t;){var h=l(e.key,t.key);if(h===0)break;h<0?t=t.left:(a=t,t=t.right)}return a},n.prototype.clear=function(){return this._root=null,this._size=0,this},n.prototype.toList=function(){return toList(this._root)},n.prototype.load=function(e,t,a){t===void 0&&(t=[]),a===void 0&&(a=!1);var l=e.length,h=this._comparator;if(a&&sort(e,t,0,l-1,h),this._root===null)this._root=loadRecursive(e,t,0,l),this._size=l;else{var g=mergeLists(this.toList(),createList(e,t),h);l=this._size+l,this._root=sortedListToBST({head:g},0,l)}return this},n.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),n.prototype.toString=function(e){e===void 0&&(e=function(a){return String(a.key)});var t=[];return printRow(this._root,"",!0,function(a){return t.push(a)},e),t.join("")},n.prototype.update=function(e,t,a){var l=this._comparator,h=split(e,this._root,l),g=h.left,p=h.right;l(e,t)<0?p=insert(t,a,p,l):g=insert(t,a,g,l),this._root=merge$3(g,p,l)},n.prototype.split=function(e){return split(e,this._root,this._comparator)},n.prototype[Symbol.iterator]=function(){var e;return __generator(this,function(t){switch(t.label){case 0:e=this.minNode(),t.label=1;case 1:return e?[4,e]:[3,3];case 2:return t.sent(),e=this.next(e),[3,1];case 3:return[2]}})},n}();function loadRecursive(n,e,t,a){var l=a-t;if(l>0){var h=t+Math.floor(l/2),g=n[h],p=e[h],y=new Node$4(g,p);return y.left=loadRecursive(n,e,t,h),y.right=loadRecursive(n,e,h+1,a),y}return null}function createList(n,e){for(var t=new Node$4(null,null),a=t,l=0;l<n.length;l++)a=a.next=new Node$4(n[l],e[l]);return a.next=null,t.next}function toList(n){for(var e=n,t=[],a=!1,l=new Node$4(null,null),h=l;!a;)e?(t.push(e),e=e.left):t.length>0?(e=h=h.next=t.pop(),e=e.right):a=!0;return h.next=null,l.next}function sortedListToBST(n,e,t){var a=t-e;if(a>0){var l=e+Math.floor(a/2),h=sortedListToBST(n,e,l),g=n.head;return g.left=h,n.head=n.head.next,g.right=sortedListToBST(n,l+1,t),g}return null}function mergeLists(n,e,t){for(var a=new Node$4(null,null),l=a,h=n,g=e;h!==null&&g!==null;)t(h.key,g.key)<0?(l.next=h,h=h.next):(l.next=g,g=g.next),l=l.next;return h!==null?l.next=h:g!==null&&(l.next=g),a.next}function sort(n,e,t,a,l){if(!(t>=a)){for(var h=n[t+a>>1],g=t-1,p=a+1;;){do g++;while(l(n[g],h)<0);do p--;while(l(n[p],h)>0);if(g>=p)break;var y=n[g];n[g]=n[p],n[p]=y,y=e[g],e[g]=e[p],e[p]=y}sort(n,e,t,p,l),sort(n,e,p+1,a,l)}}function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}function _createClass(n,e,t){return e&&_defineProperties(n.prototype,e),t&&_defineProperties(n,t),n}var isInBbox=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},getBboxOverlap=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var a=e.ll.x<t.ll.x?t.ll.x:e.ll.x,l=e.ur.x<t.ur.x?e.ur.x:t.ur.x,h=e.ll.y<t.ll.y?t.ll.y:e.ll.y,g=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:a,y:h},ur:{x:l,y:g}}},epsilon$1=Number.EPSILON;epsilon$1===void 0&&(epsilon$1=Math.pow(2,-52));var EPSILON_SQ=epsilon$1*epsilon$1,cmp=function(e,t){if(-epsilon$1<e&&e<epsilon$1&&-epsilon$1<t&&t<epsilon$1)return 0;var a=e-t;return a*a<EPSILON_SQ*e*t?0:e<t?-1:1},PtRounder=function(){function n(){_classCallCheck(this,n),this.reset()}return _createClass(n,[{key:"reset",value:function(){this.xRounder=new CoordRounder,this.yRounder=new CoordRounder}},{key:"round",value:function(t,a){return{x:this.xRounder.round(t),y:this.yRounder.round(a)}}}]),n}(),CoordRounder=function(){function n(){_classCallCheck(this,n),this.tree=new Tree,this.round(0)}return _createClass(n,[{key:"round",value:function(t){var a=this.tree.add(t),l=this.tree.prev(a);if(l!==null&&cmp(a.key,l.key)===0)return this.tree.remove(t),l.key;var h=this.tree.next(a);return h!==null&&cmp(a.key,h.key)===0?(this.tree.remove(t),h.key):t}}]),n}(),rounder=new PtRounder,crossProduct=function(e,t){return e.x*t.y-e.y*t.x},dotProduct=function(e,t){return e.x*t.x+e.y*t.y},compareVectorAngles=function(e,t,a){var l={x:t.x-e.x,y:t.y-e.y},h={x:a.x-e.x,y:a.y-e.y},g=crossProduct(l,h);return cmp(g,0)},length$1=function(e){return Math.sqrt(dotProduct(e,e))},sineOfAngle=function(e,t,a){var l={x:t.x-e.x,y:t.y-e.y},h={x:a.x-e.x,y:a.y-e.y};return crossProduct(h,l)/length$1(h)/length$1(l)},cosineOfAngle=function(e,t,a){var l={x:t.x-e.x,y:t.y-e.y},h={x:a.x-e.x,y:a.y-e.y};return dotProduct(h,l)/length$1(h)/length$1(l)},horizontalIntersection=function(e,t,a){return t.y===0?null:{x:e.x+t.x/t.y*(a-e.y),y:a}},verticalIntersection=function(e,t,a){return t.x===0?null:{x:a,y:e.y+t.y/t.x*(a-e.x)}},intersection=function(e,t,a,l){if(t.x===0)return verticalIntersection(a,l,e.x);if(l.x===0)return verticalIntersection(e,t,a.x);if(t.y===0)return horizontalIntersection(a,l,e.y);if(l.y===0)return horizontalIntersection(e,t,a.y);var h=crossProduct(t,l);if(h==0)return null;var g={x:a.x-e.x,y:a.y-e.y},p=crossProduct(g,t)/h,y=crossProduct(g,l)/h,b=e.x+y*t.x,E=a.x+p*l.x,C=e.y+y*t.y,A=a.y+p*l.y,B=(b+E)/2,M=(C+A)/2;return{x:B,y:M}},SweepEvent=function(){_createClass(n,null,[{key:"compare",value:function(t,a){var l=n.comparePoints(t.point,a.point);return l!==0?l:(t.point!==a.point&&t.link(a),t.isLeft!==a.isLeft?t.isLeft?1:-1:Segment.compare(t.segment,a.segment))}},{key:"comparePoints",value:function(t,a){return t.x<a.x?-1:t.x>a.x?1:t.y<a.y?-1:t.y>a.y?1:0}}]);function n(e,t){_classCallCheck(this,n),e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}return _createClass(n,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var a=t.point.events,l=0,h=a.length;l<h;l++){var g=a[l];this.point.events.push(g),g.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,a=0;a<t;a++){var l=this.point.events[a];if(l.segment.consumedBy===void 0)for(var h=a+1;h<t;h++){var g=this.point.events[h];g.consumedBy===void 0&&l.otherSE.point.events===g.otherSE.point.events&&l.segment.consume(g.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],a=0,l=this.point.events.length;a<l;a++){var h=this.point.events[a];h!==this&&!h.segment.ringOut&&h.segment.isInResult()&&t.push(h)}return t}},{key:"getLeftmostComparator",value:function(t){var a=this,l=new Map,h=function(p){var y=p.otherSE;l.set(p,{sine:sineOfAngle(a.point,t.point,y.point),cosine:cosineOfAngle(a.point,t.point,y.point)})};return function(g,p){l.has(g)||h(g),l.has(p)||h(p);var y=l.get(g),b=y.sine,E=y.cosine,C=l.get(p),A=C.sine,B=C.cosine;return b>=0&&A>=0?E<B?1:E>B?-1:0:b<0&&A<0?E<B?-1:E>B?1:0:A<b?-1:A>b?1:0}}}]),n}(),segmentId=0,Segment=function(){_createClass(n,null,[{key:"compare",value:function(t,a){var l=t.leftSE.point.x,h=a.leftSE.point.x,g=t.rightSE.point.x,p=a.rightSE.point.x;if(p<l)return 1;if(g<h)return-1;var y=t.leftSE.point.y,b=a.leftSE.point.y,E=t.rightSE.point.y,C=a.rightSE.point.y;if(l<h){if(b<y&&b<E)return 1;if(b>y&&b>E)return-1;var A=t.comparePoint(a.leftSE.point);if(A<0)return 1;if(A>0)return-1;var B=a.comparePoint(t.rightSE.point);return B!==0?B:-1}if(l>h){if(y<b&&y<C)return-1;if(y>b&&y>C)return 1;var M=a.comparePoint(t.leftSE.point);if(M!==0)return M;var N=t.comparePoint(a.rightSE.point);return N<0?1:N>0?-1:1}if(y<b)return-1;if(y>b)return 1;if(g<p){var Z=a.comparePoint(t.rightSE.point);if(Z!==0)return Z}if(g>p){var ee=t.comparePoint(a.rightSE.point);if(ee<0)return 1;if(ee>0)return-1}if(g!==p){var F=E-y,O=g-l,k=C-b,H=p-h;if(F>O&&k<H)return 1;if(F<O&&k>H)return-1}return g>p?1:g<p||E<C?-1:E>C?1:t.id<a.id?-1:t.id>a.id?1:0}}]);function n(e,t,a,l){_classCallCheck(this,n),this.id=++segmentId,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=a,this.windings=l}return _createClass(n,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,a=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<a?t:a},ur:{x:this.rightSE.point.x,y:t>a?t:a}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var a=this.leftSE.point,l=this.rightSE.point,h=this.vector();if(a.x===l.x)return t.x===a.x?0:t.x<a.x?1:-1;var g=(t.y-a.y)/h.y,p=a.x+g*h.x;if(t.x===p)return 0;var y=(t.x-a.x)/h.x,b=a.y+y*h.y;return t.y===b?0:t.y<b?-1:1}},{key:"getIntersection",value:function(t){var a=this.bbox(),l=t.bbox(),h=getBboxOverlap(a,l);if(h===null)return null;var g=this.leftSE.point,p=this.rightSE.point,y=t.leftSE.point,b=t.rightSE.point,E=isInBbox(a,y)&&this.comparePoint(y)===0,C=isInBbox(l,g)&&t.comparePoint(g)===0,A=isInBbox(a,b)&&this.comparePoint(b)===0,B=isInBbox(l,p)&&t.comparePoint(p)===0;if(C&&E)return B&&!A?p:!B&&A?b:null;if(C)return A&&g.x===b.x&&g.y===b.y?null:g;if(E)return B&&p.x===y.x&&p.y===y.y?null:y;if(B&&A)return null;if(B)return p;if(A)return b;var M=intersection(g,this.vector(),y,t.vector());return M===null||!isInBbox(h,M)?null:rounder.round(M.x,M.y)}},{key:"split",value:function(t){var a=[],l=t.events!==void 0,h=new SweepEvent(t,!0),g=new SweepEvent(t,!1),p=this.rightSE;this.replaceRightSE(g),a.push(g),a.push(h);var y=new n(h,p,this.rings.slice(),this.windings.slice());return SweepEvent.comparePoints(y.leftSE.point,y.rightSE.point)>0&&y.swapEvents(),SweepEvent.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),l&&(h.checkForConsuming(),g.checkForConsuming()),a}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var a=0,l=this.windings.length;a<l;a++)this.windings[a]*=-1}},{key:"consume",value:function(t){for(var a=this,l=t;a.consumedBy;)a=a.consumedBy;for(;l.consumedBy;)l=l.consumedBy;var h=n.compare(a,l);if(h!==0){if(h>0){var g=a;a=l,l=g}if(a.prev===l){var p=a;a=l,l=p}for(var y=0,b=l.rings.length;y<b;y++){var E=l.rings[y],C=l.windings[y],A=a.rings.indexOf(E);A===-1?(a.rings.push(E),a.windings.push(C)):a.windings[A]+=C}l.rings=null,l.windings=null,l.consumedBy=a,l.leftSE.consumedBy=a.leftSE,l.rightSE.consumedBy=a.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var a=this._afterState.rings,l=this._afterState.windings,h=this._afterState.multiPolys,g=0,p=this.rings.length;g<p;g++){var y=this.rings[g],b=this.windings[g],E=a.indexOf(y);E===-1?(a.push(y),l.push(b)):l[E]+=b}for(var C=[],A=[],B=0,M=a.length;B<M;B++)if(l[B]!==0){var N=a[B],Z=N.poly;if(A.indexOf(Z)===-1)if(N.isExterior)C.push(Z);else{A.indexOf(Z)===-1&&A.push(Z);var ee=C.indexOf(N.poly);ee!==-1&&C.splice(ee,1)}}for(var F=0,O=C.length;F<O;F++){var k=C[F].multiPoly;h.indexOf(k)===-1&&h.push(k)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,a=this.afterState().multiPolys;switch(operation.type){case"union":{var l=t.length===0,h=a.length===0;this._isInResult=l!==h;break}case"intersection":{var g,p;t.length<a.length?(g=t.length,p=a.length):(g=a.length,p=t.length),this._isInResult=p===operation.numMultiPolys&&g<p;break}case"xor":{var y=Math.abs(t.length-a.length);this._isInResult=y%2===1;break}case"difference":{var b=function(C){return C.length===1&&C[0].isSubject};this._isInResult=b(t)!==b(a);break}default:throw new Error("Unrecognized operation type found ".concat(operation.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,a,l){var h,g,p,y=SweepEvent.comparePoints(t,a);if(y<0)h=t,g=a,p=1;else if(y>0)h=a,g=t,p=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var b=new SweepEvent(h,!0),E=new SweepEvent(g,!1);return new n(b,E,[l],[p])}}]),n}(),RingIn=function(){function n(e,t,a){if(_classCallCheck(this,n),!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=a,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var l=rounder.round(e[0][0],e[0][1]);this.bbox={ll:{x:l.x,y:l.y},ur:{x:l.x,y:l.y}};for(var h=l,g=1,p=e.length;g<p;g++){if(typeof e[g][0]!="number"||typeof e[g][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var y=rounder.round(e[g][0],e[g][1]);y.x===h.x&&y.y===h.y||(this.segments.push(Segment.fromRing(h,y,this)),y.x<this.bbox.ll.x&&(this.bbox.ll.x=y.x),y.y<this.bbox.ll.y&&(this.bbox.ll.y=y.y),y.x>this.bbox.ur.x&&(this.bbox.ur.x=y.x),y.y>this.bbox.ur.y&&(this.bbox.ur.y=y.y),h=y)}(l.x!==h.x||l.y!==h.y)&&this.segments.push(Segment.fromRing(h,l,this))}return _createClass(n,[{key:"getSweepEvents",value:function(){for(var t=[],a=0,l=this.segments.length;a<l;a++){var h=this.segments[a];t.push(h.leftSE),t.push(h.rightSE)}return t}}]),n}(),PolyIn=function(){function n(e,t){if(_classCallCheck(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new RingIn(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var a=1,l=e.length;a<l;a++){var h=new RingIn(e[a],this,!1);h.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=h.bbox.ll.x),h.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=h.bbox.ll.y),h.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=h.bbox.ur.x),h.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=h.bbox.ur.y),this.interiorRings.push(h)}this.multiPoly=t}return _createClass(n,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),a=0,l=this.interiorRings.length;a<l;a++)for(var h=this.interiorRings[a].getSweepEvents(),g=0,p=h.length;g<p;g++)t.push(h[g]);return t}}]),n}(),MultiPolyIn=function(){function n(e,t){if(_classCallCheck(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var a=0,l=e.length;a<l;a++){var h=new PolyIn(e[a],this);h.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=h.bbox.ll.x),h.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=h.bbox.ll.y),h.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=h.bbox.ur.x),h.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=h.bbox.ur.y),this.polys.push(h)}this.isSubject=t}return _createClass(n,[{key:"getSweepEvents",value:function(){for(var t=[],a=0,l=this.polys.length;a<l;a++)for(var h=this.polys[a].getSweepEvents(),g=0,p=h.length;g<p;g++)t.push(h[g]);return t}}]),n}(),RingOut=function(){_createClass(n,null,[{key:"factory",value:function(t){for(var a=[],l=0,h=t.length;l<h;l++){var g=t[l];if(!(!g.isInResult()||g.ringOut)){for(var p=null,y=g.leftSE,b=g.rightSE,E=[y],C=y.point,A=[];p=y,y=b,E.push(y),y.point!==C;)for(;;){var B=y.getAvailableLinkedEvents();if(B.length===0){var M=E[0].point,N=E[E.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(M.x,",")+" ".concat(M.y,"]. Last matching segment found ends at")+" [".concat(N.x,", ").concat(N.y,"]."))}if(B.length===1){b=B[0].otherSE;break}for(var Z=null,ee=0,F=A.length;ee<F;ee++)if(A[ee].point===y.point){Z=ee;break}if(Z!==null){var O=A.splice(Z)[0],k=E.splice(O.index);k.unshift(k[0].otherSE),a.push(new n(k.reverse()));continue}A.push({index:E.length,point:y.point});var H=y.getLeftmostComparator(p);b=B.sort(H)[0].otherSE;break}a.push(new n(E))}}return a}}]);function n(e){_classCallCheck(this,n),this.events=e;for(var t=0,a=e.length;t<a;t++)e[t].segment.ringOut=this;this.poly=null}return _createClass(n,[{key:"getGeom",value:function(){for(var t=this.events[0].point,a=[t],l=1,h=this.events.length-1;l<h;l++){var g=this.events[l].point,p=this.events[l+1].point;compareVectorAngles(g,t,p)!==0&&(a.push(g),t=g)}if(a.length===1)return null;var y=a[0],b=a[1];compareVectorAngles(y,t,b)===0&&a.shift(),a.push(a[0]);for(var E=this.isExteriorRing()?1:-1,C=this.isExteriorRing()?0:a.length-1,A=this.isExteriorRing()?a.length:-1,B=[],M=C;M!=A;M+=E)B.push([a[M].x,a[M].y]);return B}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],a=1,l=this.events.length;a<l;a++){var h=this.events[a];SweepEvent.compare(t,h)>0&&(t=h)}for(var g=t.segment.prevInResult(),p=g?g.prevInResult():null;;){if(!g)return null;if(!p)return g.ringOut;if(p.ringOut!==g.ringOut)return p.ringOut.enclosingRing()!==g.ringOut?g.ringOut:g.ringOut.enclosingRing();g=p.prevInResult(),p=g?g.prevInResult():null}}}]),n}(),PolyOut=function(){function n(e){_classCallCheck(this,n),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return _createClass(n,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var a=0,l=this.interiorRings.length;a<l;a++){var h=this.interiorRings[a].getGeom();h!==null&&t.push(h)}return t}}]),n}(),MultiPolyOut=function(){function n(e){_classCallCheck(this,n),this.rings=e,this.polys=this._composePolys(e)}return _createClass(n,[{key:"getGeom",value:function(){for(var t=[],a=0,l=this.polys.length;a<l;a++){var h=this.polys[a].getGeom();h!==null&&t.push(h)}return t}},{key:"_composePolys",value:function(t){for(var a=[],l=0,h=t.length;l<h;l++){var g=t[l];if(!g.poly)if(g.isExteriorRing())a.push(new PolyOut(g));else{var p=g.enclosingRing();p.poly||a.push(new PolyOut(p)),p.poly.addInterior(g)}}return a}}]),n}(),SweepLine=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Segment.compare;_classCallCheck(this,n),this.queue=e,this.tree=new Tree(t),this.segments=[]}return _createClass(n,[{key:"process",value:function(t){var a=t.segment,l=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(a),l;var h=t.isLeft?this.tree.insert(a):this.tree.find(a);if(!h)throw new Error("Unable to find segment #".concat(a.id," ")+"[".concat(a.leftSE.point.x,", ").concat(a.leftSE.point.y,"] -> ")+"[".concat(a.rightSE.point.x,", ").concat(a.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var g=h,p=h,y=void 0,b=void 0;y===void 0;)g=this.tree.prev(g),g===null?y=null:g.key.consumedBy===void 0&&(y=g.key);for(;b===void 0;)p=this.tree.next(p),p===null?b=null:p.key.consumedBy===void 0&&(b=p.key);if(t.isLeft){var E=null;if(y){var C=y.getIntersection(a);if(C!==null&&(a.isAnEndpoint(C)||(E=C),!y.isAnEndpoint(C)))for(var A=this._splitSafely(y,C),B=0,M=A.length;B<M;B++)l.push(A[B])}var N=null;if(b){var Z=b.getIntersection(a);if(Z!==null&&(a.isAnEndpoint(Z)||(N=Z),!b.isAnEndpoint(Z)))for(var ee=this._splitSafely(b,Z),F=0,O=ee.length;F<O;F++)l.push(ee[F])}if(E!==null||N!==null){var k=null;if(E===null)k=N;else if(N===null)k=E;else{var H=SweepEvent.comparePoints(E,N);k=H<=0?E:N}this.queue.remove(a.rightSE),l.push(a.rightSE);for(var ce=a.split(k),U=0,te=ce.length;U<te;U++)l.push(ce[U])}l.length>0?(this.tree.remove(a),l.push(t)):(this.segments.push(a),a.prev=y)}else{if(y&&b){var re=y.getIntersection(b);if(re!==null){if(!y.isAnEndpoint(re))for(var ue=this._splitSafely(y,re),V=0,S=ue.length;V<S;V++)l.push(ue[V]);if(!b.isAnEndpoint(re))for(var T=this._splitSafely(b,re),G=0,Q=T.length;G<Q;G++)l.push(T[G])}}this.tree.remove(a)}return l}},{key:"_splitSafely",value:function(t,a){this.tree.remove(t);var l=t.rightSE;this.queue.remove(l);var h=t.split(a);return h.push(l),t.consumedBy===void 0&&this.tree.insert(t),h}}]),n}(),POLYGON_CLIPPING_MAX_QUEUE_SIZE=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Operation=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"run",value:function(t,a,l){operation.type=t,rounder.reset();for(var h=[new MultiPolyIn(a,!0)],g=0,p=l.length;g<p;g++)h.push(new MultiPolyIn(l[g],!1));if(operation.numMultiPolys=h.length,operation.type==="difference")for(var y=h[0],b=1;b<h.length;)getBboxOverlap(h[b].bbox,y.bbox)!==null?b++:h.splice(b,1);if(operation.type==="intersection"){for(var E=0,C=h.length;E<C;E++)for(var A=h[E],B=E+1,M=h.length;B<M;B++)if(getBboxOverlap(A.bbox,h[B].bbox)===null)return[]}for(var N=new Tree(SweepEvent.compare),Z=0,ee=h.length;Z<ee;Z++)for(var F=h[Z].getSweepEvents(),O=0,k=F.length;O<k;O++)if(N.insert(F[O]),N.size>POLYGON_CLIPPING_MAX_QUEUE_SIZE)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var H=new SweepLine(N),ce=N.size,U=N.pop();U;){var te=U.key;if(N.size===ce){var re=te.segment;throw new Error("Unable to pop() ".concat(te.isLeft?"left":"right"," SweepEvent ")+"[".concat(te.point.x,", ").concat(te.point.y,"] from segment #").concat(re.id," ")+"[".concat(re.leftSE.point.x,", ").concat(re.leftSE.point.y,"] -> ")+"[".concat(re.rightSE.point.x,", ").concat(re.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(N.size>POLYGON_CLIPPING_MAX_QUEUE_SIZE)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(H.segments.length>POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var ue=H.process(te),V=0,S=ue.length;V<S;V++){var T=ue[V];T.consumedBy===void 0&&N.insert(T)}ce=N.size,U=N.pop()}rounder.reset();var G=RingOut.factory(H.segments),Q=new MultiPolyOut(G);return Q.getGeom()}}]),n}(),operation=new Operation,union$2=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),l=1;l<t;l++)a[l-1]=arguments[l];return operation.run("union",e,a)},intersection$1=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),l=1;l<t;l++)a[l-1]=arguments[l];return operation.run("intersection",e,a)},xor=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),l=1;l<t;l++)a[l-1]=arguments[l];return operation.run("xor",e,a)},difference=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),l=1;l<t;l++)a[l-1]=arguments[l];return operation.run("difference",e,a)},index={union:union$2,intersection:intersection$1,xor,difference};const polygonClipping=index;"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var t=Object(this),a=Math.max(Math.min(t.length,9007199254740991),0)||0,l=1 in arguments&&parseInt(Number(arguments[1]),10)||0;l=l<0?Math.max(a+l,0):Math.min(l,a);var h=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:a;for(h=h<0?Math.max(a+arguments[2],0):Math.min(h,a);l<h;)t[l]=e,++l;return t},writable:!0});Number.isFinite=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)};Number.isInteger=Number.isInteger||function(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(n){return n!==n};Math.trunc=Math.trunc||function(n){return n<0?Math.ceil(n):Math.floor(n)};var NumberUtil=function(){};NumberUtil.prototype.interfaces_=function(){return[]};NumberUtil.prototype.getClass=function(){return NumberUtil};NumberUtil.prototype.equalsWithTolerance=function(e,t,a){return Math.abs(e-t)<=a};var IllegalArgumentException=function(n){function e(t){n.call(this,t),this.name="IllegalArgumentException",this.message=t,this.stack=new n().stack}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),Double=function(){},staticAccessors$1={MAX_VALUE:{configurable:!0}};Double.isNaN=function(e){return Number.isNaN(e)};Double.doubleToLongBits=function(e){return e};Double.longBitsToDouble=function(e){return e};Double.isInfinite=function(e){return!Number.isFinite(e)};staticAccessors$1.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(Double,staticAccessors$1);var Comparable=function(){},Clonable=function(){},Comparator=function(){};function Serializable(){}var Coordinate=function n(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=n.NULL_ORDINATE;else if(arguments.length===1){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=n.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},staticAccessors={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Coordinate.prototype.setOrdinate=function(e,t){switch(e){case Coordinate.X:this.x=t;break;case Coordinate.Y:this.y=t;break;case Coordinate.Z:this.z=t;break;default:throw new IllegalArgumentException("Invalid ordinate index: "+e)}};Coordinate.prototype.equals2D=function(){if(arguments.length===1){var e=arguments[0];return!(this.x!==e.x||this.y!==e.y)}else if(arguments.length===2){var t=arguments[0],a=arguments[1];return!(!NumberUtil.equalsWithTolerance(this.x,t.x,a)||!NumberUtil.equalsWithTolerance(this.y,t.y,a))}};Coordinate.prototype.getOrdinate=function(e){switch(e){case Coordinate.X:return this.x;case Coordinate.Y:return this.y;case Coordinate.Z:return this.z}throw new IllegalArgumentException("Invalid ordinate index: "+e)};Coordinate.prototype.equals3D=function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||Double.isNaN(this.z))&&Double.isNaN(e.z)};Coordinate.prototype.equals=function(e){return e instanceof Coordinate?this.equals2D(e):!1};Coordinate.prototype.equalInZ=function(e,t){return NumberUtil.equalsWithTolerance(this.z,e.z,t)};Coordinate.prototype.compareTo=function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0};Coordinate.prototype.clone=function(){};Coordinate.prototype.copy=function(){return new Coordinate(this)};Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};Coordinate.prototype.distance3D=function(e){var t=this.x-e.x,a=this.y-e.y,l=this.z-e.z;return Math.sqrt(t*t+a*a+l*l)};Coordinate.prototype.distance=function(e){var t=this.x-e.x,a=this.y-e.y;return Math.sqrt(t*t+a*a)};Coordinate.prototype.hashCode=function(){var e=17;return e=37*e+Coordinate.hashCode(this.x),e=37*e+Coordinate.hashCode(this.y),e};Coordinate.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y,this.z=e.z};Coordinate.prototype.interfaces_=function(){return[Comparable,Clonable,Serializable]};Coordinate.prototype.getClass=function(){return Coordinate};Coordinate.hashCode=function(){if(arguments.length===1){var e=arguments[0],t=Double.doubleToLongBits(e);return Math.trunc((t^t)>>>32)}};staticAccessors.DimensionalComparator.get=function(){return DimensionalComparator};staticAccessors.serialVersionUID.get=function(){return 6683108902428367e3};staticAccessors.NULL_ORDINATE.get=function(){return Double.NaN};staticAccessors.X.get=function(){return 0};staticAccessors.Y.get=function(){return 1};staticAccessors.Z.get=function(){return 2};Object.defineProperties(Coordinate,staticAccessors);var DimensionalComparator=function(e){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new IllegalArgumentException("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}};DimensionalComparator.prototype.compare=function(e,t){var a=e,l=t,h=DimensionalComparator.compare(a.x,l.x);if(h!==0)return h;var g=DimensionalComparator.compare(a.y,l.y);if(g!==0)return g;if(this._dimensionsToTest<=2)return 0;var p=DimensionalComparator.compare(a.z,l.z);return p};DimensionalComparator.prototype.interfaces_=function(){return[Comparator]};DimensionalComparator.prototype.getClass=function(){return DimensionalComparator};DimensionalComparator.compare=function(e,t){return e<t?-1:e>t?1:Double.isNaN(e)?Double.isNaN(t)?0:-1:Double.isNaN(t)?1:0};var CoordinateSequenceFactory=function(){};CoordinateSequenceFactory.prototype.create=function(){};CoordinateSequenceFactory.prototype.interfaces_=function(){return[]};CoordinateSequenceFactory.prototype.getClass=function(){return CoordinateSequenceFactory};var Location=function(){},staticAccessors$4={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Location.prototype.interfaces_=function(){return[]};Location.prototype.getClass=function(){return Location};Location.toLocationSymbol=function(e){switch(e){case Location.EXTERIOR:return"e";case Location.BOUNDARY:return"b";case Location.INTERIOR:return"i";case Location.NONE:return"-"}throw new IllegalArgumentException("Unknown location value: "+e)};staticAccessors$4.INTERIOR.get=function(){return 0};staticAccessors$4.BOUNDARY.get=function(){return 1};staticAccessors$4.EXTERIOR.get=function(){return 2};staticAccessors$4.NONE.get=function(){return-1};Object.defineProperties(Location,staticAccessors$4);var hasInterface=function(n,e){return n.interfaces_&&n.interfaces_().indexOf(e)>-1},MathUtil=function(){},staticAccessors$5={LOG_10:{configurable:!0}};MathUtil.prototype.interfaces_=function(){return[]};MathUtil.prototype.getClass=function(){return MathUtil};MathUtil.log10=function(e){var t=Math.log(e);return Double.isInfinite(t)||Double.isNaN(t)?t:t/MathUtil.LOG_10};MathUtil.min=function(e,t,a,l){var h=e;return t<h&&(h=t),a<h&&(h=a),l<h&&(h=l),h};MathUtil.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1],a=arguments[2];return e<t?t:e>a?a:e}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var l=arguments[0],h=arguments[1],g=arguments[2];return l<h?h:l>g?g:l}};MathUtil.wrap=function(e,t){return e<0?t- -e%t:e%t};MathUtil.max=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],a=arguments[2],l=e;return t>l&&(l=t),a>l&&(l=a),l}else if(arguments.length===4){var h=arguments[0],g=arguments[1],p=arguments[2],y=arguments[3],b=h;return g>b&&(b=g),p>b&&(b=p),y>b&&(b=y),b}};MathUtil.average=function(e,t){return(e+t)/2};staticAccessors$5.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(MathUtil,staticAccessors$5);var StringBuffer=function(e){this.str=e};StringBuffer.prototype.append=function(e){this.str+=e};StringBuffer.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)};StringBuffer.prototype.toString=function(e){return this.str};var Integer=function(e){this.value=e};Integer.prototype.intValue=function(){return this.value};Integer.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0};Integer.isNaN=function(e){return Number.isNaN(e)};var Character=function(){};Character.isWhitespace=function(e){return e<=32&&e>=0||e===127};Character.toUpperCase=function(e){return e.toUpperCase()};var DD=function n(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof n){var t=arguments[0];this.init(t)}else if(typeof arguments[0]=="string"){var a=arguments[0];n.call(this,n.parse(a))}}else if(arguments.length===2){var l=arguments[0],h=arguments[1];this.init(l,h)}},staticAccessors$7={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};DD.prototype.le=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<=e._lo};DD.prototype.extractSignificantDigits=function(e,t){var a=this.abs(),l=DD.magnitude(a._hi),h=DD.TEN.pow(l);a=a.divide(h),a.gt(DD.TEN)?(a=a.divide(DD.TEN),l+=1):a.lt(DD.ONE)&&(a=a.multiply(DD.TEN),l-=1);for(var g=l+1,p=new StringBuffer,y=DD.MAX_PRINT_DIGITS-1,b=0;b<=y;b++){e&&b===g&&p.append(".");var E=Math.trunc(a._hi);if(E<0)break;var C=!1,A=0;E>9?(C=!0,A="9"):A="0"+E,p.append(A),a=a.subtract(DD.valueOf(E)).multiply(DD.TEN),C&&a.selfAdd(DD.TEN);var B=!0,M=DD.magnitude(a._hi);if(M<0&&Math.abs(M)>=y-b&&(B=!1),!B)break}return t[0]=l,p.toString()};DD.prototype.sqr=function(){return this.multiply(this)};DD.prototype.doubleValue=function(){return this._hi+this._lo};DD.prototype.subtract=function(){if(arguments[0]instanceof DD){var e=arguments[0];return this.add(e.negate())}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.add(-t)}};DD.prototype.equals=function(){if(arguments.length===1){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}};DD.prototype.isZero=function(){return this._hi===0&&this._lo===0};DD.prototype.selfSubtract=function(){if(arguments[0]instanceof DD){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}};DD.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};DD.prototype.min=function(e){return this.le(e)?this:e};DD.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof DD){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfDivide(t,0)}}else if(arguments.length===2){var a=arguments[0],l=arguments[1],h=null,g=null,p=null,y=null,b=null,E=null,C=null,A=null;return b=this._hi/a,E=DD.SPLIT*b,h=E-b,A=DD.SPLIT*a,h=E-h,g=b-h,p=A-a,C=b*a,p=A-p,y=a-p,A=h*p-C+h*y+g*p+g*y,E=(this._hi-C-A+this._lo-b*l)/a,A=b+E,this._hi=A,this._lo=b-A+E,this}};DD.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};DD.prototype.divide=function(){if(arguments[0]instanceof DD){var e=arguments[0],t=null,a=null,l=null,h=null,g=null,p=null,y=null,b=null;g=this._hi/e._hi,p=DD.SPLIT*g,t=p-g,b=DD.SPLIT*e._hi,t=p-t,a=g-t,l=b-e._hi,y=g*e._hi,l=b-l,h=e._hi-l,b=t*l-y+t*h+a*l+a*h,p=(this._hi-y-b+this._lo-g*e._lo)/e._hi,b=g+p;var E=b,C=g-b+p;return new DD(E,C)}else if(typeof arguments[0]=="number"){var A=arguments[0];return Double.isNaN(A)?DD.createNaN():DD.copy(this).selfDivide(A,0)}};DD.prototype.ge=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>=e._lo};DD.prototype.pow=function(e){if(e===0)return DD.valueOf(1);var t=new DD(this),a=DD.valueOf(1),l=Math.abs(e);if(l>1)for(;l>0;)l%2===1&&a.selfMultiply(t),l/=2,l>0&&(t=t.sqr());else a=t;return e<0?a.reciprocal():a};DD.prototype.ceil=function(){if(this.isNaN())return DD.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new DD(e,t)};DD.prototype.compareTo=function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0};DD.prototype.rint=function(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()};DD.prototype.setValue=function(){if(arguments[0]instanceof DD){var e=arguments[0];return this.init(e),this}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.init(t),this}};DD.prototype.max=function(e){return this.ge(e)?this:e};DD.prototype.sqrt=function(){if(this.isZero())return DD.valueOf(0);if(this.isNegative())return DD.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,a=DD.valueOf(t),l=this.subtract(a.sqr()),h=l._hi*(e*.5);return a.add(h)};DD.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof DD){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0],a=null,l=null,h=null,g=null,p=null,y=null;return h=this._hi+t,p=h-this._hi,g=h-p,g=t-p+(this._hi-g),y=g+this._lo,a=h+y,l=y+(h-a),this._hi=a+l,this._lo=l+(a-this._hi),this}}else if(arguments.length===2){var b=arguments[0],E=arguments[1],C=null,A=null,B=null,M=null,N=null,Z=null,ee=null,F=null;N=this._hi+b,B=this._lo+E,ee=N-this._hi,F=B-this._lo,Z=N-ee,M=B-F,Z=b-ee+(this._hi-Z),M=E-F+(this._lo-M),ee=Z+B,C=N+ee,A=ee+(N-C),ee=M+A;var O=C+ee,k=ee+(C-O);return this._hi=O,this._lo=k,this}};DD.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof DD){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfMultiply(t,0)}}else if(arguments.length===2){var a=arguments[0],l=arguments[1],h=null,g=null,p=null,y=null,b=null,E=null;b=DD.SPLIT*this._hi,h=b-this._hi,E=DD.SPLIT*a,h=b-h,g=this._hi-h,p=E-a,b=this._hi*a,p=E-p,y=a-p,E=h*p-b+h*y+g*p+g*y+(this._hi*l+this._lo*a);var C=b+E;h=b-C;var A=E+h;return this._hi=C,this._lo=A,this}};DD.prototype.selfSqr=function(){return this.selfMultiply(this)};DD.prototype.floor=function(){if(this.isNaN())return DD.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new DD(e,t)};DD.prototype.negate=function(){return this.isNaN()?this:new DD(-this._hi,-this._lo)};DD.prototype.clone=function(){};DD.prototype.multiply=function(){if(arguments[0]instanceof DD){var e=arguments[0];return e.isNaN()?DD.createNaN():DD.copy(this).selfMultiply(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return Double.isNaN(t)?DD.createNaN():DD.copy(this).selfMultiply(t,0)}};DD.prototype.isNaN=function(){return Double.isNaN(this._hi)};DD.prototype.intValue=function(){return Math.trunc(this._hi)};DD.prototype.toString=function(){var e=DD.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()};DD.prototype.toStandardNotation=function(){var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),a=this.extractSignificantDigits(!0,t),l=t[0]+1,h=a;if(a.charAt(0)===".")h="0"+a;else if(l<0)h="0."+DD.stringOfChar("0",-l)+a;else if(a.indexOf(".")===-1){var g=l-a.length,p=DD.stringOfChar("0",g);h=a+p+".0"}return this.isNegative()?"-"+h:h};DD.prototype.reciprocal=function(){var e=null,t=null,a=null,l=null,h=null,g=null,p=null,y=null;h=1/this._hi,g=DD.SPLIT*h,e=g-h,y=DD.SPLIT*this._hi,e=g-e,t=h-e,a=y-this._hi,p=h*this._hi,a=y-a,l=this._hi-a,y=e*a-p+e*l+t*a+t*l,g=(1-p-y-h*this._lo)/this._hi;var b=h+g,E=h-b+g;return new DD(b,E)};DD.prototype.toSciNotation=function(){if(this.isZero())return DD.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),a=this.extractSignificantDigits(!1,t),l=DD.SCI_NOT_EXPONENT_CHAR+t[0];if(a.charAt(0)==="0")throw new Error("Found leading zero: "+a);var h="";a.length>1&&(h=a.substring(1));var g=a.charAt(0)+"."+h;return this.isNegative()?"-"+g+l:g+l};DD.prototype.abs=function(){return this.isNaN()?DD.NaN:this.isNegative()?this.negate():new DD(this)};DD.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};DD.prototype.lt=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<e._lo};DD.prototype.add=function(){if(arguments[0]instanceof DD){var e=arguments[0];return DD.copy(this).selfAdd(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return DD.copy(this).selfAdd(t)}};DD.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof DD){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(arguments.length===2){var a=arguments[0],l=arguments[1];this._hi=a,this._lo=l}};DD.prototype.gt=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>e._lo};DD.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};DD.prototype.trunc=function(){return this.isNaN()?DD.NaN:this.isPositive()?this.floor():this.ceil()};DD.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};DD.prototype.interfaces_=function(){return[Serializable,Comparable,Clonable]};DD.prototype.getClass=function(){return DD};DD.sqr=function(e){return DD.valueOf(e).selfMultiply(e)};DD.valueOf=function(){if(typeof arguments[0]=="string"){var e=arguments[0];return DD.parse(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return new DD(t)}};DD.sqrt=function(e){return DD.valueOf(e).sqrt()};DD.parse=function(e){for(var t=0,a=e.length;Character.isWhitespace(e.charAt(t));)t++;var l=!1;if(t<a){var h=e.charAt(t);(h==="-"||h==="+")&&(t++,h==="-"&&(l=!0))}for(var g=new DD,p=0,y=0,b=0;!(t>=a);){var E=e.charAt(t);if(t++,Character.isDigit(E)){var C=E-"0";g.selfMultiply(DD.TEN),g.selfAdd(C),p++;continue}if(E==="."){y=p;continue}if(E==="e"||E==="E"){var A=e.substring(t);try{b=Integer.parseInt(A)}catch(ee){throw ee instanceof Error?new Error("Invalid exponent "+A+" in string "+e):ee}finally{}break}throw new Error("Unexpected character '"+E+"' at position "+t+" in string "+e)}var B=g,M=p-y-b;if(M===0)B=g;else if(M>0){var N=DD.TEN.pow(M);B=g.divide(N)}else if(M<0){var Z=DD.TEN.pow(-M);B=g.multiply(Z)}return l?B.negate():B};DD.createNaN=function(){return new DD(Double.NaN,Double.NaN)};DD.copy=function(e){return new DD(e)};DD.magnitude=function(e){var t=Math.abs(e),a=Math.log(t)/Math.log(10),l=Math.trunc(Math.floor(a)),h=Math.pow(10,l);return h*10<=t&&(l+=1),l};DD.stringOfChar=function(e,t){for(var a=new StringBuffer,l=0;l<t;l++)a.append(e);return a.toString()};staticAccessors$7.PI.get=function(){return new DD(3.141592653589793,12246467991473532e-32)};staticAccessors$7.TWO_PI.get=function(){return new DD(6.283185307179586,24492935982947064e-32)};staticAccessors$7.PI_2.get=function(){return new DD(1.5707963267948966,6123233995736766e-32)};staticAccessors$7.E.get=function(){return new DD(2.718281828459045,14456468917292502e-32)};staticAccessors$7.NaN.get=function(){return new DD(Double.NaN,Double.NaN)};staticAccessors$7.EPS.get=function(){return 123259516440783e-46};staticAccessors$7.SPLIT.get=function(){return 134217729};staticAccessors$7.MAX_PRINT_DIGITS.get=function(){return 32};staticAccessors$7.TEN.get=function(){return DD.valueOf(10)};staticAccessors$7.ONE.get=function(){return DD.valueOf(1)};staticAccessors$7.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};staticAccessors$7.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(DD,staticAccessors$7);var CGAlgorithmsDD=function(){},staticAccessors$6={DP_SAFE_EPSILON:{configurable:!0}};CGAlgorithmsDD.prototype.interfaces_=function(){return[]};CGAlgorithmsDD.prototype.getClass=function(){return CGAlgorithmsDD};CGAlgorithmsDD.orientationIndex=function(e,t,a){var l=CGAlgorithmsDD.orientationIndexFilter(e,t,a);if(l<=1)return l;var h=DD.valueOf(t.x).selfAdd(-e.x),g=DD.valueOf(t.y).selfAdd(-e.y),p=DD.valueOf(a.x).selfAdd(-t.x),y=DD.valueOf(a.y).selfAdd(-t.y);return h.selfMultiply(y).selfSubtract(g.selfMultiply(p)).signum()};CGAlgorithmsDD.signOfDet2x2=function(e,t,a,l){var h=e.multiply(l).selfSubtract(t.multiply(a));return h.signum()};CGAlgorithmsDD.intersection=function(e,t,a,l){var h=DD.valueOf(l.y).selfSubtract(a.y).selfMultiply(DD.valueOf(t.x).selfSubtract(e.x)),g=DD.valueOf(l.x).selfSubtract(a.x).selfMultiply(DD.valueOf(t.y).selfSubtract(e.y)),p=h.subtract(g),y=DD.valueOf(l.x).selfSubtract(a.x).selfMultiply(DD.valueOf(e.y).selfSubtract(a.y)),b=DD.valueOf(l.y).selfSubtract(a.y).selfMultiply(DD.valueOf(e.x).selfSubtract(a.x)),E=y.subtract(b),C=E.selfDivide(p).doubleValue(),A=DD.valueOf(e.x).selfAdd(DD.valueOf(t.x).selfSubtract(e.x).selfMultiply(C)).doubleValue(),B=DD.valueOf(t.x).selfSubtract(e.x).selfMultiply(DD.valueOf(e.y).selfSubtract(a.y)),M=DD.valueOf(t.y).selfSubtract(e.y).selfMultiply(DD.valueOf(e.x).selfSubtract(a.x)),N=B.subtract(M),Z=N.selfDivide(p).doubleValue(),ee=DD.valueOf(a.y).selfAdd(DD.valueOf(l.y).selfSubtract(a.y).selfMultiply(Z)).doubleValue();return new Coordinate(A,ee)};CGAlgorithmsDD.orientationIndexFilter=function(e,t,a){var l=null,h=(e.x-a.x)*(t.y-a.y),g=(e.y-a.y)*(t.x-a.x),p=h-g;if(h>0){if(g<=0)return CGAlgorithmsDD.signum(p);l=h+g}else if(h<0){if(g>=0)return CGAlgorithmsDD.signum(p);l=-h-g}else return CGAlgorithmsDD.signum(p);var y=CGAlgorithmsDD.DP_SAFE_EPSILON*l;return p>=y||-p>=y?CGAlgorithmsDD.signum(p):2};CGAlgorithmsDD.signum=function(e){return e>0?1:e<0?-1:0};staticAccessors$6.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(CGAlgorithmsDD,staticAccessors$6);var CoordinateSequence=function(){},staticAccessors$8={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};staticAccessors$8.X.get=function(){return 0};staticAccessors$8.Y.get=function(){return 1};staticAccessors$8.Z.get=function(){return 2};staticAccessors$8.M.get=function(){return 3};CoordinateSequence.prototype.setOrdinate=function(e,t,a){};CoordinateSequence.prototype.size=function(){};CoordinateSequence.prototype.getOrdinate=function(e,t){};CoordinateSequence.prototype.getCoordinate=function(){};CoordinateSequence.prototype.getCoordinateCopy=function(e){};CoordinateSequence.prototype.getDimension=function(){};CoordinateSequence.prototype.getX=function(e){};CoordinateSequence.prototype.clone=function(){};CoordinateSequence.prototype.expandEnvelope=function(e){};CoordinateSequence.prototype.copy=function(){};CoordinateSequence.prototype.getY=function(e){};CoordinateSequence.prototype.toCoordinateArray=function(){};CoordinateSequence.prototype.interfaces_=function(){return[Clonable]};CoordinateSequence.prototype.getClass=function(){return CoordinateSequence};Object.defineProperties(CoordinateSequence,staticAccessors$8);var Exception=function(){},NotRepresentableException=function(n){function e(){n.call(this,"Projective point not representable on the Cartesian plane.")}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Exception),System=function(){};System.arraycopy=function(e,t,a,l,h){for(var g=0,p=t;p<t+h;p++)a[l+g]=e[p],g++};System.getProperty=function(e){return{"line.separator":`
`}[e]};var HCoordinate=function n(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],a=arguments[1];this.x=t,this.y=a,this.w=1}else if(arguments[0]instanceof n&&arguments[1]instanceof n){var l=arguments[0],h=arguments[1];this.x=l.y*h.w-h.y*l.w,this.y=h.x*l.w-l.x*h.w,this.w=l.x*h.y-h.x*l.y}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Coordinate){var g=arguments[0],p=arguments[1];this.x=g.y-p.y,this.y=p.x-g.x,this.w=g.x*p.y-p.x*g.y}}else if(arguments.length===3){var y=arguments[0],b=arguments[1],E=arguments[2];this.x=y,this.y=b,this.w=E}else if(arguments.length===4){var C=arguments[0],A=arguments[1],B=arguments[2],M=arguments[3],N=C.y-A.y,Z=A.x-C.x,ee=C.x*A.y-A.x*C.y,F=B.y-M.y,O=M.x-B.x,k=B.x*M.y-M.x*B.y;this.x=Z*k-O*ee,this.y=F*ee-N*k,this.w=N*O-F*Z}};HCoordinate.prototype.getY=function(){var e=this.y/this.w;if(Double.isNaN(e)||Double.isInfinite(e))throw new NotRepresentableException;return e};HCoordinate.prototype.getX=function(){var e=this.x/this.w;if(Double.isNaN(e)||Double.isInfinite(e))throw new NotRepresentableException;return e};HCoordinate.prototype.getCoordinate=function(){var e=new Coordinate;return e.x=this.getX(),e.y=this.getY(),e};HCoordinate.prototype.interfaces_=function(){return[]};HCoordinate.prototype.getClass=function(){return HCoordinate};HCoordinate.intersection=function(e,t,a,l){var h=e.y-t.y,g=t.x-e.x,p=e.x*t.y-t.x*e.y,y=a.y-l.y,b=l.x-a.x,E=a.x*l.y-l.x*a.y,C=g*E-b*p,A=y*p-h*E,B=h*b-y*g,M=C/B,N=A/B;if(Double.isNaN(M)||Double.isInfinite(M)||Double.isNaN(N)||Double.isInfinite(N))throw new NotRepresentableException;return new Coordinate(M,N)};var Envelope=function n(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Coordinate){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof n){var t=arguments[0];this.init(t)}}else if(arguments.length===2){var a=arguments[0],l=arguments[1];this.init(a.x,l.x,a.y,l.y)}else if(arguments.length===4){var h=arguments[0],g=arguments[1],p=arguments[2],y=arguments[3];this.init(h,g,p,y)}},staticAccessors$9={serialVersionUID:{configurable:!0}};Envelope.prototype.getArea=function(){return this.getWidth()*this.getHeight()};Envelope.prototype.equals=function(e){if(!(e instanceof Envelope))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()};Envelope.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new Envelope;var t=this._minx>e._minx?this._minx:e._minx,a=this._miny>e._miny?this._miny:e._miny,l=this._maxx<e._maxx?this._maxx:e._maxx,h=this._maxy<e._maxy?this._maxy:e._maxy;return new Envelope(t,l,a,h)};Envelope.prototype.isNull=function(){return this._maxx<this._minx};Envelope.prototype.getMaxX=function(){return this._maxx};Envelope.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof Coordinate){var e=arguments[0];return this.covers(e.x,e.y)}else if(arguments[0]instanceof Envelope){var t=arguments[0];return this.isNull()||t.isNull()?!1:t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(arguments.length===2){var a=arguments[0],l=arguments[1];return this.isNull()?!1:a>=this._minx&&a<=this._maxx&&l>=this._miny&&l<=this._maxy}};Envelope.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof Envelope){var e=arguments[0];return this.isNull()||e.isNull()?!1:!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}else if(arguments[0]instanceof Coordinate){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(arguments.length===2){var a=arguments[0],l=arguments[1];return this.isNull()?!1:!(a>this._maxx||a<this._minx||l>this._maxy||l<this._miny)}};Envelope.prototype.getMinY=function(){return this._miny};Envelope.prototype.getMinX=function(){return this._minx};Envelope.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof Coordinate){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof Envelope){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(arguments.length===2){var a=arguments[0],l=arguments[1];this.isNull()?(this._minx=a,this._maxx=a,this._miny=l,this._maxy=l):(a<this._minx&&(this._minx=a),a>this._maxx&&(this._maxx=a),l<this._miny&&(this._miny=l),l>this._maxy&&(this._maxy=l))}};Envelope.prototype.minExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t};Envelope.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};Envelope.prototype.compareTo=function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0};Envelope.prototype.translate=function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)};Envelope.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};Envelope.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};Envelope.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};Envelope.prototype.maxExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t};Envelope.prototype.expandBy=function(){if(arguments.length===1){var e=arguments[0];this.expandBy(e,e)}else if(arguments.length===2){var t=arguments[0],a=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=a,this._maxy+=a,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};Envelope.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof Envelope){var e=arguments[0];return this.covers(e)}else if(arguments[0]instanceof Coordinate){var t=arguments[0];return this.covers(t)}}else if(arguments.length===2){var a=arguments[0],l=arguments[1];return this.covers(a,l)}};Envelope.prototype.centre=function(){return this.isNull()?null:new Coordinate((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};Envelope.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Coordinate){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof Envelope){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(arguments.length===2){var a=arguments[0],l=arguments[1];this.init(a.x,l.x,a.y,l.y)}else if(arguments.length===4){var h=arguments[0],g=arguments[1],p=arguments[2],y=arguments[3];h<g?(this._minx=h,this._maxx=g):(this._minx=g,this._maxx=h),p<y?(this._miny=p,this._maxy=y):(this._miny=y,this._maxy=p)}};Envelope.prototype.getMaxY=function(){return this._maxy};Envelope.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var a=0;return this._maxy<e._miny?a=e._miny-this._maxy:this._miny>e._maxy&&(a=this._miny-e._maxy),t===0?a:a===0?t:Math.sqrt(t*t+a*a)};Envelope.prototype.hashCode=function(){var e=17;return e=37*e+Coordinate.hashCode(this._minx),e=37*e+Coordinate.hashCode(this._maxx),e=37*e+Coordinate.hashCode(this._miny),e=37*e+Coordinate.hashCode(this._maxy),e};Envelope.prototype.interfaces_=function(){return[Comparable,Serializable]};Envelope.prototype.getClass=function(){return Envelope};Envelope.intersects=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],a=arguments[2];return a.x>=(e.x<t.x?e.x:t.x)&&a.x<=(e.x>t.x?e.x:t.x)&&a.y>=(e.y<t.y?e.y:t.y)&&a.y<=(e.y>t.y?e.y:t.y)}else if(arguments.length===4){var l=arguments[0],h=arguments[1],g=arguments[2],p=arguments[3],y=Math.min(g.x,p.x),b=Math.max(g.x,p.x),E=Math.min(l.x,h.x),C=Math.max(l.x,h.x);return!(E>b||C<y||(y=Math.min(g.y,p.y),b=Math.max(g.y,p.y),E=Math.min(l.y,h.y),C=Math.max(l.y,h.y),E>b)||C<y)}};staticAccessors$9.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(Envelope,staticAccessors$9);var regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},WKTParser=function(e){this.geometryFactory=e||new GeometryFactory};WKTParser.prototype.read=function(e){var t,a,l;e=e.replace(/[\n\r]/g," ");var h=regExes.typeStr.exec(e);if(e.search("EMPTY")!==-1&&(h=regExes.emptyTypeStr.exec(e),h[2]=void 0),h&&(a=h[1].toLowerCase(),l=h[2],parse$1[a]&&(t=parse$1[a].apply(this,[l]))),t===void 0)throw new Error("Could not parse WKT "+e);return t};WKTParser.prototype.write=function(e){return this.extractGeometry(e)};WKTParser.prototype.extractGeometry=function(e){var t=e.getGeometryType().toLowerCase();if(!extract$1[t])return null;var a=t.toUpperCase(),l;return e.isEmpty()?l=a+" EMPTY":l=a+"("+extract$1[t].apply(this,[e])+")",l};var extract$1={coordinate:function(e){return e.x+" "+e.y},point:function(e){return extract$1.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function(e){for(var t=this,a=[],l=0,h=e._geometries.length;l<h;++l)a.push("("+extract$1.point.apply(t,[e._geometries[l]])+")");return a.join(",")},linestring:function(e){for(var t=this,a=[],l=0,h=e._points._coordinates.length;l<h;++l)a.push(extract$1.coordinate.apply(t,[e._points._coordinates[l]]));return a.join(",")},linearring:function(e){for(var t=this,a=[],l=0,h=e._points._coordinates.length;l<h;++l)a.push(extract$1.coordinate.apply(t,[e._points._coordinates[l]]));return a.join(",")},multilinestring:function(e){for(var t=this,a=[],l=0,h=e._geometries.length;l<h;++l)a.push("("+extract$1.linestring.apply(t,[e._geometries[l]])+")");return a.join(",")},polygon:function(e){var t=this,a=[];a.push("("+extract$1.linestring.apply(this,[e._shell])+")");for(var l=0,h=e._holes.length;l<h;++l)a.push("("+extract$1.linestring.apply(t,[e._holes[l]])+")");return a.join(",")},multipolygon:function(e){for(var t=this,a=[],l=0,h=e._geometries.length;l<h;++l)a.push("("+extract$1.polygon.apply(t,[e._geometries[l]])+")");return a.join(",")},geometrycollection:function(e){for(var t=this,a=[],l=0,h=e._geometries.length;l<h;++l)a.push(t.extractGeometry(e._geometries[l]));return a.join(",")}},parse$1={point:function(e){if(e===void 0)return this.geometryFactory.createPoint();var t=e.trim().split(regExes.spaces);return this.geometryFactory.createPoint(new Coordinate(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPoint();for(var a,l=e.trim().split(","),h=[],g=0,p=l.length;g<p;++g)a=l[g].replace(regExes.trimParens,"$1"),h.push(parse$1.point.apply(t,[a]));return this.geometryFactory.createMultiPoint(h)},linestring:function(e){if(e===void 0)return this.geometryFactory.createLineString();for(var t=e.trim().split(","),a=[],l,h=0,g=t.length;h<g;++h)l=t[h].trim().split(regExes.spaces),a.push(new Coordinate(Number.parseFloat(l[0]),Number.parseFloat(l[1])));return this.geometryFactory.createLineString(a)},linearring:function(e){if(e===void 0)return this.geometryFactory.createLinearRing();for(var t=e.trim().split(","),a=[],l,h=0,g=t.length;h<g;++h)l=t[h].trim().split(regExes.spaces),a.push(new Coordinate(Number.parseFloat(l[0]),Number.parseFloat(l[1])));return this.geometryFactory.createLinearRing(a)},multilinestring:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiLineString();for(var a,l=e.trim().split(regExes.parenComma),h=[],g=0,p=l.length;g<p;++g)a=l[g].replace(regExes.trimParens,"$1"),h.push(parse$1.linestring.apply(t,[a]));return this.geometryFactory.createMultiLineString(h)},polygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createPolygon();for(var a,l,h,g=e.trim().split(regExes.parenComma),p,y=[],b=0,E=g.length;b<E;++b)a=g[b].replace(regExes.trimParens,"$1"),l=parse$1.linestring.apply(t,[a]),h=t.geometryFactory.createLinearRing(l._points),b===0?p=h:y.push(h);return this.geometryFactory.createPolygon(p,y)},multipolygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPolygon();for(var a,l=e.trim().split(regExes.doubleParenComma),h=[],g=0,p=l.length;g<p;++g)a=l[g].replace(regExes.trimParens,"$1"),h.push(parse$1.polygon.apply(t,[a]));return this.geometryFactory.createMultiPolygon(h)},geometrycollection:function(e){var t=this;if(e===void 0)return this.geometryFactory.createGeometryCollection();e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var a=e.trim().split("|"),l=[],h=0,g=a.length;h<g;++h)l.push(t.read(a[h]));return this.geometryFactory.createGeometryCollection(l)}},WKTWriter=function(e){this.parser=new WKTParser(e)};WKTWriter.prototype.write=function(e){return this.parser.write(e)};WKTWriter.toLineString=function(e,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"};var RuntimeException=function(n){function e(t){n.call(this,t),this.name="RuntimeException",this.message=t,this.stack=new n().stack}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),AssertionFailedException=function(n){function e(){if(n.call(this),arguments.length===0)n.call(this);else if(arguments.length===1){var t=arguments[0];n.call(this,t)}}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(RuntimeException),Assert=function(){};Assert.prototype.interfaces_=function(){return[]};Assert.prototype.getClass=function(){return Assert};Assert.shouldNeverReachHere=function(){if(arguments.length===0)Assert.shouldNeverReachHere(null);else if(arguments.length===1){var e=arguments[0];throw new AssertionFailedException("Should never reach here"+(e!==null?": "+e:""))}};Assert.isTrue=function(){var e,t;if(arguments.length===1)e=arguments[0],Assert.isTrue(e,null);else if(arguments.length===2&&(e=arguments[0],t=arguments[1],!e))throw t===null?new AssertionFailedException:new AssertionFailedException(t)};Assert.equals=function(){var e,t,a;if(arguments.length===2)e=arguments[0],t=arguments[1],Assert.equals(e,t,null);else if(arguments.length===3&&(e=arguments[0],t=arguments[1],a=arguments[2],!t.equals(e)))throw new AssertionFailedException("Expected "+e+" but encountered "+t+(a!==null?": "+a:""))};var LineIntersector=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Coordinate,this._intPt[1]=new Coordinate,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},staticAccessors$10={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};LineIntersector.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]};LineIntersector.prototype.getTopologySummary=function(){var e=new StringBuffer;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()};LineIntersector.prototype.computeIntersection=function(e,t,a,l){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=a,this._inputLines[1][1]=l,this._result=this.computeIntersect(e,t,a,l)};LineIntersector.prototype.getIntersectionNum=function(){return this._result};LineIntersector.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var e=arguments[0],t=this.getEdgeDistance(e,0),a=this.getEdgeDistance(e,1);t>a?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}};LineIntersector.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};LineIntersector.prototype.setPrecisionModel=function(e){this._precisionModel=e};LineIntersector.prototype.isInteriorIntersection=function(){var e=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var t=arguments[0],a=0;a<this._result;a++)if(!(e._intPt[a].equals2D(e._inputLines[t][0])||e._intPt[a].equals2D(e._inputLines[t][1])))return!0;return!1}};LineIntersector.prototype.getIntersection=function(e){return this._intPt[e]};LineIntersector.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};LineIntersector.prototype.hasIntersection=function(){return this._result!==LineIntersector.NO_INTERSECTION};LineIntersector.prototype.getEdgeDistance=function(e,t){var a=LineIntersector.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1]);return a};LineIntersector.prototype.isCollinear=function(){return this._result===LineIntersector.COLLINEAR_INTERSECTION};LineIntersector.prototype.toString=function(){return WKTWriter.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+WKTWriter.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};LineIntersector.prototype.getEndpoint=function(e,t){return this._inputLines[e][t]};LineIntersector.prototype.isIntersection=function(e){for(var t=this,a=0;a<this._result;a++)if(t._intPt[a].equals2D(e))return!0;return!1};LineIntersector.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]};LineIntersector.prototype.interfaces_=function(){return[]};LineIntersector.prototype.getClass=function(){return LineIntersector};LineIntersector.computeEdgeDistance=function(e,t,a){var l=Math.abs(a.x-t.x),h=Math.abs(a.y-t.y),g=-1;if(e.equals(t))g=0;else if(e.equals(a))l>h?g=l:g=h;else{var p=Math.abs(e.x-t.x),y=Math.abs(e.y-t.y);l>h?g=p:g=y,g===0&&!e.equals(t)&&(g=Math.max(p,y))}return Assert.isTrue(!(g===0&&!e.equals(t)),"Bad distance calculation"),g};LineIntersector.nonRobustComputeEdgeDistance=function(e,t,a){var l=e.x-t.x,h=e.y-t.y,g=Math.sqrt(l*l+h*h);return Assert.isTrue(!(g===0&&!e.equals(t)),"Invalid distance calculation"),g};staticAccessors$10.DONT_INTERSECT.get=function(){return 0};staticAccessors$10.DO_INTERSECT.get=function(){return 1};staticAccessors$10.COLLINEAR.get=function(){return 2};staticAccessors$10.NO_INTERSECTION.get=function(){return 0};staticAccessors$10.POINT_INTERSECTION.get=function(){return 1};staticAccessors$10.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(LineIntersector,staticAccessors$10);var RobustLineIntersector=function(n){function e(){n.apply(this,arguments)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(a){var l=new Envelope(this._inputLines[0][0],this._inputLines[0][1]),h=new Envelope(this._inputLines[1][0],this._inputLines[1][1]);return l.contains(a)&&h.contains(a)},e.prototype.computeIntersection=function(){if(arguments.length===3){var a=arguments[0],l=arguments[1],h=arguments[2];if(this._isProper=!1,Envelope.intersects(l,h,a)&&CGAlgorithms.orientationIndex(l,h,a)===0&&CGAlgorithms.orientationIndex(h,l,a)===0)return this._isProper=!0,(a.equals(l)||a.equals(h))&&(this._isProper=!1),this._result=n.POINT_INTERSECTION,null;this._result=n.NO_INTERSECTION}else return n.prototype.computeIntersection.apply(this,arguments)},e.prototype.normalizeToMinimum=function(a,l,h,g,p){p.x=this.smallestInAbsValue(a.x,l.x,h.x,g.x),p.y=this.smallestInAbsValue(a.y,l.y,h.y,g.y),a.x-=p.x,a.y-=p.y,l.x-=p.x,l.y-=p.y,h.x-=p.x,h.y-=p.y,g.x-=p.x,g.y-=p.y},e.prototype.safeHCoordinateIntersection=function(a,l,h,g){var p=null;try{p=HCoordinate.intersection(a,l,h,g)}catch(y){if(y instanceof NotRepresentableException)p=e.nearestEndpoint(a,l,h,g);else throw y}finally{}return p},e.prototype.intersection=function(a,l,h,g){var p=this.intersectionWithNormalization(a,l,h,g);return this.isInSegmentEnvelopes(p)||(p=new Coordinate(e.nearestEndpoint(a,l,h,g))),this._precisionModel!==null&&this._precisionModel.makePrecise(p),p},e.prototype.smallestInAbsValue=function(a,l,h,g){var p=a,y=Math.abs(p);return Math.abs(l)<y&&(p=l,y=Math.abs(l)),Math.abs(h)<y&&(p=h,y=Math.abs(h)),Math.abs(g)<y&&(p=g),p},e.prototype.checkDD=function(a,l,h,g,p){var y=CGAlgorithmsDD.intersection(a,l,h,g),b=this.isInSegmentEnvelopes(y);System.out.println("DD in env = "+b+"  --------------------- "+y),p.distance(y)>1e-4&&System.out.println("Distance = "+p.distance(y))},e.prototype.intersectionWithNormalization=function(a,l,h,g){var p=new Coordinate(a),y=new Coordinate(l),b=new Coordinate(h),E=new Coordinate(g),C=new Coordinate;this.normalizeToEnvCentre(p,y,b,E,C);var A=this.safeHCoordinateIntersection(p,y,b,E);return A.x+=C.x,A.y+=C.y,A},e.prototype.computeCollinearIntersection=function(a,l,h,g){var p=Envelope.intersects(a,l,h),y=Envelope.intersects(a,l,g),b=Envelope.intersects(h,g,a),E=Envelope.intersects(h,g,l);return p&&y?(this._intPt[0]=h,this._intPt[1]=g,n.COLLINEAR_INTERSECTION):b&&E?(this._intPt[0]=a,this._intPt[1]=l,n.COLLINEAR_INTERSECTION):p&&b?(this._intPt[0]=h,this._intPt[1]=a,h.equals(a)&&!y&&!E?n.POINT_INTERSECTION:n.COLLINEAR_INTERSECTION):p&&E?(this._intPt[0]=h,this._intPt[1]=l,h.equals(l)&&!y&&!b?n.POINT_INTERSECTION:n.COLLINEAR_INTERSECTION):y&&b?(this._intPt[0]=g,this._intPt[1]=a,g.equals(a)&&!p&&!E?n.POINT_INTERSECTION:n.COLLINEAR_INTERSECTION):y&&E?(this._intPt[0]=g,this._intPt[1]=l,g.equals(l)&&!p&&!b?n.POINT_INTERSECTION:n.COLLINEAR_INTERSECTION):n.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(a,l,h,g,p){var y=a.x<l.x?a.x:l.x,b=a.y<l.y?a.y:l.y,E=a.x>l.x?a.x:l.x,C=a.y>l.y?a.y:l.y,A=h.x<g.x?h.x:g.x,B=h.y<g.y?h.y:g.y,M=h.x>g.x?h.x:g.x,N=h.y>g.y?h.y:g.y,Z=y>A?y:A,ee=E<M?E:M,F=b>B?b:B,O=C<N?C:N,k=(Z+ee)/2,H=(F+O)/2;p.x=k,p.y=H,a.x-=p.x,a.y-=p.y,l.x-=p.x,l.y-=p.y,h.x-=p.x,h.y-=p.y,g.x-=p.x,g.y-=p.y},e.prototype.computeIntersect=function(a,l,h,g){if(this._isProper=!1,!Envelope.intersects(a,l,h,g))return n.NO_INTERSECTION;var p=CGAlgorithms.orientationIndex(a,l,h),y=CGAlgorithms.orientationIndex(a,l,g);if(p>0&&y>0||p<0&&y<0)return n.NO_INTERSECTION;var b=CGAlgorithms.orientationIndex(h,g,a),E=CGAlgorithms.orientationIndex(h,g,l);if(b>0&&E>0||b<0&&E<0)return n.NO_INTERSECTION;var C=p===0&&y===0&&b===0&&E===0;return C?this.computeCollinearIntersection(a,l,h,g):(p===0||y===0||b===0||E===0?(this._isProper=!1,a.equals2D(h)||a.equals2D(g)?this._intPt[0]=a:l.equals2D(h)||l.equals2D(g)?this._intPt[0]=l:p===0?this._intPt[0]=new Coordinate(h):y===0?this._intPt[0]=new Coordinate(g):b===0?this._intPt[0]=new Coordinate(a):E===0&&(this._intPt[0]=new Coordinate(l))):(this._isProper=!0,this._intPt[0]=this.intersection(a,l,h,g)),n.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(a,l,h,g){var p=a,y=CGAlgorithms.distancePointLine(a,h,g),b=CGAlgorithms.distancePointLine(l,h,g);return b<y&&(y=b,p=l),b=CGAlgorithms.distancePointLine(h,a,l),b<y&&(y=b,p=h),b=CGAlgorithms.distancePointLine(g,a,l),b<y&&(y=b,p=g),p},e}(LineIntersector),RobustDeterminant=function(){};RobustDeterminant.prototype.interfaces_=function(){return[]};RobustDeterminant.prototype.getClass=function(){return RobustDeterminant};RobustDeterminant.orientationIndex=function(e,t,a){var l=t.x-e.x,h=t.y-e.y,g=a.x-t.x,p=a.y-t.y;return RobustDeterminant.signOfDet2x2(l,h,g,p)};RobustDeterminant.signOfDet2x2=function(e,t,a,l){var h=null,g=null,p=null;if(h=1,e===0||l===0)return t===0||a===0?0:t>0?a>0?-h:h:a>0?h:-h;if(t===0||a===0)return l>0?e>0?h:-h:e>0?-h:h;if(t>0?l>0?t<=l||(h=-h,g=e,e=a,a=g,g=t,t=l,l=g):t<=-l?(h=-h,a=-a,l=-l):(g=e,e=-a,a=g,g=t,t=-l,l=g):l>0?-t<=l?(h=-h,e=-e,t=-t):(g=-e,e=a,a=g,g=-t,t=l,l=g):t>=l?(e=-e,t=-t,a=-a,l=-l):(h=-h,g=-e,e=-a,a=g,g=-t,t=-l,l=g),e>0)if(a>0){if(!(e<=a))return h}else return h;else{if(a>0)return-h;if(e>=a)h=-h,e=-e,a=-a;else return-h}for(;;){if(p=Math.floor(a/e),a=a-p*e,l=l-p*t,l<0)return-h;if(l>t)return h;if(e>a+a){if(t<l+l)return h}else{if(t>l+l)return-h;a=e-a,l=t-l,h=-h}if(l===0)return a===0?0:-h;if(a===0||(p=Math.floor(e/a),e=e-p*a,t=t-p*l,t<0))return h;if(t>l)return-h;if(a>e+e){if(l<t+t)return-h}else{if(l>t+t)return h;e=a-e,t=l-t,h=-h}if(t===0)return e===0?0:h;if(e===0)return-h}};var RayCrossingCounter=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e};RayCrossingCounter.prototype.countSegment=function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var a=e.x,l=t.x;return a>l&&(a=t.x,l=e.x),this._p.x>=a&&this._p.x<=l&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var h=e.x-this._p.x,g=e.y-this._p.y,p=t.x-this._p.x,y=t.y-this._p.y,b=RobustDeterminant.signOfDet2x2(h,g,p,y);if(b===0)return this._isPointOnSegment=!0,null;y<g&&(b=-b),b>0&&this._crossingCount++}};RayCrossingCounter.prototype.isPointInPolygon=function(){return this.getLocation()!==Location.EXTERIOR};RayCrossingCounter.prototype.getLocation=function(){return this._isPointOnSegment?Location.BOUNDARY:this._crossingCount%2===1?Location.INTERIOR:Location.EXTERIOR};RayCrossingCounter.prototype.isOnSegment=function(){return this._isPointOnSegment};RayCrossingCounter.prototype.interfaces_=function(){return[]};RayCrossingCounter.prototype.getClass=function(){return RayCrossingCounter};RayCrossingCounter.locatePointInRing=function(){if(arguments[0]instanceof Coordinate&&hasInterface(arguments[1],CoordinateSequence)){for(var e=arguments[0],t=arguments[1],a=new RayCrossingCounter(e),l=new Coordinate,h=new Coordinate,g=1;g<t.size();g++)if(t.getCoordinate(g,l),t.getCoordinate(g-1,h),a.countSegment(l,h),a.isOnSegment())return a.getLocation();return a.getLocation()}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Array){for(var p=arguments[0],y=arguments[1],b=new RayCrossingCounter(p),E=1;E<y.length;E++){var C=y[E],A=y[E-1];if(b.countSegment(C,A),b.isOnSegment())return b.getLocation()}return b.getLocation()}};var CGAlgorithms=function(){},staticAccessors$3={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};CGAlgorithms.prototype.interfaces_=function(){return[]};CGAlgorithms.prototype.getClass=function(){return CGAlgorithms};CGAlgorithms.orientationIndex=function(e,t,a){return CGAlgorithmsDD.orientationIndex(e,t,a)};CGAlgorithms.signedArea=function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,a=e[0].x,l=1;l<e.length-1;l++){var h=e[l].x-a,g=e[l+1].y,p=e[l-1].y;t+=h*(p-g)}return t/2}else if(hasInterface(arguments[0],CoordinateSequence)){var y=arguments[0],b=y.size();if(b<3)return 0;var E=new Coordinate,C=new Coordinate,A=new Coordinate;y.getCoordinate(0,C),y.getCoordinate(1,A);var B=C.x;A.x-=B;for(var M=0,N=1;N<b-1;N++)E.y=C.y,C.x=A.x,C.y=A.y,y.getCoordinate(N+1,A),A.x-=B,M+=C.x*(E.y-A.y);return M/2}};CGAlgorithms.distanceLineLine=function(e,t,a,l){if(e.equals(t))return CGAlgorithms.distancePointLine(e,a,l);if(a.equals(l))return CGAlgorithms.distancePointLine(l,e,t);var h=!1;if(!Envelope.intersects(e,t,a,l))h=!0;else{var g=(t.x-e.x)*(l.y-a.y)-(t.y-e.y)*(l.x-a.x);if(g===0)h=!0;else{var p=(e.y-a.y)*(l.x-a.x)-(e.x-a.x)*(l.y-a.y),y=(e.y-a.y)*(t.x-e.x)-(e.x-a.x)*(t.y-e.y),b=y/g,E=p/g;(E<0||E>1||b<0||b>1)&&(h=!0)}}return h?MathUtil.min(CGAlgorithms.distancePointLine(e,a,l),CGAlgorithms.distancePointLine(t,a,l),CGAlgorithms.distancePointLine(a,e,t),CGAlgorithms.distancePointLine(l,e,t)):0};CGAlgorithms.isPointInRing=function(e,t){return CGAlgorithms.locatePointInRing(e,t)!==Location.EXTERIOR};CGAlgorithms.computeLength=function(e){var t=e.size();if(t<=1)return 0;var a=0,l=new Coordinate;e.getCoordinate(0,l);for(var h=l.x,g=l.y,p=1;p<t;p++){e.getCoordinate(p,l);var y=l.x,b=l.y,E=y-h,C=b-g;a+=Math.sqrt(E*E+C*C),h=y,g=b}return a};CGAlgorithms.isCCW=function(e){var t=e.length-1;if(t<3)throw new IllegalArgumentException("Ring has fewer than 4 points, so orientation cannot be determined");for(var a=e[0],l=0,h=1;h<=t;h++){var g=e[h];g.y>a.y&&(a=g,l=h)}var p=l;do p=p-1,p<0&&(p=t);while(e[p].equals2D(a)&&p!==l);var y=l;do y=(y+1)%t;while(e[y].equals2D(a)&&y!==l);var b=e[p],E=e[y];if(b.equals2D(a)||E.equals2D(a)||b.equals2D(E))return!1;var C=CGAlgorithms.computeOrientation(b,a,E),A=!1;return C===0?A=b.x>E.x:A=C>0,A};CGAlgorithms.locatePointInRing=function(e,t){return RayCrossingCounter.locatePointInRing(e,t)};CGAlgorithms.distancePointLinePerpendicular=function(e,t,a){var l=(a.x-t.x)*(a.x-t.x)+(a.y-t.y)*(a.y-t.y),h=((t.y-e.y)*(a.x-t.x)-(t.x-e.x)*(a.y-t.y))/l;return Math.abs(h)*Math.sqrt(l)};CGAlgorithms.computeOrientation=function(e,t,a){return CGAlgorithms.orientationIndex(e,t,a)};CGAlgorithms.distancePointLine=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(t.length===0)throw new IllegalArgumentException("Line array must contain at least one vertex");for(var a=e.distance(t[0]),l=0;l<t.length-1;l++){var h=CGAlgorithms.distancePointLine(e,t[l],t[l+1]);h<a&&(a=h)}return a}else if(arguments.length===3){var g=arguments[0],p=arguments[1],y=arguments[2];if(p.x===y.x&&p.y===y.y)return g.distance(p);var b=(y.x-p.x)*(y.x-p.x)+(y.y-p.y)*(y.y-p.y),E=((g.x-p.x)*(y.x-p.x)+(g.y-p.y)*(y.y-p.y))/b;if(E<=0)return g.distance(p);if(E>=1)return g.distance(y);var C=((p.y-g.y)*(y.x-p.x)-(p.x-g.x)*(y.y-p.y))/b;return Math.abs(C)*Math.sqrt(b)}};CGAlgorithms.isOnLine=function(e,t){for(var a=new RobustLineIntersector,l=1;l<t.length;l++){var h=t[l-1],g=t[l];if(a.computeIntersection(e,h,g),a.hasIntersection())return!0}return!1};staticAccessors$3.CLOCKWISE.get=function(){return-1};staticAccessors$3.RIGHT.get=function(){return CGAlgorithms.CLOCKWISE};staticAccessors$3.COUNTERCLOCKWISE.get=function(){return 1};staticAccessors$3.LEFT.get=function(){return CGAlgorithms.COUNTERCLOCKWISE};staticAccessors$3.COLLINEAR.get=function(){return 0};staticAccessors$3.STRAIGHT.get=function(){return CGAlgorithms.COLLINEAR};Object.defineProperties(CGAlgorithms,staticAccessors$3);var GeometryComponentFilter=function(){};GeometryComponentFilter.prototype.filter=function(e){};GeometryComponentFilter.prototype.interfaces_=function(){return[]};GeometryComponentFilter.prototype.getClass=function(){return GeometryComponentFilter};var Geometry=function(){var e=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()},staticAccessors$11={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Geometry.prototype.isGeometryCollection=function(){return this.getSortIndex()===Geometry.SORTINDEX_GEOMETRYCOLLECTION};Geometry.prototype.getFactory=function(){return this._factory};Geometry.prototype.getGeometryN=function(e){return this};Geometry.prototype.getArea=function(){return 0};Geometry.prototype.isRectangle=function(){return!1};Geometry.prototype.equals=function(){if(arguments[0]instanceof Geometry){var e=arguments[0];return e===null?!1:this.equalsTopo(e)}else if(arguments[0]instanceof Object){var t=arguments[0];if(!(t instanceof Geometry))return!1;var a=t;return this.equalsExact(a)}};Geometry.prototype.equalsExact=function(e){return this===e||this.equalsExact(e,0)};Geometry.prototype.geometryChanged=function(){this.apply(Geometry.geometryChangedFilter)};Geometry.prototype.geometryChangedAction=function(){this._envelope=null};Geometry.prototype.equalsNorm=function(e){return e===null?!1:this.norm().equalsExact(e.norm())};Geometry.prototype.getLength=function(){return 0};Geometry.prototype.getNumGeometries=function(){return 1};Geometry.prototype.compareTo=function(){if(arguments.length===1){var e=arguments[0],t=e;return this.getSortIndex()!==t.getSortIndex()?this.getSortIndex()-t.getSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}else if(arguments.length===2){var a=arguments[0],l=arguments[1];return this.getSortIndex()!==a.getSortIndex()?this.getSortIndex()-a.getSortIndex():this.isEmpty()&&a.isEmpty()?0:this.isEmpty()?-1:a.isEmpty()?1:this.compareToSameClass(a,l)}};Geometry.prototype.getUserData=function(){return this._userData};Geometry.prototype.getSRID=function(){return this._SRID};Geometry.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};Geometry.prototype.checkNotGeometryCollection=function(e){if(e.getSortIndex()===Geometry.SORTINDEX_GEOMETRYCOLLECTION)throw new IllegalArgumentException("This method does not support GeometryCollection arguments")};Geometry.prototype.equal=function(e,t,a){return a===0?e.equals(t):e.distance(t)<=a};Geometry.prototype.norm=function(){var e=this.copy();return e.normalize(),e};Geometry.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};Geometry.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Envelope(this._envelope)};Geometry.prototype.setSRID=function(e){this._SRID=e};Geometry.prototype.setUserData=function(e){this._userData=e};Geometry.prototype.compare=function(e,t){for(var a=e.iterator(),l=t.iterator();a.hasNext()&&l.hasNext();){var h=a.next(),g=l.next(),p=h.compareTo(g);if(p!==0)return p}return a.hasNext()?1:l.hasNext()?-1:0};Geometry.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};Geometry.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Geometry.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Geometry.SORTINDEX_MULTIPOINT||this.getSortIndex()===Geometry.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Geometry.SORTINDEX_MULTIPOLYGON};Geometry.prototype.interfaces_=function(){return[Clonable,Comparable,Serializable]};Geometry.prototype.getClass=function(){return Geometry};Geometry.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1};Geometry.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(e[t]===null)return!0;return!1};staticAccessors$11.serialVersionUID.get=function(){return 8763622679187377e3};staticAccessors$11.SORTINDEX_POINT.get=function(){return 0};staticAccessors$11.SORTINDEX_MULTIPOINT.get=function(){return 1};staticAccessors$11.SORTINDEX_LINESTRING.get=function(){return 2};staticAccessors$11.SORTINDEX_LINEARRING.get=function(){return 3};staticAccessors$11.SORTINDEX_MULTILINESTRING.get=function(){return 4};staticAccessors$11.SORTINDEX_POLYGON.get=function(){return 5};staticAccessors$11.SORTINDEX_MULTIPOLYGON.get=function(){return 6};staticAccessors$11.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};staticAccessors$11.geometryChangedFilter.get=function(){return geometryChangedFilter};Object.defineProperties(Geometry,staticAccessors$11);var geometryChangedFilter=function(){};geometryChangedFilter.interfaces_=function(){return[GeometryComponentFilter]};geometryChangedFilter.filter=function(e){e.geometryChangedAction()};var CoordinateFilter=function(){};CoordinateFilter.prototype.filter=function(e){};CoordinateFilter.prototype.interfaces_=function(){return[]};CoordinateFilter.prototype.getClass=function(){return CoordinateFilter};var BoundaryNodeRule=function(){},staticAccessors$12={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};BoundaryNodeRule.prototype.isInBoundary=function(e){};BoundaryNodeRule.prototype.interfaces_=function(){return[]};BoundaryNodeRule.prototype.getClass=function(){return BoundaryNodeRule};staticAccessors$12.Mod2BoundaryNodeRule.get=function(){return Mod2BoundaryNodeRule};staticAccessors$12.EndPointBoundaryNodeRule.get=function(){return EndPointBoundaryNodeRule};staticAccessors$12.MultiValentEndPointBoundaryNodeRule.get=function(){return MultiValentEndPointBoundaryNodeRule};staticAccessors$12.MonoValentEndPointBoundaryNodeRule.get=function(){return MonoValentEndPointBoundaryNodeRule};staticAccessors$12.MOD2_BOUNDARY_RULE.get=function(){return new Mod2BoundaryNodeRule};staticAccessors$12.ENDPOINT_BOUNDARY_RULE.get=function(){return new EndPointBoundaryNodeRule};staticAccessors$12.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new MultiValentEndPointBoundaryNodeRule};staticAccessors$12.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new MonoValentEndPointBoundaryNodeRule};staticAccessors$12.OGC_SFS_BOUNDARY_RULE.get=function(){return BoundaryNodeRule.MOD2_BOUNDARY_RULE};Object.defineProperties(BoundaryNodeRule,staticAccessors$12);var Mod2BoundaryNodeRule=function(){};Mod2BoundaryNodeRule.prototype.isInBoundary=function(e){return e%2===1};Mod2BoundaryNodeRule.prototype.interfaces_=function(){return[BoundaryNodeRule]};Mod2BoundaryNodeRule.prototype.getClass=function(){return Mod2BoundaryNodeRule};var EndPointBoundaryNodeRule=function(){};EndPointBoundaryNodeRule.prototype.isInBoundary=function(e){return e>0};EndPointBoundaryNodeRule.prototype.interfaces_=function(){return[BoundaryNodeRule]};EndPointBoundaryNodeRule.prototype.getClass=function(){return EndPointBoundaryNodeRule};var MultiValentEndPointBoundaryNodeRule=function(){};MultiValentEndPointBoundaryNodeRule.prototype.isInBoundary=function(e){return e>1};MultiValentEndPointBoundaryNodeRule.prototype.interfaces_=function(){return[BoundaryNodeRule]};MultiValentEndPointBoundaryNodeRule.prototype.getClass=function(){return MultiValentEndPointBoundaryNodeRule};var MonoValentEndPointBoundaryNodeRule=function(){};MonoValentEndPointBoundaryNodeRule.prototype.isInBoundary=function(e){return e===1};MonoValentEndPointBoundaryNodeRule.prototype.interfaces_=function(){return[BoundaryNodeRule]};MonoValentEndPointBoundaryNodeRule.prototype.getClass=function(){return MonoValentEndPointBoundaryNodeRule};var Collection=function(){};Collection.prototype.add=function(){};Collection.prototype.addAll=function(){};Collection.prototype.isEmpty=function(){};Collection.prototype.iterator=function(){};Collection.prototype.size=function(){};Collection.prototype.toArray=function(){};Collection.prototype.remove=function(){};function IndexOutOfBoundsException$1(n){this.message=n||""}IndexOutOfBoundsException$1.prototype=new Error;IndexOutOfBoundsException$1.prototype.name="IndexOutOfBoundsException";var Iterator=function(){};Iterator.prototype.hasNext=function(){};Iterator.prototype.next=function(){};Iterator.prototype.remove=function(){};var List=function(n){function e(){n.apply(this,arguments)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Collection);function NoSuchElementException(n){this.message=n||""}NoSuchElementException.prototype=new Error;NoSuchElementException.prototype.name="NoSuchElementException";var ArrayList=function(n){function e(){n.call(this),this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[n,Collection]},e.prototype.add=function(a){return arguments.length===1?this.array_.push(a):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(a){for(var l=this,h=a.iterator();h.hasNext();)l.add(h.next());return!0},e.prototype.set=function(a,l){var h=this.array_[a];return this.array_[a]=l,h},e.prototype.iterator=function(){return new Iterator_(this)},e.prototype.get=function(a){if(a<0||a>=this.size())throw new IndexOutOfBoundsException$1;return this.array_[a]},e.prototype.isEmpty=function(){return this.array_.length===0},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var a=this,l=[],h=0,g=this.array_.length;h<g;h++)l.push(a.array_[h]);return l},e.prototype.remove=function(a){for(var l=this,h=!1,g=0,p=this.array_.length;g<p;g++)if(l.array_[g]===a){l.array_.splice(g,1),h=!0;break}return h},e}(List),Iterator_=function(n){function e(t){n.call(this),this.arrayList_=t,this.position_=0}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new NoSuchElementException;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(a){return this.arrayList_.set(this.position_-1,a)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Iterator),CoordinateList=function(n){function e(){if(n.call(this),arguments.length!==0){if(arguments.length===1){var a=arguments[0];this.ensureCapacity(a.length),this.add(a,!0)}else if(arguments.length===2){var l=arguments[0],h=arguments[1];this.ensureCapacity(l.length),this.add(l,h)}}}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={coordArrayType:{configurable:!0}};return t.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(l){return this.get(l)},e.prototype.addAll=function(){var l=this;if(arguments.length===2){for(var h=arguments[0],g=arguments[1],p=!1,y=h.iterator();y.hasNext();)l.add(y.next(),g),p=!0;return p}else return n.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var l=this,h=n.prototype.clone.call(this),g=0;g<this.size();g++)h.add(g,l.get(g).copy());return h},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var l=this;if(arguments.length===1){var h=arguments[0];n.prototype.add.call(this,h)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var g=arguments[0],p=arguments[1];return this.add(g,p,!0),!0}else if(arguments[0]instanceof Coordinate&&typeof arguments[1]=="boolean"){var y=arguments[0],b=arguments[1];if(!b&&this.size()>=1){var E=this.get(this.size()-1);if(E.equals2D(y))return null}n.prototype.add.call(this,y)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var C=arguments[0],A=arguments[1];return this.add(C,A),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var B=arguments[0],M=arguments[1],N=arguments[2];if(N)for(var Z=0;Z<B.length;Z++)l.add(B[Z],M);else for(var ee=B.length-1;ee>=0;ee--)l.add(B[ee],M);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Coordinate){var F=arguments[0],O=arguments[1],k=arguments[2];if(!k){var H=this.size();if(H>0){if(F>0){var ce=this.get(F-1);if(ce.equals2D(O))return null}if(F<H){var U=this.get(F);if(U.equals2D(O))return null}}}n.prototype.add.call(this,F,O)}}else if(arguments.length===4){var te=arguments[0],re=arguments[1],ue=arguments[2],V=arguments[3],S=1;ue>V&&(S=-1);for(var T=ue;T!==V;T+=S)l.add(te[T],re);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new Coordinate(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,t),e}(ArrayList),CoordinateArrays=function(){},staticAccessors$13={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};staticAccessors$13.ForwardComparator.get=function(){return ForwardComparator};staticAccessors$13.BidirectionalComparator.get=function(){return BidirectionalComparator};staticAccessors$13.coordArrayType.get=function(){return new Array(0).fill(null)};CoordinateArrays.prototype.interfaces_=function(){return[]};CoordinateArrays.prototype.getClass=function(){return CoordinateArrays};CoordinateArrays.isRing=function(e){return!(e.length<4||!e[0].equals2D(e[e.length-1]))};CoordinateArrays.ptNotInList=function(e,t){for(var a=0;a<e.length;a++){var l=e[a];if(CoordinateArrays.indexOf(l,t)<0)return l}return null};CoordinateArrays.scroll=function(e,t){var a=CoordinateArrays.indexOf(t,e);if(a<0)return null;var l=new Array(e.length).fill(null);System.arraycopy(e,a,l,0,e.length-a),System.arraycopy(e,0,l,e.length-a,a),System.arraycopy(l,0,e,0,e.length)};CoordinateArrays.equals=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(e===null||t===null||e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(!e[a].equals(t[a]))return!1;return!0}else if(arguments.length===3){var l=arguments[0],h=arguments[1],g=arguments[2];if(l===h)return!0;if(l===null||h===null||l.length!==h.length)return!1;for(var p=0;p<l.length;p++)if(g.compare(l[p],h[p])!==0)return!1;return!0}};CoordinateArrays.intersection=function(e,t){for(var a=new CoordinateList,l=0;l<e.length;l++)t.intersects(e[l])&&a.add(e[l],!0);return a.toCoordinateArray()};CoordinateArrays.hasRepeatedPoints=function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1};CoordinateArrays.removeRepeatedPoints=function(e){if(!CoordinateArrays.hasRepeatedPoints(e))return e;var t=new CoordinateList(e,!1);return t.toCoordinateArray()};CoordinateArrays.reverse=function(e){for(var t=e.length-1,a=Math.trunc(t/2),l=0;l<=a;l++){var h=e[l];e[l]=e[t-l],e[t-l]=h}};CoordinateArrays.removeNull=function(e){for(var t=0,a=0;a<e.length;a++)e[a]!==null&&t++;var l=new Array(t).fill(null);if(t===0)return l;for(var h=0,g=0;g<e.length;g++)e[g]!==null&&(l[h++]=e[g]);return l};CoordinateArrays.copyDeep=function(){if(arguments.length===1){for(var e=arguments[0],t=new Array(e.length).fill(null),a=0;a<e.length;a++)t[a]=new Coordinate(e[a]);return t}else if(arguments.length===5)for(var l=arguments[0],h=arguments[1],g=arguments[2],p=arguments[3],y=arguments[4],b=0;b<y;b++)g[p+b]=new Coordinate(l[h+b])};CoordinateArrays.isEqualReversed=function(e,t){for(var a=0;a<e.length;a++){var l=e[a],h=t[e.length-a-1];if(l.compareTo(h)!==0)return!1}return!0};CoordinateArrays.envelope=function(e){for(var t=new Envelope,a=0;a<e.length;a++)t.expandToInclude(e[a]);return t};CoordinateArrays.toCoordinateArray=function(e){return e.toArray(CoordinateArrays.coordArrayType)};CoordinateArrays.atLeastNCoordinatesOrNothing=function(e,t){return t.length>=e?t:[]};CoordinateArrays.indexOf=function(e,t){for(var a=0;a<t.length;a++)if(e.equals(t[a]))return a;return-1};CoordinateArrays.increasingDirection=function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var a=e.length-1-t,l=e[t].compareTo(e[a]);if(l!==0)return l}return 1};CoordinateArrays.compare=function(e,t){for(var a=0;a<e.length&&a<t.length;){var l=e[a].compareTo(t[a]);if(l!==0)return l;a++}return a<t.length?-1:a<e.length?1:0};CoordinateArrays.minCoordinate=function(e){for(var t=null,a=0;a<e.length;a++)(t===null||t.compareTo(e[a])>0)&&(t=e[a]);return t};CoordinateArrays.extract=function(e,t,a){t=MathUtil.clamp(t,0,e.length),a=MathUtil.clamp(a,-1,e.length);var l=a-t+1;a<0&&(l=0),t>=e.length&&(l=0),a<t&&(l=0);var h=new Array(l).fill(null);if(l===0)return h;for(var g=0,p=t;p<=a;p++)h[g++]=e[p];return h};Object.defineProperties(CoordinateArrays,staticAccessors$13);var ForwardComparator=function(){};ForwardComparator.prototype.compare=function(e,t){var a=e,l=t;return CoordinateArrays.compare(a,l)};ForwardComparator.prototype.interfaces_=function(){return[Comparator]};ForwardComparator.prototype.getClass=function(){return ForwardComparator};var BidirectionalComparator=function(){};BidirectionalComparator.prototype.compare=function(e,t){var a=e,l=t;if(a.length<l.length)return-1;if(a.length>l.length)return 1;if(a.length===0)return 0;var h=CoordinateArrays.compare(a,l),g=CoordinateArrays.isEqualReversed(a,l);return g?0:h};BidirectionalComparator.prototype.OLDcompare=function(e,t){var a=e,l=t;if(a.length<l.length)return-1;if(a.length>l.length)return 1;if(a.length===0)return 0;for(var h=CoordinateArrays.increasingDirection(a),g=CoordinateArrays.increasingDirection(l),p=h>0?0:a.length-1,y=g>0?0:a.length-1,b=0;b<a.length;b++){var E=a[p].compareTo(l[y]);if(E!==0)return E;p+=h,y+=g}return 0};BidirectionalComparator.prototype.interfaces_=function(){return[Comparator]};BidirectionalComparator.prototype.getClass=function(){return BidirectionalComparator};var Map$1=function(){};Map$1.prototype.get=function(){};Map$1.prototype.put=function(){};Map$1.prototype.size=function(){};Map$1.prototype.values=function(){};Map$1.prototype.entrySet=function(){};var SortedMap=function(n){function e(){n.apply(this,arguments)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Map$1);function OperationNotSupported(n){this.message=n||""}OperationNotSupported.prototype=new Error;OperationNotSupported.prototype.name="OperationNotSupported";function Set$1(){}Set$1.prototype=new Collection;Set$1.prototype.contains=function(){};var HashSet=function(n){function e(){n.call(this),this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.contains=function(a){for(var l=this,h=0,g=this.array_.length;h<g;h++){var p=l.array_[h];if(p===a)return!0}return!1},e.prototype.add=function(a){return this.contains(a)?!1:(this.array_.push(a),!0)},e.prototype.addAll=function(a){for(var l=this,h=a.iterator();h.hasNext();)l.add(h.next());return!0},e.prototype.remove=function(a){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return this.array_.length===0},e.prototype.toArray=function(){for(var a=this,l=[],h=0,g=this.array_.length;h<g;h++)l.push(a.array_[h]);return l},e.prototype.iterator=function(){return new Iterator_$1(this)},e}(Set$1),Iterator_$1=function(n){function e(t){n.call(this),this.hashSet_=t,this.position_=0}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new NoSuchElementException;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new OperationNotSupported},e}(Iterator),BLACK=0,RED=1;function colorOf(n){return n===null?BLACK:n.color}function parentOf(n){return n===null?null:n.parent}function setColor(n,e){n!==null&&(n.color=e)}function leftOf(n){return n===null?null:n.left}function rightOf(n){return n===null?null:n.right}function TreeMap(){this.root_=null,this.size_=0}TreeMap.prototype=new SortedMap;TreeMap.prototype.get=function(n){for(var e=this.root_;e!==null;){var t=n.compareTo(e.key);if(t<0)e=e.left;else if(t>0)e=e.right;else return e.value}return null};TreeMap.prototype.put=function(n,e){if(this.root_===null)return this.root_={key:n,value:e,left:null,right:null,parent:null,color:BLACK,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var t=this.root_,a,l;do if(a=t,l=n.compareTo(t.key),l<0)t=t.left;else if(l>0)t=t.right;else{var h=t.value;return t.value=e,h}while(t!==null);var g={key:n,left:null,right:null,value:e,parent:a,color:BLACK,getValue:function(){return this.value},getKey:function(){return this.key}};return l<0?a.left=g:a.right=g,this.fixAfterInsertion(g),this.size_++,null};TreeMap.prototype.fixAfterInsertion=function(n){var e=this;for(n.color=RED;n!=null&&n!==this.root_&&n.parent.color===RED;)if(parentOf(n)===leftOf(parentOf(parentOf(n)))){var t=rightOf(parentOf(parentOf(n)));colorOf(t)===RED?(setColor(parentOf(n),BLACK),setColor(t,BLACK),setColor(parentOf(parentOf(n)),RED),n=parentOf(parentOf(n))):(n===rightOf(parentOf(n))&&(n=parentOf(n),e.rotateLeft(n)),setColor(parentOf(n),BLACK),setColor(parentOf(parentOf(n)),RED),e.rotateRight(parentOf(parentOf(n))))}else{var a=leftOf(parentOf(parentOf(n)));colorOf(a)===RED?(setColor(parentOf(n),BLACK),setColor(a,BLACK),setColor(parentOf(parentOf(n)),RED),n=parentOf(parentOf(n))):(n===leftOf(parentOf(n))&&(n=parentOf(n),e.rotateRight(n)),setColor(parentOf(n),BLACK),setColor(parentOf(parentOf(n)),RED),e.rotateLeft(parentOf(parentOf(n))))}this.root_.color=BLACK};TreeMap.prototype.values=function(){var n=new ArrayList,e=this.getFirstEntry();if(e!==null)for(n.add(e.value);(e=TreeMap.successor(e))!==null;)n.add(e.value);return n};TreeMap.prototype.entrySet=function(){var n=new HashSet,e=this.getFirstEntry();if(e!==null)for(n.add(e);(e=TreeMap.successor(e))!==null;)n.add(e);return n};TreeMap.prototype.rotateLeft=function(n){if(n!=null){var e=n.right;n.right=e.left,e.left!=null&&(e.left.parent=n),e.parent=n.parent,n.parent===null?this.root_=e:n.parent.left===n?n.parent.left=e:n.parent.right=e,e.left=n,n.parent=e}};TreeMap.prototype.rotateRight=function(n){if(n!=null){var e=n.left;n.left=e.right,e.right!=null&&(e.right.parent=n),e.parent=n.parent,n.parent===null?this.root_=e:n.parent.right===n?n.parent.right=e:n.parent.left=e,e.right=n,n.parent=e}};TreeMap.prototype.getFirstEntry=function(){var n=this.root_;if(n!=null)for(;n.left!=null;)n=n.left;return n};TreeMap.successor=function(n){if(n===null)return null;if(n.right!==null){for(var e=n.right;e.left!==null;)e=e.left;return e}else{for(var t=n.parent,a=n;t!==null&&a===t.right;)a=t,t=t.parent;return t}};TreeMap.prototype.size=function(){return this.size_};var Lineal=function(){};Lineal.prototype.interfaces_=function(){return[]};Lineal.prototype.getClass=function(){return Lineal};function SortedSet(){}SortedSet.prototype=new Set$1;function TreeSet(){this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}TreeSet.prototype=new SortedSet;TreeSet.prototype.contains=function(n){for(var e=this,t=0,a=this.array_.length;t<a;t++){var l=e.array_[t];if(l.compareTo(n)===0)return!0}return!1};TreeSet.prototype.add=function(n){var e=this;if(this.contains(n))return!1;for(var t=0,a=this.array_.length;t<a;t++){var l=e.array_[t];if(l.compareTo(n)===1)return e.array_.splice(t,0,n),!0}return this.array_.push(n),!0};TreeSet.prototype.addAll=function(n){for(var e=this,t=n.iterator();t.hasNext();)e.add(t.next());return!0};TreeSet.prototype.remove=function(n){throw new OperationNotSupported};TreeSet.prototype.size=function(){return this.array_.length};TreeSet.prototype.isEmpty=function(){return this.array_.length===0};TreeSet.prototype.toArray=function(){for(var n=this,e=[],t=0,a=this.array_.length;t<a;t++)e.push(n.array_[t]);return e};TreeSet.prototype.iterator=function(){return new Iterator_$2(this)};var Iterator_$2=function(n){this.treeSet_=n,this.position_=0};Iterator_$2.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new NoSuchElementException;return this.treeSet_.array_[this.position_++]};Iterator_$2.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};Iterator_$2.prototype.remove=function(){throw new OperationNotSupported};var Arrays=function(){};Arrays.sort=function(){var e=arguments[0],t,a,l,h;if(arguments.length===1)h=function(p,y){return p.compareTo(y)},e.sort(h);else if(arguments.length===2)l=arguments[1],h=function(p,y){return l.compare(p,y)},e.sort(h);else if(arguments.length===3){a=e.slice(arguments[1],arguments[2]),a.sort();var g=e.slice(0,arguments[1]).concat(a,e.slice(arguments[2],e.length));for(e.splice(0,e.length),t=0;t<g.length;t++)e.push(g[t])}else if(arguments.length===4)for(a=e.slice(arguments[1],arguments[2]),l=arguments[3],h=function(p,y){return l.compare(p,y)},a.sort(h),g=e.slice(0,arguments[1]).concat(a,e.slice(arguments[2],e.length)),e.splice(0,e.length),t=0;t<g.length;t++)e.push(g[t])};Arrays.asList=function(e){for(var t=new ArrayList,a=0,l=e.length;a<l;a++)t.add(e[a]);return t};var Dimension=function(){},staticAccessors$14={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};staticAccessors$14.P.get=function(){return 0};staticAccessors$14.L.get=function(){return 1};staticAccessors$14.A.get=function(){return 2};staticAccessors$14.FALSE.get=function(){return-1};staticAccessors$14.TRUE.get=function(){return-2};staticAccessors$14.DONTCARE.get=function(){return-3};staticAccessors$14.SYM_FALSE.get=function(){return"F"};staticAccessors$14.SYM_TRUE.get=function(){return"T"};staticAccessors$14.SYM_DONTCARE.get=function(){return"*"};staticAccessors$14.SYM_P.get=function(){return"0"};staticAccessors$14.SYM_L.get=function(){return"1"};staticAccessors$14.SYM_A.get=function(){return"2"};Dimension.prototype.interfaces_=function(){return[]};Dimension.prototype.getClass=function(){return Dimension};Dimension.toDimensionSymbol=function(e){switch(e){case Dimension.FALSE:return Dimension.SYM_FALSE;case Dimension.TRUE:return Dimension.SYM_TRUE;case Dimension.DONTCARE:return Dimension.SYM_DONTCARE;case Dimension.P:return Dimension.SYM_P;case Dimension.L:return Dimension.SYM_L;case Dimension.A:return Dimension.SYM_A}throw new IllegalArgumentException("Unknown dimension value: "+e)};Dimension.toDimensionValue=function(e){switch(Character.toUpperCase(e)){case Dimension.SYM_FALSE:return Dimension.FALSE;case Dimension.SYM_TRUE:return Dimension.TRUE;case Dimension.SYM_DONTCARE:return Dimension.DONTCARE;case Dimension.SYM_P:return Dimension.P;case Dimension.SYM_L:return Dimension.L;case Dimension.SYM_A:return Dimension.A}throw new IllegalArgumentException("Unknown dimension symbol: "+e)};Object.defineProperties(Dimension,staticAccessors$14);var GeometryFilter=function(){};GeometryFilter.prototype.filter=function(e){};GeometryFilter.prototype.interfaces_=function(){return[]};GeometryFilter.prototype.getClass=function(){return GeometryFilter};var CoordinateSequenceFilter=function(){};CoordinateSequenceFilter.prototype.filter=function(e,t){};CoordinateSequenceFilter.prototype.isDone=function(){};CoordinateSequenceFilter.prototype.isGeometryChanged=function(){};CoordinateSequenceFilter.prototype.interfaces_=function(){return[]};CoordinateSequenceFilter.prototype.getClass=function(){return CoordinateSequenceFilter};var GeometryCollection=function(n){function e(a,l){if(n.call(this,l),this._geometries=a||[],n.hasNullElements(this._geometries))throw new IllegalArgumentException("geometries must not contain null elements")}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var l=this,h=new Envelope,g=0;g<this._geometries.length;g++)h.expandToInclude(l._geometries[g].getEnvelopeInternal());return h},e.prototype.getGeometryN=function(l){return this._geometries[l]},e.prototype.getSortIndex=function(){return n.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var l=this,h=new Array(this.getNumPoints()).fill(null),g=-1,p=0;p<this._geometries.length;p++)for(var y=l._geometries[p].getCoordinates(),b=0;b<y.length;b++)g++,h[g]=y[b];return h},e.prototype.getArea=function(){for(var l=this,h=0,g=0;g<this._geometries.length;g++)h+=l._geometries[g].getArea();return h},e.prototype.equalsExact=function(){var l=this;if(arguments.length===2){var h=arguments[0],g=arguments[1];if(!this.isEquivalentClass(h))return!1;var p=h;if(this._geometries.length!==p._geometries.length)return!1;for(var y=0;y<this._geometries.length;y++)if(!l._geometries[y].equalsExact(p._geometries[y],g))return!1;return!0}else return n.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var l=this,h=0;h<this._geometries.length;h++)l._geometries[h].normalize();Arrays.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var l=this,h=Dimension.FALSE,g=0;g<this._geometries.length;g++)h=Math.max(h,l._geometries[g].getBoundaryDimension());return h},e.prototype.getDimension=function(){for(var l=this,h=Dimension.FALSE,g=0;g<this._geometries.length;g++)h=Math.max(h,l._geometries[g].getDimension());return h},e.prototype.getLength=function(){for(var l=this,h=0,g=0;g<this._geometries.length;g++)h+=l._geometries[g].getLength();return h},e.prototype.getNumPoints=function(){for(var l=this,h=0,g=0;g<this._geometries.length;g++)h+=l._geometries[g].getNumPoints();return h},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var l=this,h=this._geometries.length,g=new Array(h).fill(null),p=0;p<this._geometries.length;p++)g[p]=l._geometries[p].reverse();return this.getFactory().createGeometryCollection(g)},e.prototype.compareToSameClass=function(){var l=this;if(arguments.length===1){var h=arguments[0],g=new TreeSet(Arrays.asList(this._geometries)),p=new TreeSet(Arrays.asList(h._geometries));return this.compare(g,p)}else if(arguments.length===2){for(var y=arguments[0],b=arguments[1],E=y,C=this.getNumGeometries(),A=E.getNumGeometries(),B=0;B<C&&B<A;){var M=l.getGeometryN(B),N=E.getGeometryN(B),Z=M.compareToSameClass(N,b);if(Z!==0)return Z;B++}return B<C?1:B<A?-1:0}},e.prototype.apply=function(){var l=this;if(hasInterface(arguments[0],CoordinateFilter))for(var h=arguments[0],g=0;g<this._geometries.length;g++)l._geometries[g].apply(h);else if(hasInterface(arguments[0],CoordinateSequenceFilter)){var p=arguments[0];if(this._geometries.length===0)return null;for(var y=0;y<this._geometries.length&&(l._geometries[y].apply(p),!p.isDone());y++);p.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(arguments[0],GeometryFilter)){var b=arguments[0];b.filter(this);for(var E=0;E<this._geometries.length;E++)l._geometries[E].apply(b)}else if(hasInterface(arguments[0],GeometryComponentFilter)){var C=arguments[0];C.filter(this);for(var A=0;A<this._geometries.length;A++)l._geometries[A].apply(C)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Assert.shouldNeverReachHere(),null},e.prototype.clone=function(){var l=this,h=n.prototype.clone.call(this);h._geometries=new Array(this._geometries.length).fill(null);for(var g=0;g<this._geometries.length;g++)h._geometries[g]=l._geometries[g].clone();return h},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var l=this,h=new Array(this._geometries.length).fill(null),g=0;g<h.length;g++)h[g]=l._geometries[g].copy();return new e(h,this._factory)},e.prototype.isEmpty=function(){for(var l=this,h=0;h<this._geometries.length;h++)if(!l._geometries[h].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(e,t),e}(Geometry),MultiLineString=function(n){function e(){n.apply(this,arguments)}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Geometry.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];return this.isEquivalentClass(l)?n.prototype.equalsExact.call(this,l,h):!1}else return n.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Dimension.FALSE:0},e.prototype.isClosed=function(){var l=this;if(this.isEmpty())return!1;for(var h=0;h<this._geometries.length;h++)if(!l._geometries[h].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var l=this,h=this._geometries.length,g=new Array(h).fill(null),p=0;p<this._geometries.length;p++)g[h-1-p]=l._geometries[p].reverse();return this.getFactory().createMultiLineString(g)},e.prototype.getBoundary=function(){return new BoundaryOp(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var l=this,h=new Array(this._geometries.length).fill(null),g=0;g<h.length;g++)h[g]=l._geometries[g].copy();return new e(h,this._factory)},e.prototype.interfaces_=function(){return[Lineal]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(e,t),e}(GeometryCollection),BoundaryOp=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var e=arguments[0],t=BoundaryNodeRule.MOD2_BOUNDARY_RULE;this._geom=e,this._geomFact=e.getFactory(),this._bnRule=t}else if(arguments.length===2){var a=arguments[0],l=arguments[1];this._geom=a,this._geomFact=a.getFactory(),this._bnRule=l}};BoundaryOp.prototype.boundaryMultiLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return t.length===1?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)};BoundaryOp.prototype.getBoundary=function(){return this._geom instanceof LineString?this.boundaryLineString(this._geom):this._geom instanceof MultiLineString?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};BoundaryOp.prototype.boundaryLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this._bnRule.isInBoundary(2);return t?e.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])};BoundaryOp.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};BoundaryOp.prototype.computeBoundaryCoordinates=function(e){var t=this,a=new ArrayList;this._endpointMap=new TreeMap;for(var l=0;l<e.getNumGeometries();l++){var h=e.getGeometryN(l);h.getNumPoints()!==0&&(t.addEndpoint(h.getCoordinateN(0)),t.addEndpoint(h.getCoordinateN(h.getNumPoints()-1)))}for(var g=this._endpointMap.entrySet().iterator();g.hasNext();){var p=g.next(),y=p.getValue(),b=y.count;t._bnRule.isInBoundary(b)&&a.add(p.getKey())}return CoordinateArrays.toCoordinateArray(a)};BoundaryOp.prototype.addEndpoint=function(e){var t=this._endpointMap.get(e);t===null&&(t=new Counter,this._endpointMap.put(e,t)),t.count++};BoundaryOp.prototype.interfaces_=function(){return[]};BoundaryOp.prototype.getClass=function(){return BoundaryOp};BoundaryOp.getBoundary=function(){if(arguments.length===1){var e=arguments[0],t=new BoundaryOp(e);return t.getBoundary()}else if(arguments.length===2){var a=arguments[0],l=arguments[1],h=new BoundaryOp(a,l);return h.getBoundary()}};var Counter=function(){this.count=null};Counter.prototype.interfaces_=function(){return[]};Counter.prototype.getClass=function(){return Counter};function PrintStream(){}function StringReader(){}var DecimalFormat=function(){};function ByteArrayOutputStream(){}function IOException(){}function LineNumberReader(){}var StringUtil=function(){},staticAccessors$15={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};StringUtil.prototype.interfaces_=function(){return[]};StringUtil.prototype.getClass=function(){return StringUtil};StringUtil.chars=function(e,t){for(var a=new Array(t).fill(null),l=0;l<t;l++)a[l]=e;return String(a)};StringUtil.getStackTrace=function(){if(arguments.length===1){var e=arguments[0],t=new ByteArrayOutputStream,a=new PrintStream;return e.printStackTrace(a),t.toString()}else if(arguments.length===2){var l=arguments[0],h=arguments[1],g="";new StringReader(StringUtil.getStackTrace(l));for(var p=new LineNumberReader,y=0;y<h;y++)try{g+=p.readLine()+StringUtil.NEWLINE}catch(b){if(b instanceof IOException)Assert.shouldNeverReachHere();else throw b}finally{}return g}};StringUtil.split=function(e,t){for(var a=t.length,l=new ArrayList,h=""+e,g=h.indexOf(t);g>=0;){var p=h.substring(0,g);l.add(p),h=h.substring(g+a),g=h.indexOf(t)}h.length>0&&l.add(h);for(var y=new Array(l.size()).fill(null),b=0;b<y.length;b++)y[b]=l.get(b);return y};StringUtil.toString=function(){if(arguments.length===1){var e=arguments[0];return StringUtil.SIMPLE_ORDINATE_FORMAT.format(e)}};StringUtil.spaces=function(e){return StringUtil.chars(" ",e)};staticAccessors$15.NEWLINE.get=function(){return System.getProperty("line.separator")};staticAccessors$15.SIMPLE_ORDINATE_FORMAT.get=function(){return new DecimalFormat};Object.defineProperties(StringUtil,staticAccessors$15);var CoordinateSequences=function(){};CoordinateSequences.prototype.interfaces_=function(){return[]};CoordinateSequences.prototype.getClass=function(){return CoordinateSequences};CoordinateSequences.copyCoord=function(e,t,a,l){for(var h=Math.min(e.getDimension(),a.getDimension()),g=0;g<h;g++)a.setOrdinate(l,g,e.getOrdinate(t,g))};CoordinateSequences.isRing=function(e){var t=e.size();return t===0?!0:t<=3?!1:e.getOrdinate(0,CoordinateSequence.X)===e.getOrdinate(t-1,CoordinateSequence.X)&&e.getOrdinate(0,CoordinateSequence.Y)===e.getOrdinate(t-1,CoordinateSequence.Y)};CoordinateSequences.isEqual=function(e,t){var a=e.size(),l=t.size();if(a!==l)return!1;for(var h=Math.min(e.getDimension(),t.getDimension()),g=0;g<a;g++)for(var p=0;p<h;p++){var y=e.getOrdinate(g,p),b=t.getOrdinate(g,p);if(e.getOrdinate(g,p)!==t.getOrdinate(g,p)&&!(Double.isNaN(y)&&Double.isNaN(b)))return!1}return!0};CoordinateSequences.extend=function(e,t,a){var l=e.create(a,t.getDimension()),h=t.size();if(CoordinateSequences.copy(t,0,l,0,h),h>0)for(var g=h;g<a;g++)CoordinateSequences.copy(t,h-1,l,g,1);return l};CoordinateSequences.reverse=function(e){for(var t=e.size()-1,a=Math.trunc(t/2),l=0;l<=a;l++)CoordinateSequences.swap(e,l,t-l)};CoordinateSequences.swap=function(e,t,a){if(t===a)return null;for(var l=0;l<e.getDimension();l++){var h=e.getOrdinate(t,l);e.setOrdinate(t,l,e.getOrdinate(a,l)),e.setOrdinate(a,l,h)}};CoordinateSequences.copy=function(e,t,a,l,h){for(var g=0;g<h;g++)CoordinateSequences.copyCoord(e,t+g,a,l+g)};CoordinateSequences.toString=function(){if(arguments.length===1){var e=arguments[0],t=e.size();if(t===0)return"()";var a=e.getDimension(),l=new StringBuffer;l.append("(");for(var h=0;h<t;h++){h>0&&l.append(" ");for(var g=0;g<a;g++)g>0&&l.append(","),l.append(StringUtil.toString(e.getOrdinate(h,g)))}return l.append(")"),l.toString()}};CoordinateSequences.ensureValidRing=function(e,t){var a=t.size();if(a===0)return t;if(a<=3)return CoordinateSequences.createClosedRing(e,t,4);var l=t.getOrdinate(0,CoordinateSequence.X)===t.getOrdinate(a-1,CoordinateSequence.X)&&t.getOrdinate(0,CoordinateSequence.Y)===t.getOrdinate(a-1,CoordinateSequence.Y);return l?t:CoordinateSequences.createClosedRing(e,t,a+1)};CoordinateSequences.createClosedRing=function(e,t,a){var l=e.create(a,t.getDimension()),h=t.size();CoordinateSequences.copy(t,0,l,0,h);for(var g=h;g<a;g++)CoordinateSequences.copy(t,0,l,g,1);return l};var LineString=function(n){function e(a,l){n.call(this,l),this._points=null,this.init(a)}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Envelope:this._points.expandEnvelope(new Envelope)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return n.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var l=this;if(arguments.length===2){var h=arguments[0],g=arguments[1];if(!this.isEquivalentClass(h))return!1;var p=h;if(this._points.size()!==p._points.size())return!1;for(var y=0;y<this._points.size();y++)if(!l.equal(l._points.getCoordinate(y),p._points.getCoordinate(y),g))return!1;return!0}else return n.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var l=this,h=0;h<Math.trunc(this._points.size()/2);h++){var g=l._points.size()-1-h;if(!l._points.getCoordinate(h).equals(l._points.getCoordinate(g)))return l._points.getCoordinate(h).compareTo(l._points.getCoordinate(g))>0&&CoordinateSequences.reverse(l._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Dimension.FALSE:0},e.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return CGAlgorithms.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var l=this._points.copy();CoordinateSequences.reverse(l);var h=this.getFactory().createLineString(l);return h},e.prototype.compareToSameClass=function(){var l=this;if(arguments.length===1){for(var h=arguments[0],g=h,p=0,y=0;p<this._points.size()&&y<g._points.size();){var b=l._points.getCoordinate(p).compareTo(g._points.getCoordinate(y));if(b!==0)return b;p++,y++}return p<this._points.size()?1:y<g._points.size()?-1:0}else if(arguments.length===2){var E=arguments[0],C=arguments[1],A=E;return C.compare(this._points,A._points)}},e.prototype.apply=function(){var l=this;if(hasInterface(arguments[0],CoordinateFilter))for(var h=arguments[0],g=0;g<this._points.size();g++)h.filter(l._points.getCoordinate(g));else if(hasInterface(arguments[0],CoordinateSequenceFilter)){var p=arguments[0];if(this._points.size()===0)return null;for(var y=0;y<this._points.size()&&(p.filter(l._points,y),!p.isDone());y++);p.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(arguments[0],GeometryFilter)){var b=arguments[0];b.filter(this)}else if(hasInterface(arguments[0],GeometryComponentFilter)){var E=arguments[0];E.filter(this)}},e.prototype.getBoundary=function(){return new BoundaryOp(this).getBoundary()},e.prototype.isEquivalentClass=function(l){return l instanceof e},e.prototype.clone=function(){var l=n.prototype.clone.call(this);return l._points=this._points.clone(),l},e.prototype.getCoordinateN=function(l){return this._points.getCoordinate(l)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return this._points.size()===0},e.prototype.init=function(l){if(l===null&&(l=this.getFactory().getCoordinateSequenceFactory().create([])),l.size()===1)throw new IllegalArgumentException("Invalid number of points in LineString (found "+l.size()+" - must be 0 or >= 2)");this._points=l},e.prototype.isCoordinate=function(l){for(var h=this,g=0;g<this._points.size();g++)if(h._points.getCoordinate(g).equals(l))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(l){return this.getFactory().createPoint(this._points.getCoordinate(l))},e.prototype.interfaces_=function(){return[Lineal]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,t),e}(Geometry),Puntal=function(){};Puntal.prototype.interfaces_=function(){return[]};Puntal.prototype.getClass=function(){return Puntal};var Point$3=function(n){function e(a,l){n.call(this,l),this._coordinates=a||null,this.init(this._coordinates)}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Envelope;var l=new Envelope;return l.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),l},e.prototype.getSortIndex=function(){return n.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];return this.isEquivalentClass(l)?this.isEmpty()&&l.isEmpty()?!0:this.isEmpty()!==l.isEmpty()?!1:this.equal(l.getCoordinate(),this.getCoordinate(),h):!1}else return n.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Dimension.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(arguments.length===1){var l=arguments[0],h=l;return this.getCoordinate().compareTo(h.getCoordinate())}else if(arguments.length===2){var g=arguments[0],p=arguments[1],y=g;return p.compare(this._coordinates,y._coordinates)}},e.prototype.apply=function(){if(hasInterface(arguments[0],CoordinateFilter)){var l=arguments[0];if(this.isEmpty())return null;l.filter(this.getCoordinate())}else if(hasInterface(arguments[0],CoordinateSequenceFilter)){var h=arguments[0];if(this.isEmpty())return null;h.filter(this._coordinates,0),h.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(arguments[0],GeometryFilter)){var g=arguments[0];g.filter(this)}else if(hasInterface(arguments[0],GeometryComponentFilter)){var p=arguments[0];p.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var l=n.prototype.clone.call(this);return l._coordinates=this._coordinates.clone(),l},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return this._coordinates.size()===0},e.prototype.init=function(l){l===null&&(l=this.getFactory().getCoordinateSequenceFactory().create([])),Assert.isTrue(l.size()<=1),this._coordinates=l},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Puntal]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(e,t),e}(Geometry),Polygonal=function(){};Polygonal.prototype.interfaces_=function(){return[]};Polygonal.prototype.getClass=function(){return Polygonal};var Polygon=function(n){function e(a,l,h){if(n.call(this,h),this._shell=null,this._holes=null,a===null&&(a=this.getFactory().createLinearRing()),l===null&&(l=[]),n.hasNullElements(l))throw new IllegalArgumentException("holes must not contain null elements");if(a.isEmpty()&&n.hasNonEmptyElements(l))throw new IllegalArgumentException("shell is empty but holes are not");this._shell=a,this._holes=l}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return n.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){var l=this;if(this.isEmpty())return[];for(var h=new Array(this.getNumPoints()).fill(null),g=-1,p=this._shell.getCoordinates(),y=0;y<p.length;y++)g++,h[g]=p[y];for(var b=0;b<this._holes.length;b++)for(var E=l._holes[b].getCoordinates(),C=0;C<E.length;C++)g++,h[g]=E[C];return h},e.prototype.getArea=function(){var l=this,h=0;h+=Math.abs(CGAlgorithms.signedArea(this._shell.getCoordinateSequence()));for(var g=0;g<this._holes.length;g++)h-=Math.abs(CGAlgorithms.signedArea(l._holes[g].getCoordinateSequence()));return h},e.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var l=this._shell.getCoordinateSequence(),h=this.getEnvelopeInternal(),g=0;g<5;g++){var p=l.getX(g);if(!(p===h.getMinX()||p===h.getMaxX()))return!1;var y=l.getY(g);if(!(y===h.getMinY()||y===h.getMaxY()))return!1}for(var b=l.getX(0),E=l.getY(0),C=1;C<=4;C++){var A=l.getX(C),B=l.getY(C),M=A!==b,N=B!==E;if(M===N)return!1;b=A,E=B}return!0},e.prototype.equalsExact=function(){var l=this;if(arguments.length===2){var h=arguments[0],g=arguments[1];if(!this.isEquivalentClass(h))return!1;var p=h,y=this._shell,b=p._shell;if(!y.equalsExact(b,g)||this._holes.length!==p._holes.length)return!1;for(var E=0;E<this._holes.length;E++)if(!l._holes[E].equalsExact(p._holes[E],g))return!1;return!0}else return n.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var l=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var h=0;h<this._holes.length;h++)l.normalize(l._holes[h],!1);Arrays.sort(this._holes)}else if(arguments.length===2){var g=arguments[0],p=arguments[1];if(g.isEmpty())return null;var y=new Array(g.getCoordinates().length-1).fill(null);System.arraycopy(g.getCoordinates(),0,y,0,y.length);var b=CoordinateArrays.minCoordinate(g.getCoordinates());CoordinateArrays.scroll(y,b),System.arraycopy(y,0,g.getCoordinates(),0,y.length),g.getCoordinates()[y.length]=y[0],CGAlgorithms.isCCW(g.getCoordinates())===p&&CoordinateArrays.reverse(g.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var l=this,h=0;h+=this._shell.getLength();for(var g=0;g<this._holes.length;g++)h+=l._holes[g].getLength();return h},e.prototype.getNumPoints=function(){for(var l=this,h=this._shell.getNumPoints(),g=0;g<this._holes.length;g++)h+=l._holes[g].getNumPoints();return h},e.prototype.reverse=function(){var l=this,h=this.copy();h._shell=this._shell.copy().reverse(),h._holes=new Array(this._holes.length).fill(null);for(var g=0;g<this._holes.length;g++)h._holes[g]=l._holes[g].copy().reverse();return h},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var l=this;if(arguments.length===1){var h=arguments[0],g=this._shell,p=h._shell;return g.compareToSameClass(p)}else if(arguments.length===2){var y=arguments[0],b=arguments[1],E=y,C=this._shell,A=E._shell,B=C.compareToSameClass(A,b);if(B!==0)return B;for(var M=this.getNumInteriorRing(),N=E.getNumInteriorRing(),Z=0;Z<M&&Z<N;){var ee=l.getInteriorRingN(Z),F=E.getInteriorRingN(Z),O=ee.compareToSameClass(F,b);if(O!==0)return O;Z++}return Z<M?1:Z<N?-1:0}},e.prototype.apply=function(l){var h=this;if(hasInterface(l,CoordinateFilter)){this._shell.apply(l);for(var g=0;g<this._holes.length;g++)h._holes[g].apply(l)}else if(hasInterface(l,CoordinateSequenceFilter)){if(this._shell.apply(l),!l.isDone())for(var p=0;p<this._holes.length&&(h._holes[p].apply(l),!l.isDone());p++);l.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(l,GeometryFilter))l.filter(this);else if(hasInterface(l,GeometryComponentFilter)){l.filter(this),this._shell.apply(l);for(var y=0;y<this._holes.length;y++)h._holes[y].apply(l)}},e.prototype.getBoundary=function(){var l=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var h=new Array(this._holes.length+1).fill(null);h[0]=this._shell;for(var g=0;g<this._holes.length;g++)h[g+1]=l._holes[g];return h.length<=1?this.getFactory().createLinearRing(h[0].getCoordinateSequence()):this.getFactory().createMultiLineString(h)},e.prototype.clone=function(){var l=this,h=n.prototype.clone.call(this);h._shell=this._shell.clone(),h._holes=new Array(this._holes.length).fill(null);for(var g=0;g<this._holes.length;g++)h._holes[g]=l._holes[g].clone();return h},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var l=this,h=this._shell.copy(),g=new Array(this._holes.length).fill(null),p=0;p<g.length;p++)g[p]=l._holes[p].copy();return new e(h,g,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(l){return this._holes[l]},e.prototype.interfaces_=function(){return[Polygonal]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,t),e}(Geometry),MultiPoint=function(n){function e(){n.apply(this,arguments)}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Geometry.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];return this.isEquivalentClass(l)?n.prototype.equalsExact.call(this,l,h):!1}else return n.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(arguments.length===1){var l=arguments[0];return this._geometries[l].getCoordinate()}else return n.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Dimension.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var l=this,h=new Array(this._geometries.length).fill(null),g=0;g<h.length;g++)h[g]=l._geometries[g].copy();return new e(h,this._factory)},e.prototype.interfaces_=function(){return[Puntal]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(e,t),e}(GeometryCollection),LinearRing=function(n){function e(a,l){a instanceof Coordinate&&l instanceof GeometryFactory&&(a=l.getCoordinateSequenceFactory().create(a)),n.call(this,a,l),this.validateConstruction()}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Geometry.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Dimension.FALSE},e.prototype.isClosed=function(){return this.isEmpty()?!0:n.prototype.isClosed.call(this)},e.prototype.reverse=function(){var l=this._points.copy();CoordinateSequences.reverse(l);var h=this.getFactory().createLinearRing(l);return h},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!n.prototype.isClosed.call(this))throw new IllegalArgumentException("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new IllegalArgumentException("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},t.MINIMUM_VALID_SIZE.get=function(){return 4},t.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,t),e}(LineString),MultiPolygon=function(n){function e(){n.apply(this,arguments)}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Geometry.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];return this.isEquivalentClass(l)?n.prototype.equalsExact.call(this,l,h):!1}else return n.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var l=this,h=this._geometries.length,g=new Array(h).fill(null),p=0;p<this._geometries.length;p++)g[p]=l._geometries[p].reverse();return this.getFactory().createMultiPolygon(g)},e.prototype.getBoundary=function(){var l=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var h=new ArrayList,g=0;g<this._geometries.length;g++)for(var p=l._geometries[g],y=p.getBoundary(),b=0;b<y.getNumGeometries();b++)h.add(y.getGeometryN(b));var E=new Array(h.size()).fill(null);return this.getFactory().createMultiLineString(h.toArray(E))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var l=this,h=new Array(this._geometries.length).fill(null),g=0;g<h.length;g++)h[g]=l._geometries[g].copy();return new e(h,this._factory)},e.prototype.interfaces_=function(){return[Polygonal]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,t),e}(GeometryCollection),GeometryEditor=function(e){this._factory=e||null,this._isUserDataCopied=!1},staticAccessors$16={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};GeometryEditor.prototype.setCopyUserData=function(e){this._isUserDataCopied=e};GeometryEditor.prototype.edit=function(e,t){if(e===null)return null;var a=this.editInternal(e,t);return this._isUserDataCopied&&a.setUserData(e.getUserData()),a};GeometryEditor.prototype.editInternal=function(e,t){return this._factory===null&&(this._factory=e.getFactory()),e instanceof GeometryCollection?this.editGeometryCollection(e,t):e instanceof Polygon?this.editPolygon(e,t):e instanceof Point$3?t.edit(e,this._factory):e instanceof LineString?t.edit(e,this._factory):(Assert.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)};GeometryEditor.prototype.editGeometryCollection=function(e,t){for(var a=this,l=t.edit(e,this._factory),h=new ArrayList,g=0;g<l.getNumGeometries();g++){var p=a.edit(l.getGeometryN(g),t);p===null||p.isEmpty()||h.add(p)}return l.getClass()===MultiPoint?this._factory.createMultiPoint(h.toArray([])):l.getClass()===MultiLineString?this._factory.createMultiLineString(h.toArray([])):l.getClass()===MultiPolygon?this._factory.createMultiPolygon(h.toArray([])):this._factory.createGeometryCollection(h.toArray([]))};GeometryEditor.prototype.editPolygon=function(e,t){var a=this,l=t.edit(e,this._factory);if(l===null&&(l=this._factory.createPolygon(null)),l.isEmpty())return l;var h=this.edit(l.getExteriorRing(),t);if(h===null||h.isEmpty())return this._factory.createPolygon();for(var g=new ArrayList,p=0;p<l.getNumInteriorRing();p++){var y=a.edit(l.getInteriorRingN(p),t);y===null||y.isEmpty()||g.add(y)}return this._factory.createPolygon(h,g.toArray([]))};GeometryEditor.prototype.interfaces_=function(){return[]};GeometryEditor.prototype.getClass=function(){return GeometryEditor};GeometryEditor.GeometryEditorOperation=function(){};staticAccessors$16.NoOpGeometryOperation.get=function(){return NoOpGeometryOperation};staticAccessors$16.CoordinateOperation.get=function(){return CoordinateOperation};staticAccessors$16.CoordinateSequenceOperation.get=function(){return CoordinateSequenceOperation};Object.defineProperties(GeometryEditor,staticAccessors$16);var NoOpGeometryOperation=function(){};NoOpGeometryOperation.prototype.edit=function(e,t){return e};NoOpGeometryOperation.prototype.interfaces_=function(){return[GeometryEditor.GeometryEditorOperation]};NoOpGeometryOperation.prototype.getClass=function(){return NoOpGeometryOperation};var CoordinateOperation=function(){};CoordinateOperation.prototype.edit=function(e,t){var a=this.editCoordinates(e.getCoordinates(),e);return a===null?e:e instanceof LinearRing?t.createLinearRing(a):e instanceof LineString?t.createLineString(a):e instanceof Point$3?a.length>0?t.createPoint(a[0]):t.createPoint():e};CoordinateOperation.prototype.interfaces_=function(){return[GeometryEditor.GeometryEditorOperation]};CoordinateOperation.prototype.getClass=function(){return CoordinateOperation};var CoordinateSequenceOperation=function(){};CoordinateSequenceOperation.prototype.edit=function(e,t){return e instanceof LinearRing?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof LineString?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof Point$3?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e};CoordinateSequenceOperation.prototype.interfaces_=function(){return[GeometryEditor.GeometryEditorOperation]};CoordinateSequenceOperation.prototype.getClass=function(){return CoordinateSequenceOperation};var CoordinateArraySequence=function(){var e=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var a=0;a<t;a++)e._coordinates[a]=new Coordinate}else if(hasInterface(arguments[0],CoordinateSequence)){var l=arguments[0];if(l===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=l.getDimension(),this._coordinates=new Array(l.size()).fill(null);for(var h=0;h<this._coordinates.length;h++)e._coordinates[h]=l.getCoordinateCopy(h)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var g=arguments[0],p=arguments[1];this._coordinates=g,this._dimension=p,g===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var y=arguments[0],b=arguments[1];this._coordinates=new Array(y).fill(null),this._dimension=b;for(var E=0;E<y;E++)e._coordinates[E]=new Coordinate}}},staticAccessors$18={serialVersionUID:{configurable:!0}};CoordinateArraySequence.prototype.setOrdinate=function(e,t,a){switch(t){case CoordinateSequence.X:this._coordinates[e].x=a;break;case CoordinateSequence.Y:this._coordinates[e].y=a;break;case CoordinateSequence.Z:this._coordinates[e].z=a;break;default:throw new IllegalArgumentException("invalid ordinateIndex")}};CoordinateArraySequence.prototype.size=function(){return this._coordinates.length};CoordinateArraySequence.prototype.getOrdinate=function(e,t){switch(t){case CoordinateSequence.X:return this._coordinates[e].x;case CoordinateSequence.Y:return this._coordinates[e].y;case CoordinateSequence.Z:return this._coordinates[e].z}return Double.NaN};CoordinateArraySequence.prototype.getCoordinate=function(){if(arguments.length===1){var e=arguments[0];return this._coordinates[e]}else if(arguments.length===2){var t=arguments[0],a=arguments[1];a.x=this._coordinates[t].x,a.y=this._coordinates[t].y,a.z=this._coordinates[t].z}};CoordinateArraySequence.prototype.getCoordinateCopy=function(e){return new Coordinate(this._coordinates[e])};CoordinateArraySequence.prototype.getDimension=function(){return this._dimension};CoordinateArraySequence.prototype.getX=function(e){return this._coordinates[e].x};CoordinateArraySequence.prototype.clone=function(){for(var e=this,t=new Array(this.size()).fill(null),a=0;a<this._coordinates.length;a++)t[a]=e._coordinates[a].clone();return new CoordinateArraySequence(t,this._dimension)};CoordinateArraySequence.prototype.expandEnvelope=function(e){for(var t=this,a=0;a<this._coordinates.length;a++)e.expandToInclude(t._coordinates[a]);return e};CoordinateArraySequence.prototype.copy=function(){for(var e=this,t=new Array(this.size()).fill(null),a=0;a<this._coordinates.length;a++)t[a]=e._coordinates[a].copy();return new CoordinateArraySequence(t,this._dimension)};CoordinateArraySequence.prototype.toString=function(){var e=this;if(this._coordinates.length>0){var t=new StringBuffer(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var a=1;a<this._coordinates.length;a++)t.append(", "),t.append(e._coordinates[a]);return t.append(")"),t.toString()}else return"()"};CoordinateArraySequence.prototype.getY=function(e){return this._coordinates[e].y};CoordinateArraySequence.prototype.toCoordinateArray=function(){return this._coordinates};CoordinateArraySequence.prototype.interfaces_=function(){return[CoordinateSequence,Serializable]};CoordinateArraySequence.prototype.getClass=function(){return CoordinateArraySequence};staticAccessors$18.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(CoordinateArraySequence,staticAccessors$18);var CoordinateArraySequenceFactory=function(){},staticAccessors$17={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};CoordinateArraySequenceFactory.prototype.readResolve=function(){return CoordinateArraySequenceFactory.instance()};CoordinateArraySequenceFactory.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return new CoordinateArraySequence(e)}else if(hasInterface(arguments[0],CoordinateSequence)){var t=arguments[0];return new CoordinateArraySequence(t)}}else if(arguments.length===2){var a=arguments[0],l=arguments[1];return l>3&&(l=3),l<2?new CoordinateArraySequence(a):new CoordinateArraySequence(a,l)}};CoordinateArraySequenceFactory.prototype.interfaces_=function(){return[CoordinateSequenceFactory,Serializable]};CoordinateArraySequenceFactory.prototype.getClass=function(){return CoordinateArraySequenceFactory};CoordinateArraySequenceFactory.instance=function(){return CoordinateArraySequenceFactory.instanceObject};staticAccessors$17.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};staticAccessors$17.instanceObject.get=function(){return new CoordinateArraySequenceFactory};Object.defineProperties(CoordinateArraySequenceFactory,staticAccessors$17);var HashMap=function(n){function e(){n.call(this),this.map_=new Map}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.get=function(a){return this.map_.get(a)||null},e.prototype.put=function(a,l){return this.map_.set(a,l),l},e.prototype.values=function(){for(var a=new ArrayList,l=this.map_.values(),h=l.next();!h.done;)a.add(h.value),h=l.next();return a},e.prototype.entrySet=function(){var a=new HashSet;return this.map_.entries().forEach(function(l){return a.add(l)}),a},e.prototype.size=function(){return this.map_.size()},e}(Map$1),PrecisionModel=function n(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=n.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Type){var e=arguments[0];this._modelType=e,e===n.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var t=arguments[0];this._modelType=n.FIXED,this.setScale(t)}else if(arguments[0]instanceof n){var a=arguments[0];this._modelType=a._modelType,this._scale=a._scale}}},staticAccessors$19={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};PrecisionModel.prototype.equals=function(e){if(!(e instanceof PrecisionModel))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale};PrecisionModel.prototype.compareTo=function(e){var t=e,a=this.getMaximumSignificantDigits(),l=t.getMaximumSignificantDigits();return new Integer(a).compareTo(new Integer(l))};PrecisionModel.prototype.getScale=function(){return this._scale};PrecisionModel.prototype.isFloating=function(){return this._modelType===PrecisionModel.FLOATING||this._modelType===PrecisionModel.FLOATING_SINGLE};PrecisionModel.prototype.getType=function(){return this._modelType};PrecisionModel.prototype.toString=function(){var e="UNKNOWN";return this._modelType===PrecisionModel.FLOATING?e="Floating":this._modelType===PrecisionModel.FLOATING_SINGLE?e="Floating-Single":this._modelType===PrecisionModel.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e};PrecisionModel.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var e=arguments[0];if(Double.isNaN(e))return e;if(this._modelType===PrecisionModel.FLOATING_SINGLE){var t=e;return t}return this._modelType===PrecisionModel.FIXED?Math.round(e*this._scale)/this._scale:e}else if(arguments[0]instanceof Coordinate){var a=arguments[0];if(this._modelType===PrecisionModel.FLOATING)return null;a.x=this.makePrecise(a.x),a.y=this.makePrecise(a.y)}};PrecisionModel.prototype.getMaximumSignificantDigits=function(){var e=16;return this._modelType===PrecisionModel.FLOATING?e=16:this._modelType===PrecisionModel.FLOATING_SINGLE?e=6:this._modelType===PrecisionModel.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e};PrecisionModel.prototype.setScale=function(e){this._scale=Math.abs(e)};PrecisionModel.prototype.interfaces_=function(){return[Serializable,Comparable]};PrecisionModel.prototype.getClass=function(){return PrecisionModel};PrecisionModel.mostPrecise=function(e,t){return e.compareTo(t)>=0?e:t};staticAccessors$19.serialVersionUID.get=function(){return 7777263578777804e3};staticAccessors$19.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(PrecisionModel,staticAccessors$19);var Type=function n(e){this._name=e||null,n.nameToTypeMap.put(e,this)},staticAccessors$1$1={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Type.prototype.readResolve=function(){return Type.nameToTypeMap.get(this._name)};Type.prototype.toString=function(){return this._name};Type.prototype.interfaces_=function(){return[Serializable]};Type.prototype.getClass=function(){return Type};staticAccessors$1$1.serialVersionUID.get=function(){return-552860263173159e4};staticAccessors$1$1.nameToTypeMap.get=function(){return new HashMap};Object.defineProperties(Type,staticAccessors$1$1);PrecisionModel.Type=Type;PrecisionModel.FIXED=new Type("FIXED");PrecisionModel.FLOATING=new Type("FLOATING");PrecisionModel.FLOATING_SINGLE=new Type("FLOATING SINGLE");var GeometryFactory=function n(){this._precisionModel=new PrecisionModel,this._SRID=0,this._coordinateSequenceFactory=n.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?hasInterface(arguments[0],CoordinateSequenceFactory)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof PrecisionModel&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},staticAccessors$2={serialVersionUID:{configurable:!0}};GeometryFactory.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new Coordinate(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new Coordinate(e.getMinX(),e.getMinY()),new Coordinate(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new Coordinate(e.getMinX(),e.getMinY()),new Coordinate(e.getMinX(),e.getMaxY()),new Coordinate(e.getMaxX(),e.getMaxY()),new Coordinate(e.getMaxX(),e.getMinY()),new Coordinate(e.getMinX(),e.getMinY())]),null)};GeometryFactory.prototype.createLineString=function(e){if(e){if(e instanceof Array)return new LineString(this.getCoordinateSequenceFactory().create(e),this);if(hasInterface(e,CoordinateSequence))return new LineString(e,this)}else return new LineString(this.getCoordinateSequenceFactory().create([]),this)};GeometryFactory.prototype.createMultiLineString=function(){if(arguments.length===0)return new MultiLineString(null,this);if(arguments.length===1){var e=arguments[0];return new MultiLineString(e,this)}};GeometryFactory.prototype.buildGeometry=function(e){for(var t=null,a=!1,l=!1,h=e.iterator();h.hasNext();){var g=h.next(),p=g.getClass();t===null&&(t=p),p!==t&&(a=!0),g.isGeometryCollectionOrDerived()&&(l=!0)}if(t===null)return this.createGeometryCollection();if(a||l)return this.createGeometryCollection(GeometryFactory.toGeometryArray(e));var y=e.iterator().next(),b=e.size()>1;if(b){if(y instanceof Polygon)return this.createMultiPolygon(GeometryFactory.toPolygonArray(e));if(y instanceof LineString)return this.createMultiLineString(GeometryFactory.toLineStringArray(e));if(y instanceof Point$3)return this.createMultiPoint(GeometryFactory.toPointArray(e));Assert.shouldNeverReachHere("Unhandled class: "+y.getClass().getName())}return y};GeometryFactory.prototype.createMultiPointFromCoords=function(e){return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)};GeometryFactory.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Coordinate){var e=arguments[0];return this.createPoint(e!==null?this.getCoordinateSequenceFactory().create([e]):null)}else if(hasInterface(arguments[0],CoordinateSequence)){var t=arguments[0];return new Point$3(t,this)}}};GeometryFactory.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};GeometryFactory.prototype.createPolygon=function(){if(arguments.length===0)return new Polygon(null,null,this);if(arguments.length===1){if(hasInterface(arguments[0],CoordinateSequence)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}else if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof LinearRing){var a=arguments[0];return this.createPolygon(a,null)}}else if(arguments.length===2){var l=arguments[0],h=arguments[1];return new Polygon(l,h,this)}};GeometryFactory.prototype.getSRID=function(){return this._SRID};GeometryFactory.prototype.createGeometryCollection=function(){if(arguments.length===0)return new GeometryCollection(null,this);if(arguments.length===1){var e=arguments[0];return new GeometryCollection(e,this)}};GeometryFactory.prototype.createGeometry=function(e){var t=new GeometryEditor(this);return t.edit(e,{edit:function(){if(arguments.length===2){var a=arguments[0];return this._coordinateSequenceFactory.create(a)}}})};GeometryFactory.prototype.getPrecisionModel=function(){return this._precisionModel};GeometryFactory.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(e!==null?this.getCoordinateSequenceFactory().create(e):null)}else if(hasInterface(arguments[0],CoordinateSequence)){var t=arguments[0];return new LinearRing(t,this)}}};GeometryFactory.prototype.createMultiPolygon=function(){if(arguments.length===0)return new MultiPolygon(null,this);if(arguments.length===1){var e=arguments[0];return new MultiPolygon(e,this)}};GeometryFactory.prototype.createMultiPoint=function(){var e=this;if(arguments.length===0)return new MultiPoint(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new MultiPoint(t,this)}else if(arguments[0]instanceof Array){var a=arguments[0];return this.createMultiPoint(a!==null?this.getCoordinateSequenceFactory().create(a):null)}else if(hasInterface(arguments[0],CoordinateSequence)){var l=arguments[0];if(l===null)return this.createMultiPoint(new Array(0).fill(null));for(var h=new Array(l.size()).fill(null),g=0;g<l.size();g++){var p=e.getCoordinateSequenceFactory().create(1,l.getDimension());CoordinateSequences.copy(l,g,p,0,1),h[g]=e.createPoint(p)}return this.createMultiPoint(h)}}};GeometryFactory.prototype.interfaces_=function(){return[Serializable]};GeometryFactory.prototype.getClass=function(){return GeometryFactory};GeometryFactory.toMultiPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};GeometryFactory.toGeometryArray=function(e){if(e===null)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)};GeometryFactory.getDefaultCoordinateSequenceFactory=function(){return CoordinateArraySequenceFactory.instance()};GeometryFactory.toMultiLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};GeometryFactory.toLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};GeometryFactory.toMultiPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};GeometryFactory.toLinearRingArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};GeometryFactory.toPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};GeometryFactory.toPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};GeometryFactory.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)};staticAccessors$2.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(GeometryFactory,staticAccessors$2);var geometryTypes=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],GeoJSONParser=function(e){this.geometryFactory=e||new GeometryFactory};GeoJSONParser.prototype.read=function(e){var t;typeof e=="string"?t=JSON.parse(e):t=e;var a=t.type;if(!parse$2[a])throw new Error("Unknown GeoJSON type: "+t.type);return geometryTypes.indexOf(a)!==-1?parse$2[a].apply(this,[t.coordinates]):a==="GeometryCollection"?parse$2[a].apply(this,[t.geometries]):parse$2[a].apply(this,[t])};GeoJSONParser.prototype.write=function(e){var t=e.getGeometryType();if(!extract[t])throw new Error("Geometry is not supported");return extract[t].apply(this,[e])};var parse$2={Feature:function(n){var e={};for(var t in n)e[t]=n[t];if(n.geometry){var a=n.geometry.type;if(!parse$2[a])throw new Error("Unknown GeoJSON type: "+n.type);e.geometry=this.read(n.geometry)}return n.bbox&&(e.bbox=parse$2.bbox.apply(this,[n.bbox])),e},FeatureCollection:function(n){var e=this,t={};if(n.features){t.features=[];for(var a=0;a<n.features.length;++a)t.features.push(e.read(n.features[a]))}return n.bbox&&(t.bbox=this.parse.bbox.apply(this,[n.bbox])),t},coordinates:function(n){for(var e=[],t=0;t<n.length;++t){var a=n[t];e.push(new Coordinate(a[0],a[1]))}return e},bbox:function(n){return this.geometryFactory.createLinearRing([new Coordinate(n[0],n[1]),new Coordinate(n[2],n[1]),new Coordinate(n[2],n[3]),new Coordinate(n[0],n[3]),new Coordinate(n[0],n[1])])},Point:function(n){var e=new Coordinate(n[0],n[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(n){for(var e=this,t=[],a=0;a<n.length;++a)t.push(parse$2.Point.apply(e,[n[a]]));return this.geometryFactory.createMultiPoint(t)},LineString:function(n){var e=parse$2.coordinates.apply(this,[n]);return this.geometryFactory.createLineString(e)},MultiLineString:function(n){for(var e=this,t=[],a=0;a<n.length;++a)t.push(parse$2.LineString.apply(e,[n[a]]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(n){for(var e=this,t=parse$2.coordinates.apply(this,[n[0]]),a=this.geometryFactory.createLinearRing(t),l=[],h=1;h<n.length;++h){var g=n[h],p=parse$2.coordinates.apply(e,[g]),y=e.geometryFactory.createLinearRing(p);l.push(y)}return this.geometryFactory.createPolygon(a,l)},MultiPolygon:function(n){for(var e=this,t=[],a=0;a<n.length;++a){var l=n[a];t.push(parse$2.Polygon.apply(e,[l]))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(n){for(var e=this,t=[],a=0;a<n.length;++a){var l=n[a];t.push(e.read(l))}return this.geometryFactory.createGeometryCollection(t)}},extract={coordinate:function(n){return[n.x,n.y]},Point:function(n){var e=extract.coordinate.apply(this,[n.getCoordinate()]);return{type:"Point",coordinates:e}},MultiPoint:function(n){for(var e=this,t=[],a=0;a<n._geometries.length;++a){var l=n._geometries[a],h=extract.Point.apply(e,[l]);t.push(h.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(n){for(var e=this,t=[],a=n.getCoordinates(),l=0;l<a.length;++l){var h=a[l];t.push(extract.coordinate.apply(e,[h]))}return{type:"LineString",coordinates:t}},MultiLineString:function(n){for(var e=this,t=[],a=0;a<n._geometries.length;++a){var l=n._geometries[a],h=extract.LineString.apply(e,[l]);t.push(h.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(n){var e=this,t=[],a=extract.LineString.apply(this,[n._shell]);t.push(a.coordinates);for(var l=0;l<n._holes.length;++l){var h=n._holes[l],g=extract.LineString.apply(e,[h]);t.push(g.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(n){for(var e=this,t=[],a=0;a<n._geometries.length;++a){var l=n._geometries[a],h=extract.Polygon.apply(e,[l]);t.push(h.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(n){for(var e=this,t=[],a=0;a<n._geometries.length;++a){var l=n._geometries[a],h=l.getGeometryType();t.push(extract[h].apply(e,[l]))}return{type:"GeometryCollection",geometries:t}}},GeoJSONReader=function(e){this.geometryFactory=e||new GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new GeoJSONParser(this.geometryFactory)};GeoJSONReader.prototype.read=function(e){var t=this.parser.read(e);return this.precisionModel.getType()===PrecisionModel.FIXED&&this.reducePrecision(t),t};GeoJSONReader.prototype.reducePrecision=function(e){var t=this,a,l;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(a=0,l=e.points.length;a<l;a++)t.precisionModel.makePrecise(e.points[a]);else if(e.geometries)for(a=0,l=e.geometries.length;a<l;a++)t.reducePrecision(e.geometries[a])};var GeoJSONWriter=function(){this.parser=new GeoJSONParser(this.geometryFactory)};GeoJSONWriter.prototype.write=function(e){return this.parser.write(e)};var Position$1=function(){},staticAccessors$20={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Position$1.prototype.interfaces_=function(){return[]};Position$1.prototype.getClass=function(){return Position$1};Position$1.opposite=function(e){return e===Position$1.LEFT?Position$1.RIGHT:e===Position$1.RIGHT?Position$1.LEFT:e};staticAccessors$20.ON.get=function(){return 0};staticAccessors$20.LEFT.get=function(){return 1};staticAccessors$20.RIGHT.get=function(){return 2};Object.defineProperties(Position$1,staticAccessors$20);function EmptyStackException(n){this.message=n||""}EmptyStackException.prototype=new Error;EmptyStackException.prototype.name="EmptyStackException";function Stack(){this.array_=[]}Stack.prototype=new List;Stack.prototype.add=function(n){return this.array_.push(n),!0};Stack.prototype.get=function(n){if(n<0||n>=this.size())throw new Error;return this.array_[n]};Stack.prototype.push=function(n){return this.array_.push(n),n};Stack.prototype.pop=function(n){if(this.array_.length===0)throw new EmptyStackException;return this.array_.pop()};Stack.prototype.peek=function(){if(this.array_.length===0)throw new EmptyStackException;return this.array_[this.array_.length-1]};Stack.prototype.empty=function(){return this.array_.length===0};Stack.prototype.isEmpty=function(){return this.empty()};Stack.prototype.search=function(n){return this.array_.indexOf(n)};Stack.prototype.size=function(){return this.array_.length};Stack.prototype.toArray=function(){for(var n=this,e=[],t=0,a=this.array_.length;t<a;t++)e.push(n.array_[t]);return e};var RightmostEdgeFinder=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};RightmostEdgeFinder.prototype.getCoordinate=function(){return this._minCoord};RightmostEdgeFinder.prototype.getRightmostSide=function(e,t){var a=this.getRightmostSideOfSegment(e,t);return a<0&&(a=this.getRightmostSideOfSegment(e,t-1)),a<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),a};RightmostEdgeFinder.prototype.findRightmostEdgeAtVertex=function(){var e=this._minDe.getEdge().getCoordinates();Assert.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],a=e[this._minIndex+1],l=CGAlgorithms.computeOrientation(this._minCoord,a,t),h=!1;(t.y<this._minCoord.y&&a.y<this._minCoord.y&&l===CGAlgorithms.COUNTERCLOCKWISE||t.y>this._minCoord.y&&a.y>this._minCoord.y&&l===CGAlgorithms.CLOCKWISE)&&(h=!0),h&&(this._minIndex=this._minIndex-1)};RightmostEdgeFinder.prototype.getRightmostSideOfSegment=function(e,t){var a=e.getEdge(),l=a.getCoordinates();if(t<0||t+1>=l.length||l[t].y===l[t+1].y)return-1;var h=Position$1.LEFT;return l[t].y<l[t+1].y&&(h=Position$1.RIGHT),h};RightmostEdgeFinder.prototype.getEdge=function(){return this._orientedDe};RightmostEdgeFinder.prototype.checkForRightmostCoordinate=function(e){for(var t=this,a=e.getEdge().getCoordinates(),l=0;l<a.length-1;l++)(t._minCoord===null||a[l].x>t._minCoord.x)&&(t._minDe=e,t._minIndex=l,t._minCoord=a[l])};RightmostEdgeFinder.prototype.findRightmostEdgeAtNode=function(){var e=this._minDe.getNode(),t=e.getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};RightmostEdgeFinder.prototype.findEdge=function(e){for(var t=this,a=e.iterator();a.hasNext();){var l=a.next();l.isForward()&&t.checkForRightmostCoordinate(l)}Assert.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var h=this.getRightmostSide(this._minDe,this._minIndex);h===Position$1.LEFT&&(this._orientedDe=this._minDe.getSym())};RightmostEdgeFinder.prototype.interfaces_=function(){return[]};RightmostEdgeFinder.prototype.getClass=function(){return RightmostEdgeFinder};var TopologyException=function(n){function e(t,a){n.call(this,e.msgWithCoord(t,a)),this.pt=a?new Coordinate(a):null,this.name="TopologyException"}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(a,l){return l?a:a+" [ "+l+" ]"},e}(RuntimeException),LinkedList=function(){this.array_=[]};LinkedList.prototype.addLast=function(e){this.array_.push(e)};LinkedList.prototype.removeFirst=function(){return this.array_.shift()};LinkedList.prototype.isEmpty=function(){return this.array_.length===0};var BufferSubgraph=function(){this._finder=null,this._dirEdgeList=new ArrayList,this._nodes=new ArrayList,this._rightMostCoord=null,this._env=null,this._finder=new RightmostEdgeFinder};BufferSubgraph.prototype.clearVisitedEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.setVisited(!1)}};BufferSubgraph.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};BufferSubgraph.prototype.computeNodeDepth=function(e){for(var t=this,a=null,l=e.getEdges().iterator();l.hasNext();){var h=l.next();if(h.isVisited()||h.getSym().isVisited()){a=h;break}}if(a===null)throw new TopologyException("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(a);for(var g=e.getEdges().iterator();g.hasNext();){var p=g.next();p.setVisited(!0),t.copySymDepths(p)}};BufferSubgraph.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(Position$1.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)};BufferSubgraph.prototype.create=function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};BufferSubgraph.prototype.findResultEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(Position$1.RIGHT)>=1&&t.getDepth(Position$1.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}};BufferSubgraph.prototype.computeDepths=function(e){var t=this,a=new HashSet,l=new LinkedList,h=e.getNode();for(l.addLast(h),a.add(h),e.setVisited(!0);!l.isEmpty();){var g=l.removeFirst();a.add(g),t.computeNodeDepth(g);for(var p=g.getEdges().iterator();p.hasNext();){var y=p.next(),b=y.getSym();if(!b.isVisited()){var E=b.getNode();a.contains(E)||(l.addLast(E),a.add(E))}}}};BufferSubgraph.prototype.compareTo=function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0};BufferSubgraph.prototype.getEnvelope=function(){if(this._env===null){for(var e=new Envelope,t=this._dirEdgeList.iterator();t.hasNext();)for(var a=t.next(),l=a.getEdge().getCoordinates(),h=0;h<l.length-1;h++)e.expandToInclude(l[h]);this._env=e}return this._env};BufferSubgraph.prototype.addReachable=function(e){var t=this,a=new Stack;for(a.add(e);!a.empty();){var l=a.pop();t.add(l,a)}};BufferSubgraph.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(Position$1.LEFT,e.getDepth(Position$1.RIGHT)),t.setDepth(Position$1.RIGHT,e.getDepth(Position$1.LEFT))};BufferSubgraph.prototype.add=function(e,t){var a=this;e.setVisited(!0),this._nodes.add(e);for(var l=e.getEdges().iterator();l.hasNext();){var h=l.next();a._dirEdgeList.add(h);var g=h.getSym(),p=g.getNode();p.isVisited()||t.push(p)}};BufferSubgraph.prototype.getNodes=function(){return this._nodes};BufferSubgraph.prototype.getDirectedEdges=function(){return this._dirEdgeList};BufferSubgraph.prototype.interfaces_=function(){return[Comparable]};BufferSubgraph.prototype.getClass=function(){return BufferSubgraph};var TopologyLocation=function n(){var e=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var a=arguments[0];this.init(1),this.location[Position$1.ON]=a}else if(arguments[0]instanceof n){var l=arguments[0];if(this.init(l.location.length),l!==null)for(var h=0;h<this.location.length;h++)e.location[h]=l.location[h]}}else if(arguments.length===3){var g=arguments[0],p=arguments[1],y=arguments[2];this.init(3),this.location[Position$1.ON]=g,this.location[Position$1.LEFT]=p,this.location[Position$1.RIGHT]=y}};TopologyLocation.prototype.setAllLocations=function(e){for(var t=this,a=0;a<this.location.length;a++)t.location[a]=e};TopologyLocation.prototype.isNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]!==Location.NONE)return!1;return!0};TopologyLocation.prototype.setAllLocationsIfNull=function(e){for(var t=this,a=0;a<this.location.length;a++)t.location[a]===Location.NONE&&(t.location[a]=e)};TopologyLocation.prototype.isLine=function(){return this.location.length===1};TopologyLocation.prototype.merge=function(e){var t=this;if(e.location.length>this.location.length){var a=new Array(3).fill(null);a[Position$1.ON]=this.location[Position$1.ON],a[Position$1.LEFT]=Location.NONE,a[Position$1.RIGHT]=Location.NONE,this.location=a}for(var l=0;l<this.location.length;l++)t.location[l]===Location.NONE&&l<e.location.length&&(t.location[l]=e.location[l])};TopologyLocation.prototype.getLocations=function(){return this.location};TopologyLocation.prototype.flip=function(){if(this.location.length<=1)return null;var e=this.location[Position$1.LEFT];this.location[Position$1.LEFT]=this.location[Position$1.RIGHT],this.location[Position$1.RIGHT]=e};TopologyLocation.prototype.toString=function(){var e=new StringBuffer;return this.location.length>1&&e.append(Location.toLocationSymbol(this.location[Position$1.LEFT])),e.append(Location.toLocationSymbol(this.location[Position$1.ON])),this.location.length>1&&e.append(Location.toLocationSymbol(this.location[Position$1.RIGHT])),e.toString()};TopologyLocation.prototype.setLocations=function(e,t,a){this.location[Position$1.ON]=e,this.location[Position$1.LEFT]=t,this.location[Position$1.RIGHT]=a};TopologyLocation.prototype.get=function(e){return e<this.location.length?this.location[e]:Location.NONE};TopologyLocation.prototype.isArea=function(){return this.location.length>1};TopologyLocation.prototype.isAnyNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]===Location.NONE)return!0;return!1};TopologyLocation.prototype.setLocation=function(){if(arguments.length===1){var e=arguments[0];this.setLocation(Position$1.ON,e)}else if(arguments.length===2){var t=arguments[0],a=arguments[1];this.location[t]=a}};TopologyLocation.prototype.init=function(e){this.location=new Array(e).fill(null),this.setAllLocations(Location.NONE)};TopologyLocation.prototype.isEqualOnSide=function(e,t){return this.location[t]===e.location[t]};TopologyLocation.prototype.allPositionsEqual=function(e){for(var t=this,a=0;a<this.location.length;a++)if(t.location[a]!==e)return!1;return!0};TopologyLocation.prototype.interfaces_=function(){return[]};TopologyLocation.prototype.getClass=function(){return TopologyLocation};var Label=function n(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new TopologyLocation(e),this.elt[1]=new TopologyLocation(e)}else if(arguments[0]instanceof n){var t=arguments[0];this.elt[0]=new TopologyLocation(t.elt[0]),this.elt[1]=new TopologyLocation(t.elt[1])}}else if(arguments.length===2){var a=arguments[0],l=arguments[1];this.elt[0]=new TopologyLocation(Location.NONE),this.elt[1]=new TopologyLocation(Location.NONE),this.elt[a].setLocation(l)}else if(arguments.length===3){var h=arguments[0],g=arguments[1],p=arguments[2];this.elt[0]=new TopologyLocation(h,g,p),this.elt[1]=new TopologyLocation(h,g,p)}else if(arguments.length===4){var y=arguments[0],b=arguments[1],E=arguments[2],C=arguments[3];this.elt[0]=new TopologyLocation(Location.NONE,Location.NONE,Location.NONE),this.elt[1]=new TopologyLocation(Location.NONE,Location.NONE,Location.NONE),this.elt[y].setLocations(b,E,C)}};Label.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e};Label.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)};Label.prototype.isNull=function(e){return this.elt[e].isNull()};Label.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(arguments.length===2){var t=arguments[0],a=arguments[1];this.elt[t].setAllLocationsIfNull(a)}};Label.prototype.isLine=function(e){return this.elt[e].isLine()};Label.prototype.merge=function(e){for(var t=this,a=0;a<2;a++)t.elt[a]===null&&e.elt[a]!==null?t.elt[a]=new TopologyLocation(e.elt[a]):t.elt[a].merge(e.elt[a])};Label.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};Label.prototype.getLocation=function(){if(arguments.length===1){var e=arguments[0];return this.elt[e].get(Position$1.ON)}else if(arguments.length===2){var t=arguments[0],a=arguments[1];return this.elt[t].get(a)}};Label.prototype.toString=function(){var e=new StringBuffer;return this.elt[0]!==null&&(e.append("A:"),e.append(this.elt[0].toString())),this.elt[1]!==null&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()};Label.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var e=arguments[0];return this.elt[e].isArea()}};Label.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()};Label.prototype.setLocation=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(Position$1.ON,t)}else if(arguments.length===3){var a=arguments[0],l=arguments[1],h=arguments[2];this.elt[a].setLocation(l,h)}};Label.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)};Label.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)};Label.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new TopologyLocation(this.elt[e].location[0]))};Label.prototype.interfaces_=function(){return[]};Label.prototype.getClass=function(){return Label};Label.toLineLabel=function(e){for(var t=new Label(Location.NONE),a=0;a<2;a++)t.setLocation(a,e.getLocation(a));return t};var EdgeRing=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new ArrayList,this._pts=new ArrayList,this._label=new Label(Location.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new ArrayList,this._geometryFactory=null;var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()};EdgeRing.prototype.computeRing=function(){var e=this;if(this._ring!==null)return null;for(var t=new Array(this._pts.size()).fill(null),a=0;a<this._pts.size();a++)t[a]=e._pts.get(a);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=CGAlgorithms.isCCW(this._ring.getCoordinates())};EdgeRing.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};EdgeRing.prototype.computePoints=function(e){var t=this;this._startDe=e;var a=e,l=!0;do{if(a===null)throw new TopologyException("Found null DirectedEdge");if(a.getEdgeRing()===t)throw new TopologyException("Directed Edge visited twice during ring-building at "+a.getCoordinate());t._edges.add(a);var h=a.getLabel();Assert.isTrue(h.isArea()),t.mergeLabel(h),t.addPoints(a.getEdge(),a.isForward(),l),l=!1,t.setEdgeRing(a,t),a=t.getNext(a)}while(a!==this._startDe)};EdgeRing.prototype.getLinearRing=function(){return this._ring};EdgeRing.prototype.getCoordinate=function(e){return this._pts.get(e)};EdgeRing.prototype.computeMaxNodeDegree=function(){var e=this;this._maxNodeDegree=0;var t=this._startDe;do{var a=t.getNode(),l=a.getEdges().getOutgoingDegree(e);l>e._maxNodeDegree&&(e._maxNodeDegree=l),t=e.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2};EdgeRing.prototype.addPoints=function(e,t,a){var l=this,h=e.getCoordinates();if(t){var g=1;a&&(g=0);for(var p=g;p<h.length;p++)l._pts.add(h[p])}else{var y=h.length-2;a&&(y=h.length-1);for(var b=y;b>=0;b--)l._pts.add(h[b])}};EdgeRing.prototype.isHole=function(){return this._isHole};EdgeRing.prototype.setInResult=function(){var e=this._startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!==this._startDe)};EdgeRing.prototype.containsPoint=function(e){var t=this.getLinearRing(),a=t.getEnvelopeInternal();if(!a.contains(e)||!CGAlgorithms.isPointInRing(e,t.getCoordinates()))return!1;for(var l=this._holes.iterator();l.hasNext();){var h=l.next();if(h.containsPoint(e))return!1}return!0};EdgeRing.prototype.addHole=function(e){this._holes.add(e)};EdgeRing.prototype.isShell=function(){return this._shell===null};EdgeRing.prototype.getLabel=function(){return this._label};EdgeRing.prototype.getEdges=function(){return this._edges};EdgeRing.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};EdgeRing.prototype.getShell=function(){return this._shell};EdgeRing.prototype.mergeLabel=function(){if(arguments.length===1){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(arguments.length===2){var t=arguments[0],a=arguments[1],l=t.getLocation(a,Position$1.RIGHT);if(l===Location.NONE)return null;if(this._label.getLocation(a)===Location.NONE)return this._label.setLocation(a,l),null}};EdgeRing.prototype.setShell=function(e){this._shell=e,e!==null&&e.addHole(this)};EdgeRing.prototype.toPolygon=function(e){for(var t=this,a=new Array(this._holes.size()).fill(null),l=0;l<this._holes.size();l++)a[l]=t._holes.get(l).getLinearRing();var h=e.createPolygon(this.getLinearRing(),a);return h};EdgeRing.prototype.interfaces_=function(){return[]};EdgeRing.prototype.getClass=function(){return EdgeRing};var MinimalEdgeRing=function(n){function e(){var t=arguments[0],a=arguments[1];n.call(this,t,a)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(a,l){a.setMinEdgeRing(l)},e.prototype.getNext=function(a){return a.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(EdgeRing),MaximalEdgeRing=function(n){function e(){var t=arguments[0],a=arguments[1];n.call(this,t,a)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var a=this,l=new ArrayList,h=this._startDe;do{if(h.getMinEdgeRing()===null){var g=new MinimalEdgeRing(h,a._geometryFactory);l.add(g)}h=h.getNext()}while(h!==this._startDe);return l},e.prototype.setEdgeRing=function(a,l){a.setEdgeRing(l)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var a=this,l=this._startDe;do{var h=l.getNode();h.getEdges().linkMinimalDirectedEdges(a),l=l.getNext()}while(l!==this._startDe)},e.prototype.getNext=function(a){return a.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(EdgeRing),GraphComponent=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this._label=e}}};GraphComponent.prototype.setVisited=function(e){this._isVisited=e};GraphComponent.prototype.setInResult=function(e){this._isInResult=e};GraphComponent.prototype.isCovered=function(){return this._isCovered};GraphComponent.prototype.isCoveredSet=function(){return this._isCoveredSet};GraphComponent.prototype.setLabel=function(e){this._label=e};GraphComponent.prototype.getLabel=function(){return this._label};GraphComponent.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0};GraphComponent.prototype.updateIM=function(e){Assert.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)};GraphComponent.prototype.isInResult=function(){return this._isInResult};GraphComponent.prototype.isVisited=function(){return this._isVisited};GraphComponent.prototype.interfaces_=function(){return[]};GraphComponent.prototype.getClass=function(){return GraphComponent};var Node$3=function(n){function e(){n.call(this),this._coord=null,this._edges=null;var t=arguments[0],a=arguments[1];this._coord=t,this._edges=a,this._label=new Label(0,Location.NONE)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var a=this.getEdges().getEdges().iterator();a.hasNext();){var l=a.next();if(l.getEdge().isInResult())return!0}return!1},e.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(a){a.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(a){},e.prototype.computeMergedLocation=function(a,l){var h=Location.NONE;if(h=this._label.getLocation(l),!a.isNull(l)){var g=a.getLocation(l);h!==Location.BOUNDARY&&(h=g)}return h},e.prototype.setLabel=function(){if(arguments.length===2){var a=arguments[0],l=arguments[1];this._label===null?this._label=new Label(a,l):this._label.setLocation(a,l)}else return n.prototype.setLabel.apply(this,arguments)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var a=this;if(arguments[0]instanceof e){var l=arguments[0];this.mergeLabel(l._label)}else if(arguments[0]instanceof Label)for(var h=arguments[0],g=0;g<2;g++){var p=a.computeMergedLocation(h,g),y=a._label.getLocation(g);y===Location.NONE&&a._label.setLocation(g,p)}},e.prototype.add=function(a){this._edges.insert(a),a.setNode(this)},e.prototype.setLabelBoundary=function(a){if(this._label===null)return null;var l=Location.NONE;this._label!==null&&(l=this._label.getLocation(a));var h=null;switch(l){case Location.BOUNDARY:h=Location.INTERIOR;break;case Location.INTERIOR:h=Location.BOUNDARY;break;default:h=Location.BOUNDARY;break}this._label.setLocation(a,h)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(GraphComponent),NodeMap=function(){this.nodeMap=new TreeMap,this.nodeFact=null;var e=arguments[0];this.nodeFact=e};NodeMap.prototype.find=function(e){return this.nodeMap.get(e)};NodeMap.prototype.addNode=function(){if(arguments[0]instanceof Coordinate){var e=arguments[0],t=this.nodeMap.get(e);return t===null&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}else if(arguments[0]instanceof Node$3){var a=arguments[0],l=this.nodeMap.get(a.getCoordinate());return l===null?(this.nodeMap.put(a.getCoordinate(),a),a):(l.mergeLabel(a),l)}};NodeMap.prototype.print=function(e){for(var t=this.iterator();t.hasNext();){var a=t.next();a.print(e)}};NodeMap.prototype.iterator=function(){return this.nodeMap.values().iterator()};NodeMap.prototype.values=function(){return this.nodeMap.values()};NodeMap.prototype.getBoundaryNodes=function(e){for(var t=new ArrayList,a=this.iterator();a.hasNext();){var l=a.next();l.getLabel().getLocation(e)===Location.BOUNDARY&&t.add(l)}return t};NodeMap.prototype.add=function(e){var t=e.getCoordinate(),a=this.addNode(t);a.add(e)};NodeMap.prototype.interfaces_=function(){return[]};NodeMap.prototype.getClass=function(){return NodeMap};var Quadrant=function(){},staticAccessors$21={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Quadrant.prototype.interfaces_=function(){return[]};Quadrant.prototype.getClass=function(){return Quadrant};Quadrant.isNorthern=function(e){return e===Quadrant.NE||e===Quadrant.NW};Quadrant.isOpposite=function(e,t){if(e===t)return!1;var a=(e-t+4)%4;return a===2};Quadrant.commonHalfPlane=function(e,t){if(e===t)return e;var a=(e-t+4)%4;if(a===2)return-1;var l=e<t?e:t,h=e>t?e:t;return l===0&&h===3?3:l};Quadrant.isInHalfPlane=function(e,t){return t===Quadrant.SE?e===Quadrant.SE||e===Quadrant.SW:e===t||e===t+1};Quadrant.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new IllegalArgumentException("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?Quadrant.NE:Quadrant.SE:t>=0?Quadrant.NW:Quadrant.SW}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Coordinate){var a=arguments[0],l=arguments[1];if(l.x===a.x&&l.y===a.y)throw new IllegalArgumentException("Cannot compute the quadrant for two identical points "+a);return l.x>=a.x?l.y>=a.y?Quadrant.NE:Quadrant.SE:l.y>=a.y?Quadrant.NW:Quadrant.SW}};staticAccessors$21.NE.get=function(){return 0};staticAccessors$21.NW.get=function(){return 1};staticAccessors$21.SW.get=function(){return 2};staticAccessors$21.SE.get=function(){return 3};Object.defineProperties(Quadrant,staticAccessors$21);var EdgeEnd=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var e=arguments[0];this._edge=e}else if(arguments.length===3){var t=arguments[0],a=arguments[1],l=arguments[2],h=null;this._edge=t,this.init(a,l),this._label=h}else if(arguments.length===4){var g=arguments[0],p=arguments[1],y=arguments[2],b=arguments[3];this._edge=g,this.init(p,y),this._label=b}};EdgeEnd.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:CGAlgorithms.computeOrientation(e._p0,e._p1,this._p1)};EdgeEnd.prototype.getDy=function(){return this._dy};EdgeEnd.prototype.getCoordinate=function(){return this._p0};EdgeEnd.prototype.setNode=function(e){this._node=e};EdgeEnd.prototype.print=function(e){var t=Math.atan2(this._dy,this._dx),a=this.getClass().getName(),l=a.lastIndexOf("."),h=a.substring(l+1);e.print("  "+h+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)};EdgeEnd.prototype.compareTo=function(e){var t=e;return this.compareDirection(t)};EdgeEnd.prototype.getDirectedCoordinate=function(){return this._p1};EdgeEnd.prototype.getDx=function(){return this._dx};EdgeEnd.prototype.getLabel=function(){return this._label};EdgeEnd.prototype.getEdge=function(){return this._edge};EdgeEnd.prototype.getQuadrant=function(){return this._quadrant};EdgeEnd.prototype.getNode=function(){return this._node};EdgeEnd.prototype.toString=function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),a=t.lastIndexOf("."),l=t.substring(a+1);return"  "+l+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label};EdgeEnd.prototype.computeLabel=function(e){};EdgeEnd.prototype.init=function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=Quadrant.quadrant(this._dx,this._dy),Assert.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};EdgeEnd.prototype.interfaces_=function(){return[Comparable]};EdgeEnd.prototype.getClass=function(){return EdgeEnd};var DirectedEdge=function(n){function e(){var t=arguments[0],a=arguments[1];if(n.call(this,t),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=a,a)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var l=t.getNumPoints()-1;this.init(t.getCoordinate(l),t.getCoordinate(l-1))}this.computeDirectedLabel()}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(a){return this._depth[a]},e.prototype.setVisited=function(a){this._isVisited=a},e.prototype.computeDirectedLabel=function(){this._label=new Label(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(a,l){if(this._depth[a]!==-999&&this._depth[a]!==l)throw new TopologyException("assigned depths do not match",this.getCoordinate());this._depth[a]=l},e.prototype.isInteriorAreaEdge=function(){for(var a=this,l=!0,h=0;h<2;h++)a._label.isArea(h)&&a._label.getLocation(h,Position$1.LEFT)===Location.INTERIOR&&a._label.getLocation(h,Position$1.RIGHT)===Location.INTERIOR||(l=!1);return l},e.prototype.setNextMin=function(a){this._nextMin=a},e.prototype.print=function(a){n.prototype.print.call(this,a),a.print(" "+this._depth[Position$1.LEFT]+"/"+this._depth[Position$1.RIGHT]),a.print(" ("+this.getDepthDelta()+")"),this._isInResult&&a.print(" inResult")},e.prototype.setMinEdgeRing=function(a){this._minEdgeRing=a},e.prototype.isLineEdge=function(){var a=this._label.isLine(0)||this._label.isLine(1),l=!this._label.isArea(0)||this._label.allPositionsEqual(0,Location.EXTERIOR),h=!this._label.isArea(1)||this._label.allPositionsEqual(1,Location.EXTERIOR);return a&&l&&h},e.prototype.setEdgeRing=function(a){this._edgeRing=a},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var a=this._edge.getDepthDelta();return this._isForward||(a=-a),a},e.prototype.setInResult=function(a){this._isInResult=a},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(a){this.print(a),a.print(" "),this._isForward?this._edge.print(a):this._edge.printReverse(a)},e.prototype.setSym=function(a){this._sym=a},e.prototype.setVisitedEdge=function(a){this.setVisited(a),this._sym.setVisited(a)},e.prototype.setEdgeDepths=function(a,l){var h=this.getEdge().getDepthDelta();this._isForward||(h=-h);var g=1;a===Position$1.LEFT&&(g=-1);var p=Position$1.opposite(a),y=h*g,b=l+y;this.setDepth(a,l),this.setDepth(p,b)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(a){this._next=a},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(a,l){return a===Location.EXTERIOR&&l===Location.INTERIOR?1:a===Location.INTERIOR&&l===Location.EXTERIOR?-1:0},e}(EdgeEnd),NodeFactory=function(){};NodeFactory.prototype.createNode=function(e){return new Node$3(e,null)};NodeFactory.prototype.interfaces_=function(){return[]};NodeFactory.prototype.getClass=function(){return NodeFactory};var PlanarGraph=function(){if(this._edges=new ArrayList,this._nodes=null,this._edgeEndList=new ArrayList,arguments.length===0)this._nodes=new NodeMap(new NodeFactory);else if(arguments.length===1){var e=arguments[0];this._nodes=new NodeMap(e)}};PlanarGraph.prototype.printEdges=function(e){var t=this;e.println("Edges:");for(var a=0;a<this._edges.size();a++){e.println("edge "+a+":");var l=t._edges.get(a);l.print(e),l.eiList.print(e)}};PlanarGraph.prototype.find=function(e){return this._nodes.find(e)};PlanarGraph.prototype.addNode=function(){if(arguments[0]instanceof Node$3){var e=arguments[0];return this._nodes.addNode(e)}else if(arguments[0]instanceof Coordinate){var t=arguments[0];return this._nodes.addNode(t)}};PlanarGraph.prototype.getNodeIterator=function(){return this._nodes.iterator()};PlanarGraph.prototype.linkResultDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkResultDirectedEdges()}};PlanarGraph.prototype.debugPrintln=function(e){System.out.println(e)};PlanarGraph.prototype.isBoundaryNode=function(e,t){var a=this._nodes.find(t);if(a===null)return!1;var l=a.getLabel();return l!==null&&l.getLocation(e)===Location.BOUNDARY};PlanarGraph.prototype.linkAllDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkAllDirectedEdges()}};PlanarGraph.prototype.matchInSameDirection=function(e,t,a,l){return e.equals(a)?CGAlgorithms.computeOrientation(e,t,l)===CGAlgorithms.COLLINEAR&&Quadrant.quadrant(e,t)===Quadrant.quadrant(a,l):!1};PlanarGraph.prototype.getEdgeEnds=function(){return this._edgeEndList};PlanarGraph.prototype.debugPrint=function(e){System.out.print(e)};PlanarGraph.prototype.getEdgeIterator=function(){return this._edges.iterator()};PlanarGraph.prototype.findEdgeInSameDirection=function(e,t){for(var a=this,l=0;l<this._edges.size();l++){var h=a._edges.get(l),g=h.getCoordinates();if(a.matchInSameDirection(e,t,g[0],g[1])||a.matchInSameDirection(e,t,g[g.length-1],g[g.length-2]))return h}return null};PlanarGraph.prototype.insertEdge=function(e){this._edges.add(e)};PlanarGraph.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var a=t.next();if(a.getEdge()===e)return a}return null};PlanarGraph.prototype.addEdges=function(e){for(var t=this,a=e.iterator();a.hasNext();){var l=a.next();t._edges.add(l);var h=new DirectedEdge(l,!0),g=new DirectedEdge(l,!1);h.setSym(g),g.setSym(h),t.add(h),t.add(g)}};PlanarGraph.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)};PlanarGraph.prototype.getNodes=function(){return this._nodes.values()};PlanarGraph.prototype.findEdge=function(e,t){for(var a=this,l=0;l<this._edges.size();l++){var h=a._edges.get(l),g=h.getCoordinates();if(e.equals(g[0])&&t.equals(g[1]))return h}return null};PlanarGraph.prototype.interfaces_=function(){return[]};PlanarGraph.prototype.getClass=function(){return PlanarGraph};PlanarGraph.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();){var a=t.next();a.getEdges().linkResultDirectedEdges()}};var PolygonBuilder=function(){this._geometryFactory=null,this._shellList=new ArrayList;var e=arguments[0];this._geometryFactory=e};PolygonBuilder.prototype.sortShellsAndHoles=function(e,t,a){for(var l=e.iterator();l.hasNext();){var h=l.next();h.isHole()?a.add(h):t.add(h)}};PolygonBuilder.prototype.computePolygons=function(e){for(var t=this,a=new ArrayList,l=e.iterator();l.hasNext();){var h=l.next(),g=h.toPolygon(t._geometryFactory);a.add(g)}return a};PolygonBuilder.prototype.placeFreeHoles=function(e,t){for(var a=this,l=t.iterator();l.hasNext();){var h=l.next();if(h.getShell()===null){var g=a.findEdgeRingContaining(h,e);if(g===null)throw new TopologyException("unable to assign hole to a shell",h.getCoordinate(0));h.setShell(g)}}};PolygonBuilder.prototype.buildMinimalEdgeRings=function(e,t,a){for(var l=this,h=new ArrayList,g=e.iterator();g.hasNext();){var p=g.next();if(p.getMaxNodeDegree()>2){p.linkDirectedEdgesForMinimalEdgeRings();var y=p.buildMinimalRings(),b=l.findShell(y);b!==null?(l.placePolygonHoles(b,y),t.add(b)):a.addAll(y)}else h.add(p)}return h};PolygonBuilder.prototype.containsPoint=function(e){for(var t=this._shellList.iterator();t.hasNext();){var a=t.next();if(a.containsPoint(e))return!0}return!1};PolygonBuilder.prototype.buildMaximalEdgeRings=function(e){for(var t=this,a=new ArrayList,l=e.iterator();l.hasNext();){var h=l.next();if(h.isInResult()&&h.getLabel().isArea()&&h.getEdgeRing()===null){var g=new MaximalEdgeRing(h,t._geometryFactory);a.add(g),g.setInResult()}}return a};PolygonBuilder.prototype.placePolygonHoles=function(e,t){for(var a=t.iterator();a.hasNext();){var l=a.next();l.isHole()&&l.setShell(e)}};PolygonBuilder.prototype.getPolygons=function(){var e=this.computePolygons(this._shellList);return e};PolygonBuilder.prototype.findEdgeRingContaining=function(e,t){for(var a=e.getLinearRing(),l=a.getEnvelopeInternal(),h=a.getCoordinateN(0),g=null,p=null,y=t.iterator();y.hasNext();){var b=y.next(),E=b.getLinearRing(),C=E.getEnvelopeInternal();g!==null&&(p=g.getLinearRing().getEnvelopeInternal());var A=!1;C.contains(l)&&CGAlgorithms.isPointInRing(h,E.getCoordinates())&&(A=!0),A&&(g===null||p.contains(C))&&(g=b)}return g};PolygonBuilder.prototype.findShell=function(e){for(var t=0,a=null,l=e.iterator();l.hasNext();){var h=l.next();h.isHole()||(a=h,t++)}return Assert.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),a};PolygonBuilder.prototype.add=function(){if(arguments.length===1){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(arguments.length===2){var t=arguments[0],a=arguments[1];PlanarGraph.linkResultDirectedEdges(a);var l=this.buildMaximalEdgeRings(t),h=new ArrayList,g=this.buildMinimalEdgeRings(l,this._shellList,h);this.sortShellsAndHoles(g,this._shellList,h),this.placeFreeHoles(this._shellList,h)}};PolygonBuilder.prototype.interfaces_=function(){return[]};PolygonBuilder.prototype.getClass=function(){return PolygonBuilder};var Boundable=function(){};Boundable.prototype.getBounds=function(){};Boundable.prototype.interfaces_=function(){return[]};Boundable.prototype.getClass=function(){return Boundable};var ItemBoundable=function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t};ItemBoundable.prototype.getItem=function(){return this._item};ItemBoundable.prototype.getBounds=function(){return this._bounds};ItemBoundable.prototype.interfaces_=function(){return[Boundable,Serializable]};ItemBoundable.prototype.getClass=function(){return ItemBoundable};var PriorityQueue=function(){this._size=null,this._items=null,this._size=0,this._items=new ArrayList,this._items.add(null)};PriorityQueue.prototype.poll=function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e};PriorityQueue.prototype.size=function(){return this._size};PriorityQueue.prototype.reorder=function(e){for(var t=this,a=null,l=this._items.get(e);e*2<=this._size&&(a=e*2,a!==t._size&&t._items.get(a+1).compareTo(t._items.get(a))<0&&a++,t._items.get(a).compareTo(l)<0);e=a)t._items.set(e,t._items.get(a));this._items.set(e,l)};PriorityQueue.prototype.clear=function(){this._size=0,this._items.clear()};PriorityQueue.prototype.isEmpty=function(){return this._size===0};PriorityQueue.prototype.add=function(e){var t=this;this._items.add(null),this._size+=1;var a=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(a/2)))<0;a/=2)t._items.set(a,t._items.get(Math.trunc(a/2)));this._items.set(a,e)};PriorityQueue.prototype.interfaces_=function(){return[]};PriorityQueue.prototype.getClass=function(){return PriorityQueue};var ItemVisitor=function(){};ItemVisitor.prototype.visitItem=function(e){};ItemVisitor.prototype.interfaces_=function(){return[]};ItemVisitor.prototype.getClass=function(){return ItemVisitor};var SpatialIndex=function(){};SpatialIndex.prototype.insert=function(e,t){};SpatialIndex.prototype.remove=function(e,t){};SpatialIndex.prototype.query=function(){};SpatialIndex.prototype.interfaces_=function(){return[]};SpatialIndex.prototype.getClass=function(){return SpatialIndex};var AbstractNode=function(){if(this._childBoundables=new ArrayList,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this._level=e}}},staticAccessors$22={serialVersionUID:{configurable:!0}};AbstractNode.prototype.getLevel=function(){return this._level};AbstractNode.prototype.size=function(){return this._childBoundables.size()};AbstractNode.prototype.getChildBoundables=function(){return this._childBoundables};AbstractNode.prototype.addChildBoundable=function(e){Assert.isTrue(this._bounds===null),this._childBoundables.add(e)};AbstractNode.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};AbstractNode.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};AbstractNode.prototype.interfaces_=function(){return[Boundable,Serializable]};AbstractNode.prototype.getClass=function(){return AbstractNode};staticAccessors$22.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(AbstractNode,staticAccessors$22);var Collections=function(){};Collections.reverseOrder=function(){return{compare:function(t,a){return a.compareTo(t)}}};Collections.min=function(e){return Collections.sort(e),e.get(0)};Collections.sort=function(e,t){var a=e.toArray();t?Arrays.sort(a,t):Arrays.sort(a);for(var l=e.iterator(),h=0,g=a.length;h<g;h++)l.next(),l.set(a[h])};Collections.singletonList=function(e){var t=new ArrayList;return t.add(e),t};var BoundablePair=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],a=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=a,this._distance=this.distance()};BoundablePair.prototype.expandToQueue=function(e,t){var a=BoundablePair.isComposite(this._boundable1),l=BoundablePair.isComposite(this._boundable2);if(a&&l)return BoundablePair.area(this._boundable1)>BoundablePair.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,e,t),null):(this.expand(this._boundable2,this._boundable1,e,t),null);if(a)return this.expand(this._boundable1,this._boundable2,e,t),null;if(l)return this.expand(this._boundable2,this._boundable1,e,t),null;throw new IllegalArgumentException("neither boundable is composite")};BoundablePair.prototype.isLeaves=function(){return!(BoundablePair.isComposite(this._boundable1)||BoundablePair.isComposite(this._boundable2))};BoundablePair.prototype.compareTo=function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0};BoundablePair.prototype.expand=function(e,t,a,l){for(var h=this,g=e.getChildBoundables(),p=g.iterator();p.hasNext();){var y=p.next(),b=new BoundablePair(y,t,h._itemDistance);b.getDistance()<l&&a.add(b)}};BoundablePair.prototype.getBoundable=function(e){return e===0?this._boundable1:this._boundable2};BoundablePair.prototype.getDistance=function(){return this._distance};BoundablePair.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};BoundablePair.prototype.interfaces_=function(){return[Comparable]};BoundablePair.prototype.getClass=function(){return BoundablePair};BoundablePair.area=function(e){return e.getBounds().getArea()};BoundablePair.isComposite=function(e){return e instanceof AbstractNode};var AbstractSTRtree=function n(){if(this._root=null,this._built=!1,this._itemBoundables=new ArrayList,this._nodeCapacity=null,arguments.length===0){var e=n.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(arguments.length===1){var t=arguments[0];Assert.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}},staticAccessors$23={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};AbstractSTRtree.prototype.getNodeCapacity=function(){return this._nodeCapacity};AbstractSTRtree.prototype.lastNode=function(e){return e.get(e.size()-1)};AbstractSTRtree.prototype.size=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=arguments[0],a=0,l=t.getChildBoundables().iterator();l.hasNext();){var h=l.next();h instanceof AbstractNode?a+=e.size(h):h instanceof ItemBoundable&&(a+=1)}return a}};AbstractSTRtree.prototype.removeItem=function(e,t){for(var a=null,l=e.getChildBoundables().iterator();l.hasNext();){var h=l.next();h instanceof ItemBoundable&&h.getItem()===t&&(a=h)}return a!==null?(e.getChildBoundables().remove(a),!0):!1};AbstractSTRtree.prototype.itemsTree=function(){var e=this;if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new ArrayList:t}else if(arguments.length===1){for(var a=arguments[0],l=new ArrayList,h=a.getChildBoundables().iterator();h.hasNext();){var g=h.next();if(g instanceof AbstractNode){var p=e.itemsTree(g);p!==null&&l.add(p)}else g instanceof ItemBoundable?l.add(g.getItem()):Assert.shouldNeverReachHere()}return l.size()<=0?null:l}};AbstractSTRtree.prototype.insert=function(e,t){Assert.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new ItemBoundable(e,t))};AbstractSTRtree.prototype.boundablesAtLevel=function(){var e=this;if(arguments.length===1){var t=arguments[0],a=new ArrayList;return this.boundablesAtLevel(t,this._root,a),a}else if(arguments.length===3){var l=arguments[0],h=arguments[1],g=arguments[2];if(Assert.isTrue(l>-2),h.getLevel()===l)return g.add(h),null;for(var p=h.getChildBoundables().iterator();p.hasNext();){var y=p.next();y instanceof AbstractNode?e.boundablesAtLevel(l,y,g):(Assert.isTrue(y instanceof ItemBoundable),l===-1&&g.add(y))}return null}};AbstractSTRtree.prototype.query=function(){var e=this;if(arguments.length===1){var t=arguments[0];this.build();var a=new ArrayList;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,a),a}else if(arguments.length===2){var l=arguments[0],h=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),l)&&this.query(l,this._root,h)}else if(arguments.length===3){if(hasInterface(arguments[2],ItemVisitor)&&arguments[0]instanceof Object&&arguments[1]instanceof AbstractNode)for(var g=arguments[0],p=arguments[1],y=arguments[2],b=p.getChildBoundables(),E=0;E<b.size();E++){var C=b.get(E);e.getIntersectsOp().intersects(C.getBounds(),g)&&(C instanceof AbstractNode?e.query(g,C,y):C instanceof ItemBoundable?y.visitItem(C.getItem()):Assert.shouldNeverReachHere())}else if(hasInterface(arguments[2],List)&&arguments[0]instanceof Object&&arguments[1]instanceof AbstractNode)for(var A=arguments[0],B=arguments[1],M=arguments[2],N=B.getChildBoundables(),Z=0;Z<N.size();Z++){var ee=N.get(Z);e.getIntersectsOp().intersects(ee.getBounds(),A)&&(ee instanceof AbstractNode?e.query(A,ee,M):ee instanceof ItemBoundable?M.add(ee.getItem()):Assert.shouldNeverReachHere())}}};AbstractSTRtree.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};AbstractSTRtree.prototype.getRoot=function(){return this.build(),this._root};AbstractSTRtree.prototype.remove=function(){var e=this;if(arguments.length===2){var t=arguments[0],a=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),t)?this.remove(t,this._root,a):!1}else if(arguments.length===3){var l=arguments[0],h=arguments[1],g=arguments[2],p=this.removeItem(h,g);if(p)return!0;for(var y=null,b=h.getChildBoundables().iterator();b.hasNext();){var E=b.next();if(e.getIntersectsOp().intersects(E.getBounds(),l)&&E instanceof AbstractNode&&(p=e.remove(l,E,g),p)){y=E;break}}return y!==null&&y.getChildBoundables().isEmpty()&&h.getChildBoundables().remove(y),p}};AbstractSTRtree.prototype.createHigherLevels=function(e,t){Assert.isTrue(!e.isEmpty());var a=this.createParentBoundables(e,t+1);return a.size()===1?a.get(0):this.createHigherLevels(a,t+1)};AbstractSTRtree.prototype.depth=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=arguments[0],a=0,l=t.getChildBoundables().iterator();l.hasNext();){var h=l.next();if(h instanceof AbstractNode){var g=e.depth(h);g>a&&(a=g)}}return a+1}};AbstractSTRtree.prototype.createParentBoundables=function(e,t){var a=this;Assert.isTrue(!e.isEmpty());var l=new ArrayList;l.add(this.createNode(t));var h=new ArrayList(e);Collections.sort(h,this.getComparator());for(var g=h.iterator();g.hasNext();){var p=g.next();a.lastNode(l).getChildBoundables().size()===a.getNodeCapacity()&&l.add(a.createNode(t)),a.lastNode(l).addChildBoundable(p)}return l};AbstractSTRtree.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};AbstractSTRtree.prototype.interfaces_=function(){return[Serializable]};AbstractSTRtree.prototype.getClass=function(){return AbstractSTRtree};AbstractSTRtree.compareDoubles=function(e,t){return e>t?1:e<t?-1:0};staticAccessors$23.IntersectsOp.get=function(){return IntersectsOp$1};staticAccessors$23.serialVersionUID.get=function(){return-3886435814360241e3};staticAccessors$23.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(AbstractSTRtree,staticAccessors$23);var IntersectsOp$1=function(){},ItemDistance=function(){};ItemDistance.prototype.distance=function(e,t){};ItemDistance.prototype.interfaces_=function(){return[]};ItemDistance.prototype.getClass=function(){return ItemDistance};var STRtree=function(n){function e(a){a=a||e.DEFAULT_NODE_CAPACITY,n.call(this,a)}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(l,h){var g=this;Assert.isTrue(l.length>0);for(var p=new ArrayList,y=0;y<l.length;y++)p.addAll(g.createParentBoundablesFromVerticalSlice(l[y],h));return p},e.prototype.createNode=function(l){return new STRtreeNode(l)},e.prototype.size=function(){return arguments.length===0?n.prototype.size.call(this):n.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];if(l.isNull())return null;n.prototype.insert.call(this,l,h)}else return n.prototype.insert.apply(this,arguments)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(l,h){for(var g=Math.trunc(Math.ceil(l.size()/h)),p=new Array(h).fill(null),y=l.iterator(),b=0;b<h;b++){p[b]=new ArrayList;for(var E=0;y.hasNext()&&E<g;){var C=y.next();p[b].add(C),E++}}return p},e.prototype.query=function(){if(arguments.length===1){var l=arguments[0];return n.prototype.query.call(this,l)}else if(arguments.length===2){var h=arguments[0],g=arguments[1];n.prototype.query.call(this,h,g)}else if(arguments.length===3){if(hasInterface(arguments[2],ItemVisitor)&&arguments[0]instanceof Object&&arguments[1]instanceof AbstractNode){var p=arguments[0],y=arguments[1],b=arguments[2];n.prototype.query.call(this,p,y,b)}else if(hasInterface(arguments[2],List)&&arguments[0]instanceof Object&&arguments[1]instanceof AbstractNode){var E=arguments[0],C=arguments[1],A=arguments[2];n.prototype.query.call(this,E,C,A)}}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(l,h){return n.prototype.createParentBoundables.call(this,l,h)},e.prototype.remove=function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];return n.prototype.remove.call(this,l,h)}else return n.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return arguments.length===0?n.prototype.depth.call(this):n.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(l,h){Assert.isTrue(!l.isEmpty());var g=Math.trunc(Math.ceil(l.size()/this.getNodeCapacity())),p=new ArrayList(l);Collections.sort(p,e.xComparator);var y=this.verticalSlices(p,Math.trunc(Math.ceil(Math.sqrt(g))));return this.createParentBoundablesFromVerticalSlices(y,h)},e.prototype.nearestNeighbour=function(){if(arguments.length===1){if(hasInterface(arguments[0],ItemDistance)){var l=arguments[0],h=new BoundablePair(this.getRoot(),this.getRoot(),l);return this.nearestNeighbour(h)}else if(arguments[0]instanceof BoundablePair){var g=arguments[0];return this.nearestNeighbour(g,Double.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof e&&hasInterface(arguments[1],ItemDistance)){var p=arguments[0],y=arguments[1],b=new BoundablePair(this.getRoot(),p.getRoot(),y);return this.nearestNeighbour(b)}else if(arguments[0]instanceof BoundablePair&&typeof arguments[1]=="number"){var E=arguments[0],C=arguments[1],A=C,B=null,M=new PriorityQueue;for(M.add(E);!M.isEmpty()&&A>0;){var N=M.poll(),Z=N.getDistance();if(Z>=A)break;N.isLeaves()?(A=Z,B=N):N.expandToQueue(M,A)}return[B.getBoundable(0).getItem(),B.getBoundable(1).getItem()]}}else if(arguments.length===3){var ee=arguments[0],F=arguments[1],O=arguments[2],k=new ItemBoundable(ee,F),H=new BoundablePair(this.getRoot(),k,O);return this.nearestNeighbour(H)[0]}},e.prototype.interfaces_=function(){return[SpatialIndex,Serializable]},e.prototype.getClass=function(){return e},e.centreX=function(l){return e.avg(l.getMinX(),l.getMaxX())},e.avg=function(l,h){return(l+h)/2},e.centreY=function(l){return e.avg(l.getMinY(),l.getMaxY())},t.STRtreeNode.get=function(){return STRtreeNode},t.serialVersionUID.get=function(){return 0x39920f7d5f261e0},t.xComparator.get=function(){return{interfaces_:function(){return[Comparator]},compare:function(a,l){return n.compareDoubles(e.centreX(a.getBounds()),e.centreX(l.getBounds()))}}},t.yComparator.get=function(){return{interfaces_:function(){return[Comparator]},compare:function(a,l){return n.compareDoubles(e.centreY(a.getBounds()),e.centreY(l.getBounds()))}}},t.intersectsOp.get=function(){return{interfaces_:function(){return[n.IntersectsOp]},intersects:function(a,l){return a.intersects(l)}}},t.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,t),e}(AbstractSTRtree),STRtreeNode=function(n){function e(){var t=arguments[0];n.call(this,t)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var a=null,l=this.getChildBoundables().iterator();l.hasNext();){var h=l.next();a===null?a=new Envelope(h.getBounds()):a.expandToInclude(h.getBounds())}return a},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(AbstractNode),SegmentPointComparator=function(){};SegmentPointComparator.prototype.interfaces_=function(){return[]};SegmentPointComparator.prototype.getClass=function(){return SegmentPointComparator};SegmentPointComparator.relativeSign=function(e,t){return e<t?-1:e>t?1:0};SegmentPointComparator.compare=function(e,t,a){if(t.equals2D(a))return 0;var l=SegmentPointComparator.relativeSign(t.x,a.x),h=SegmentPointComparator.relativeSign(t.y,a.y);switch(e){case 0:return SegmentPointComparator.compareValue(l,h);case 1:return SegmentPointComparator.compareValue(h,l);case 2:return SegmentPointComparator.compareValue(h,-l);case 3:return SegmentPointComparator.compareValue(-l,h);case 4:return SegmentPointComparator.compareValue(-l,-h);case 5:return SegmentPointComparator.compareValue(-h,-l);case 6:return SegmentPointComparator.compareValue(-h,l);case 7:return SegmentPointComparator.compareValue(l,-h)}return Assert.shouldNeverReachHere("invalid octant value"),0};SegmentPointComparator.compareValue=function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0};var SegmentNode=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],a=arguments[2],l=arguments[3];this._segString=e,this.coord=new Coordinate(t),this.segmentIndex=a,this._segmentOctant=l,this._isInterior=!t.equals2D(e.getCoordinate(a))};SegmentNode.prototype.getCoordinate=function(){return this.coord};SegmentNode.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)};SegmentNode.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:SegmentPointComparator.compare(this._segmentOctant,this.coord,t.coord)};SegmentNode.prototype.isEndPoint=function(e){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===e};SegmentNode.prototype.isInterior=function(){return this._isInterior};SegmentNode.prototype.interfaces_=function(){return[Comparable]};SegmentNode.prototype.getClass=function(){return SegmentNode};var SegmentNodeList=function(){this._nodeMap=new TreeMap,this._edge=null;var e=arguments[0];this._edge=e};SegmentNodeList.prototype.getSplitCoordinates=function(){var e=this,t=new CoordinateList;this.addEndpoints();for(var a=this.iterator(),l=a.next();a.hasNext();){var h=a.next();e.addEdgeCoordinates(l,h,t),l=h}return t.toCoordinateArray()};SegmentNodeList.prototype.addCollapsedNodes=function(){var e=this,t=new ArrayList;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var a=t.iterator();a.hasNext();){var l=a.next().intValue();e.add(e._edge.getCoordinate(l),l)}};SegmentNodeList.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var a=t.next();a.print(e)}};SegmentNodeList.prototype.findCollapsesFromExistingVertices=function(e){for(var t=this,a=0;a<this._edge.size()-2;a++){var l=t._edge.getCoordinate(a),h=t._edge.getCoordinate(a+2);l.equals2D(h)&&e.add(new Integer(a+1))}};SegmentNodeList.prototype.addEdgeCoordinates=function(e,t,a){var l=this,h=this._edge.getCoordinate(t.segmentIndex),g=t.isInterior()||!t.coord.equals2D(h);a.add(new Coordinate(e.coord),!1);for(var p=e.segmentIndex+1;p<=t.segmentIndex;p++)a.add(l._edge.getCoordinate(p));g&&a.add(new Coordinate(t.coord))};SegmentNodeList.prototype.iterator=function(){return this._nodeMap.values().iterator()};SegmentNodeList.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints(),this.addCollapsedNodes();for(var a=this.iterator(),l=a.next();a.hasNext();){var h=a.next(),g=t.createSplitEdge(l,h);e.add(g),l=h}};SegmentNodeList.prototype.findCollapseIndex=function(e,t,a){if(!e.coord.equals2D(t.coord))return!1;var l=t.segmentIndex-e.segmentIndex;return t.isInterior()||l--,l===1?(a[0]=e.segmentIndex+1,!0):!1};SegmentNodeList.prototype.findCollapsesFromInsertedNodes=function(e){for(var t=this,a=new Array(1).fill(null),l=this.iterator(),h=l.next();l.hasNext();){var g=l.next(),p=t.findCollapseIndex(h,g,a);p&&e.add(new Integer(a[0])),h=g}};SegmentNodeList.prototype.getEdge=function(){return this._edge};SegmentNodeList.prototype.addEndpoints=function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)};SegmentNodeList.prototype.createSplitEdge=function(e,t){var a=this,l=t.segmentIndex-e.segmentIndex+2,h=this._edge.getCoordinate(t.segmentIndex),g=t.isInterior()||!t.coord.equals2D(h);g||l--;var p=new Array(l).fill(null),y=0;p[y++]=new Coordinate(e.coord);for(var b=e.segmentIndex+1;b<=t.segmentIndex;b++)p[y++]=a._edge.getCoordinate(b);return g&&(p[y]=new Coordinate(t.coord)),new NodedSegmentString(p,this._edge.getData())};SegmentNodeList.prototype.add=function(e,t){var a=new SegmentNode(this._edge,e,t,this._edge.getSegmentOctant(t)),l=this._nodeMap.get(a);return l!==null?(Assert.isTrue(l.coord.equals2D(e),"Found equal nodes with different coordinates"),l):(this._nodeMap.put(a,a),a)};SegmentNodeList.prototype.checkSplitEdgesCorrectness=function(e){var t=this._edge.getCoordinates(),a=e.get(0),l=a.getCoordinate(0);if(!l.equals2D(t[0]))throw new RuntimeException("bad split edge start point at "+l);var h=e.get(e.size()-1),g=h.getCoordinates(),p=g[g.length-1];if(!p.equals2D(t[t.length-1]))throw new RuntimeException("bad split edge end point at "+p)};SegmentNodeList.prototype.interfaces_=function(){return[]};SegmentNodeList.prototype.getClass=function(){return SegmentNodeList};var Octant=function(){};Octant.prototype.interfaces_=function(){return[]};Octant.prototype.getClass=function(){return Octant};Octant.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new IllegalArgumentException("Cannot compute the octant for point ( "+e+", "+t+" )");var a=Math.abs(e),l=Math.abs(t);return e>=0?t>=0?a>=l?0:1:a>=l?7:6:t>=0?a>=l?3:2:a>=l?4:5}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Coordinate){var h=arguments[0],g=arguments[1],p=g.x-h.x,y=g.y-h.y;if(p===0&&y===0)throw new IllegalArgumentException("Cannot compute the octant for two identical points "+h);return Octant.octant(p,y)}};var SegmentString=function(){};SegmentString.prototype.getCoordinates=function(){};SegmentString.prototype.size=function(){};SegmentString.prototype.getCoordinate=function(e){};SegmentString.prototype.isClosed=function(){};SegmentString.prototype.setData=function(e){};SegmentString.prototype.getData=function(){};SegmentString.prototype.interfaces_=function(){return[]};SegmentString.prototype.getClass=function(){return SegmentString};var NodableSegmentString=function(){};NodableSegmentString.prototype.addIntersection=function(e,t){};NodableSegmentString.prototype.interfaces_=function(){return[SegmentString]};NodableSegmentString.prototype.getClass=function(){return NodableSegmentString};var NodedSegmentString=function(){this._nodeList=new SegmentNodeList(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};NodedSegmentString.prototype.getCoordinates=function(){return this._pts};NodedSegmentString.prototype.size=function(){return this._pts.length};NodedSegmentString.prototype.getCoordinate=function(e){return this._pts[e]};NodedSegmentString.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};NodedSegmentString.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))};NodedSegmentString.prototype.setData=function(e){this._data=e};NodedSegmentString.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:Octant.octant(e,t)};NodedSegmentString.prototype.getData=function(){return this._data};NodedSegmentString.prototype.addIntersection=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(arguments.length===4){var a=arguments[0],l=arguments[1],h=arguments[3],g=new Coordinate(a.getIntersection(h));this.addIntersection(g,l)}};NodedSegmentString.prototype.toString=function(){return WKTWriter.toLineString(new CoordinateArraySequence(this._pts))};NodedSegmentString.prototype.getNodeList=function(){return this._nodeList};NodedSegmentString.prototype.addIntersectionNode=function(e,t){var a=t,l=a+1;if(l<this._pts.length){var h=this._pts[l];e.equals2D(h)&&(a=l)}var g=this._nodeList.add(e,a);return g};NodedSegmentString.prototype.addIntersections=function(e,t,a){for(var l=this,h=0;h<e.getIntersectionNum();h++)l.addIntersection(e,t,a,h)};NodedSegmentString.prototype.interfaces_=function(){return[NodableSegmentString]};NodedSegmentString.prototype.getClass=function(){return NodedSegmentString};NodedSegmentString.getNodedSubstrings=function(){if(arguments.length===1){var e=arguments[0],t=new ArrayList;return NodedSegmentString.getNodedSubstrings(e,t),t}else if(arguments.length===2)for(var a=arguments[0],l=arguments[1],h=a.iterator();h.hasNext();){var g=h.next();g.getNodeList().addSplitEdges(l)}};var LineSegment=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new Coordinate,this.p1=new Coordinate;else if(arguments.length===1){var e=arguments[0];this.p0=new Coordinate(e.p0),this.p1=new Coordinate(e.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var t=arguments[0],a=arguments[1],l=arguments[2],h=arguments[3];this.p0=new Coordinate(t,a),this.p1=new Coordinate(l,h)}},staticAccessors$24={serialVersionUID:{configurable:!0}};LineSegment.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};LineSegment.prototype.orientationIndex=function(){if(arguments[0]instanceof LineSegment){var e=arguments[0],t=CGAlgorithms.orientationIndex(this.p0,this.p1,e.p0),a=CGAlgorithms.orientationIndex(this.p0,this.p1,e.p1);return t>=0&&a>=0||t<=0&&a<=0?Math.max(t,a):0}else if(arguments[0]instanceof Coordinate){var l=arguments[0];return CGAlgorithms.orientationIndex(this.p0,this.p1,l)}};LineSegment.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])};LineSegment.prototype.isVertical=function(){return this.p0.x===this.p1.x};LineSegment.prototype.equals=function(e){if(!(e instanceof LineSegment))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)};LineSegment.prototype.intersection=function(e){var t=new RobustLineIntersector;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null};LineSegment.prototype.project=function(){if(arguments[0]instanceof Coordinate){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new Coordinate(e);var t=this.projectionFactor(e),a=new Coordinate;return a.x=this.p0.x+t*(this.p1.x-this.p0.x),a.y=this.p0.y+t*(this.p1.y-this.p0.y),a}else if(arguments[0]instanceof LineSegment){var l=arguments[0],h=this.projectionFactor(l.p0),g=this.projectionFactor(l.p1);if(h>=1&&g>=1||h<=0&&g<=0)return null;var p=this.project(l.p0);h<0&&(p=this.p0),h>1&&(p=this.p1);var y=this.project(l.p1);return g<0&&(y=this.p0),g>1&&(y=this.p1),new LineSegment(p,y)}};LineSegment.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};LineSegment.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};LineSegment.prototype.getCoordinate=function(e){return e===0?this.p0:this.p1};LineSegment.prototype.distancePerpendicular=function(e){return CGAlgorithms.distancePointLinePerpendicular(e,this.p0,this.p1)};LineSegment.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};LineSegment.prototype.midPoint=function(){return LineSegment.midPoint(this.p0,this.p1)};LineSegment.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,a=this.p1.y-this.p0.y,l=t*t+a*a;if(l<=0)return Double.NaN;var h=((e.x-this.p0.x)*t+(e.y-this.p0.y)*a)/l;return h};LineSegment.prototype.closestPoints=function(e){var t=this.intersection(e);if(t!==null)return[t,t];var a=new Array(2).fill(null),l=Double.MAX_VALUE,h=null,g=this.closestPoint(e.p0);l=g.distance(e.p0),a[0]=g,a[1]=e.p0;var p=this.closestPoint(e.p1);h=p.distance(e.p1),h<l&&(l=h,a[0]=p,a[1]=e.p1);var y=e.closestPoint(this.p0);h=y.distance(this.p0),h<l&&(l=h,a[0]=this.p0,a[1]=y);var b=e.closestPoint(this.p1);return h=b.distance(this.p1),h<l&&(l=h,a[0]=this.p1,a[1]=b),a};LineSegment.prototype.closestPoint=function(e){var t=this.projectionFactor(e);if(t>0&&t<1)return this.project(e);var a=this.p0.distance(e),l=this.p1.distance(e);return a<l?this.p0:this.p1};LineSegment.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};LineSegment.prototype.getLength=function(){return this.p0.distance(this.p1)};LineSegment.prototype.compareTo=function(e){var t=e,a=this.p0.compareTo(t.p0);return a!==0?a:this.p1.compareTo(t.p1)};LineSegment.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e};LineSegment.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&(this.p1.equals(e.p1)||this.p0.equals(e.p1))&&this.p1.equals(e.p0)};LineSegment.prototype.lineIntersection=function(e){try{var t=HCoordinate.intersection(this.p0,this.p1,e.p0,e.p1);return t}catch(a){if(!(a instanceof NotRepresentableException))throw a}finally{}return null};LineSegment.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};LineSegment.prototype.pointAlongOffset=function(e,t){var a=this.p0.x+e*(this.p1.x-this.p0.x),l=this.p0.y+e*(this.p1.y-this.p0.y),h=this.p1.x-this.p0.x,g=this.p1.y-this.p0.y,p=Math.sqrt(h*h+g*g),y=0,b=0;if(t!==0){if(p<=0)throw new Error("Cannot compute offset from zero-length line segment");y=t*h/p,b=t*g/p}var E=a-b,C=l+y,A=new Coordinate(E,C);return A};LineSegment.prototype.setCoordinates=function(){if(arguments.length===1){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(arguments.length===2){var t=arguments[0],a=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=a.x,this.p1.y=a.y}};LineSegment.prototype.segmentFraction=function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||Double.isNaN(t))&&(t=1),t};LineSegment.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};LineSegment.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};LineSegment.prototype.distance=function(){if(arguments[0]instanceof LineSegment){var e=arguments[0];return CGAlgorithms.distanceLineLine(this.p0,this.p1,e.p0,e.p1)}else if(arguments[0]instanceof Coordinate){var t=arguments[0];return CGAlgorithms.distancePointLine(t,this.p0,this.p1)}};LineSegment.prototype.pointAlong=function(e){var t=new Coordinate;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t};LineSegment.prototype.hashCode=function(){var e=Double.doubleToLongBits(this.p0.x);e^=Double.doubleToLongBits(this.p0.y)*31;var t=Math.trunc(e)^Math.trunc(e>>32),a=Double.doubleToLongBits(this.p1.x);a^=Double.doubleToLongBits(this.p1.y)*31;var l=Math.trunc(a)^Math.trunc(a>>32);return t^l};LineSegment.prototype.interfaces_=function(){return[Comparable,Serializable]};LineSegment.prototype.getClass=function(){return LineSegment};LineSegment.midPoint=function(e,t){return new Coordinate((e.x+t.x)/2,(e.y+t.y)/2)};staticAccessors$24.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(LineSegment,staticAccessors$24);var MonotoneChainOverlapAction=function(){this.tempEnv1=new Envelope,this.tempEnv2=new Envelope,this._overlapSeg1=new LineSegment,this._overlapSeg2=new LineSegment};MonotoneChainOverlapAction.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var e=arguments[0],t=arguments[1],a=arguments[2],l=arguments[3];e.getLineSegment(t,this._overlapSeg1),a.getLineSegment(l,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}};MonotoneChainOverlapAction.prototype.interfaces_=function(){return[]};MonotoneChainOverlapAction.prototype.getClass=function(){return MonotoneChainOverlapAction};var MonotoneChain=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],a=arguments[2],l=arguments[3];this._pts=e,this._start=t,this._end=a,this._context=l};MonotoneChain.prototype.getLineSegment=function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]};MonotoneChain.prototype.computeSelect=function(e,t,a,l){var h=this._pts[t],g=this._pts[a];if(l.tempEnv1.init(h,g),a-t===1)return l.select(this,t),null;if(!e.intersects(l.tempEnv1))return null;var p=Math.trunc((t+a)/2);t<p&&this.computeSelect(e,t,p,l),p<a&&this.computeSelect(e,p,a,l)};MonotoneChain.prototype.getCoordinates=function(){for(var e=this,t=new Array(this._end-this._start+1).fill(null),a=0,l=this._start;l<=this._end;l++)t[a++]=e._pts[l];return t};MonotoneChain.prototype.computeOverlaps=function(e,t){this.computeOverlapsInternal(this._start,this._end,e,e._start,e._end,t)};MonotoneChain.prototype.setId=function(e){this._id=e};MonotoneChain.prototype.select=function(e,t){this.computeSelect(e,this._start,this._end,t)};MonotoneChain.prototype.getEnvelope=function(){if(this._env===null){var e=this._pts[this._start],t=this._pts[this._end];this._env=new Envelope(e,t)}return this._env};MonotoneChain.prototype.getEndIndex=function(){return this._end};MonotoneChain.prototype.getStartIndex=function(){return this._start};MonotoneChain.prototype.getContext=function(){return this._context};MonotoneChain.prototype.getId=function(){return this._id};MonotoneChain.prototype.computeOverlapsInternal=function(e,t,a,l,h,g){var p=this._pts[e],y=this._pts[t],b=a._pts[l],E=a._pts[h];if(t-e===1&&h-l===1)return g.overlap(this,e,a,l),null;if(g.tempEnv1.init(p,y),g.tempEnv2.init(b,E),!g.tempEnv1.intersects(g.tempEnv2))return null;var C=Math.trunc((e+t)/2),A=Math.trunc((l+h)/2);e<C&&(l<A&&this.computeOverlapsInternal(e,C,a,l,A,g),A<h&&this.computeOverlapsInternal(e,C,a,A,h,g)),C<t&&(l<A&&this.computeOverlapsInternal(C,t,a,l,A,g),A<h&&this.computeOverlapsInternal(C,t,a,A,h,g))};MonotoneChain.prototype.interfaces_=function(){return[]};MonotoneChain.prototype.getClass=function(){return MonotoneChain};var MonotoneChainBuilder=function(){};MonotoneChainBuilder.prototype.interfaces_=function(){return[]};MonotoneChainBuilder.prototype.getClass=function(){return MonotoneChainBuilder};MonotoneChainBuilder.getChainStartIndices=function(e){var t=0,a=new ArrayList;a.add(new Integer(t));do{var l=MonotoneChainBuilder.findChainEnd(e,t);a.add(new Integer(l)),t=l}while(t<e.length-1);var h=MonotoneChainBuilder.toIntArray(a);return h};MonotoneChainBuilder.findChainEnd=function(e,t){for(var a=t;a<e.length-1&&e[a].equals2D(e[a+1]);)a++;if(a>=e.length-1)return e.length-1;for(var l=Quadrant.quadrant(e[a],e[a+1]),h=t+1;h<e.length;){if(!e[h-1].equals2D(e[h])){var g=Quadrant.quadrant(e[h-1],e[h]);if(g!==l)break}h++}return h-1};MonotoneChainBuilder.getChains=function(){if(arguments.length===1){var e=arguments[0];return MonotoneChainBuilder.getChains(e,null)}else if(arguments.length===2){for(var t=arguments[0],a=arguments[1],l=new ArrayList,h=MonotoneChainBuilder.getChainStartIndices(t),g=0;g<h.length-1;g++){var p=new MonotoneChain(t,h[g],h[g+1],a);l.add(p)}return l}};MonotoneChainBuilder.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),a=0;a<t.length;a++)t[a]=e.get(a).intValue();return t};var Noder=function(){};Noder.prototype.computeNodes=function(e){};Noder.prototype.getNodedSubstrings=function(){};Noder.prototype.interfaces_=function(){return[]};Noder.prototype.getClass=function(){return Noder};var SinglePassNoder=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.setSegmentIntersector(e)}}};SinglePassNoder.prototype.setSegmentIntersector=function(e){this._segInt=e};SinglePassNoder.prototype.interfaces_=function(){return[Noder]};SinglePassNoder.prototype.getClass=function(){return SinglePassNoder};var MCIndexNoder=function(n){function e(a){a?n.call(this,a):n.call(this),this._monoChains=new ArrayList,this._index=new STRtree,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return NodedSegmentString.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(l){for(var h=this,g=MonotoneChainBuilder.getChains(l.getCoordinates(),l),p=g.iterator();p.hasNext();){var y=p.next();y.setId(h._idCounter++),h._index.insert(y.getEnvelope(),y),h._monoChains.add(y)}},e.prototype.computeNodes=function(l){var h=this;this._nodedSegStrings=l;for(var g=l.iterator();g.hasNext();)h.add(g.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var l=this,h=new SegmentOverlapAction(this._segInt),g=this._monoChains.iterator();g.hasNext();)for(var p=g.next(),y=l._index.query(p.getEnvelope()),b=y.iterator();b.hasNext();){var E=b.next();if(E.getId()>p.getId()&&(p.computeOverlaps(E,h),l._nOverlaps++),l._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},t.SegmentOverlapAction.get=function(){return SegmentOverlapAction},Object.defineProperties(e,t),e}(SinglePassNoder),SegmentOverlapAction=function(n){function e(){n.call(this),this._si=null;var t=arguments[0];this._si=t}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(arguments.length===4){var a=arguments[0],l=arguments[1],h=arguments[2],g=arguments[3],p=a.getContext(),y=h.getContext();this._si.processIntersections(p,l,y,g)}else return n.prototype.overlap.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(MonotoneChainOverlapAction),BufferParameters=function n(){if(this._quadrantSegments=n.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=n.CAP_ROUND,this._joinStyle=n.JOIN_ROUND,this._mitreLimit=n.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=n.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.setQuadrantSegments(e)}else if(arguments.length===2){var t=arguments[0],a=arguments[1];this.setQuadrantSegments(t),this.setEndCapStyle(a)}else if(arguments.length===4){var l=arguments[0],h=arguments[1],g=arguments[2],p=arguments[3];this.setQuadrantSegments(l),this.setEndCapStyle(h),this.setJoinStyle(g),this.setMitreLimit(p)}}},staticAccessors$25={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};BufferParameters.prototype.getEndCapStyle=function(){return this._endCapStyle};BufferParameters.prototype.isSingleSided=function(){return this._isSingleSided};BufferParameters.prototype.setQuadrantSegments=function(e){this._quadrantSegments=e,this._quadrantSegments===0&&(this._joinStyle=BufferParameters.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=BufferParameters.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==BufferParameters.JOIN_ROUND&&(this._quadrantSegments=BufferParameters.DEFAULT_QUADRANT_SEGMENTS)};BufferParameters.prototype.getJoinStyle=function(){return this._joinStyle};BufferParameters.prototype.setJoinStyle=function(e){this._joinStyle=e};BufferParameters.prototype.setSimplifyFactor=function(e){this._simplifyFactor=e<0?0:e};BufferParameters.prototype.getSimplifyFactor=function(){return this._simplifyFactor};BufferParameters.prototype.getQuadrantSegments=function(){return this._quadrantSegments};BufferParameters.prototype.setEndCapStyle=function(e){this._endCapStyle=e};BufferParameters.prototype.getMitreLimit=function(){return this._mitreLimit};BufferParameters.prototype.setMitreLimit=function(e){this._mitreLimit=e};BufferParameters.prototype.setSingleSided=function(e){this._isSingleSided=e};BufferParameters.prototype.interfaces_=function(){return[]};BufferParameters.prototype.getClass=function(){return BufferParameters};BufferParameters.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)};staticAccessors$25.CAP_ROUND.get=function(){return 1};staticAccessors$25.CAP_FLAT.get=function(){return 2};staticAccessors$25.CAP_SQUARE.get=function(){return 3};staticAccessors$25.JOIN_ROUND.get=function(){return 1};staticAccessors$25.JOIN_MITRE.get=function(){return 2};staticAccessors$25.JOIN_BEVEL.get=function(){return 3};staticAccessors$25.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};staticAccessors$25.DEFAULT_MITRE_LIMIT.get=function(){return 5};staticAccessors$25.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(BufferParameters,staticAccessors$25);var BufferInputLineSimplifier=function(e){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=CGAlgorithms.COUNTERCLOCKWISE,this._inputLine=e||null},staticAccessors$26={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};BufferInputLineSimplifier.prototype.isDeletable=function(e,t,a,l){var h=this._inputLine[e],g=this._inputLine[t],p=this._inputLine[a];return!this.isConcave(h,g,p)||!this.isShallow(h,g,p,l)?!1:this.isShallowSampled(h,g,e,a,l)};BufferInputLineSimplifier.prototype.deleteShallowConcavities=function(){for(var e=this,t=1,a=this.findNextNonDeletedIndex(t),l=this.findNextNonDeletedIndex(a),h=!1;l<this._inputLine.length;){var g=!1;e.isDeletable(t,a,l,e._distanceTol)&&(e._isDeleted[a]=BufferInputLineSimplifier.DELETE,g=!0,h=!0),g?t=l:t=a,a=e.findNextNonDeletedIndex(t),l=e.findNextNonDeletedIndex(a)}return h};BufferInputLineSimplifier.prototype.isShallowConcavity=function(e,t,a,l){var h=CGAlgorithms.computeOrientation(e,t,a),g=h===this._angleOrientation;if(!g)return!1;var p=CGAlgorithms.distancePointLine(t,e,a);return p<l};BufferInputLineSimplifier.prototype.isShallowSampled=function(e,t,a,l,h){var g=this,p=Math.trunc((l-a)/BufferInputLineSimplifier.NUM_PTS_TO_CHECK);p<=0&&(p=1);for(var y=a;y<l;y+=p)if(!g.isShallow(e,t,g._inputLine[y],h))return!1;return!0};BufferInputLineSimplifier.prototype.isConcave=function(e,t,a){var l=CGAlgorithms.computeOrientation(e,t,a),h=l===this._angleOrientation;return h};BufferInputLineSimplifier.prototype.simplify=function(e){var t=this;this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=CGAlgorithms.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var a=!1;do a=t.deleteShallowConcavities();while(a);return this.collapseLine()};BufferInputLineSimplifier.prototype.findNextNonDeletedIndex=function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===BufferInputLineSimplifier.DELETE;)t++;return t};BufferInputLineSimplifier.prototype.isShallow=function(e,t,a,l){var h=CGAlgorithms.distancePointLine(t,e,a);return h<l};BufferInputLineSimplifier.prototype.collapseLine=function(){for(var e=this,t=new CoordinateList,a=0;a<this._inputLine.length;a++)e._isDeleted[a]!==BufferInputLineSimplifier.DELETE&&t.add(e._inputLine[a]);return t.toCoordinateArray()};BufferInputLineSimplifier.prototype.interfaces_=function(){return[]};BufferInputLineSimplifier.prototype.getClass=function(){return BufferInputLineSimplifier};BufferInputLineSimplifier.simplify=function(e,t){var a=new BufferInputLineSimplifier(e);return a.simplify(t)};staticAccessors$26.INIT.get=function(){return 0};staticAccessors$26.DELETE.get=function(){return 1};staticAccessors$26.KEEP.get=function(){return 1};staticAccessors$26.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(BufferInputLineSimplifier,staticAccessors$26);var OffsetSegmentString=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new ArrayList},staticAccessors$28={COORDINATE_ARRAY_TYPE:{configurable:!0}};OffsetSegmentString.prototype.getCoordinates=function(){var e=this._ptList.toArray(OffsetSegmentString.COORDINATE_ARRAY_TYPE);return e};OffsetSegmentString.prototype.setPrecisionModel=function(e){this._precisionModel=e};OffsetSegmentString.prototype.addPt=function(e){var t=new Coordinate(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)};OffsetSegmentString.prototype.revere=function(){};OffsetSegmentString.prototype.addPts=function(e,t){var a=this;if(t)for(var l=0;l<e.length;l++)a.addPt(e[l]);else for(var h=e.length-1;h>=0;h--)a.addPt(e[h])};OffsetSegmentString.prototype.isRedundant=function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1),a=e.distance(t);return a<this._minimimVertexDistance};OffsetSegmentString.prototype.toString=function(){var e=new GeometryFactory,t=e.createLineString(this.getCoordinates());return t.toString()};OffsetSegmentString.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var e=new Coordinate(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)};OffsetSegmentString.prototype.setMinimumVertexDistance=function(e){this._minimimVertexDistance=e};OffsetSegmentString.prototype.interfaces_=function(){return[]};OffsetSegmentString.prototype.getClass=function(){return OffsetSegmentString};staticAccessors$28.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(OffsetSegmentString,staticAccessors$28);var Angle=function(){},staticAccessors$29={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Angle.prototype.interfaces_=function(){return[]};Angle.prototype.getClass=function(){return Angle};Angle.toDegrees=function(e){return e*180/Math.PI};Angle.normalize=function(e){for(;e>Math.PI;)e-=Angle.PI_TIMES_2;for(;e<=-Math.PI;)e+=Angle.PI_TIMES_2;return e};Angle.angle=function(){if(arguments.length===1){var e=arguments[0];return Math.atan2(e.y,e.x)}else if(arguments.length===2){var t=arguments[0],a=arguments[1],l=a.x-t.x,h=a.y-t.y;return Math.atan2(h,l)}};Angle.isAcute=function(e,t,a){var l=e.x-t.x,h=e.y-t.y,g=a.x-t.x,p=a.y-t.y,y=l*g+h*p;return y>0};Angle.isObtuse=function(e,t,a){var l=e.x-t.x,h=e.y-t.y,g=a.x-t.x,p=a.y-t.y,y=l*g+h*p;return y<0};Angle.interiorAngle=function(e,t,a){var l=Angle.angle(t,e),h=Angle.angle(t,a);return Math.abs(h-l)};Angle.normalizePositive=function(e){if(e<0){for(;e<0;)e+=Angle.PI_TIMES_2;e>=Angle.PI_TIMES_2&&(e=0)}else{for(;e>=Angle.PI_TIMES_2;)e-=Angle.PI_TIMES_2;e<0&&(e=0)}return e};Angle.angleBetween=function(e,t,a){var l=Angle.angle(t,e),h=Angle.angle(t,a);return Angle.diff(l,h)};Angle.diff=function(e,t){var a=null;return e<t?a=t-e:a=e-t,a>Math.PI&&(a=2*Math.PI-a),a};Angle.toRadians=function(e){return e*Math.PI/180};Angle.getTurn=function(e,t){var a=Math.sin(t-e);return a>0?Angle.COUNTERCLOCKWISE:a<0?Angle.CLOCKWISE:Angle.NONE};Angle.angleBetweenOriented=function(e,t,a){var l=Angle.angle(t,e),h=Angle.angle(t,a),g=h-l;return g<=-Math.PI?g+Angle.PI_TIMES_2:g>Math.PI?g-Angle.PI_TIMES_2:g};staticAccessors$29.PI_TIMES_2.get=function(){return 2*Math.PI};staticAccessors$29.PI_OVER_2.get=function(){return Math.PI/2};staticAccessors$29.PI_OVER_4.get=function(){return Math.PI/4};staticAccessors$29.COUNTERCLOCKWISE.get=function(){return CGAlgorithms.COUNTERCLOCKWISE};staticAccessors$29.CLOCKWISE.get=function(){return CGAlgorithms.CLOCKWISE};staticAccessors$29.NONE.get=function(){return CGAlgorithms.COLLINEAR};Object.defineProperties(Angle,staticAccessors$29);var OffsetSegmentGenerator=function n(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new LineSegment,this._seg1=new LineSegment,this._offset0=new LineSegment,this._offset1=new LineSegment,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],t=arguments[1],a=arguments[2];this._precisionModel=e,this._bufParams=t,this._li=new RobustLineIntersector,this._filletAngleQuantum=Math.PI/2/t.getQuadrantSegments(),t.getQuadrantSegments()>=8&&t.getJoinStyle()===BufferParameters.JOIN_ROUND&&(this._closingSegLengthFactor=n.MAX_CLOSING_SEG_LEN_FACTOR),this.init(a)},staticAccessors$27={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};OffsetSegmentGenerator.prototype.addNextSegment=function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var a=CGAlgorithms.computeOrientation(this._s0,this._s1,this._s2),l=a===CGAlgorithms.CLOCKWISE&&this._side===Position$1.LEFT||a===CGAlgorithms.COUNTERCLOCKWISE&&this._side===Position$1.RIGHT;a===0?this.addCollinear(t):l?this.addOutsideTurn(a,t):this.addInsideTurn(a,t)};OffsetSegmentGenerator.prototype.addLineEndCap=function(e,t){var a=new LineSegment(e,t),l=new LineSegment;this.computeOffsetSegment(a,Position$1.LEFT,this._distance,l);var h=new LineSegment;this.computeOffsetSegment(a,Position$1.RIGHT,this._distance,h);var g=t.x-e.x,p=t.y-e.y,y=Math.atan2(p,g);switch(this._bufParams.getEndCapStyle()){case BufferParameters.CAP_ROUND:this._segList.addPt(l.p1),this.addFilletArc(t,y+Math.PI/2,y-Math.PI/2,CGAlgorithms.CLOCKWISE,this._distance),this._segList.addPt(h.p1);break;case BufferParameters.CAP_FLAT:this._segList.addPt(l.p1),this._segList.addPt(h.p1);break;case BufferParameters.CAP_SQUARE:var b=new Coordinate;b.x=Math.abs(this._distance)*Math.cos(y),b.y=Math.abs(this._distance)*Math.sin(y);var E=new Coordinate(l.p1.x+b.x,l.p1.y+b.y),C=new Coordinate(h.p1.x+b.x,h.p1.y+b.y);this._segList.addPt(E),this._segList.addPt(C);break}};OffsetSegmentGenerator.prototype.getCoordinates=function(){var e=this._segList.getCoordinates();return e};OffsetSegmentGenerator.prototype.addMitreJoin=function(e,t,a,l){var h=!0,g=null;try{g=HCoordinate.intersection(t.p0,t.p1,a.p0,a.p1);var p=l<=0?1:g.distance(e)/Math.abs(l);p>this._bufParams.getMitreLimit()&&(h=!1)}catch(y){if(y instanceof NotRepresentableException)g=new Coordinate(0,0),h=!1;else throw y}finally{}h?this._segList.addPt(g):this.addLimitedMitreJoin(t,a,l,this._bufParams.getMitreLimit())};OffsetSegmentGenerator.prototype.addFilletCorner=function(e,t,a,l,h){var g=t.x-e.x,p=t.y-e.y,y=Math.atan2(p,g),b=a.x-e.x,E=a.y-e.y,C=Math.atan2(E,b);l===CGAlgorithms.CLOCKWISE?y<=C&&(y+=2*Math.PI):y>=C&&(y-=2*Math.PI),this._segList.addPt(t),this.addFilletArc(e,y,C,l,h),this._segList.addPt(a)};OffsetSegmentGenerator.prototype.addOutsideTurn=function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===BufferParameters.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===BufferParameters.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))};OffsetSegmentGenerator.prototype.createSquare=function(e){this._segList.addPt(new Coordinate(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new Coordinate(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new Coordinate(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new Coordinate(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()};OffsetSegmentGenerator.prototype.addSegments=function(e,t){this._segList.addPts(e,t)};OffsetSegmentGenerator.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};OffsetSegmentGenerator.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};OffsetSegmentGenerator.prototype.initSideSegments=function(e,t,a){this._s1=e,this._s2=t,this._side=a,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,a,this._distance,this._offset1)};OffsetSegmentGenerator.prototype.addLimitedMitreJoin=function(e,t,a,l){var h=this._seg0.p1,g=Angle.angle(h,this._seg0.p0),p=Angle.angleBetweenOriented(this._seg0.p0,h,this._seg1.p1),y=p/2,b=Angle.normalize(g+y),E=Angle.normalize(b+Math.PI),C=l*a,A=C*Math.abs(Math.sin(y)),B=a-A,M=h.x+C*Math.cos(E),N=h.y+C*Math.sin(E),Z=new Coordinate(M,N),ee=new LineSegment(h,Z),F=ee.pointAlongOffset(1,B),O=ee.pointAlongOffset(1,-B);this._side===Position$1.LEFT?(this._segList.addPt(F),this._segList.addPt(O)):(this._segList.addPt(O),this._segList.addPt(F))};OffsetSegmentGenerator.prototype.computeOffsetSegment=function(e,t,a,l){var h=t===Position$1.LEFT?1:-1,g=e.p1.x-e.p0.x,p=e.p1.y-e.p0.y,y=Math.sqrt(g*g+p*p),b=h*a*g/y,E=h*a*p/y;l.p0.x=e.p0.x-E,l.p0.y=e.p0.y+b,l.p1.x=e.p1.x-E,l.p1.y=e.p1.y+b};OffsetSegmentGenerator.prototype.addFilletArc=function(e,t,a,l,h){var g=this,p=l===CGAlgorithms.CLOCKWISE?-1:1,y=Math.abs(t-a),b=Math.trunc(y/this._filletAngleQuantum+.5);if(b<1)return null;for(var E=0,C=y/b,A=E,B=new Coordinate;A<y;){var M=t+p*A;B.x=e.x+h*Math.cos(M),B.y=e.y+h*Math.sin(M),g._segList.addPt(B),A+=C}};OffsetSegmentGenerator.prototype.addInsideTurn=function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var a=new Coordinate((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(a);var l=new Coordinate((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(l)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};OffsetSegmentGenerator.prototype.createCircle=function(e){var t=new Coordinate(e.x+this._distance,e.y);this._segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};OffsetSegmentGenerator.prototype.addBevelJoin=function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)};OffsetSegmentGenerator.prototype.init=function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new OffsetSegmentString,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};OffsetSegmentGenerator.prototype.addCollinear=function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var t=this._li.getIntersectionNum();t>=2&&(this._bufParams.getJoinStyle()===BufferParameters.JOIN_BEVEL||this._bufParams.getJoinStyle()===BufferParameters.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,CGAlgorithms.CLOCKWISE,this._distance))};OffsetSegmentGenerator.prototype.closeRing=function(){this._segList.closeRing()};OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};OffsetSegmentGenerator.prototype.interfaces_=function(){return[]};OffsetSegmentGenerator.prototype.getClass=function(){return OffsetSegmentGenerator};staticAccessors$27.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};staticAccessors$27.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};staticAccessors$27.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};staticAccessors$27.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(OffsetSegmentGenerator,staticAccessors$27);var OffsetCurveBuilder=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t};OffsetCurveBuilder.prototype.getOffsetCurve=function(e,t){if(this._distance=t,t===0)return null;var a=t<0,l=Math.abs(t),h=this.getSegGen(l);e.length<=1?this.computePointCurve(e[0],h):this.computeOffsetCurve(e,a,h);var g=h.getCoordinates();return a&&CoordinateArrays.reverse(g),g};OffsetCurveBuilder.prototype.computeSingleSidedBufferCurve=function(e,t,a){var l=this.simplifyTolerance(this._distance);if(t){a.addSegments(e,!0);var h=BufferInputLineSimplifier.simplify(e,-l),g=h.length-1;a.initSideSegments(h[g],h[g-1],Position$1.LEFT),a.addFirstSegment();for(var p=g-2;p>=0;p--)a.addNextSegment(h[p],!0)}else{a.addSegments(e,!1);var y=BufferInputLineSimplifier.simplify(e,l),b=y.length-1;a.initSideSegments(y[0],y[1],Position$1.LEFT),a.addFirstSegment();for(var E=2;E<=b;E++)a.addNextSegment(y[E],!0)}a.addLastSegment(),a.closeRing()};OffsetCurveBuilder.prototype.computeRingBufferCurve=function(e,t,a){var l=this.simplifyTolerance(this._distance);t===Position$1.RIGHT&&(l=-l);var h=BufferInputLineSimplifier.simplify(e,l),g=h.length-1;a.initSideSegments(h[g-1],h[0],t);for(var p=1;p<=g;p++){var y=p!==1;a.addNextSegment(h[p],y)}a.closeRing()};OffsetCurveBuilder.prototype.computeLineBufferCurve=function(e,t){var a=this.simplifyTolerance(this._distance),l=BufferInputLineSimplifier.simplify(e,a),h=l.length-1;t.initSideSegments(l[0],l[1],Position$1.LEFT);for(var g=2;g<=h;g++)t.addNextSegment(l[g],!0);t.addLastSegment(),t.addLineEndCap(l[h-1],l[h]);var p=BufferInputLineSimplifier.simplify(e,-a),y=p.length-1;t.initSideSegments(p[y],p[y-1],Position$1.LEFT);for(var b=y-2;b>=0;b--)t.addNextSegment(p[b],!0);t.addLastSegment(),t.addLineEndCap(p[1],p[0]),t.closeRing()};OffsetCurveBuilder.prototype.computePointCurve=function(e,t){switch(this._bufParams.getEndCapStyle()){case BufferParameters.CAP_ROUND:t.createCircle(e);break;case BufferParameters.CAP_SQUARE:t.createSquare(e);break}};OffsetCurveBuilder.prototype.getLineCurve=function(e,t){if(this._distance=t,t<0&&!this._bufParams.isSingleSided()||t===0)return null;var a=Math.abs(t),l=this.getSegGen(a);if(e.length<=1)this.computePointCurve(e[0],l);else if(this._bufParams.isSingleSided()){var h=t<0;this.computeSingleSidedBufferCurve(e,h,l)}else this.computeLineBufferCurve(e,l);var g=l.getCoordinates();return g};OffsetCurveBuilder.prototype.getBufferParameters=function(){return this._bufParams};OffsetCurveBuilder.prototype.simplifyTolerance=function(e){return e*this._bufParams.getSimplifyFactor()};OffsetCurveBuilder.prototype.getRingCurve=function(e,t,a){if(this._distance=a,e.length<=2)return this.getLineCurve(e,a);if(a===0)return OffsetCurveBuilder.copyCoordinates(e);var l=this.getSegGen(a);return this.computeRingBufferCurve(e,t,l),l.getCoordinates()};OffsetCurveBuilder.prototype.computeOffsetCurve=function(e,t,a){var l=this.simplifyTolerance(this._distance);if(t){var h=BufferInputLineSimplifier.simplify(e,-l),g=h.length-1;a.initSideSegments(h[g],h[g-1],Position$1.LEFT),a.addFirstSegment();for(var p=g-2;p>=0;p--)a.addNextSegment(h[p],!0)}else{var y=BufferInputLineSimplifier.simplify(e,l),b=y.length-1;a.initSideSegments(y[0],y[1],Position$1.LEFT),a.addFirstSegment();for(var E=2;E<=b;E++)a.addNextSegment(y[E],!0)}a.addLastSegment()};OffsetCurveBuilder.prototype.getSegGen=function(e){return new OffsetSegmentGenerator(this._precisionModel,this._bufParams,e)};OffsetCurveBuilder.prototype.interfaces_=function(){return[]};OffsetCurveBuilder.prototype.getClass=function(){return OffsetCurveBuilder};OffsetCurveBuilder.copyCoordinates=function(e){for(var t=new Array(e.length).fill(null),a=0;a<t.length;a++)t[a]=new Coordinate(e[a]);return t};var SubgraphDepthLocater=function(){this._subgraphs=null,this._seg=new LineSegment,this._cga=new CGAlgorithms;var e=arguments[0];this._subgraphs=e},staticAccessors$30={DepthSegment:{configurable:!0}};SubgraphDepthLocater.prototype.findStabbedSegments=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],a=new ArrayList,l=this._subgraphs.iterator();l.hasNext();){var h=l.next(),g=h.getEnvelope();t.y<g.getMinY()||t.y>g.getMaxY()||e.findStabbedSegments(t,h.getDirectedEdges(),a)}return a}else if(arguments.length===3){if(hasInterface(arguments[2],List)&&arguments[0]instanceof Coordinate&&arguments[1]instanceof DirectedEdge)for(var p=arguments[0],y=arguments[1],b=arguments[2],E=y.getEdge().getCoordinates(),C=0;C<E.length-1;C++){e._seg.p0=E[C],e._seg.p1=E[C+1],e._seg.p0.y>e._seg.p1.y&&e._seg.reverse();var A=Math.max(e._seg.p0.x,e._seg.p1.x);if(!(A<p.x)&&!e._seg.isHorizontal()&&!(p.y<e._seg.p0.y||p.y>e._seg.p1.y)&&CGAlgorithms.computeOrientation(e._seg.p0,e._seg.p1,p)!==CGAlgorithms.RIGHT){var B=y.getDepth(Position$1.LEFT);e._seg.p0.equals(E[C])||(B=y.getDepth(Position$1.RIGHT));var M=new DepthSegment(e._seg,B);b.add(M)}}else if(hasInterface(arguments[2],List)&&arguments[0]instanceof Coordinate&&hasInterface(arguments[1],List))for(var N=arguments[0],Z=arguments[1],ee=arguments[2],F=Z.iterator();F.hasNext();){var O=F.next();O.isForward()&&e.findStabbedSegments(N,O,ee)}}};SubgraphDepthLocater.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);if(t.size()===0)return 0;var a=Collections.min(t);return a._leftDepth};SubgraphDepthLocater.prototype.interfaces_=function(){return[]};SubgraphDepthLocater.prototype.getClass=function(){return SubgraphDepthLocater};staticAccessors$30.DepthSegment.get=function(){return DepthSegment};Object.defineProperties(SubgraphDepthLocater,staticAccessors$30);var DepthSegment=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new LineSegment(e),this._leftDepth=t};DepthSegment.prototype.compareTo=function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var a=this._upwardSeg.orientationIndex(t._upwardSeg);return a!==0||(a=-1*t._upwardSeg.orientationIndex(this._upwardSeg),a!==0)?a:this._upwardSeg.compareTo(t._upwardSeg)};DepthSegment.prototype.compareX=function(e,t){var a=e.p0.compareTo(t.p0);return a!==0?a:e.p1.compareTo(t.p1)};DepthSegment.prototype.toString=function(){return this._upwardSeg.toString()};DepthSegment.prototype.interfaces_=function(){return[Comparable]};DepthSegment.prototype.getClass=function(){return DepthSegment};var Triangle$1=function(e,t,a){this.p0=e||null,this.p1=t||null,this.p2=a||null};Triangle$1.prototype.area=function(){return Triangle$1.area(this.p0,this.p1,this.p2)};Triangle$1.prototype.signedArea=function(){return Triangle$1.signedArea(this.p0,this.p1,this.p2)};Triangle$1.prototype.interpolateZ=function(e){if(e===null)throw new IllegalArgumentException("Supplied point is null.");return Triangle$1.interpolateZ(e,this.p0,this.p1,this.p2)};Triangle$1.prototype.longestSideLength=function(){return Triangle$1.longestSideLength(this.p0,this.p1,this.p2)};Triangle$1.prototype.isAcute=function(){return Triangle$1.isAcute(this.p0,this.p1,this.p2)};Triangle$1.prototype.circumcentre=function(){return Triangle$1.circumcentre(this.p0,this.p1,this.p2)};Triangle$1.prototype.area3D=function(){return Triangle$1.area3D(this.p0,this.p1,this.p2)};Triangle$1.prototype.centroid=function(){return Triangle$1.centroid(this.p0,this.p1,this.p2)};Triangle$1.prototype.inCentre=function(){return Triangle$1.inCentre(this.p0,this.p1,this.p2)};Triangle$1.prototype.interfaces_=function(){return[]};Triangle$1.prototype.getClass=function(){return Triangle$1};Triangle$1.area=function(e,t,a){return Math.abs(((a.x-e.x)*(t.y-e.y)-(t.x-e.x)*(a.y-e.y))/2)};Triangle$1.signedArea=function(e,t,a){return((a.x-e.x)*(t.y-e.y)-(t.x-e.x)*(a.y-e.y))/2};Triangle$1.det=function(e,t,a,l){return e*l-t*a};Triangle$1.interpolateZ=function(e,t,a,l){var h=t.x,g=t.y,p=a.x-h,y=l.x-h,b=a.y-g,E=l.y-g,C=p*E-y*b,A=e.x-h,B=e.y-g,M=(E*A-y*B)/C,N=(-b*A+p*B)/C,Z=t.z+M*(a.z-t.z)+N*(l.z-t.z);return Z};Triangle$1.longestSideLength=function(e,t,a){var l=e.distance(t),h=t.distance(a),g=a.distance(e),p=l;return h>p&&(p=h),g>p&&(p=g),p};Triangle$1.isAcute=function(e,t,a){return!(!Angle.isAcute(e,t,a)||!Angle.isAcute(t,a,e)||!Angle.isAcute(a,e,t))};Triangle$1.circumcentre=function(e,t,a){var l=a.x,h=a.y,g=e.x-l,p=e.y-h,y=t.x-l,b=t.y-h,E=2*Triangle$1.det(g,p,y,b),C=Triangle$1.det(p,g*g+p*p,b,y*y+b*b),A=Triangle$1.det(g,g*g+p*p,y,y*y+b*b),B=l-C/E,M=h+A/E;return new Coordinate(B,M)};Triangle$1.perpendicularBisector=function(e,t){var a=t.x-e.x,l=t.y-e.y,h=new HCoordinate(e.x+a/2,e.y+l/2,1),g=new HCoordinate(e.x-l+a/2,e.y+a+l/2,1);return new HCoordinate(h,g)};Triangle$1.angleBisector=function(e,t,a){var l=t.distance(e),h=t.distance(a),g=l/(l+h),p=a.x-e.x,y=a.y-e.y,b=new Coordinate(e.x+g*p,e.y+g*y);return b};Triangle$1.area3D=function(e,t,a){var l=t.x-e.x,h=t.y-e.y,g=t.z-e.z,p=a.x-e.x,y=a.y-e.y,b=a.z-e.z,E=h*b-g*y,C=g*p-l*b,A=l*y-h*p,B=E*E+C*C+A*A,M=Math.sqrt(B)/2;return M};Triangle$1.centroid=function(e,t,a){var l=(e.x+t.x+a.x)/3,h=(e.y+t.y+a.y)/3;return new Coordinate(l,h)};Triangle$1.inCentre=function(e,t,a){var l=t.distance(a),h=e.distance(a),g=e.distance(t),p=l+h+g,y=(l*e.x+h*t.x+g*a.x)/p,b=(l*e.y+h*t.y+g*a.y)/p;return new Coordinate(y,b)};var OffsetCurveSetBuilder=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new ArrayList;var e=arguments[0],t=arguments[1],a=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=a};OffsetCurveSetBuilder.prototype.addPoint=function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),a=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(a,Location.EXTERIOR,Location.INTERIOR)};OffsetCurveSetBuilder.prototype.addPolygon=function(e){var t=this,a=this._distance,l=Position$1.LEFT;this._distance<0&&(a=-this._distance,l=Position$1.RIGHT);var h=e.getExteriorRing(),g=CoordinateArrays.removeRepeatedPoints(h.getCoordinates());if(this._distance<0&&this.isErodedCompletely(h,this._distance)||this._distance<=0&&g.length<3)return null;this.addPolygonRing(g,a,l,Location.EXTERIOR,Location.INTERIOR);for(var p=0;p<e.getNumInteriorRing();p++){var y=e.getInteriorRingN(p),b=CoordinateArrays.removeRepeatedPoints(y.getCoordinates());t._distance>0&&t.isErodedCompletely(y,-t._distance)||t.addPolygonRing(b,a,Position$1.opposite(l),Location.INTERIOR,Location.EXTERIOR)}};OffsetCurveSetBuilder.prototype.isTriangleErodedCompletely=function(e,t){var a=new Triangle$1(e[0],e[1],e[2]),l=a.inCentre(),h=CGAlgorithms.distancePointLine(l,a.p0,a.p1);return h<Math.abs(t)};OffsetCurveSetBuilder.prototype.addLineString=function(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=CoordinateArrays.removeRepeatedPoints(e.getCoordinates()),a=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(a,Location.EXTERIOR,Location.INTERIOR)};OffsetCurveSetBuilder.prototype.addCurve=function(e,t,a){if(e===null||e.length<2)return null;var l=new NodedSegmentString(e,new Label(0,Location.BOUNDARY,t,a));this._curveList.add(l)};OffsetCurveSetBuilder.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};OffsetCurveSetBuilder.prototype.addPolygonRing=function(e,t,a,l,h){if(t===0&&e.length<LinearRing.MINIMUM_VALID_SIZE)return null;var g=l,p=h;e.length>=LinearRing.MINIMUM_VALID_SIZE&&CGAlgorithms.isCCW(e)&&(g=h,p=l,a=Position$1.opposite(a));var y=this._curveBuilder.getRingCurve(e,a,t);this.addCurve(y,g,p)};OffsetCurveSetBuilder.prototype.add=function(e){if(e.isEmpty())return null;e instanceof Polygon?this.addPolygon(e):e instanceof LineString?this.addLineString(e):e instanceof Point$3?this.addPoint(e):e instanceof MultiPoint?this.addCollection(e):e instanceof MultiLineString?this.addCollection(e):e instanceof MultiPolygon?this.addCollection(e):e instanceof GeometryCollection&&this.addCollection(e)};OffsetCurveSetBuilder.prototype.isErodedCompletely=function(e,t){var a=e.getCoordinates();if(a.length<4)return t<0;if(a.length===4)return this.isTriangleErodedCompletely(a,t);var l=e.getEnvelopeInternal(),h=Math.min(l.getHeight(),l.getWidth());return t<0&&2*Math.abs(t)>h};OffsetCurveSetBuilder.prototype.addCollection=function(e){for(var t=this,a=0;a<e.getNumGeometries();a++){var l=e.getGeometryN(a);t.add(l)}};OffsetCurveSetBuilder.prototype.interfaces_=function(){return[]};OffsetCurveSetBuilder.prototype.getClass=function(){return OffsetCurveSetBuilder};var PointOnGeometryLocator=function(){};PointOnGeometryLocator.prototype.locate=function(e){};PointOnGeometryLocator.prototype.interfaces_=function(){return[]};PointOnGeometryLocator.prototype.getClass=function(){return PointOnGeometryLocator};var GeometryCollectionIterator=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()};GeometryCollectionIterator.prototype.next=function(){if(this._atStart)return this._atStart=!1,GeometryCollectionIterator.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new NoSuchElementException;var e=this._parent.getGeometryN(this._index++);return e instanceof GeometryCollection?(this._subcollectionIterator=new GeometryCollectionIterator(e),this._subcollectionIterator.next()):e};GeometryCollectionIterator.prototype.remove=function(){throw new Error(this.getClass().getName())};GeometryCollectionIterator.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};GeometryCollectionIterator.prototype.interfaces_=function(){return[Iterator]};GeometryCollectionIterator.prototype.getClass=function(){return GeometryCollectionIterator};GeometryCollectionIterator.isAtomic=function(e){return!(e instanceof GeometryCollection)};var SimplePointInAreaLocator=function(){this._geom=null;var e=arguments[0];this._geom=e};SimplePointInAreaLocator.prototype.locate=function(e){return SimplePointInAreaLocator.locate(e,this._geom)};SimplePointInAreaLocator.prototype.interfaces_=function(){return[PointOnGeometryLocator]};SimplePointInAreaLocator.prototype.getClass=function(){return SimplePointInAreaLocator};SimplePointInAreaLocator.isPointInRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?CGAlgorithms.isPointInRing(e,t.getCoordinates()):!1};SimplePointInAreaLocator.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var a=t.getExteriorRing();if(!SimplePointInAreaLocator.isPointInRing(e,a))return!1;for(var l=0;l<t.getNumInteriorRing();l++){var h=t.getInteriorRingN(l);if(SimplePointInAreaLocator.isPointInRing(e,h))return!1}return!0};SimplePointInAreaLocator.containsPoint=function(e,t){if(t instanceof Polygon)return SimplePointInAreaLocator.containsPointInPolygon(e,t);if(t instanceof GeometryCollection)for(var a=new GeometryCollectionIterator(t);a.hasNext();){var l=a.next();if(l!==t&&SimplePointInAreaLocator.containsPoint(e,l))return!0}return!1};SimplePointInAreaLocator.locate=function(e,t){return t.isEmpty()?Location.EXTERIOR:SimplePointInAreaLocator.containsPoint(e,t)?Location.INTERIOR:Location.EXTERIOR};var EdgeEndStar=function(){this._edgeMap=new TreeMap,this._edgeList=null,this._ptInAreaLocation=[Location.NONE,Location.NONE]};EdgeEndStar.prototype.getNextCW=function(e){this.getEdges();var t=this._edgeList.indexOf(e),a=t-1;return t===0&&(a=this._edgeList.size()-1),this._edgeList.get(a)};EdgeEndStar.prototype.propagateSideLabels=function(e){for(var t=Location.NONE,a=this.iterator();a.hasNext();){var l=a.next(),h=l.getLabel();h.isArea(e)&&h.getLocation(e,Position$1.LEFT)!==Location.NONE&&(t=h.getLocation(e,Position$1.LEFT))}if(t===Location.NONE)return null;for(var g=t,p=this.iterator();p.hasNext();){var y=p.next(),b=y.getLabel();if(b.getLocation(e,Position$1.ON)===Location.NONE&&b.setLocation(e,Position$1.ON,g),b.isArea(e)){var E=b.getLocation(e,Position$1.LEFT),C=b.getLocation(e,Position$1.RIGHT);if(C!==Location.NONE){if(C!==g)throw new TopologyException("side location conflict",y.getCoordinate());E===Location.NONE&&Assert.shouldNeverReachHere("found single null side (at "+y.getCoordinate()+")"),g=E}else Assert.isTrue(b.getLocation(e,Position$1.LEFT)===Location.NONE,"found single null side"),b.setLocation(e,Position$1.RIGHT,g),b.setLocation(e,Position$1.LEFT,g)}}};EdgeEndStar.prototype.getCoordinate=function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()};EdgeEndStar.prototype.print=function(e){System.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var a=t.next();a.print(e)}};EdgeEndStar.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};EdgeEndStar.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var a=t.size()-1,l=t.get(a).getLabel(),h=l.getLocation(e,Position$1.LEFT);Assert.isTrue(h!==Location.NONE,"Found unlabelled area edge");for(var g=h,p=this.iterator();p.hasNext();){var y=p.next(),b=y.getLabel();Assert.isTrue(b.isArea(e),"Found non-area edge");var E=b.getLocation(e,Position$1.LEFT),C=b.getLocation(e,Position$1.RIGHT);if(E===C||C!==g)return!1;g=E}return!0};EdgeEndStar.prototype.findIndex=function(e){var t=this;this.iterator();for(var a=0;a<this._edgeList.size();a++){var l=t._edgeList.get(a);if(l===e)return a}return-1};EdgeEndStar.prototype.iterator=function(){return this.getEdges().iterator()};EdgeEndStar.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new ArrayList(this._edgeMap.values())),this._edgeList};EdgeEndStar.prototype.getLocation=function(e,t,a){return this._ptInAreaLocation[e]===Location.NONE&&(this._ptInAreaLocation[e]=SimplePointInAreaLocator.locate(t,a[e].getGeometry())),this._ptInAreaLocation[e]};EdgeEndStar.prototype.toString=function(){var e=new StringBuffer;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append(`
`);for(var t=this.iterator();t.hasNext();){var a=t.next();e.append(a),e.append(`
`)}return e.toString()};EdgeEndStar.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();){var a=t.next();a.computeLabel(e)}};EdgeEndStar.prototype.computeLabelling=function(e){var t=this;this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var a=[!1,!1],l=this.iterator();l.hasNext();)for(var h=l.next(),g=h.getLabel(),p=0;p<2;p++)g.isLine(p)&&g.getLocation(p)===Location.BOUNDARY&&(a[p]=!0);for(var y=this.iterator();y.hasNext();)for(var b=y.next(),E=b.getLabel(),C=0;C<2;C++)if(E.isAnyNull(C)){var A=Location.NONE;if(a[C])A=Location.EXTERIOR;else{var B=b.getCoordinate();A=t.getLocation(C,B,e)}E.setAllLocationsIfNull(C,A)}};EdgeEndStar.prototype.getDegree=function(){return this._edgeMap.size()};EdgeEndStar.prototype.insertEdgeEnd=function(e,t){this._edgeMap.put(e,t),this._edgeList=null};EdgeEndStar.prototype.interfaces_=function(){return[]};EdgeEndStar.prototype.getClass=function(){return EdgeEndStar};var DirectedEdgeStar=function(n){function e(){n.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var a=this;this.getResultAreaEdges();for(var l=null,h=null,g=this._SCANNING_FOR_INCOMING,p=0;p<this._resultAreaEdgeList.size();p++){var y=a._resultAreaEdgeList.get(p),b=y.getSym();if(y.getLabel().isArea())switch(l===null&&y.isInResult()&&(l=y),g){case a._SCANNING_FOR_INCOMING:if(!b.isInResult())continue;h=b,g=a._LINKING_TO_OUTGOING;break;case a._LINKING_TO_OUTGOING:if(!y.isInResult())continue;h.setNext(y),g=a._SCANNING_FOR_INCOMING;break}}if(g===this._LINKING_TO_OUTGOING){if(l===null)throw new TopologyException("no outgoing dirEdge found",this.getCoordinate());Assert.isTrue(l.isInResult(),"unable to link last incoming dirEdge"),h.setNext(l)}},e.prototype.insert=function(a){var l=a;this.insertEdgeEnd(l,l)},e.prototype.getRightmostEdge=function(){var a=this.getEdges(),l=a.size();if(l<1)return null;var h=a.get(0);if(l===1)return h;var g=a.get(l-1),p=h.getQuadrant(),y=g.getQuadrant();return Quadrant.isNorthern(p)&&Quadrant.isNorthern(y)?h:!Quadrant.isNorthern(p)&&!Quadrant.isNorthern(y)?g:h.getDy()!==0?h:g.getDy()!==0?g:(Assert.shouldNeverReachHere("found two horizontal edges incident on node"),null)},e.prototype.print=function(a){System.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var l=this.iterator();l.hasNext();){var h=l.next();a.print("out "),h.print(a),a.println(),a.print("in "),h.getSym().print(a),a.println()}},e.prototype.getResultAreaEdges=function(){var a=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new ArrayList;for(var l=this.iterator();l.hasNext();){var h=l.next();(h.isInResult()||h.getSym().isInResult())&&a._resultAreaEdgeList.add(h)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(a){for(var l=this.iterator();l.hasNext();){var h=l.next(),g=h.getLabel();g.setAllLocationsIfNull(0,a.getLocation(0)),g.setAllLocationsIfNull(1,a.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){var a=this;this.getEdges();for(var l=null,h=null,g=this._edgeList.size()-1;g>=0;g--){var p=a._edgeList.get(g),y=p.getSym();h===null&&(h=y),l!==null&&y.setNext(l),l=p}h.setNext(l)},e.prototype.computeDepths=function(){var a=this;if(arguments.length===1){var l=arguments[0],h=this.findIndex(l),g=l.getDepth(Position$1.LEFT),p=l.getDepth(Position$1.RIGHT),y=this.computeDepths(h+1,this._edgeList.size(),g),b=this.computeDepths(0,h,y);if(b!==p)throw new TopologyException("depth mismatch at "+l.getCoordinate())}else if(arguments.length===3){for(var E=arguments[0],C=arguments[1],A=arguments[2],B=A,M=E;M<C;M++){var N=a._edgeList.get(M);N.setEdgeDepths(Position$1.RIGHT,B),B=N.getDepth(Position$1.LEFT)}return B}},e.prototype.mergeSymLabels=function(){for(var a=this.iterator();a.hasNext();){var l=a.next(),h=l.getLabel();h.merge(l.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(a){for(var l=this,h=null,g=null,p=this._SCANNING_FOR_INCOMING,y=this._resultAreaEdgeList.size()-1;y>=0;y--){var b=l._resultAreaEdgeList.get(y),E=b.getSym();switch(h===null&&b.getEdgeRing()===a&&(h=b),p){case l._SCANNING_FOR_INCOMING:if(E.getEdgeRing()!==a)continue;g=E,p=l._LINKING_TO_OUTGOING;break;case l._LINKING_TO_OUTGOING:if(b.getEdgeRing()!==a)continue;g.setNextMin(b),p=l._SCANNING_FOR_INCOMING;break}}p===this._LINKING_TO_OUTGOING&&(Assert.isTrue(h!==null,"found null for first outgoing dirEdge"),Assert.isTrue(h.getEdgeRing()===a,"unable to link last incoming dirEdge"),g.setNextMin(h))},e.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var a=0,l=this.iterator();l.hasNext();){var h=l.next();h.isInResult()&&a++}return a}else if(arguments.length===1){for(var g=arguments[0],p=0,y=this.iterator();y.hasNext();){var b=y.next();b.getEdgeRing()===g&&p++}return p}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var a=Location.NONE,l=this.iterator();l.hasNext();){var h=l.next(),g=h.getSym();if(!h.isLineEdge()){if(h.isInResult()){a=Location.INTERIOR;break}if(g.isInResult()){a=Location.EXTERIOR;break}}}if(a===Location.NONE)return null;for(var p=a,y=this.iterator();y.hasNext();){var b=y.next(),E=b.getSym();b.isLineEdge()?b.getEdge().setCovered(p===Location.INTERIOR):(b.isInResult()&&(p=Location.EXTERIOR),E.isInResult()&&(p=Location.INTERIOR))}},e.prototype.computeLabelling=function(a){var l=this;n.prototype.computeLabelling.call(this,a),this._label=new Label(Location.NONE);for(var h=this.iterator();h.hasNext();)for(var g=h.next(),p=g.getEdge(),y=p.getLabel(),b=0;b<2;b++){var E=y.getLocation(b);(E===Location.INTERIOR||E===Location.BOUNDARY)&&l._label.setLocation(b,Location.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(EdgeEndStar),OverlayNodeFactory=function(n){function e(){n.apply(this,arguments)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.createNode=function(a){return new Node$3(a,new DirectedEdgeStar)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(NodeFactory),OrientedCoordinateArray=function n(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=n.orientation(e)};OrientedCoordinateArray.prototype.compareTo=function(e){var t=e,a=OrientedCoordinateArray.compareOriented(this._pts,this._orientation,t._pts,t._orientation);return a};OrientedCoordinateArray.prototype.interfaces_=function(){return[Comparable]};OrientedCoordinateArray.prototype.getClass=function(){return OrientedCoordinateArray};OrientedCoordinateArray.orientation=function(e){return CoordinateArrays.increasingDirection(e)===1};OrientedCoordinateArray.compareOriented=function(e,t,a,l){for(var h=t?1:-1,g=l?1:-1,p=t?e.length:-1,y=l?a.length:-1,b=t?0:e.length-1,E=l?0:a.length-1;;){var C=e[b].compareTo(a[E]);if(C!==0)return C;b+=h,E+=g;var A=b===p,B=E===y;if(A&&!B)return-1;if(!A&&B)return 1;if(A&&B)return 0}};var EdgeList=function(){this._edges=new ArrayList,this._ocaMap=new TreeMap};EdgeList.prototype.print=function(e){var t=this;e.print("MULTILINESTRING ( ");for(var a=0;a<this._edges.size();a++){var l=t._edges.get(a);a>0&&e.print(","),e.print("(");for(var h=l.getCoordinates(),g=0;g<h.length;g++)g>0&&e.print(","),e.print(h[g].x+" "+h[g].y);e.println(")")}e.print(")  ")};EdgeList.prototype.addAll=function(e){for(var t=this,a=e.iterator();a.hasNext();)t.add(a.next())};EdgeList.prototype.findEdgeIndex=function(e){for(var t=this,a=0;a<this._edges.size();a++)if(t._edges.get(a).equals(e))return a;return-1};EdgeList.prototype.iterator=function(){return this._edges.iterator()};EdgeList.prototype.getEdges=function(){return this._edges};EdgeList.prototype.get=function(e){return this._edges.get(e)};EdgeList.prototype.findEqualEdge=function(e){var t=new OrientedCoordinateArray(e.getCoordinates()),a=this._ocaMap.get(t);return a};EdgeList.prototype.add=function(e){this._edges.add(e);var t=new OrientedCoordinateArray(e.getCoordinates());this._ocaMap.put(t,e)};EdgeList.prototype.interfaces_=function(){return[]};EdgeList.prototype.getClass=function(){return EdgeList};var SegmentIntersector=function(){};SegmentIntersector.prototype.processIntersections=function(e,t,a,l){};SegmentIntersector.prototype.isDone=function(){};SegmentIntersector.prototype.interfaces_=function(){return[]};SegmentIntersector.prototype.getClass=function(){return SegmentIntersector};var IntersectionAdder=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e};IntersectionAdder.prototype.isTrivialIntersection=function(e,t,a,l){if(e===a&&this._li.getIntersectionNum()===1){if(IntersectionAdder.isAdjacentSegments(t,l))return!0;if(e.isClosed()){var h=e.size()-1;if(t===0&&l===h||l===0&&t===h)return!0}}return!1};IntersectionAdder.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};IntersectionAdder.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};IntersectionAdder.prototype.getLineIntersector=function(){return this._li};IntersectionAdder.prototype.hasProperIntersection=function(){return this._hasProper};IntersectionAdder.prototype.processIntersections=function(e,t,a,l){if(e===a&&t===l)return null;this.numTests++;var h=e.getCoordinates()[t],g=e.getCoordinates()[t+1],p=a.getCoordinates()[l],y=a.getCoordinates()[l+1];this._li.computeIntersection(h,g,p,y),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,a,l)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),a.addIntersections(this._li,l,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};IntersectionAdder.prototype.hasIntersection=function(){return this._hasIntersection};IntersectionAdder.prototype.isDone=function(){return!1};IntersectionAdder.prototype.hasInteriorIntersection=function(){return this._hasInterior};IntersectionAdder.prototype.interfaces_=function(){return[SegmentIntersector]};IntersectionAdder.prototype.getClass=function(){return IntersectionAdder};IntersectionAdder.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var EdgeIntersection=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],a=arguments[2];this.coord=new Coordinate(e),this.segmentIndex=t,this.dist=a};EdgeIntersection.prototype.getSegmentIndex=function(){return this.segmentIndex};EdgeIntersection.prototype.getCoordinate=function(){return this.coord};EdgeIntersection.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)};EdgeIntersection.prototype.compareTo=function(e){var t=e;return this.compare(t.segmentIndex,t.dist)};EdgeIntersection.prototype.isEndPoint=function(e){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===e};EdgeIntersection.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};EdgeIntersection.prototype.getDistance=function(){return this.dist};EdgeIntersection.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0};EdgeIntersection.prototype.interfaces_=function(){return[Comparable]};EdgeIntersection.prototype.getClass=function(){return EdgeIntersection};var EdgeIntersectionList=function(){this._nodeMap=new TreeMap,this.edge=null;var e=arguments[0];this.edge=e};EdgeIntersectionList.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var a=t.next();a.print(e)}};EdgeIntersectionList.prototype.iterator=function(){return this._nodeMap.values().iterator()};EdgeIntersectionList.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints();for(var a=this.iterator(),l=a.next();a.hasNext();){var h=a.next(),g=t.createSplitEdge(l,h);e.add(g),l=h}};EdgeIntersectionList.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)};EdgeIntersectionList.prototype.createSplitEdge=function(e,t){var a=this,l=t.segmentIndex-e.segmentIndex+2,h=this.edge.pts[t.segmentIndex],g=t.dist>0||!t.coord.equals2D(h);g||l--;var p=new Array(l).fill(null),y=0;p[y++]=new Coordinate(e.coord);for(var b=e.segmentIndex+1;b<=t.segmentIndex;b++)p[y++]=a.edge.pts[b];return g&&(p[y]=t.coord),new Edge(p,new Label(this.edge._label))};EdgeIntersectionList.prototype.add=function(e,t,a){var l=new EdgeIntersection(e,t,a),h=this._nodeMap.get(l);return h!==null?h:(this._nodeMap.put(l,l),l)};EdgeIntersectionList.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();){var a=t.next();if(a.coord.equals(e))return!0}return!1};EdgeIntersectionList.prototype.interfaces_=function(){return[]};EdgeIntersectionList.prototype.getClass=function(){return EdgeIntersectionList};var MonotoneChainIndexer=function(){};MonotoneChainIndexer.prototype.getChainStartIndices=function(e){var t=this,a=0,l=new ArrayList;l.add(new Integer(a));do{var h=t.findChainEnd(e,a);l.add(new Integer(h)),a=h}while(a<e.length-1);var g=MonotoneChainIndexer.toIntArray(l);return g};MonotoneChainIndexer.prototype.findChainEnd=function(e,t){for(var a=Quadrant.quadrant(e[t],e[t+1]),l=t+1;l<e.length;){var h=Quadrant.quadrant(e[l-1],e[l]);if(h!==a)break;l++}return l-1};MonotoneChainIndexer.prototype.interfaces_=function(){return[]};MonotoneChainIndexer.prototype.getClass=function(){return MonotoneChainIndexer};MonotoneChainIndexer.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),a=0;a<t.length;a++)t[a]=e.get(a).intValue();return t};var MonotoneChainEdge=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Envelope,this.env2=new Envelope;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new MonotoneChainIndexer;this.startIndex=t.getChainStartIndices(this.pts)};MonotoneChainEdge.prototype.getCoordinates=function(){return this.pts};MonotoneChainEdge.prototype.getMaxX=function(e){var t=this.pts[this.startIndex[e]].x,a=this.pts[this.startIndex[e+1]].x;return t>a?t:a};MonotoneChainEdge.prototype.getMinX=function(e){var t=this.pts[this.startIndex[e]].x,a=this.pts[this.startIndex[e+1]].x;return t<a?t:a};MonotoneChainEdge.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var e=arguments[0],t=arguments[1],a=arguments[2],l=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[a],t.startIndex[a+1],l)}else if(arguments.length===6){var h=arguments[0],g=arguments[1],p=arguments[2],y=arguments[3],b=arguments[4],E=arguments[5],C=this.pts[h],A=this.pts[g],B=p.pts[y],M=p.pts[b];if(g-h===1&&b-y===1)return E.addIntersections(this.e,h,p.e,y),null;if(this.env1.init(C,A),this.env2.init(B,M),!this.env1.intersects(this.env2))return null;var N=Math.trunc((h+g)/2),Z=Math.trunc((y+b)/2);h<N&&(y<Z&&this.computeIntersectsForChain(h,N,p,y,Z,E),Z<b&&this.computeIntersectsForChain(h,N,p,Z,b,E)),N<g&&(y<Z&&this.computeIntersectsForChain(N,g,p,y,Z,E),Z<b&&this.computeIntersectsForChain(N,g,p,Z,b,E))}};MonotoneChainEdge.prototype.getStartIndexes=function(){return this.startIndex};MonotoneChainEdge.prototype.computeIntersects=function(e,t){for(var a=this,l=0;l<this.startIndex.length-1;l++)for(var h=0;h<e.startIndex.length-1;h++)a.computeIntersectsForChain(l,e,h,t)};MonotoneChainEdge.prototype.interfaces_=function(){return[]};MonotoneChainEdge.prototype.getClass=function(){return MonotoneChainEdge};var Depth=function n(){var e=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var a=0;a<3;a++)e._depth[t][a]=n.NULL_VALUE},staticAccessors$31={NULL_VALUE:{configurable:!0}};Depth.prototype.getDepth=function(e,t){return this._depth[e][t]};Depth.prototype.setDepth=function(e,t,a){this._depth[e][t]=a};Depth.prototype.isNull=function(){var e=this;if(arguments.length===0){for(var t=0;t<2;t++)for(var a=0;a<3;a++)if(e._depth[t][a]!==Depth.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var l=arguments[0];return this._depth[l][1]===Depth.NULL_VALUE}else if(arguments.length===2){var h=arguments[0],g=arguments[1];return this._depth[h][g]===Depth.NULL_VALUE}};Depth.prototype.normalize=function(){for(var e=this,t=0;t<2;t++)if(!e.isNull(t)){var a=e._depth[t][1];e._depth[t][2]<a&&(a=e._depth[t][2]),a<0&&(a=0);for(var l=1;l<3;l++){var h=0;e._depth[t][l]>a&&(h=1),e._depth[t][l]=h}}};Depth.prototype.getDelta=function(e){return this._depth[e][Position$1.RIGHT]-this._depth[e][Position$1.LEFT]};Depth.prototype.getLocation=function(e,t){return this._depth[e][t]<=0?Location.EXTERIOR:Location.INTERIOR};Depth.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};Depth.prototype.add=function(){var e=this;if(arguments.length===1)for(var t=arguments[0],a=0;a<2;a++)for(var l=1;l<3;l++){var h=t.getLocation(a,l);(h===Location.EXTERIOR||h===Location.INTERIOR)&&(e.isNull(a,l)?e._depth[a][l]=Depth.depthAtLocation(h):e._depth[a][l]+=Depth.depthAtLocation(h))}else if(arguments.length===3){var g=arguments[0],p=arguments[1],y=arguments[2];y===Location.INTERIOR&&this._depth[g][p]++}};Depth.prototype.interfaces_=function(){return[]};Depth.prototype.getClass=function(){return Depth};Depth.depthAtLocation=function(e){return e===Location.EXTERIOR?0:e===Location.INTERIOR?1:Depth.NULL_VALUE};staticAccessors$31.NULL_VALUE.get=function(){return-1};Object.defineProperties(Depth,staticAccessors$31);var Edge=function(n){function e(){if(n.call(this),this.pts=null,this._env=null,this.eiList=new EdgeIntersectionList(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Depth,this._depthDelta=0,arguments.length===1){var t=arguments[0];e.call(this,t,null)}else if(arguments.length===2){var a=arguments[0],l=arguments[1];this.pts=a,this._label=l}}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var a=new Array(2).fill(null);a[0]=this.pts[0],a[1]=this.pts[1];var l=new e(a,Label.toLineLabel(this._label));return l},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(a){this._isIsolated=a},e.prototype.setName=function(a){this._name=a},e.prototype.equals=function(a){var l=this;if(!(a instanceof e))return!1;var h=a;if(this.pts.length!==h.pts.length)return!1;for(var g=!0,p=!0,y=this.pts.length,b=0;b<this.pts.length;b++)if(l.pts[b].equals2D(h.pts[b])||(g=!1),l.pts[b].equals2D(h.pts[--y])||(p=!1),!g&&!p)return!1;return!0},e.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var a=arguments[0];return this.pts[a]}},e.prototype.print=function(a){var l=this;a.print("edge "+this._name+": "),a.print("LINESTRING (");for(var h=0;h<this.pts.length;h++)h>0&&a.print(","),a.print(l.pts[h].x+" "+l.pts[h].y);a.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(a){e.updateIM(this._label,a)},e.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(a){var l=this;a.print("edge "+this._name+": ");for(var h=this.pts.length-1;h>=0;h--)a.print(l.pts[h]+" ");a.println("")},e.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new MonotoneChainEdge(this)),this._mce},e.prototype.getEnvelope=function(){var a=this;if(this._env===null){this._env=new Envelope;for(var l=0;l<this.pts.length;l++)a._env.expandToInclude(a.pts[l])}return this._env},e.prototype.addIntersection=function(a,l,h,g){var p=new Coordinate(a.getIntersection(g)),y=l,b=a.getEdgeDistance(h,g),E=y+1;if(E<this.pts.length){var C=this.pts[E];p.equals2D(C)&&(y=E,b=0)}this.eiList.add(p,y,b)},e.prototype.toString=function(){var a=this,l=new StringBuffer;l.append("edge "+this._name+": "),l.append("LINESTRING (");for(var h=0;h<this.pts.length;h++)h>0&&l.append(","),l.append(a.pts[h].x+" "+a.pts[h].y);return l.append(")  "+this._label+" "+this._depthDelta),l.toString()},e.prototype.isPointwiseEqual=function(a){var l=this;if(this.pts.length!==a.pts.length)return!1;for(var h=0;h<this.pts.length;h++)if(!l.pts[h].equals2D(a.pts[h]))return!1;return!0},e.prototype.setDepthDelta=function(a){this._depthDelta=a},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(a,l,h){for(var g=this,p=0;p<a.getIntersectionNum();p++)g.addIntersection(a,l,h,p)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(arguments.length===2){var a=arguments[0],l=arguments[1];l.setAtLeastIfValid(a.getLocation(0,Position$1.ON),a.getLocation(1,Position$1.ON),1),a.isArea()&&(l.setAtLeastIfValid(a.getLocation(0,Position$1.LEFT),a.getLocation(1,Position$1.LEFT),2),l.setAtLeastIfValid(a.getLocation(0,Position$1.RIGHT),a.getLocation(1,Position$1.RIGHT),2))}else return n.prototype.updateIM.apply(this,arguments)},e}(GraphComponent),BufferBuilder=function(e){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new EdgeList,this._bufParams=e||null};BufferBuilder.prototype.setWorkingPrecisionModel=function(e){this._workingPrecisionModel=e};BufferBuilder.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(t!==null){var a=t.getLabel(),l=e.getLabel();t.isPointwiseEqual(e)||(l=new Label(e.getLabel()),l.flip()),a.merge(l);var h=BufferBuilder.depthDelta(l),g=t.getDepthDelta(),p=g+h;t.setDepthDelta(p)}else this._edgeList.add(e),e.setDepthDelta(BufferBuilder.depthDelta(e.getLabel()))};BufferBuilder.prototype.buildSubgraphs=function(e,t){for(var a=new ArrayList,l=e.iterator();l.hasNext();){var h=l.next(),g=h.getRightmostCoordinate(),p=new SubgraphDepthLocater(a),y=p.getDepth(g);h.computeDepth(y),h.findResultEdges(),a.add(h),t.add(h.getDirectedEdges(),h.getNodes())}};BufferBuilder.prototype.createSubgraphs=function(e){for(var t=new ArrayList,a=e.getNodes().iterator();a.hasNext();){var l=a.next();if(!l.isVisited()){var h=new BufferSubgraph;h.create(l),t.add(h)}}return Collections.sort(t,Collections.reverseOrder()),t};BufferBuilder.prototype.createEmptyResultGeometry=function(){var e=this._geomFact.createPolygon();return e};BufferBuilder.prototype.getNoder=function(e){if(this._workingNoder!==null)return this._workingNoder;var t=new MCIndexNoder,a=new RobustLineIntersector;return a.setPrecisionModel(e),t.setSegmentIntersector(new IntersectionAdder(a)),t};BufferBuilder.prototype.buffer=function(e,t){var a=this._workingPrecisionModel;a===null&&(a=e.getPrecisionModel()),this._geomFact=e.getFactory();var l=new OffsetCurveBuilder(a,this._bufParams),h=new OffsetCurveSetBuilder(e,t,l),g=h.getCurves();if(g.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(g,a),this._graph=new PlanarGraph(new OverlayNodeFactory),this._graph.addEdges(this._edgeList.getEdges());var p=this.createSubgraphs(this._graph),y=new PolygonBuilder(this._geomFact);this.buildSubgraphs(p,y);var b=y.getPolygons();if(b.size()<=0)return this.createEmptyResultGeometry();var E=this._geomFact.buildGeometry(b);return E};BufferBuilder.prototype.computeNodedEdges=function(e,t){var a=this,l=this.getNoder(t);l.computeNodes(e);for(var h=l.getNodedSubstrings(),g=h.iterator();g.hasNext();){var p=g.next(),y=p.getCoordinates();if(!(y.length===2&&y[0].equals2D(y[1]))){var b=p.getData(),E=new Edge(p.getCoordinates(),new Label(b));a.insertUniqueEdge(E)}}};BufferBuilder.prototype.setNoder=function(e){this._workingNoder=e};BufferBuilder.prototype.interfaces_=function(){return[]};BufferBuilder.prototype.getClass=function(){return BufferBuilder};BufferBuilder.depthDelta=function(e){var t=e.getLocation(0,Position$1.LEFT),a=e.getLocation(0,Position$1.RIGHT);return t===Location.INTERIOR&&a===Location.EXTERIOR?1:t===Location.EXTERIOR&&a===Location.INTERIOR?-1:0};BufferBuilder.convertSegStrings=function(e){for(var t=new GeometryFactory,a=new ArrayList;e.hasNext();){var l=e.next(),h=t.createLineString(l.getCoordinates());a.add(h)}return t.buildGeometry(a)};var ScaledNoder=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var e=arguments[0],t=arguments[1];this._noder=e,this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var a=arguments[0],l=arguments[1],h=arguments[2],g=arguments[3];this._noder=a,this._scaleFactor=l,this._offsetX=h,this._offsetY=g,this._isScaled=!this.isIntegerPrecision()}};ScaledNoder.prototype.rescale=function(){var e=this;if(hasInterface(arguments[0],Collection))for(var t=arguments[0],a=t.iterator();a.hasNext();){var l=a.next();e.rescale(l.getCoordinates())}else if(arguments[0]instanceof Array){for(var h=arguments[0],g=0;g<h.length;g++)h[g].x=h[g].x/e._scaleFactor+e._offsetX,h[g].y=h[g].y/e._scaleFactor+e._offsetY;h.length===2&&h[0].equals2D(h[1])&&System.out.println(h)}};ScaledNoder.prototype.scale=function(){var e=this;if(hasInterface(arguments[0],Collection)){for(var t=arguments[0],a=new ArrayList,l=t.iterator();l.hasNext();){var h=l.next();a.add(new NodedSegmentString(e.scale(h.getCoordinates()),h.getData()))}return a}else if(arguments[0]instanceof Array){for(var g=arguments[0],p=new Array(g.length).fill(null),y=0;y<g.length;y++)p[y]=new Coordinate(Math.round((g[y].x-e._offsetX)*e._scaleFactor),Math.round((g[y].y-e._offsetY)*e._scaleFactor),g[y].z);var b=CoordinateArrays.removeRepeatedPoints(p);return b}};ScaledNoder.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};ScaledNoder.prototype.getNodedSubstrings=function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e};ScaledNoder.prototype.computeNodes=function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)};ScaledNoder.prototype.interfaces_=function(){return[Noder]};ScaledNoder.prototype.getClass=function(){return ScaledNoder};var NodingValidator=function(){this._li=new RobustLineIntersector,this._segStrings=null;var e=arguments[0];this._segStrings=e},staticAccessors$33={fact:{configurable:!0}};NodingValidator.prototype.checkEndPtVertexIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var a=t.next(),l=a.getCoordinates();e.checkEndPtVertexIntersections(l[0],e._segStrings),e.checkEndPtVertexIntersections(l[l.length-1],e._segStrings)}else if(arguments.length===2){for(var h=arguments[0],g=arguments[1],p=g.iterator();p.hasNext();)for(var y=p.next(),b=y.getCoordinates(),E=1;E<b.length-1;E++)if(b[E].equals(h))throw new RuntimeException("found endpt/interior pt intersection at index "+E+" :pt "+h)}};NodingValidator.prototype.checkInteriorIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var a=t.next(),l=this._segStrings.iterator();l.hasNext();){var h=l.next();e.checkInteriorIntersections(a,h)}else if(arguments.length===2)for(var g=arguments[0],p=arguments[1],y=g.getCoordinates(),b=p.getCoordinates(),E=0;E<y.length-1;E++)for(var C=0;C<b.length-1;C++)e.checkInteriorIntersections(g,E,p,C);else if(arguments.length===4){var A=arguments[0],B=arguments[1],M=arguments[2],N=arguments[3];if(A===M&&B===N)return null;var Z=A.getCoordinates()[B],ee=A.getCoordinates()[B+1],F=M.getCoordinates()[N],O=M.getCoordinates()[N+1];if(this._li.computeIntersection(Z,ee,F,O),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Z,ee)||this.hasInteriorIntersection(this._li,F,O)))throw new RuntimeException("found non-noded intersection at "+Z+"-"+ee+" and "+F+"-"+O)}};NodingValidator.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};NodingValidator.prototype.checkCollapses=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var a=t.next();e.checkCollapses(a)}else if(arguments.length===1)for(var l=arguments[0],h=l.getCoordinates(),g=0;g<h.length-2;g++)e.checkCollapse(h[g],h[g+1],h[g+2])};NodingValidator.prototype.hasInteriorIntersection=function(e,t,a){for(var l=0;l<e.getIntersectionNum();l++){var h=e.getIntersection(l);if(!(h.equals(t)||h.equals(a)))return!0}return!1};NodingValidator.prototype.checkCollapse=function(e,t,a){if(e.equals(a))throw new RuntimeException("found non-noded collapse at "+NodingValidator.fact.createLineString([e,t,a]))};NodingValidator.prototype.interfaces_=function(){return[]};NodingValidator.prototype.getClass=function(){return NodingValidator};staticAccessors$33.fact.get=function(){return new GeometryFactory};Object.defineProperties(NodingValidator,staticAccessors$33);var HotPixel=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],a=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=a,t<=0)throw new IllegalArgumentException("Scale factor must be non-zero");t!==1&&(this._pt=new Coordinate(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new Coordinate,this._p1Scaled=new Coordinate),this.initCorners(this._pt)},staticAccessors$34={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};HotPixel.prototype.intersectsScaled=function(e,t){var a=Math.min(e.x,t.x),l=Math.max(e.x,t.x),h=Math.min(e.y,t.y),g=Math.max(e.y,t.y),p=this._maxx<a||this._minx>l||this._maxy<h||this._miny>g;if(p)return!1;var y=this.intersectsToleranceSquare(e,t);return Assert.isTrue(!(p&&y),"Found bad envelope test"),y};HotPixel.prototype.initCorners=function(e){var t=.5;this._minx=e.x-t,this._maxx=e.x+t,this._miny=e.y-t,this._maxy=e.y+t,this._corner[0]=new Coordinate(this._maxx,this._maxy),this._corner[1]=new Coordinate(this._minx,this._maxy),this._corner[2]=new Coordinate(this._minx,this._miny),this._corner[3]=new Coordinate(this._maxx,this._miny)};HotPixel.prototype.intersects=function(e,t){return this._scaleFactor===1?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};HotPixel.prototype.scale=function(e){return Math.round(e*this._scaleFactor)};HotPixel.prototype.getCoordinate=function(){return this._originalPt};HotPixel.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)};HotPixel.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var e=HotPixel.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Envelope(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv};HotPixel.prototype.intersectsPixelClosure=function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.hasIntersection()))};HotPixel.prototype.intersectsToleranceSquare=function(e,t){var a=!1,l=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(a=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(l=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.isProper())||a&&l||e.equals(this._pt)||t.equals(this._pt))};HotPixel.prototype.addSnappedNode=function(e,t){var a=e.getCoordinate(t),l=e.getCoordinate(t+1);return this.intersects(a,l)?(e.addIntersection(this.getCoordinate(),t),!0):!1};HotPixel.prototype.interfaces_=function(){return[]};HotPixel.prototype.getClass=function(){return HotPixel};staticAccessors$34.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(HotPixel,staticAccessors$34);var MonotoneChainSelectAction=function(){this.tempEnv1=new Envelope,this.selectedSegment=new LineSegment};MonotoneChainSelectAction.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var e=arguments[0],t=arguments[1];e.getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}};MonotoneChainSelectAction.prototype.interfaces_=function(){return[]};MonotoneChainSelectAction.prototype.getClass=function(){return MonotoneChainSelectAction};var MCIndexPointSnapper=function(){this._index=null;var e=arguments[0];this._index=e},staticAccessors$35={HotPixelSnapAction:{configurable:!0}};MCIndexPointSnapper.prototype.snap=function(){if(arguments.length===1){var e=arguments[0];return this.snap(e,null,-1)}else if(arguments.length===3){var t=arguments[0],a=arguments[1],l=arguments[2],h=t.getSafeEnvelope(),g=new HotPixelSnapAction(t,a,l);return this._index.query(h,{interfaces_:function(){return[ItemVisitor]},visitItem:function(p){var y=p;y.select(h,g)}}),g.isNodeAdded()}};MCIndexPointSnapper.prototype.interfaces_=function(){return[]};MCIndexPointSnapper.prototype.getClass=function(){return MCIndexPointSnapper};staticAccessors$35.HotPixelSnapAction.get=function(){return HotPixelSnapAction};Object.defineProperties(MCIndexPointSnapper,staticAccessors$35);var HotPixelSnapAction=function(n){function e(){n.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],a=arguments[1],l=arguments[2];this._hotPixel=t,this._parentEdge=a,this._hotPixelVertexIndex=l}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(arguments.length===2){var a=arguments[0],l=arguments[1],h=a.getContext();if(this._parentEdge!==null&&h===this._parentEdge&&l===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(h,l)}else return n.prototype.select.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(MonotoneChainSelectAction),InteriorIntersectionFinderAdder=function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new ArrayList};InteriorIntersectionFinderAdder.prototype.processIntersections=function(e,t,a,l){var h=this;if(e===a&&t===l)return null;var g=e.getCoordinates()[t],p=e.getCoordinates()[t+1],y=a.getCoordinates()[l],b=a.getCoordinates()[l+1];if(this._li.computeIntersection(g,p,y,b),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var E=0;E<this._li.getIntersectionNum();E++)h._interiorIntersections.add(h._li.getIntersection(E));e.addIntersections(this._li,t,0),a.addIntersections(this._li,l,1)}};InteriorIntersectionFinderAdder.prototype.isDone=function(){return!1};InteriorIntersectionFinderAdder.prototype.getInteriorIntersections=function(){return this._interiorIntersections};InteriorIntersectionFinderAdder.prototype.interfaces_=function(){return[SegmentIntersector]};InteriorIntersectionFinderAdder.prototype.getClass=function(){return InteriorIntersectionFinderAdder};var MCIndexSnapRounder=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new RobustLineIntersector,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()};MCIndexSnapRounder.prototype.checkCorrectness=function(e){var t=NodedSegmentString.getNodedSubstrings(e),a=new NodingValidator(t);try{a.checkValid()}catch(l){if(l instanceof Exception)l.printStackTrace();else throw l}finally{}};MCIndexSnapRounder.prototype.getNodedSubstrings=function(){return NodedSegmentString.getNodedSubstrings(this._nodedSegStrings)};MCIndexSnapRounder.prototype.snapRound=function(e,t){var a=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(a),this.computeVertexSnaps(e)};MCIndexSnapRounder.prototype.findInteriorIntersections=function(e,t){var a=new InteriorIntersectionFinderAdder(t);return this._noder.setSegmentIntersector(a),this._noder.computeNodes(e),a.getInteriorIntersections()};MCIndexSnapRounder.prototype.computeVertexSnaps=function(){var e=this;if(hasInterface(arguments[0],Collection))for(var t=arguments[0],a=t.iterator();a.hasNext();){var l=a.next();e.computeVertexSnaps(l)}else if(arguments[0]instanceof NodedSegmentString)for(var h=arguments[0],g=h.getCoordinates(),p=0;p<g.length;p++){var y=new HotPixel(g[p],e._scaleFactor,e._li),b=e._pointSnapper.snap(y,h,p);b&&h.addIntersection(g[p],p)}};MCIndexSnapRounder.prototype.computeNodes=function(e){this._nodedSegStrings=e,this._noder=new MCIndexNoder,this._pointSnapper=new MCIndexPointSnapper(this._noder.getIndex()),this.snapRound(e,this._li)};MCIndexSnapRounder.prototype.computeIntersectionSnaps=function(e){for(var t=this,a=e.iterator();a.hasNext();){var l=a.next(),h=new HotPixel(l,t._scaleFactor,t._li);t._pointSnapper.snap(h)}};MCIndexSnapRounder.prototype.interfaces_=function(){return[Noder]};MCIndexSnapRounder.prototype.getClass=function(){return MCIndexSnapRounder};var BufferOp=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new BufferParameters,this._resultGeometry=null,this._saveException=null,arguments.length===1){var e=arguments[0];this._argGeom=e}else if(arguments.length===2){var t=arguments[0],a=arguments[1];this._argGeom=t,this._bufParams=a}},staticAccessors$32={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};BufferOp.prototype.bufferFixedPrecision=function(e){var t=new ScaledNoder(new MCIndexSnapRounder(new PrecisionModel(1)),e.getScale()),a=new BufferBuilder(this._bufParams);a.setWorkingPrecisionModel(e),a.setNoder(t),this._resultGeometry=a.buffer(this._argGeom,this._distance)};BufferOp.prototype.bufferReducedPrecision=function(){var e=this;if(arguments.length===0){for(var t=BufferOp.MAX_PRECISION_DIGITS;t>=0;t--){try{e.bufferReducedPrecision(t)}catch(g){if(g instanceof TopologyException)e._saveException=g;else throw g}finally{}if(e._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var a=arguments[0],l=BufferOp.precisionScaleFactor(this._argGeom,this._distance,a),h=new PrecisionModel(l);this.bufferFixedPrecision(h)}};BufferOp.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===PrecisionModel.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()};BufferOp.prototype.setQuadrantSegments=function(e){this._bufParams.setQuadrantSegments(e)};BufferOp.prototype.bufferOriginalPrecision=function(){try{var e=new BufferBuilder(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(t){if(t instanceof RuntimeException)this._saveException=t;else throw t}finally{}};BufferOp.prototype.getResultGeometry=function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry};BufferOp.prototype.setEndCapStyle=function(e){this._bufParams.setEndCapStyle(e)};BufferOp.prototype.interfaces_=function(){return[]};BufferOp.prototype.getClass=function(){return BufferOp};BufferOp.bufferOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],a=new BufferOp(e),l=a.getResultGeometry(t);return l}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Geometry&&typeof arguments[1]=="number"){var h=arguments[0],g=arguments[1],p=arguments[2],y=new BufferOp(h);y.setQuadrantSegments(p);var b=y.getResultGeometry(g);return b}else if(arguments[2]instanceof BufferParameters&&arguments[0]instanceof Geometry&&typeof arguments[1]=="number"){var E=arguments[0],C=arguments[1],A=arguments[2],B=new BufferOp(E,A),M=B.getResultGeometry(C);return M}}else if(arguments.length===4){var N=arguments[0],Z=arguments[1],ee=arguments[2],F=arguments[3],O=new BufferOp(N);O.setQuadrantSegments(ee),O.setEndCapStyle(F);var k=O.getResultGeometry(Z);return k}};BufferOp.precisionScaleFactor=function(e,t,a){var l=e.getEnvelopeInternal(),h=MathUtil.max(Math.abs(l.getMaxX()),Math.abs(l.getMaxY()),Math.abs(l.getMinX()),Math.abs(l.getMinY())),g=t>0?t:0,p=h+2*g,y=Math.trunc(Math.log(p)/Math.log(10)+1),b=a-y,E=Math.pow(10,b);return E};staticAccessors$32.CAP_ROUND.get=function(){return BufferParameters.CAP_ROUND};staticAccessors$32.CAP_BUTT.get=function(){return BufferParameters.CAP_FLAT};staticAccessors$32.CAP_FLAT.get=function(){return BufferParameters.CAP_FLAT};staticAccessors$32.CAP_SQUARE.get=function(){return BufferParameters.CAP_SQUARE};staticAccessors$32.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(BufferOp,staticAccessors$32);var PointPairDistance=function(){this._pt=[new Coordinate,new Coordinate],this._distance=Double.NaN,this._isNull=!0};PointPairDistance.prototype.getCoordinates=function(){return this._pt};PointPairDistance.prototype.getCoordinate=function(e){return this._pt[e]};PointPairDistance.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],a=arguments[1];if(this._isNull)return this.initialize(t,a),null;var l=t.distance(a);l<this._distance&&this.initialize(t,a,l)}};PointPairDistance.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var a=arguments[0],l=arguments[1],h=arguments[2];this._pt[0].setCoordinate(a),this._pt[1].setCoordinate(l),this._distance=h,this._isNull=!1}};PointPairDistance.prototype.getDistance=function(){return this._distance};PointPairDistance.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],a=arguments[1];if(this._isNull)return this.initialize(t,a),null;var l=t.distance(a);l>this._distance&&this.initialize(t,a,l)}};PointPairDistance.prototype.interfaces_=function(){return[]};PointPairDistance.prototype.getClass=function(){return PointPairDistance};var DistanceToPointFinder=function(){};DistanceToPointFinder.prototype.interfaces_=function(){return[]};DistanceToPointFinder.prototype.getClass=function(){return DistanceToPointFinder};DistanceToPointFinder.computeDistance=function(){if(arguments[2]instanceof PointPairDistance&&arguments[0]instanceof LineString&&arguments[1]instanceof Coordinate)for(var e=arguments[0],t=arguments[1],a=arguments[2],l=e.getCoordinates(),h=new LineSegment,g=0;g<l.length-1;g++){h.setCoordinates(l[g],l[g+1]);var p=h.closestPoint(t);a.setMinimum(p,t)}else if(arguments[2]instanceof PointPairDistance&&arguments[0]instanceof Polygon&&arguments[1]instanceof Coordinate){var y=arguments[0],b=arguments[1],E=arguments[2];DistanceToPointFinder.computeDistance(y.getExteriorRing(),b,E);for(var C=0;C<y.getNumInteriorRing();C++)DistanceToPointFinder.computeDistance(y.getInteriorRingN(C),b,E)}else if(arguments[2]instanceof PointPairDistance&&arguments[0]instanceof Geometry&&arguments[1]instanceof Coordinate){var A=arguments[0],B=arguments[1],M=arguments[2];if(A instanceof LineString)DistanceToPointFinder.computeDistance(A,B,M);else if(A instanceof Polygon)DistanceToPointFinder.computeDistance(A,B,M);else if(A instanceof GeometryCollection)for(var N=A,Z=0;Z<N.getNumGeometries();Z++){var ee=N.getGeometryN(Z);DistanceToPointFinder.computeDistance(ee,B,M)}else M.setMinimum(A.getCoordinate(),B)}else if(arguments[2]instanceof PointPairDistance&&arguments[0]instanceof LineSegment&&arguments[1]instanceof Coordinate){var F=arguments[0],O=arguments[1],k=arguments[2],H=F.closestPoint(O);k.setMinimum(H,O)}};var BufferCurveMaximumDistanceFinder=function(e){this._maxPtDist=new PointPairDistance,this._inputGeom=e||null},staticAccessors$36={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};BufferCurveMaximumDistanceFinder.prototype.computeMaxMidpointDistance=function(e){var t=new MaxMidpointDistanceFilter(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};BufferCurveMaximumDistanceFinder.prototype.computeMaxVertexDistance=function(e){var t=new MaxPointDistanceFilter(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};BufferCurveMaximumDistanceFinder.prototype.findDistance=function(e){return this.computeMaxVertexDistance(e),this.computeMaxMidpointDistance(e),this._maxPtDist.getDistance()};BufferCurveMaximumDistanceFinder.prototype.getDistancePoints=function(){return this._maxPtDist};BufferCurveMaximumDistanceFinder.prototype.interfaces_=function(){return[]};BufferCurveMaximumDistanceFinder.prototype.getClass=function(){return BufferCurveMaximumDistanceFinder};staticAccessors$36.MaxPointDistanceFilter.get=function(){return MaxPointDistanceFilter};staticAccessors$36.MaxMidpointDistanceFilter.get=function(){return MaxMidpointDistanceFilter};Object.defineProperties(BufferCurveMaximumDistanceFinder,staticAccessors$36);var MaxPointDistanceFilter=function(e){this._maxPtDist=new PointPairDistance,this._minPtDist=new PointPairDistance,this._geom=e||null};MaxPointDistanceFilter.prototype.filter=function(e){this._minPtDist.initialize(),DistanceToPointFinder.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};MaxPointDistanceFilter.prototype.getMaxPointDistance=function(){return this._maxPtDist};MaxPointDistanceFilter.prototype.interfaces_=function(){return[CoordinateFilter]};MaxPointDistanceFilter.prototype.getClass=function(){return MaxPointDistanceFilter};var MaxMidpointDistanceFilter=function(e){this._maxPtDist=new PointPairDistance,this._minPtDist=new PointPairDistance,this._geom=e||null};MaxMidpointDistanceFilter.prototype.filter=function(e,t){if(t===0)return null;var a=e.getCoordinate(t-1),l=e.getCoordinate(t),h=new Coordinate((a.x+l.x)/2,(a.y+l.y)/2);this._minPtDist.initialize(),DistanceToPointFinder.computeDistance(this._geom,h,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};MaxMidpointDistanceFilter.prototype.isDone=function(){return!1};MaxMidpointDistanceFilter.prototype.isGeometryChanged=function(){return!1};MaxMidpointDistanceFilter.prototype.getMaxPointDistance=function(){return this._maxPtDist};MaxMidpointDistanceFilter.prototype.interfaces_=function(){return[CoordinateSequenceFilter]};MaxMidpointDistanceFilter.prototype.getClass=function(){return MaxMidpointDistanceFilter};var PolygonExtracter=function(e){this._comps=e||null};PolygonExtracter.prototype.filter=function(e){e instanceof Polygon&&this._comps.add(e)};PolygonExtracter.prototype.interfaces_=function(){return[GeometryFilter]};PolygonExtracter.prototype.getClass=function(){return PolygonExtracter};PolygonExtracter.getPolygons=function(){if(arguments.length===1){var e=arguments[0];return PolygonExtracter.getPolygons(e,new ArrayList)}else if(arguments.length===2){var t=arguments[0],a=arguments[1];return t instanceof Polygon?a.add(t):t instanceof GeometryCollection&&t.apply(new PolygonExtracter(a)),a}};var LinearComponentExtracter=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var e=arguments[0];this._lines=e}else if(arguments.length===2){var t=arguments[0],a=arguments[1];this._lines=t,this._isForcedToLineString=a}};LinearComponentExtracter.prototype.filter=function(e){if(this._isForcedToLineString&&e instanceof LinearRing){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof LineString&&this._lines.add(e)};LinearComponentExtracter.prototype.setForceToLineString=function(e){this._isForcedToLineString=e};LinearComponentExtracter.prototype.interfaces_=function(){return[GeometryComponentFilter]};LinearComponentExtracter.prototype.getClass=function(){return LinearComponentExtracter};LinearComponentExtracter.getGeometry=function(){if(arguments.length===1){var e=arguments[0];return e.getFactory().buildGeometry(LinearComponentExtracter.getLines(e))}else if(arguments.length===2){var t=arguments[0],a=arguments[1];return t.getFactory().buildGeometry(LinearComponentExtracter.getLines(t,a))}};LinearComponentExtracter.getLines=function(){if(arguments.length===1){var e=arguments[0];return LinearComponentExtracter.getLines(e,!1)}else if(arguments.length===2){if(hasInterface(arguments[0],Collection)&&hasInterface(arguments[1],Collection)){for(var t=arguments[0],a=arguments[1],l=t.iterator();l.hasNext();){var h=l.next();LinearComponentExtracter.getLines(h,a)}return a}else if(arguments[0]instanceof Geometry&&typeof arguments[1]=="boolean"){var g=arguments[0],p=arguments[1],y=new ArrayList;return g.apply(new LinearComponentExtracter(y,p)),y}else if(arguments[0]instanceof Geometry&&hasInterface(arguments[1],Collection)){var b=arguments[0],E=arguments[1];return b instanceof LineString?E.add(b):b.apply(new LinearComponentExtracter(E)),E}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&hasInterface(arguments[0],Collection)&&hasInterface(arguments[1],Collection)){for(var C=arguments[0],A=arguments[1],B=arguments[2],M=C.iterator();M.hasNext();){var N=M.next();LinearComponentExtracter.getLines(N,A,B)}return A}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Geometry&&hasInterface(arguments[1],Collection)){var Z=arguments[0],ee=arguments[1],F=arguments[2];return Z.apply(new LinearComponentExtracter(ee,F)),ee}}};var PointLocator=function(){if(this._boundaryRule=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var e=arguments[0];if(e===null)throw new IllegalArgumentException("Rule must be non-null");this._boundaryRule=e}}};PointLocator.prototype.locateInternal=function(){var e=this;if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Polygon){var t=arguments[0],a=arguments[1];if(a.isEmpty())return Location.EXTERIOR;var l=a.getExteriorRing(),h=this.locateInPolygonRing(t,l);if(h===Location.EXTERIOR)return Location.EXTERIOR;if(h===Location.BOUNDARY)return Location.BOUNDARY;for(var g=0;g<a.getNumInteriorRing();g++){var p=a.getInteriorRingN(g),y=e.locateInPolygonRing(t,p);if(y===Location.INTERIOR)return Location.EXTERIOR;if(y===Location.BOUNDARY)return Location.BOUNDARY}return Location.INTERIOR}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof LineString){var b=arguments[0],E=arguments[1];if(!E.getEnvelopeInternal().intersects(b))return Location.EXTERIOR;var C=E.getCoordinates();return!E.isClosed()&&(b.equals(C[0])||b.equals(C[C.length-1]))?Location.BOUNDARY:CGAlgorithms.isOnLine(b,C)?Location.INTERIOR:Location.EXTERIOR}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Point$3){var A=arguments[0],B=arguments[1],M=B.getCoordinate();return M.equals2D(A)?Location.INTERIOR:Location.EXTERIOR}};PointLocator.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?CGAlgorithms.locatePointInRing(e,t.getCoordinates()):Location.EXTERIOR};PointLocator.prototype.intersects=function(e,t){return this.locate(e,t)!==Location.EXTERIOR};PointLocator.prototype.updateLocationInfo=function(e){e===Location.INTERIOR&&(this._isIn=!0),e===Location.BOUNDARY&&this._numBoundaries++};PointLocator.prototype.computeLocation=function(e,t){var a=this;if(t instanceof Point$3&&this.updateLocationInfo(this.locateInternal(e,t)),t instanceof LineString)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof Polygon)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof MultiLineString)for(var l=t,h=0;h<l.getNumGeometries();h++){var g=l.getGeometryN(h);a.updateLocationInfo(a.locateInternal(e,g))}else if(t instanceof MultiPolygon)for(var p=t,y=0;y<p.getNumGeometries();y++){var b=p.getGeometryN(y);a.updateLocationInfo(a.locateInternal(e,b))}else if(t instanceof GeometryCollection)for(var E=new GeometryCollectionIterator(t);E.hasNext();){var C=E.next();C!==t&&a.computeLocation(e,C)}};PointLocator.prototype.locate=function(e,t){return t.isEmpty()?Location.EXTERIOR:t instanceof LineString?this.locateInternal(e,t):t instanceof Polygon?this.locateInternal(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?Location.BOUNDARY:this._numBoundaries>0||this._isIn?Location.INTERIOR:Location.EXTERIOR)};PointLocator.prototype.interfaces_=function(){return[]};PointLocator.prototype.getClass=function(){return PointLocator};var GeometryLocation=function n(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var e=arguments[0],t=arguments[1];n.call(this,e,n.INSIDE_AREA,t)}else if(arguments.length===3){var a=arguments[0],l=arguments[1],h=arguments[2];this._component=a,this._segIndex=l,this._pt=h}},staticAccessors$38={INSIDE_AREA:{configurable:!0}};GeometryLocation.prototype.isInsideArea=function(){return this._segIndex===GeometryLocation.INSIDE_AREA};GeometryLocation.prototype.getCoordinate=function(){return this._pt};GeometryLocation.prototype.getGeometryComponent=function(){return this._component};GeometryLocation.prototype.getSegmentIndex=function(){return this._segIndex};GeometryLocation.prototype.interfaces_=function(){return[]};GeometryLocation.prototype.getClass=function(){return GeometryLocation};staticAccessors$38.INSIDE_AREA.get=function(){return-1};Object.defineProperties(GeometryLocation,staticAccessors$38);var PointExtracter=function(e){this._pts=e||null};PointExtracter.prototype.filter=function(e){e instanceof Point$3&&this._pts.add(e)};PointExtracter.prototype.interfaces_=function(){return[GeometryFilter]};PointExtracter.prototype.getClass=function(){return PointExtracter};PointExtracter.getPoints=function(){if(arguments.length===1){var e=arguments[0];return e instanceof Point$3?Collections.singletonList(e):PointExtracter.getPoints(e,new ArrayList)}else if(arguments.length===2){var t=arguments[0],a=arguments[1];return t instanceof Point$3?a.add(t):t instanceof GeometryCollection&&t.apply(new PointExtracter(a)),a}};var ConnectedElementLocationFilter=function(){this._locations=null;var e=arguments[0];this._locations=e};ConnectedElementLocationFilter.prototype.filter=function(e){(e instanceof Point$3||e instanceof LineString||e instanceof Polygon)&&this._locations.add(new GeometryLocation(e,0,e.getCoordinate()))};ConnectedElementLocationFilter.prototype.interfaces_=function(){return[GeometryFilter]};ConnectedElementLocationFilter.prototype.getClass=function(){return ConnectedElementLocationFilter};ConnectedElementLocationFilter.getLocations=function(e){var t=new ArrayList;return e.apply(new ConnectedElementLocationFilter(t)),t};var DistanceOp=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new PointLocator,this._minDistanceLocation=null,this._minDistance=Double.MAX_VALUE,arguments.length===2){var e=arguments[0],t=arguments[1];this._geom=[e,t],this._terminateDistance=0}else if(arguments.length===3){var a=arguments[0],l=arguments[1],h=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=a,this._geom[1]=l,this._terminateDistance=h}};DistanceOp.prototype.computeContainmentDistance=function(){var e=this;if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var a=arguments[0],l=arguments[1],h=1-a,g=PolygonExtracter.getPolygons(this._geom[a]);if(g.size()>0){var p=ConnectedElementLocationFilter.getLocations(this._geom[h]);if(this.computeContainmentDistance(p,g,l),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[h]=l[0],this._minDistanceLocation[a]=l[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&hasInterface(arguments[0],List)&&hasInterface(arguments[1],List)){for(var y=arguments[0],b=arguments[1],E=arguments[2],C=0;C<y.size();C++)for(var A=y.get(C),B=0;B<b.size();B++)if(e.computeContainmentDistance(A,b.get(B),E),e._minDistance<=e._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof GeometryLocation&&arguments[1]instanceof Polygon){var M=arguments[0],N=arguments[1],Z=arguments[2],ee=M.getCoordinate();if(Location.EXTERIOR!==this._ptLocator.locate(ee,N))return this._minDistance=0,Z[0]=M,Z[1]=new GeometryLocation(N,ee),null}}};DistanceOp.prototype.computeMinDistanceLinesPoints=function(e,t,a){for(var l=this,h=0;h<e.size();h++)for(var g=e.get(h),p=0;p<t.size();p++){var y=t.get(p);if(l.computeMinDistance(g,y,a),l._minDistance<=l._terminateDistance)return null}};DistanceOp.prototype.computeFacetDistance=function(){var e=new Array(2).fill(null),t=LinearComponentExtracter.getLines(this._geom[0]),a=LinearComponentExtracter.getLines(this._geom[1]),l=PointExtracter.getPoints(this._geom[0]),h=PointExtracter.getPoints(this._geom[1]);if(this.computeMinDistanceLines(t,a,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,h,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance)||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(a,l,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance))return null;e[0]=null,e[1]=null,this.computeMinDistancePoints(l,h,e),this.updateMinDistance(e,!1)};DistanceOp.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};DistanceOp.prototype.updateMinDistance=function(e,t){if(e[0]===null)return null;t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])};DistanceOp.prototype.nearestPoints=function(){this.computeMinDistance();var e=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return e};DistanceOp.prototype.computeMinDistance=function(){var e=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof LineString&&arguments[1]instanceof Point$3){var t=arguments[0],a=arguments[1],l=arguments[2];if(t.getEnvelopeInternal().distance(a.getEnvelopeInternal())>this._minDistance)return null;for(var h=t.getCoordinates(),g=a.getCoordinate(),p=0;p<h.length-1;p++){var y=CGAlgorithms.distancePointLine(g,h[p],h[p+1]);if(y<e._minDistance){e._minDistance=y;var b=new LineSegment(h[p],h[p+1]),E=b.closestPoint(g);l[0]=new GeometryLocation(t,p,E),l[1]=new GeometryLocation(a,0,g)}if(e._minDistance<=e._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof LineString&&arguments[1]instanceof LineString){var C=arguments[0],A=arguments[1],B=arguments[2];if(C.getEnvelopeInternal().distance(A.getEnvelopeInternal())>this._minDistance)return null;for(var M=C.getCoordinates(),N=A.getCoordinates(),Z=0;Z<M.length-1;Z++)for(var ee=0;ee<N.length-1;ee++){var F=CGAlgorithms.distanceLineLine(M[Z],M[Z+1],N[ee],N[ee+1]);if(F<e._minDistance){e._minDistance=F;var O=new LineSegment(M[Z],M[Z+1]),k=new LineSegment(N[ee],N[ee+1]),H=O.closestPoints(k);B[0]=new GeometryLocation(C,Z,H[0]),B[1]=new GeometryLocation(A,ee,H[1])}if(e._minDistance<=e._terminateDistance)return null}}}};DistanceOp.prototype.computeMinDistancePoints=function(e,t,a){for(var l=this,h=0;h<e.size();h++)for(var g=e.get(h),p=0;p<t.size();p++){var y=t.get(p),b=g.getCoordinate().distance(y.getCoordinate());if(b<l._minDistance&&(l._minDistance=b,a[0]=new GeometryLocation(g,0,g.getCoordinate()),a[1]=new GeometryLocation(y,0,y.getCoordinate())),l._minDistance<=l._terminateDistance)return null}};DistanceOp.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new IllegalArgumentException("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};DistanceOp.prototype.computeMinDistanceLines=function(e,t,a){for(var l=this,h=0;h<e.size();h++)for(var g=e.get(h),p=0;p<t.size();p++){var y=t.get(p);if(l.computeMinDistance(g,y,a),l._minDistance<=l._terminateDistance)return null}};DistanceOp.prototype.interfaces_=function(){return[]};DistanceOp.prototype.getClass=function(){return DistanceOp};DistanceOp.distance=function(e,t){var a=new DistanceOp(e,t);return a.distance()};DistanceOp.isWithinDistance=function(e,t,a){var l=new DistanceOp(e,t,a);return l.distance()<=a};DistanceOp.nearestPoints=function(e,t){var a=new DistanceOp(e,t);return a.nearestPoints()};var PointPairDistance$2=function(){this._pt=[new Coordinate,new Coordinate],this._distance=Double.NaN,this._isNull=!0};PointPairDistance$2.prototype.getCoordinates=function(){return this._pt};PointPairDistance$2.prototype.getCoordinate=function(e){return this._pt[e]};PointPairDistance$2.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],a=arguments[1];if(this._isNull)return this.initialize(t,a),null;var l=t.distance(a);l<this._distance&&this.initialize(t,a,l)}};PointPairDistance$2.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var a=arguments[0],l=arguments[1],h=arguments[2];this._pt[0].setCoordinate(a),this._pt[1].setCoordinate(l),this._distance=h,this._isNull=!1}};PointPairDistance$2.prototype.toString=function(){return WKTWriter.toLineString(this._pt[0],this._pt[1])};PointPairDistance$2.prototype.getDistance=function(){return this._distance};PointPairDistance$2.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],a=arguments[1];if(this._isNull)return this.initialize(t,a),null;var l=t.distance(a);l>this._distance&&this.initialize(t,a,l)}};PointPairDistance$2.prototype.interfaces_=function(){return[]};PointPairDistance$2.prototype.getClass=function(){return PointPairDistance$2};var DistanceToPoint=function(){};DistanceToPoint.prototype.interfaces_=function(){return[]};DistanceToPoint.prototype.getClass=function(){return DistanceToPoint};DistanceToPoint.computeDistance=function(){if(arguments[2]instanceof PointPairDistance$2&&arguments[0]instanceof LineString&&arguments[1]instanceof Coordinate)for(var e=arguments[0],t=arguments[1],a=arguments[2],l=new LineSegment,h=e.getCoordinates(),g=0;g<h.length-1;g++){l.setCoordinates(h[g],h[g+1]);var p=l.closestPoint(t);a.setMinimum(p,t)}else if(arguments[2]instanceof PointPairDistance$2&&arguments[0]instanceof Polygon&&arguments[1]instanceof Coordinate){var y=arguments[0],b=arguments[1],E=arguments[2];DistanceToPoint.computeDistance(y.getExteriorRing(),b,E);for(var C=0;C<y.getNumInteriorRing();C++)DistanceToPoint.computeDistance(y.getInteriorRingN(C),b,E)}else if(arguments[2]instanceof PointPairDistance$2&&arguments[0]instanceof Geometry&&arguments[1]instanceof Coordinate){var A=arguments[0],B=arguments[1],M=arguments[2];if(A instanceof LineString)DistanceToPoint.computeDistance(A,B,M);else if(A instanceof Polygon)DistanceToPoint.computeDistance(A,B,M);else if(A instanceof GeometryCollection)for(var N=A,Z=0;Z<N.getNumGeometries();Z++){var ee=N.getGeometryN(Z);DistanceToPoint.computeDistance(ee,B,M)}else M.setMinimum(A.getCoordinate(),B)}else if(arguments[2]instanceof PointPairDistance$2&&arguments[0]instanceof LineSegment&&arguments[1]instanceof Coordinate){var F=arguments[0],O=arguments[1],k=arguments[2],H=F.closestPoint(O);k.setMinimum(H,O)}};var DiscreteHausdorffDistance=function(){this._g0=null,this._g1=null,this._ptDist=new PointPairDistance$2,this._densifyFrac=0;var e=arguments[0],t=arguments[1];this._g0=e,this._g1=t},staticAccessors$39={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};DiscreteHausdorffDistance.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};DiscreteHausdorffDistance.prototype.setDensifyFraction=function(e){if(e>1||e<=0)throw new IllegalArgumentException("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e};DiscreteHausdorffDistance.prototype.compute=function(e,t){this.computeOrientedDistance(e,t,this._ptDist),this.computeOrientedDistance(t,e,this._ptDist)};DiscreteHausdorffDistance.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};DiscreteHausdorffDistance.prototype.computeOrientedDistance=function(e,t,a){var l=new MaxPointDistanceFilter$1(t);if(e.apply(l),a.setMaximum(l.getMaxPointDistance()),this._densifyFrac>0){var h=new MaxDensifiedByFractionDistanceFilter(t,this._densifyFrac);e.apply(h),a.setMaximum(h.getMaxPointDistance())}};DiscreteHausdorffDistance.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};DiscreteHausdorffDistance.prototype.interfaces_=function(){return[]};DiscreteHausdorffDistance.prototype.getClass=function(){return DiscreteHausdorffDistance};DiscreteHausdorffDistance.distance=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],a=new DiscreteHausdorffDistance(e,t);return a.distance()}else if(arguments.length===3){var l=arguments[0],h=arguments[1],g=arguments[2],p=new DiscreteHausdorffDistance(l,h);return p.setDensifyFraction(g),p.distance()}};staticAccessors$39.MaxPointDistanceFilter.get=function(){return MaxPointDistanceFilter$1};staticAccessors$39.MaxDensifiedByFractionDistanceFilter.get=function(){return MaxDensifiedByFractionDistanceFilter};Object.defineProperties(DiscreteHausdorffDistance,staticAccessors$39);var MaxPointDistanceFilter$1=function(){this._maxPtDist=new PointPairDistance$2,this._minPtDist=new PointPairDistance$2,this._euclideanDist=new DistanceToPoint,this._geom=null;var e=arguments[0];this._geom=e};MaxPointDistanceFilter$1.prototype.filter=function(e){this._minPtDist.initialize(),DistanceToPoint.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};MaxPointDistanceFilter$1.prototype.getMaxPointDistance=function(){return this._maxPtDist};MaxPointDistanceFilter$1.prototype.interfaces_=function(){return[CoordinateFilter]};MaxPointDistanceFilter$1.prototype.getClass=function(){return MaxPointDistanceFilter$1};var MaxDensifiedByFractionDistanceFilter=function(){this._maxPtDist=new PointPairDistance$2,this._minPtDist=new PointPairDistance$2,this._geom=null,this._numSubSegs=0;var e=arguments[0],t=arguments[1];this._geom=e,this._numSubSegs=Math.trunc(Math.round(1/t))};MaxDensifiedByFractionDistanceFilter.prototype.filter=function(e,t){var a=this;if(t===0)return null;for(var l=e.getCoordinate(t-1),h=e.getCoordinate(t),g=(h.x-l.x)/this._numSubSegs,p=(h.y-l.y)/this._numSubSegs,y=0;y<this._numSubSegs;y++){var b=l.x+y*g,E=l.y+y*p,C=new Coordinate(b,E);a._minPtDist.initialize(),DistanceToPoint.computeDistance(a._geom,C,a._minPtDist),a._maxPtDist.setMaximum(a._minPtDist)}};MaxDensifiedByFractionDistanceFilter.prototype.isDone=function(){return!1};MaxDensifiedByFractionDistanceFilter.prototype.isGeometryChanged=function(){return!1};MaxDensifiedByFractionDistanceFilter.prototype.getMaxPointDistance=function(){return this._maxPtDist};MaxDensifiedByFractionDistanceFilter.prototype.interfaces_=function(){return[CoordinateSequenceFilter]};MaxDensifiedByFractionDistanceFilter.prototype.getClass=function(){return MaxDensifiedByFractionDistanceFilter};var BufferDistanceValidator=function(e,t,a){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._bufDistance=t||null,this._result=a||null},staticAccessors$37={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};BufferDistanceValidator.prototype.checkMaximumDistance=function(e,t,a){var l=new DiscreteHausdorffDistance(t,e);if(l.setDensifyFraction(.25),this._maxDistanceFound=l.orientedDistance(),this._maxDistanceFound>a){this._isValid=!1;var h=l.getCoordinates();this._errorLocation=h[1],this._errorIndicator=e.getFactory().createLineString(h),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+WKTWriter.toLineString(h[0],h[1])+")"}};BufferDistanceValidator.prototype.isValid=function(){var e=Math.abs(this._bufDistance),t=BufferDistanceValidator.MAX_DISTANCE_DIFF_FRAC*e;return this._minValidDistance=e-t,this._maxValidDistance=e+t,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),BufferDistanceValidator.VERBOSE&&System.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};BufferDistanceValidator.prototype.checkNegativeValid=function(){if(!(this._input instanceof Polygon||this._input instanceof MultiPolygon||this._input instanceof GeometryCollection))return null;var e=this.getPolygonLines(this._input);if(this.checkMinimumDistance(e,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(e,this._result,this._maxValidDistance)};BufferDistanceValidator.prototype.getErrorIndicator=function(){return this._errorIndicator};BufferDistanceValidator.prototype.checkMinimumDistance=function(e,t,a){var l=new DistanceOp(e,t,a);if(this._minDistanceFound=l.distance(),this._minDistanceFound<a){this._isValid=!1;var h=l.nearestPoints();this._errorLocation=l.nearestPoints()[1],this._errorIndicator=e.getFactory().createLineString(h),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+WKTWriter.toLineString(h[0],h[1])+" )"}};BufferDistanceValidator.prototype.checkPositiveValid=function(){var e=this._result.getBoundary();if(this.checkMinimumDistance(this._input,e,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,e,this._maxValidDistance)};BufferDistanceValidator.prototype.getErrorLocation=function(){return this._errorLocation};BufferDistanceValidator.prototype.getPolygonLines=function(e){for(var t=new ArrayList,a=new LinearComponentExtracter(t),l=PolygonExtracter.getPolygons(e),h=l.iterator();h.hasNext();){var g=h.next();g.apply(a)}return e.getFactory().buildGeometry(t)};BufferDistanceValidator.prototype.getErrorMessage=function(){return this._errMsg};BufferDistanceValidator.prototype.interfaces_=function(){return[]};BufferDistanceValidator.prototype.getClass=function(){return BufferDistanceValidator};staticAccessors$37.VERBOSE.get=function(){return!1};staticAccessors$37.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(BufferDistanceValidator,staticAccessors$37);var BufferResultValidator=function(e,t,a){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._distance=t||null,this._result=a||null},staticAccessors$40={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};BufferResultValidator.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};BufferResultValidator.prototype.checkEnvelope=function(){if(this._distance<0)return null;var e=this._distance*BufferResultValidator.MAX_ENV_DIFF_FRAC;e===0&&(e=.001);var t=new Envelope(this._input.getEnvelopeInternal());t.expandBy(this._distance);var a=new Envelope(this._result.getEnvelopeInternal());a.expandBy(e),a.contains(t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(a)),this.report("Envelope")};BufferResultValidator.prototype.checkDistance=function(){var e=new BufferDistanceValidator(this._input,this._distance,this._result);e.isValid()||(this._isValid=!1,this._errorMsg=e.getErrorMessage(),this._errorLocation=e.getErrorLocation(),this._errorIndicator=e.getErrorIndicator()),this.report("Distance")};BufferResultValidator.prototype.checkArea=function(){var e=this._input.getArea(),t=this._result.getArea();this._distance>0&&e>t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&e<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};BufferResultValidator.prototype.checkPolygonal=function(){this._result instanceof Polygon||this._result instanceof MultiPolygon||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};BufferResultValidator.prototype.getErrorIndicator=function(){return this._errorIndicator};BufferResultValidator.prototype.getErrorLocation=function(){return this._errorLocation};BufferResultValidator.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};BufferResultValidator.prototype.report=function(e){if(!BufferResultValidator.VERBOSE)return null;System.out.println("Check "+e+": "+(this._isValid?"passed":"FAILED"))};BufferResultValidator.prototype.getErrorMessage=function(){return this._errorMsg};BufferResultValidator.prototype.interfaces_=function(){return[]};BufferResultValidator.prototype.getClass=function(){return BufferResultValidator};BufferResultValidator.isValidMsg=function(e,t,a){var l=new BufferResultValidator(e,t,a);return l.isValid()?null:l.getErrorMessage()};BufferResultValidator.isValid=function(e,t,a){var l=new BufferResultValidator(e,t,a);return!!l.isValid()};staticAccessors$40.VERBOSE.get=function(){return!1};staticAccessors$40.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(BufferResultValidator,staticAccessors$40);var BasicSegmentString=function(){this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};BasicSegmentString.prototype.getCoordinates=function(){return this._pts};BasicSegmentString.prototype.size=function(){return this._pts.length};BasicSegmentString.prototype.getCoordinate=function(e){return this._pts[e]};BasicSegmentString.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};BasicSegmentString.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:Octant.octant(this.getCoordinate(e),this.getCoordinate(e+1))};BasicSegmentString.prototype.setData=function(e){this._data=e};BasicSegmentString.prototype.getData=function(){return this._data};BasicSegmentString.prototype.toString=function(){return WKTWriter.toLineString(new CoordinateArraySequence(this._pts))};BasicSegmentString.prototype.interfaces_=function(){return[SegmentString]};BasicSegmentString.prototype.getClass=function(){return BasicSegmentString};var InteriorIntersectionFinder=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new ArrayList,this._intersectionCount=0,this._keepIntersections=!0;var e=arguments[0];this._li=e,this._interiorIntersection=null};InteriorIntersectionFinder.prototype.getInteriorIntersection=function(){return this._interiorIntersection};InteriorIntersectionFinder.prototype.setCheckEndSegmentsOnly=function(e){this._isCheckEndSegmentsOnly=e};InteriorIntersectionFinder.prototype.getIntersectionSegments=function(){return this._intSegments};InteriorIntersectionFinder.prototype.count=function(){return this._intersectionCount};InteriorIntersectionFinder.prototype.getIntersections=function(){return this._intersections};InteriorIntersectionFinder.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};InteriorIntersectionFinder.prototype.setKeepIntersections=function(e){this._keepIntersections=e};InteriorIntersectionFinder.prototype.processIntersections=function(e,t,a,l){if(!this._findAllIntersections&&this.hasIntersection()||e===a&&t===l)return null;if(this._isCheckEndSegmentsOnly){var h=this.isEndSegment(e,t)||this.isEndSegment(a,l);if(!h)return null}var g=e.getCoordinates()[t],p=e.getCoordinates()[t+1],y=a.getCoordinates()[l],b=a.getCoordinates()[l+1];this._li.computeIntersection(g,p,y,b),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=g,this._intSegments[1]=p,this._intSegments[2]=y,this._intSegments[3]=b,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};InteriorIntersectionFinder.prototype.isEndSegment=function(e,t){return t===0||t>=e.size()-2};InteriorIntersectionFinder.prototype.hasIntersection=function(){return this._interiorIntersection!==null};InteriorIntersectionFinder.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};InteriorIntersectionFinder.prototype.interfaces_=function(){return[SegmentIntersector]};InteriorIntersectionFinder.prototype.getClass=function(){return InteriorIntersectionFinder};InteriorIntersectionFinder.createAllIntersectionsFinder=function(e){var t=new InteriorIntersectionFinder(e);return t.setFindAllIntersections(!0),t};InteriorIntersectionFinder.createAnyIntersectionFinder=function(e){return new InteriorIntersectionFinder(e)};InteriorIntersectionFinder.createIntersectionCounter=function(e){var t=new InteriorIntersectionFinder(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};var FastNodingValidator=function(){this._li=new RobustLineIntersector,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var e=arguments[0];this._segStrings=e};FastNodingValidator.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};FastNodingValidator.prototype.getIntersections=function(){return this._segInt.getIntersections()};FastNodingValidator.prototype.isValid=function(){return this.execute(),this._isValid};FastNodingValidator.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};FastNodingValidator.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new InteriorIntersectionFinder(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new MCIndexNoder;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};FastNodingValidator.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new TopologyException(this.getErrorMessage(),this._segInt.getInteriorIntersection())};FastNodingValidator.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+WKTWriter.toLineString(e[0],e[1])+" and "+WKTWriter.toLineString(e[2],e[3])};FastNodingValidator.prototype.interfaces_=function(){return[]};FastNodingValidator.prototype.getClass=function(){return FastNodingValidator};FastNodingValidator.computeIntersections=function(e){var t=new FastNodingValidator(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};var EdgeNodingValidator=function n(){this._nv=null;var e=arguments[0];this._nv=new FastNodingValidator(n.toSegmentStrings(e))};EdgeNodingValidator.prototype.checkValid=function(){this._nv.checkValid()};EdgeNodingValidator.prototype.interfaces_=function(){return[]};EdgeNodingValidator.prototype.getClass=function(){return EdgeNodingValidator};EdgeNodingValidator.toSegmentStrings=function(e){for(var t=new ArrayList,a=e.iterator();a.hasNext();){var l=a.next();t.add(new BasicSegmentString(l.getCoordinates(),l))}return t};EdgeNodingValidator.checkValid=function(e){var t=new EdgeNodingValidator(e);t.checkValid()};var GeometryCollectionMapper=function(e){this._mapOp=e};GeometryCollectionMapper.prototype.map=function(e){for(var t=this,a=new ArrayList,l=0;l<e.getNumGeometries();l++){var h=t._mapOp.map(e.getGeometryN(l));h.isEmpty()||a.add(h)}return e.getFactory().createGeometryCollection(GeometryFactory.toGeometryArray(a))};GeometryCollectionMapper.prototype.interfaces_=function(){return[]};GeometryCollectionMapper.prototype.getClass=function(){return GeometryCollectionMapper};GeometryCollectionMapper.map=function(e,t){var a=new GeometryCollectionMapper(t);return a.map(e)};var LineBuilder=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new ArrayList,this._resultLineList=new ArrayList;var e=arguments[0],t=arguments[1],a=arguments[2];this._op=e,this._geometryFactory=t,this._ptLocator=a};LineBuilder.prototype.collectLines=function(e){for(var t=this,a=this._op.getGraph().getEdgeEnds().iterator();a.hasNext();){var l=a.next();t.collectLineEdge(l,e,t._lineEdgesList),t.collectBoundaryTouchEdge(l,e,t._lineEdgesList)}};LineBuilder.prototype.labelIsolatedLine=function(e,t){var a=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(t));e.getLabel().setLocation(t,a)};LineBuilder.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList};LineBuilder.prototype.collectLineEdge=function(e,t,a){var l=e.getLabel(),h=e.getEdge();e.isLineEdge()&&!e.isVisited()&&OverlayOp.isResultOfOp(l,t)&&!h.isCovered()&&(a.add(h),e.setVisitedEdge(!0))};LineBuilder.prototype.findCoveredLineEdges=function(){for(var e=this,t=this._op.getGraph().getNodes().iterator();t.hasNext();){var a=t.next();a.getEdges().findCoveredLineEdges()}for(var l=this._op.getGraph().getEdgeEnds().iterator();l.hasNext();){var h=l.next(),g=h.getEdge();if(h.isLineEdge()&&!g.isCoveredSet()){var p=e._op.isCoveredByA(h.getCoordinate());g.setCovered(p)}}};LineBuilder.prototype.labelIsolatedLines=function(e){for(var t=this,a=e.iterator();a.hasNext();){var l=a.next(),h=l.getLabel();l.isIsolated()&&(h.isNull(0)?t.labelIsolatedLine(l,0):t.labelIsolatedLine(l,1))}};LineBuilder.prototype.buildLines=function(e){for(var t=this,a=this._lineEdgesList.iterator();a.hasNext();){var l=a.next(),h=t._geometryFactory.createLineString(l.getCoordinates());t._resultLineList.add(h),l.setInResult(!0)}};LineBuilder.prototype.collectBoundaryTouchEdge=function(e,t,a){var l=e.getLabel();if(e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult())return null;Assert.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),OverlayOp.isResultOfOp(l,t)&&t===OverlayOp.INTERSECTION&&(a.add(e.getEdge()),e.setVisitedEdge(!0))};LineBuilder.prototype.interfaces_=function(){return[]};LineBuilder.prototype.getClass=function(){return LineBuilder};var PointBuilder=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new ArrayList;var e=arguments[0],t=arguments[1];this._op=e,this._geometryFactory=t};PointBuilder.prototype.filterCoveredNodeToPoint=function(e){var t=e.getCoordinate();if(!this._op.isCoveredByLA(t)){var a=this._geometryFactory.createPoint(t);this._resultPointList.add(a)}};PointBuilder.prototype.extractNonCoveredResultNodes=function(e){for(var t=this,a=this._op.getGraph().getNodes().iterator();a.hasNext();){var l=a.next();if(!l.isInResult()&&!l.isIncidentEdgeInResult()&&(l.getEdges().getDegree()===0||e===OverlayOp.INTERSECTION)){var h=l.getLabel();OverlayOp.isResultOfOp(h,e)&&t.filterCoveredNodeToPoint(l)}}};PointBuilder.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this._resultPointList};PointBuilder.prototype.interfaces_=function(){return[]};PointBuilder.prototype.getClass=function(){return PointBuilder};var GeometryTransformer=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};GeometryTransformer.prototype.transformPoint=function(e,t){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))};GeometryTransformer.prototype.transformPolygon=function(e,t){var a=this,l=!0,h=this.transformLinearRing(e.getExteriorRing(),e);(h===null||!(h instanceof LinearRing)||h.isEmpty())&&(l=!1);for(var g=new ArrayList,p=0;p<e.getNumInteriorRing();p++){var y=a.transformLinearRing(e.getInteriorRingN(p),e);y===null||y.isEmpty()||(y instanceof LinearRing||(l=!1),g.add(y))}if(l)return this._factory.createPolygon(h,g.toArray([]));var b=new ArrayList;return h!==null&&b.add(h),b.addAll(g),this._factory.buildGeometry(b)};GeometryTransformer.prototype.createCoordinateSequence=function(e){return this._factory.getCoordinateSequenceFactory().create(e)};GeometryTransformer.prototype.getInputGeometry=function(){return this._inputGeom};GeometryTransformer.prototype.transformMultiLineString=function(e,t){for(var a=this,l=new ArrayList,h=0;h<e.getNumGeometries();h++){var g=a.transformLineString(e.getGeometryN(h),e);g!==null&&(g.isEmpty()||l.add(g))}return this._factory.buildGeometry(l)};GeometryTransformer.prototype.transformCoordinates=function(e,t){return this.copy(e)};GeometryTransformer.prototype.transformLineString=function(e,t){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))};GeometryTransformer.prototype.transformMultiPoint=function(e,t){for(var a=this,l=new ArrayList,h=0;h<e.getNumGeometries();h++){var g=a.transformPoint(e.getGeometryN(h),e);g!==null&&(g.isEmpty()||l.add(g))}return this._factory.buildGeometry(l)};GeometryTransformer.prototype.transformMultiPolygon=function(e,t){for(var a=this,l=new ArrayList,h=0;h<e.getNumGeometries();h++){var g=a.transformPolygon(e.getGeometryN(h),e);g!==null&&(g.isEmpty()||l.add(g))}return this._factory.buildGeometry(l)};GeometryTransformer.prototype.copy=function(e){return e.copy()};GeometryTransformer.prototype.transformGeometryCollection=function(e,t){for(var a=this,l=new ArrayList,h=0;h<e.getNumGeometries();h++){var g=a.transform(e.getGeometryN(h));g!==null&&(a._pruneEmptyGeometry&&g.isEmpty()||l.add(g))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(GeometryFactory.toGeometryArray(l)):this._factory.buildGeometry(l)};GeometryTransformer.prototype.transform=function(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof Point$3)return this.transformPoint(e,null);if(e instanceof MultiPoint)return this.transformMultiPoint(e,null);if(e instanceof LinearRing)return this.transformLinearRing(e,null);if(e instanceof LineString)return this.transformLineString(e,null);if(e instanceof MultiLineString)return this.transformMultiLineString(e,null);if(e instanceof Polygon)return this.transformPolygon(e,null);if(e instanceof MultiPolygon)return this.transformMultiPolygon(e,null);if(e instanceof GeometryCollection)return this.transformGeometryCollection(e,null);throw new IllegalArgumentException("Unknown Geometry subtype: "+e.getClass().getName())};GeometryTransformer.prototype.transformLinearRing=function(e,t){var a=this.transformCoordinates(e.getCoordinateSequence(),e);if(a===null)return this._factory.createLinearRing(null);var l=a.size();return l>0&&l<4&&!this._preserveType?this._factory.createLineString(a):this._factory.createLinearRing(a)};GeometryTransformer.prototype.interfaces_=function(){return[]};GeometryTransformer.prototype.getClass=function(){return GeometryTransformer};var LineStringSnapper=function n(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new LineSegment,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof LineString&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];n.call(this,e.getCoordinates(),t)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var a=arguments[0],l=arguments[1];this._srcPts=a,this._isClosed=n.isClosed(a),this._snapTolerance=l}};LineStringSnapper.prototype.snapVertices=function(e,t){for(var a=this,l=this._isClosed?e.size()-1:e.size(),h=0;h<l;h++){var g=e.get(h),p=a.findSnapForVertex(g,t);p!==null&&(e.set(h,new Coordinate(p)),h===0&&a._isClosed&&e.set(e.size()-1,new Coordinate(p)))}};LineStringSnapper.prototype.findSnapForVertex=function(e,t){for(var a=this,l=0;l<t.length;l++){if(e.equals2D(t[l]))return null;if(e.distance(t[l])<a._snapTolerance)return t[l]}return null};LineStringSnapper.prototype.snapTo=function(e){var t=new CoordinateList(this._srcPts);this.snapVertices(t,e),this.snapSegments(t,e);var a=t.toCoordinateArray();return a};LineStringSnapper.prototype.snapSegments=function(e,t){var a=this;if(t.length===0)return null;var l=t.length;t[0].equals2D(t[t.length-1])&&(l=t.length-1);for(var h=0;h<l;h++){var g=t[h],p=a.findSegmentIndexToSnap(g,e);p>=0&&e.add(p+1,new Coordinate(g),!1)}};LineStringSnapper.prototype.findSegmentIndexToSnap=function(e,t){for(var a=this,l=Double.MAX_VALUE,h=-1,g=0;g<t.size()-1;g++){if(a._seg.p0=t.get(g),a._seg.p1=t.get(g+1),a._seg.p0.equals2D(e)||a._seg.p1.equals2D(e)){if(a._allowSnappingToSourceVertices)continue;return-1}var p=a._seg.distance(e);p<a._snapTolerance&&p<l&&(l=p,h=g)}return h};LineStringSnapper.prototype.setAllowSnappingToSourceVertices=function(e){this._allowSnappingToSourceVertices=e};LineStringSnapper.prototype.interfaces_=function(){return[]};LineStringSnapper.prototype.getClass=function(){return LineStringSnapper};LineStringSnapper.isClosed=function(e){return e.length<=1?!1:e[0].equals2D(e[e.length-1])};var GeometrySnapper=function(e){this._srcGeom=e||null},staticAccessors$41={SNAP_PRECISION_FACTOR:{configurable:!0}};GeometrySnapper.prototype.snapTo=function(e,t){var a=this.extractTargetCoordinates(e),l=new SnapTransformer(t,a);return l.transform(this._srcGeom)};GeometrySnapper.prototype.snapToSelf=function(e,t){var a=this.extractTargetCoordinates(this._srcGeom),l=new SnapTransformer(e,a,!0),h=l.transform(this._srcGeom),g=h;return t&&hasInterface(g,Polygonal)&&(g=h.buffer(0)),g};GeometrySnapper.prototype.computeSnapTolerance=function(e){var t=this.computeMinimumSegmentLength(e),a=t/10;return a};GeometrySnapper.prototype.extractTargetCoordinates=function(e){for(var t=new TreeSet,a=e.getCoordinates(),l=0;l<a.length;l++)t.add(a[l]);return t.toArray(new Array(0).fill(null))};GeometrySnapper.prototype.computeMinimumSegmentLength=function(e){for(var t=Double.MAX_VALUE,a=0;a<e.length-1;a++){var l=e[a].distance(e[a+1]);l<t&&(t=l)}return t};GeometrySnapper.prototype.interfaces_=function(){return[]};GeometrySnapper.prototype.getClass=function(){return GeometrySnapper};GeometrySnapper.snap=function(e,t,a){var l=new Array(2).fill(null),h=new GeometrySnapper(e);l[0]=h.snapTo(t,a);var g=new GeometrySnapper(t);return l[1]=g.snapTo(l[0],a),l};GeometrySnapper.computeOverlaySnapTolerance=function(){if(arguments.length===1){var e=arguments[0],t=GeometrySnapper.computeSizeBasedSnapTolerance(e),a=e.getPrecisionModel();if(a.getType()===PrecisionModel.FIXED){var l=1/a.getScale()*2/1.415;l>t&&(t=l)}return t}else if(arguments.length===2){var h=arguments[0],g=arguments[1];return Math.min(GeometrySnapper.computeOverlaySnapTolerance(h),GeometrySnapper.computeOverlaySnapTolerance(g))}};GeometrySnapper.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal(),a=Math.min(t.getHeight(),t.getWidth()),l=a*GeometrySnapper.SNAP_PRECISION_FACTOR;return l};GeometrySnapper.snapToSelf=function(e,t,a){var l=new GeometrySnapper(e);return l.snapToSelf(t,a)};staticAccessors$41.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(GeometrySnapper,staticAccessors$41);var SnapTransformer=function(n){function e(t,a,l){n.call(this),this._snapTolerance=t||null,this._snapPts=a||null,this._isSelfSnap=l!==void 0?l:!1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(a,l){var h=new LineStringSnapper(a,this._snapTolerance);return h.setAllowSnappingToSourceVertices(this._isSelfSnap),h.snapTo(l)},e.prototype.transformCoordinates=function(a,l){var h=a.toCoordinateArray(),g=this.snapLine(h,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(g)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(GeometryTransformer),CommonBits=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};CommonBits.prototype.getCommon=function(){return Double.longBitsToDouble(this._commonBits)};CommonBits.prototype.add=function(e){var t=Double.doubleToLongBits(e);if(this._isFirst)return this._commonBits=t,this._commonSignExp=CommonBits.signExpBits(this._commonBits),this._isFirst=!1,null;var a=CommonBits.signExpBits(t);if(a!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=CommonBits.numCommonMostSigMantissaBits(this._commonBits,t),this._commonBits=CommonBits.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};CommonBits.prototype.toString=function(){if(arguments.length===1){var e=arguments[0],t=Double.longBitsToDouble(e),a=Double.toBinaryString(e),l="0000000000000000000000000000000000000000000000000000000000000000"+a,h=l.substring(l.length-64),g=h.substring(0,1)+"  "+h.substring(1,12)+"(exp) "+h.substring(12)+" [ "+t+" ]";return g}};CommonBits.prototype.interfaces_=function(){return[]};CommonBits.prototype.getClass=function(){return CommonBits};CommonBits.getBit=function(e,t){var a=1<<t;return e&a?1:0};CommonBits.signExpBits=function(e){return e>>52};CommonBits.zeroLowerBits=function(e,t){var a=(1<<t)-1,l=~a,h=e&l;return h};CommonBits.numCommonMostSigMantissaBits=function(e,t){for(var a=0,l=52;l>=0;l--){if(CommonBits.getBit(e,l)!==CommonBits.getBit(t,l))return a;a++}return 52};var CommonBitsRemover=function(){this._commonCoord=null,this._ccFilter=new CommonCoordinateFilter},staticAccessors$42={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};CommonBitsRemover.prototype.addCommonBits=function(e){var t=new Translater(this._commonCoord);e.apply(t),e.geometryChanged()};CommonBitsRemover.prototype.removeCommonBits=function(e){if(this._commonCoord.x===0&&this._commonCoord.y===0)return e;var t=new Coordinate(this._commonCoord);t.x=-t.x,t.y=-t.y;var a=new Translater(t);return e.apply(a),e.geometryChanged(),e};CommonBitsRemover.prototype.getCommonCoordinate=function(){return this._commonCoord};CommonBitsRemover.prototype.add=function(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};CommonBitsRemover.prototype.interfaces_=function(){return[]};CommonBitsRemover.prototype.getClass=function(){return CommonBitsRemover};staticAccessors$42.CommonCoordinateFilter.get=function(){return CommonCoordinateFilter};staticAccessors$42.Translater.get=function(){return Translater};Object.defineProperties(CommonBitsRemover,staticAccessors$42);var CommonCoordinateFilter=function(){this._commonBitsX=new CommonBits,this._commonBitsY=new CommonBits};CommonCoordinateFilter.prototype.filter=function(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)};CommonCoordinateFilter.prototype.getCommonCoordinate=function(){return new Coordinate(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};CommonCoordinateFilter.prototype.interfaces_=function(){return[CoordinateFilter]};CommonCoordinateFilter.prototype.getClass=function(){return CommonCoordinateFilter};var Translater=function(){this.trans=null;var e=arguments[0];this.trans=e};Translater.prototype.filter=function(e,t){var a=e.getOrdinate(t,0)+this.trans.x,l=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,a),e.setOrdinate(t,1,l)};Translater.prototype.isDone=function(){return!1};Translater.prototype.isGeometryChanged=function(){return!0};Translater.prototype.interfaces_=function(){return[CoordinateSequenceFilter]};Translater.prototype.getClass=function(){return Translater};var SnapOverlayOp=function(e,t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=e,this._geom[1]=t,this.computeSnapTolerance()};SnapOverlayOp.prototype.selfSnap=function(e){var t=new GeometrySnapper(e),a=t.snapTo(e,this._snapTolerance);return a};SnapOverlayOp.prototype.removeCommonBits=function(e){this._cbr=new CommonBitsRemover,this._cbr.add(e[0]),this._cbr.add(e[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t};SnapOverlayOp.prototype.prepareResult=function(e){return this._cbr.addCommonBits(e),e};SnapOverlayOp.prototype.getResultGeometry=function(e){var t=this.snap(this._geom),a=OverlayOp.overlayOp(t[0],t[1],e);return this.prepareResult(a)};SnapOverlayOp.prototype.checkValid=function(e){e.isValid()||System.out.println("Snapped geometry is invalid")};SnapOverlayOp.prototype.computeSnapTolerance=function(){this._snapTolerance=GeometrySnapper.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};SnapOverlayOp.prototype.snap=function(e){var t=this.removeCommonBits(e),a=GeometrySnapper.snap(t[0],t[1],this._snapTolerance);return a};SnapOverlayOp.prototype.interfaces_=function(){return[]};SnapOverlayOp.prototype.getClass=function(){return SnapOverlayOp};SnapOverlayOp.overlayOp=function(e,t,a){var l=new SnapOverlayOp(e,t);return l.getResultGeometry(a)};SnapOverlayOp.union=function(e,t){return SnapOverlayOp.overlayOp(e,t,OverlayOp.UNION)};SnapOverlayOp.intersection=function(e,t){return SnapOverlayOp.overlayOp(e,t,OverlayOp.INTERSECTION)};SnapOverlayOp.symDifference=function(e,t){return SnapOverlayOp.overlayOp(e,t,OverlayOp.SYMDIFFERENCE)};SnapOverlayOp.difference=function(e,t){return SnapOverlayOp.overlayOp(e,t,OverlayOp.DIFFERENCE)};var SnapIfNeededOverlayOp=function(e,t){this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=t};SnapIfNeededOverlayOp.prototype.getResultGeometry=function(e){var t=null,a=!1,l=null;try{t=OverlayOp.overlayOp(this._geom[0],this._geom[1],e);var h=!0;h&&(a=!0)}catch(g){if(g instanceof RuntimeException)l=g;else throw g}finally{}if(!a)try{t=SnapOverlayOp.overlayOp(this._geom[0],this._geom[1],e)}catch(g){throw g instanceof RuntimeException?l:g}finally{}return t};SnapIfNeededOverlayOp.prototype.interfaces_=function(){return[]};SnapIfNeededOverlayOp.prototype.getClass=function(){return SnapIfNeededOverlayOp};SnapIfNeededOverlayOp.overlayOp=function(e,t,a){var l=new SnapIfNeededOverlayOp(e,t);return l.getResultGeometry(a)};SnapIfNeededOverlayOp.union=function(e,t){return SnapIfNeededOverlayOp.overlayOp(e,t,OverlayOp.UNION)};SnapIfNeededOverlayOp.intersection=function(e,t){return SnapIfNeededOverlayOp.overlayOp(e,t,OverlayOp.INTERSECTION)};SnapIfNeededOverlayOp.symDifference=function(e,t){return SnapIfNeededOverlayOp.overlayOp(e,t,OverlayOp.SYMDIFFERENCE)};SnapIfNeededOverlayOp.difference=function(e,t){return SnapIfNeededOverlayOp.overlayOp(e,t,OverlayOp.DIFFERENCE)};var MonotoneChain$2=function(){this.mce=null,this.chainIndex=null;var e=arguments[0],t=arguments[1];this.mce=e,this.chainIndex=t};MonotoneChain$2.prototype.computeIntersections=function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)};MonotoneChain$2.prototype.interfaces_=function(){return[]};MonotoneChain$2.prototype.getClass=function(){return MonotoneChain$2};var SweepLineEvent=function n(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var e=arguments[0],t=arguments[1];this._eventType=n.DELETE,this._xValue=e,this._insertEvent=t}else if(arguments.length===3){var a=arguments[0],l=arguments[1],h=arguments[2];this._eventType=n.INSERT,this._label=a,this._xValue=l,this._obj=h}},staticAccessors$43={INSERT:{configurable:!0},DELETE:{configurable:!0}};SweepLineEvent.prototype.isDelete=function(){return this._eventType===SweepLineEvent.DELETE};SweepLineEvent.prototype.setDeleteEventIndex=function(e){this._deleteEventIndex=e};SweepLineEvent.prototype.getObject=function(){return this._obj};SweepLineEvent.prototype.compareTo=function(e){var t=e;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0};SweepLineEvent.prototype.getInsertEvent=function(){return this._insertEvent};SweepLineEvent.prototype.isInsert=function(){return this._eventType===SweepLineEvent.INSERT};SweepLineEvent.prototype.isSameLabel=function(e){return this._label===null?!1:this._label===e._label};SweepLineEvent.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};SweepLineEvent.prototype.interfaces_=function(){return[Comparable]};SweepLineEvent.prototype.getClass=function(){return SweepLineEvent};staticAccessors$43.INSERT.get=function(){return 1};staticAccessors$43.DELETE.get=function(){return 2};Object.defineProperties(SweepLineEvent,staticAccessors$43);var EdgeSetIntersector=function(){};EdgeSetIntersector.prototype.interfaces_=function(){return[]};EdgeSetIntersector.prototype.getClass=function(){return EdgeSetIntersector};var SegmentIntersector$2=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[0],t=arguments[1],a=arguments[2];this._li=e,this._includeProper=t,this._recordIsolated=a};SegmentIntersector$2.prototype.isTrivialIntersection=function(e,t,a,l){if(e===a&&this._li.getIntersectionNum()===1){if(SegmentIntersector$2.isAdjacentSegments(t,l))return!0;if(e.isClosed()){var h=e.getNumPoints()-1;if(t===0&&l===h||l===0&&t===h)return!0}}return!1};SegmentIntersector$2.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};SegmentIntersector$2.prototype.setIsDoneIfProperInt=function(e){this._isDoneWhenProperInt=e};SegmentIntersector$2.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};SegmentIntersector$2.prototype.isBoundaryPointInternal=function(e,t){for(var a=t.iterator();a.hasNext();){var l=a.next(),h=l.getCoordinate();if(e.isIntersection(h))return!0}return!1};SegmentIntersector$2.prototype.hasProperIntersection=function(){return this._hasProper};SegmentIntersector$2.prototype.hasIntersection=function(){return this._hasIntersection};SegmentIntersector$2.prototype.isDone=function(){return this._isDone};SegmentIntersector$2.prototype.isBoundaryPoint=function(e,t){return t===null?!1:!!(this.isBoundaryPointInternal(e,t[0])||this.isBoundaryPointInternal(e,t[1]))};SegmentIntersector$2.prototype.setBoundaryNodes=function(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t};SegmentIntersector$2.prototype.addIntersections=function(e,t,a,l){if(e===a&&t===l)return null;this.numTests++;var h=e.getCoordinates()[t],g=e.getCoordinates()[t+1],p=a.getCoordinates()[l],y=a.getCoordinates()[l+1];this._li.computeIntersection(h,g,p,y),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),a.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,a,l)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(e.addIntersections(this._li,t,0),a.addIntersections(this._li,l,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};SegmentIntersector$2.prototype.interfaces_=function(){return[]};SegmentIntersector$2.prototype.getClass=function(){return SegmentIntersector$2};SegmentIntersector$2.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var SimpleMCSweepLineIntersector=function(n){function e(){n.call(this),this.events=new ArrayList,this.nOverlaps=null}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){var a=this;Collections.sort(this.events);for(var l=0;l<this.events.size();l++){var h=a.events.get(l);h.isDelete()&&h.getInsertEvent().setDeleteEventIndex(l)}},e.prototype.computeIntersections=function(){var a=this;if(arguments.length===1){var l=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var h=0;h<this.events.size();h++){var g=a.events.get(h);if(g.isInsert()&&a.processOverlaps(h,g.getDeleteEventIndex(),g,l),l.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof SegmentIntersector$2&&hasInterface(arguments[0],List)&&hasInterface(arguments[1],List)){var p=arguments[0],y=arguments[1],b=arguments[2];this.addEdges(p,p),this.addEdges(y,y),this.computeIntersections(b)}else if(typeof arguments[2]=="boolean"&&hasInterface(arguments[0],List)&&arguments[1]instanceof SegmentIntersector$2){var E=arguments[0],C=arguments[1],A=arguments[2];A?this.addEdges(E,null):this.addEdges(E),this.computeIntersections(C)}}},e.prototype.addEdge=function(a,l){for(var h=this,g=a.getMonotoneChainEdge(),p=g.getStartIndexes(),y=0;y<p.length-1;y++){var b=new MonotoneChain$2(g,y),E=new SweepLineEvent(l,g.getMinX(y),b);h.events.add(E),h.events.add(new SweepLineEvent(g.getMaxX(y),E))}},e.prototype.processOverlaps=function(a,l,h,g){for(var p=this,y=h.getObject(),b=a;b<l;b++){var E=p.events.get(b);if(E.isInsert()){var C=E.getObject();h.isSameLabel(E)||(y.computeIntersections(C,g),p.nOverlaps++)}}},e.prototype.addEdges=function(){var a=this;if(arguments.length===1)for(var l=arguments[0],h=l.iterator();h.hasNext();){var g=h.next();a.addEdge(g,g)}else if(arguments.length===2)for(var p=arguments[0],y=arguments[1],b=p.iterator();b.hasNext();){var E=b.next();a.addEdge(E,y)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(EdgeSetIntersector),IntervalRTreeNode$1=function(){this._min=Double.POSITIVE_INFINITY,this._max=Double.NEGATIVE_INFINITY},staticAccessors$45={NodeComparator:{configurable:!0}};IntervalRTreeNode$1.prototype.getMin=function(){return this._min};IntervalRTreeNode$1.prototype.intersects=function(e,t){return!(this._min>t||this._max<e)};IntervalRTreeNode$1.prototype.getMax=function(){return this._max};IntervalRTreeNode$1.prototype.toString=function(){return WKTWriter.toLineString(new Coordinate(this._min,0),new Coordinate(this._max,0))};IntervalRTreeNode$1.prototype.interfaces_=function(){return[]};IntervalRTreeNode$1.prototype.getClass=function(){return IntervalRTreeNode$1};staticAccessors$45.NodeComparator.get=function(){return NodeComparator};Object.defineProperties(IntervalRTreeNode$1,staticAccessors$45);var NodeComparator=function(){};NodeComparator.prototype.compare=function(e,t){var a=e,l=t,h=(a._min+a._max)/2,g=(l._min+l._max)/2;return h<g?-1:h>g?1:0};NodeComparator.prototype.interfaces_=function(){return[Comparator]};NodeComparator.prototype.getClass=function(){return NodeComparator};var IntervalRTreeLeafNode=function(n){function e(){n.call(this),this._item=null;var t=arguments[0],a=arguments[1],l=arguments[2];this._min=t,this._max=a,this._item=l}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.query=function(a,l,h){if(!this.intersects(a,l))return null;h.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(IntervalRTreeNode$1),IntervalRTreeBranchNode=function(n){function e(){n.call(this),this._node1=null,this._node2=null;var t=arguments[0],a=arguments[1];this._node1=t,this._node2=a,this.buildExtent(this._node1,this._node2)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(a,l){this._min=Math.min(a._min,l._min),this._max=Math.max(a._max,l._max)},e.prototype.query=function(a,l,h){if(!this.intersects(a,l))return null;this._node1!==null&&this._node1.query(a,l,h),this._node2!==null&&this._node2.query(a,l,h)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(IntervalRTreeNode$1),SortedPackedIntervalRTree=function(){this._leaves=new ArrayList,this._root=null,this._level=0};SortedPackedIntervalRTree.prototype.buildTree=function(){var e=this;Collections.sort(this._leaves,new IntervalRTreeNode$1.NodeComparator);for(var t=this._leaves,a=null,l=new ArrayList;;){if(e.buildLevel(t,l),l.size()===1)return l.get(0);a=t,t=l,l=a}};SortedPackedIntervalRTree.prototype.insert=function(e,t,a){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new IntervalRTreeLeafNode(e,t,a))};SortedPackedIntervalRTree.prototype.query=function(e,t,a){this.init(),this._root.query(e,t,a)};SortedPackedIntervalRTree.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};SortedPackedIntervalRTree.prototype.printNode=function(e){System.out.println(WKTWriter.toLineString(new Coordinate(e._min,this._level),new Coordinate(e._max,this._level)))};SortedPackedIntervalRTree.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};SortedPackedIntervalRTree.prototype.buildLevel=function(e,t){this._level++,t.clear();for(var a=0;a<e.size();a+=2){var l=e.get(a),h=a+1<e.size()?e.get(a):null;if(h===null)t.add(l);else{var g=new IntervalRTreeBranchNode(e.get(a),e.get(a+1));t.add(g)}}};SortedPackedIntervalRTree.prototype.interfaces_=function(){return[]};SortedPackedIntervalRTree.prototype.getClass=function(){return SortedPackedIntervalRTree};var ArrayListVisitor=function(){this._items=new ArrayList};ArrayListVisitor.prototype.visitItem=function(e){this._items.add(e)};ArrayListVisitor.prototype.getItems=function(){return this._items};ArrayListVisitor.prototype.interfaces_=function(){return[ItemVisitor]};ArrayListVisitor.prototype.getClass=function(){return ArrayListVisitor};var IndexedPointInAreaLocator=function(){this._index=null;var e=arguments[0];if(!hasInterface(e,Polygonal))throw new IllegalArgumentException("Argument must be Polygonal");this._index=new IntervalIndexedGeometry(e)},staticAccessors$44={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};IndexedPointInAreaLocator.prototype.locate=function(e){var t=new RayCrossingCounter(e),a=new SegmentVisitor(t);return this._index.query(e.y,e.y,a),t.getLocation()};IndexedPointInAreaLocator.prototype.interfaces_=function(){return[PointOnGeometryLocator]};IndexedPointInAreaLocator.prototype.getClass=function(){return IndexedPointInAreaLocator};staticAccessors$44.SegmentVisitor.get=function(){return SegmentVisitor};staticAccessors$44.IntervalIndexedGeometry.get=function(){return IntervalIndexedGeometry};Object.defineProperties(IndexedPointInAreaLocator,staticAccessors$44);var SegmentVisitor=function(){this._counter=null;var e=arguments[0];this._counter=e};SegmentVisitor.prototype.visitItem=function(e){var t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))};SegmentVisitor.prototype.interfaces_=function(){return[ItemVisitor]};SegmentVisitor.prototype.getClass=function(){return SegmentVisitor};var IntervalIndexedGeometry=function(){this._index=new SortedPackedIntervalRTree;var e=arguments[0];this.init(e)};IntervalIndexedGeometry.prototype.init=function(e){for(var t=this,a=LinearComponentExtracter.getLines(e),l=a.iterator();l.hasNext();){var h=l.next(),g=h.getCoordinates();t.addLine(g)}};IntervalIndexedGeometry.prototype.addLine=function(e){for(var t=this,a=1;a<e.length;a++){var l=new LineSegment(e[a-1],e[a]),h=Math.min(l.p0.y,l.p1.y),g=Math.max(l.p0.y,l.p1.y);t._index.insert(h,g,l)}};IntervalIndexedGeometry.prototype.query=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],a=new ArrayListVisitor;return this._index.query(e,t,a),a.getItems()}else if(arguments.length===3){var l=arguments[0],h=arguments[1],g=arguments[2];this._index.query(l,h,g)}};IntervalIndexedGeometry.prototype.interfaces_=function(){return[]};IntervalIndexedGeometry.prototype.getClass=function(){return IntervalIndexedGeometry};var GeometryGraph=function(n){function e(){if(n.call(this),this._parentGeom=null,this._lineEdgeMap=new HashMap,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new PointLocator,arguments.length===2){var t=arguments[0],a=arguments[1],l=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;this._argIndex=t,this._parentGeom=a,this._boundaryNodeRule=l,a!==null&&this.add(a)}else if(arguments.length===3){var h=arguments[0],g=arguments[1],p=arguments[2];this._argIndex=h,this._parentGeom=g,this._boundaryNodeRule=p,g!==null&&this.add(g)}}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(a,l){var h=this._nodes.addNode(l),g=h.getLabel(),p=1,y=Location.NONE;y=g.getLocation(a,Position$1.ON),y===Location.BOUNDARY&&p++;var b=e.determineBoundary(this._boundaryNodeRule,p);g.setLocation(a,b)},e.prototype.computeSelfNodes=function(){if(arguments.length===2){var a=arguments[0],l=arguments[1];return this.computeSelfNodes(a,l,!1)}else if(arguments.length===3){var h=arguments[0],g=arguments[1],p=arguments[2],y=new SegmentIntersector$2(h,!0,!1);y.setIsDoneIfProperInt(p);var b=this.createEdgeSetIntersector(),E=this._parentGeom instanceof LinearRing||this._parentGeom instanceof Polygon||this._parentGeom instanceof MultiPolygon,C=g||!E;return b.computeIntersections(this._edges,y,C),this.addSelfIntersectionNodes(this._argIndex),y}},e.prototype.computeSplitEdges=function(a){for(var l=this._edges.iterator();l.hasNext();){var h=l.next();h.eiList.addSplitEdges(a)}},e.prototype.computeEdgeIntersections=function(a,l,h){var g=new SegmentIntersector$2(l,h,!0);g.setBoundaryNodes(this.getBoundaryNodes(),a.getBoundaryNodes());var p=this.createEdgeSetIntersector();return p.computeIntersections(this._edges,a._edges,g),g},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Point$3){var a=arguments[0],l=a.getCoordinate();this.insertPoint(this._argIndex,l,Location.INTERIOR)}else if(arguments[0]instanceof Coordinate){var h=arguments[0];this.insertPoint(this._argIndex,h,Location.INTERIOR)}},e.prototype.addPolygon=function(a){var l=this;this.addPolygonRing(a.getExteriorRing(),Location.EXTERIOR,Location.INTERIOR);for(var h=0;h<a.getNumInteriorRing();h++){var g=a.getInteriorRingN(h);l.addPolygonRing(g,Location.INTERIOR,Location.EXTERIOR)}},e.prototype.addEdge=function(a){this.insertEdge(a);var l=a.getCoordinates();this.insertPoint(this._argIndex,l[0],Location.BOUNDARY),this.insertPoint(this._argIndex,l[l.length-1],Location.BOUNDARY)},e.prototype.addLineString=function(a){var l=CoordinateArrays.removeRepeatedPoints(a.getCoordinates());if(l.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=l[0],null;var h=new Edge(l,new Label(this._argIndex,Location.INTERIOR));this._lineEdgeMap.put(a,h),this.insertEdge(h),Assert.isTrue(l.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,l[0]),this.insertBoundaryPoint(this._argIndex,l[l.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var a=this.getBoundaryNodes(),l=new Array(a.size()).fill(null),h=0,g=a.iterator();g.hasNext();){var p=g.next();l[h++]=p.getCoordinate().copy()}return l},e.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(a,l,h){if(this.isBoundaryNode(a,l))return null;h===Location.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(a,l):this.insertPoint(a,l,h)},e.prototype.addPolygonRing=function(a,l,h){if(a.isEmpty())return null;var g=CoordinateArrays.removeRepeatedPoints(a.getCoordinates());if(g.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=g[0],null;var p=l,y=h;CGAlgorithms.isCCW(g)&&(p=h,y=l);var b=new Edge(g,new Label(this._argIndex,Location.BOUNDARY,p,y));this._lineEdgeMap.put(a,b),this.insertEdge(b),this.insertPoint(this._argIndex,g[0],Location.BOUNDARY)},e.prototype.insertPoint=function(a,l,h){var g=this._nodes.addNode(l),p=g.getLabel();p===null?g._label=new Label(a,h):p.setLocation(a,h)},e.prototype.createEdgeSetIntersector=function(){return new SimpleMCSweepLineIntersector},e.prototype.addSelfIntersectionNodes=function(a){for(var l=this,h=this._edges.iterator();h.hasNext();)for(var g=h.next(),p=g.getLabel().getLocation(a),y=g.eiList.iterator();y.hasNext();){var b=y.next();l.addSelfIntersectionNode(a,b.coord,p)}},e.prototype.add=function(){if(arguments.length===1){var a=arguments[0];if(a.isEmpty())return null;if(a instanceof MultiPolygon&&(this._useBoundaryDeterminationRule=!1),a instanceof Polygon)this.addPolygon(a);else if(a instanceof LineString)this.addLineString(a);else if(a instanceof Point$3)this.addPoint(a);else if(a instanceof MultiPoint)this.addCollection(a);else if(a instanceof MultiLineString)this.addCollection(a);else if(a instanceof MultiPolygon)this.addCollection(a);else if(a instanceof GeometryCollection)this.addCollection(a);else throw new Error(a.getClass().getName())}else return n.prototype.add.apply(this,arguments)},e.prototype.addCollection=function(a){for(var l=this,h=0;h<a.getNumGeometries();h++){var g=a.getGeometryN(h);l.add(g)}},e.prototype.locate=function(a){return hasInterface(this._parentGeom,Polygonal)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new IndexedPointInAreaLocator(this._parentGeom)),this._areaPtLocator.locate(a)):this._ptLocator.locate(a,this._parentGeom)},e.prototype.findEdge=function(){if(arguments.length===1){var a=arguments[0];return this._lineEdgeMap.get(a)}else return n.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(a,l){return a.isInBoundary(l)?Location.BOUNDARY:Location.INTERIOR},e}(PlanarGraph),GeometryGraphOp=function(){if(this._li=new RobustLineIntersector,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new GeometryGraph(0,e)}else if(arguments.length===2){var t=arguments[0],a=arguments[1],l=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;t.getPrecisionModel().compareTo(a.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(a.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new GeometryGraph(0,t,l),this._arg[1]=new GeometryGraph(1,a,l)}else if(arguments.length===3){var h=arguments[0],g=arguments[1],p=arguments[2];h.getPrecisionModel().compareTo(g.getPrecisionModel())>=0?this.setComputationPrecision(h.getPrecisionModel()):this.setComputationPrecision(g.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new GeometryGraph(0,h,p),this._arg[1]=new GeometryGraph(1,g,p)}};GeometryGraphOp.prototype.getArgGeometry=function(e){return this._arg[e].getGeometry()};GeometryGraphOp.prototype.setComputationPrecision=function(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)};GeometryGraphOp.prototype.interfaces_=function(){return[]};GeometryGraphOp.prototype.getClass=function(){return GeometryGraphOp};var GeometryMapper=function(){};GeometryMapper.prototype.interfaces_=function(){return[]};GeometryMapper.prototype.getClass=function(){return GeometryMapper};GeometryMapper.map=function(){if(arguments[0]instanceof Geometry&&hasInterface(arguments[1],GeometryMapper.MapOp)){for(var e=arguments[0],t=arguments[1],a=new ArrayList,l=0;l<e.getNumGeometries();l++){var h=t.map(e.getGeometryN(l));h!==null&&a.add(h)}return e.getFactory().buildGeometry(a)}else if(hasInterface(arguments[0],Collection)&&hasInterface(arguments[1],GeometryMapper.MapOp)){for(var g=arguments[0],p=arguments[1],y=new ArrayList,b=g.iterator();b.hasNext();){var E=b.next(),C=p.map(E);C!==null&&y.add(C)}return y}};GeometryMapper.MapOp=function(){};var OverlayOp=function(n){function e(){var t=arguments[0],a=arguments[1];n.call(this,t,a),this._ptLocator=new PointLocator,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new EdgeList,this._resultPolyList=new ArrayList,this._resultLineList=new ArrayList,this._resultPointList=new ArrayList,this._graph=new PlanarGraph(new OverlayNodeFactory),this._geomFact=t.getFactory()}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(a){var l=this._edgeList.findEqualEdge(a);if(l!==null){var h=l.getLabel(),g=a.getLabel();l.isPointwiseEqual(a)||(g=new Label(a.getLabel()),g.flip());var p=l.getDepth();p.isNull()&&p.add(h),p.add(g),h.merge(g)}else this._edgeList.add(a)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var a=this._graph.getEdgeEnds().iterator();a.hasNext();){var l=a.next(),h=l.getSym();l.isInResult()&&h.isInResult()&&(l.setInResult(!1),h.setInResult(!1))}},e.prototype.isCoveredByLA=function(a){return!!(this.isCovered(a,this._resultLineList)||this.isCovered(a,this._resultPolyList))},e.prototype.computeGeometry=function(a,l,h,g){var p=new ArrayList;return p.addAll(a),p.addAll(l),p.addAll(h),p.isEmpty()?e.createEmptyResult(g,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(p)},e.prototype.mergeSymLabels=function(){for(var a=this._graph.getNodes().iterator();a.hasNext();){var l=a.next();l.getEdges().mergeSymLabels()}},e.prototype.isCovered=function(a,l){for(var h=this,g=l.iterator();g.hasNext();){var p=g.next(),y=h._ptLocator.locate(a,p);if(y!==Location.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var a=new ArrayList,l=this._edgeList.iterator();l.hasNext();){var h=l.next();h.isCollapsed()&&(l.remove(),a.add(h.getCollapsedEdge()))}this._edgeList.addAll(a)},e.prototype.updateNodeLabelling=function(){for(var a=this._graph.getNodes().iterator();a.hasNext();){var l=a.next(),h=l.getEdges().getLabel();l.getLabel().merge(h)}},e.prototype.getResultGeometry=function(a){return this.computeOverlay(a),this._resultGeom},e.prototype.insertUniqueEdges=function(a){for(var l=this,h=a.iterator();h.hasNext();){var g=h.next();l.insertUniqueEdge(g)}},e.prototype.computeOverlay=function(a){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var l=new ArrayList;this._arg[0].computeSplitEdges(l),this._arg[1].computeSplitEdges(l),this.insertUniqueEdges(l),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),EdgeNodingValidator.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(a),this.cancelDuplicateResultEdges();var h=new PolygonBuilder(this._geomFact);h.add(this._graph),this._resultPolyList=h.getPolygons();var g=new LineBuilder(this,this._geomFact,this._ptLocator);this._resultLineList=g.build(a);var p=new PointBuilder(this,this._geomFact,this._ptLocator);this._resultPointList=p.build(a),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,a)},e.prototype.labelIncompleteNode=function(a,l){var h=this._ptLocator.locate(a.getCoordinate(),this._arg[l].getGeometry());a.getLabel().setLocation(l,h)},e.prototype.copyPoints=function(a){for(var l=this,h=this._arg[a].getNodeIterator();h.hasNext();){var g=h.next(),p=l._graph.addNode(g.getCoordinate());p.setLabel(a,g.getLabel().getLocation(a))}},e.prototype.findResultAreaEdges=function(a){for(var l=this._graph.getEdgeEnds().iterator();l.hasNext();){var h=l.next(),g=h.getLabel();g.isArea()&&!h.isInteriorAreaEdge()&&e.isResultOfOp(g.getLocation(0,Position$1.RIGHT),g.getLocation(1,Position$1.RIGHT),a)&&h.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var a=this._edgeList.iterator();a.hasNext();){var l=a.next(),h=l.getLabel(),g=l.getDepth();if(!g.isNull()){g.normalize();for(var p=0;p<2;p++)!h.isNull(p)&&h.isArea()&&!g.isNull(p)&&(g.getDelta(p)===0?h.toLine(p):(Assert.isTrue(!g.isNull(p,Position$1.LEFT),"depth of LEFT side has not been initialized"),h.setLocation(p,Position$1.LEFT,g.getLocation(p,Position$1.LEFT)),Assert.isTrue(!g.isNull(p,Position$1.RIGHT),"depth of RIGHT side has not been initialized"),h.setLocation(p,Position$1.RIGHT,g.getLocation(p,Position$1.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var a=this,l=this._graph.getNodes().iterator();l.hasNext();){var h=l.next();h.getEdges().computeLabelling(a._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var a=this,l=this._graph.getNodes().iterator();l.hasNext();){var h=l.next(),g=h.getLabel();h.isIsolated()&&(g.isNull(0)?a.labelIncompleteNode(h,0):a.labelIncompleteNode(h,1)),h.getEdges().updateLabelling(g)}},e.prototype.isCoveredByA=function(a){return!!this.isCovered(a,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(GeometryGraphOp);OverlayOp.overlayOp=function(n,e,t){var a=new OverlayOp(n,e),l=a.getResultGeometry(t);return l};OverlayOp.intersection=function(n,e){if(n.isEmpty()||e.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.INTERSECTION,n,e,n.getFactory());if(n.isGeometryCollection()){var t=e;return GeometryCollectionMapper.map(n,{interfaces_:function(){return[GeometryMapper.MapOp]},map:function(a){return a.intersection(t)}})}return n.checkNotGeometryCollection(n),n.checkNotGeometryCollection(e),SnapIfNeededOverlayOp.overlayOp(n,e,OverlayOp.INTERSECTION)};OverlayOp.symDifference=function(n,e){if(n.isEmpty()||e.isEmpty()){if(n.isEmpty()&&e.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.SYMDIFFERENCE,n,e,n.getFactory());if(n.isEmpty())return e.copy();if(e.isEmpty())return n.copy()}return n.checkNotGeometryCollection(n),n.checkNotGeometryCollection(e),SnapIfNeededOverlayOp.overlayOp(n,e,OverlayOp.SYMDIFFERENCE)};OverlayOp.resultDimension=function(n,e,t){var a=e.getDimension(),l=t.getDimension(),h=-1;switch(n){case OverlayOp.INTERSECTION:h=Math.min(a,l);break;case OverlayOp.UNION:h=Math.max(a,l);break;case OverlayOp.DIFFERENCE:h=a;break;case OverlayOp.SYMDIFFERENCE:h=Math.max(a,l);break}return h};OverlayOp.createEmptyResult=function(n,e,t,a){var l=null;switch(OverlayOp.resultDimension(n,e,t)){case-1:l=a.createGeometryCollection(new Array(0).fill(null));break;case 0:l=a.createPoint();break;case 1:l=a.createLineString();break;case 2:l=a.createPolygon();break}return l};OverlayOp.difference=function(n,e){return n.isEmpty()?OverlayOp.createEmptyResult(OverlayOp.DIFFERENCE,n,e,n.getFactory()):e.isEmpty()?n.copy():(n.checkNotGeometryCollection(n),n.checkNotGeometryCollection(e),SnapIfNeededOverlayOp.overlayOp(n,e,OverlayOp.DIFFERENCE))};OverlayOp.isResultOfOp=function(){if(arguments.length===2){var n=arguments[0],e=arguments[1],t=n.getLocation(0),a=n.getLocation(1);return OverlayOp.isResultOfOp(t,a,e)}else if(arguments.length===3){var l=arguments[0],h=arguments[1],g=arguments[2];switch(l===Location.BOUNDARY&&(l=Location.INTERIOR),h===Location.BOUNDARY&&(h=Location.INTERIOR),g){case OverlayOp.INTERSECTION:return l===Location.INTERIOR&&h===Location.INTERIOR;case OverlayOp.UNION:return l===Location.INTERIOR||h===Location.INTERIOR;case OverlayOp.DIFFERENCE:return l===Location.INTERIOR&&h!==Location.INTERIOR;case OverlayOp.SYMDIFFERENCE:return l===Location.INTERIOR&&h!==Location.INTERIOR||l!==Location.INTERIOR&&h===Location.INTERIOR}return!1}};OverlayOp.INTERSECTION=1;OverlayOp.UNION=2;OverlayOp.DIFFERENCE=3;OverlayOp.SYMDIFFERENCE=4;var FuzzyPointLocator=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new PointLocator,this._seg=new LineSegment;var e=arguments[0],t=arguments[1];this._g=e,this._boundaryDistanceTolerance=t,this._linework=this.extractLinework(e)};FuzzyPointLocator.prototype.isWithinToleranceOfBoundary=function(e){for(var t=this,a=0;a<this._linework.getNumGeometries();a++)for(var l=t._linework.getGeometryN(a),h=l.getCoordinateSequence(),g=0;g<h.size()-1;g++){h.getCoordinate(g,t._seg.p0),h.getCoordinate(g+1,t._seg.p1);var p=t._seg.distance(e);if(p<=t._boundaryDistanceTolerance)return!0}return!1};FuzzyPointLocator.prototype.getLocation=function(e){return this.isWithinToleranceOfBoundary(e)?Location.BOUNDARY:this._ptLocator.locate(e,this._g)};FuzzyPointLocator.prototype.extractLinework=function(e){var t=new PolygonalLineworkExtracter;e.apply(t);var a=t.getLinework(),l=GeometryFactory.toLineStringArray(a);return e.getFactory().createMultiLineString(l)};FuzzyPointLocator.prototype.interfaces_=function(){return[]};FuzzyPointLocator.prototype.getClass=function(){return FuzzyPointLocator};var PolygonalLineworkExtracter=function(){this._linework=null,this._linework=new ArrayList};PolygonalLineworkExtracter.prototype.getLinework=function(){return this._linework};PolygonalLineworkExtracter.prototype.filter=function(e){var t=this;if(e instanceof Polygon){var a=e;this._linework.add(a.getExteriorRing());for(var l=0;l<a.getNumInteriorRing();l++)t._linework.add(a.getInteriorRingN(l))}};PolygonalLineworkExtracter.prototype.interfaces_=function(){return[GeometryFilter]};PolygonalLineworkExtracter.prototype.getClass=function(){return PolygonalLineworkExtracter};var OffsetPointGenerator=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var e=arguments[0];this._g=e};OffsetPointGenerator.prototype.extractPoints=function(e,t,a){for(var l=this,h=e.getCoordinates(),g=0;g<h.length-1;g++)l.computeOffsetPoints(h[g],h[g+1],t,a)};OffsetPointGenerator.prototype.setSidesToGenerate=function(e,t){this._doLeft=e,this._doRight=t};OffsetPointGenerator.prototype.getPoints=function(e){for(var t=this,a=new ArrayList,l=LinearComponentExtracter.getLines(this._g),h=l.iterator();h.hasNext();){var g=h.next();t.extractPoints(g,e,a)}return a};OffsetPointGenerator.prototype.computeOffsetPoints=function(e,t,a,l){var h=t.x-e.x,g=t.y-e.y,p=Math.sqrt(h*h+g*g),y=a*h/p,b=a*g/p,E=(t.x+e.x)/2,C=(t.y+e.y)/2;if(this._doLeft){var A=new Coordinate(E-b,C+y);l.add(A)}if(this._doRight){var B=new Coordinate(E+b,C-y);l.add(B)}};OffsetPointGenerator.prototype.interfaces_=function(){return[]};OffsetPointGenerator.prototype.getClass=function(){return OffsetPointGenerator};var OverlayResultValidator=function n(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=n.TOLERANCE,this._testCoords=new ArrayList;var e=arguments[0],t=arguments[1],a=arguments[2];this._boundaryDistanceTolerance=n.computeBoundaryDistanceTolerance(e,t),this._geom=[e,t,a],this._locFinder=[new FuzzyPointLocator(this._geom[0],this._boundaryDistanceTolerance),new FuzzyPointLocator(this._geom[1],this._boundaryDistanceTolerance),new FuzzyPointLocator(this._geom[2],this._boundaryDistanceTolerance)]},staticAccessors$46={TOLERANCE:{configurable:!0}};OverlayResultValidator.prototype.reportResult=function(e,t,a){System.out.println("Overlay result invalid - A:"+Location.toLocationSymbol(t[0])+" B:"+Location.toLocationSymbol(t[1])+" expected:"+(a?"i":"e")+" actual:"+Location.toLocationSymbol(t[2]))};OverlayResultValidator.prototype.isValid=function(e){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var t=this.checkValid(e);return t};OverlayResultValidator.prototype.checkValid=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],a=0;a<this._testCoords.size();a++){var l=e._testCoords.get(a);if(!e.checkValid(t,l))return e._invalidLocation=l,!1}return!0}else if(arguments.length===2){var h=arguments[0],g=arguments[1];return this._location[0]=this._locFinder[0].getLocation(g),this._location[1]=this._locFinder[1].getLocation(g),this._location[2]=this._locFinder[2].getLocation(g),OverlayResultValidator.hasLocation(this._location,Location.BOUNDARY)?!0:this.isValidResult(h,this._location)}};OverlayResultValidator.prototype.addTestPts=function(e){var t=new OffsetPointGenerator(e);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))};OverlayResultValidator.prototype.isValidResult=function(e,t){var a=OverlayOp.isResultOfOp(t[0],t[1],e),l=t[2]===Location.INTERIOR,h=!(a^l);return h||this.reportResult(e,t,a),h};OverlayResultValidator.prototype.getInvalidLocation=function(){return this._invalidLocation};OverlayResultValidator.prototype.interfaces_=function(){return[]};OverlayResultValidator.prototype.getClass=function(){return OverlayResultValidator};OverlayResultValidator.hasLocation=function(e,t){for(var a=0;a<3;a++)if(e[a]===t)return!0;return!1};OverlayResultValidator.computeBoundaryDistanceTolerance=function(e,t){return Math.min(GeometrySnapper.computeSizeBasedSnapTolerance(e),GeometrySnapper.computeSizeBasedSnapTolerance(t))};OverlayResultValidator.isValid=function(e,t,a,l){var h=new OverlayResultValidator(e,t,l);return h.isValid(a)};staticAccessors$46.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(OverlayResultValidator,staticAccessors$46);var GeometryCombiner=function n(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=n.extractFactory(e),this._inputGeoms=e};GeometryCombiner.prototype.extractElements=function(e,t){var a=this;if(e===null)return null;for(var l=0;l<e.getNumGeometries();l++){var h=e.getGeometryN(l);a._skipEmpty&&h.isEmpty()||t.add(h)}};GeometryCombiner.prototype.combine=function(){for(var e=this,t=new ArrayList,a=this._inputGeoms.iterator();a.hasNext();){var l=a.next();e.extractElements(l,t)}return t.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)};GeometryCombiner.prototype.interfaces_=function(){return[]};GeometryCombiner.prototype.getClass=function(){return GeometryCombiner};GeometryCombiner.combine=function(){if(arguments.length===1){var e=arguments[0],t=new GeometryCombiner(e);return t.combine()}else if(arguments.length===2){var a=arguments[0],l=arguments[1],h=new GeometryCombiner(GeometryCombiner.createList(a,l));return h.combine()}else if(arguments.length===3){var g=arguments[0],p=arguments[1],y=arguments[2],b=new GeometryCombiner(GeometryCombiner.createList(g,p,y));return b.combine()}};GeometryCombiner.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()};GeometryCombiner.createList=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],a=new ArrayList;return a.add(e),a.add(t),a}else if(arguments.length===3){var l=arguments[0],h=arguments[1],g=arguments[2],p=new ArrayList;return p.add(l),p.add(h),p.add(g),p}};var CascadedPolygonUnion=function(){this._inputPolys=null,this._geomFactory=null;var e=arguments[0];this._inputPolys=e,this._inputPolys===null&&(this._inputPolys=new ArrayList)},staticAccessors$47={STRTREE_NODE_CAPACITY:{configurable:!0}};CascadedPolygonUnion.prototype.reduceToGeometries=function(e){for(var t=this,a=new ArrayList,l=e.iterator();l.hasNext();){var h=l.next(),g=null;hasInterface(h,List)?g=t.unionTree(h):h instanceof Geometry&&(g=h),a.add(g)}return a};CascadedPolygonUnion.prototype.extractByEnvelope=function(e,t,a){for(var l=new ArrayList,h=0;h<t.getNumGeometries();h++){var g=t.getGeometryN(h);g.getEnvelopeInternal().intersects(e)?l.add(g):a.add(g)}return this._geomFactory.buildGeometry(l)};CascadedPolygonUnion.prototype.unionOptimized=function(e,t){var a=e.getEnvelopeInternal(),l=t.getEnvelopeInternal();if(!a.intersects(l)){var h=GeometryCombiner.combine(e,t);return h}if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var g=a.intersection(l);return this.unionUsingEnvelopeIntersection(e,t,g)};CascadedPolygonUnion.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new STRtree(CascadedPolygonUnion.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();){var a=t.next();e.insert(a.getEnvelopeInternal(),a)}this._inputPolys=null;var l=e.itemsTree(),h=this.unionTree(l);return h};CascadedPolygonUnion.prototype.binaryUnion=function(){if(arguments.length===1){var e=arguments[0];return this.binaryUnion(e,0,e.size())}else if(arguments.length===3){var t=arguments[0],a=arguments[1],l=arguments[2];if(l-a<=1){var h=CascadedPolygonUnion.getGeometry(t,a);return this.unionSafe(h,null)}else{if(l-a===2)return this.unionSafe(CascadedPolygonUnion.getGeometry(t,a),CascadedPolygonUnion.getGeometry(t,a+1));var g=Math.trunc((l+a)/2),p=this.binaryUnion(t,a,g),y=this.binaryUnion(t,g,l);return this.unionSafe(p,y)}}};CascadedPolygonUnion.prototype.repeatedUnion=function(e){for(var t=null,a=e.iterator();a.hasNext();){var l=a.next();t===null?t=l.copy():t=t.union(l)}return t};CascadedPolygonUnion.prototype.unionSafe=function(e,t){return e===null&&t===null?null:e===null?t.copy():t===null?e.copy():this.unionOptimized(e,t)};CascadedPolygonUnion.prototype.unionActual=function(e,t){return CascadedPolygonUnion.restrictToPolygons(e.union(t))};CascadedPolygonUnion.prototype.unionTree=function(e){var t=this.reduceToGeometries(e),a=this.binaryUnion(t);return a};CascadedPolygonUnion.prototype.unionUsingEnvelopeIntersection=function(e,t,a){var l=new ArrayList,h=this.extractByEnvelope(a,e,l),g=this.extractByEnvelope(a,t,l),p=this.unionActual(h,g);l.add(p);var y=GeometryCombiner.combine(l);return y};CascadedPolygonUnion.prototype.bufferUnion=function(){if(arguments.length===1){var e=arguments[0],t=e.get(0).getFactory(),a=t.buildGeometry(e),l=a.buffer(0);return l}else if(arguments.length===2){var h=arguments[0],g=arguments[1],p=h.getFactory(),y=p.createGeometryCollection([h,g]),b=y.buffer(0);return b}};CascadedPolygonUnion.prototype.interfaces_=function(){return[]};CascadedPolygonUnion.prototype.getClass=function(){return CascadedPolygonUnion};CascadedPolygonUnion.restrictToPolygons=function(e){if(hasInterface(e,Polygonal))return e;var t=PolygonExtracter.getPolygons(e);return t.size()===1?t.get(0):e.getFactory().createMultiPolygon(GeometryFactory.toPolygonArray(t))};CascadedPolygonUnion.getGeometry=function(e,t){return t>=e.size()?null:e.get(t)};CascadedPolygonUnion.union=function(e){var t=new CascadedPolygonUnion(e);return t.union()};staticAccessors$47.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(CascadedPolygonUnion,staticAccessors$47);var UnionOp=function(){};UnionOp.prototype.interfaces_=function(){return[]};UnionOp.prototype.getClass=function(){return UnionOp};UnionOp.union=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),SnapIfNeededOverlayOp.overlayOp(e,t,OverlayOp.UNION)};function adder(){return new Adder}function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(n){add(temp,n,this.t),add(this,temp.s,this.s),this.s?this.t+=temp.t:this.s=temp.t},valueOf:function(){return this.s}};var temp=new Adder;function add(n,e,t){var a=n.s=e+t,l=a-e,h=a-l;n.t=e-h+(t-l)}var epsilon=1e-6,pi=Math.PI,halfPi=pi/2,quarterPi=pi/4,tau=pi*2,degrees=180/pi,radians=pi/180,abs=Math.abs,atan=Math.atan,atan2=Math.atan2,cos=Math.cos,sin=Math.sin,sqrt=Math.sqrt;function acos(n){return n>1?0:n<-1?pi:Math.acos(n)}function asin(n){return n>1?halfPi:n<-1?-halfPi:Math.asin(n)}function noop$1(){}function streamGeometry(n,e){n&&streamGeometryType.hasOwnProperty(n.type)&&streamGeometryType[n.type](n,e)}var streamObjectType={Feature:function(n,e){streamGeometry(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,a=-1,l=t.length;++a<l;)streamGeometry(t[a].geometry,e)}},streamGeometryType={Sphere:function(n,e){e.sphere()},Point:function(n,e){n=n.coordinates,e.point(n[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,a=-1,l=t.length;++a<l;)n=t[a],e.point(n[0],n[1],n[2])},LineString:function(n,e){streamLine(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,a=-1,l=t.length;++a<l;)streamLine(t[a],e,0)},Polygon:function(n,e){streamPolygon(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,a=-1,l=t.length;++a<l;)streamPolygon(t[a],e)},GeometryCollection:function(n,e){for(var t=n.geometries,a=-1,l=t.length;++a<l;)streamGeometry(t[a],e)}};function streamLine(n,e,t){var a=-1,l=n.length-t,h;for(e.lineStart();++a<l;)h=n[a],e.point(h[0],h[1],h[2]);e.lineEnd()}function streamPolygon(n,e){var t=-1,a=n.length;for(e.polygonStart();++t<a;)streamLine(n[t],e,1);e.polygonEnd()}function geoStream(n,e){n&&streamObjectType.hasOwnProperty(n.type)?streamObjectType[n.type](n,e):streamGeometry(n,e)}adder();adder();function spherical(n){return[atan2(n[1],n[0]),asin(n[2])]}function cartesian(n){var e=n[0],t=n[1],a=cos(t);return[a*cos(e),a*sin(e),sin(t)]}function cartesianDot(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function cartesianCross(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function cartesianAddInPlace(n,e){n[0]+=e[0],n[1]+=e[1],n[2]+=e[2]}function cartesianScale(n,e){return[n[0]*e,n[1]*e,n[2]*e]}function cartesianNormalizeInPlace(n){var e=sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}adder();function compose(n,e){function t(a,l){return a=n(a,l),e(a[0],a[1])}return n.invert&&e.invert&&(t.invert=function(a,l){return a=e.invert(a,l),a&&n.invert(a[0],a[1])}),t}function rotationIdentity(n,e){return[n>pi?n-tau:n<-pi?n+tau:n,e]}rotationIdentity.invert=rotationIdentity;function rotateRadians(n,e,t){return(n%=tau)?e||t?compose(rotationLambda(n),rotationPhiGamma(e,t)):rotationLambda(n):e||t?rotationPhiGamma(e,t):rotationIdentity}function forwardRotationLambda(n){return function(e,t){return e+=n,[e>pi?e-tau:e<-pi?e+tau:e,t]}}function rotationLambda(n){var e=forwardRotationLambda(n);return e.invert=forwardRotationLambda(-n),e}function rotationPhiGamma(n,e){var t=cos(n),a=sin(n),l=cos(e),h=sin(e);function g(p,y){var b=cos(y),E=cos(p)*b,C=sin(p)*b,A=sin(y),B=A*t+E*a;return[atan2(C*l-B*h,E*t-A*a),asin(B*l+C*h)]}return g.invert=function(p,y){var b=cos(y),E=cos(p)*b,C=sin(p)*b,A=sin(y),B=A*l-C*h;return[atan2(C*l+A*h,E*t+B*a),asin(B*t-E*a)]},g}function circleStream(n,e,t,a,l,h){if(t){var g=cos(e),p=sin(e),y=a*t;l==null?(l=e+a*tau,h=e-y/2):(l=circleRadius(g,l),h=circleRadius(g,h),(a>0?l<h:l>h)&&(l+=a*tau));for(var b,E=l;a>0?E>h:E<h;E-=y)b=spherical([g,-p*cos(E),-p*sin(E)]),n.point(b[0],b[1])}}function circleRadius(n,e){e=cartesian(e),e[0]-=n,cartesianNormalizeInPlace(e);var t=acos(-e[1]);return((-e[2]<0?-t:t)+tau-epsilon)%tau}function clipBuffer(){var n=[],e;return{point:function(t,a){e.push([t,a])},lineStart:function(){n.push(e=[])},lineEnd:noop$1,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],e=null,t}}}function clipLine(n,e,t,a,l,h){var g=n[0],p=n[1],y=e[0],b=e[1],E=0,C=1,A=y-g,B=b-p,M;if(M=t-g,!(!A&&M>0)){if(M/=A,A<0){if(M<E)return;M<C&&(C=M)}else if(A>0){if(M>C)return;M>E&&(E=M)}if(M=l-g,!(!A&&M<0)){if(M/=A,A<0){if(M>C)return;M>E&&(E=M)}else if(A>0){if(M<E)return;M<C&&(C=M)}if(M=a-p,!(!B&&M>0)){if(M/=B,B<0){if(M<E)return;M<C&&(C=M)}else if(B>0){if(M>C)return;M>E&&(E=M)}if(M=h-p,!(!B&&M<0)){if(M/=B,B<0){if(M>C)return;M>E&&(E=M)}else if(B>0){if(M<E)return;M<C&&(C=M)}return E>0&&(n[0]=g+E*A,n[1]=p+E*B),C<1&&(e[0]=g+C*A,e[1]=p+C*B),!0}}}}}function pointEqual(n,e){return abs(n[0]-e[0])<epsilon&&abs(n[1]-e[1])<epsilon}function Intersection(n,e,t,a){this.x=n,this.z=e,this.o=t,this.e=a,this.v=!1,this.n=this.p=null}function clipPolygon(n,e,t,a,l){var h=[],g=[],p,y;if(n.forEach(function(M){if(!((N=M.length-1)<=0)){var N,Z=M[0],ee=M[N],F;if(pointEqual(Z,ee)){for(l.lineStart(),p=0;p<N;++p)l.point((Z=M[p])[0],Z[1]);l.lineEnd();return}h.push(F=new Intersection(Z,M,null,!0)),g.push(F.o=new Intersection(Z,null,F,!1)),h.push(F=new Intersection(ee,M,null,!1)),g.push(F.o=new Intersection(ee,null,F,!0))}}),!!h.length){for(g.sort(e),link(h),link(g),p=0,y=g.length;p<y;++p)g[p].e=t=!t;for(var b=h[0],E,C;;){for(var A=b,B=!0;A.v;)if((A=A.n)===b)return;E=A.z,l.lineStart();do{if(A.v=A.o.v=!0,A.e){if(B)for(p=0,y=E.length;p<y;++p)l.point((C=E[p])[0],C[1]);else a(A.x,A.n.x,1,l);A=A.n}else{if(B)for(E=A.p.z,p=E.length-1;p>=0;--p)l.point((C=E[p])[0],C[1]);else a(A.x,A.p.x,-1,l);A=A.p}A=A.o,E=A.z,B=!B}while(!A.v);l.lineEnd()}}}function link(n){if(e=n.length){for(var e,t=0,a=n[0],l;++t<e;)a.n=l=n[t],l.p=a,a=l;a.n=l=n[0],l.p=a}}function ascending(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function bisector(n){return n.length===1&&(n=ascendingComparator(n)),{left:function(e,t,a,l){for(a==null&&(a=0),l==null&&(l=e.length);a<l;){var h=a+l>>>1;n(e[h],t)<0?a=h+1:l=h}return a},right:function(e,t,a,l){for(a==null&&(a=0),l==null&&(l=e.length);a<l;){var h=a+l>>>1;n(e[h],t)>0?l=h:a=h+1}return a}}}function ascendingComparator(n){return function(e,t){return ascending(n(e),t)}}bisector(ascending);function merge$2(n){for(var e=n.length,t,a=-1,l=0,h,g;++a<e;)l+=n[a].length;for(h=new Array(l);--e>=0;)for(g=n[e],t=g.length;--t>=0;)h[--l]=g[t];return h}var clipMax=1e9,clipMin=-clipMax;function clipExtent(n,e,t,a){function l(b,E){return n<=b&&b<=t&&e<=E&&E<=a}function h(b,E,C,A){var B=0,M=0;if(b==null||(B=g(b,C))!==(M=g(E,C))||y(b,E)<0^C>0)do A.point(B===0||B===3?n:t,B>1?a:e);while((B=(B+C+4)%4)!==M);else A.point(E[0],E[1])}function g(b,E){return abs(b[0]-n)<epsilon?E>0?0:3:abs(b[0]-t)<epsilon?E>0?2:1:abs(b[1]-e)<epsilon?E>0?1:0:E>0?3:2}function p(b,E){return y(b.x,E.x)}function y(b,E){var C=g(b,1),A=g(E,1);return C!==A?C-A:C===0?E[1]-b[1]:C===1?b[0]-E[0]:C===2?b[1]-E[1]:E[0]-b[0]}return function(b){var E=b,C=clipBuffer(),A,B,M,N,Z,ee,F,O,k,H,ce,U={point:te,lineStart:S,lineEnd:T,polygonStart:ue,polygonEnd:V};function te(Q,le){l(Q,le)&&E.point(Q,le)}function re(){for(var Q=0,le=0,fe=B.length;le<fe;++le)for(var q=B[le],se=1,D=q.length,oe=q[0],Pe,Re,Oe=oe[0],Ne=oe[1];se<D;++se)Pe=Oe,Re=Ne,oe=q[se],Oe=oe[0],Ne=oe[1],Re<=a?Ne>a&&(Oe-Pe)*(a-Re)>(Ne-Re)*(n-Pe)&&++Q:Ne<=a&&(Oe-Pe)*(a-Re)<(Ne-Re)*(n-Pe)&&--Q;return Q}function ue(){E=C,A=[],B=[],ce=!0}function V(){var Q=re(),le=ce&&Q,fe=(A=merge$2(A)).length;(le||fe)&&(b.polygonStart(),le&&(b.lineStart(),h(null,null,1,b),b.lineEnd()),fe&&clipPolygon(A,p,Q,h,b),b.polygonEnd()),E=b,A=B=M=null}function S(){U.point=G,B&&B.push(M=[]),H=!0,k=!1,F=O=NaN}function T(){A&&(G(N,Z),ee&&k&&C.rejoin(),A.push(C.result())),U.point=te,k&&E.lineEnd()}function G(Q,le){var fe=l(Q,le);if(B&&M.push([Q,le]),H)N=Q,Z=le,ee=fe,H=!1,fe&&(E.lineStart(),E.point(Q,le));else if(fe&&k)E.point(Q,le);else{var q=[F=Math.max(clipMin,Math.min(clipMax,F)),O=Math.max(clipMin,Math.min(clipMax,O))],se=[Q=Math.max(clipMin,Math.min(clipMax,Q)),le=Math.max(clipMin,Math.min(clipMax,le))];clipLine(q,se,n,e,t,a)?(k||(E.lineStart(),E.point(q[0],q[1])),E.point(se[0],se[1]),fe||E.lineEnd(),ce=!1):fe&&(E.lineStart(),E.point(Q,le),ce=!1)}F=Q,O=le,k=fe}return U}}var sum=adder();function polygonContains(n,e){var t=e[0],a=e[1],l=[sin(t),-cos(t),0],h=0,g=0;sum.reset();for(var p=0,y=n.length;p<y;++p)if(E=(b=n[p]).length)for(var b,E,C=b[E-1],A=C[0],B=C[1]/2+quarterPi,M=sin(B),N=cos(B),Z=0;Z<E;++Z,A=F,M=k,N=H,C=ee){var ee=b[Z],F=ee[0],O=ee[1]/2+quarterPi,k=sin(O),H=cos(O),ce=F-A,U=ce>=0?1:-1,te=U*ce,re=te>pi,ue=M*k;if(sum.add(atan2(ue*U*sin(te),N*H+ue*cos(te))),h+=re?ce+U*tau:ce,re^A>=t^F>=t){var V=cartesianCross(cartesian(C),cartesian(ee));cartesianNormalizeInPlace(V);var S=cartesianCross(l,V);cartesianNormalizeInPlace(S);var T=(re^ce>=0?-1:1)*asin(S[2]);(a>T||a===T&&(V[0]||V[1]))&&(g+=re^ce>=0?1:-1)}}return(h<-epsilon||h<epsilon&&sum<-epsilon)^g&1}adder();function identity(n){return n}adder();adder();var x0=1/0,y0=x0,x1=-x0,y1=x1,boundsStream={point:boundsPoint,lineStart:noop$1,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1,result:function(){var n=[[x0,y0],[x1,y1]];return x1=y1=-(y0=x0=1/0),n}};function boundsPoint(n,e){n<x0&&(x0=n),n>x1&&(x1=n),e<y0&&(y0=e),e>y1&&(y1=e)}adder();function clip(n,e,t,a){return function(l,h){var g=e(h),p=l.invert(a[0],a[1]),y=clipBuffer(),b=e(y),E=!1,C,A,B,M={point:N,lineStart:ee,lineEnd:F,polygonStart:function(){M.point=O,M.lineStart=k,M.lineEnd=H,A=[],C=[]},polygonEnd:function(){M.point=N,M.lineStart=ee,M.lineEnd=F,A=merge$2(A);var ce=polygonContains(C,p);A.length?(E||(h.polygonStart(),E=!0),clipPolygon(A,compareIntersection,ce,t,h)):ce&&(E||(h.polygonStart(),E=!0),h.lineStart(),t(null,null,1,h),h.lineEnd()),E&&(h.polygonEnd(),E=!1),A=C=null},sphere:function(){h.polygonStart(),h.lineStart(),t(null,null,1,h),h.lineEnd(),h.polygonEnd()}};function N(ce,U){var te=l(ce,U);n(ce=te[0],U=te[1])&&h.point(ce,U)}function Z(ce,U){var te=l(ce,U);g.point(te[0],te[1])}function ee(){M.point=Z,g.lineStart()}function F(){M.point=N,g.lineEnd()}function O(ce,U){B.push([ce,U]);var te=l(ce,U);b.point(te[0],te[1])}function k(){b.lineStart(),B=[]}function H(){O(B[0][0],B[0][1]),b.lineEnd();var ce=b.clean(),U=y.result(),te,re=U.length,ue,V,S;if(B.pop(),C.push(B),B=null,!!re){if(ce&1){if(V=U[0],(ue=V.length-1)>0){for(E||(h.polygonStart(),E=!0),h.lineStart(),te=0;te<ue;++te)h.point((S=V[te])[0],S[1]);h.lineEnd()}return}re>1&&ce&2&&U.push(U.pop().concat(U.shift())),A.push(U.filter(validSegment))}}return M}}function validSegment(n){return n.length>1}function compareIntersection(n,e){return((n=n.x)[0]<0?n[1]-halfPi-epsilon:halfPi-n[1])-((e=e.x)[0]<0?e[1]-halfPi-epsilon:halfPi-e[1])}const clipAntimeridian=clip(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi,-halfPi]);function clipAntimeridianLine(n){var e=NaN,t=NaN,a=NaN,l;return{lineStart:function(){n.lineStart(),l=1},point:function(h,g){var p=h>0?pi:-pi,y=abs(h-e);abs(y-pi)<epsilon?(n.point(e,t=(t+g)/2>0?halfPi:-halfPi),n.point(a,t),n.lineEnd(),n.lineStart(),n.point(p,t),n.point(h,t),l=0):a!==p&&y>=pi&&(abs(e-a)<epsilon&&(e-=a*epsilon),abs(h-p)<epsilon&&(h-=p*epsilon),t=clipAntimeridianIntersect(e,t,h,g),n.point(a,t),n.lineEnd(),n.lineStart(),n.point(p,t),l=0),n.point(e=h,t=g),a=p},lineEnd:function(){n.lineEnd(),e=t=NaN},clean:function(){return 2-l}}}function clipAntimeridianIntersect(n,e,t,a){var l,h,g=sin(n-t);return abs(g)>epsilon?atan((sin(e)*(h=cos(a))*sin(t)-sin(a)*(l=cos(e))*sin(n))/(l*h*g)):(e+a)/2}function clipAntimeridianInterpolate(n,e,t,a){var l;if(n==null)l=t*halfPi,a.point(-pi,l),a.point(0,l),a.point(pi,l),a.point(pi,0),a.point(pi,-l),a.point(0,-l),a.point(-pi,-l),a.point(-pi,0),a.point(-pi,l);else if(abs(n[0]-e[0])>epsilon){var h=n[0]<e[0]?pi:-pi;l=t*h/2,a.point(-h,l),a.point(0,l),a.point(h,l)}else a.point(e[0],e[1])}function clipCircle(n,e){var t=cos(n),a=t>0,l=abs(t)>epsilon;function h(E,C,A,B){circleStream(B,n,e,A,E,C)}function g(E,C){return cos(E)*cos(C)>t}function p(E){var C,A,B,M,N;return{lineStart:function(){M=B=!1,N=1},point:function(Z,ee){var F=[Z,ee],O,k=g(Z,ee),H=a?k?0:b(Z,ee):k?b(Z+(Z<0?pi:-pi),ee):0;if(!C&&(M=B=k)&&E.lineStart(),k!==B&&(O=y(C,F),(!O||pointEqual(C,O)||pointEqual(F,O))&&(F[0]+=epsilon,F[1]+=epsilon,k=g(F[0],F[1]))),k!==B)N=0,k?(E.lineStart(),O=y(F,C),E.point(O[0],O[1])):(O=y(C,F),E.point(O[0],O[1]),E.lineEnd()),C=O;else if(l&&C&&a^k){var ce;!(H&A)&&(ce=y(F,C,!0))&&(N=0,a?(E.lineStart(),E.point(ce[0][0],ce[0][1]),E.point(ce[1][0],ce[1][1]),E.lineEnd()):(E.point(ce[1][0],ce[1][1]),E.lineEnd(),E.lineStart(),E.point(ce[0][0],ce[0][1])))}k&&(!C||!pointEqual(C,F))&&E.point(F[0],F[1]),C=F,B=k,A=H},lineEnd:function(){B&&E.lineEnd(),C=null},clean:function(){return N|(M&&B)<<1}}}function y(E,C,A){var B=cartesian(E),M=cartesian(C),N=[1,0,0],Z=cartesianCross(B,M),ee=cartesianDot(Z,Z),F=Z[0],O=ee-F*F;if(!O)return!A&&E;var k=t*ee/O,H=-t*F/O,ce=cartesianCross(N,Z),U=cartesianScale(N,k),te=cartesianScale(Z,H);cartesianAddInPlace(U,te);var re=ce,ue=cartesianDot(U,re),V=cartesianDot(re,re),S=ue*ue-V*(cartesianDot(U,U)-1);if(!(S<0)){var T=sqrt(S),G=cartesianScale(re,(-ue-T)/V);if(cartesianAddInPlace(G,U),G=spherical(G),!A)return G;var Q=E[0],le=C[0],fe=E[1],q=C[1],se;le<Q&&(se=Q,Q=le,le=se);var D=le-Q,oe=abs(D-pi)<epsilon,Pe=oe||D<epsilon;if(!oe&&q<fe&&(se=fe,fe=q,q=se),Pe?oe?fe+q>0^G[1]<(abs(G[0]-Q)<epsilon?fe:q):fe<=G[1]&&G[1]<=q:D>pi^(Q<=G[0]&&G[0]<=le)){var Re=cartesianScale(re,(-ue+T)/V);return cartesianAddInPlace(Re,U),[G,spherical(Re)]}}}function b(E,C){var A=a?n:pi-n,B=0;return E<-A?B|=1:E>A&&(B|=2),C<-A?B|=4:C>A&&(B|=8),B}return clip(g,p,h,a?[0,-n]:[-pi,n-pi])}function transformer(n){return function(e){var t=new TransformStream;for(var a in n)t[a]=n[a];return t.stream=e,t}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fitExtent(n,e,t){var a=e[1][0]-e[0][0],l=e[1][1]-e[0][1],h=n.clipExtent&&n.clipExtent();n.scale(150).translate([0,0]),h!=null&&n.clipExtent(null),geoStream(t,n.stream(boundsStream));var g=boundsStream.result(),p=Math.min(a/(g[1][0]-g[0][0]),l/(g[1][1]-g[0][1])),y=+e[0][0]+(a-p*(g[1][0]+g[0][0]))/2,b=+e[0][1]+(l-p*(g[1][1]+g[0][1]))/2;return h!=null&&n.clipExtent(h),n.scale(p*150).translate([y,b])}function fitSize(n,e,t){return fitExtent(n,[[0,0],e],t)}var maxDepth=16,cosMinDistance=cos(30*radians);function resample(n,e){return+e?resample$1(n,e):resampleNone(n)}function resampleNone(n){return transformer({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}function resample$1(n,e){function t(a,l,h,g,p,y,b,E,C,A,B,M,N,Z){var ee=b-a,F=E-l,O=ee*ee+F*F;if(O>4*e&&N--){var k=g+A,H=p+B,ce=y+M,U=sqrt(k*k+H*H+ce*ce),te=asin(ce/=U),re=abs(abs(ce)-1)<epsilon||abs(h-C)<epsilon?(h+C)/2:atan2(H,k),ue=n(re,te),V=ue[0],S=ue[1],T=V-a,G=S-l,Q=F*T-ee*G;(Q*Q/O>e||abs((ee*T+F*G)/O-.5)>.3||g*A+p*B+y*M<cosMinDistance)&&(t(a,l,h,g,p,y,V,S,re,k/=U,H/=U,ce,N,Z),Z.point(V,S),t(V,S,re,k,H,ce,b,E,C,A,B,M,N,Z))}}return function(a){var l,h,g,p,y,b,E,C,A,B,M,N,Z={point:ee,lineStart:F,lineEnd:k,polygonStart:function(){a.polygonStart(),Z.lineStart=H},polygonEnd:function(){a.polygonEnd(),Z.lineStart=F}};function ee(te,re){te=n(te,re),a.point(te[0],te[1])}function F(){C=NaN,Z.point=O,a.lineStart()}function O(te,re){var ue=cartesian([te,re]),V=n(te,re);t(C,A,E,B,M,N,C=V[0],A=V[1],E=te,B=ue[0],M=ue[1],N=ue[2],maxDepth,a),a.point(C,A)}function k(){Z.point=ee,a.lineEnd()}function H(){F(),Z.point=ce,Z.lineEnd=U}function ce(te,re){O(l=te,re),h=C,g=A,p=B,y=M,b=N,Z.point=O}function U(){t(C,A,E,B,M,N,h,g,l,p,y,b,maxDepth,a),Z.lineEnd=k,k()}return Z}}var transformRadians=transformer({point:function(n,e){this.stream.point(n*radians,e*radians)}});function projection(n){return projectionMutator(function(){return n})()}function projectionMutator(n){var e,t=150,a=480,l=250,h,g,p=0,y=0,b=0,E=0,C=0,A,B,M=null,N=clipAntimeridian,Z=null,ee,F,O,k=identity,H=.5,ce=resample(V,H),U,te;function re(G){return G=B(G[0]*radians,G[1]*radians),[G[0]*t+h,g-G[1]*t]}function ue(G){return G=B.invert((G[0]-h)/t,(g-G[1])/t),G&&[G[0]*degrees,G[1]*degrees]}function V(G,Q){return G=e(G,Q),[G[0]*t+h,g-G[1]*t]}re.stream=function(G){return U&&te===G?U:U=transformRadians(N(A,ce(k(te=G))))},re.clipAngle=function(G){return arguments.length?(N=+G?clipCircle(M=G*radians,6*radians):(M=null,clipAntimeridian),T()):M*degrees},re.clipExtent=function(G){return arguments.length?(k=G==null?(Z=ee=F=O=null,identity):clipExtent(Z=+G[0][0],ee=+G[0][1],F=+G[1][0],O=+G[1][1]),T()):Z==null?null:[[Z,ee],[F,O]]},re.scale=function(G){return arguments.length?(t=+G,S()):t},re.translate=function(G){return arguments.length?(a=+G[0],l=+G[1],S()):[a,l]},re.center=function(G){return arguments.length?(p=G[0]%360*radians,y=G[1]%360*radians,S()):[p*degrees,y*degrees]},re.rotate=function(G){return arguments.length?(b=G[0]%360*radians,E=G[1]%360*radians,C=G.length>2?G[2]%360*radians:0,S()):[b*degrees,E*degrees,C*degrees]},re.precision=function(G){return arguments.length?(ce=resample(V,H=G*G),T()):sqrt(H)},re.fitExtent=function(G,Q){return fitExtent(re,G,Q)},re.fitSize=function(G,Q){return fitSize(re,G,Q)};function S(){B=compose(A=rotateRadians(b,E,C),e);var G=e(p,y);return h=a-G[0]*t,g=l+G[1]*t,T()}function T(){return U=te=null,re}return function(){return e=n.apply(this,arguments),re.invert=e.invert&&ue,S()}}function azimuthalRaw(n){return function(e,t){var a=cos(e),l=cos(t),h=n(a*l);return[h*l*sin(e),h*sin(t)]}}function azimuthalInvert(n){return function(e,t){var a=sqrt(e*e+t*t),l=n(a),h=sin(l),g=cos(l);return[atan2(e*h,a*g),asin(a&&t*h/a)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(n){return sqrt(2/(1+n))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(n){return 2*asin(n/2)});var azimuthalEquidistantRaw=azimuthalRaw(function(n){return(n=acos(n))&&n/sin(n)});azimuthalEquidistantRaw.invert=azimuthalInvert(function(n){return n});function geoAzimuthalEquidistant(){return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(180-.001)}function equirectangularRaw(n,e){return[n,e]}equirectangularRaw.invert=equirectangularRaw;function buffer$3(n,e,t){t=t||{};var a=t.units||"kilometers",l=t.steps||8;if(!n)throw new Error("geojson is required");if(typeof t!="object")throw new Error("options must be an object");if(typeof l!="number")throw new Error("steps must be an number");if(e===void 0)throw new Error("radius is required");if(l<=0)throw new Error("steps must be greater than 0");var h=[];switch(n.type){case"GeometryCollection":return geomEach(n,function(g){var p=bufferFeature(g,e,a,l);p&&h.push(p)}),featureCollection$6(h);case"FeatureCollection":return featureEach$2(n,function(g){var p=bufferFeature(g,e,a,l);p&&featureEach$2(p,function(y){y&&h.push(y)})}),featureCollection$6(h)}return bufferFeature(n,e,a,l)}function bufferFeature(n,e,t,a){var l=n.properties||{},h=n.type==="Feature"?n.geometry:n;if(h.type==="GeometryCollection"){var g=[];return geomEach(n,function(N){var Z=bufferFeature(N,e,t,a);Z&&g.push(Z)}),featureCollection$6(g)}var p=defineProjection(h),y={type:h.type,coordinates:projectCoords(h.coordinates,p)},b=new GeoJSONReader,E=b.read(y),C=radiansToLength(lengthToRadians(e,t),"meters"),A=BufferOp.bufferOp(E,C,a),B=new GeoJSONWriter;if(A=B.write(A),!coordsIsNaN(A.coordinates)){var M={type:A.type,coordinates:unprojectCoords(A.coordinates,p)};return feature$2(M,l)}}function coordsIsNaN(n){return Array.isArray(n[0])?coordsIsNaN(n[0]):isNaN(n[0])}function projectCoords(n,e){return typeof n[0]!="object"?e(n):n.map(function(t){return projectCoords(t,e)})}function unprojectCoords(n,e){return typeof n[0]!="object"?e.invert(n):n.map(function(t){return unprojectCoords(t,e)})}function defineProjection(n){var e=center(n).geometry.coordinates,t=[-e[0],-e[1]];return geoAzimuthalEquidistant().rotate(t).scale(earthRadius)}function union$1(n,e,t){t===void 0&&(t={});var a=getGeom(n),l=getGeom(e),h=polygonClipping.union(a.coordinates,l.coordinates);return h.length===0?null:h.length===1?polygon$8(h[0],t.properties):multiPolygon(h,t.properties)}function intersect(n,e,t){t===void 0&&(t={});var a=getGeom(n),l=getGeom(e),h=polygonClipping.intersection(a.coordinates,l.coordinates);return h.length===0?null:h.length===1?polygon$8(h[0],t.properties):multiPolygon(h,t.properties)}class Tiles{static MapRange(e,t){const a=[];if(e.total>1e5)throw`Tilerange too big (z is ${e.zoomlevel}, total tiles needed: ${e.total})`;for(let h=e.xstart;h<=e.xend;h++)for(let g=e.ystart;g<=e.yend;g++){const p=t(h,g);a.push(p)}return a}static tile_bounds(e,t,a){return[[Tiles.tile2lat(a,e),Tiles.tile2long(t,e)],[Tiles.tile2lat(a+1,e),Tiles.tile2long(t+1,e)]]}static tile_bounds_lon_lat(e,t,a){return[[Tiles.tile2long(t,e),Tiles.tile2lat(a,e)],[Tiles.tile2long(t+1,e),Tiles.tile2lat(a+1,e)]]}static centerPointOf(e,t,a){return[(Tiles.tile2long(t,e)+Tiles.tile2long(t+1,e))/2,(Tiles.tile2lat(a,e)+Tiles.tile2lat(a+1,e))/2]}static tile_index(e,t,a){return(t*(2<<e)+a)*100+e}static tile_from_index(e){const t=e%100,a=2<<t;e=Math.floor(e/100);const l=Math.floor(e/a);return[t,l,e%a]}static embedded_tile(e,t,a){return{x:Tiles.lon2tile(t,a),y:Tiles.lat2tile(e,a),z:a}}static TileRangeBetween(e,t,a,l,h){const g=Tiles.embedded_tile(t,a,e),p=Tiles.embedded_tile(l,h,e),y=Math.min(g.x,p.x),b=Math.max(g.x,p.x),E=Math.min(g.y,p.y),C=Math.max(g.y,p.y),A=(1+b-y)*(1+C-E);return{xstart:y,xend:b,ystart:E,yend:C,total:A,zoomlevel:e}}static tile2long(e,t){return e/Math.pow(2,t)*360-180}static tile2lat(e,t){const a=Math.PI-2*Math.PI*e/Math.pow(2,t);return 180/Math.PI*Math.atan(.5*(Math.exp(a)-Math.exp(-a)))}static lon2tile(e,t){return Math.floor((e+180)/360*Math.pow(2,t))}static lat2tile(e,t){return Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,t))}}var jxonExports={},jxon={get exports(){return jxonExports},set exports(n){jxonExports=n}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(__viteBrowserExternal$1);(function(n,e){(function(t,a){typeof window=="object"&&window.DOMImplementation&&window.XMLSerializer&&window.DOMParser?n.exports=a(window):n.exports=a(require$$0$3,!0)})(commonjsGlobal,function(t,a){var l={valueKey:"_",attrKey:"$",attrPrefix:"$",lowerCaseTags:!1,trueIsEmpty:!1,autoDate:!1,ignorePrefixedNodes:!1,parseValues:!1},h=[],g=/^\s*$/,p=/^(?:true|false)$/i,y;return new function(){this.config=function(M){for(var N in M)l[N]=M[N];l.parserErrorHandler&&(y=new t.DOMParser({errorHandler:l.parserErrorHandler,locator:{}}))};function b(M){return l.parseValues?g.test(M)?null:p.test(M)?M.toLowerCase()==="true":isFinite(M)?parseFloat(M):l.autoDate&&isFinite(Date.parse(M))?new Date(M):M:M}function E(){}E.prototype.toString=function(){return"null"},E.prototype.valueOf=function(){return null};function C(M){return M===null?new E:M instanceof Object?M:new M.constructor(M)}function A(M,N,Z,ee){var F=4,O=3,k=1,H=h.length,ce=M.hasChildNodes(),U=M.nodeType===M.ELEMENT_NODE&&M.hasAttributes(),te=Boolean(N&2),re=0,ue="",V=te?{}:l.trueIsEmpty?!0:"",S,T;if(ce)for(var G,Q=0;Q<M.childNodes.length;Q++)G=M.childNodes.item(Q),G.nodeType===F?ue+=G.nodeValue:G.nodeType===O?ue+=G.nodeValue.trim():G.nodeType===k&&!(l.ignorePrefixedNodes&&G.prefix)&&h.push(G);var le=h.length,fe=b(ue);!te&&(ce||U)&&(V=N===0?C(fe):{});for(var q=H;q<le;q++)S=h[q].nodeName,l.lowerCaseTags&&(S=S.toLowerCase()),T=A(h[q],N,Z,ee),V.hasOwnProperty(S)?(V[S].constructor!==Array&&(V[S]=[V[S]]),V[S].push(T)):(V[S]=T,re++);if(U){for(var se=M.attributes.length,D=ee?"":l.attrPrefix,oe=ee?{}:V,Pe,Re,Oe=0;Oe<se;re++,Oe++)Pe=M.attributes.item(Oe),Re=Pe.name,l.lowerCaseTags&&(Re=Re.toLowerCase()),oe[D+Re]=b(Pe.value.trim());ee&&(Z&&Object.freeze(oe),V[l.attrKey]=oe,re-=se-1)}return N===3||(N===2||N===1&&re>0)&&ue?V[l.valueKey]=fe:!te&&re===0&&ue&&(V=fe),Z&&(te||re>0)&&Object.freeze(V),h.length=H,V}function B(M,N,Z){var ee,F,O;if(Z.constructor===String||Z.constructor===Number||Z.constructor===Boolean){if(N.appendChild(M.createTextNode(Z.toString())),Z===Z.valueOf())return}else Z.constructor===Date&&N.appendChild(M.createTextNode(Z.toISOString()));for(var k in Z)if(ee=Z[k],ee!==void 0&&(ee===null&&(ee={}),!(isFinite(k)||ee instanceof Function)))if(k===l.valueKey)ee!==null&&ee!==!0&&N.appendChild(M.createTextNode(ee.constructor===Date?ee.toISOString():String(ee)));else if(k===l.attrKey)for(var H in ee)N.setAttribute(H,ee[H]);else if(k===l.attrPrefix+"xmlns")a&&N.setAttribute(k.slice(1),ee);else if(k.charAt(0)===l.attrPrefix)N.setAttribute(k.slice(1),ee);else if(ee.constructor===Array)for(var ce in ee)ee.hasOwnProperty(ce)&&(O=ee[ce]&&ee[ce][l.attrPrefix+"xmlns"]||N.namespaceURI,O?F=M.createElementNS(O,k):F=M.createElement(k),B(M,F,ee[ce]||{}),N.appendChild(F));else O=(ee||{})[l.attrPrefix+"xmlns"]||N.namespaceURI,O?F=M.createElementNS(O,k):F=M.createElement(k),ee instanceof Object?B(M,F,ee):ee!==null&&(ee!==!0||!l.trueIsEmpty)&&F.appendChild(M.createTextNode(ee.toString())),N.appendChild(F)}this.xmlToJs=this.build=function(M,N,Z,ee){var F=arguments.length>1&&typeof N=="number"?N&3:1;return A(M,F,Z||!1,arguments.length>3?ee:F===3)},this.jsToXml=this.unbuild=function(M,N,Z,ee){var F=t.document&&t.document.implementation||new t.DOMImplementation,O=F.createDocument(N||null,Z||"",ee||null);return B(O,O.documentElement||O,M),O},this.stringToXml=function(M){return y||(y=new t.DOMParser),y.parseFromString(M,"application/xml")},this.xmlToString=function(M){return typeof M.xml<"u"?M.xml:new t.XMLSerializer().serializeToString(M)},this.stringToJs=function(M){var N=this.stringToXml(M);return this.xmlToJs(N)},this.jsToString=this.stringify=function(M,N,Z,ee){return this.xmlToString(this.jsToXml(M,N,Z,ee))},this.each=function(M,N,Z){M instanceof Array?M.forEach(N,Z):[M].forEach(N,Z)}}})})(jxon);var JXON=jxonExports;JXON.config({attrPrefix:"@"});function togpx(n,e){if(e=function(b,E){for(var C in b)E.hasOwnProperty(C)&&(b[C]=E[C]);return b}({creator:"togpx",metadata:void 0,featureTitle:a,featureDescription:l,featureLink:void 0,featureCoordTimes:h},e||{}),typeof e.featureCoordTimes=="string"){var t=e.featureCoordTimes;e.featureCoordTimes=function(b){return b.properties[t]}}function a(b){if(!b)return"";if(typeof b.tags=="object"){var E=a(b.tags);if(E!=="")return E}return b.name?b.name:b.ref?b.ref:b.id?b.id:""}function l(b){if(!b)return"";if(typeof b.tags=="object")return l(b.tags);var E="";for(var C in b)typeof b[C]!="object"&&(E+=C+"="+b[C]+`
`);return E.substr(0,E.length-1)}function h(b){return b.properties&&(b.properties.times||b.properties.coordTimes)||null}function g(b,E){e.featureLink&&(b.link={"@href":e.featureLink(E.properties)})}var p={gpx:{"@xmlns":"http://www.topografix.com/GPX/1/1","@xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","@xsi:schemaLocation":"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd","@version":"1.1",metadata:null,wpt:[],trk:[]}};e.creator&&(p.gpx["@creator"]=e.creator),e.metadata?p.gpx.metadata=e.metadata:delete e.metadata;var y;return n.type==="FeatureCollection"?y=n.features:n.type==="Feature"?y=[n]:y=[{type:"Feature",properties:{},geometry:n}],y.forEach(function b(E){switch(E.geometry.type){case"Point":case"MultiPoint":var C=E.geometry.coordinates;E.geometry.type=="Point"&&(C=[C]),C.forEach(function(B){o={"@lat":B[1],"@lon":B[0],name:e.featureTitle(E.properties),desc:e.featureDescription(E.properties)},B[2]!==void 0&&(o.ele=B[2]),g(o,E),p.gpx.wpt.push(o)});break;case"LineString":case"MultiLineString":var C=E.geometry.coordinates,A=e.featureCoordTimes(E);E.geometry.type=="LineString"&&(C=[C]),o={name:e.featureTitle(E.properties),desc:e.featureDescription(E.properties)},g(o,E),o.trkseg=[],C.forEach(function(B){var M={trkpt:[]};B.forEach(function(N,Z){var ee={"@lat":N[1],"@lon":N[0]};N[2]!==void 0&&(ee.ele=N[2]),A&&A[Z]&&(ee.time=A[Z]),M.trkpt.push(ee)}),o.trkseg.push(M)}),p.gpx.trk.push(o);break;case"Polygon":case"MultiPolygon":o={name:e.featureTitle(E.properties),desc:e.featureDescription(E.properties)},g(o,E),o.trkseg=[];var C=E.geometry.coordinates,A=e.featureCoordTimes(E);E.geometry.type=="Polygon"&&(C=[C]),C.forEach(function(B){B.forEach(function(M){var N={trkpt:[]},Z=0;M.forEach(function(ee){var F={"@lat":ee[1],"@lon":ee[0]};ee[2]!==void 0&&(F.ele=ee[2]),A&&A[Z]&&(F.time=A[Z]),Z++,N.trkpt.push(F)}),o.trkseg.push(N)})}),p.gpx.trk.push(o);break;case"GeometryCollection":E.geometry.geometries.forEach(function(B){var M={properties:E.properties,geometry:B};b(M)});break;default:console.log("warning: unsupported geometry type: "+E.geometry.type)}}),gpx_str=JXON.stringify(p),gpx_str}var togpx_1=togpx;const Io=class{static isRetina(){return Utils.runningFromConsole?!1:window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min--moz-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)").matches)||window.devicePixelRatio&&window.devicePixelRatio>=2}};let Constants=Io;ke(Constants,"vNumber","0.26.0"),ke(Constants,"ImgurApiKey","7070e7167f0a25a"),ke(Constants,"mapillary_client_token_v4","MLY|4441509239301885|b40ad2d3ea105435bd40c7e76993ae85"),ke(Constants,"MaprouletteApiKey",""),ke(Constants,"defaultOverpassUrls",["https://overpass-api.de/api/interpreter","https://overpass.kumi.systems/api/interpreter","https://overpass.openstreetmap.ru/cgi/interpreter"]),ke(Constants,"added_by_default",["selected_element","gps_location","gps_location_history","home_location","gps_track"]),ke(Constants,"no_include",["conflation","left_right_style","split_point","current_view","matchpoint"]),ke(Constants,"priviliged_layers",[...Io.added_by_default,"type_node","note","import_candidate","direction",...Io.no_include]),ke(Constants,"userJourney",{moreScreenUnlock:1,personalLayoutUnlock:5,historyLinkVisible:10,deletePointsOfOthersUnlock:20,tagsVisibleAt:25,tagsVisibleAndWikiLinked:30,mapCompleteHelpUnlock:50,themeGeneratorReadOnlyUnlock:50,themeGeneratorFullUnlock:500,addNewPointWithUnreadMessagesUnlock:500,minZoomLevelToAddNewPoints:Io.isRetina()?18:19,importHelperUnlock:5e3}),ke(Constants,"updateTimeoutSec",30),ke(Constants,"nearbyVisitTime",30*60),ke(Constants,"distanceToChangeObjectBins",[25,50,100,500,1e3,5e3,Number.MAX_VALUE]),ke(Constants,"themeOrder",["personal","cyclofix","waste","etymology","food","cafes_and_pubs","playgrounds","hailhydrant","toilets","aed","bookcases"]),ke(Constants,"zoomToLocationTimeout",60),ke(Constants,"countryCoderEndpoint","https://raw.githubusercontent.com/pietervdvn/MapComplete-data/main/latlon2country"),ke(Constants,"OsmPreferenceKeyPicturesLicense","pictures-license");const ai=class{static surfaceAreaInSqMeters(e){return area$1(e)}static centerpoint(e){const t=center(e);return t.properties=e.properties,t.id=e.id,t}static centerpointCoordinates(e){return center(e).geometry.coordinates}static distanceBetween(e,t){return distance$b(e,t,{units:"meters"})}static convexHull(e,t){return convex(e,t)}static calculateOverlap(e,t){const a=BBox.get(e),l=[];if(e.geometry.type==="Point"){const h=e.geometry.coordinates;for(const g of t)if(!(e.properties.id!==void 0&&e.properties.id===g.properties.id)){if(g.geometry===void 0)throw console.error("No geometry for feature ",e),"List of other features contains a feature without geometry an undefined";ai.inside(h,g)&&l.push({feat:g,overlap:void 0})}return l}if(e.geometry.type==="LineString"){for(const h of t){if(e.properties.id!==void 0&&e.properties.id===h.properties.id)continue;const g=ai.calculateInstersection(e,h,a);g!==null&&l.push({feat:h,overlap:g})}return l}if(e.geometry.type==="Polygon"||e.geometry.type==="MultiPolygon"){for(const h of t){if(e.properties.id!==void 0&&e.properties.id===h.properties.id)continue;if(h.geometry.type==="Point"){this.inside(h,e)&&l.push({feat:h,overlap:void 0});continue}const g=this.calculateInstersection(e,h,a);g!==null&&l.push({feat:h,overlap:g})}return l}return console.error("Could not correctly calculate the overlap of ",e,": unsupported type"),l}static pointInPolygonCoordinates(e,t,a){if(!ai.pointWithinRing(e,t,a[0]))return!1;for(let h=1;h<a.length;h++)if(ai.pointWithinRing(e,t,a[h]))return!1;return!0}static inside(e,t){if(t.geometry.type==="Point")return!1;e.geometry!==void 0&&(e=e.geometry.coordinates);const a=e[0],l=e[1];if(t.geometry.type==="MultiPolygon"){const h=t.geometry.coordinates;for(const g of h)if(ai.pointInPolygonCoordinates(a,l,g))return!0;return!1}if(t.geometry.type==="Polygon")return ai.pointInPolygonCoordinates(a,l,t.geometry.coordinates);throw"GeoOperations.inside: unsupported geometry type "+t.geometry.type}static lengthInMeters(e){return length$2(e)*1e3}static buffer(e,t){return buffer$3(e,t/1e3,{units:"kilometers"})}static bbox(e){const[t,a,l,h]=bbox$4(e);return{type:"Feature",geometry:{type:"LineString",coordinates:[[t,a],[l,a],[l,h],[t,h],[t,a]]}}}static nearestPoint(e,t){return e.geometry.type==="Polygon"&&(e={...e},e.geometry={...e.geometry},e.geometry.type="LineString",e.geometry.coordinates=e.geometry.coordinates[0]),nearestPointOnLine(e,t,{units:"kilometers"})}static toCSV(e){const t=new Set,a=[];function l(g){t.has(g)||(t.add(g),a.push(g))}l("_lat"),l("_lon");const h=[];for(const g of e){const p=g.properties;for(const y in p)p.hasOwnProperty(y)&&l(y)}a.sort();for(const g of e){const p=g.properties;let y="";for(const b of a){const E=p[b];E===void 0?y+=",":y+=JSON.stringify(E)+","}h.push(y)}return a.map(g=>JSON.stringify(g)).join(",")+`
`+h.join(`
`)}static ConvertWgs84To900913(e){const t=e[0],a=e[1],l=t*ai._originShift/180;let h=Math.log(Math.tan((90+a)*Math.PI/360))/(Math.PI/180);return h=h*ai._originShift/180,[l,h]}static Convert900913ToWgs84(e){const t=e[0],a=e[1],l=180*t/ai._originShift;let h=180*a/ai._originShift;return h=180/Math.PI*(2*Math.atan(Math.exp(h*Math.PI/180))-Math.PI/2),[l,h]}static GeoJsonToWGS84(e){return toWgs84(e)}static SimplifyCoordinates(e){const t=[];for(let a=1;a<e.length-1;a++){const l=e[a],h=e[a-1],g=e[a+1],p=bearing$3(h,l,{final:!0}),y=bearing$3(l,g);Math.abs(y-p)<2||t.push(l)}return t}static LineIntersections(e,t){return lineIntersect(e,t).features.map(a=>a.geometry.coordinates)}static AsGpx(e,t){var h,g,p,y;const a=(t==null?void 0:t.gpxMetadata)??{};a.time=a.time??new Date().toISOString();const l=e.properties;return(t==null?void 0:t.layer)!==void 0&&(a.name=(p=(g=(h=t==null?void 0:t.layer.title)==null?void 0:h.GetRenderValue(l))==null?void 0:g.Subs(l))==null?void 0:p.txt,a.desc="Generated with MapComplete layer "+(t==null?void 0:t.layer.id),(y=l._backend)!=null&&y.contains("openstreetmap")&&(a.copyright="Data copyrighted by OpenStreetMap-contributors, freely available under ODbL. See https://www.openstreetmap.org/copyright",a.author=l["_last_edit:contributor"],a.link="https://www.openstreetmap.org/"+l.id,a.time=l["_last_edit:timestamp"])),togpx_1(e,{creator:"MapComplete "+Constants.vNumber,metadata:a})}static IdentifieCommonSegments(e){const t=new Map;for(let p=0;p<e.length;p++){const y=e[p];for(let b=0;b<y.length-1;b++){const E=y[b],C=y[b+1],A=E[0]>C[0]||E[0]==C[0]&&E[1]>C[1];let B;A?B=""+C+";"+E:B=""+E+";"+C;const M={index:p,isReversed:A};if(t.has(B)){t.get(B).members.push(M);continue}let N;A?N={start:C,end:E,members:[M],intermediate:[]}:N={start:E,end:C,members:[M],intermediate:[]},t.set(B,N)}}let a=!1,l=Array.from(t.values());const h=new Map;for(const p of l){p.members.sort((b,E)=>b.index-E.index);const y=p.start+"";h.has(y)||h.set(y,[]),h.get(y).push(p)}function g(p,y){if(p.members===y.members)return!0;if(p.members.length!==y.members.length)return!1;for(let b=0;b<p.members.length;b++){const E=p.members[b],C=y.members[b];if(E.index!==C.index||E.isReversed!==C.isReversed)return!1}return y.members=p.members,!0}do{a=!1;const p=new Set;for(const y of l){if(p.has(y))continue;console.log("Considering edge",y);const b=h.get(y.end+"");if(console.log("Matchign endpoints:",b),b!==void 0)for(let E=0;E<b.length;E++){const C=b[E];if(!p.has(C)&&g(y,C)){a=!0,console.log("Merging ",y,"with ",C),y.intermediate.push(y.end),y.end=C.end,p.add(C),b.splice(E,1);break}}}l=l.filter(y=>!p.has(y))}while(a);return[]}static removeOvernoding(e){if(e.geometry.type!=="LineString"&&e.geometry.type!=="Polygon")throw"Overnode removal is only supported on linestrings and polygons";const t={...e,geometry:{...e.geometry}};let a;e.geometry.type==="LineString"?(a=[...e.geometry.coordinates],t.geometry.coordinates=a):(a=[...e.geometry.coordinates[0]],t.geometry.coordinates[0]=a);for(let l=a.length-2;l>=1;l--){const h=a[l],g=a[l+1],p=a[l-1];if(ai.distanceBetween(h,p)<.1){a.splice(l,1);continue}if(l==a.length-2&&ai.distanceBetween(h,g)<.1){a.splice(l,1);continue}const b=bearing$3(h,g),E=bearing$3(p,h),C=Math.abs(b-E);(C<4||360-C<4)&&a.splice(l,1)}return t}static pointWithinRing(e,t,a){let l=!1;for(let h=0,g=a.length-1;h<a.length;g=h++){const p=a[h],y=a[g],b=p[0],E=p[1],C=y[0],A=y[1];E>t!=A>t&&e<(C-b)*(t-E)/(A-E)+b&&(l=!l)}return l}static calculateInstersection(e,t,a,l){if(e.geometry.type==="LineString"){if(l=l??BBox.get(t),!a.overlapsWith(l))return null;let g=lineIntersect(e,t);if(g.features.length==0){const C=e.geometry.coordinates[0];return this.inside(C,t)?this.lengthInMeters(e):null}let p=g.features.map(E=>E.geometry.coordinates);if(t.geometry.type==="LineString")return p.length>0?0:null;if(p.length==1){const E=e.geometry.coordinates,C=E[0];this.inside(C,t)?p.push(C):p.push(E[E.length-1])}let y=lineSlice(point$d(p[0]),point$d(p[1]),e);return y==null?null:length$2(y)*1e3}if(e.geometry.type==="Polygon"||e.geometry.type==="MultiPolygon"){const h=BBox.get(t);if(!a.overlapsWith(h))return null;if(t.geometry.type==="LineString")return this.calculateInstersection(t,e,h,a);try{const p=intersect(e,t);return p==null?null:area$1(p)}catch(p){if(p.message==="Each LinearRing of a Polygon must have 4 or more Positions.")return null;throw p}}throw"CalculateIntersection fallthrough: can not calculate an intersection between features"}static bearing(e,t){return bearing$3(e,t)}static completelyWithin(e,t){return booleanWithin(e,t)}};let GeoOperations=ai;ke(GeoOperations,"_earthRadius",6378137),ke(GeoOperations,"_originShift",2*Math.PI*ai._earthRadius/2),ke(GeoOperations,"union",union$1),ke(GeoOperations,"intersect",intersect);const Pi=class{constructor(e){ke(this,"maxLat");ke(this,"maxLon");ke(this,"minLat");ke(this,"minLon");this.maxLat=-90,this.maxLon=-180,this.minLat=90,this.minLon=180;for(const t of e)this.maxLon=Math.max(this.maxLon,t[0]),this.maxLat=Math.max(this.maxLat,t[1]),this.minLon=Math.min(this.minLon,t[0]),this.minLat=Math.min(this.minLat,t[1]);this.maxLon=Math.min(this.maxLon,180),this.maxLat=Math.min(this.maxLat,90),this.minLon=Math.max(this.minLon,-180),this.minLat=Math.max(this.minLat,-90),this.check()}static fromLeafletBounds(e){return new Pi([[e.getWest(),e.getNorth()],[e.getEast(),e.getSouth()]])}static get(e){var t;if(((t=e.bbox)==null?void 0:t.overlapsWith)===void 0){const a=bbox$4(e);e.bbox=new Pi([[a[0],a[1]],[a[2],a[3]]])}return e.bbox}static bboxAroundAll(e){let t=-90,a=-180,l=80,h=180;for(const g of e)t=Math.max(t,g.maxLat),a=Math.max(a,g.maxLon),l=Math.min(l,g.minLat),h=Math.min(h,g.minLon);return new Pi([[a,t],[h,l]])}static fromTile(e,t,a){return new Pi(Tiles.tile_bounds_lon_lat(e,t,a))}static fromTileIndex(e){return e===0?Pi.global:Pi.fromTile(...Tiles.tile_from_index(e))}unionWith(e){return new Pi([[Math.max(this.maxLon,e.maxLon),Math.max(this.maxLat,e.maxLat)],[Math.min(this.minLon,e.minLon),Math.min(this.minLat,e.minLat)]])}containingTileRange(e){return Tiles.TileRangeBetween(e,this.minLat,this.minLon,this.maxLat,this.maxLon)}overlapsWith(e){return this.maxLon<e.minLon||this.maxLat<e.minLat||this.minLon>e.maxLon?!1:this.minLat<=e.maxLat}isContainedIn(e){return!(this.maxLon>e.maxLon||this.maxLat>e.maxLat||this.minLon<e.minLon||this.minLat<e.minLat)}getEast(){return this.maxLon}getNorth(){return this.maxLat}getWest(){return this.minLon}getSouth(){return this.minLat}contains(e){return this.minLat<=e[1]&&e[1]<=this.maxLat&&this.minLon<=e[0]&&e[0]<=this.maxLon}pad(e,t=2){const a=Math.min(t/2,Math.abs(this.maxLat-this.minLat)*e),l=Math.min(t/2,Math.abs(this.maxLon-this.minLon)*e);return new Pi([[this.minLon-l,this.minLat-a],[this.maxLon+l,this.maxLat+a]])}padAbsolute(e){return new Pi([[this.minLon-e,this.minLat-e],[this.maxLon+e,this.maxLat+e]])}toLeaflet(){return[[this.minLat,this.minLon],[this.maxLat,this.maxLon]]}asGeoJson(e){return{type:"Feature",properties:e,geometry:{type:"Polygon",coordinates:[[[this.minLon,this.minLat],[this.maxLon,this.minLat],[this.maxLon,this.maxLat],[this.minLon,this.maxLat],[this.minLon,this.minLat]]]}}}expandToTileBounds(e){const t=Tiles.embedded_tile(this.minLat,this.minLon,e),a=Tiles.embedded_tile(this.maxLat,this.maxLon,e),l=Tiles.tile_bounds_lon_lat(t.z,t.x,t.y),h=Tiles.tile_bounds_lon_lat(a.z,a.x,a.y);return new Pi([].concat(l,h))}toMercator(){const[e,t]=GeoOperations.ConvertWgs84To900913([this.minLon,this.minLat]),[a,l]=GeoOperations.ConvertWgs84To900913([this.maxLon,this.maxLat]);return{minLon:e,maxLon:a,minLat:t,maxLat:l}}check(){if(isNaN(this.maxLon)||isNaN(this.maxLat)||isNaN(this.minLon)||isNaN(this.minLat))throw console.trace("BBox with NaN detected:",this),"BBOX has NAN"}};let BBox=Pi;ke(BBox,"global",new Pi([[-180,-90],[180,90]]));class TagsFilter{}const is=class extends TagsFilter{constructor(t,a){super();ke(this,"key");ke(this,"value");if(this.key=t,this.value=a,t===void 0||t==="")throw"Invalid key: undefined or empty";if(a===void 0)throw`Invalid value while constructing a Tag with key '${t}': value is undefined`;a==="*"&&console.warn(`Got suspicious tag ${t}=*   ; did you mean ${t}~* ?`)}matchesProperties(t){const a=t[this.key];return a===void 0&&(this.value===""||this.value===void 0)?!0:a===this.value}asOverpass(){return this.value===""?['[!"'+this.key+'"]']:[`["${this.key}"="${this.value}"]`]}asHumanString(t,a,l){let h=this.value;return a&&(h=Utils.EllipsesAfter(h,25)),h===""||h===void 0&&l!==void 0?l!==void 0&&(l[this.key]??"")===""?"":"<span class='line-through'>"+this.key+"</span>":t?`<a href='https://wiki.openstreetmap.org/wiki/Key:${this.key}' target='_blank'>${this.key}</a>=<a href='https://wiki.openstreetmap.org/wiki/Tag:${this.key}%3D${this.value}' target='_blank'>${h}</a>`:this.key+"="+h}isUsableAsAnswer(){return!0}shadows(t){return t.key!==void 0&&t.key!==this.key?!1:t.matchesProperties({[this.key]:this.value})}usedKeys(){return[this.key]}usedTags(){return this.value==""?[]:[this]}asChange(t){return[{k:this.key,v:this.value}]}optimize(){return this}isNegative(){return!1}visit(t){t(this)}};let Tag=is;ke(Tag,"newlyCreated",new is("_newly_created","yes"));class RegexTag extends TagsFilter{constructor(t,a,l=!1){super();ke(this,"key");ke(this,"value");ke(this,"invert");ke(this,"matchesEmpty");this.key=t,this.value=a,this.invert=l,this.matchesEmpty=RegexTag.doesMatch("",this.value)}static doesMatch(t,a){if(t!==void 0)return typeof t=="number"&&(t=""+t),typeof a=="string"?t===a:t.match(a)!==null}static source(t){return typeof t=="string"?t:t.source}asOverpass(){const t=this.invert?"!":"";if(typeof this.key!="string")return[`[~"${this.key.source}"${t}~"${RegexTag.source(this.value)}"]`];if(this.value instanceof RegExp){const a=this.value.source;if(a==="^..*$"||a===".+")return[`[${t}"${this.key}"]`];const l=this.value.ignoreCase?",i":"";return[`["${this.key}"${t}~"${a}"${l}]`]}else return[`["${this.key}"${t}="${this.value}"]`]}isUsableAsAnswer(){return!1}matchesProperties(t){if(typeof this.key=="string"){const a=t[this.key]??"";return RegexTag.doesMatch(a,this.value)!=this.invert}for(const a in t)if(a!==void 0&&RegexTag.doesMatch(a,this.key)){const l=t[a]??"";return RegexTag.doesMatch(l,this.value)!=this.invert}return this.matchesEmpty?!this.invert:this.invert}asHumanString(){if(typeof this.key=="string"){const t=typeof this.value=="string"?"=":"~";return`${this.key}${this.invert?"!":""}${t}${RegexTag.source(this.value)}`}return`${this.key.source}${this.invert?"!":""}~~${RegexTag.source(this.value)}`}shadows(t){if(t instanceof RegexTag){if((t.key.source??t.key)!==(this.key.source??this.key))return!1;if((t.value.source??t.key)===(this.value.source??this.key)&&this.invert==t.invert)return!0;if(typeof t.value=="string"){const a=RegexTag.doesMatch(t.value,this.value);if(!this.invert&&!t.invert)return a;if(this.invert&&!t.invert||!this.invert&&t.invert)return!a;if(!this.invert&&!t.invert)return a}return!1}return t instanceof Tag&&RegexTag.doesMatch(t.key,this.key)?this.value.source==="^..*$"?this.invert?t.value==="":!1:this.invert?!1:(this.value.source??this.value)===t.value:!1}usedKeys(){if(typeof this.key=="string")return[this.key];throw"Key cannot be determined as it is a regex"}usedTags(){return[]}asChange(t){return this.invert?[]:typeof this.key=="string"?typeof this.value=="string"?[{k:this.key,v:this.value}]:((this.value.toString()!="/^..*$/"||this.value.toString()!=".+")&&console.warn("Regex value in tag; using wildcard:",this.key,this.value),[{k:this.key,v:void 0}]):(console.error("Cannot export regex tag to asChange; ",this.key,this.value),[])}optimize(){return this}isNegative(){return this.invert}visit(t){t(this)}}class Or extends TagsFilter{constructor(t){super();ke(this,"or");this.or=t}static construct(t){return t.length===1?t[0]:new Or(t)}matchesProperties(t){for(const a of this.or)if(a.matchesProperties(t))return!0;return!1}asOverpass(){const t=[];for(const a of this.or){const l=a.asOverpass();t.push(...l)}return t}asHumanString(t,a,l){return this.or.map(h=>h.asHumanString(t,a,l)).join("|")}isUsableAsAnswer(){return!1}shadows(t){if(t instanceof Or){for(const a of this.or){let l=!1;for(let h=0;h<t.or.length&&!l;h++){let g=t.or[h];l=a.shadows(g)}if(!l)return!1}return!0}return!1}usedKeys(){return[].concat(...this.or.map(t=>t.usedKeys()))}usedTags(){return[].concat(...this.or.map(t=>t.usedTags()))}asChange(t){const a=[];for(const l of this.or)a.push(...l.asChange(t));return a}removePhraseConsideredKnown(t,a){const l=[];for(const h of this.or){if(h instanceof Or)throw"Optimize expressions before using removePhraseConsideredKnown";if(h instanceof And){const g=h.removePhraseConsideredKnown(t,a);if(g===!1)continue;if(g===!0)return!0;l.push(g);continue}if(a&&t.shadows(h))return!0;!a&&h.shadows(t)||l.push(h)}return l.length===0?!1:Or.construct(l)}optimize(){if(this.or.length===0)return!1;const t=this.or.map(g=>g.optimize()).filter(g=>g!==!1);if(t.some(g=>g===!0))return!0;const a=t,l=[];let h=[];for(const g of a)g instanceof Or?l.push(...g.or):g instanceof And?h.push(g):l.push(g);{let g=!1;do{const p=[];e:for(let y of h){for(const b of l){const E=y.removePhraseConsideredKnown(b,!1);if(E===!1)continue e;if(E===!0)return!0;if(E instanceof And){y=E;continue}l.push(E),g=!0;continue e}p.push(y)}h=p}while(g)}if(h.length===1)l.push(h[0]);else if(h.length>1){let g=h[0].and;for(let p=1;p<h.length&&g.length>0;p++){const y=h[p];g=g.filter(b=>y.and.some(E=>E.shadows(b)))}if(g.length===0)l.push(...h);else{const p=[];for(const b of h){const E=b.and.filter(C=>!g.some(A=>A.shadows(C)));p.push(And.construct(E))}g.push(Or.construct(p));const y=new And(g).optimize();if(y===!0)return!0;y===!1||l.push(And.construct(g))}}return l.length===0?!1:TagUtils.ContainsOppositeTags(l)?!0:(TagUtils.sortFilters(l,!1),Or.construct(l))}isNegative(){return this.or.some(t=>t.isNegative())}visit(t){t(this),this.or.forEach(a=>a.visit(t))}}class And extends TagsFilter{constructor(t){super();ke(this,"and");this.and=t}static construct(t){return t.length===1?t[0]:new And(t)}static combine(t,a){const l=[];for(const h of a)l.push(t+h);return l}normalize(){const t=[];for(const a of this.and)a instanceof And?t.push(...a.and):t.push(a);return new And(t)}matchesProperties(t){for(const a of this.and)if(!a.matchesProperties(t))return!1;return!0}asOverpass(){let t=null;for(const a of this.and){const l=a.asOverpass();if(t===null){t=l;continue}const h=[];for(const g of t)h.push(...And.combine(g,l));t=h}return t}asHumanString(t,a,l){return this.and.map(h=>h.asHumanString(t,a,l)).filter(h=>h!=="").join("&")}isUsableAsAnswer(){for(const t of this.and)if(!t.isUsableAsAnswer())return!1;return!0}shadows(t){if(!(t instanceof And))return!1;for(const a of this.and){let l=!1;for(const h of t.and)if(l=a.shadows(h),l)break;if(!l)return!1}for(const a of t.and){let l=!1;for(const h of this.and)if(l=h.shadows(a),l)break;if(!l)return!1}return!0}usedKeys(){return[].concat(...this.and.map(t=>t.usedKeys()))}usedTags(){return[].concat(...this.and.map(t=>t.usedTags()))}asChange(t){const a=[];for(const l of this.and)a.push(...l.asChange(t));return a}removePhraseConsideredKnown(t,a){const l=[];for(const h of this.and){if(h instanceof And)throw"Optimize expressions before using removePhraseConsideredKnown";if(h instanceof Or){const g=h.removePhraseConsideredKnown(t,a);if(g===!0)continue;if(g===!1)return!1;l.push(g);continue}if(!(a&&t.shadows(h))){if(!a&&h.shadows(t))return!1;l.push(h)}}return l.length===0?!0:And.construct(l)}optimize(){if(this.and.length===0)return!0;const t=this.and.map(g=>g.optimize()).filter(g=>g!==!0);if(t.some(g=>g===!1))return!1;const a=t;{const g={};for(const p of a)p instanceof Tag&&(g[p.key]=p.value);for(const p of a){if(p instanceof Tag){const y=p.key,b=g[y];if(b===void 0)continue;if(b!==p.value)return!1}if(p instanceof RegexTag){const y=p.key;if(typeof y!="string")continue;const b=g[y];if(b===void 0)continue;if(b!==p.value)return!1}}}const l=[];let h=[];for(const g of a)g instanceof And?l.push(...g.and):g instanceof Or?h.push(g):l.push(g);{let g=!1;do{const p=[];e:for(let y of h){for(const b of l){const E=y.removePhraseConsideredKnown(b,!0);if(E===!0)continue e;if(E===!1)return!1;if(E instanceof Or){y=E;continue}l.push(E),g=!0;continue e}p.push(y)}h=p}while(g)}if(h=h.filter(g=>!TagUtils.containsEquivalents(l,g.or)),h.length===1)l.push(h[0]);else if(h.length>1){let g=h[0].or;for(let p=1;p<h.length&&g.length>0;p++){const y=h[p];g=g.filter(b=>y.or.some(E=>E.shadows(b)))}if(g.length===0)l.push(...h);else{const p=[];for(const b of h){const E=b.or.filter(C=>!g.some(A=>A.shadows(C)));p.push(Or.construct(E))}g.push(And.construct(p));const y=new Or(g).optimize();if(y===!1)return!1;y===!0||l.push(y)}}return l.length===0?!0:TagUtils.ContainsOppositeTags(l)?!1:(TagUtils.sortFilters(l,!0),And.construct(l))}isNegative(){return!this.and.some(t=>!t.isNegative())}visit(t){t(this),this.and.forEach(a=>a.visit(t))}}class ComparingTag{constructor(e,t,a=""){ke(this,"_key");ke(this,"_predicate");ke(this,"_representation");this._key=e,this._predicate=t,this._representation=a}asChange(e){throw"A comparable tag can not be used to be uploaded to OSM"}asHumanString(e,t,a){return this._key+this._representation}asOverpass(){throw"A comparable tag can not be used as overpass filter"}shadows(e){return e===this}isUsableAsAnswer(){return!1}matchesProperties(e){return this._predicate(e[this._key])}usedKeys(){return[this._key]}usedTags(){return[]}optimize(){return this}isNegative(){return!0}visit(e){e(this)}}class SubstitutingTag{constructor(e,t,a=!1){ke(this,"_key");ke(this,"_value");ke(this,"_invert");this._key=e,this._value=t,this._invert=a}static substituteString(e,t){for(const a in t)e=e.replace(new RegExp("\\{"+a+"\\}","g"),t[a]);return e.replace(/{.*}/g,"")}asTag(e){if(this._invert)throw"Cannot convert an inverted substituting tag";return new Tag(this._key,Utils.SubstituteKeys(this._value,e))}asHumanString(e,t,a){return this._key+(this._invert?"!":"")+"="+SubstitutingTag.substituteString(this._value,a)}asOverpass(){throw"A variable with substitution can not be used to query overpass"}shadows(e){return e instanceof SubstitutingTag?e._key===this._key&&e._value===this._value&&e._invert===this._invert:!1}isUsableAsAnswer(){return!this._invert}matchesProperties(e){const t=e[this._key];if(t===void 0||t==="")return!1;const a=SubstitutingTag.substituteString(this._value,e);return t===a!==this._invert}usedKeys(){return[this._key]}usedTags(){return[]}asChange(e){if(this._invert)throw"An inverted substituting tag can not be used to create a change";const t=SubstitutingTag.substituteString(this._value,e);if(t.match(/{.*}/)!==null)throw"Could not calculate all the substitutions: still have "+t;return[{k:this._key,v:t}]}optimize(){return this}isNegative(){return!1}visit(e){e(this)}}const keys={"addr:street":117211930,"addr:housenumber":125040768,emergency:1939478,barrier:18424246,tourism:2683525,amenity:20541353,bench:894256,rental:8838,bicycle_rental:7447,vending:206755,"service:bicycle:rental":3570,pub:316,theme:426,"service:bicycle:.*":0,"service:bicycle:cleaning":807,shop:5062252,"service:bicycle:retail":9162,network:2181336,sport:2194801,"service:bicycle:repair":11381,association:369,ngo:42,leisure:7368076,club:38429,"disused:amenity":40880,"planned:amenity":205,tileId:0,"construction:amenity":1206,cycleway:906487,highway:218189453,bicycle:6218071,cyclestreet:8185,"camera:direction":40676,direction:1896015,access:16030036,entrance:2954076,"name:etymology":24485,memorial:132172,indoor:353116,"name:etymology:wikidata":285224,landuse:35524214,name:88330405,protect_class:73801,information:831513,man_made:5116088,boundary:2142378,"tower:type":451658,playground:109175,route:939184,"surveillance:type":116760,natural:52353504,building:500469053},tags$1={emergency:{defibrillator:51273,ambulance_station:11047,fire_extinguisher:7355,fire_hydrant:1598739},barrier:{cycle_barrier:104166,bollard:502220,wall:3535056},tourism:{artwork:187470,map:51,viewpoint:191765},amenity:{bench:1736979,bicycle_library:36,bicycle_rental:49082,vending_machine:201871,bar:199662,pub:174979,cafe:467521,restaurant:1211671,bicycle_wash:44,bike_wash:0,bicycle_repair_station:9247,bicycle_parking:435959,binoculars:479,biergarten:10309,charging_station:65402,drinking_water:250463,fast_food:460079,fire_station:122200,parking:4255206,public_bookcase:13120,toilets:350648,recycling:333925,waste_basket:550357,waste_disposal:156765},bench:{stand_up_bench:87,yes:524993},"service:bicycle:rental":{yes:3054},pub:{cycling:9,bicycle:0},theme:{cycling:8,bicycle:16},"service:bicycle:cleaning":{yes:607,diy:0},shop:{bicycle:46488,sports:37024},sport:{cycling:6045,bicycle:96},association:{cycling:5,bicycle:20},ngo:{cycling:0,bicycle:0},leisure:{bird_hide:5669,nature_reserve:117016,picnic_table:206322,pitch:1990293,playground:705102},club:{cycling:3,bicycle:49},"disused:amenity":{charging_station:164},"planned:amenity":{charging_station:115},"construction:amenity":{charging_station:221},cycleway:{lane:314576,track:86541,shared_lane:60824},highway:{residential:61321708,crossing:6119521,cycleway:1423789,traffic_signals:1512639,tertiary:7051727,unclassified:15756878,secondary:4486617,primary:3110552,footway:16496620,path:11438303,steps:1327396,corridor:27051,pedestrian:685989,bridleway:102280,track:22670967,living_street:1519108,street_lamp:2811705},bicycle:{designated:1110839},cyclestreet:{yes:8164},access:{public:6222,yes:1363526},memorial:{ghost_bike:503},indoor:{door:9722},landuse:{grass:4898559,village_green:104681},name:{"Park Oude God":1},information:{board:242007,map:85912,office:24139,visitor_centre:285},man_made:{surveillance:148172,watermill:9699},boundary:{protected_area:97075},"tower:type":{observation:19654},playground:{forest:56},"surveillance:type":{camera:112963,ALPR:2522,ANPR:3},natural:{tree:18245059}},key_totals={keys,tags:tags$1},key_counts=Object.freeze(Object.defineProperty({__proto__:null,default:key_totals,keys,tags:tags$1},Symbol.toStringTag,{value:"Module"})),Qr=class{static KVtoProperties(e){const t={};for(const a of e)t[a.key]=a.value;return t}static changeAsProperties(e){const t={};for(const a of e)t[a.k]=a.v;return t}static AllKeysAreContained(e,t){for(const a in t){const l=e[a];if(l===void 0)return!1;const h=t[a];for(const g of h)if(l.indexOf(g)<0)return!1}return!0}static SplitKeys(e){return this.SplitKeysRegex(e,!1)}static SplitKeysRegex(e,t){const a={};for(e=[...e];e.length>0;){const l=e.shift();if(l!==void 0){if(l instanceof And){e.push(...l.and);continue}if(l instanceof Tag){a[l.key]===void 0&&(a[l.key]=[]),a[l.key].push(...l.value.split(";").map(h=>h.trim()));continue}if(t&&l instanceof RegexTag){const h=l.key;if(typeof h!="string")throw console.error("Invalid type to flatten the multiAnswer: key is a regex too",l),"Invalid type to FlattenMultiAnswer";const g=h;a[g]===void 0&&(a[g]=[]),a[g].push(l);continue}throw console.error("Invalid type to flatten the multiAnswer",l),"Invalid type to FlattenMultiAnswer"}}return a}static FlattenAnd(e,t){const a=[];return e.visit(l=>{l instanceof Tag&&a.push(l),l instanceof SubstitutingTag&&a.push(l.asTag(t))}),a}static FlattenMultiAnswer(e){if(e===void 0)return new And([]);let t=Qr.SplitKeys(e);const a=[];for(const l in t){const h=Utils.Dedup(t[l]).filter(g=>g!=="");h.sort(),a.push(new Tag(l,h.join(";")))}return new And(a)}static MatchesMultiAnswer(e,t){const a=Qr.SplitKeysRegex([e],!0);for(const l in a){const h=a[l];if(t[l]===void 0)return!1;const g=t[l].split(";").map(p=>p.trim());for(const p of h){if(p instanceof RegexTag){if(!p.matchesProperties(t))return!1;continue}if(g.indexOf(p)<0)return!1}}return!0}static SimpleTag(e,t){const a=Utils.SplitFirst(e,"=");if(a.length!==2)throw`Invalid tag: no (or too much) '=' found (in ${t??"unkown context"})`;return new Tag(a[0],a[1])}static isValidKey(e){return e.match(/^[a-z][a-z0-9:_]{2,253}[a-z0-9]$/)!==null}static Tag(e,t=""){try{return this.ParseTagUnsafe(e,t)}catch(a){throw console.error("Could not parse tag",e,"in context",t,"due to ",a),a}}static ParseUploadableTag(e,t=""){const a=this.Tag(e,t);return a.visit(l=>{if(!(l instanceof And)&&!(l instanceof Tag)&&!(l instanceof SubstitutingTag))throw`Error at ${t}: detected a non-uploadable tag at a location where this is not supported: ${l.asHumanString(!1,!1,{})}`}),a}static TagD(e,t=""){if(e!==void 0)return Qr.Tag(e,t)}static sortFilters(e,t){e.sort((a,l)=>Qr.order(a,l,t))}static toString(e,t=!0){let a;return e instanceof Or?a=Qr.joinL(e.or,"|",t):e instanceof And?a=Qr.joinL(e.and,"&",t):a=e.asHumanString(!1,!1,{}),t&&(a=a.trim()),a}static parseRegexOperator(e){const t=e.match(/^([_|a-zA-Z0-9: -]+)(!)?~([i]~)?(.*)$/);if(t==null)return null;const[a,l,h,g,p]=t;return{key:l,value:p,invert:h=="!",modifier:g=="i~"?"i":""}}static ContainsOppositeTags(e){for(let t=0;t<e.length;t++){const a=e[t];if(a instanceof Tag||a instanceof RegexTag)for(let l=t+1;l<e.length;l++){const h=e[l];if((h instanceof Tag||h instanceof RegexTag)&&h.key===a.key&&(h.value.source??h.value)===(a.value.source??a.value)&&(h.invert??!1)!==(a.invert??!1))return!0}}return!1}static removeShadowedElementsFrom(e,t){return t.filter(a=>!e.some(l=>l.shadows(a)))}static removeEquivalents(e){const t=[];e:for(let a=0;a<e.length;a++){const l=e[a];for(let h=0;h<e.length;h++){if(a===h)continue;if(e[h].shadows(l))continue e}t.push(l)}return t}static containsEquivalents(e,t){return t.some(a=>e.some(l=>l.shadows(a)))}static LevelsParser(e){let t=Utils.NoNull([e]);return t=[].concat(...t.map(a=>a==null?void 0:a.split(";"))),t=[].concat(...t.map(a=>{if(a=a.trim(),a.indexOf("-")<0||a.startsWith("-"))return a;const[l,h]=a.split("-").map(p=>Number(p.trim()));if(isNaN(l)||isNaN(h))return;const g=[];for(let p=l;p<=h;p++)g.push(p+"");return g})),Utils.NoNull(t)}static ParseTagUnsafe(e,t=""){if(e===void 0)throw new Error(`Error while parsing a tag: 'json' is undefined in ${t}. Make sure all the tags are defined and at least one tag is present in a complex expression`);if(typeof e!="string"){if(e.and!==void 0&&e.or!==void 0)throw"Error while parsing a TagConfig: got an object where both 'and' and 'or' are defined";if(e.and!==void 0)return new And(e.and.map(h=>Qr.Tag(h,t)));if(e.or!==void 0)return new Or(e.or.map(h=>Qr.Tag(h,t)));throw`At ${t}: unrecognized tag: ${JSON.stringify(e)}`}const a=e;for(const[h,g]of Qr.comparators)if(a.indexOf(h)>=0){const p=Utils.SplitFirst(a,h);let y=Number(p[1].trim());isNaN(y)&&(y=new Date(p[1].trim()).getTime());const b=E=>{if(E===void 0)return!1;let C;return typeof E=="number"?C=E:typeof C=="string"?C=Number(E==null?void 0:E.trim()):C=Number(E),isNaN(C)&&typeof E=="string"&&(C=Utils.ParseDate(E).getTime(),isNaN(C))?!1:g(C,y)};return new ComparingTag(p[0],b,h+y)}if(a.indexOf("~~")>=0){const h=Utils.SplitFirst(a,"~~");let g;h[0]==="*"?g=new RegExp(".+","i"):g=new RegExp("^("+h[0]+")$");let p;return h[1]==="*"?p=new RegExp(".+","si"):p=new RegExp("^("+h[1]+")$","s"),new RegexTag(g,p)}const l=Qr.parseRegexOperator(a);if(l!=null){if(l.value==="*"&&l.invert)throw`Don't use 'key!~*' - use 'key=' instead (empty string as value (in the tag ${a} while parsing ${t})`;if(l.value==="")throw"Detected a regextag with an empty regex; this is not allowed. Use '"+l.key+"='instead (at "+t+")";let h=l.value;return h==="*"?new RegexTag(l.key,new RegExp(".+","si"+l.modifier),l.invert):new RegexTag(l.key,new RegExp("^("+h+")$","s"+l.modifier),l.invert)}if(a.indexOf("!:=")>=0){const h=Utils.SplitFirst(a,"!:=");return new SubstitutingTag(h[0],h[1],!0)}if(a.indexOf(":=")>=0){const h=Utils.SplitFirst(a,":=");return new SubstitutingTag(h[0],h[1])}if(a.indexOf("!=")>=0){const h=Utils.SplitFirst(a,"!=");if(h[1]==="*")throw"At "+t+": invalid tag "+a+". To indicate a missing tag, use '"+h[0]+"!=' instead";return h[1]===""?new RegexTag(h[0],/.+/is):new RegexTag(h[0],h[1],!0)}if(a.indexOf("=")>=0){const h=Utils.SplitFirst(a,"=");if(h[1]=="*")throw`Error while parsing tag '${a}' in ${t}: detected a wildcard on a normal value. Use a regex pattern instead`;return new Tag(h[0],h[1])}throw`Error while parsing tag '${a}' in ${t}: no key part and value part were found`}static GetCount(e,t){if(e===void 0)return;const a=Qr.keyCounts.tags[e];return a!==void 0&&a[t]!==void 0?a[t]:Qr.keyCounts.keys[e]}static order(e,t,a){const l=e instanceof RegexTag,h=t instanceof RegexTag;if(l!==h)return l?1:-1;if(e.key!==void 0&&t.key!==void 0){if(a){const g=Qr.GetCount(e.key,e.value),p=Qr.GetCount(t.key,t.value);if(g!==void 0&&p!==void 0)return g-p}return e.key===t.key?0:e.key<t.key?-1:1}return 0}static joinL(e,t,a){const l=e.map(h=>Qr.toString(h,!1)).join(t);return a?l:" ("+l+") "}};let TagUtils=Qr;ke(TagUtils,"keyCounts",key_totals??key_counts),ke(TagUtils,"comparators",[["<=",(e,t)=>e<=t],[">=",(e,t)=>e>=t],["<",(e,t)=>e<t],[">",(e,t)=>e>t]]);var opening_hoursExports={},opening_hours={get exports(){return opening_hoursExports},set exports(n){opening_hoursExports=n}},suncalcExports={},suncalc={get exports(){return suncalcExports},set exports(n){suncalcExports=n}},hasRequiredSuncalc;function requireSuncalc(){return hasRequiredSuncalc||(hasRequiredSuncalc=1,function(n,e){(function(){var t=Math.PI,a=Math.sin,l=Math.cos,h=Math.tan,g=Math.asin,p=Math.atan2,y=Math.acos,b=t/180,E=1e3*60*60*24,C=2440588,A=2451545;function B(oe){return oe.valueOf()/E-.5+C}function M(oe){return new Date((oe+.5-C)*E)}function N(oe){return B(oe)-A}var Z=b*23.4397;function ee(oe,Pe){return p(a(oe)*l(Z)-h(Pe)*a(Z),l(oe))}function F(oe,Pe){return g(a(Pe)*l(Z)+l(Pe)*a(Z)*a(oe))}function O(oe,Pe,Re){return p(a(oe),l(oe)*a(Pe)-h(Re)*l(Pe))}function k(oe,Pe,Re){return g(a(Pe)*a(Re)+l(Pe)*l(Re)*l(oe))}function H(oe,Pe){return b*(280.16+360.9856235*oe)-Pe}function ce(oe){return oe<0&&(oe=0),2967e-7/Math.tan(oe+.00312536/(oe+.08901179))}function U(oe){return b*(357.5291+.98560028*oe)}function te(oe){var Pe=b*(1.9148*a(oe)+.02*a(2*oe)+3e-4*a(3*oe)),Re=b*102.9372;return oe+Pe+Re+t}function re(oe){var Pe=U(oe),Re=te(Pe);return{dec:F(Re,0),ra:ee(Re,0)}}var ue={};ue.getPosition=function(oe,Pe,Re){var Oe=b*-Re,Ne=b*Pe,Ue=N(oe),Ze=re(Ue),bt=H(Ue,Oe)-Ze.ra;return{azimuth:O(bt,Ne,Ze.dec),altitude:k(bt,Ne,Ze.dec)}};var V=ue.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];ue.addTime=function(oe,Pe,Re){V.push([oe,Pe,Re])};var S=9e-4;function T(oe,Pe){return Math.round(oe-S-Pe/(2*t))}function G(oe,Pe,Re){return S+(oe+Pe)/(2*t)+Re}function Q(oe,Pe,Re){return A+oe+.0053*a(Pe)-.0069*a(2*Re)}function le(oe,Pe,Re){return y((a(oe)-a(Pe)*a(Re))/(l(Pe)*l(Re)))}function fe(oe){return-2.076*Math.sqrt(oe)/60}function q(oe,Pe,Re,Oe,Ne,Ue,Ze){var bt=le(oe,Re,Oe),it=G(bt,Pe,Ne);return Q(it,Ue,Ze)}ue.getTimes=function(oe,Pe,Re,Oe){Oe=Oe||0;var Ne=b*-Re,Ue=b*Pe,Ze=fe(Oe),bt=N(oe),it=T(bt,Ne),ut=G(0,Ne,it),ft=U(ut),He=te(ft),Mt=F(He,0),wn=Q(ut,ft,He),Ct,_e,Y,X,we,Me,qe={solarNoon:M(wn),nadir:M(wn-.5)};for(Ct=0,_e=V.length;Ct<_e;Ct+=1)Y=V[Ct],X=(Y[0]+Ze)*b,we=q(X,Ne,Ue,Mt,it,ft,He),Me=wn-(we-wn),qe[Y[1]]=M(Me),qe[Y[2]]=M(we);return qe};function se(oe){var Pe=b*(218.316+13.176396*oe),Re=b*(134.963+13.064993*oe),Oe=b*(93.272+13.22935*oe),Ne=Pe+b*6.289*a(Re),Ue=b*5.128*a(Oe),Ze=385001-20905*l(Re);return{ra:ee(Ne,Ue),dec:F(Ne,Ue),dist:Ze}}ue.getMoonPosition=function(oe,Pe,Re){var Oe=b*-Re,Ne=b*Pe,Ue=N(oe),Ze=se(Ue),bt=H(Ue,Oe)-Ze.ra,it=k(bt,Ne,Ze.dec),ut=p(a(bt),h(Ne)*l(Ze.dec)-a(Ze.dec)*l(bt));return it=it+ce(it),{azimuth:O(bt,Ne,Ze.dec),altitude:it,distance:Ze.dist,parallacticAngle:ut}},ue.getMoonIllumination=function(oe){var Pe=N(oe||new Date),Re=re(Pe),Oe=se(Pe),Ne=149598e3,Ue=y(a(Re.dec)*a(Oe.dec)+l(Re.dec)*l(Oe.dec)*l(Re.ra-Oe.ra)),Ze=p(Ne*a(Ue),Oe.dist-Ne*l(Ue)),bt=p(l(Re.dec)*a(Re.ra-Oe.ra),a(Re.dec)*l(Oe.dec)-l(Re.dec)*a(Oe.dec)*l(Re.ra-Oe.ra));return{fraction:(1+l(Ze))/2,phase:.5+.5*Ze*(bt<0?-1:1)/Math.PI,angle:bt}};function D(oe,Pe){return new Date(oe.valueOf()+Pe*E/24)}ue.getMoonTimes=function(oe,Pe,Re,Oe){var Ne=new Date(oe);Oe?Ne.setUTCHours(0,0,0,0):Ne.setHours(0,0,0,0);for(var Ue=.133*b,Ze=ue.getMoonPosition(Ne,Pe,Re).altitude-Ue,bt,it,ut,ft,He,Mt,wn,Ct,_e,Y,X,we,Me,qe=1;qe<=24&&(bt=ue.getMoonPosition(D(Ne,qe),Pe,Re).altitude-Ue,it=ue.getMoonPosition(D(Ne,qe+1),Pe,Re).altitude-Ue,He=(Ze+it)/2-bt,Mt=(it-Ze)/2,wn=-Mt/(2*He),Ct=(He*wn+Mt)*wn+bt,_e=Mt*Mt-4*He*bt,Y=0,_e>=0&&(Me=Math.sqrt(_e)/(Math.abs(He)*2),X=wn-Me,we=wn+Me,Math.abs(X)<=1&&Y++,Math.abs(we)<=1&&Y++,X<-1&&(X=we)),Y===1?Ze<0?ut=qe+X:ft=qe+X:Y===2&&(ut=qe+(Ct<0?we:X),ft=qe+(Ct<0?X:we)),!(ut&&ft));qe+=2)Ze=it;var je={};return ut&&(je.rise=D(Ne,ut)),ft&&(je.set=D(Ne,ft)),!ut&&!ft&&(je[Ct>0?"alwaysUp":"alwaysDown"]=!0),je},n.exports=ue})()}(suncalc)),suncalcExports}function _typeof(n){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(n)}const _typeof$1=Object.freeze(Object.defineProperty({__proto__:null,default:_typeof},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(_typeof$1);var classCallCheckExports={},classCallCheck={get exports(){return classCallCheckExports},set exports(n){classCallCheckExports=n}},hasRequiredClassCallCheck;function requireClassCallCheck(){return hasRequiredClassCallCheck||(hasRequiredClassCallCheck=1,function(n){function e(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(classCallCheck)),classCallCheckExports}var createClassExports={},createClass={get exports(){return createClassExports},set exports(n){createClassExports=n}},hasRequiredCreateClass;function requireCreateClass(){return hasRequiredCreateClass||(hasRequiredCreateClass=1,function(n){var e=requireToPropertyKey();function t(l,h){for(var g=0;g<h.length;g++){var p=h[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,e(p.key),p)}}function a(l,h,g){return h&&t(l.prototype,h),g&&t(l,g),Object.defineProperty(l,"prototype",{writable:!1}),l}n.exports=a,n.exports.__esModule=!0,n.exports.default=n.exports}(createClass)),createClassExports}var assertThisInitializedExports={},assertThisInitialized={get exports(){return assertThisInitializedExports},set exports(n){assertThisInitializedExports=n}},hasRequiredAssertThisInitialized;function requireAssertThisInitialized(){return hasRequiredAssertThisInitialized||(hasRequiredAssertThisInitialized=1,function(n){function e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(assertThisInitialized)),assertThisInitializedExports}var inheritsExports={},inherits$b={get exports(){return inheritsExports},set exports(n){inheritsExports=n}},setPrototypeOfExports={},setPrototypeOf={get exports(){return setPrototypeOfExports},set exports(n){setPrototypeOfExports=n}},hasRequiredSetPrototypeOf;function requireSetPrototypeOf(){return hasRequiredSetPrototypeOf||(hasRequiredSetPrototypeOf=1,function(n){function e(t,a){return n.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,g){return h.__proto__=g,h},n.exports.__esModule=!0,n.exports.default=n.exports,e(t,a)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(setPrototypeOf)),setPrototypeOfExports}var hasRequiredInherits;function requireInherits(){return hasRequiredInherits||(hasRequiredInherits=1,function(n){var e=requireSetPrototypeOf();function t(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(l&&l.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),l&&e(a,l)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(inherits$b)),inheritsExports}var possibleConstructorReturnExports={},possibleConstructorReturn={get exports(){return possibleConstructorReturnExports},set exports(n){possibleConstructorReturnExports=n}},hasRequiredPossibleConstructorReturn;function requirePossibleConstructorReturn(){return hasRequiredPossibleConstructorReturn||(hasRequiredPossibleConstructorReturn=1,function(n){var e=require_typeof().default,t=requireAssertThisInitialized();function a(l,h){if(h&&(e(h)==="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t(l)}n.exports=a,n.exports.__esModule=!0,n.exports.default=n.exports}(possibleConstructorReturn)),possibleConstructorReturnExports}var getPrototypeOfExports={},getPrototypeOf$1={get exports(){return getPrototypeOfExports},set exports(n){getPrototypeOfExports=n}},hasRequiredGetPrototypeOf;function requireGetPrototypeOf(){return hasRequiredGetPrototypeOf||(hasRequiredGetPrototypeOf=1,function(n){function e(t){return n.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(getPrototypeOf$1)),getPrototypeOfExports}var toArrayExports={},toArray$2={get exports(){return toArrayExports},set exports(n){toArrayExports=n}},arrayWithHolesExports={},arrayWithHoles={get exports(){return arrayWithHolesExports},set exports(n){arrayWithHolesExports=n}},hasRequiredArrayWithHoles;function requireArrayWithHoles(){return hasRequiredArrayWithHoles||(hasRequiredArrayWithHoles=1,function(n){function e(t){if(Array.isArray(t))return t}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(arrayWithHoles)),arrayWithHolesExports}var iterableToArrayExports={},iterableToArray={get exports(){return iterableToArrayExports},set exports(n){iterableToArrayExports=n}},hasRequiredIterableToArray;function requireIterableToArray(){return hasRequiredIterableToArray||(hasRequiredIterableToArray=1,function(n){function e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(iterableToArray)),iterableToArrayExports}var unsupportedIterableToArrayExports={},unsupportedIterableToArray={get exports(){return unsupportedIterableToArrayExports},set exports(n){unsupportedIterableToArrayExports=n}},arrayLikeToArrayExports={},arrayLikeToArray={get exports(){return arrayLikeToArrayExports},set exports(n){arrayLikeToArrayExports=n}},hasRequiredArrayLikeToArray;function requireArrayLikeToArray(){return hasRequiredArrayLikeToArray||(hasRequiredArrayLikeToArray=1,function(n){function e(t,a){(a==null||a>t.length)&&(a=t.length);for(var l=0,h=new Array(a);l<a;l++)h[l]=t[l];return h}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(arrayLikeToArray)),arrayLikeToArrayExports}var hasRequiredUnsupportedIterableToArray;function requireUnsupportedIterableToArray(){return hasRequiredUnsupportedIterableToArray||(hasRequiredUnsupportedIterableToArray=1,function(n){var e=requireArrayLikeToArray();function t(a,l){if(a){if(typeof a=="string")return e(a,l);var h=Object.prototype.toString.call(a).slice(8,-1);if(h==="Object"&&a.constructor&&(h=a.constructor.name),h==="Map"||h==="Set")return Array.from(a);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return e(a,l)}}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(unsupportedIterableToArray)),unsupportedIterableToArrayExports}var nonIterableRestExports={},nonIterableRest={get exports(){return nonIterableRestExports},set exports(n){nonIterableRestExports=n}},hasRequiredNonIterableRest;function requireNonIterableRest(){return hasRequiredNonIterableRest||(hasRequiredNonIterableRest=1,function(n){function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(nonIterableRest)),nonIterableRestExports}var hasRequiredToArray;function requireToArray(){return hasRequiredToArray||(hasRequiredToArray=1,function(n){var e=requireArrayWithHoles(),t=requireIterableToArray(),a=requireUnsupportedIterableToArray(),l=requireNonIterableRest();function h(g){return e(g)||t(g)||a(g)||l()}n.exports=h,n.exports.__esModule=!0,n.exports.default=n.exports}(toArray$2)),toArrayExports}var i18next,hasRequiredI18next;function requireI18next(){if(hasRequiredI18next)return i18next;hasRequiredI18next=1;var n=require$$0$2,e=requireClassCallCheck(),t=requireCreateClass(),a=requireAssertThisInitialized(),l=requireInherits(),h=requirePossibleConstructorReturn(),g=requireGetPrototypeOf(),p=requireDefineProperty(),y=requireToArray();function b(Ee){return Ee&&typeof Ee=="object"&&"default"in Ee?Ee:{default:Ee}}var E=b(n),C=b(e),A=b(t),B=b(a),M=b(l),N=b(h),Z=b(g),ee=b(p),F=b(y);function O(Ee,be){var pe=Object.keys(Ee);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(Ee);be&&(he=he.filter(function(ae){return Object.getOwnPropertyDescriptor(Ee,ae).enumerable})),pe.push.apply(pe,he)}return pe}function k(Ee){for(var be=1;be<arguments.length;be++){var pe=arguments[be]!=null?arguments[be]:{};be%2?O(Object(pe),!0).forEach(function(he){ee.default(Ee,he,pe[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ee,Object.getOwnPropertyDescriptors(pe)):O(Object(pe)).forEach(function(he){Object.defineProperty(Ee,he,Object.getOwnPropertyDescriptor(pe,he))})}return Ee}var H={type:"logger",log:function(be){this.output("log",be)},warn:function(be){this.output("warn",be)},error:function(be){this.output("error",be)},output:function(be,pe){console&&console[be]&&console[be].apply(console,pe)}},ce=function(){function Ee(be){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};C.default(this,Ee),this.init(be,pe)}return A.default(Ee,[{key:"init",value:function(pe){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=he.prefix||"i18next:",this.logger=pe||H,this.options=he,this.debug=he.debug}},{key:"setDebug",value:function(pe){this.debug=pe}},{key:"log",value:function(){for(var pe=arguments.length,he=new Array(pe),ae=0;ae<pe;ae++)he[ae]=arguments[ae];return this.forward(he,"log","",!0)}},{key:"warn",value:function(){for(var pe=arguments.length,he=new Array(pe),ae=0;ae<pe;ae++)he[ae]=arguments[ae];return this.forward(he,"warn","",!0)}},{key:"error",value:function(){for(var pe=arguments.length,he=new Array(pe),ae=0;ae<pe;ae++)he[ae]=arguments[ae];return this.forward(he,"error","")}},{key:"deprecate",value:function(){for(var pe=arguments.length,he=new Array(pe),ae=0;ae<pe;ae++)he[ae]=arguments[ae];return this.forward(he,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(pe,he,ae,de){return de&&!this.debug?null:(typeof pe[0]=="string"&&(pe[0]="".concat(ae).concat(this.prefix," ").concat(pe[0])),this.logger[he](pe))}},{key:"create",value:function(pe){return new Ee(this.logger,k(k({},{prefix:"".concat(this.prefix,":").concat(pe,":")}),this.options))}},{key:"clone",value:function(pe){return pe=pe||this.options,pe.prefix=pe.prefix||this.prefix,new Ee(this.logger,pe)}}]),Ee}(),U=new ce,te=function(){function Ee(){C.default(this,Ee),this.observers={}}return A.default(Ee,[{key:"on",value:function(pe,he){var ae=this;return pe.split(" ").forEach(function(de){ae.observers[de]=ae.observers[de]||[],ae.observers[de].push(he)}),this}},{key:"off",value:function(pe,he){if(this.observers[pe]){if(!he){delete this.observers[pe];return}this.observers[pe]=this.observers[pe].filter(function(ae){return ae!==he})}}},{key:"emit",value:function(pe){for(var he=arguments.length,ae=new Array(he>1?he-1:0),de=1;de<he;de++)ae[de-1]=arguments[de];if(this.observers[pe]){var me=[].concat(this.observers[pe]);me.forEach(function(Fe){Fe.apply(void 0,ae)})}if(this.observers["*"]){var Be=[].concat(this.observers["*"]);Be.forEach(function(Fe){Fe.apply(Fe,[pe].concat(ae))})}}}]),Ee}();function re(){var Ee,be,pe=new Promise(function(he,ae){Ee=he,be=ae});return pe.resolve=Ee,pe.reject=be,pe}function ue(Ee){return Ee==null?"":""+Ee}function V(Ee,be,pe){Ee.forEach(function(he){be[he]&&(pe[he]=be[he])})}function S(Ee,be,pe){function he(Be){return Be&&Be.indexOf("###")>-1?Be.replace(/###/g,"."):Be}function ae(){return!Ee||typeof Ee=="string"}for(var de=typeof be!="string"?[].concat(be):be.split(".");de.length>1;){if(ae())return{};var me=he(de.shift());!Ee[me]&&pe&&(Ee[me]=new pe),Object.prototype.hasOwnProperty.call(Ee,me)?Ee=Ee[me]:Ee={}}return ae()?{}:{obj:Ee,k:he(de.shift())}}function T(Ee,be,pe){var he=S(Ee,be,Object),ae=he.obj,de=he.k;ae[de]=pe}function G(Ee,be,pe,he){var ae=S(Ee,be,Object),de=ae.obj,me=ae.k;de[me]=de[me]||[],he&&(de[me]=de[me].concat(pe)),he||de[me].push(pe)}function Q(Ee,be){var pe=S(Ee,be),he=pe.obj,ae=pe.k;if(he)return he[ae]}function le(Ee,be,pe){var he=Q(Ee,pe);return he!==void 0?he:Q(be,pe)}function fe(Ee,be,pe){for(var he in be)he!=="__proto__"&&he!=="constructor"&&(he in Ee?typeof Ee[he]=="string"||Ee[he]instanceof String||typeof be[he]=="string"||be[he]instanceof String?pe&&(Ee[he]=be[he]):fe(Ee[he],be[he],pe):Ee[he]=be[he]);return Ee}function q(Ee){return Ee.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var se={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function D(Ee){return typeof Ee=="string"?Ee.replace(/[&<>"'\/]/g,function(be){return se[be]}):Ee}var oe=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Pe=[" ",",","?","!",";"];function Re(Ee,be,pe){be=be||"",pe=pe||"";var he=Pe.filter(function(Be){return be.indexOf(Be)<0&&pe.indexOf(Be)<0});if(he.length===0)return!0;var ae=new RegExp("(".concat(he.map(function(Be){return Be==="?"?"\\?":Be}).join("|"),")")),de=!ae.test(Ee);if(!de){var me=Ee.indexOf(pe);me>0&&!ae.test(Ee.substring(0,me))&&(de=!0)}return de}function Oe(Ee,be){var pe=Object.keys(Ee);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(Ee);be&&(he=he.filter(function(ae){return Object.getOwnPropertyDescriptor(Ee,ae).enumerable})),pe.push.apply(pe,he)}return pe}function Ne(Ee){for(var be=1;be<arguments.length;be++){var pe=arguments[be]!=null?arguments[be]:{};be%2?Oe(Object(pe),!0).forEach(function(he){ee.default(Ee,he,pe[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ee,Object.getOwnPropertyDescriptors(pe)):Oe(Object(pe)).forEach(function(he){Object.defineProperty(Ee,he,Object.getOwnPropertyDescriptor(pe,he))})}return Ee}function Ue(Ee){var be=Ze();return function(){var he=Z.default(Ee),ae;if(be){var de=Z.default(this).constructor;ae=Reflect.construct(he,arguments,de)}else ae=he.apply(this,arguments);return N.default(this,ae)}}function Ze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bt(Ee,be){var pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(Ee){if(Ee[be])return Ee[be];for(var he=be.split(pe),ae=Ee,de=0;de<he.length;++de){if(!ae||typeof ae[he[de]]=="string"&&de+1<he.length)return;if(ae[he[de]]===void 0){for(var me=2,Be=he.slice(de,de+me).join(pe),Fe=ae[Be];Fe===void 0&&he.length>de+me;)me++,Be=he.slice(de,de+me).join(pe),Fe=ae[Be];if(Fe===void 0)return;if(Fe===null)return null;if(be.endsWith(Be)){if(typeof Fe=="string")return Fe;if(Be&&typeof Fe[Be]=="string")return Fe[Be]}var et=he.slice(de+me).join(pe);return et?bt(Fe,et,pe):void 0}ae=ae[he[de]]}return ae}}var it=function(Ee){M.default(pe,Ee);var be=Ue(pe);function pe(he){var ae,de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return C.default(this,pe),ae=be.call(this),oe&&te.call(B.default(ae)),ae.data=he||{},ae.options=de,ae.options.keySeparator===void 0&&(ae.options.keySeparator="."),ae.options.ignoreJSONStructure===void 0&&(ae.options.ignoreJSONStructure=!0),ae}return A.default(pe,[{key:"addNamespaces",value:function(ae){this.options.ns.indexOf(ae)<0&&this.options.ns.push(ae)}},{key:"removeNamespaces",value:function(ae){var de=this.options.ns.indexOf(ae);de>-1&&this.options.ns.splice(de,1)}},{key:"getResource",value:function(ae,de,me){var Be=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Fe=Be.keySeparator!==void 0?Be.keySeparator:this.options.keySeparator,et=Be.ignoreJSONStructure!==void 0?Be.ignoreJSONStructure:this.options.ignoreJSONStructure,dt=[ae,de];me&&typeof me!="string"&&(dt=dt.concat(me)),me&&typeof me=="string"&&(dt=dt.concat(Fe?me.split(Fe):me)),ae.indexOf(".")>-1&&(dt=ae.split("."));var Ye=Q(this.data,dt);return Ye||!et||typeof me!="string"?Ye:bt(this.data&&this.data[ae]&&this.data[ae][de],me,Fe)}},{key:"addResource",value:function(ae,de,me,Be){var Fe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},et=this.options.keySeparator;et===void 0&&(et=".");var dt=[ae,de];me&&(dt=dt.concat(et?me.split(et):me)),ae.indexOf(".")>-1&&(dt=ae.split("."),Be=de,de=dt[1]),this.addNamespaces(de),T(this.data,dt,Be),Fe.silent||this.emit("added",ae,de,me,Be)}},{key:"addResources",value:function(ae,de,me){var Be=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var Fe in me)(typeof me[Fe]=="string"||Object.prototype.toString.apply(me[Fe])==="[object Array]")&&this.addResource(ae,de,Fe,me[Fe],{silent:!0});Be.silent||this.emit("added",ae,de,me)}},{key:"addResourceBundle",value:function(ae,de,me,Be,Fe){var et=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},dt=[ae,de];ae.indexOf(".")>-1&&(dt=ae.split("."),Be=me,me=de,de=dt[1]),this.addNamespaces(de);var Ye=Q(this.data,dt)||{};Be?fe(Ye,me,Fe):Ye=Ne(Ne({},Ye),me),T(this.data,dt,Ye),et.silent||this.emit("added",ae,de,me)}},{key:"removeResourceBundle",value:function(ae,de){this.hasResourceBundle(ae,de)&&delete this.data[ae][de],this.removeNamespaces(de),this.emit("removed",ae,de)}},{key:"hasResourceBundle",value:function(ae,de){return this.getResource(ae,de)!==void 0}},{key:"getResourceBundle",value:function(ae,de){return de||(de=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Ne(Ne({},{}),this.getResource(ae,de)):this.getResource(ae,de)}},{key:"getDataByLanguage",value:function(ae){return this.data[ae]}},{key:"hasLanguageSomeTranslations",value:function(ae){var de=this.getDataByLanguage(ae),me=de&&Object.keys(de)||[];return!!me.find(function(Be){return de[Be]&&Object.keys(de[Be]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),pe}(te),ut={processors:{},addPostProcessor:function(be){this.processors[be.name]=be},handle:function(be,pe,he,ae,de){var me=this;return be.forEach(function(Be){me.processors[Be]&&(pe=me.processors[Be].process(pe,he,ae,de))}),pe}};function ft(Ee,be){var pe=Object.keys(Ee);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(Ee);be&&(he=he.filter(function(ae){return Object.getOwnPropertyDescriptor(Ee,ae).enumerable})),pe.push.apply(pe,he)}return pe}function He(Ee){for(var be=1;be<arguments.length;be++){var pe=arguments[be]!=null?arguments[be]:{};be%2?ft(Object(pe),!0).forEach(function(he){ee.default(Ee,he,pe[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ee,Object.getOwnPropertyDescriptors(pe)):ft(Object(pe)).forEach(function(he){Object.defineProperty(Ee,he,Object.getOwnPropertyDescriptor(pe,he))})}return Ee}function Mt(Ee){var be=wn();return function(){var he=Z.default(Ee),ae;if(be){var de=Z.default(this).constructor;ae=Reflect.construct(he,arguments,de)}else ae=he.apply(this,arguments);return N.default(this,ae)}}function wn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ct={},_e=function(Ee){M.default(pe,Ee);var be=Mt(pe);function pe(he){var ae,de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return C.default(this,pe),ae=be.call(this),oe&&te.call(B.default(ae)),V(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],he,B.default(ae)),ae.options=de,ae.options.keySeparator===void 0&&(ae.options.keySeparator="."),ae.logger=U.create("translator"),ae}return A.default(pe,[{key:"changeLanguage",value:function(ae){ae&&(this.language=ae)}},{key:"exists",value:function(ae){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(ae==null)return!1;var me=this.resolve(ae,de);return me&&me.res!==void 0}},{key:"extractFromKey",value:function(ae,de){var me=de.nsSeparator!==void 0?de.nsSeparator:this.options.nsSeparator;me===void 0&&(me=":");var Be=de.keySeparator!==void 0?de.keySeparator:this.options.keySeparator,Fe=de.ns||this.options.defaultNS||[],et=me&&ae.indexOf(me)>-1,dt=!this.options.userDefinedKeySeparator&&!de.keySeparator&&!this.options.userDefinedNsSeparator&&!de.nsSeparator&&!Re(ae,me,Be);if(et&&!dt){var Ye=ae.match(this.interpolator.nestingRegexp);if(Ye&&Ye.length>0)return{key:ae,namespaces:Fe};var Te=ae.split(me);(me!==Be||me===Be&&this.options.ns.indexOf(Te[0])>-1)&&(Fe=Te.shift()),ae=Te.join(Be)}return typeof Fe=="string"&&(Fe=[Fe]),{key:ae,namespaces:Fe}}},{key:"translate",value:function(ae,de,me){var Be=this;if(E.default(de)!=="object"&&this.options.overloadTranslationOptionHandler&&(de=this.options.overloadTranslationOptionHandler(arguments)),de||(de={}),ae==null)return"";Array.isArray(ae)||(ae=[String(ae)]);var Fe=de.returnDetails!==void 0?de.returnDetails:this.options.returnDetails,et=de.keySeparator!==void 0?de.keySeparator:this.options.keySeparator,dt=this.extractFromKey(ae[ae.length-1],de),Ye=dt.key,Te=dt.namespaces,xt=Te[Te.length-1],cn=de.lng||this.language,zt=de.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(cn&&cn.toLowerCase()==="cimode"){if(zt){var on=de.nsSeparator||this.options.nsSeparator;return Fe?(Dt.res="".concat(xt).concat(on).concat(Ye),Dt):"".concat(xt).concat(on).concat(Ye)}return Fe?(Dt.res=Ye,Dt):Ye}var Dt=this.resolve(ae,de),Ft=Dt&&Dt.res,An=Dt&&Dt.usedKey||Ye,Ln=Dt&&Dt.exactUsedKey||Ye,Un=Object.prototype.toString.apply(Ft),Zn=["[object Number]","[object Function]","[object RegExp]"],yr=de.joinArrays!==void 0?de.joinArrays:this.options.joinArrays,_n=!this.i18nFormat||this.i18nFormat.handleAsObject,Vn=typeof Ft!="string"&&typeof Ft!="boolean"&&typeof Ft!="number";if(_n&&Ft&&Vn&&Zn.indexOf(Un)<0&&!(typeof yr=="string"&&Un==="[object Array]")){if(!de.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var pn=this.options.returnedObjectHandler?this.options.returnedObjectHandler(An,Ft,He(He({},de),{},{ns:Te})):"key '".concat(Ye," (").concat(this.language,")' returned an object instead of string.");return Fe?(Dt.res=pn,Dt):pn}if(et){var Qn=Un==="[object Array]",Ut=Qn?[]:{},Kr=Qn?Ln:An;for(var $n in Ft)if(Object.prototype.hasOwnProperty.call(Ft,$n)){var nn="".concat(Kr).concat(et).concat($n);Ut[$n]=this.translate(nn,He(He({},de),{joinArrays:!1,ns:Te})),Ut[$n]===nn&&(Ut[$n]=Ft[$n])}Ft=Ut}}else if(_n&&typeof yr=="string"&&Un==="[object Array]")Ft=Ft.join(yr),Ft&&(Ft=this.extendTranslation(Ft,ae,de,me));else{var Zt=!1,Dn=!1,$r=de.count!==void 0&&typeof de.count!="string",rt=pe.hasDefaultValue(de),Qt=$r?this.pluralResolver.getSuffix(cn,de.count,de):"",sn=de["defaultValue".concat(Qt)]||de.defaultValue;!this.isValidLookup(Ft)&&rt&&(Zt=!0,Ft=sn),this.isValidLookup(Ft)||(Dn=!0,Ft=Ye);var un=de.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,Wn=un&&Dn?void 0:Ft,Kn=rt&&sn!==Ft&&this.options.updateMissing;if(Dn||Zt||Kn){if(this.logger.log(Kn?"updateKey":"missingKey",cn,xt,Ye,Kn?sn:Ft),et){var qr=this.resolve(Ye,He(He({},de),{},{keySeparator:!1}));qr&&qr.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var z=[],ie=this.languageUtils.getFallbackCodes(this.options.fallbackLng,de.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ie&&ie[0])for(var Se=0;Se<ie.length;Se++)z.push(ie[Se]);else this.options.saveMissingTo==="all"?z=this.languageUtils.toResolveHierarchy(de.lng||this.language):z.push(de.lng||this.language);var Ae=function(Ge,Ce,Qe){var ht=rt&&Qe!==Ft?Qe:Wn;Be.options.missingKeyHandler?Be.options.missingKeyHandler(Ge,xt,Ce,ht,Kn,de):Be.backendConnector&&Be.backendConnector.saveMissing&&Be.backendConnector.saveMissing(Ge,xt,Ce,ht,Kn,de),Be.emit("missingKey",Ge,xt,Ce,Ft)};this.options.saveMissing&&(this.options.saveMissingPlurals&&$r?z.forEach(function(xe){Be.pluralResolver.getSuffixes(xe,de).forEach(function(Ge){Ae([xe],Ye+Ge,de["defaultValue".concat(Ge)]||sn)})}):Ae(z,Ye,sn))}Ft=this.extendTranslation(Ft,ae,de,Dt,me),Dn&&Ft===Ye&&this.options.appendNamespaceToMissingKey&&(Ft="".concat(xt,":").concat(Ye)),(Dn||Zt)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?Ft=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(xt,":").concat(Ye):Ye,Zt?Ft:void 0):Ft=this.options.parseMissingKeyHandler(Ft))}return Fe?(Dt.res=Ft,Dt):Ft}},{key:"extendTranslation",value:function(ae,de,me,Be,Fe){var et=this;if(this.i18nFormat&&this.i18nFormat.parse)ae=this.i18nFormat.parse(ae,He(He({},this.options.interpolation.defaultVariables),me),Be.usedLng,Be.usedNS,Be.usedKey,{resolved:Be});else if(!me.skipInterpolation){me.interpolation&&this.interpolator.init(He(He({},me),{interpolation:He(He({},this.options.interpolation),me.interpolation)}));var dt=typeof ae=="string"&&(me&&me.interpolation&&me.interpolation.skipOnVariables!==void 0?me.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),Ye;if(dt){var Te=ae.match(this.interpolator.nestingRegexp);Ye=Te&&Te.length}var xt=me.replace&&typeof me.replace!="string"?me.replace:me;if(this.options.interpolation.defaultVariables&&(xt=He(He({},this.options.interpolation.defaultVariables),xt)),ae=this.interpolator.interpolate(ae,xt,me.lng||this.language,me),dt){var cn=ae.match(this.interpolator.nestingRegexp),zt=cn&&cn.length;Ye<zt&&(me.nest=!1)}me.nest!==!1&&(ae=this.interpolator.nest(ae,function(){for(var Ft=arguments.length,An=new Array(Ft),Ln=0;Ln<Ft;Ln++)An[Ln]=arguments[Ln];return Fe&&Fe[0]===An[0]&&!me.context?(et.logger.warn("It seems you are nesting recursively key: ".concat(An[0]," in key: ").concat(de[0])),null):et.translate.apply(et,An.concat([de]))},me)),me.interpolation&&this.interpolator.reset()}var on=me.postProcess||this.options.postProcess,Dt=typeof on=="string"?[on]:on;return ae!=null&&Dt&&Dt.length&&me.applyPostProcessor!==!1&&(ae=ut.handle(Dt,ae,de,this.options&&this.options.postProcessPassResolved?He({i18nResolved:Be},me):me,this)),ae}},{key:"resolve",value:function(ae){var de=this,me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Be,Fe,et,dt,Ye;return typeof ae=="string"&&(ae=[ae]),ae.forEach(function(Te){if(!de.isValidLookup(Be)){var xt=de.extractFromKey(Te,me),cn=xt.key;Fe=cn;var zt=xt.namespaces;de.options.fallbackNS&&(zt=zt.concat(de.options.fallbackNS));var on=me.count!==void 0&&typeof me.count!="string",Dt=on&&!me.ordinal&&me.count===0&&de.pluralResolver.shouldUseIntlApi(),Ft=me.context!==void 0&&(typeof me.context=="string"||typeof me.context=="number")&&me.context!=="",An=me.lngs?me.lngs:de.languageUtils.toResolveHierarchy(me.lng||de.language,me.fallbackLng);zt.forEach(function(Ln){de.isValidLookup(Be)||(Ye=Ln,!Ct["".concat(An[0],"-").concat(Ln)]&&de.utils&&de.utils.hasLoadedNamespace&&!de.utils.hasLoadedNamespace(Ye)&&(Ct["".concat(An[0],"-").concat(Ln)]=!0,de.logger.warn('key "'.concat(Fe,'" for languages "').concat(An.join(", "),`" won't get resolved as namespace "`).concat(Ye,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),An.forEach(function(Un){if(!de.isValidLookup(Be)){dt=Un;var Zn=[cn];if(de.i18nFormat&&de.i18nFormat.addLookupKeys)de.i18nFormat.addLookupKeys(Zn,cn,Un,Ln,me);else{var yr;on&&(yr=de.pluralResolver.getSuffix(Un,me.count,me));var _n="".concat(de.options.pluralSeparator,"zero");if(on&&(Zn.push(cn+yr),Dt&&Zn.push(cn+_n)),Ft){var Vn="".concat(cn).concat(de.options.contextSeparator).concat(me.context);Zn.push(Vn),on&&(Zn.push(Vn+yr),Dt&&Zn.push(Vn+_n))}}for(var pn;pn=Zn.pop();)de.isValidLookup(Be)||(et=pn,Be=de.getResource(Un,Ln,pn,me))}}))})}}),{res:Be,usedKey:Fe,exactUsedKey:et,usedLng:dt,usedNS:Ye}}},{key:"isValidLookup",value:function(ae){return ae!==void 0&&!(!this.options.returnNull&&ae===null)&&!(!this.options.returnEmptyString&&ae==="")}},{key:"getResource",value:function(ae,de,me){var Be=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(ae,de,me,Be):this.resourceStore.getResource(ae,de,me,Be)}}],[{key:"hasDefaultValue",value:function(ae){var de="defaultValue";for(var me in ae)if(Object.prototype.hasOwnProperty.call(ae,me)&&de===me.substring(0,de.length)&&ae[me]!==void 0)return!0;return!1}}]),pe}(te);function Y(Ee){return Ee.charAt(0).toUpperCase()+Ee.slice(1)}var X=function(){function Ee(be){C.default(this,Ee),this.options=be,this.supportedLngs=this.options.supportedLngs||!1,this.logger=U.create("languageUtils")}return A.default(Ee,[{key:"getScriptPartFromCode",value:function(pe){if(!pe||pe.indexOf("-")<0)return null;var he=pe.split("-");return he.length===2||(he.pop(),he[he.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(he.join("-"))}},{key:"getLanguagePartFromCode",value:function(pe){if(!pe||pe.indexOf("-")<0)return pe;var he=pe.split("-");return this.formatLanguageCode(he[0])}},{key:"formatLanguageCode",value:function(pe){if(typeof pe=="string"&&pe.indexOf("-")>-1){var he=["hans","hant","latn","cyrl","cans","mong","arab"],ae=pe.split("-");return this.options.lowerCaseLng?ae=ae.map(function(de){return de.toLowerCase()}):ae.length===2?(ae[0]=ae[0].toLowerCase(),ae[1]=ae[1].toUpperCase(),he.indexOf(ae[1].toLowerCase())>-1&&(ae[1]=Y(ae[1].toLowerCase()))):ae.length===3&&(ae[0]=ae[0].toLowerCase(),ae[1].length===2&&(ae[1]=ae[1].toUpperCase()),ae[0]!=="sgn"&&ae[2].length===2&&(ae[2]=ae[2].toUpperCase()),he.indexOf(ae[1].toLowerCase())>-1&&(ae[1]=Y(ae[1].toLowerCase())),he.indexOf(ae[2].toLowerCase())>-1&&(ae[2]=Y(ae[2].toLowerCase()))),ae.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?pe.toLowerCase():pe}},{key:"isSupportedCode",value:function(pe){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(pe=this.getLanguagePartFromCode(pe)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(pe)>-1}},{key:"getBestMatchFromCodes",value:function(pe){var he=this;if(!pe)return null;var ae;return pe.forEach(function(de){if(!ae){var me=he.formatLanguageCode(de);(!he.options.supportedLngs||he.isSupportedCode(me))&&(ae=me)}}),!ae&&this.options.supportedLngs&&pe.forEach(function(de){if(!ae){var me=he.getLanguagePartFromCode(de);if(he.isSupportedCode(me))return ae=me;ae=he.options.supportedLngs.find(function(Be){if(Be.indexOf(me)===0)return Be})}}),ae||(ae=this.getFallbackCodes(this.options.fallbackLng)[0]),ae}},{key:"getFallbackCodes",value:function(pe,he){if(!pe)return[];if(typeof pe=="function"&&(pe=pe(he)),typeof pe=="string"&&(pe=[pe]),Object.prototype.toString.apply(pe)==="[object Array]")return pe;if(!he)return pe.default||[];var ae=pe[he];return ae||(ae=pe[this.getScriptPartFromCode(he)]),ae||(ae=pe[this.formatLanguageCode(he)]),ae||(ae=pe[this.getLanguagePartFromCode(he)]),ae||(ae=pe.default),ae||[]}},{key:"toResolveHierarchy",value:function(pe,he){var ae=this,de=this.getFallbackCodes(he||this.options.fallbackLng||[],pe),me=[],Be=function(et){et&&(ae.isSupportedCode(et)?me.push(et):ae.logger.warn("rejecting language code not found in supportedLngs: ".concat(et)))};return typeof pe=="string"&&pe.indexOf("-")>-1?(this.options.load!=="languageOnly"&&Be(this.formatLanguageCode(pe)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&Be(this.getScriptPartFromCode(pe)),this.options.load!=="currentOnly"&&Be(this.getLanguagePartFromCode(pe))):typeof pe=="string"&&Be(this.formatLanguageCode(pe)),de.forEach(function(Fe){me.indexOf(Fe)<0&&Be(ae.formatLanguageCode(Fe))}),me}}]),Ee}(),we=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Me={1:function(be){return Number(be>1)},2:function(be){return Number(be!=1)},3:function(be){return 0},4:function(be){return Number(be%10==1&&be%100!=11?0:be%10>=2&&be%10<=4&&(be%100<10||be%100>=20)?1:2)},5:function(be){return Number(be==0?0:be==1?1:be==2?2:be%100>=3&&be%100<=10?3:be%100>=11?4:5)},6:function(be){return Number(be==1?0:be>=2&&be<=4?1:2)},7:function(be){return Number(be==1?0:be%10>=2&&be%10<=4&&(be%100<10||be%100>=20)?1:2)},8:function(be){return Number(be==1?0:be==2?1:be!=8&&be!=11?2:3)},9:function(be){return Number(be>=2)},10:function(be){return Number(be==1?0:be==2?1:be<7?2:be<11?3:4)},11:function(be){return Number(be==1||be==11?0:be==2||be==12?1:be>2&&be<20?2:3)},12:function(be){return Number(be%10!=1||be%100==11)},13:function(be){return Number(be!==0)},14:function(be){return Number(be==1?0:be==2?1:be==3?2:3)},15:function(be){return Number(be%10==1&&be%100!=11?0:be%10>=2&&(be%100<10||be%100>=20)?1:2)},16:function(be){return Number(be%10==1&&be%100!=11?0:be!==0?1:2)},17:function(be){return Number(be==1||be%10==1&&be%100!=11?0:1)},18:function(be){return Number(be==0?0:be==1?1:2)},19:function(be){return Number(be==1?0:be==0||be%100>1&&be%100<11?1:be%100>10&&be%100<20?2:3)},20:function(be){return Number(be==1?0:be==0||be%100>0&&be%100<20?1:2)},21:function(be){return Number(be%100==1?1:be%100==2?2:be%100==3||be%100==4?3:0)},22:function(be){return Number(be==1?0:be==2?1:(be<0||be>10)&&be%10==0?2:3)}},qe=["v1","v2","v3"],je={zero:0,one:1,two:2,few:3,many:4,other:5};function We(){var Ee={};return we.forEach(function(be){be.lngs.forEach(function(pe){Ee[pe]={numbers:be.nr,plurals:Me[be.fc]}})}),Ee}var pt=function(){function Ee(be){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};C.default(this,Ee),this.languageUtils=be,this.options=pe,this.logger=U.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=We()}return A.default(Ee,[{key:"addRule",value:function(pe,he){this.rules[pe]=he}},{key:"getRule",value:function(pe){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(pe,{type:he.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[pe]||this.rules[this.languageUtils.getLanguagePartFromCode(pe)]}},{key:"needsPlural",value:function(pe){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=this.getRule(pe,he);return this.shouldUseIntlApi()?ae&&ae.resolvedOptions().pluralCategories.length>1:ae&&ae.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(pe,he){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(pe,ae).map(function(de){return"".concat(he).concat(de)})}},{key:"getSuffixes",value:function(pe){var he=this,ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},de=this.getRule(pe,ae);return de?this.shouldUseIntlApi()?de.resolvedOptions().pluralCategories.sort(function(me,Be){return je[me]-je[Be]}).map(function(me){return"".concat(he.options.prepend).concat(me)}):de.numbers.map(function(me){return he.getSuffix(pe,me,ae)}):[]}},{key:"getSuffix",value:function(pe,he){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},de=this.getRule(pe,ae);return de?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(de.select(he)):this.getSuffixRetroCompatible(de,he):(this.logger.warn("no plural rule found for: ".concat(pe)),"")}},{key:"getSuffixRetroCompatible",value:function(pe,he){var ae=this,de=pe.noAbs?pe.plurals(he):pe.plurals(Math.abs(he)),me=pe.numbers[de];this.options.simplifyPluralSuffix&&pe.numbers.length===2&&pe.numbers[0]===1&&(me===2?me="plural":me===1&&(me=""));var Be=function(){return ae.options.prepend&&me.toString()?ae.options.prepend+me.toString():me.toString()};return this.options.compatibilityJSON==="v1"?me===1?"":typeof me=="number"?"_plural_".concat(me.toString()):Be():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&pe.numbers.length===2&&pe.numbers[0]===1?Be():this.options.prepend&&de.toString()?this.options.prepend+de.toString():de.toString()}},{key:"shouldUseIntlApi",value:function(){return!qe.includes(this.options.compatibilityJSON)}}]),Ee}();function Gt(Ee,be){var pe=Object.keys(Ee);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(Ee);be&&(he=he.filter(function(ae){return Object.getOwnPropertyDescriptor(Ee,ae).enumerable})),pe.push.apply(pe,he)}return pe}function rn(Ee){for(var be=1;be<arguments.length;be++){var pe=arguments[be]!=null?arguments[be]:{};be%2?Gt(Object(pe),!0).forEach(function(he){ee.default(Ee,he,pe[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ee,Object.getOwnPropertyDescriptors(pe)):Gt(Object(pe)).forEach(function(he){Object.defineProperty(Ee,he,Object.getOwnPropertyDescriptor(pe,he))})}return Ee}var St=function(){function Ee(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};C.default(this,Ee),this.logger=U.create("interpolator"),this.options=be,this.format=be.interpolation&&be.interpolation.format||function(pe){return pe},this.init(be)}return A.default(Ee,[{key:"init",value:function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};pe.interpolation||(pe.interpolation={escapeValue:!0});var he=pe.interpolation;this.escape=he.escape!==void 0?he.escape:D,this.escapeValue=he.escapeValue!==void 0?he.escapeValue:!0,this.useRawValueToEscape=he.useRawValueToEscape!==void 0?he.useRawValueToEscape:!1,this.prefix=he.prefix?q(he.prefix):he.prefixEscaped||"{{",this.suffix=he.suffix?q(he.suffix):he.suffixEscaped||"}}",this.formatSeparator=he.formatSeparator?he.formatSeparator:he.formatSeparator||",",this.unescapePrefix=he.unescapeSuffix?"":he.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":he.unescapeSuffix||"",this.nestingPrefix=he.nestingPrefix?q(he.nestingPrefix):he.nestingPrefixEscaped||q("$t("),this.nestingSuffix=he.nestingSuffix?q(he.nestingSuffix):he.nestingSuffixEscaped||q(")"),this.nestingOptionsSeparator=he.nestingOptionsSeparator?he.nestingOptionsSeparator:he.nestingOptionsSeparator||",",this.maxReplaces=he.maxReplaces?he.maxReplaces:1e3,this.alwaysFormat=he.alwaysFormat!==void 0?he.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var pe="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(pe,"g");var he="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(he,"g");var ae="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(ae,"g")}},{key:"interpolate",value:function(pe,he,ae,de){var me=this,Be,Fe,et,dt=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function Ye(on){return on.replace(/\$/g,"$$$$")}var Te=function(Dt){if(Dt.indexOf(me.formatSeparator)<0){var Ft=le(he,dt,Dt);return me.alwaysFormat?me.format(Ft,void 0,ae,rn(rn(rn({},de),he),{},{interpolationkey:Dt})):Ft}var An=Dt.split(me.formatSeparator),Ln=An.shift().trim(),Un=An.join(me.formatSeparator).trim();return me.format(le(he,dt,Ln),Un,ae,rn(rn(rn({},de),he),{},{interpolationkey:Ln}))};this.resetRegExp();var xt=de&&de.missingInterpolationHandler||this.options.missingInterpolationHandler,cn=de&&de.interpolation&&de.interpolation.skipOnVariables!==void 0?de.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,zt=[{regex:this.regexpUnescape,safeValue:function(Dt){return Ye(Dt)}},{regex:this.regexp,safeValue:function(Dt){return me.escapeValue?Ye(me.escape(Dt)):Ye(Dt)}}];return zt.forEach(function(on){for(et=0;Be=on.regex.exec(pe);){var Dt=Be[1].trim();if(Fe=Te(Dt),Fe===void 0)if(typeof xt=="function"){var Ft=xt(pe,Be,de);Fe=typeof Ft=="string"?Ft:""}else if(de&&de.hasOwnProperty(Dt))Fe="";else if(cn){Fe=Be[0];continue}else me.logger.warn("missed to pass in variable ".concat(Dt," for interpolating ").concat(pe)),Fe="";else typeof Fe!="string"&&!me.useRawValueToEscape&&(Fe=ue(Fe));var An=on.safeValue(Fe);if(pe=pe.replace(Be[0],An),cn?(on.regex.lastIndex+=Fe.length,on.regex.lastIndex-=Be[0].length):on.regex.lastIndex=0,et++,et>=me.maxReplaces)break}}),pe}},{key:"nest",value:function(pe,he){var ae=this,de=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},me,Be,Fe=rn({},de);Fe.applyPostProcessor=!1,delete Fe.defaultValue;function et(xt,cn){var zt=this.nestingOptionsSeparator;if(xt.indexOf(zt)<0)return xt;var on=xt.split(new RegExp("".concat(zt,"[ ]*{"))),Dt="{".concat(on[1]);xt=on[0],Dt=this.interpolate(Dt,Fe);var Ft=Dt.match(/'/g),An=Dt.match(/"/g);(Ft&&Ft.length%2===0&&!An||An.length%2!==0)&&(Dt=Dt.replace(/'/g,'"'));try{Fe=JSON.parse(Dt),cn&&(Fe=rn(rn({},cn),Fe))}catch(Ln){return this.logger.warn("failed parsing options string in nesting for key ".concat(xt),Ln),"".concat(xt).concat(zt).concat(Dt)}return delete Fe.defaultValue,xt}for(;me=this.nestingRegexp.exec(pe);){var dt=[],Ye=!1;if(me[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(me[1])){var Te=me[1].split(this.formatSeparator).map(function(xt){return xt.trim()});me[1]=Te.shift(),dt=Te,Ye=!0}if(Be=he(et.call(this,me[1].trim(),Fe),Fe),Be&&me[0]===pe&&typeof Be!="string")return Be;typeof Be!="string"&&(Be=ue(Be)),Be||(this.logger.warn("missed to resolve ".concat(me[1]," for nesting ").concat(pe)),Be=""),Ye&&(Be=dt.reduce(function(xt,cn){return ae.format(xt,cn,de.lng,rn(rn({},de),{},{interpolationkey:me[1].trim()}))},Be.trim())),pe=pe.replace(me[0],Be),this.regexp.lastIndex=0}return pe}}]),Ee}();function gn(Ee,be){var pe=Object.keys(Ee);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(Ee);be&&(he=he.filter(function(ae){return Object.getOwnPropertyDescriptor(Ee,ae).enumerable})),pe.push.apply(pe,he)}return pe}function Xe(Ee){for(var be=1;be<arguments.length;be++){var pe=arguments[be]!=null?arguments[be]:{};be%2?gn(Object(pe),!0).forEach(function(he){ee.default(Ee,he,pe[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ee,Object.getOwnPropertyDescriptors(pe)):gn(Object(pe)).forEach(function(he){Object.defineProperty(Ee,he,Object.getOwnPropertyDescriptor(pe,he))})}return Ee}function En(Ee){var be=Ee.toLowerCase().trim(),pe={};if(Ee.indexOf("(")>-1){var he=Ee.split("(");be=he[0].toLowerCase().trim();var ae=he[1].substring(0,he[1].length-1);if(be==="currency"&&ae.indexOf(":")<0)pe.currency||(pe.currency=ae.trim());else if(be==="relativetime"&&ae.indexOf(":")<0)pe.range||(pe.range=ae.trim());else{var de=ae.split(";");de.forEach(function(me){if(me){var Be=me.split(":"),Fe=F.default(Be),et=Fe[0],dt=Fe.slice(1),Ye=dt.join(":").trim().replace(/^'+|'+$/g,"");pe[et.trim()]||(pe[et.trim()]=Ye),Ye==="false"&&(pe[et.trim()]=!1),Ye==="true"&&(pe[et.trim()]=!0),isNaN(Ye)||(pe[et.trim()]=parseInt(Ye,10))}})}}return{formatName:be,formatOptions:pe}}function yn(Ee){var be={};return function(he,ae,de){var me=ae+JSON.stringify(de),Be=be[me];return Be||(Be=Ee(ae,de),be[me]=Be),Be(he)}}var Yt=function(){function Ee(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};C.default(this,Ee),this.logger=U.create("formatter"),this.options=be,this.formats={number:yn(function(pe,he){var ae=new Intl.NumberFormat(pe,he);return function(de){return ae.format(de)}}),currency:yn(function(pe,he){var ae=new Intl.NumberFormat(pe,Xe(Xe({},he),{},{style:"currency"}));return function(de){return ae.format(de)}}),datetime:yn(function(pe,he){var ae=new Intl.DateTimeFormat(pe,Xe({},he));return function(de){return ae.format(de)}}),relativetime:yn(function(pe,he){var ae=new Intl.RelativeTimeFormat(pe,Xe({},he));return function(de){return ae.format(de,he.range||"day")}}),list:yn(function(pe,he){var ae=new Intl.ListFormat(pe,Xe({},he));return function(de){return ae.format(de)}})},this.init(be)}return A.default(Ee,[{key:"init",value:function(pe){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},ae=he.interpolation;this.formatSeparator=ae.formatSeparator?ae.formatSeparator:ae.formatSeparator||","}},{key:"add",value:function(pe,he){this.formats[pe.toLowerCase().trim()]=he}},{key:"addCached",value:function(pe,he){this.formats[pe.toLowerCase().trim()]=yn(he)}},{key:"format",value:function(pe,he,ae,de){var me=this,Be=he.split(this.formatSeparator),Fe=Be.reduce(function(et,dt){var Ye=En(dt),Te=Ye.formatName,xt=Ye.formatOptions;if(me.formats[Te]){var cn=et;try{var zt=de&&de.formatParams&&de.formatParams[de.interpolationkey]||{},on=zt.locale||zt.lng||de.locale||de.lng||ae;cn=me.formats[Te](et,on,Xe(Xe(Xe({},xt),de),zt))}catch(Dt){me.logger.warn(Dt)}return cn}else me.logger.warn("there was no format function for ".concat(Te));return et},pe);return Fe}}]),Ee}();function Pt(Ee,be){var pe=Object.keys(Ee);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(Ee);be&&(he=he.filter(function(ae){return Object.getOwnPropertyDescriptor(Ee,ae).enumerable})),pe.push.apply(pe,he)}return pe}function an(Ee){for(var be=1;be<arguments.length;be++){var pe=arguments[be]!=null?arguments[be]:{};be%2?Pt(Object(pe),!0).forEach(function(he){ee.default(Ee,he,pe[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ee,Object.getOwnPropertyDescriptors(pe)):Pt(Object(pe)).forEach(function(he){Object.defineProperty(Ee,he,Object.getOwnPropertyDescriptor(pe,he))})}return Ee}function Dr(Ee){var be=Gn();return function(){var he=Z.default(Ee),ae;if(be){var de=Z.default(this).constructor;ae=Reflect.construct(he,arguments,de)}else ae=he.apply(this,arguments);return N.default(this,ae)}}function Gn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Cn(Ee,be){Ee.pending[be]!==void 0&&(delete Ee.pending[be],Ee.pendingCount--)}var Jr=function(Ee){M.default(pe,Ee);var be=Dr(pe);function pe(he,ae,de){var me,Be=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return C.default(this,pe),me=be.call(this),oe&&te.call(B.default(me)),me.backend=he,me.store=ae,me.services=de,me.languageUtils=de.languageUtils,me.options=Be,me.logger=U.create("backendConnector"),me.waitingReads=[],me.maxParallelReads=Be.maxParallelReads||10,me.readingCalls=0,me.maxRetries=Be.maxRetries>=0?Be.maxRetries:5,me.retryTimeout=Be.retryTimeout>=1?Be.retryTimeout:350,me.state={},me.queue=[],me.backend&&me.backend.init&&me.backend.init(de,Be.backend,Be),me}return A.default(pe,[{key:"queueLoad",value:function(ae,de,me,Be){var Fe=this,et={},dt={},Ye={},Te={};return ae.forEach(function(xt){var cn=!0;de.forEach(function(zt){var on="".concat(xt,"|").concat(zt);!me.reload&&Fe.store.hasResourceBundle(xt,zt)?Fe.state[on]=2:Fe.state[on]<0||(Fe.state[on]===1?dt[on]===void 0&&(dt[on]=!0):(Fe.state[on]=1,cn=!1,dt[on]===void 0&&(dt[on]=!0),et[on]===void 0&&(et[on]=!0),Te[zt]===void 0&&(Te[zt]=!0)))}),cn||(Ye[xt]=!0)}),(Object.keys(et).length||Object.keys(dt).length)&&this.queue.push({pending:dt,pendingCount:Object.keys(dt).length,loaded:{},errors:[],callback:Be}),{toLoad:Object.keys(et),pending:Object.keys(dt),toLoadLanguages:Object.keys(Ye),toLoadNamespaces:Object.keys(Te)}}},{key:"loaded",value:function(ae,de,me){var Be=ae.split("|"),Fe=Be[0],et=Be[1];de&&this.emit("failedLoading",Fe,et,de),me&&this.store.addResourceBundle(Fe,et,me),this.state[ae]=de?-1:2;var dt={};this.queue.forEach(function(Ye){G(Ye.loaded,[Fe],et),Cn(Ye,ae),de&&Ye.errors.push(de),Ye.pendingCount===0&&!Ye.done&&(Object.keys(Ye.loaded).forEach(function(Te){dt[Te]||(dt[Te]={});var xt=Ye.loaded[Te];xt.length&&xt.forEach(function(cn){dt[Te][cn]===void 0&&(dt[Te][cn]=!0)})}),Ye.done=!0,Ye.errors.length?Ye.callback(Ye.errors):Ye.callback())}),this.emit("loaded",dt),this.queue=this.queue.filter(function(Ye){return!Ye.done})}},{key:"read",value:function(ae,de,me){var Be=this,Fe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,et=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,dt=arguments.length>5?arguments[5]:void 0;if(!ae.length)return dt(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:ae,ns:de,fcName:me,tried:Fe,wait:et,callback:dt});return}return this.readingCalls++,this.backend[me](ae,de,function(Ye,Te){if(Be.readingCalls--,Be.waitingReads.length>0){var xt=Be.waitingReads.shift();Be.read(xt.lng,xt.ns,xt.fcName,xt.tried,xt.wait,xt.callback)}if(Ye&&Te&&Fe<Be.maxRetries){setTimeout(function(){Be.read.call(Be,ae,de,me,Fe+1,et*2,dt)},et);return}dt(Ye,Te)})}},{key:"prepareLoading",value:function(ae,de){var me=this,Be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Fe=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),Fe&&Fe();typeof ae=="string"&&(ae=this.languageUtils.toResolveHierarchy(ae)),typeof de=="string"&&(de=[de]);var et=this.queueLoad(ae,de,Be,Fe);if(!et.toLoad.length)return et.pending.length||Fe(),null;et.toLoad.forEach(function(dt){me.loadOne(dt)})}},{key:"load",value:function(ae,de,me){this.prepareLoading(ae,de,{},me)}},{key:"reload",value:function(ae,de,me){this.prepareLoading(ae,de,{reload:!0},me)}},{key:"loadOne",value:function(ae){var de=this,me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Be=ae.split("|"),Fe=Be[0],et=Be[1];this.read(Fe,et,"read",void 0,void 0,function(dt,Ye){dt&&de.logger.warn("".concat(me,"loading namespace ").concat(et," for language ").concat(Fe," failed"),dt),!dt&&Ye&&de.logger.log("".concat(me,"loaded namespace ").concat(et," for language ").concat(Fe),Ye),de.loaded(ae,dt,Ye)})}},{key:"saveMissing",value:function(ae,de,me,Be,Fe){var et=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(de)){this.logger.warn('did not save key "'.concat(me,'" as the namespace "').concat(de,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}me==null||me===""||(this.backend&&this.backend.create&&this.backend.create(ae,de,me,Be,null,an(an({},et),{},{isUpdate:Fe})),!(!ae||!ae[0])&&this.store.addResource(ae[0],de,me,Be))}}]),pe}(te);function Pn(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(be){var pe={};if(E.default(be[1])==="object"&&(pe=be[1]),typeof be[1]=="string"&&(pe.defaultValue=be[1]),typeof be[2]=="string"&&(pe.tDescription=be[2]),E.default(be[2])==="object"||E.default(be[3])==="object"){var he=be[3]||be[2];Object.keys(he).forEach(function(ae){pe[ae]=he[ae]})}return pe},interpolation:{escapeValue:!0,format:function(be,pe,he,ae){return be},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function jt(Ee){return typeof Ee.ns=="string"&&(Ee.ns=[Ee.ns]),typeof Ee.fallbackLng=="string"&&(Ee.fallbackLng=[Ee.fallbackLng]),typeof Ee.fallbackNS=="string"&&(Ee.fallbackNS=[Ee.fallbackNS]),Ee.supportedLngs&&Ee.supportedLngs.indexOf("cimode")<0&&(Ee.supportedLngs=Ee.supportedLngs.concat(["cimode"])),Ee}function zn(Ee,be){var pe=Object.keys(Ee);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(Ee);be&&(he=he.filter(function(ae){return Object.getOwnPropertyDescriptor(Ee,ae).enumerable})),pe.push.apply(pe,he)}return pe}function Et(Ee){for(var be=1;be<arguments.length;be++){var pe=arguments[be]!=null?arguments[be]:{};be%2?zn(Object(pe),!0).forEach(function(he){ee.default(Ee,he,pe[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ee,Object.getOwnPropertyDescriptors(pe)):zn(Object(pe)).forEach(function(he){Object.defineProperty(Ee,he,Object.getOwnPropertyDescriptor(pe,he))})}return Ee}function lt(Ee){var be=Wt();return function(){var he=Z.default(Ee),ae;if(be){var de=Z.default(this).constructor;ae=Reflect.construct(he,arguments,de)}else ae=he.apply(this,arguments);return N.default(this,ae)}}function Wt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nn(){}function Lt(Ee){var be=Object.getOwnPropertyNames(Object.getPrototypeOf(Ee));be.forEach(function(pe){typeof Ee[pe]=="function"&&(Ee[pe]=Ee[pe].bind(Ee))})}var or=function(Ee){M.default(pe,Ee);var be=lt(pe);function pe(){var he,ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=arguments.length>1?arguments[1]:void 0;if(C.default(this,pe),he=be.call(this),oe&&te.call(B.default(he)),he.options=jt(ae),he.services={},he.logger=U,he.modules={external:[]},Lt(B.default(he)),de&&!he.isInitialized&&!ae.isClone){if(!he.options.initImmediate)return he.init(ae,de),N.default(he,B.default(he));setTimeout(function(){he.init(ae,de)},0)}return he}return A.default(pe,[{key:"init",value:function(){var ae=this,de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},me=arguments.length>1?arguments[1]:void 0;typeof de=="function"&&(me=de,de={}),!de.defaultNS&&de.defaultNS!==!1&&de.ns&&(typeof de.ns=="string"?de.defaultNS=de.ns:de.ns.indexOf("translation")<0&&(de.defaultNS=de.ns[0]));var Be=Pn();this.options=Et(Et(Et({},Be),this.options),jt(de)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Et(Et({},Be.interpolation),this.options.interpolation)),de.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=de.keySeparator),de.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=de.nsSeparator);function Fe(Dt){return Dt?typeof Dt=="function"?new Dt:Dt:null}if(!this.options.isClone){this.modules.logger?U.init(Fe(this.modules.logger),this.options):U.init(null,this.options);var et;this.modules.formatter?et=this.modules.formatter:typeof Intl<"u"&&(et=Yt);var dt=new X(this.options);this.store=new it(this.options.resources,this.options);var Ye=this.services;Ye.logger=U,Ye.resourceStore=this.store,Ye.languageUtils=dt,Ye.pluralResolver=new pt(dt,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),et&&(!this.options.interpolation.format||this.options.interpolation.format===Be.interpolation.format)&&(Ye.formatter=Fe(et),Ye.formatter.init(Ye,this.options),this.options.interpolation.format=Ye.formatter.format.bind(Ye.formatter)),Ye.interpolator=new St(this.options),Ye.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},Ye.backendConnector=new Jr(Fe(this.modules.backend),Ye.resourceStore,Ye,this.options),Ye.backendConnector.on("*",function(Dt){for(var Ft=arguments.length,An=new Array(Ft>1?Ft-1:0),Ln=1;Ln<Ft;Ln++)An[Ln-1]=arguments[Ln];ae.emit.apply(ae,[Dt].concat(An))}),this.modules.languageDetector&&(Ye.languageDetector=Fe(this.modules.languageDetector),Ye.languageDetector.init(Ye,this.options.detection,this.options)),this.modules.i18nFormat&&(Ye.i18nFormat=Fe(this.modules.i18nFormat),Ye.i18nFormat.init&&Ye.i18nFormat.init(this)),this.translator=new _e(this.services,this.options),this.translator.on("*",function(Dt){for(var Ft=arguments.length,An=new Array(Ft>1?Ft-1:0),Ln=1;Ln<Ft;Ln++)An[Ln-1]=arguments[Ln];ae.emit.apply(ae,[Dt].concat(An))}),this.modules.external.forEach(function(Dt){Dt.init&&Dt.init(ae)})}if(this.format=this.options.interpolation.format,me||(me=Nn),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var Te=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);Te.length>0&&Te[0]!=="dev"&&(this.options.lng=Te[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var xt=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];xt.forEach(function(Dt){ae[Dt]=function(){var Ft;return(Ft=ae.store)[Dt].apply(Ft,arguments)}});var cn=["addResource","addResources","addResourceBundle","removeResourceBundle"];cn.forEach(function(Dt){ae[Dt]=function(){var Ft;return(Ft=ae.store)[Dt].apply(Ft,arguments),ae}});var zt=re(),on=function(){var Ft=function(Ln,Un){ae.isInitialized&&!ae.initializedStoreOnce&&ae.logger.warn("init: i18next is already initialized. You should call init just once!"),ae.isInitialized=!0,ae.options.isClone||ae.logger.log("initialized",ae.options),ae.emit("initialized",ae.options),zt.resolve(Un),me(Ln,Un)};if(ae.languages&&ae.options.compatibilityAPI!=="v1"&&!ae.isInitialized)return Ft(null,ae.t.bind(ae));ae.changeLanguage(ae.options.lng,Ft)};return this.options.resources||!this.options.initImmediate?on():setTimeout(on,0),zt}},{key:"loadResources",value:function(ae){var de=this,me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nn,Be=me,Fe=typeof ae=="string"?ae:this.language;if(typeof ae=="function"&&(Be=ae),!this.options.resources||this.options.partialBundledLanguages){if(Fe&&Fe.toLowerCase()==="cimode")return Be();var et=[],dt=function(xt){if(xt){var cn=de.services.languageUtils.toResolveHierarchy(xt);cn.forEach(function(zt){et.indexOf(zt)<0&&et.push(zt)})}};if(Fe)dt(Fe);else{var Ye=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);Ye.forEach(function(Te){return dt(Te)})}this.options.preload&&this.options.preload.forEach(function(Te){return dt(Te)}),this.services.backendConnector.load(et,this.options.ns,function(Te){!Te&&!de.resolvedLanguage&&de.language&&de.setResolvedLanguage(de.language),Be(Te)})}else Be(null)}},{key:"reloadResources",value:function(ae,de,me){var Be=re();return ae||(ae=this.languages),de||(de=this.options.ns),me||(me=Nn),this.services.backendConnector.reload(ae,de,function(Fe){Be.resolve(),me(Fe)}),Be}},{key:"use",value:function(ae){if(!ae)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!ae.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return ae.type==="backend"&&(this.modules.backend=ae),(ae.type==="logger"||ae.log&&ae.warn&&ae.error)&&(this.modules.logger=ae),ae.type==="languageDetector"&&(this.modules.languageDetector=ae),ae.type==="i18nFormat"&&(this.modules.i18nFormat=ae),ae.type==="postProcessor"&&ut.addPostProcessor(ae),ae.type==="formatter"&&(this.modules.formatter=ae),ae.type==="3rdParty"&&this.modules.external.push(ae),this}},{key:"setResolvedLanguage",value:function(ae){if(!(!ae||!this.languages)&&!(["cimode","dev"].indexOf(ae)>-1))for(var de=0;de<this.languages.length;de++){var me=this.languages[de];if(!(["cimode","dev"].indexOf(me)>-1)&&this.store.hasLanguageSomeTranslations(me)){this.resolvedLanguage=me;break}}}},{key:"changeLanguage",value:function(ae,de){var me=this;this.isLanguageChangingTo=ae;var Be=re();this.emit("languageChanging",ae);var Fe=function(Te){me.language=Te,me.languages=me.services.languageUtils.toResolveHierarchy(Te),me.resolvedLanguage=void 0,me.setResolvedLanguage(Te)},et=function(Te,xt){xt?(Fe(xt),me.translator.changeLanguage(xt),me.isLanguageChangingTo=void 0,me.emit("languageChanged",xt),me.logger.log("languageChanged",xt)):me.isLanguageChangingTo=void 0,Be.resolve(function(){return me.t.apply(me,arguments)}),de&&de(Te,function(){return me.t.apply(me,arguments)})},dt=function(Te){!ae&&!Te&&me.services.languageDetector&&(Te=[]);var xt=typeof Te=="string"?Te:me.services.languageUtils.getBestMatchFromCodes(Te);xt&&(me.language||Fe(xt),me.translator.language||me.translator.changeLanguage(xt),me.services.languageDetector&&me.services.languageDetector.cacheUserLanguage(xt)),me.loadResources(xt,function(cn){et(cn,xt)})};return!ae&&this.services.languageDetector&&!this.services.languageDetector.async?dt(this.services.languageDetector.detect()):!ae&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(dt):dt(ae),Be}},{key:"getFixedT",value:function(ae,de,me){var Be=this,Fe=function et(dt,Ye){var Te;if(E.default(Ye)!=="object"){for(var xt=arguments.length,cn=new Array(xt>2?xt-2:0),zt=2;zt<xt;zt++)cn[zt-2]=arguments[zt];Te=Be.options.overloadTranslationOptionHandler([dt,Ye].concat(cn))}else Te=Et({},Ye);Te.lng=Te.lng||et.lng,Te.lngs=Te.lngs||et.lngs,Te.ns=Te.ns||et.ns,Te.keyPrefix=Te.keyPrefix||me||et.keyPrefix;var on=Be.options.keySeparator||".",Dt=Te.keyPrefix?"".concat(Te.keyPrefix).concat(on).concat(dt):dt;return Be.t(Dt,Te)};return typeof ae=="string"?Fe.lng=ae:Fe.lngs=ae,Fe.ns=de,Fe.keyPrefix=me,Fe}},{key:"t",value:function(){var ae;return this.translator&&(ae=this.translator).translate.apply(ae,arguments)}},{key:"exists",value:function(){var ae;return this.translator&&(ae=this.translator).exists.apply(ae,arguments)}},{key:"setDefaultNamespace",value:function(ae){this.options.defaultNS=ae}},{key:"hasLoadedNamespace",value:function(ae){var de=this,me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var Be=this.resolvedLanguage||this.languages[0],Fe=this.options?this.options.fallbackLng:!1,et=this.languages[this.languages.length-1];if(Be.toLowerCase()==="cimode")return!0;var dt=function(xt,cn){var zt=de.services.backendConnector.state["".concat(xt,"|").concat(cn)];return zt===-1||zt===2};if(me.precheck){var Ye=me.precheck(this,dt);if(Ye!==void 0)return Ye}return!!(this.hasResourceBundle(Be,ae)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||dt(Be,ae)&&(!Fe||dt(et,ae)))}},{key:"loadNamespaces",value:function(ae,de){var me=this,Be=re();return this.options.ns?(typeof ae=="string"&&(ae=[ae]),ae.forEach(function(Fe){me.options.ns.indexOf(Fe)<0&&me.options.ns.push(Fe)}),this.loadResources(function(Fe){Be.resolve(),de&&de(Fe)}),Be):(de&&de(),Promise.resolve())}},{key:"loadLanguages",value:function(ae,de){var me=re();typeof ae=="string"&&(ae=[ae]);var Be=this.options.preload||[],Fe=ae.filter(function(et){return Be.indexOf(et)<0});return Fe.length?(this.options.preload=Be.concat(Fe),this.loadResources(function(et){me.resolve(),de&&de(et)}),me):(de&&de(),Promise.resolve())}},{key:"dir",value:function(ae){if(ae||(ae=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!ae)return"rtl";var de=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"];return de.indexOf(this.services.languageUtils.getLanguagePartFromCode(ae))>-1||ae.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var ae=this,de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nn,Be=Et(Et(Et({},this.options),de),{isClone:!0}),Fe=new pe(Be);(de.debug!==void 0||de.prefix!==void 0)&&(Fe.logger=Fe.logger.clone(de));var et=["store","services","language"];return et.forEach(function(dt){Fe[dt]=ae[dt]}),Fe.services=Et({},this.services),Fe.services.utils={hasLoadedNamespace:Fe.hasLoadedNamespace.bind(Fe)},Fe.translator=new _e(Fe.services,Fe.options),Fe.translator.on("*",function(dt){for(var Ye=arguments.length,Te=new Array(Ye>1?Ye-1:0),xt=1;xt<Ye;xt++)Te[xt-1]=arguments[xt];Fe.emit.apply(Fe,[dt].concat(Te))}),Fe.init(Be,me),Fe.translator.options=Fe.options,Fe.translator.backendConnector.services.utils={hasLoadedNamespace:Fe.hasLoadedNamespace.bind(Fe)},Fe}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),pe}(te);ee.default(or,"createInstance",function(){var Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},be=arguments.length>1?arguments[1]:void 0;return new or(Ee,be)});var Kt=or.createInstance();return Kt.createInstance=or.createInstance,i18next=Kt,i18next}(function(n,e){(function(t,a){n.exports=a(requireSuncalc(),requireI18next())})(commonjsGlobal,function(t,a){function l(it){return it&&typeof it=="object"&&"default"in it?it:{default:it}}var h=l(t),g=l(a),p={PH:[{name:"Ao Nuevo",fixed_date:[1,1]},{name:"Da Nacional de la Memoria por la Verdad y la Justicia",fixed_date:[3,24]},{name:"Da del Veterano y de los Cados en la Guerra de Malvinas",fixed_date:[4,2]},{name:"Da del Trabajador",fixed_date:[5,1]},{name:"Da de la Revolucin de Mayo",fixed_date:[5,25]},{name:"Paso a la Inmortalidad del General Manuel Belgrano",fixed_date:[6,20]},{name:"Da de la Independencia",fixed_date:[7,9]},{name:"Inmaculada Concepcin de Mara",fixed_date:[12,8]},{name:"Navidad",fixed_date:[12,25]}]};p.PH;var y={PH:[{name:"Neujahrstag",fixed_date:[1,1]},{name:"Heilige Drei Knige",fixed_date:[1,6]},{name:"Ostermontag",variable_date:"easter",offset:1},{name:"Staatsfeiertag",fixed_date:[5,1]},{name:"Christi Himmelfahrt",variable_date:"easter",offset:39},{name:"Pfingstmontag",variable_date:"easter",offset:50},{name:"Fronleichnam",variable_date:"easter",offset:60},{name:"Mari Himmelfahrt",fixed_date:[8,15]},{name:"Nationalfeiertag",fixed_date:[10,26]},{name:"Allerheiligen",fixed_date:[11,1]},{name:"Mari Empfngnis",fixed_date:[12,8]},{name:"Christtag",fixed_date:[12,25]},{name:"Stefanitag",fixed_date:[12,26]}],SH:[{2017:[4,8,4,18],2018:[3,24,4,3],2019:[4,13,4,23],2020:[4,4,4,14],2021:[3,27,4,6],2022:[4,9,4,19],2023:[4,1,4,11],2024:[3,23,4,2],name:"Osterferien"},{2017:[6,3,6,6],2018:[5,19,5,22],2019:[6,8,6,11],2020:[5,30,6,2],2021:[5,22,5,25],2022:[6,4,6,7],2023:[5,57,5,30],2024:[5,18,5,21],name:"Pfingstferien"},{2016:[11,2],2017:[11,2],2018:[11,2],2019:[11,2],2020:[11,2],2021:[11,2],2022:[11,2],2023:[11,2],name:"Allerseelen"},{2016:[12,24,1,7],2017:[12,24,1,6],2018:[12,24,1,6],2019:[12,23,1,6],2020:[12,24,1,6],2021:[12,24,1,6],2022:[12,24,1,6],2023:[12,24,1,6],name:"Weihnachtsferien"}],Burgenland:{_state_code:1,SH:[{2016:[2,8,2,13],2017:[2,13,2,18],2018:[2,12,2,17],2019:[2,11,2,16],2020:[2,10,2,15],2021:[2,8,2,13],name:"Semesterferien"},{2016:[7,2,9,3],2017:[7,1,9,3],2018:[6,30,9,2],2019:[6,29,9,1],2020:[7,4,9,6],2021:[7,3,9,4],name:"Sommerferien"}]},Krnten:{_state_code:2,SH:[{2016:[2,8,2,13],2017:[2,13,2,18],2018:[2,12,2,17],2019:[2,11,2,16],2020:[2,10,2,15],2021:[2,8,2,13],name:"Semesterferien"},{2016:[7,9,9,10],2017:[7,8,9,10],2018:[7,7,9,9],2019:[7,6,9,8],2020:[7,11,9,13],2021:[7,10,9,11],name:"Sommerferien"}]},Niedersterreich:{_state_code:3,SH:[{2016:[2,1,2,6],2017:[2,6,2,11],2018:[2,5,2,10],2019:[2,4,2,9],2020:[2,3,2,8],2021:[2,1,2,6],name:"Semesterferien"},{2016:[7,2,9,3],2017:[7,1,9,3],2018:[6,30,9,2],2019:[6,29,9,1],2020:[7,4,9,6],2021:[7,3,9,4],name:"Sommerferien"}]},Obersterreich:{_state_code:4,SH:[{2016:[2,15,2,20],2017:[2,20,2,25],2018:[2,19,2,24],2019:[2,18,2,23],2020:[2,17,2,22],2021:[2,15,2,20],name:"Semesterferien"},{2016:[7,9,9,10],2017:[7,8,9,10],2018:[7,7,9,9],2019:[7,6,9,8],2020:[7,11,9,13],2021:[7,10,9,11],name:"Sommerferien"}]},Salzburg:{_state_code:5,SH:[{2016:[2,8,2,13],2017:[2,13,2,18],2018:[2,12,2,17],2019:[2,11,2,16],2020:[2,10,2,15],2021:[2,8,2,13],name:"Semesterferien"},{2016:[7,9,9,10],2017:[7,8,9,10],2018:[7,7,9,9],2019:[7,6,9,8],2020:[7,11,9,13],2021:[7,10,9,11],name:"Sommerferien"}]},Steiermark:{_state_code:6,SH:[{2016:[2,15,2,20],2017:[2,20,2,25],2018:[2,19,2,24],2019:[2,18,2,23],2020:[2,17,2,22],2021:[2,15,2,20],name:"Semesterferien"},{2016:[7,9,9,10],2017:[7,8,9,10],2018:[7,7,9,9],2019:[7,6,9,8],2020:[7,11,9,13],2021:[7,10,9,12],name:"Sommerferien"}]},Tirol:{_state_code:7,SH:[{2016:[2,8,2,13],2017:[2,13,2,18],2018:[2,12,2,17],2019:[2,11,2,16],2020:[2,10,2,15],2021:[2,8,2,13],name:"Semesterferien"},{2016:[7,9,9,10],2017:[7,8,9,10],2018:[7,7,9,9],2019:[7,6,9,8],2020:[7,11,9,13],2021:[7,10,9,11],name:"Sommerferien"}]},Vorarlberg:{_state_code:8,SH:[{2016:[2,15,2,20],2017:[2,13,2,18],2018:[2,5,2,10],2019:[2,11,2,16],2020:[2,10,2,15],2021:[2,8,2,13],name:"Semesterferien"},{2016:[7,9,9,10],2017:[7,8,9,10],2018:[7,7,9,9],2019:[7,6,9,8],2020:[7,11,9,13],2021:[7,10,9,11],name:"Sommerferien"}]},Wien:{_state_code:9,SH:[{2016:[2,1,2,6],2017:[2,6,2,11],2018:[2,5,2,10],2019:[2,4,2,9],2020:[2,3,2,8],2021:[2,1,2,6],name:"Semesterferien"},{2016:[7,2,9,3],2017:[7,1,9,3],2018:[6,30,9,2],2019:[6,29,9,1],2020:[7,4,9,6],2021:[7,3,9,4],name:"Sommerferien"}]}};y.PH,y.SH,y.Burgenland,y.Salzburg,y.Steiermark,y.Tirol,y.Vorarlberg,y.Wien;var b={PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}],"Australian Capital Territory":{_state_code:"act",PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Canberra Day",variable_date:"firstMarchMonday",offset:7},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Saturday",variable_date:"easter",offset:-1},{name:"Easter Sunday",variable_date:"easter"},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"Reconciliation Day",variable_date:"lastMayMonday"},{name:"Queens Birthday",variable_date:"firstJuneMonday",offset:7},{name:"Family and Community Day",variable_date:"lastSeptemberMonday"},{name:"Labour Day",variable_date:"firstOctoberMonday"},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},"New South Wales":{_state_code:"nsw",PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Saturday",variable_date:"easter",offset:-1},{name:"Easter Sunday",variable_date:"easter"},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"Queens Birthday",variable_date:"firstJuneMonday",offset:7},{name:"Labour Day",variable_date:"firstOctoberMonday"},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},"Northern Territory":{_state_code:"nt",PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Saturday",variable_date:"easter",offset:-1},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"May Day",variable_date:"firstMayMonday"},{name:"Queens Birthday",variable_date:"firstJuneMonday",offset:7},{name:"Picnic Day",variable_date:"firstAugustMonday"},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},Queensland:{_state_code:"qld",PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Saturday",variable_date:"easter",offset:-1},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"Labour Day",variable_date:"firstMayMonday"},{name:"Queens Birthday",variable_date:"firstOctoberMonday"},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},"South Australia":{_state_code:"sa",PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Adelaide Cup",variable_date:"firstMarchMonday",offset:7},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Saturday",variable_date:"easter",offset:-1},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"Queens Birthday",variable_date:"firstJuneMonday",offset:7},{name:"Labour Day",variable_date:"firstOctoberMonday"},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},Tasmania:{_state_code:"tas",PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Eight Hours Day",variable_date:"firstMarchMonday",offset:7},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"Queens Birthday",variable_date:"firstJuneMonday",offset:7},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},Victoria:{_state_code:"vic",PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Labour Day",variable_date:"firstMarchMonday",offset:7},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Saturday",variable_date:"easter",offset:-1},{name:"Easter Sunday",variable_date:"easter"},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"Queens Birthday",variable_date:"firstJuneMonday",offset:7},{name:"AFL Grand Final",variable_date:"lastSeptemberFriday"},{name:"Melbourne Cup",variable_date:"firstNovemberTuesday"},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},"Western Australia":{_state_code:"wa",PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Australia Day",fixed_date:[1,26]},{name:"Labour Day",variable_date:"firstMarchMonday"},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"ANZAC Day",fixed_date:[4,25]},{name:"Western Australia Day",variable_date:"firstJuneMonday"},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]}};b.PH,b.Queensland,b.Tasmania,b.Victoria;var E={PH:[{name:"Nieuwjaar - Jour de l'an",fixed_date:[1,1]},{name:"Paasmaandag - Lundi de Pques",variable_date:"easter",offset:1},{name:"Dag van de Arbeid - Fte du Travail",fixed_date:[5,1]},{name:"Onze-Lieve-Heer-Hemelvaart - Jeudi de l'Ascensionn",variable_date:"easter",offset:39},{name:"Pinkstermaandag - Lundi de Pentecte",variable_date:"easter",offset:50},{name:"Nationale feestdag van Belgi - Fte nationale",fixed_date:[7,21]},{name:"Onze-Lieve-Vrouw-Hemelvaart - Assomption",fixed_date:[8,15]},{name:"Allerheiligen - Toussaint",fixed_date:[11,1]},{name:"Wapenstilstand - Armistice",fixed_date:[11,11]},{name:"Kerstmis - Nol",fixed_date:[12,25]}],SH:[{2020:[2,24,3,1],2021:[2,15,2,21],2022:[2,28,3,6],2023:[2,20,2,26],name:"Krokusvakantie - Vacances de carnaval"},{2020:[4,6,4,19],2021:[4,5,4,18],2022:[4,4,4,18],2023:[4,3,4,16],name:"Paasvakantie - Vacances de pques"},{2020:[7,1,8,31],2021:[7,1,8,31],2022:[7,1,8,31],2023:[7,1,8,31],name:"Zomervakantie - Vacances d't"},{2019:[10,28,11,3],2020:[11,2,11,15],2021:[11,1,11,7],2022:[10,31,11,6],name:"Herfstvakantie - Vacances automne"},{2019:[12,23,1,5],2020:[12,21,1,3],2021:[12,27,1,9],2022:[12,26,1,8],name:"Kerstvakantie - Vacances de Nol"}]};E.PH,E.SH;var C={PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}],Acre:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Dia do evanglico",fixed_date:[1,23]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Alusivo ao Dia Internacional da Mulher",fixed_date:[3,8]},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Aniversrio do estado",fixed_date:[6,15]},{name:"Dia da Amaznia",fixed_date:[9,5]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Assinatura do Tratado de Petrpolis",fixed_date:[11,17]},{name:"Natal",fixed_date:[12,25]}]},Alagoas:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"So Joo",fixed_date:[6,24]},{name:"So Pedro",fixed_date:[6,29]},{name:"Independncia",fixed_date:[9,7]},{name:"Emancipao poltica",fixed_date:[9,16]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Morte de Zumbi dos Palmares",fixed_date:[11,20]},{name:"Natal",fixed_date:[12,25]}]},Amap:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Dia de So Jos",fixed_date:[3,19]},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Data Magna do estado",fixed_date:[9,13]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Amazonas:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Data Magna do estado",fixed_date:[9,5]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Dia da Conscincia Negra",fixed_date:[11,20]},{name:"Natal",fixed_date:[12,25]}]},Bahia:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Data magna do estado",fixed_date:[2,7]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Cear:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Data magna do estado",fixed_date:[3,25]},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},"Distrito Federal":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Dia do evanglico",fixed_date:[11,30]},{name:"Natal",fixed_date:[12,25]}]},"Esprito Santo":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Data magna do estado",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Gois:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Maranho:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Data magna do estado",fixed_date:[7,28]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},"Mato Grosso":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Dia da Conscincia Negra",fixed_date:[11,20]},{name:"Natal",fixed_date:[12,25]}]},"Mato Grosso do Sul":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Criao do estado",fixed_date:[10,11]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},"Minas Gerais":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Data magna do estado",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Par:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Data magna do estado",fixed_date:[8,15]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Paraba:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Homenagem a Joo Pessoa",fixed_date:[7,26]},{name:"Data magna do estado",fixed_date:[8,5]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Paran:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Data magna do estado",fixed_date:[12,19]},{name:"Natal",fixed_date:[12,25]}]},Pernambuco:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Data magna do estado",variable_date:"firstMarchSunday"},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Piau:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Data magna do estado",fixed_date:[10,19]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},"Rio de Janeiro":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Dia da Conscincia Negra",fixed_date:[11,20]},{name:"Natal",fixed_date:[12,25]}]},"Rio Grande do Norte":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"So Jorge",fixed_date:[4,23]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Mrtires de Cunha e Uruau",fixed_date:[10,3]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},"Rio Grande do Sul":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Proclamao da Repblica Rio-Grandense",fixed_date:[9,20]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Rondnia:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Data magna do estado",fixed_date:[1,4]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Dia do evanglico",fixed_date:[6,18]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Roraima:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Data magna do estado",fixed_date:[10,5]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},"Santa Catarina":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Data magna do estado",fixed_date:[8,11]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Santa Catarina de Alexandria",fixed_date:[11,25]},{name:"Natal",fixed_date:[12,25]}]},"So Paulo":{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Data magna do estado",fixed_date:[7,9]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]},Sergipe:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Aniversrio de Aracaju",fixed_date:[3,17]},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"So Joo",fixed_date:[6,24]},{name:"Data magna do estado",fixed_date:[7,8]},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Nossa Senhora da Conceio",fixed_date:[12,8]},{name:"Natal",fixed_date:[12,25]}]},Tocantins:{PH:[{name:"Ano Novo",fixed_date:[1,1]},{name:"Carnaval",variable_date:"easter",offset:-47},{name:"Autonomia do estado",fixed_date:[3,18]},{name:"Sexta-feira santa",variable_date:"easter",offset:-2},{name:"Tiradentes",fixed_date:[4,21]},{name:"Dia do Trabalhador",fixed_date:[5,1]},{name:"Corpus Christi",variable_date:"easter",offset:60},{name:"Independncia",fixed_date:[9,7]},{name:"Nossa Senhora da Natividade",fixed_date:[9,8]},{name:"Criao do estado",fixed_date:[10,5]},{name:"Nossa Senhora Aparecida",fixed_date:[10,12]},{name:"Finados",fixed_date:[11,2]},{name:"Proclamao da Repblica",fixed_date:[11,15]},{name:"Natal",fixed_date:[12,25]}]}};C.PH,C.Acre,C.Alagoas,C.Amazonas,C.Bahia,C.Pernambuco,C.Roraima,C.Sergipe,C.Tocantins;var A={PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Canada Day",variable_date:"canadaDay"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Christmas Day",fixed_date:[12,25]}],Alberta:{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Alberta Family Day",variable_date:"firstFebruaryMonday",offset:14},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"Heritage Day",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},"British Columbia":{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Family Day",variable_date:"firstFebruaryMonday",offset:7},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"British Columbia Day",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]}]},Manitoba:{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Louis Riel Day",variable_date:"firstFebruaryMonday",offset:14},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"Civic Holiday",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]}]},"New Brunswick":{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"New Brunswick Day",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},"Newfoundland and Labrador":{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Saint Patrick's Day",fixed_date:[3,17]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Saint George's Day",fixed_date:[4,23]},{name:"Discovery Day",fixed_date:[6,24]},{name:"Memorial Day",fixed_date:[7,1]},{name:"Orangemen's Day",fixed_date:[7,12]},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Armistice Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]}]},"Northwest Territories":{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"National Aboriginal Day",fixed_date:[6,21]},{name:"Canada Day",variable_date:"canadaDay"},{name:"Civic Holiday",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]}]},"Nova Scotia":{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"Natal Day",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},Nunavut:{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"Nunavut Day",fixed_date:[7,9]},{name:"Civic Holiday",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]}]},Ontario:{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Family Day",variable_date:"firstFebruaryMonday",offset:14},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"August Civic Public Holiday",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},"Prince Edward Island":{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Islander Day",variable_date:"firstFebruaryMonday",offset:14},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"Civic Holiday",variable_date:"firstAugustMonday"},{name:"Gold Cup Parade Day",variable_date:"firstAugustMonday",offset:18},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},Quebec:{PH:[{name:"Jour de l'an",fixed_date:[1,1]},{name:"Vendredi saint",variable_date:"easter",offset:-2},{name:"Lundi de Pques",variable_date:"easter",offset:1},{name:"Journe nationale des patriotes",variable_date:"victoriaDay"},{name:"Fte nationale du Qubec",fixed_date:[6,24]},{name:"Fte du Canada",variable_date:"canadaDay"},{name:"Fte du Travail",variable_date:"firstSeptemberMonday"},{name:"Jour de l'Action de grce",variable_date:"firstOctoberMonday",offset:7},{name:"Nol",fixed_date:[12,25]}]},Saskatchewan:{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Family Day",variable_date:"firstFebruaryMonday",offset:14},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"Saskatchewan Day",variable_date:"firstAugustMonday"},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]}]},Yukon:{PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Heritage Day",variable_date:"lastFebruarySunday",offset:-2},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"Victoria Day",variable_date:"victoriaDay"},{name:"Canada Day",variable_date:"canadaDay"},{name:"Discovery Day",variable_date:"firstAugustMonday",offset:14},{name:"Labour Day",variable_date:"firstSeptemberMonday"},{name:"Thanksgiving",variable_date:"firstOctoberMonday",offset:7},{name:"Remembrance Day",fixed_date:[11,11]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]}};A.PH,A.Alberta,A.Manitoba,A.Nunavut,A.Ontario,A.Quebec,A.Saskatchewan,A.Yukon;var B={PH:[{name:"Neujahrstag/Nouvel an/Capo d'anno",fixed_date:[1,1]},{name:"Berchtoldstag/2 janvier",fixed_date:[1,2],only_states:["Zrich","Bern","Luzern","Obwalden","Nidwalden","Glarus","Zug","Freiburg","Solothurn","Schaffhausen","Graubnden","Aargau","Thurgau","Waadt","Neuenburg","Genf","Jura","Sankt Gallen","Wallis"]},{name:"Heilige Drei Knige/Epifania",fixed_date:[1,6],only_states:["Uri","Schwyz","Graubnden","Tessin"]},{name:"Instauration de la Rpublique",fixed_date:[3,1],only_states:["Neuenburg"]},{name:"Josefstag/Saint-Joseph/San Giuseppe",fixed_date:[3,19],only_states:["Luzern","Uri","Schwyz","Nidwalden","Zug","Graubnden","Tessin","Wallis"]},{name:"Karfreitag/Vendredi saint",variable_date:"easter",offset:-2,only_states:["Zrich","Bern","Luzern","Uri","Schwyz","Obwalden","Nidwalden","Glarus","Zug","Freiburg","Solothurn","Basel-Stadt","Basel-Landschaft","Schaffhausen","Appenzell Ausserrhoden","Appenzell Innerrhoden","Sankt Gallen","Graubnden","Aargau","Thurgau","Waadt","Neuenburg","Genf","Jura"]},{name:"Ostermontag/Lundi de Pques/Lunedi di Pasqua",variable_date:"easter",offset:1,only_states:["Zrich","Bern","Luzern","Uri","Schwyz","Obwalden","Nidwalden","Glarus","Zug","Freiburg","Solothurn","Basel-Stadt","Basel-Landschaft","Schaffhausen","Appenzell Ausserrhoden","Appenzell Innerrhoden","Sankt Gallen","Graubnden","Aargau","Thurgau","Tessin","Waadt","Neuenburg","Genf","Jura","Wallis"]},{name:"Tag der Arbeit/Festa dei lavoratori",fixed_date:[5,1],only_states:["Zrich","Freiburg","Solothurn","Basel-Stadt","Basel-Landschaft","Schaffhausen","Aargau","Thurgau","Tessin","Neuenburg","Jura"]},{name:"Auffahrt/Ascension/Ascensione",variable_date:"easter",offset:39},{name:"Pfingstmontag/Lundi de Pentecte/Lunedi di Pentecoste",variable_date:"easter",offset:50,only_states:["Zrich","Bern","Luzern","Uri","Schwyz","Obwalden","Nidwalden","Glarus","Zug","Freiburg","Solothurn","Basel-Stadt","Basel-Landschaft","Schaffhausen","Appenzell Ausserrhoden","Appenzell Innerrhoden","Sankt Gallen","Graubnden","Aargau","Thurgau","Tessin","Waadt","Neuenburg","Genf","Jura","Wallis"]},{name:"Fronleichnam/Fte-Dieu/Corpus domini",variable_date:"easter",offset:60,only_states:["Luzern","Uri","Schwyz","Obwalden","Nidwalden","Zug","Freiburg","Solothurn","Basel-Landschaft","Appenzell Innerrhoden","Graubnden","Aargau","Tessin","Wallis","Neuenburg","Jura"]},{name:"Commmoration du plbiscite jurassien",fixed_date:[6,23],only_states:["Jura"]},{name:"San Pietro e Paolo",fixed_date:[6,29],only_states:["Tessin"]},{name:"Bundesfeiertag/Jour de la fte nationale/Giorno festivo federale",fixed_date:[8,1]},{name:"Mari Himmelfahrt/Assomption/Assunzione",fixed_date:[8,15],only_states:["Luzern","Uri","Schwyz","Obwalden","Nidwalden","Zug","Freiburg","Solothurn","Basel-Landschaft","Appenzell Innerrhoden","Graubnden","Aargau","Tessin","Wallis","Jura"]},{name:"Mauritiustag",fixed_date:[9,22],only_states:["Appenzell Innerrhoden"]},{name:"Bruderklausenfest",fixed_date:[9,25],only_states:["Obwalden"]},{name:"Allerheiligen/Toussaint/Ognissanti",fixed_date:[11,1],only_states:["Luzern","Uri","Schwyz","Obwalden","Nidwalden","Glarus","Zug","Freiburg","Solothurn","Appenzell Innerrhoden","Sankt Gallen","Graubnden","Aargau","Tessin","Wallis","Jura"]},{name:"Mari Empfngnis/Immacule Conception/Ognissanti",fixed_date:[12,8],only_states:["Luzern","Uri","Schwyz","Obwalden","Nidwalden","Zug","Freiburg","Solothurn","Appenzell Innerrhoden","Graubnden","Aargau","Tessin","Wallis"]},{name:"Weihnachtstag/Nol/Natale",fixed_date:[12,25]},{name:"Stephanstag/Saint-Etienne/Santo Stefano",fixed_date:[12,26],only_states:["Zrich","Bern","Luzern","Uri","Schwyz","Obwalden","Nidwalden","Glarus","Zug","Freiburg","Solothurn","Basel-Stadt","Basel-Landschaft","Schaffhausen","Appenzell Ausserrhoden","Appenzell Innerrhoden","Sankt Gallen","Graubnden","Aargau","Thurgau","Tessin","Wallis"]},{name:"Restauration de la Rpublique",fixed_date:[12,31],only_states:["Genf"]}],Aargau:{_state_code:"ag"},"Appenzell Ausserrhoden":{_state_code:"ar"},"Appenzell Innerrhoden":{_state_code:"ai"},"Basel-Landschaft":{_state_code:"bl"},"Basel-Stadt":{_state_code:"bs"},Bern:{_state_code:"be"},Freiburg:{_state_code:"fr"},Genf:{_state_code:"ge"},Glarus:{_state_code:"gl"},Graubnden:{_state_code:"gr"},Jura:{_state_code:"ju"},Luzern:{_state_code:"lu"},Neuenburg:{_state_code:"ne"},Nidwalden:{_state_code:"nw"},Obwalden:{_state_code:"ow"},Schaffhausen:{_state_code:"sh"},Schwyz:{_state_code:"sz"},Solothurn:{_state_code:"so"},"Sankt Gallen":{_state_code:"sg"},Tessin:{_state_code:"ti"},Thurgau:{_state_code:"tg"},Uri:{_state_code:"ur"},Waadt:{_state_code:"vd"},Wallis:{_state_code:"vs"},Zug:{_state_code:"zg"},Zrich:{_state_code:"zh"}};B.PH,B.Aargau,B.Bern,B.Freiburg,B.Genf,B.Glarus,B.Jura,B.Luzern,B.Neuenburg,B.Nidwalden,B.Obwalden,B.Schaffhausen,B.Schwyz,B.Solothurn,B.Tessin,B.Thurgau,B.Uri,B.Waadt,B.Wallis,B.Zug;var M={PH:[{name:"Fte du 1 janvier",fixed_date:[1,1]},{name:"Lundi de Pques",variable_date:"easter",offset:1},{name:"Fte du travail",fixed_date:[5,1]},{name:"Lendemain de la Fte du travail",variable_date:"nextMo-Sa01May"},{name:"Jour de lAscension",variable_date:"easter",offset:39},{name:"Lundi de la Pentecte",variable_date:"easter",offset:50},{name:"Fte nationale",fixed_date:[8,7]},{name:"Lendemain de la Fte nationale",variable_date:"nextMo-Sa07August"},{name:"Fte de lAssomption",fixed_date:[8,15]},{name:"Fte de la Toussaint",fixed_date:[11,1]},{name:"Journe Nationale de la Paix",fixed_date:[11,15]},{name:"Fte de Nol",fixed_date:[12,25]},{name:"Lendemain de la Fte de Nol",variable_date:"nextMo-Sa25December"}]};M.PH;var N={PH:[{name:"Den obnovy samostatnho eskho sttu",fixed_date:[1,1]},{name:"Velk ptek",variable_date:"easter",offset:-2},{name:"Velikonon pondl",variable_date:"easter",offset:1},{name:"Svtek prce",fixed_date:[5,1]},{name:"Den vtzstv",fixed_date:[5,8]},{name:"Den slovanskch vrozvst Cyrila a Metodje",fixed_date:[7,5]},{name:"Den uplen mistra Jana Husa",fixed_date:[7,6]},{name:"Den esk sttnosti",fixed_date:[9,28]},{name:"Den vzniku samostatnho eskoslovenskho sttu",fixed_date:[10,28]},{name:"Den boje za svobodu a demokracii",fixed_date:[11,17]},{name:"tdr den",fixed_date:[12,24]},{name:"1. svtek vnon",fixed_date:[12,25]},{name:"2. svtek vnon",fixed_date:[12,26]}]};N.PH;var Z={PH:[{name:"Neujahrstag",fixed_date:[1,1]},{name:"Heilige Drei Knige",fixed_date:[1,6],only_states:["Baden-Wrttemberg","Bayern","Sachsen-Anhalt"]},{name:"Frauentag",fixed_date:[3,8],only_states:["Berlin"]},{name:"Tag der Arbeit",fixed_date:[5,1]},{name:"Karfreitag",variable_date:"easter",offset:-2},{name:"Ostersonntag",variable_date:"easter",only_states:["Brandenburg"]},{name:"Ostermontag",variable_date:"easter",offset:1},{name:"Christi Himmelfahrt",variable_date:"easter",offset:39},{name:"Pfingstsonntag",variable_date:"easter",offset:49,only_states:["Brandenburg"]},{name:"Pfingstmontag",variable_date:"easter",offset:50},{name:"Fronleichnam",variable_date:"easter",offset:60,only_states:["Baden-Wrttemberg","Bayern","Hessen","Nordrhein-Westfalen","Rheinland-Pfalz","Saarland"]},{name:"Mari Himmelfahrt",fixed_date:[8,15],only_states:["Saarland"]},{name:"Weltkindertag",fixed_date:[9,20],only_states:["Thringen"]},{name:"Tag der Deutschen Einheit",fixed_date:[10,3]},{name:"Reformationstag",fixed_date:[10,31],only_states:["Brandenburg","Bremen","Hamburg","Mecklenburg-Vorpommern","Niedersachsen","Sachsen","Sachsen-Anhalt","Schleswig-Holstein","Thringen"]},{name:"Allerheiligen",fixed_date:[11,1],only_states:["Baden-Wrttemberg","Bayern","Nordrhein-Westfalen","Rheinland-Pfalz","Saarland"]},{name:"Bu- und Bettag",variable_date:"nextWednesday16Nov",only_states:["Sachsen"]},{name:"1. Weihnachtstag",fixed_date:[12,25]},{name:"2. Weihnachtstag",fixed_date:[12,26]}],"Baden-Wrttemberg":{_state_code:"bw",SH:[{2012:[4,2,4,13],2013:[3,25,4,5],2014:[4,14,4,25],2015:[3,30,4,10],2016:[3,24,3,24,3,29,4,2],2017:[4,10,4,21],2018:[3,26,4,6],2019:[4,15,4,27],2020:[4,6,4,18],name:"Osterferien"},{2012:[5,29,6,9],2013:[5,21,6,1],2014:[6,10,6,21],2015:[5,26,6,6],2016:[5,17,5,28],2017:[6,6,6,16],2018:[5,22,6,2],2019:[6,11,6,21],2020:[6,2,6,13],name:"Pfingstferien"},{2012:[7,26,9,8],2013:[7,25,9,7],2014:[7,31,9,13],2015:[7,30,9,12],2016:[7,28,9,10],2017:[7,27,9,9],2018:[7,26,9,8],2019:[7,29,9,10],2020:[7,30,9,12],2021:[7,29,9,11],2022:[7,28,9,10],2023:[7,27,9,9],2024:[7,25,9,7],name:"Sommerferien"},{2012:[10,29,11,2],2013:[10,28,10,30],2014:[10,27,10,30],2015:[10,31,10,31,11,2,11,6],2016:[10,31,10,31,11,2,11,4],2017:[10,30,11,3],2018:[10,29,11,2],2019:[10,28,10,30],name:"Herbstferien"},{2011:[12,23,1,5],2012:[12,24,1,5],2013:[12,23,1,4],2014:[12,22,1,5],2015:[12,23,1,9],2016:[12,23,1,7],2017:[12,22,1,5],2018:[12,24,1,5],2019:[12,23,1,4],name:"Weihnachtsferien"}]},Bayern:{_state_code:"by",SH:[{2012:[2,20,2,24],2013:[2,11,2,15],2014:[3,3,3,7],2015:[2,16,2,20],2016:[2,8,2,12],2017:[2,27,3,3],2018:[2,12,2,16],2019:[3,4,3,8],2020:[2,24,2,28],2021:[2,15,2,19],2022:[2,28,3,4],2023:[2,20,2,24],2024:[2,12,2,16],name:"Winterferien"},{2012:[4,2,4,14],2013:[3,25,4,6],2014:[4,14,4,26],2015:[3,30,4,11],2016:[3,21,4,1],2017:[4,10,4,22],2018:[3,26,4,7],2019:[4,15,4,27],2020:[4,6,4,18],2021:[3,29,4,10],2022:[4,11,4,23],2023:[4,3,4,15],2024:[3,25,4,6],name:"Osterferien"},{2012:[5,29,6,9],2013:[5,21,5,31],2014:[6,10,6,21],2015:[5,26,6,5],2016:[5,17,5,28],2017:[6,6,6,16],2018:[5,22,6,2],2019:[6,11,6,21],2020:[6,2,6,13],2021:[5,25,6,4],2022:[6,7,6,18],2023:[5,30,6,9],2024:[5,21,6,1],name:"Pfingstferien"},{2012:[8,1,9,12],2013:[7,31,9,11],2014:[7,30,9,15],2015:[8,1,9,14],2016:[7,30,9,12],2017:[7,29,9,11],2018:[7,30,9,10],2019:[7,29,9,9],2020:[7,27,9,7],2021:[7,30,9,13],2022:[8,1,9,12],2023:[7,31,9,11],2024:[7,29,9,9],name:"Sommerferien"},{2012:[10,29,11,3],2013:[10,28,10,31],2014:[10,27,10,31,11,19,11,19],2015:[11,2,11,7,11,18,11,18],2016:[10,31,11,4,11,16,11,16],2017:[10,30,11,3,11,22,11,22],2018:[10,29,11,2,11,21,11,21],2019:[10,28,10,31,11,20,11,20],2020:[10,31,11,6,11,18,11,18],2021:[11,2,11,5,11,17,11,17],2022:[10,31,11,4,11,16,11,16],2023:[10,30,11,3,11,22,11,22],name:"Herbstferien"},{2011:[12,27,1,5],2012:[12,24,1,5],2013:[12,23,1,4],2014:[12,24,1,5],2015:[12,24,1,5],2016:[12,24,1,5],2017:[12,23,1,5],2018:[12,22,1,5],2019:[12,23,1,4],2020:[12,23,1,9],2021:[12,24,1,8],2022:[12,24,1,7],2023:[12,23,1,5],name:"Weihnachtsferien"}]},Berlin:{_state_code:"be",SH:[{2012:[1,30,2,4],2013:[2,4,2,9],2014:[2,3,2,8],2015:[2,2,2,7],2016:[2,1,2,6],2017:[1,30,2,3],2018:[2,5,2,10],2019:[2,4,2,9],2020:[2,3,2,8],2021:[2,1,2,6],2022:[1,29,2,5],2023:[1,30,2,4],2024:[2,5,2,10],name:"Winterferien"},{2012:[4,2,4,14,4,30,4,30],2013:[3,25,4,6],2014:[4,14,4,26,5,2,5,2],2015:[3,30,4,11],2016:[3,21,4,2],2017:[4,10,4,18],2018:[3,26,4,6],2019:[4,15,4,26],2020:[4,6,4,17],2021:[3,29,4,10],2022:[4,11,4,23],2023:[4,3,4,14],2024:[3,25,4,5],name:"Osterferien"},{2012:[5,18,5,18],2013:[5,10,5,10,5,21,5,21],2014:[5,30,5,30],2015:[5,15,5,15,5,26,5,26],2016:[5,6,5,6,5,17,5,18],2017:[5,24,5,24,5,26,5,26,6,6,6,9],2018:[4,30,4,30,5,11,5,11,5,22,5,22],2019:[5,31,5,31,6,11,6,11],2020:[5,22,5,22],2021:[5,14,5,14],2022:[5,27,5,27,6,7,6,7],2023:[5,19,5,19,5,30,5,30],2024:[5,10,5,10],name:"Pfingstferien"},{2012:[6,20,8,3],2013:[6,19,8,2],2014:[7,9,8,22],2015:[7,16,8,28],2016:[7,21,9,2],2017:[7,20,9,1],2018:[7,5,8,17],2019:[6,20,8,2],2020:[6,25,8,7],2021:[6,24,8,6],2022:[7,7,8,19],2023:[7,13,8,25],2024:[7,18,8,30],name:"Sommerferien"},{2012:[10,1,10,13],2013:[9,30,10,12],2014:[10,20,11,1],2015:[10,19,10,31],2016:[10,17,10,28],2017:[10,2,10,2,10,23,11,4],2018:[10,22,11,2],2019:[10,4,10,4,10,7,10,19],2020:[10,12,10,24],2021:[10,11,10,23],2022:[10,24,11,5],2023:[10,2,10,2,10,23,11,4],name:"Herbstferien"},{2011:[12,23,1,3],2012:[12,24,1,4],2013:[12,23,1,3],2014:[12,22,1,2],2015:[12,23,1,2],2016:[12,23,1,3],2017:[12,21,1,2],2018:[12,22,1,5],2019:[12,23,1,4],2020:[12,21,1,2],2021:[12,23,12,31],2022:[12,22,1,2],2023:[12,23,1,5],name:"Weihnachtsferien"}]},Brandenburg:{_state_code:"bb",SH:[{2012:[1,30,2,4],2013:[2,4,2,9],2014:[2,3,2,8],2015:[2,2,2,7],2016:[2,1,2,6],2017:[1,30,2,4],2018:[2,5,2,10],2019:[2,4,2,9],2020:[2,3,2,8],2021:[2,1,2,6],2022:[1,31,2,5],2023:[1,30,2,3],2024:[2,5,2,9],name:"Winterferien"},{2012:[4,4,4,14,4,30,4,30],2013:[3,27,4,6],2014:[4,16,4,26,5,2,5,2],2015:[4,1,4,11],2016:[3,23,4,2],2017:[4,10,4,22],2018:[3,26,4,6],2019:[4,15,4,26],2020:[4,6,4,17],2021:[3,29,4,9],2022:[4,11,4,23],2023:[4,3,4,14],2024:[3,25,4,5],name:"Osterferien"},{2012:[5,18,5,18],2013:[5,10,5,10],2014:[5,30,5,30],2015:[5,15,5,15],2016:[5,6,5,6,5,17,5,17],2017:[5,26,5,26],2018:[4,30,4,30,5,11,5,11],2019:[5,31,5,31],2020:[5,22,5,22],2021:[5,14,5,14],2022:[5,27,5,27],2023:[5,19,5,19],2024:[5,10,5,10],name:"Pfingstferien"},{2012:[6,21,8,3],2013:[6,20,8,2],2014:[7,10,8,22],2015:[7,16,8,28],2016:[7,21,9,3],2017:[7,20,9,1],2018:[7,5,8,18],2019:[6,20,8,3],2020:[6,25,8,8],2021:[6,24,8,7],2022:[7,7,8,20],2023:[7,13,8,26],2024:[7,18,8,31],name:"Sommerferien"},{2012:[10,1,10,13],2013:[9,30,10,12,11,1,11,1],2014:[10,20,11,1],2015:[10,19,10,30],2016:[10,17,10,28],2017:[10,2,10,2,10,23,11,4],2018:[10,22,11,2],2019:[10,4,10,18,11,1,11,1],2020:[10,12,10,24],2021:[10,11,10,23],2022:[10,24,11,5],2023:[10,2,10,2,10,23,11,4],name:"Herbstferien"},{2011:[12,23,1,3],2012:[12,24,1,4],2013:[12,23,1,3],2014:[12,22,1,2],2015:[12,23,1,2],2016:[12,23,1,3],2017:[12,21,1,2],2018:[12,21,1,5],2019:[12,23,1,3],2020:[12,21,1,2],2021:[12,23,12,31],2022:[12,22,1,3],2023:[12,23,1,5],name:"Weihnachtsferien"}]},Bremen:{_state_code:"hb",SH:[{2012:[1,30,1,31],2013:[1,31,2,1],2014:[1,30,1,31],2015:[2,2,2,3],2016:[1,28,1,29],2017:[1,30,1,31],2018:[2,1,2,2],2019:[1,31,2,1],2020:[2,3,2,4],2021:[2,1,2,2],2022:[1,31,2,1],2023:[1,30,1,31],2024:[2,1,2,2],name:"Winterferien"},{2012:[3,26,4,11,4,30,4,30],2013:[3,16,4,2],2014:[4,3,4,22,5,2,5,2],2015:[3,25,4,10],2016:[3,18,4,2],2017:[4,10,4,22],2018:[3,19,4,3],2019:[4,6,4,23],2020:[3,28,4,14],2021:[3,27,4,10],2022:[4,4,4,19],2023:[3,27,4,11],2024:[3,18,4,2],name:"Osterferien"},{2012:[5,18,5,18,5,29,5,29],2013:[5,10,5,10,5,21,5,21],2014:[5,30,5,30,6,10,6,10],2015:[5,15,5,15,5,26,5,26],2016:[5,6,5,6,5,17,5,17],2017:[5,26,5,26,6,6,6,6],2018:[4,30,4,30,5,11,5,11,5,22,5,22],2019:[5,31,5,31,6,11,6,11],2020:[5,22,5,22,6,2,6,2],2021:[5,14,5,14,5,25,5,25],2022:[5,27,5,27,6,7,6,7],2023:[5,19,5,19,5,30,5,30],2024:[5,10,5,10,5,21,5,21],name:"Pfingstferien"},{2012:[7,23,8,31],2013:[6,27,8,7],2014:[7,31,9,10],2015:[7,23,9,2],2016:[6,23,8,3],2017:[6,22,8,2],2018:[6,28,8,8],2019:[7,4,8,14],2020:[7,16,8,26],2021:[7,22,9,1],2022:[7,14,8,24],2023:[7,6,8,16],2024:[6,24,8,2],name:"Sommerferien"},{2012:[10,22,11,3],2013:[10,4,10,18],2014:[10,27,11,8],2015:[10,19,10,31],2016:[10,4,10,15],2017:[10,2,10,14,10,30,10,30],2018:[10,1,10,13],2019:[10,4,10,18],2020:[10,12,10,24],2021:[10,18,10,30],2022:[10,17,10,29],2023:[10,2,10,2,10,16,10,28],name:"Herbstferien"},{2011:[12,23,1,4],2012:[12,24,1,5],2013:[12,23,1,3],2014:[12,22,1,5],2015:[12,23,1,6],2016:[12,21,1,6],2017:[12,22,1,6],2018:[12,24,1,4],2019:[12,21,1,6],2020:[12,23,1,8],2021:[12,23,1,8],2022:[12,23,1,6],2023:[12,23,1,5],name:"Weihnachtsferien"}]},Hamburg:{_state_code:"hh",SH:[{2012:[1,30,1,30],2013:[2,1,2,1],2014:[1,31,1,31],2015:[1,30,1,30],2016:[1,29,1,29],2017:[1,30,1,30],2018:[2,2,2,2],2019:[2,1,2,1],2020:[1,31,1,31],2021:[1,29,1,29],2022:[1,28,1,28],2023:[1,27,1,27],2024:[2,2,2,2],name:"Winterferien"},{2012:[3,5,3,16],2013:[3,4,3,15],2014:[3,3,3,14],2015:[3,2,3,13],2016:[3,7,3,18],2017:[3,6,3,17],2018:[3,5,3,16,4,30,4,30],2019:[3,4,3,15],2020:[3,2,3,13],2021:[3,1,3,12],2022:[3,7,3,18],2023:[3,6,3,17],2024:[3,18,3,28],name:"Osterferien"},{2012:[4,30,5,4,5,18,5,18],2013:[5,2,5,10],2014:[4,28,5,2,5,30,5,30],2015:[5,11,5,15],2016:[5,6,5,6,5,17,5,20],2017:[5,22,5,26],2018:[5,7,5,11],2019:[5,13,5,17,5,31,5,31],2020:[5,4,5,8],2021:[5,10,5,14],2022:[5,23,5,27],2023:[5,15,5,19],2024:[5,21,5,24],name:"Pfingstferien"},{2012:[6,21,8,1],2013:[6,20,7,31],2014:[7,10,8,20],2015:[7,16,8,26],2016:[7,21,8,31],2017:[7,20,8,30],2018:[7,5,8,15],2019:[6,27,8,7],2020:[6,25,8,5],2021:[6,24,8,4],2022:[7,7,8,17],2023:[7,13,8,23],2024:[7,18,8,28],name:"Sommerferien"},{2012:[10,1,10,12],2013:[9,30,10,11],2014:[10,13,10,24],2015:[10,19,10,30],2016:[10,17,10,28],2017:[10,2,10,2,10,16,10,27],2018:[10,1,10,12],2019:[10,4,10,18],2020:[10,5,10,16],2021:[10,4,10,15],2022:[10,10,10,21],2023:[10,2,10,2,10,16,10,27],name:"Herbstferien"},{2011:[12,27,1,6],2012:[12,21,1,4],2013:[12,19,1,3],2014:[12,22,1,6],2015:[12,21,1,1],2016:[12,27,1,6],2017:[12,22,1,5],2018:[12,20,1,4],2019:[12,23,1,3],2020:[12,21,1,4],2021:[12,23,1,4],2022:[12,23,1,6],2023:[12,22,1,5],name:"Weihnachtsferien"}]},Hessen:{_state_code:"he",SH:[{2012:[4,2,4,14],2013:[3,25,4,6],2014:[4,14,4,26],2015:[3,30,4,11],2016:[3,29,4,9],2017:[4,3,4,15],2018:[3,26,4,7],2019:[4,14,4,27],2020:[4,6,4,18],2021:[4,6,4,16],2022:[4,11,4,23],2023:[4,3,4,22],2024:[3,25,4,13],name:"Osterferien"},{2012:[7,2,8,10],2013:[7,8,8,16],2014:[7,28,9,5],2015:[7,27,9,4],2016:[7,18,8,26],2017:[7,3,8,11],2018:[6,25,8,3],2019:[7,1,8,9],2020:[7,6,8,14],2021:[7,19,8,27],2022:[7,25,9,2],2023:[7,24,9,1],2024:[7,15,8,23],name:"Sommerferien"},{2012:[10,15,10,27],2013:[10,14,10,26],2014:[10,20,11,1],2015:[10,19,10,31],2016:[10,17,10,29],2017:[10,9,10,21],2018:[10,1,10,13],2019:[9,30,10,12],2020:[10,5,10,17],2021:[10,11,10,23],2022:[10,24,10,29],2023:[10,23,10,28],name:"Herbstferien"},{2011:[12,21,1,6],2012:[12,24,1,12],2013:[12,23,1,11],2014:[12,22,1,10],2015:[12,23,1,9],2016:[12,22,1,7],2017:[12,24,1,13],2018:[12,24,1,12],2019:[12,23,1,11],2020:[12,21,1,9],2021:[12,23,1,8],2022:[12,22,1,7],2023:[12,27,1,13],name:"Weihnachtsferien"}]},"Mecklenburg-Vorpommern":{_state_code:"mv",SH:[{2012:[2,6,2,17],2013:[2,4,2,15],2014:[2,3,2,15],2015:[2,2,2,14],2016:[2,1,2,13],2017:[2,6,2,18],2018:[2,5,2,16],2019:[2,4,2,15],2020:[2,10,2,21],2021:[2,6,2,19],2022:[2,5,2,17],2023:[2,6,2,18],2024:[2,5,2,16],name:"Winterferien"},{2012:[4,2,4,11],2013:[3,25,4,3],2014:[4,14,4,23],2015:[3,30,4,8],2016:[3,21,3,30],2017:[4,10,4,19],2018:[3,26,4,4],2019:[4,15,4,24],2020:[4,6,4,15],2021:[3,29,4,7],2022:[4,11,4,20],2023:[4,3,4,12],2024:[3,25,4,3],name:"Osterferien"},{2012:[5,25,5,29],2013:[5,17,5,21],2014:[6,6,6,10],2015:[5,22,5,26],2016:[5,14,5,17],2017:[6,2,6,6],2018:[5,11,5,11,5,18,5,22],2019:[5,22,5,22,6,7,6,11],2020:[5,22,5,22,5,29,6,2],2021:[5,14,5,14,5,21,5,25],2022:[5,27,5,27,6,3,6,7],2023:[5,19,5,19,5,26,5,30],2024:[5,10,5,10,5,17,5,21],name:"Pfingstferien"},{2012:[6,23,8,4],2013:[6,22,8,3],2014:[7,14,8,23],2015:[7,20,8,29],2016:[7,25,9,3],2017:[7,24,9,2],2018:[7,9,8,18],2019:[7,1,8,10],2020:[6,22,8,1],2021:[6,21,7,31],2022:[7,4,8,13],2023:[7,17,8,26],2024:[7,22,8,31],name:"Sommerferien"},{2012:[10,1,10,5],2013:[10,14,10,19],2014:[10,20,10,25],2015:[10,24,10,30],2016:[10,24,10,28],2017:[10,2,10,2,10,23,10,30],2018:[10,8,10,13,11,1,11,2],2019:[10,4,10,4,10,7,10,12,11,1,11,1],2020:[10,5,10,10,11,2,11,3],2021:[10,2,10,9,11,1,11,2],2022:[10,10,10,14,11,1,11,2],2023:[10,9,10,14,10,30,10,30,11,1,11,1],name:"Herbstferien"},{2011:[12,23,1,3],2012:[12,21,1,4],2013:[12,23,1,3],2014:[12,22,1,2],2015:[12,21,1,2],2016:[12,22,1,2],2017:[12,21,1,3],2018:[12,24,1,5],2019:[12,23,1,4],2020:[12,21,1,2],2021:[12,22,12,31],2022:[12,22,1,2],2023:[12,21,1,3],name:"Weihnachtsferien"}]},Niedersachsen:{_state_code:"ni",SH:[{2012:[1,30,1,31],2013:[1,31,2,1],2014:[1,30,1,31],2015:[2,2,2,3],2016:[1,28,1,29],2017:[1,30,1,31],2018:[2,1,2,2],2019:[1,31,2,1],2020:[2,3,2,4],2021:[2,1,2,2],2022:[1,31,2,1],2023:[1,30,1,31],2024:[2,1,2,2],name:"Winterferien"},{2012:[3,26,4,11,4,30,4,30],2013:[3,16,4,2],2014:[4,3,4,22,5,2,5,2],2015:[3,25,4,10],2016:[3,18,4,2],2017:[4,10,4,22],2018:[3,19,4,3],2019:[4,8,4,23],2020:[3,30,4,14],2021:[3,29,4,9],2022:[4,4,4,19],2023:[3,27,4,11],2024:[3,18,4,2],name:"Osterferien"},{2012:[5,18,5,18,5,29,5,29],2013:[5,10,5,10,5,21,5,21],2014:[5,30,5,30,6,10,6,10],2015:[5,15,5,15,5,26,5,26],2016:[5,6,5,6,5,17,5,17],2017:[5,26,5,26,6,6,6,6],2018:[4,30,4,30,5,11,5,11,5,22,5,22],2019:[5,31,5,31,6,11,6,11],2020:[5,22,5,22,6,2,6,2],2021:[5,14,5,14,5,25,5,25],2022:[5,27,5,27,6,7,6,7],2023:[5,19,5,19,5,30,5,30],2024:[5,10,5,10,5,21,5,21],name:"Pfingstferien"},{2012:[7,23,8,31],2013:[6,27,8,7],2014:[7,31,9,10],2015:[7,23,9,2],2016:[6,23,8,3],2017:[6,22,8,2],2018:[6,28,8,8],2019:[7,4,8,14],2020:[7,16,8,26],2021:[7,22,9,1],2022:[7,14,8,24],2023:[7,6,8,16],2024:[6,24,8,2],name:"Sommerferien"},{2012:[10,22,11,3],2013:[10,4,10,18],2014:[10,27,11,8],2015:[10,19,10,31],2016:[10,4,10,15],2017:[10,2,10,13,10,30,10,30],2018:[10,1,10,12],2019:[10,4,10,18],2020:[10,12,10,23],2021:[10,18,10,29],2022:[10,17,10,28],2023:[10,2,10,2,10,16,10,27],name:"Herbstferien"},{2011:[12,23,1,4],2012:[12,24,1,5],2013:[12,23,1,3],2014:[12,22,1,5],2015:[12,23,1,6],2016:[12,21,1,6],2017:[12,22,1,5],2018:[12,24,1,4],2019:[12,23,1,6],2020:[12,23,1,8],2021:[12,23,1,7],2022:[12,23,1,6],2023:[12,27,1,5],name:"Weihnachtsferien"}]},"Nordrhein-Westfalen":{_state_code:"nw",SH:[{2012:[4,2,4,14],2013:[3,25,4,6],2014:[4,14,4,26],2015:[3,30,4,11],2016:[3,21,4,2],2017:[4,10,4,22],2018:[3,26,4,7],2019:[4,15,4,27],2020:[4,6,4,18],2021:[3,29,4,10],2022:[4,11,4,23],2023:[4,3,4,15],2024:[3,25,4,6],name:"Osterferien"},{2012:[5,29,5,29],2013:[5,21,5,21],2014:[6,10,6,10],2015:[5,26,5,26],2016:[5,17,5,17],2017:[6,6,6,6],2018:[5,22,5,25],2019:[6,11,6,11],2020:[6,2,6,2],2021:[5,25,5,25],2023:[5,30,5,30],2024:[5,21,5,21],name:"Pfingstferien"},{2012:[7,9,8,21],2013:[7,22,9,3],2014:[7,7,8,19],2015:[6,29,8,11],2016:[7,11,8,23],2017:[7,17,8,29],2018:[7,16,8,28],2019:[7,15,8,27],2020:[6,29,8,11],2021:[7,5,8,17],2022:[6,27,8,9],2023:[6,22,8,4],2024:[7,8,8,20],name:"Sommerferien"},{2012:[10,8,10,20],2013:[10,21,11,2],2014:[10,6,10,18],2015:[10,5,10,17],2016:[10,10,10,21],2017:[10,23,11,4],2018:[10,15,10,27],2019:[10,14,10,26],2020:[10,12,10,24],2021:[10,11,10,23],2022:[10,4,10,15],2023:[10,2,10,14],name:"Herbstferien"},{2011:[12,23,1,6],2012:[12,21,1,4],2013:[12,23,1,7],2014:[12,22,1,6],2015:[12,23,1,6],2016:[12,23,1,6],2017:[12,27,1,6],2018:[12,21,1,4],2019:[12,23,1,6],2020:[12,23,1,6],2021:[12,24,1,8],2022:[12,23,1,6],2023:[12,21,1,5],name:"Weihnachtsferien"}]},"Rheinland-Pfalz":{_state_code:"rp",SH:[{2019:[2,25,3,1],2020:[2,17,2,21],2022:[2,21,2,25],name:"Winterferien"},{2012:[3,29,4,13],2013:[3,20,4,5],2014:[4,11,4,25],2015:[3,26,4,10],2016:[3,18,4,1],2017:[4,10,4,21],2018:[3,26,4,6],2019:[4,23,4,30],2020:[4,9,4,17],2021:[3,29,4,6],2022:[4,13,4,22],2023:[4,3,4,6],2024:[3,25,4,2],name:"Osterferien"},{2021:[5,25,6,2],2023:[5,30,6,7],2024:[5,21,5,29],name:"Pfingstferien"},{2012:[7,2,8,10],2013:[7,8,8,16],2014:[7,28,9,5],2015:[7,27,9,4],2016:[7,18,8,26],2017:[7,3,8,11],2018:[6,25,8,3],2019:[7,1,8,9],2020:[7,6,8,14],2021:[7,19,8,27],2022:[7,25,9,2],2023:[7,24,9,1],2024:[7,15,8,23],name:"Sommerferien"},{2012:[10,1,10,12],2013:[10,4,10,18],2014:[10,20,10,31],2015:[10,19,10,30],2016:[10,10,10,21],2017:[10,2,10,13],2018:[10,1,10,12],2019:[9,30,10,11],2020:[10,12,10,23],2021:[10,11,10,22],2022:[10,17,10,31],2023:[10,16,10,27],name:"Herbstferien"},{2011:[12,22,1,6],2012:[12,20,1,4],2013:[12,23,1,7],2014:[12,22,1,7],2015:[12,23,1,8],2016:[12,22,1,6],2017:[12,22,1,9],2018:[12,20,1,4],2019:[12,23,1,6],2020:[12,21,12,31],2021:[12,23,12,31],2022:[12,23,1,2],2023:[12,27,1,5],name:"Weihnachtsferien"}]},Saarland:{_state_code:"sl",SH:[{2012:[2,20,2,25],2013:[2,11,2,16],2014:[3,3,3,8],2015:[2,16,2,21],2016:[2,8,2,13],2017:[2,27,3,4],2018:[2,12,2,17],2019:[2,25,3,5],2020:[2,17,2,25],2021:[2,15,2,19],2022:[2,21,3,1],2023:[2,20,2,24],2024:[2,12,2,16],name:"Winterferien"},{2012:[4,2,4,14],2013:[3,25,4,6],2014:[4,14,4,26],2015:[3,30,4,11],2016:[3,29,4,9],2017:[4,10,4,22],2018:[3,26,4,6],2019:[4,17,4,26],2020:[4,14,4,24],2021:[3,29,4,7],2022:[4,14,4,22],2023:[4,3,4,12],2024:[2,25,4,5],name:"Osterferien"},{2021:[5,25,5,28],2022:[6,7,6,10],2023:[5,30,6,2],2024:[5,21,5,24],name:"Pfingstferien"},{2012:[7,2,8,14],2013:[7,8,8,17],2014:[7,28,9,6],2015:[7,27,9,5],2016:[7,18,8,27],2017:[7,3,8,14],2018:[6,25,8,3],2019:[7,1,8,9],2020:[7,6,8,14],2021:[7,19,8,27],2022:[7,25,9,2],2023:[7,24,9,1],2024:[7,15,8,23],name:"Sommerferien"},{2012:[10,22,11,3],2013:[10,21,11,2],2014:[10,20,10,31],2015:[10,19,10,31],2016:[10,10,10,22],2017:[10,2,10,14],2018:[10,1,10,12],2019:[10,7,10,18],2020:[10,12,10,23],2021:[10,18,10,29],2022:[10,24,11,4],2023:[10,23,11,3],name:"Herbstferien"},{2011:[12,23,1,4],2012:[12,24,1,5],2013:[12,20,1,4],2014:[12,22,1,7],2015:[12,21,1,2],2016:[12,19,12,31],2017:[12,21,1,5],2018:[12,20,1,4],2019:[12,23,1,3],2020:[12,21,12,31],2021:[12,23,1,3],2022:[12,22,1,4],2023:[12,21,1,2],name:"Weihnachtsferien"}]},Sachsen:{_state_code:"sn",SH:[{2012:[2,13,2,25],2013:[2,4,2,15],2014:[2,17,3,1],2015:[2,9,2,21],2016:[2,8,2,20],2017:[2,13,2,24],2018:[2,12,2,23],2019:[2,18,3,2],2020:[2,10,2,22],2021:[2,8,2,20],2022:[2,12,2,26],2023:[2,13,2,24],2024:[2,12,2,23],name:"Winterferien"},{2012:[4,6,4,14],2013:[3,29,4,6],2014:[4,18,4,26],2015:[4,2,4,11],2016:[3,25,4,2],2017:[4,13,4,22],2018:[3,29,4,6],2019:[4,19,4,26],2020:[4,10,4,18],2021:[4,2,4,10],2022:[4,15,4,23],2023:[4,7,4,15],2024:[3,28,4,5],name:"Osterferien"},{2012:[5,18,5,18],2013:[5,10,5,10,5,18,5,22],2014:[5,30,5,30],2015:[5,15,5,15],2016:[5,6,5,6],2017:[5,26,5,26],2018:[5,11,5,11,5,19,5,22],2019:[5,31,5,31],2020:[5,22,5,22],2021:[5,14,5,14],2022:[5,27,5,27],2023:[5,19,5,19],2024:[5,10,5,10,5,18,5,21],name:"Pfingstferien"},{2012:[7,23,8,31],2013:[7,15,8,23],2014:[7,21,8,29],2015:[7,13,8,21],2016:[6,27,8,5],2017:[6,26,8,4],2018:[7,2,8,10],2019:[7,8,8,16],2020:[7,20,8,28],2021:[7,26,9,3],2022:[7,18,8,26],2023:[7,10,8,18],2024:[6,20,7,31],name:"Sommerferien"},{2012:[10,22,11,2],2013:[10,21,11,1],2014:[10,20,10,31],2015:[10,12,10,24],2016:[10,3,10,15],2017:[10,2,10,14,10,30,10,30],2018:[10,8,10,20],2019:[10,14,10,25],2020:[10,19,10,31],2021:[10,18,10,30],2022:[10,17,10,29],2023:[10,2,10,14,10,30,10,30],name:"Herbstferien"},{2011:[12,23,1,2],2012:[12,22,1,2],2013:[12,21,1,3],2014:[12,22,1,3],2015:[12,21,1,2],2016:[12,23,1,2],2017:[12,23,1,2],2018:[12,22,1,4],2019:[12,21,1,3],2020:[12,23,1,2],2021:[12,23,1,1],2022:[12,22,1,2],2023:[12,23,1,2],name:"Weihnachtsferien"}]},"Sachsen-Anhalt":{_state_code:"st",SH:[{2012:[2,4,2,11],2013:[2,1,2,8],2014:[2,1,2,12],2015:[2,2,2,14],2016:[2,1,2,10],2017:[2,4,2,11],2018:[2,5,2,9],2019:[2,11,2,15],2020:[2,10,2,14],2021:[2,8,2,13],2022:[2,12,2,19],2023:[2,6,2,11],2024:[2,5,2,10],name:"Winterferien"},{2012:[4,2,4,7],2013:[3,25,3,30],2014:[4,14,4,17],2015:[4,2,4,2],2016:[3,24,3,24],2017:[4,10,4,13],2018:[3,26,3,31,4,30,4,30],2019:[4,18,4,30],2020:[4,6,4,11],2021:[3,29,4,3],2022:[4,11,4,16],2023:[4,3,4,8],2024:[3,25,3,30],name:"Osterferien"},{2012:[5,18,5,25],2013:[5,10,5,18],2014:[5,30,6,7],2015:[5,15,5,23],2016:[5,6,5,14],2017:[5,26,5,26],2018:[5,11,5,19],2019:[5,31,6,1],2020:[5,18,5,30],2021:[5,10,5,22],2022:[5,23,5,28],2023:[5,15,5,19],2024:[5,21,5,24],name:"Pfingstferien"},{2012:[7,23,9,5],2013:[7,15,8,28],2014:[7,21,9,3],2015:[7,13,8,26],2016:[6,27,8,10],2017:[6,26,8,9],2018:[6,28,8,8],2019:[7,4,8,14],2020:[7,16,8,26],2021:[7,22,9,1],2022:[7,14,8,24],2023:[7,6,8,16],2024:[6,24,8,3],name:"Sommerferien"},{2012:[10,29,11,2],2013:[10,21,10,25],2014:[10,27,10,30],2015:[10,17,10,24],2016:[10,4,10,15],2017:[10,2,10,13,10,30,10,30],2018:[10,1,10,12],2019:[10,4,10,11,11,1,11,1],2020:[10,19,10,24],2021:[10,25,10,30],2022:[10,24,11,4],2023:[10,2,10,2,10,16,10,30],name:"Herbstferien"},{2011:[12,22,1,7],2012:[12,19,1,4],2013:[12,21,1,3],2014:[12,22,1,5],2015:[12,21,1,5],2016:[12,19,1,2],2017:[12,21,1,3],2018:[12,19,1,4],2019:[12,23,1,4],2020:[12,19,1,5],2021:[12,22,1,8],2022:[12,21,1,5],2023:[12,21,1,3],name:"Weihnachtsferien"}]},"Schleswig-Holstein":{_state_code:"sh",SH:[{2012:[3,30,4,13],2013:[3,25,4,9],2014:[4,16,5,2],2015:[4,1,4,17],2016:[3,24,4,9],2017:[4,7,4,21],2018:[3,29,4,13],2019:[4,4,4,18],2020:[3,30,4,17],2021:[4,1,4,16],2022:[4,4,4,16],2023:[4,6,4,22],2024:[4,2,4,19],name:"Osterferien"},{2012:[5,18,5,18],2013:[5,10,5,10],2014:[5,30,5,30],2015:[5,15,5,15],2016:[5,6,5,6],2017:[5,26,5,26],2018:[5,11,5,11],2019:[5,31,5,31],2020:[5,22,5,22],2021:[5,14,5,14],2022:[5,27,5,27],2023:[5,19,5,20],2024:[5,10,5,11],name:"Pfingstferien"},{2012:[6,25,8,4],2013:[6,24,8,3],2014:[7,14,8,23],2015:[7,20,8,29],2016:[7,25,9,3],2017:[7,24,9,2],2018:[7,9,8,18],2019:[7,1,8,10],2020:[6,29,8,8],2021:[6,21,7,31],2022:[7,4,8,13],2023:[7,17,8,26],2024:[7,22,8,31],name:"Sommerferien"},{2012:[10,4,10,19],2013:[10,4,10,18],2014:[10,13,10,25],2015:[10,19,10,31],2016:[10,17,10,29],2017:[10,16,10,27],2018:[10,1,10,19],2019:[10,4,10,18],2020:[10,5,10,17],2021:[10,4,10,16],2022:[10,10,10,21],2023:[10,16,10,27],name:"Herbstferien"},{2011:[12,23,1,6],2012:[12,24,1,5],2013:[12,23,1,6],2014:[12,22,1,6],2015:[12,21,1,6],2016:[12,23,1,6],2017:[12,21,1,6],2018:[12,21,1,4],2019:[12,23,1,6],2020:[12,21,1,6],2021:[12,23,1,8],2022:[12,23,1,7],2023:[12,27,1,6],name:"Weihnachtsferien"}]},Thringen:{_state_code:"th",SH:[{2012:[2,6,2,11],2013:[2,18,2,23],2014:[2,17,2,22],2015:[2,2,2,7],2016:[2,1,2,6],2017:[2,6,2,11],2018:[2,5,2,9],2019:[2,11,2,15],2020:[2,10,2,14],2021:[2,8,2,13],2022:[2,12,2,19],2023:[2,13,2,17],2024:[2,12,2,16],name:"Winterferien"},{2012:[4,2,4,13],2013:[3,25,4,6],2014:[4,19,5,2],2015:[3,30,4,11],2016:[3,24,4,2],2017:[4,10,4,21],2018:[3,26,4,7],2019:[4,15,4,27],2020:[4,6,4,18],2021:[3,29,4,10],2022:[4,11,4,23],2023:[4,3,4,15],2024:[3,25,4,6],name:"Osterferien"},{2012:[5,25,5,29],2013:[5,10,5,10],2014:[5,30,5,30],2015:[5,15,5,15],2016:[5,6,5,6],2017:[5,26,5,26],2018:[5,11,5,11],2019:[5,31,5,31],2020:[5,22,5,22],2021:[5,14,5,14],2022:[5,27,5,27],2023:[5,19,5,19],2024:[5,10,5,10],name:"Pfingstferien"},{2012:[7,23,8,31],2013:[7,15,8,23],2014:[7,21,8,29],2015:[7,13,8,21],2016:[6,27,8,10],2017:[6,26,8,9],2018:[7,2,8,11],2019:[7,8,8,17],2020:[7,20,8,29],2021:[7,26,9,4],2022:[7,18,8,27],2023:[7,10,8,19],2024:[6,20,7,31],name:"Sommerferien"},{2012:[10,22,11,3],2013:[10,21,11,2],2014:[10,6,10,18],2015:[10,5,10,17],2016:[10,10,10,22],2017:[10,2,10,14],2018:[10,1,10,13],2019:[10,7,10,19],2020:[10,17,10,30],2021:[10,25,11,6],2022:[10,17,10,29],2023:[10,2,10,14],name:"Herbstferien"},{2011:[12,23,1,1],2012:[12,24,1,5],2013:[12,23,1,4],2014:[12,22,1,3],2015:[12,23,1,2],2016:[12,23,12,31],2017:[12,22,1,5],2018:[12,21,1,4],2019:[12,21,1,3],2020:[12,23,1,2],2021:[12,23,12,31],2022:[12,22,1,3],2023:[12,22,1,5],name:"Weihnachtsferien"}]}};Z.PH,Z.Bayern,Z.Berlin,Z.Brandenburg,Z.Bremen,Z.Hamburg,Z.Hessen,Z.Niedersachsen,Z.Saarland,Z.Sachsen;var ee={PH:[{name:"Nytrsdag",fixed_date:[1,1]},{name:"Skrtorsdag",variable_date:"easter",offset:-3},{name:"Langfredag",variable_date:"easter",offset:-2},{name:"Pskedag",variable_date:"easter"},{name:"2. Pskedag",variable_date:"easter",offset:1},{name:"Store Bededag",variable_date:"easter",offset:26},{name:"Kristi Himmelfartsdag",variable_date:"easter",offset:39},{name:"Pinsedag",variable_date:"easter",offset:49},{name:"2. Pinsedag",variable_date:"easter",offset:50},{name:"Grundlovsdag",fixed_date:[6,5]},{name:"Juleaftensdag",fixed_date:[12,24]},{name:"Juledag",fixed_date:[12,25]},{name:"2. Juledag",fixed_date:[12,26]}]};ee.PH;var F={PH:[{name:"Cap d'Any",fixed_date:[1,1],only_states:["Catalua"]},{name:"Ao Nuevo",fixed_date:[1,1]},{name:"Reis",fixed_date:[1,6],only_states:["Catalua"]},{name:"Epifana del Seor",fixed_date:[1,6]},{name:"Da de Andaluca",fixed_date:[2,28],only_states:["Andaluca"]},{name:"Dia de les Illes Balears",fixed_date:[3,1],only_states:["Islas Baleares"]},{name:"Sant Josep",fixed_date:[3,19],only_states:["Comunidad Valenciana"]},{name:"San Jos",fixed_date:[3,19],only_states:["Murcia"]},{name:"Jueve Santo",variable_date:"easter",offset:-3,only_states:["Andaluca","Aragn","Castilla y Len","Castilla-La Mancha","Canarias","Extremadura","Galicia","Islas Baleares","La Rioja","Comunidad de Madrid","Regin de Murcia","Navarra","Asturias","Pas Vasco","Cantabria","Ceuta","Melilla"]},{name:"Divendres Sant",variable_date:"easter",offset:-2,only_states:["Catalua","Comunidad Valenciana","Islas Baleares"]},{name:"Viernes Santo",variable_date:"easter",offset:-2},{name:"Dilluns de Pasqua Florida",variable_date:"easter",offset:1,only_states:["Catalua","Comunidad Valenciana","Islas Baleares"]},{name:"Lunes de Pascua de Resurreccin",variable_date:"easter",offset:1,only_states:["Pas Vasco","Navarra"]},{name:"Da de Aragn",fixed_date:[4,23],only_states:["Aragn"]},{name:"Da de Castilla y Len",fixed_date:[4,23],only_states:["Castilla y Len"]},{name:"Festa del Treball",fixed_date:[5,1],only_states:["Catalua","Comunidad Valenciana","Islas Baleares"]},{name:"Fiesta del Trabajo",fixed_date:[5,1]},{name:"Fiesta de la Comunidad de Madrid",fixed_date:[5,2],only_states:["Comunidad de Madrid"]},{name:"Da das Letras Galegas",fixed_date:[5,2],only_states:["Galicia"]},{name:"Da de Canarias",fixed_date:[5,30],only_states:["Canarias"]},{name:"Da de la Regin Castilla-La Mancha",fixed_date:[5,31],only_states:["Castilla-La Mancha"]},{name:"Da de la Regin de Murcia",fixed_date:[6,9],only_states:["Regin de Murcia"]},{name:"Da de la Rioja",fixed_date:[6,9],only_states:["La Rioja"]},{name:"San Antonio",fixed_date:[6,13],only_states:["Ceuta"]},{name:"Sant Joan",fixed_date:[6,24],only_states:["Catalua"]},{name:"San Juan",fixed_date:[6,24],only_states:["Ceuta"]},{name:"Santiago Apstol",fixed_date:[7,25],only_states:["Galicia"]},{name:"Santa Mara de frica",fixed_date:[8,6],only_states:["Ceuta"]},{name:"l'Assumpci",fixed_date:[8,15],only_states:["Catalua"]},{name:"Asuncin de la Virgen",fixed_date:[8,15]},{name:"Da de Ceuta",fixed_date:[9,2],only_states:["Ceuta"]},{name:"Da de Asturias",fixed_date:[9,8],only_states:["Asturias"]},{name:"Da de Extremadura",fixed_date:[9,8],only_states:["Extremadura"]},{name:"Diada Nacional de Catalunya",fixed_date:[9,11],only_states:["Catalua"]},{name:"Da de Cantabria",fixed_date:[9,17],only_states:["Cantabria"]},{name:"Da de Melilla",fixed_date:[9,15],only_states:["Melilla"]},{name:"Dia de la Comunitat Valenciana",fixed_date:[10,9],only_states:["Comunidad Valenciana"]},{name:"Festa Nacional d'Espanya",fixed_date:[10,12],only_states:["Catalua"]},{name:"Fiesta Nacional de Espaa",fixed_date:[10,12]},{name:"Euskadi Eguna",fixed_date:[10,25],only_states:["Pas Vasco"]},{name:"Tots Sants",fixed_date:[11,1],only_states:["Catalua","Comunidad Valenciana","Islas Baleares"]},{name:"Todos los Santos",fixed_date:[11,1]},{name:"Da de la Constitucin Espaola",fixed_date:[12,6]},{name:"La Purssima",fixed_date:[12,8],only_states:["Catalua","Comunidad Valenciana","Islas Baleares"]},{name:"La Immaculada Concepcin",fixed_date:[12,8]},{name:"Nadal",fixed_date:[12,25],only_states:["Catalua","Comunidad Valenciana","Islas Baleares"]},{name:"Natividad del Seor",fixed_date:[12,25]},{name:"Sant Esteve",fixed_date:[12,26],only_states:["Catalua"]}],Andaluca:{_state_code:"an"},Aragn:{_state_code:"ar"},"Castilla y Len":{_state_code:"cl"},"Castilla-La Mancha":{_state_code:"cm"},Canarias:{_state_code:"cn"},Catalua:{_state_code:"ct"},Extremadura:{_state_code:"ex"},Galicia:{_state_code:"ga"},"Islas Baleares":{_state_code:"ib"},"La Rioja":{_state_code:"ri"},"Comunidad de Madrid":{_state_code:"md"},"Regin de Murcia":{_state_code:"mc"},Navarra:{_state_code:"nc"},Asturias:{_state_code:"as"},"Pas Vasco":{_state_code:"pv"},Cantabria:{_state_code:"cb"},"Comunidad Valenciana":{_state_code:"vc"},Ceuta:{_state_code:"ce"},Melilla:{_state_code:"ml"}};F.PH,F.Canarias,F.Extremadura,F.Galicia,F.Navarra,F.Asturias,F.Cantabria,F.Ceuta,F.Melilla;var O={PH:[{name:"uudenvuodenpiv - nyrsdagen",fixed_date:[1,1]},{name:"loppiainen - trettondedagen",fixed_date:[1,6]},{name:"pitkperjantai - lngfredagen",variable_date:"easter",offset:-2},{name:"psiispiv - pskdagen",variable_date:"easter"},{name:"toinen psiispiv - annandag psk",variable_date:"easter",offset:1},{name:"vappu - frsta maj",fixed_date:[5,1]},{name:"helluntai - pingst",variable_date:"easter",offset:49},{name:"juhannuspiv - midsommarafton",variable_date:"nextSaturday20Jun"},{name:"pyhinpiv - alla helgons dag",variable_date:"nextSaturday31Oct"},{name:"itsenisyyspiv - sjlvstndighetsdagen",fixed_date:[12,6]},{name:"joulupiv - juldagen",fixed_date:[12,25]},{name:"toinen joulupiv - annandag jul",fixed_date:[12,26]}]};O.PH;var k={PH:[{name:"Jour de l'an",fixed_date:[1,1]},{name:"Vendredi saint",variable_date:"easter",offset:-2,only_states:["Moselle","Bas-Rhin","Haut-Rhin","Guadeloupe","Martinique","Polynsie franaise"]},{name:"Lundi de Pques",variable_date:"easter",offset:1},{name:"Abolition de l'esclavage (Mayotte)",fixed_date:[4,27],only_states:["Mayotte"]},{name:"Saint-Pierre-Chanel",fixed_date:[4,28],only_states:["Wallis-et-Futuna"]},{name:"Fte du Travail",fixed_date:[5,1]},{name:"Fte de la Victoire",fixed_date:[5,8]},{name:"Abolition de l'esclavage (Martinique)",fixed_date:[5,22],only_states:["Martinique"]},{name:"Abolition de l'esclavage (Guadeloupe)",fixed_date:[5,27],only_states:["Guadeloupe"]},{name:"Abolition de l'esclavage (Saint-Martin)",fixed_date:[5,28],only_states:["Saint-Martin (France)"]},{name:"Jeudi de l'Ascension",variable_date:"easter",offset:39},{name:"Lundi de Pentecte",variable_date:"easter",offset:50},{name:"Abolition de l'esclavage (Guyane)",fixed_date:[6,10],only_states:["Guyane"]},{name:"Fte de l'autonomie",fixed_date:[6,29],only_states:["Polynsie franaise"]},{name:"Fte nationale",fixed_date:[7,14]},{name:"Fte Victor Schoelcher",fixed_date:[7,21],only_states:["Guadeloupe","Martinique"]},{name:"Fte du Territoire",fixed_date:[7,29],only_states:["Wallis-et-Futuna"]},{name:"Assomption",fixed_date:[8,15]},{name:"Fte de la citoyennet",fixed_date:[9,24],only_states:["Nouvelle-Caldonie"]},{name:"Abolition de l'esclavage (Saint-Barthlemy)",fixed_date:[10,9],only_states:["Saint-Barthlemy"]},{name:"Toussaint",fixed_date:[11,1]},{name:"Armistice",fixed_date:[11,11]},{name:"Abolition de l'esclavage (Runion)",fixed_date:[12,20],only_states:["Runion"]},{name:"Nol",fixed_date:[12,25]},{name:"Saint-tienne ",fixed_date:[12,26],only_states:["Moselle","Bas-Rhin","Haut-Rhin"]}],"Auvergne-Rhne-Alpes":{_state_code:"ara",SH:[{2018:[2,11,2,25],2019:[2,17,3,3],2020:[2,23,3,8],2021:[2,7,2,21],2022:[2,12,2,27],name:"Vacances d'Hiver"},{2018:[4,8,4,22],2019:[4,14,4,28],2020:[4,19,5,3],2021:[4,11,4,25],2022:[4,16,5,1],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,5,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},"Bourgogne-Franche-Comt":{_state_code:"bfc",SH:[{2018:[2,11,2,25],2019:[2,17,3,3],2020:[2,23,3,8],2021:[2,7,2,21],2022:[2,12,2,27],name:"Vacances d'Hiver"},{2018:[4,8,4,22],2019:[4,14,4,28],2020:[4,19,5,3],2021:[4,11,4,25],2022:[4,16,5,1],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,5,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},"Nouvelle-Aquitaine":{_state_code:"naq",SH:[{2018:[2,11,2,25],2019:[2,17,3,3],2020:[2,23,3,8],2021:[2,7,2,21],2022:[2,12,2,27],name:"Vacances d'Hiver"},{2018:[4,8,4,22],2019:[4,14,4,28],2020:[4,19,5,3],2021:[4,11,4,25],2022:[4,16,5,1],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,5,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},Bretagne:{_state_code:"bre",SH:[{2018:[2,25,3,11],2019:[2,10,2,24],2020:[2,16,3,1],2021:[2,21,3,7],2022:[2,5,2,20],name:"Vacances d'Hiver"},{2018:[4,22,5,6],2019:[4,7,4,22],2020:[4,12,4,26],2021:[4,11,4,25],2022:[4,9,4,24],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},"Centre-Val de Loire":{_state_code:"cvl",SH:[{2018:[2,25,3,11],2019:[2,10,2,24],2020:[2,16,3,1],2021:[2,21,3,7],2022:[2,5,2,20],name:"Vacances d'Hiver"},{2018:[4,22,5,6],2019:[4,7,4,22],2020:[4,12,4,26],2021:[4,11,4,25],2022:[4,9,4,24],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},"Grand Est":{_state_code:"ges",SH:[{2018:[2,25,3,11],2019:[2,10,2,24],2020:[2,16,3,1],2021:[2,21,3,7],2022:[2,5,2,20],name:"Vacances d'Hiver"},{2018:[4,22,5,6],2019:[4,7,4,22],2020:[4,12,4,26],2021:[4,11,4,25],2022:[4,9,4,24],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},"Hauts-de-France":{_state_code:"hdf",SH:[{2018:[2,25,3,11],2019:[2,10,2,24],2020:[2,16,3,1],2021:[2,21,3,7],2022:[2,5,2,20],name:"Vacances d'Hiver"},{2018:[4,22,5,6],2019:[4,7,4,22],2020:[4,12,4,26],2021:[4,11,4,25],2022:[4,9,4,24],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},Normandie:{_state_code:"nor",SH:[{2018:[2,25,3,11],2019:[2,10,2,24],2020:[2,16,3,1],2021:[2,21,3,7],2022:[2,5,2,20],name:"Vacances d'Hiver"},{2018:[4,22,5,6],2019:[4,7,4,22],2020:[4,12,4,26],2021:[4,11,4,25],2022:[4,9,4,24],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},"Pays de la Loire":{_state_code:"pdl",SH:[{2018:[2,25,3,11],2019:[2,10,2,24],2020:[2,16,3,1],2021:[2,21,3,7],2022:[2,5,2,20],name:"Vacances d'Hiver"},{2018:[4,22,5,6],2019:[4,7,4,22],2020:[4,12,4,26],2021:[4,11,4,25],2022:[4,9,4,24],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},"Provence-Alpes-Cte d'Azur":{_state_code:"pac",SH:[{2018:[2,25,3,11],2019:[2,10,2,24],2020:[2,16,3,1],2021:[2,21,3,7],2022:[2,5,2,20],name:"Vacances d'Hiver"},{2018:[4,22,5,6],2019:[4,7,4,22],2020:[4,12,4,26],2021:[4,11,4,25],2022:[4,9,4,24],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,27],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},"le-de-France":{_state_code:"idf",SH:[{2018:[2,18,3,4],2019:[2,24,3,10],2020:[2,9,2,23],2021:[2,14,2,28],2022:[2,19,3,6],name:"Vacances d'Hiver"},{2018:[4,15,4,29],2019:[4,21,5,5],2020:[4,5,4,19],2021:[4,11,4,25],2022:[4,23,5,8],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,28],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},Occitanie:{_state_code:"occ",SH:[{2018:[2,18,3,4],2019:[2,24,3,10],2020:[2,9,2,23],2021:[2,14,2,28],2022:[2,19,3,6],name:"Vacances d'Hiver"},{2018:[4,15,4,29],2019:[4,21,5,5],2020:[4,5,4,19],2021:[4,11,4,25],2022:[4,23,5,8],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],2022:[5,26,5,28],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,9,1],2022:[7,7,8,31],name:"Vacances d't"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,1],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],2021:[12,19,1,2],2022:[12,17,1,2],name:"Vacances de Nol"}]},Corse:{_state_code:"cor",SH:[{2018:[2,27,3,11],2019:[2,24,3,10],2020:[2,16,3,1],2021:[2,14,2,28],2022:[2,19,3,6],name:"Vacances d'Hiver"},{2018:[4,24,5,6],2019:[4,21,5,5],2020:[4,19,5,3],2021:[4,11,4,25],2022:[4,23,5,8],name:"Vacances de Printemps"},{2018:[5,10,5,10],2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,14,5,16],name:"Pont de l'Ascension"},{2018:[7,11,9,4],2019:[7,7,9,2],2020:[7,5,8,31],2021:[7,8,8,30],2022:[7,8,8,31],name:"Vacances d't"},{2018:[10,24,11,4],2019:[10,20,11,3],2020:[10,18,11,1],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],name:"Vacances de Nol"}]},Guadeloupe:{_state_code:"gua",SH:[{2018:[2,9,2,21],2019:[2,24,3,10],2020:[2,16,3,1],2021:[2,10,2,21],2022:[2,19,3,6],name:"Vacances de Carnaval"},{2018:[3,25,4,8],2019:[4,19,5,1],2020:[4,9,4,22],2021:[3,28,4,11],2022:[4,13,4,24],name:"Vacances de Pques"},{2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,28,5,29],2022:[5,27,5,27],name:"Pont de l'Ascension"},{2018:[7,7,9,3],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,6,8,30],2022:[7,7,8,31],name:"Grandes Vacances"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,2],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],name:"Vacances de Nol"}]},"Saint-Martin (France)":{_state_code:"mf",SH:[{2018:[2,9,2,21],2019:[2,24,3,10],2020:[2,16,3,1],2021:[2,10,2,21],name:"Vacances de Carnaval"},{2018:[3,25,4,8],2019:[4,19,5,1],2020:[4,9,4,22],2021:[3,28,4,11],name:"Vacances de Pques"},{2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,25,5,27],name:"Pont de l'Ascension"},{2018:[7,7,9,3],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,6,8,30],name:"Grandes Vacances"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,2],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],name:"Vacances de Nol"}]},"Saint-Barthlemy":{_state_code:"bl",SH:[{2018:[2,9,2,21],2019:[2,24,3,10],2020:[2,16,3,1],2021:[2,10,2,21],name:"Vacances de Carnaval"},{2018:[3,25,4,8],2019:[4,19,5,1],2020:[4,9,4,22],2021:[3,28,4,11],name:"Vacances de Pques"},{2019:[5,30,6,2],2020:[5,21,5,24],name:"Pont de l'Ascension"},{2018:[7,7,9,3],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,6,8,30],name:"Grandes Vacances"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,18,11,2],name:"Vacances de la Toussaint"},{2018:[12,23,1,6],2019:[12,22,1,5],2020:[12,20,1,3],name:"Vacances de Nol"}]},Guyane:{_state_code:"guf",SH:[{2018:[2,11,2,25],2019:[2,24,3,10],2020:[2,16,3,1],2021:[2,14,2,28],2022:[2,19,3,6],name:"Vacances de Carnaval"},{2018:[3,30,4,15],2019:[4,19,5,1],2020:[4,10,4,26],2021:[4,2,4,18],2022:[4,14,5,1],name:"Vacances de Pques"},{2019:[5,30,6,2],2020:[5,21,5,24],2021:[5,13,5,16],2022:[5,25,5,29],name:"Pont de l'Ascension"},{2018:[7,8,9,2],2019:[7,9,9,1],2020:[7,5,8,31],2021:[7,4,8,31],2022:[7,9,8,31],name:"Grandes Vacances"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,25,11,8],name:"Vacances de la Toussaint"},{2018:[12,23,1,5],2019:[12,22,1,5],2020:[12,20,1,3],name:"Vacances de Nol"}]},Martinique:{_state_code:"mtq",SH:[{2018:[2,8,2,18],2019:[2,24,3,10],2020:[2,23,3,8],2021:[2,7,2,21],2022:[2,19,3,6],name:"Vacances de Carnaval"},{2018:[3,25,4,8],2019:[4,14,4,28],2020:[4,5,4,19],2021:[3,28,4,11],2022:[4,9,4,24],name:"Vacances de Pques"},{2018:[5,8,5,13],2019:[5,30,6,2],2020:[5,14,5,15],2022:[5,27,5,27],name:"Pont de l'Ascension"},{2018:[7,7,9,3],2019:[7,7,9,1],2020:[7,5,8,31],2021:[7,7,8,30],2022:[7,7,8,31],name:"Grandes Vacances"},{2018:[10,21,11,4],2019:[10,20,11,3],2020:[10,25,11,8],name:"Vacances de la Toussaint"},{2018:[12,23,1,5],2019:[12,22,1,5],2020:[12,20,1,3],name:"Vacances de Nol"}]},Mayotte:{_state_code:"may",SH:[{2018:[2,25,3,11],2019:[2,24,3,10],2020:[3,1,3,15],2021:[2,28,3,14],2022:[2,26,3,13],name:"Vacances de Carnaval"},{2018:[5,6,5,13],2019:[4,27,5,5],2020:[5,3,5,10],2021:[5,1,5,16],2022:[4,30,5,15],name:"Vacances de Pques"},{2020:[5,21,5,24],name:"Pont de l'Ascension"},{2018:[7,8,8,22],2019:[7,7,8,22],2020:[7,5,8,23],2021:[7,7,8,22],2022:[7,6,8,23],name:"Grandes Vacances"},{2018:[10,7,10,21],2019:[10,13,10,27],2020:[10,11,10,25],name:"Vacances de la Toussaint"},{2018:[12,9,1,6],2019:[12,15,1,12],2020:[12,13,1,10],name:"Vacances de Nol"}]},"La Runion":{_state_code:"lre",SH:[{2018:[3,11,3,25],2019:[3,10,3,24],2020:[3,8,3,22],2021:[3,7,3,21],2022:[3,12,3,27],name:"Vacances aprs 3me priode"},{2018:[5,6,5,16],2019:[5,8,5,19],2020:[5,1,5,13],2021:[5,5,5,16],2022:[5,14,5,29],name:"Vacances aprs 4me priode"},{2018:[7,8,8,16],2019:[7,7,8,15],2020:[7,8,8,15],2022:[7,9,8,15],name:"Vacances hiver austral"},{2018:[10,14,10,28],2019:[10,13,10,27],2020:[10,11,11,25],name:"Vacances aprs 1re priode"},{2018:[12,23,1,27],2019:[12,20,1,26],2020:[12,20,1,24],name:"Vacances t austral"}]},"Nouvelle-Caldonie":{_state_code:"nc",SH:[{2018:[4,7,4,15],2019:[4,6,4,14],2020:[4,4,4,13],2021:[4,3,4,18],2022:[4,2,4,16],name:"Vacances 1re priode"},{2018:[6,9,6,24],2019:[6,8,6,23],2020:[6,6,6,21],2021:[6,5,6,20],2022:[6,4,6,18],name:"Vacances 2me priode"},{2018:[8,11,8,26],2019:[8,10,8,25],2020:[8,8,8,23],2021:[8,7,8,22],2022:[8,6,8,20],name:"Vacances 3me priode"},{2018:[10,13,10,18],2019:[10,12,10,27],2020:[10,10,10,25],2021:[10,9,10,24],2022:[10,8,10,22],name:"Vacances 4me priode"},{2018:[12,15,2,17],2019:[12,14,2,16],2020:[12,18,2,14],2021:[12,18,2,13],2022:[12,17,2,12],name:"Vacances d't"}]},"Polynsie franaise":{_state_code:"pf",SH:[{2018:[2,18,2,25],2019:[2,17,2,24],2020:[2,16,2,23],2021:[2,21,2,28],2022:[2,19,2,27],2023:[2,19,2,26],name:"Vacances de fvrier"},{2018:[3,30,4,15],2019:[4,7,4,22],2020:[3,29,4,13],2021:[4,6,4,18],2022:[4,2,4,18],2023:[4,2,4,16],name:"Vacances d'avril"},{2018:[5,20,5,27],2019:[5,26,6,2],2020:[5,17,5,24],2021:[5,25,5,30],2022:[5,21,5,29],2023:[5,21,5,27],name:"Vacances de mai"},{2018:[7,7,8,15],2019:[7,7,8,13],2020:[7,5,8,9],2021:[7,3,8,8],2022:[7,2,8,7],2023:[7,2,8,7],name:"Grandes Vacances"},{2018:[9,16,9,23],2019:[9,15,9,22],2020:[9,13,9,20],2021:[9,12,9,19],2022:[9,10,9,18],name:"Vacances de septembre"},{2018:[10,28,11,11],2019:[10,27,11,11],2020:[10,25,11,8],2021:[10,24,11,7],2022:[10,22,11,6],name:"Vacances d'octobre-novembre"},{2018:[12,16,1,13],2019:[12,15,1,12],2020:[12,13,1,10],2021:[12,12,1,9],2022:[12,10,1,8],name:"Vacances de Nol"}]},"Saint-Pierre-et-Miquelon":{_state_code:"pm",SH:[{2018:[2,24,3,11],2019:[2,16,3,3],2020:[2,22,3,8],2021:[2,19,3,7],name:"Vacances d'Hiver"},{2018:[4,28,5,13],2019:[4,20,5,5],2020:[4,18,5,3],2021:[4,24,5,9],2022:[4,15,5,1],name:"Vacances de Printemps"},{2020:[5,21,5,24],2021:[5,13,5,16],2022:[5,26,5,29],name:"Pont de l'Ascension"},{2018:[6,30,9,6],2019:[7,4,9,4],2020:[7,4,9,2],2021:[7,3,9,1],2022:[7,1,8,31],name:"Vacances d't"},{2018:[10,27,11,4],2019:[10,26,11,5],2020:[10,22,11,1],name:"Vacances de la Toussaint"},{2018:[12,22,1,6],2019:[12,21,1,5],2020:[12,19,1,3],name:"Vacances de Nol"}]},"Wallis-et-Futuna":{_state_code:"wf",SH:[{2018:[4,1,4,15],2019:[3,31,4,14],2020:[3,29,4,13],2021:[4,3,4,18],name:"Vacances 1re priode"},{2018:[6,8,6,24],2019:[6,9,6,23],2020:[6,5,6,21],2021:[6,5,6,20],name:"Vacances 2me priode"},{2018:[8,10,8,26],2019:[8,11,8,25],2020:[8,9,8,23],2021:[8,7,8,22],name:"Vacances 3me priode"},{2018:[10,14,10,28],2019:[10,13,10,27],2020:[10,11,10,25],2021:[10,9,10,24],name:"Vacances 4me priode"},{2018:[12,16,2,10],2019:[12,15,2,9],2020:[12,13,2,14],2021:[12,18,2,19],name:"Vacances d't"}]}};k.PH,k.Bretagne,k.Normandie,k.Occitanie,k.Corse,k.Guadeloupe,k.Guyane,k.Martinique,k.Mayotte;var H={England:{PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"Early May bank holiday",variable_date:"firstMayMonday"},{name:"Spring bank holiday",variable_date:"lastMayMonday"},{name:"Summer bank holiday",variable_date:"lastAugustMonday"},{name:"Christmas",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]},Wales:{PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"Early May bank holiday",variable_date:"firstMayMonday"},{name:"Spring bank holiday",variable_date:"lastMayMonday"},{name:"Summer bank holiday",variable_date:"lastAugustMonday"},{name:"Christmas",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]}};H.England,H.Wales;var ce={PH:[{name:"",fixed_date:[1,1]},{name:"",fixed_date:[1,6]},{name:" ",variable_date:"orthodox easter",offset:-48},{name:"25 ",fixed_date:[3,25]},{name:" ",variable_date:"orthodox easter",offset:-2},{name:"",variable_date:"orthodox easter",offset:0},{name:"  ",variable_date:"orthodox easter",offset:1},{name:"",fixed_date:[5,1]},{name:"  ",fixed_date:[8,15]},{name:"28 ",fixed_date:[10,28]},{name:"",fixed_date:[12,25]},{name:"2  ",fixed_date:[12,26]}],SH:[{2019:[1,30,1,30],2020:[1,30,1,30],name:" "},{2019:[4,22,5,6],2020:[4,13,4,26],name:""},{2019:[6,17,6,17],2020:[6,8,6,8],name:" "},{2019:[7,1,8,31],2020:[7,1,8,31],name:""},{2019:[11,17,11,17],name:""},{2018:[12,24,1,7],2019:[12,24,1,7],2020:[12,24,1,7],name:""}]};ce.PH,ce.SH;var U={PH:[{name:"jv",fixed_date:[1,1]},{name:"az 1848-as forradalom nnepe",fixed_date:[3,15]},{name:"nagypntek",variable_date:"easter",offset:-2},{name:"hsvtvasrnap",variable_date:"easter"},{name:"hsvthtf",variable_date:"easter",offset:1},{name:"pnksdvasrnap",variable_date:"easter",offset:49},{name:"pnksdhtf",variable_date:"easter",offset:50},{name:"a munka nnepe",fixed_date:[5,1]},{name:"az llamalapts nnepe",fixed_date:[8,20]},{name:"az 1956-os forradalom nnepe",fixed_date:[10,23]},{name:"mindenszentek",fixed_date:[11,1]},{name:"karcsony",fixed_date:[12,25]},{name:"karcsony msnap",fixed_date:[12,26]}],SH:[{2015:[4,2,4,7],2016:[3,24,3,29],2017:[4,13,4,18],name:"tavaszi sznet"},{2015:[6,16,8,31],2016:[6,16,8,31],2017:[6,16,8,31],name:"nyri sznet"},{2014:[10,27,10,31],2015:[10,26,10,30],2016:[11,2,11,4],name:"szi sznet"},{2014:[12,22,1,2],2015:[12,21,12,31],2016:[12,22,1,2],name:"tli sznet"}]};U.PH,U.SH;var te={PH:[{name:"New Years Day",fixed_date:[1,1]},{name:"St Patricks Day",fixed_date:[3,17]},{name:"St Patricks Day",variable_date:"nextMo-Fr17March"},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"May Bank Holiday",variable_date:"firstMayMonday"},{name:"June Bank Holiday",variable_date:"firstJuneMonday"},{name:"August Bank Holiday",variable_date:"firstAugustMonday"},{name:"October Bank Holiday (Halloween)",variable_date:"lastOctoberMonday"},{name:"Christmas",fixed_date:[12,25]},{name:"St Stephens Day",fixed_date:[12,26]},{name:"Bank Holiday",fixed_date:[12,27]}]};te.PH;var re={PH:[{name:"Capodanno",fixed_date:[1,1]},{name:"Epifania",fixed_date:[1,6]},{name:"Liberazione dal nazifascismo (1945)",fixed_date:[4,25]},{name:"Pasqua",variable_date:"easter"},{name:"Luned di Pasqua",variable_date:"easter",offset:1},{name:"Festa del lavoro",fixed_date:[5,1]},{name:"Festa della Repubblica",fixed_date:[6,2]},{name:"Assunzione di Maria",fixed_date:[8,15]},{name:"Ognissanti",fixed_date:[11,1]},{name:"Immacolata Concezione",fixed_date:[12,8]},{name:"Natale di Ges",fixed_date:[12,25]},{name:"Santo Stefano",fixed_date:[12,26]}]};re.PH;var ue={PH:[{name:"Nieuwjaarsdag",fixed_date:[1,1]},{name:"Goede vrijdag",variable_date:"easter",offset:-2},{name:"Tweede Paasdag",variable_date:"easter",offset:1},{name:"Koningsdag",fixed_date:[4,27]},{name:"Bevrijdingsdag",fixed_date:[5,5]},{name:"Hemelvaartsdag",variable_date:"easter",offset:39},{name:"Tweede Pinksterdag",variable_date:"easter",offset:50},{name:"Eerste Kerstdag",fixed_date:[12,25]},{name:"Tweede Kerstdag",fixed_date:[12,26]}]};ue.PH;var V={PH:[{name:"Nyttrsdag",fixed_date:[1,1]},{name:"Skjrtorsdag",variable_date:"easter",offset:-3},{name:"Langfredag",variable_date:"easter",offset:-2},{name:"Pskedag",variable_date:"easter"},{name:"2. Pskedag",variable_date:"easter",offset:1},{name:"1. Mai",fixed_date:[5,1]},{name:"Grunnlovsdagen",fixed_date:[5,17]},{name:"Kristi Himmelfartsdag",variable_date:"easter",offset:39},{name:"Pinsedag",variable_date:"easter",offset:49},{name:"2. Pinsedag",variable_date:"easter",offset:50},{name:"Juledag",fixed_date:[12,25]},{name:"2. Juledag",fixed_date:[12,26]}]};V.PH;var S={PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Day after New Year's Day",fixed_date:[1,2]},{name:"Waitangi Day",fixed_date:[2,6]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"Anzac Day",fixed_date:[4,25]},{name:"Queen's Birthday",variable_date:"firstJuneMonday"},{name:"Labour Day",variable_date:"firstOctoberMonday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Boxing Day",fixed_date:[12,26]}]};S.PH;var T={PH:[{name:"Nowy Rok",fixed_date:[1,1]},{name:"wito Trzech Krli",fixed_date:[1,6]},{name:"Wielkanoc",variable_date:"easter"},{name:"Lany Poniedziaek - drugi dzie Wielkiej Nocy",variable_date:"easter",offset:1},{name:"Pierwszy Maja",fixed_date:[5,1]},{name:"Trzeci Maja",fixed_date:[5,3]},{name:"Zielone witki",variable_date:"easter",offset:49},{name:"Boe Ciao",variable_date:"easter",offset:60},{name:"Wniebowzicie Najwitszej Maryi Panny",fixed_date:[8,15]},{name:"Wszystkich witych",fixed_date:[11,1]},{name:"wito Niepodlegoci",fixed_date:[11,11]},{name:"pierwszy dzie Boego Narodzenia",fixed_date:[12,25]},{name:"drugi dzie Boego Narodzenia",fixed_date:[12,26]}]};T.PH;var G={PH:[{name:"Anul Nou",fixed_date:[1,1]},{name:"A doua zi de Anul Nou",fixed_date:[1,2]},{name:"Ziua Unirii Principatelor Romne (Ziua Unirii)",fixed_date:[1,24]},{name:"Patele ortodox",variable_date:"orthodox easter"},{name:"A doua zi de Pate ortodox",variable_date:"orthodox easter",offset:1},{name:"Ziua Muncii",fixed_date:[5,1]},{name:"Rusaliile",variable_date:"orthodox easter",offset:50},{name:"A doua zi de Rusalii",variable_date:"orthodox easter",offset:51},{name:"Adormirea Maicii Domnului",fixed_date:[8,15]},{name:"Sfntul Apostol Andrei",fixed_date:[11,30]},{name:"Ziua Naional (Ziua Marii Uniri)",fixed_date:[12,1]},{name:"Crciunul",fixed_date:[12,25]},{name:"A doua zi de Crciun",fixed_date:[12,26]}],SH:[{2015:[1,31,2,8],2016:[1,30,2,7],2021:[1,30,2,7],name:"Vacana intersemestrial"},{2015:[4,11,4,19],2016:[4,23,5,3],2021:[4,30,5,9],name:"Vacana de primvar"},{2015:[6,20,9,13],2016:[6,18,9,4],2021:[6,26,9,13],name:"Vacana de var"},{2014:[12,20,1,4],2015:[12,19,1,3],2020:[12,23,1,10],2021:[12,23,1,9],name:"Vacana de iarn"}]};G.PH,G.SH;var Q={PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]}],:{_state_code:"tatarstan",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"-",fixed_date:[7,28]},{name:"  ",fixed_date:[8,30]},{name:"-",fixed_date:[10,4]},{name:"   ",fixed_date:[11,6]}]},:{_state_code:"bashkortostan",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"-",fixed_date:[7,28]},{name:"-",fixed_date:[10,4]},{name:"  ",fixed_date:[10,11]},{name:"  ",fixed_date:[12,24]}]},:{_state_code:"chuvashia",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"  ",fixed_date:[6,24]}]},"  ()":{_state_code:"sakha",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"  ",fixed_date:[4,27]},{name:"",fixed_date:[6,23]},{name:"   ",fixed_date:[9,27]}]},:{_state_code:"kalmykia",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:" ",fixed_date:[1,14]},{name:"    ()  ",fixed_date:[4,5]},{name:"   ",fixed_date:[6,6]},{name:"",fixed_date:[12,15]},{name:"     ",fixed_date:[12,28]}]}," ":{_state_code:"buryatia",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"",fixed_date:[1,14]}]}," ":{_state_code:"karelia",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"  ",fixed_date:[6,8]},{name:"     ",fixed_date:[9,30]}]},"  ":{_state_code:"udmurtia",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"   ",fixed_date:[5,31]}]},:{_state_code:"adygea",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"-",fixed_date:[7,28]},{name:"-",fixed_date:[10,4]},{name:"   ",fixed_date:[10,5]}]},:{_state_code:"dagestan",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"   ",fixed_date:[7,26]},{name:"-",fixed_date:[7,28]},{name:"   ",fixed_date:[9,15]},{name:"-",fixed_date:[10,4]}]},:{_state_code:"ingushetia",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"   ",fixed_date:[6,4]},{name:"-",fixed_date:[7,28]},{name:"-",fixed_date:[10,4]}]},"-":{_state_code:"karachay_cherkess",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"   ",fixed_date:[5,3]},{name:"-",fixed_date:[7,28]},{name:"-",fixed_date:[10,4]}]},:{_state_code:"chechnya",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"    ",fixed_date:[4,16]},{name:"-",fixed_date:[7,28]},{name:"-",fixed_date:[10,4]}]},"-":{_state_code:"kabardino_balkaria",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"   ",fixed_date:[3,28]},{name:"  ",fixed_date:[5,21]},{name:"-",fixed_date:[7,28]},{name:"  - ",fixed_date:[9,1]},{name:"-",fixed_date:[10,4]}]}," ":{_state_code:"altai",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"-",fixed_date:[1,14]}]}," ":{_state_code:"tuva",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"  ",fixed_date:[1,14]},{name:"  ",fixed_date:[8,15]}]}," ":{_state_code:"saratov",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"",fixed_date:[4,29]}]}," ":{_state_code:"bryansk",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"",fixed_date:[4,29]},{name:"   ",fixed_date:[9,17]}]}," ":{_state_code:"komi",PH:[{name:"1.  ",fixed_date:[1,1]},{name:"2.  ",fixed_date:[1,2]},{name:"3.  ",fixed_date:[1,3]},{name:"4.  ",fixed_date:[1,4]},{name:"5.  ",fixed_date:[1,5]},{name:"6.  ",fixed_date:[1,6]},{name:" ",fixed_date:[1,7]},{name:"8.  ",fixed_date:[1,8]},{name:"  ",fixed_date:[2,23]},{name:"  ",fixed_date:[3,8]},{name:" ",fixed_date:[5,9]},{name:"   ",fixed_date:[5,1]},{name:"  ",fixed_date:[11,4]},{name:" ",fixed_date:[6,12]},{name:"  ",fixed_date:[8,22]}]}};Q.PH;var le={PH:[{name:"nyrsdagen",fixed_date:[1,1]},{name:"trettondedag jul",fixed_date:[1,6]},{name:"lngfredagen",variable_date:"easter",offset:-2},{name:"pskdagen",variable_date:"easter"},{name:"annandag psk",variable_date:"easter",offset:1},{name:"frsta maj",fixed_date:[5,1]},{name:"pingstdagen",variable_date:"easter",offset:49},{name:"nationaldagen",fixed_date:[6,6]},{name:"midsommardagen",variable_date:"nextSaturday20Jun"},{name:"alla helgons dag",variable_date:"nextSaturday31Oct"},{name:"juldagen",fixed_date:[12,25]},{name:"annandag jul",fixed_date:[12,26]}]};le.PH;var fe={PH:[{name:"novo leto",fixed_date:[1,1]},{name:"Preernov dan, slovenski kulturni praznik",fixed_date:[2,8]},{name:"velikonona nedelja",variable_date:"easter"},{name:"velikononi ponedeljek",variable_date:"easter",offset:1},{name:"dan upora proti okupatorju",fixed_date:[4,27]},{name:"praznik dela 1",fixed_date:[5,1]},{name:"praznik dela 2",fixed_date:[5,2]},{name:"binkotna nedelja - binkoti",variable_date:"easter",offset:49},{name:"dan dravnosti",fixed_date:[6,25]},{name:"Marijino vnebovzetje",fixed_date:[8,15]},{name:"dan reformacije",fixed_date:[10,31]},{name:"dan spomina na mrtve",fixed_date:[11,1]},{name:"boi",fixed_date:[12,25]},{name:"dan samostojnosti in enotnosti",fixed_date:[12,26]}]};fe.PH;var q={PH:[{name:"De vzniku Slovenskej republiky",fixed_date:[1,1]},{name:"Zjavenie Pna",fixed_date:[1,6]},{name:"Vek piatok",variable_date:"easter",offset:-2},{name:"Vekonon nedea",variable_date:"easter"},{name:"Vekonon pondelok",variable_date:"easter",offset:1},{name:"Sviatok prce",fixed_date:[5,1]},{name:"De vazstva nad faizmom",fixed_date:[5,8]},{name:"Sviatok svtho Cyrila a Metoda",fixed_date:[7,5]},{name:"Vroie Slovenskho nrodnho povstania",fixed_date:[8,29]},{name:"De stavy Slovenskej republiky",fixed_date:[9,1]},{name:"Sviatok Panny Mrie Sedembolestnej",fixed_date:[9,15]},{name:"Sviatok vetkch svtch",fixed_date:[11,1]},{name:"De boja za slobodu a demokraciu",fixed_date:[11,17]},{name:"tedr de",fixed_date:[12,24]},{name:"Prv sviatok vianon",fixed_date:[12,25]},{name:"Druh sviatok vianon",fixed_date:[12,26]}]};q.PH;var se={PH:[{name:" ",fixed_date:[1,1]},{name:"",fixed_date:[1,7]},{name:"  ",fixed_date:[3,8]},{name:"",variable_date:"orthodox easter",offset:1},{name:"  1",fixed_date:[5,1]},{name:"  2",fixed_date:[5,2]},{name:" ",fixed_date:[5,9]},{name:"  ",fixed_date:[6,28]},{name:"  ",fixed_date:[8,24]}]};se.PH;var D={PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}],Alabama:{_state_code:"al",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Robert E. Lee/Martin Luther King Birthday",variable_date:"firstJanuaryMonday",offset:14},{name:"George Washington/Thomas Jefferson Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Confederate Memorial Day",variable_date:"firstAprilMonday",offset:21},{name:"Jefferson Davis' Birthday",variable_date:"firstJuneMonday"}]},Alaska:{_state_code:"ak",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Seward's Day",variable_date:"lastMarchMonday"},{name:"Alaska Day",fixed_date:[10,18]}]},Arizona:{_state_code:"az",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Dr. Martin Luther King Jr./Civil Rights Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Arkansas:{_state_code:"ar",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Dr. Martin Luther King Jr. and Robert E. Lee's Birthdays",variable_date:"firstJanuaryMonday",offset:14},{name:"George Washington's Birthday and Daisy Gatson Bates Day",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Eve",fixed_date:[12,24]},{name:"Christmas Day",fixed_date:[12,25]}]},California:{_state_code:"ca",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Csar Chvez Day",fixed_date:[3,31]}]},Colorado:{_state_code:"co",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Connecticut:{_state_code:"ct",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Lincoln's Birthday",fixed_date:[2,12]},{name:"Good Friday",variable_date:"easter",offset:-2}]},Delaware:{_state_code:"de",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Day After Thanksgiving",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Day",fixed_date:[12,25]},{name:"Good Friday",variable_date:"easter",offset:-2}]},"District of Columbia":{_state_code:"dc",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Emancipation Day",fixed_date:[4,16]}]},Florida:{_state_code:"fl",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Friday after Thanksgiving",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Day",fixed_date:[12,25]}]},Georgia:{_state_code:"ga",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Robert E. Lee's Birthday",variable_date:"firstNovemberThursday",offset:22},{name:"Washington's Birthday",fixed_date:[12,24]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Confederate Memorial Day",variable_date:"lastAprilMonday"}]},Guam:{_state_code:"gu",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Guam Discovery Day",fixed_date:[3,5]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Liberation Day",fixed_date:[7,21]},{name:"All Souls' Day",fixed_date:[11,2]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Lady of Camarin Day",fixed_date:[12,8]},{name:"Christmas Day",fixed_date:[12,25]}]},Hawaii:{_state_code:"hi",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Prince Jonah Kuhio Kalanianaole Day",fixed_date:[3,26]},{name:"Kamehameha Day",fixed_date:[6,11]},{name:"Statehood Day",variable_date:"firstAugustFriday",offset:14},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1}]},Idaho:{_state_code:"id",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr.-Idaho Human Rights Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Illinois:{_state_code:"il",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Lincoln's Birthday",fixed_date:[2,12]},{name:"Casimir Pulaski Day",variable_date:"firstMarchMonday"},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1}]},Indiana:{_state_code:"in",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Lincoln's Birthday",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Day",fixed_date:[12,25]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Primary Election Day",variable_date:"firstMayMonday",offset:1},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1}]},Iowa:{_state_code:"ia",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Lincoln's Birthday",fixed_date:[2,12]}]},Kansas:{_state_code:"ks",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Kentucky:{_state_code:"ky",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Eve",fixed_date:[12,24]},{name:"Christmas Day",fixed_date:[12,25]},{name:"New Year's Eve",fixed_date:[12,31]},{name:"Good Friday",variable_date:"easter",offset:-2}]},Louisiana:{_state_code:"la",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Mardi Gras",variable_date:"easter",offset:-47},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1}]},Maine:{_state_code:"me",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Patriots' Day",variable_date:"firstAprilMonday",offset:14}]},Maryland:{_state_code:"md",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Native American Heritage Day",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Day",fixed_date:[12,25]}]},Massachusetts:{_state_code:"ma",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Patriots' Day",variable_date:"firstAprilMonday",offset:14}]},Michigan:{_state_code:"mi",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Eve",fixed_date:[12,24]},{name:"Christmas Day",fixed_date:[12,25]},{name:"New Year's Eve",fixed_date:[12,31]}]},Minnesota:{_state_code:"mn",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Mississippi:{_state_code:"ms",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King's and Robert E. Lee's Birthdays",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Confederate Memorial Day",variable_date:"lastAprilMonday"}]},Missouri:{_state_code:"mo",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Truman Day",fixed_date:[5,8]}]},Montana:{_state_code:"mt",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1},{name:"Christmas Eve",fixed_date:[12,24]},{name:"New Year's Eve",fixed_date:[12,31]}]},Nebraska:{_state_code:"ne",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Arbor Day",variable_date:"lastAprilFriday"}]},Nevada:{_state_code:"nv",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Nevada Day",variable_date:"lastOctoberFriday"},{name:"Family Day",variable_date:"firstNovemberThursday",offset:22}]},"New Hampshire":{_state_code:"nh",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Civil Rights Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Day after Thanksgiving",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Day",fixed_date:[12,25]},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1}]},"New Jersey":{_state_code:"nj",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Lincoln's Birthday",fixed_date:[2,12]},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1}]},"New Mexico":{_state_code:"nm",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Day after Thanksgiving",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Day",fixed_date:[12,25]}]},"New York":{_state_code:"ny",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Lincoln's Birthday",fixed_date:[2,12]},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1}]},"North Carolina":{_state_code:"nc",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Day after Thanksgiving",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Eve",fixed_date:[12,24]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Day after Christmas",fixed_date:[12,26]},{name:"Good Friday",variable_date:"easter",offset:-2}]},"North Dakota":{_state_code:"nd",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Ohio:{_state_code:"oh",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Oklahoma:{_state_code:"ok",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Day after Thanksgiving",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Day",fixed_date:[12,25]}]},Oregon:{_state_code:"or",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Pennsylvania:{_state_code:"pa",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Flag Day",fixed_date:[6,14]}]},"Puerto Rico":{_state_code:"pr",PH:[{name:"Da de Ao Nuevo",fixed_date:[1,1]},{name:"Da de Reyes",fixed_date:[1,6]},{name:"Natalicio de Eugenio Mara de Hostos",variable_date:"firstJanuaryMonday",offset:7},{name:"Natalicio de Martin Luther King, Jr.",variable_date:"firstJanuaryMonday",offset:14},{name:"Da de los Presidentes",variable_date:"firstFebruaryMonday",offset:14},{name:"Da de la Abolicin de Esclavitud",fixed_date:[3,22]},{name:"Viernes Santo",variable_date:"easter",offset:-2},{name:"Natalicio de Jos de Diego",variable_date:"firstAprilMonday",offset:14},{name:"Recordacin de los Muertos de la Guerra",variable_date:"lastMayMonday"},{name:"Da de la Independencia",fixed_date:[7,4]},{name:"Constitucin de Puerto Rico",fixed_date:[7,25]},{name:"Natalicio de Dr. Jos Celso Barbosa",fixed_date:[7,27]},{name:"Da del Trabajo",variable_date:"firstSeptemberMonday"},{name:"Da de la Raza Descubrimiento de Amrica",variable_date:"firstOctoberMonday",offset:7},{name:"Da del Veterano",fixed_date:[11,11]},{name:"Da del Descubrimiento de Puerto Rico",fixed_date:[11,19]},{name:"Da de Accin de Gracias",variable_date:"firstNovemberThursday",offset:21},{name:"Noche Buena",fixed_date:[12,24]},{name:"Da de Navidad",fixed_date:[12,25]}]},"Rhode Island":{_state_code:"ri",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Victory Day",variable_date:"firstAugustMonday",offset:7}]},"South Carolina":{_state_code:"sc",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Confederate Memorial Day",fixed_date:[5,10]}]},"South Dakota":{_state_code:"sd",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Native American Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Tennessee:{_state_code:"tn",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Eve",fixed_date:[12,24]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Good Friday",variable_date:"easter",offset:-2}]},Texas:{_state_code:"tx",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Friday after Thanksgiving",variable_date:"firstNovemberThursday",offset:22},{name:"Christmas Eve",fixed_date:[12,24]},{name:"Christmas Day",fixed_date:[12,25]},{name:"Day after Christmas",fixed_date:[12,26]}]},"United States Virgin Islands":{_state_code:"vi",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Virgin Islands-Puerto Rico Friendship Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Three Kings Day",fixed_date:[1,6]},{name:"Transfer Day",fixed_date:[3,31]},{name:"Holy Thursday",variable_date:"easter",offset:-3},{name:"Good Friday",variable_date:"easter",offset:-2},{name:"Easter Monday",variable_date:"easter",offset:1},{name:"Emancipation Day",fixed_date:[7,3]},{name:"Hurricane Supplication Day",variable_date:"firstJulyMonday",offset:21},{name:"Hurricane Thanksgiving",fixed_date:[10,25]},{name:"Liberty Day",fixed_date:[11,1]},{name:"Christmas Second Day",fixed_date:[12,26]},{name:"New Year's Eve",fixed_date:[12,31]}]},Utah:{_state_code:"ut",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Pioneer Day",fixed_date:[7,24]}]},Vermont:{_state_code:"vt",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Town Meeting Day",variable_date:"firstMarchTuesday"},{name:"Battle of Bennington",variable_date:"firstAugustMonday",offset:14}]},Virginia:{_state_code:"va",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},Washington:{_state_code:"wa",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]},"West Virginia":{_state_code:"wv",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"West Virginia Day",fixed_date:[6,20]},{name:"Lincoln's Day",variable_date:"firstNovemberThursday",offset:22}]},Wisconsin:{_state_code:"wi",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]},{name:"Primary Election Day",variable_date:"firstAugustTuesday",offset:7},{name:"Election Day",variable_date:"firstNovemberMonday",offset:1}]},Wyoming:{_state_code:"wy",PH:[{name:"New Year's Day",fixed_date:[1,1]},{name:"Martin Luther King, Jr. Day",variable_date:"firstJanuaryMonday",offset:14},{name:"Washington's Birthday",variable_date:"firstFebruaryMonday",offset:14},{name:"Memorial Day",variable_date:"lastMayMonday"},{name:"Independence Day",fixed_date:[7,4]},{name:"Labor Day",variable_date:"firstSeptemberMonday"},{name:"Columbus Day",variable_date:"firstOctoberMonday",offset:7},{name:"Veterans Day",fixed_date:[11,11]},{name:"Thanksgiving",variable_date:"firstNovemberThursday",offset:21},{name:"Christmas Day",fixed_date:[12,25]}]}};D.PH,D.Alabama,D.Alaska,D.Arizona,D.Arkansas,D.California,D.Colorado,D.Connecticut,D.Delaware,D.Florida,D.Georgia,D.Guam,D.Hawaii,D.Idaho,D.Illinois,D.Indiana,D.Iowa,D.Kansas,D.Kentucky,D.Louisiana,D.Maine,D.Maryland,D.Massachusetts,D.Michigan,D.Minnesota,D.Mississippi,D.Missouri,D.Montana,D.Nebraska,D.Nevada,D.Ohio,D.Oklahoma,D.Oregon,D.Pennsylvania,D.Tennessee,D.Texas,D.Utah,D.Vermont,D.Virginia,D.Washington,D.Wisconsin,D.Wyoming;var oe={PH:[{name:"Tt Dng Lch",fixed_date:[1,1]},{name:"Ngy Quc t Ph n",fixed_date:[3,8]},{name:"Ngy thnh lp on Thanh nin Cng sn H Ch Minh",fixed_date:[3,26]},{name:"Ngy Quc t Thiu nhi",fixed_date:[6,1]},{name:"Ngy Nh gio Vit Nam",fixed_date:[11,20]},{name:"Ngy Gii phng min Nam, Thng nht t nc",fixed_date:[4,30]},{name:"Ngy Quc t lao ng",fixed_date:[5,1]},{name:"Quc Khnh",fixed_date:[9,2]},{name:"L Ging Sinh",fixed_date:[12,25]}]};oe.PH;var Pe={PH:[{name:"New Year",fixed_date:[1,1]}],SH:[{2020:[6,21,9,23],2021:[6,21,9,23],2022:[6,21,9,23],2023:[6,21,9,23],2024:[6,21,9,23],2025:[6,21,9,23],2026:[6,21,9,23],2027:[6,21,9,23],2028:[6,21,9,23],2029:[6,21,9,23],2030:[6,21,9,23],2031:[6,21,9,23],2032:[6,21,9,23],name:"Summer"}]};Pe.PH,Pe.SH;var Re=Object.freeze({__proto__:null,ar:p,at:y,au:b,be:E,br:C,ca:A,ch:B,ci:M,cz:N,de:Z,dk:ee,es:F,fi:O,fr:k,gb:H,gr:ce,hu:U,ie:te,it:re,nl:ue,no:V,nz:S,pl:T,ro:G,ru:Q,se:le,si:fe,sk:q,ua:se,us:D,vn:oe,xa:Pe}),Oe={"assuming ok for ko":{daytime:"sunrise-sunset",spring:"Mar-May",summer:"Jun-Aug",autumn:"Sep-Nov",winter:"Dec-Feb",_:"-","=":"-",frhling:"Mar-May",frhjahr:"Mar-May",sommer:"Jun-Aug",herbst:"Sep-Nov",gesloten:"off",feestdag:"PH",feestdagen:"PH",m:"Mo",w:"We",f:"Fr",primavera:"Mar-May",estate:"Jun-Aug",autunno:"Sep-Nov",inverno:"Dec-Feb"},"please use English written ok for ko":{"(?:an )?feiertag(?:s|en?)?":"PH"},"please use off for ko":{"ruhetage?":"off",geschlossen:"off",geschl:"off",except:"off"},"please use ok for workday":{wd:"Mo-Fr","on work days?":"Mo-Fr","weekdays?":"Mo-Fr","werktags?":"Mo-Sa",vardagar:"Mo-Fr"},"omit hour keyword":{h:""},"omit ko":{season:"",hs:"",hrs:"",hours:"",uhr:"",geffnet:"",zwischen:"",ist:"",durchgehend:"","ffnungszeit(?:en)?:?":""},"omit tag key":{"opening_hours\\s*=":""},"omit wrong keyword open end":{from:"",ab:"",von:""},"assuming open end for ko":{"(?:bis|till?|-|)? ?(?:open ?end|late)":"+"},"please use ok for uncertainty":{"~":"-","":"-"},"please use fallback rule":{otherwise:"||"},"please use ok for missing data":{"\\?":""},"please use ok for ko":{"":"-","":"-","":"-",:"-",to:"-",:"-",a:"-",as:"-",:"-",s:"-",s:"-",ate:"-","till?":"-",until:"-",through:"-",and:",","&":",","":":","'":'"',always:"24/7","always open":"24/7","always closed":"closed",nonstop:"24/7","24x7":"24/7",anytime:"24/7","all day":"24/7",daily:"Mo-Su",everyday:"Mo-Su","every day":"Mo-Su","all days":"Mo-Su","7j/7":"Mo-Su","7/7":"Mo-Su","7days":"Mo-Su","7 days":"Mo-Su","7 days a week":"Mo-Su","7 days/week":"Mo-Su","24 hours 7 days a week":"24/7","24 hours":"00:00-24:00",midday:"12:00",midnight:"00:00","(?:public )?holidays?":"PH","(?:one )?day after public holiday":"PH +1 day","(?:one )?day before public holiday":"PH -1 day","school ?holidays?":"SH","weekends?":"Sa,Su",daylight:"sunrise-sunset","on(?:_| )?appointments?":'"on appointment"',"by(?:_| )?appointments?":'"by appointment"',"nach(?: |_)vereinbarung":'"Nach Vereinbarung"',"nach(?: |_)absprache":'"Nach Absprache"',bis:"-",tglich:"Mo-Su","(?:schul)?ferien":"SH","(?:an|nur)? ?sonn-?(?: und |/)feiertag(?:s|en?)?":"PH,Su",und:",",u:",",auch:",",ferm:"off",et:",",:"-","jours fris":"PH",sundown:"sunset",morgendmmerung:"dawn",abenddmmerung:"dusk",sonnenaufgang:"sunrise",sonnenuntergang:"sunset",ostern:"easter"},"please use English abbreviation ok for so":{so:"Su"},"please use English abbreviation ok for ko":{sun:"Su","sundays?":"Su",mon:"Mo","mondays?":"Mo","tues?":"Tu","tuesdays?":"Tu","weds?":"We","wednesdays?":"We",thu:"Th","thurs?":"Th","thursdays?":"Th",fri:"Fr","fridays?":"Fr",sat:"Sa","saturdays?":"Sa",son:"Su","sonn-":"Su","sonntags?":"Su","montags?":"Mo",di:"Tu","die?":"Tu","dienstags?":"Tu",mi:"We","mit?":"We","mittwochs?":"We","don?":"Th","donnerstags?":"Th",fre:"Fr","freitags?":"Fr",sam:"Sa","samstags?":"Sa",dim:"Su",dimanche:"Su","lun?":"Mo",lundi:"Mo",mardi:"Tu",mer:"We",mercredi:"We","jeu?":"Th",jeudi:"Th","ven?":"Fr",vendredi:"Fr",samedi:"Sa","zon?":"Su",zontag:"Su",zondag:"Su",maandag:"Mo",din:"Tu",dinsdag:"Tu","woe?":"We",woensdag:"We",donderdag:"Th","vri?":"Fr",vrijdag:"Fr","zat?":"Sa",zaterdag:"Sa",nedle:"Su",ne:"Su",pondl:"Mo",po:"Mo",ter:"Tu",t:"Tu",steda:"We",st:"We",tvrtek:"Th",t:"Th",ptek:"Fr",p:"Fr",sobota:"Sa",martes:"Tu",mircoles:"We",jueves:"Th",viernes:"Fr",sbado:"Sa",domingo:"Su",lunes:"Mo",selasa:"Su",rabu:"Mo",kami:"Tu",jumat:"We",sabtu:"Th",minggu:"Fr",senin:"Sa",sndag:"Su",sndagar:"Su",mndag:"Mo",ma:"Mo",tisdag:"Tu",onsdag:"We",torsdag:"Th",fredag:"Fr",lrdag:"Sa",lrdagar:"Sa",niedziela:"Su",niedz:"Su",n:"Su",ndz:"Su",poniedziaek:"Mo",poniedzialek:"Mo",pon:"Mo",pn:"Mo",wtorek:"Tu",wt:"Tu",roda:"We",sroda:"We",r:"We",sr:"We",czwartek:"Th",czw:"Th",cz:"Th",pitek:"Fr",piatek:"Fr",pt:"Fr",sob:"Sa",:"Su",:"Su","voskresen'ye":"Su",:"Mo",:"Mo","ponedel'nik":"Mo",:"Tu",vtornik:"Tu",:"We",sreda:"We",:"Th",chetverk:"Th",:"Fr",pyatnitsa:"Fr",:"Sa",subbota:"Sa",sndag:"Su",mandag:"Mo",tirsdag:"Tu",lrdag:"Sa",dom:"Su","domenica?":"Su","domeniche?":"Su",lun:"Mo","luned?":"Mo","mar?":"Tu","marted?":"Tu","mer?":"We","mercoled?":"We",gio:"Th","gioved?":"Th",ven:"Fr","venerd?":"Fr",sab:"Sa","sabato?":"Sa",jnner:"Jan",january:"Jan",february:"Feb",march:"Mar",april:"Apr","june?":"Jun","july?":"Jul",august:"Aug",september:"Sep",sept:"Sep",october:"Oct",november:"Nov",december:"Dec",januar:"Jan",februar:"Feb","mrz?":"Mar",maerz:"Mar",mai:"May",juni:"Jun",juli:"Jul",okt:"Oct",oktober:"Oct",dez:"Dec",dezember:"Dec",janvier:"Jan",fvrier:"Feb",fv:"Feb",mars:"Mar",avril:"Apr",avr:"Apr",juin:"Jun",juillet:"Jul",aot:"Aug",ao:"Aug",septembre:"Sep",octobre:"Oct",novembre:"Nov",dcembre:"Dec",januari:"Jan",februari:"Feb",maart:"Mar",mei:"May",augustus:"Aug",gennaio:"Jan",febbraio:"Feb",marzo:"Mar",aprile:"Apr","giugno?":"Jun","luglio?":"Jul",agosto:"Aug",settembre:"Sep",ottobre:"Oct",dicembre:"Dec"},"please use ok for similar looking ko":{ff:"off"},"please use 24 hours time for ko":{pm:"pm","p.m.":"pm",:"pm",am:"am","a.m.":"am",:"am"},"please use restriction comment time for ko":{damen:'open "Damen"',herren:'open "Herren"'},"please use ok for typographically correct":{"":"-","":'"',"":'"',"":'"',"":'"',"":'"',"":'"',"":'"',"":'"',"":'"',"":'"',"":'"',"":'"'}},Ne={"unexpected token":'Unexpected token: "{{token}}" This means that the syntax is not valid at that point or it is currently not supported.',"no string":"The value (first parameter) is not a string.",nothing:"The value contains nothing meaningful which can be parsed.","nothing useful":"This rule does not contain anything useful. Please remove this empty rule.","combine rules":'Separate rules detected each of which only consists of a time selector. These rules should be written as one rule by combining them using "{{ok}}".',"value ends with token":'The value ends with "{{token}}". Please either continue after "{{token}}" or remove "{{token}}".',"programmers joke":"Might it be possible that you are a programmer and adding a semicolon after each statement is hardwired in your muscle memory ;) ? The thing is that the semicolon in the opening_hours syntax is defined as rule separator. So for compatibility reasons you should omit this last semicolon.","interpreted as year":'The number {{number}} will be interpreted as year. This is probably not intended. Times can be specified as "12:00".',"rule before fallback empty":"Rule before fallback rule does not contain anything useful","hour min separator":'Please use ":" as hour/minute-separator',"warnings severity":'The parameter optional_conf_parm["warnings_severity"] must be an integer number between 0 and 7 (inclusive). Given {{severity}}, expected one of the following numbers: {{allowed}}.',"optional conf parm type":"The optional_conf_parm parameter is of unknown type. Given {{given}}","conf param tag key missing":'The optional_conf_parm["tag_key"] is missing, required by optional_conf_parm["map_value"].',"conf param mode invalid":'The optional_conf_parm["mode"] parameter is a invalid number. Gave {{given}}, expected one of the following numbers: {{allowed}}.',"conf param unknown type":'The optional_conf_parm["{{key}}"] parameter is of unknown type. Given {{given}}, expected {{expected}}.',"library bug":'An error occurred during evaluation of the value "{{value}}". Please file a bug report or pull request: {{url}}.{{message}}',"library bug PR only":'An error occurred during evaluation of the value "{{value}}". Please submit a pull request: {{url}}.{{message}}',"use multi":'You have used {{count}} {{part2}} Rules can be separated by ";".',"selector multi 2a":"{{what}} in one rule. You may only use one in one rule.","selector multi 2b":'not connected {{what}} in one rule. This is probably an error. Equal selector types can (and should) always be written in conjunction separated by comma. Example for time ranges "12:00-13:00,15:00-18:00". Example for weekdays "Mo-We,Fr".',"selector state":"state keywords",comments:"comments","holiday ranges":"holiday ranges",months:"months",weekdays:"weekdays",ranges:"ranges","default state":"This rule which changes the default state (which is closed) for all following rules is not the first rule. The rule will overwrite all previous rules. It can be legitimate to change the default state to open for example and then only specify for which times the facility is closed.",vague:'This rule is not very explicit because there is no time selector being used. A time selector is the part specifying hours when the object is opened, for example "10:00-19:00". Please add a time selector to this rule or use a comment to make it more explicit.',"empty comment":"You have used an empty comment. Please either write something in the comment or use the keyword unknown instead.",separator_for_readability:"You have used the optional symbol <separator_for_readability> in the wrong place. Please check the syntax specification to see where it could be used or remove it.","strange 24/7":'You used 24/7 in a way that is probably not interpreted as "24 hours 7 days a week". For correctness you might want to use "open" or "closed" for this rule and then write your exceptions which should achieve the same goal and is more clear e.g. "open; Mo 12:00-14:00 off".',"public holiday":'There was no PH (public holiday) specified. This is not very explicit.{{part2}} Please either append a "PH off" rule if the amenity is closed on all public holidays or use something like "Sa,Su,PH 12:00-16:00" to say that on Saturdays, Sundays and on public holidays the amenity is open 12:00-16:00. If the amenity is open everyday including public holidays then you can make this explicit by writing "Mo-Su,PH". If you are not certain try to find it out. If you cant then do not add PH to the value and ignore this warning.',"public holiday part2":' Unfortunately the tag key (e.g. "opening_hours", or "lit") is unknown to opening_hours.js. This warning only applies to the key {{keys}}. If your value is for that key than read on. If not you can ignore the following.',"additional_rule_separator not used after time wrapping midnight":'This rule overwrites parts of the previous rule. This happens because normal rules apply to the whole day and overwrite any definition made by previous rules. You can make this rule an additional rule by using a "," instead of the normal ";" to separate the rules. Note that the overwriting can also be desirable in which case you can ignore this warning.',"additional rule which evaluates to closed":'This rule will be evaluated as closed but it was specified as additional rule. It should be specified as normal rule using ";" as rule separator. See https://wiki.openstreetmap.org/wiki/Key:opening_hours/specification#explain:rule_modifier:closed.',switched:'The selector "{{first}}" was switched with the selector "{{second}}" for readability and compatibility reasons.',"no colon after":'Please dont use ":" after {{token}}.',"number -5 to 5":"Number between -5 and 5 (except 0) expected.","one weekday constraint":"You can not use more than one constrained weekday in a month range","range constrained weekdays":"You can not use a range of constrained weekdays in a month range",expected:'"{{symbol}}" expected.',"range zero":"You can not use {{type}} ranges with period equals zero.","period one year+":'Please dont use {{type}} ranges with period equals one. If you want to express that a facility is open starting from a year without limit use "<year>+".',"period one":"Please dont use {{type}} ranges with period equals one.","month 31":"The day for {{month}} must be between 1 and 31.","month 30":"Month {{month}} doesn't have 31 days. The last day of {{month}} is day 30.","month feb":"Month {{month}} either has 28 or 29 days (leap years).","point in time":"hyphen (-) or open end (+) in time range {{calc}}expected. For working with points in time, the mode for {{libraryname}} has to be altered. Maybe wrong tag?",calculation:"calculation","time range continue":"Time range does not continue as expected","period continue":'Time period does not continue as expected. Example "/01:30".',"time range mode":'{{libraryname}} is running in "time range mode". Found point in time.',"point in time mode":'{{libraryname}} is running in "points in time mode". Found time range.',"outside current day":"Time range starts outside of the current day","two midnights":"Time spanning more than two midnights not supported","without minutes":'Time range without minutes specified. Not very explicit! Please use this syntax instead "{{syntax}}".',"outside day":"Time range starts outside of the current day","zero calculation":'Adding zero in a variable time calculation does not change the variable time. Please omit the calculation (example: "sunrise-(sunset-00:00)").',"calculation syntax":"Calculation with variable time is not in the right syntax",missing:'Missing "{{symbol}}"',"(time)":"(time)","bad range":"Bad range: {{from}}-{{to}}","] or more numbers":'"]" or more numbers expected.',"additional rule no sense":'An additional rule does not make sense here. Just use a ";" as rule separator. See https://wiki.openstreetmap.org/wiki/Key:opening_hours/specification#explain:additional_rule_separator',"unexpected token weekday range":"Unexpected token in weekday range: {{token}}","max differ":"There should be no reason to differ more than {{maxdiffer}} days from a {{name}}. If so tell us ","adding 0":"Adding 0 does not change the date. Please omit this.","unexpected token holiday":"Unexpected token (holiday parser): {{token}}","no holiday definition":"There are no holidays ({{name}}) defined for country {{cc}}.","no holiday definition state":"There are no holidays ({{name}}) defined for country {{cc}} and state {{state}}.","no country code":"Country code missing which is needed to select the correct holidays (see README how to provide it)","no SH definition":"School holiday {{name}}not defined for the year {{year}}.","movable no formula":"Movable day {{name}} can not not be calculated. Please add the formula how to calculate it.","movable not in year":"The movable day {{name}} plus {{days}} days is not in the year of the movable day anymore. Currently not supported.","year range one year":'A year range in which the start year is equal to the end year does not make sense. Please remove the end year. E.g. "{{year}} May 23"',"year range reverse":"A year range in which the start year is greater than the end year does not make sense. Please turn it over.","year past":"The year is in the past.","unexpected token year range":"Unexpected token in year range: {{token}}","week range reverse":"You have specified a week range in reverse order or leaping over a year. This is (currently) not supported.","week negative":"You have specified a week date less then one. A valid week date range is 1-53.","week exceed":"You have specified a week date greater then 53. A valid week date range is 1-53.","week period less than 2":'You have specified a week period which is less than two. If you want to select the whole range from week {{weekfrom}} to week {{weekto}} then just omit the "/{{period}}".',"week period greater than 26":'You have specified a week period which is greater than 26. 26.5 is the half of the maximum 53 week dates per year so a week date period greater than 26 would only apply once per year. Please specify the week selector as "week {{weekfrom}}" if that is what you want to express.',"unexpected token week range":"Unexpected token in week range: {{token}}","unexpected token month range":"Unexpected token in month range: {{token}}","day range reverse":"Range in wrong order. From day is greater than to day.","open end":"Specified as open end. Closing time was guessed.","date parameter needed":"Date parameter needed.","assuming ok for ko":'Assuming "{{ok}}" for "{{ko}}".',"please use ok for ko":'Please use notation "{{ok}}" for "{{ko}}".',"please use ok for similar looking ko":'Please use notation "{{ok}}" for "{{ko}}". Those characters look very similar but are not the same!',"rant degree sign used for zero":"Note that this is not a (superscript) zero but a degree sign which is misused as zero. A superscript zero is defined in Unicode () and would have been more appropriate/uniform here. But note that the use of none-ASCII digits is not allowed.","please use English written ok for ko":'Please use the English written "{{ok}}" for "{{ko}}".',"please use English abbreviation ok for ko":'Please use the English abbreviation "{{ok}}" for "{{ko}}".',"please use English abbreviation ok for so":'Please use the English abbreviation "{{ok}}" for "{{ko}}". Note that it might also mean Saturday in Polish.',"please use off for ko":'Please use "{{ok}}" for "{{ko}}". Example: "Mo-Fr 08:00-12:00; Tu off".',"please use ok for workday":'Assuming "{{ok}}" for "{{ko}}". Please avoid using "workday": https://wiki.openstreetmap.org/wiki/Talk:Key:opening_hours#need_syntax_for_holidays_and_workingdays',"omit hour keyword":'Please omit "{{ko}}" or use a colon instead. Example: "12:00-14:00".',"omit ko":'Please omit "{{ko}}".',"omit tag key":'Please omit "{{ko}}". The tag key must not be in the tag value.',"omit wrong keyword open end":'Please omit "{{ko}}". The tag key must not be in the tag value.',"assuming open end for ko":'Assuming "{{ok}}" (open end time) for "{{ko}}". Example: "12:00+".',"please use ok for uncertainty":'Please use notation "{{ok}}" for "{{ko}}". If there is reason to suspect uncertainty consider adding a comment. Example: 12:00-14:00 "only on sunshine".',"please use fallback rule":'Please use notation "{{ok}}" (Fallback rule) for "{{ko}}". Example: Mo-Fr 12:00-14:00; PH off || "by appointment"',"please use ok for missing data":"Please consider adding a FIXME tag instead.","please use 24 hours time for ko":"Please use time format in 24 hours notation instead of the legacy 12 hours variant. If the 12 hours variant is used you might have to convert the hours to the 24 hours notation.","please use restriction comment time for ko":'It looks like you might want to define additional restrictions. If that is the case and they can not be expressed by other syntax elements then you could use a comment together with the `open` keyword. Example: open "female only"',"please use ok for typographically correct":'Please use notation "{{ok}}" for "{{ko}}". Although using "{{ko}}" is typographical correct, it is not defined in the opening_hours syntax. Correct typography should be done on application level '},Ue={en:{opening_hours:{pretty:{off:"closed",SH:"school holidays",PH:"public holidays"}}},de:{opening_hours:{texts:{"unexpected token":'Unerwartetes Zeichen: "{{token}}" Das bedeutet, dass die Syntax an dieser Stelle nicht erkannt werden konnte.',"no string":"Der Wert (erster Parameter) ist kein String",nothing:"Der Wert enthlt nichts, was ausgewertet werden knnte.","nothing useful":"Diese Regel enthlt nichts ntzliches. Bitte entferne diese leere Regel.","combine rules":'Getrennte Regeln erkannt welche jeweils nur aus einer Zeit Bereichsdefinition bestehen. Diese Regeln sollten mittels "{{ok}}" zu einer Regel kombiniert werden.',"value ends with token":'Der Wert endet mit "{{token}}". Bitte ergnze den Wert nach "{{token}}" oder lsche "{{token}}".',"programmers joke":"Kann es sein, dass du ein Programmierer bist und das Hinzufgen eines Semikolons nach jedem Statement ist zwanghaft ;) ? Es ist so, dass das Semikolon in der opening_hours-Syntax als Trenner fr Regeln definiert ist. Bitte verzichte an dieser Stelle auf ein Semikolon.","interpreted as year":'Die Zahl {{number}} wird als Jahr interpretiert. Vermutlich ist das nicht beabsichtigt. Uhrzeiten werden als "12:00" angegeben.',"rule before fallback empty":"Die Regel vor der Fallback-Regel enthlt nichts ntzliches","hour min separator":'Bitte benutze ":" als Stunden/Minuten-Trenner',"warnings severity":'Der Parameter optional_conf_parm["warnings_severity"] muss eine ganze Zahl zwischen (einschlielich) 0 und (einschlielich) 7 sein. Gegeben: {{severity}}, erwartet: Eine der Zahlen: {{allowed}}.',"optional conf parm type":"Der optional_conf_parm Parameter hat einen unbekannten Typ. Gegeben: {{given}}","conf param tag key missing":'Der optional_conf_parm["tag_key"] fehlt, ist aber notwendig wegen optional_conf_parm["map_value"].',"conf param mode invalid":'Der optional_conf_parm["mode"]-Parameter ist eine ungltige Zahl. Gegeben: {{given}}, erwartet: Eine der Zahlen: {{allowed}}.',"conf param unknown type":'Der optional_conf_parm["{{key}}"] Parameter hat einen unbekannten Typ. Gegeben: {{given}}, erwartet: {{expected}}.',"library bug":'Bei der Auswertung des Wertes "{{value}}" ist ein Fehler aufgetreten. Bitte melde diesen Fehler oder korrigiere diesen mittels eines Pull Requests oder Patches: {{-url}}.{{message}}',"library bug PR only":'Bei der Auswertung des Wertes "{{value}}" ist ein Fehler aufgetreten. Du kannst dies korrigieren, indem du das Problem lst und in Form eines Pull Requests oder Patches zum Projekt beitrgst: {{-url}}.{{message}}',"use multi":'Du hast {{count}} {{-part2}} Einzelne Regeln knnen mit ";" getrennt werden.',"selector multi 2a":"{{what}} in einer Regel benutzt. Du kannst nur einen davon je Regel verwenden","selector multi 2b":'nicht verbundene {{what}} in einer Regel benutzt. Das ist vermutlich ein Fehler. Gleiche Selektoren knnen (und sollten) immer zusammen und durch Kommas getrennt geschrieben werden. Beispiel fr Zeitspannen "12:00-13:00,15:00-18:00". Beispiel fr Wochentage "Mo-We,Fr".',"selector state":"Status-Schlsselwrter (offen, geschlossen)",comments:"Kommentare",months:"Monate",weekdays:"Wochentage",ranges:"Zeitspannen","default state":"Diese Regel, welche den Standard-Status (d.h. geschlossen) fr alle folgenden Regeln ndert, ist nicht die erste Regel. Diese Regel berschreibt alle vorherigen Regeln. Es kann legitim sein, den Standard-Status z.B. auf geffnet festzulegen und dann nur die Zeiten, zu denen geschlossen ist, anzugeben.",vague:'Diese Regel ist nicht sehr aussagekrftig, da kein Zeit Selektor angegeben wurde. Ein Zeit Selektor ist die Komponente die angibt, zu welcher Tageszeit ein Objekt geffnet hat, zum Beispiel "10:00-19:00". Bitte fge eine Zeitangabe oder einen Kommentar hinzu, um dies zu verbessern.',"empty comment":'Du hast einen leeren Kommentar verwendet." Bitte schreibe entweder einen Kommentar-Text oder benutze stattdessen das Schlsselwort "unknown".',separator_for_readability:"Du hast das optionale Symbol <separator_for_readability> an der falschen Stelle benutzt. Bitte lies die Syntax-Spezifikation um zu sehen, wo es verwendet werden kann, oder entferne es.","strange 24/7":'Du hast 24/7 in einer Art verwendet, welche wahrscheinlich nicht als "24 Stunden, 7 Tage die Woche" interpretiert wird. Der Richtigkeit halber solltest du "open" oder "closed" fr diese Regel verwenden und dann die Ausnahmen angeben um das selbe Ziel zu erreichen. So ist es klarer  zum Beispiel "open; Mo 12:00-14:00 off".',"public holiday":'Es wurde keine Regel fr "PH" (feiertags) angegeben. Dies ist nicht sehr aussagekrftig.{{-part2}} Bitte fge die Regel "PH off" an, wenn die Einrichtung an allen Feiertagen geschlossen ist oder schreibe "Sa,Su,PH 12:00-16:00" um auszudrcken, dass Samstags, Sonntags und feiertags von 12:00-16:00 geffnet ist. Falls die Einrichtung tglich und an Feiertagen geffnet ist, kann dies explizit mittels "Mo-Su,PH" ausgedrckt werden. Wenn du dir im Unklaren bist, versuche die ffnungszeit zu klren. Falls das nicht mglich ist, lass die Angabe weg und ignoriere diese Warnung.',"public holiday part2":' Leider ist der "tag key" (beispielsweise "opening_hours", oder "lit") in opening_hours.js nicht bekannt. Diese Warnung betrifft nur die Keys: {{keys}}. Falls deine Angabe nicht fr einen dieser ist, ignoriere bitte folgenden Hinweis:',"additional_rule_separator not used after time wrapping midnight":'Diese Regel berschreibt Teile der vorherigen Regel. Der Grund dafr ist, dass normale Regeln auf den ganzen Tag zutreffen und alle Definitionen von vorhergehenden Regeln fr diesen Tag berschreiben. Du kannst diese Regel als additive Regel deklarieren indem du ein "," anstelle des blichen ";" fr diese Regel verwendest. Beachte das die berschreibung auch gewnscht sein kann und in so einem Fall diese Warnung ignoriert werden kann.',"additional rule which evaluates to closed":'Diese Regel wird als geschlossen ausgewertet aber wurde als additive Regel angegeben. Sie sollte als normale Regel mittels ";" definiert sein. Siehe https://wiki.openstreetmap.org/wiki/DE:Key:opening_hours/specification#explain:rule_modifier:closed.',switched:'Der Selektor "{{first}}" wurde fr eine bessere Lesbarkeit und der Vollstndigkeit halber mit "{{second}}" getauscht.',"no colon after":'Bitte Benutze kein ":" nach dem Token {{token}}.',"number -5 to 5":"Zahl zwischen -5 und 5 (auer 0) erwartet.","one weekday constraint":"Du kannst hchstens einen beschrnkten Wochentag in einer Monats-Spanne verwenden","range constrained weekdays":"Du kannst keine Wochentags-Spanne als Beschrnkung in einer Monats-Spanne verwenden",expected:'"{{-symbol}}" erwartet.',"range zero":'Du kannst keine {{type}}-Spanne mit Periode "0" verwenden.',"period one year+":'Bitte verwende keine {{type}}-Spannen mit Periode "1". Wenn du ausdrcken willst, das eine Einrichtung ab einem bestimmten Jahr immer offen ist, benutze bitte "<year>+".',"period one":'Bitte verwende keine {{type}}-Spannen mit Periode "1".',"month 31":"Die Tagesangabe fr {{month}} muss zwischen 1 und 31 liegen.","month 30":"Der Monat {{month}} hat keine 31 Tage. Der letzte Tag von {{month}} ist Tag 30.","month feb":'"Der Monat {{month}} hat entweder 28 oder 29 Tage (Schaltjahre)."',"point in time":"Erwarte Bindestrich (-) oder offenes Ende (+) in der Zeitspanne {{calc}}. Um mit Zeitpunkten zu arbeiten, muss der Modus fr  {{libraryname}} umgestellt werden. Vielleicht falsches OSM-tag verwendet?",calculation:"Berechnung","time range continue":"Die Zeitspanne geht nicht wie erwartet weiter","period continue":'Die Zeitspannen-Periode geht nicht wie erwartet weiter. Beispiel "/01:30".',"time range mode":'{{libraryname}} wurde im "Zeitspannen-Modus" aufgerufen. Zeitpunkt gefunden.',"time ranges":"Zeitspannen","holiday ranges":"Feiertagen","point in time mode":'{{libraryname}} wurde im "Zeitpunkt-Modus" aufgerufen. Zeitspanne gefunden.',"outside current day":"Zeitspanne beginnt auerhalb des aktuellen Tages","two midnights":"Zeitspanne welche mehrmals Mitternacht beinhaltet wird nicht untersttzt","without minutes":'Zeitspanne ohne Minutenangabe angegeben. Das ist nicht sehr eindeutig! Bitte verwende stattdessen folgende Syntax "{{syntax}}".',"outside day":"Die Zeitspanne beginnt auerhalb des aktuellen Tages","zero calculation":'Das Hinzufgen von 0 in einer variablen Zeitberechnung ndert die variable Zeit nicht. Bitte entferne die Zeitberechnung (Beispiel: "sunrise-(sunset-00:00)").',"calculation syntax":"Berechnung mit variabler Zeit hat nicht die korrekte Syntax",missing:'Fehlendes "{{symbol}}"',"(time)":"(Zeit)","bad range":"Ungltige Zeitspanne: {{from}}-{{to}}","] or more numbers":'"]" oder weitere Zahlen erwartet.',"additional rule no sense":'Eine weitere Regel an dieser Stelle ergibt keinen Sinn. Benutze einfach ";" als Trenner fr Regeln. Siehe https://wiki.openstreetmap.org/wiki/Key:opening_hours/specification#explain:additional_rule_separator',"unexpected token weekday range":"Unerwartes Token in Tages-Spanne: {{token}}","max differ":"Es sollte keinen Grund geben, mehr als {{maxdiffer}} Tage von einem {{name}} abzuweichen. Wenn ntig, teile uns dies bitte mit ","adding 0":"Addition von 0 verndert das Datum nicht. Bitte weglassen.","unexpected token holiday":"Unerwarteter Token (in Feiertags-Auswertung): {{token}}","no holiday definition":"{{name}} ist fr das Land {{cc}} nicht definiert.","no holiday definition state":"{{name}} ist fr das Land {{cc}} und Bundesland {{state}} nicht definiert.","no country code":"Der Lndercode fehlt. Dieser wird bentigt um die korrekten Feiertage zu bestimmen (siehe in der README wie dieser anzugeben ist)","no SH definition":"Die Schulferien {{name}}sind fr das Jahr {{year}} nicht definiert","movable no formula":"Der bewegliche Feiertag {{name}} kann nicht berechnet werden. Bitte fge eine entsprechende Formel hinzu.","movable not in year":"Der bewegliche Feiertag {{name}} plus {{days}} Tage befindet sich nicht mehr im selben Jahr. Aktuell nicht untersttzt.","year range one year":'Eine Jahres-Spanne mit gleichem Jahr als Beginn und Ende ergibt keinen Sinn. Bitte entferne das Ende-Jahr. zum Beispiel: "{{year}} May 23"',"year range reverse":"Eine Jahres-Spanne mit Beginn grer als Ende ergibt keinen Sinn. Bitte umdrehen.","year past":"Das Jahr liegt in der Vergangenheit.","unexpected token year range":"Unerwartetes Token in der Jahres-Spanne: {{token}}","week range reverse":"Du hast eine Wochen-Spanne in umgekehrter Reihenfolge oder mehrere Jahre umfassende angegeben. Dies ist aktuell nicht untersttzt.","week negative":"Du hast eine Kalenderwoche kleiner 1 angegeben. Korrekte Angaben sind 1-53.","week exceed":"Du hast eine Kalenderwoche grer als 53 angegeben. Korrekte Angaben sind 1-53.","week period less than 2":'Du hast eine Wochenperiode kleiner 2 angegeben. Wenn du die gesamte Spanne von {{weekfrom}} bis {{weekto}} angeben willst, lasse "/{{period}}" einfach weg.',"week period greater than 26":'Du hast eine Wochen-Periode grer als 26 angegeben. 26,5 ist die Hlfte des Maximums von 53 Wochen pro Jahr. Damit wrde eine Periode grer als 26 nur einmal pro Jahr auftreten. Bitte gibt den Wochen-Selektor als "week {{weekfrom}}" an, wenn es das ist, was du ausdrcken mchtest.',"unexpected token week range":"Unerwartetes Token in Wochen-Spanne: {{token}}","unexpected token month range":"Unerwartetes Token in Monats-Spanne: {{token}}","day range reverse":"Zeitspanne in falscher Reihenfolge. Beginn ist grer als Ende.","open end":'Angegeben als "open end". Schliezeit wurde geraten.',"date parameter needed":"Datumsparameter ntig.","assuming ok for ko":'"{{ko}}" wird als "{{ok}}" interpretiert.',"please use ok for ko":'Bitte verwende "{{-ok}}" anstelle von "{{-ko}}".',"please use ok for similar looking ko":'Please use notation "{{ok}}" for "{{ko}}". Those characters look very similar but are not the same!',"rant degree sign used for zero":"Beachte das dies ein Gradzeichen ist, welches als (hochgestellte) Null missbraucht wurde. Eine hochgestellte Null ist in Unicode definiert () und wre angebrachter/einheitlicher an dieser Stelle. Allerdings ist die Verwendung von nicht ASCII Ziffern nicht erlaubt.","please use English written ok for ko":'Bitte benutze die englische Schreibweise "{{ok}}" fr "{{ko}}".',"please use English abbreviation ok for ko":'Bitte benutze die englische Abkrzung "{{ok}}" fr "{{ko}}".',"please use English abbreviation ok for so":'Bitte benutze die englische Abkrzung "{{ok}}" fr "{{ko}}". Beachte das Samstag in Polnisch gemeint sein kann.',"please use off for ko":'Bitte benutze "{{ok}}" fr "{{ko}}". Beispiel: "Mo-Fr 08:00-12:00; Tu off".',"please use ok for workday":'"{{ko}}" wird als "{{ok}}" interpretiert. Werktag sollte nicht verwendet werden. Siehe https://wiki.openstreetmap.org/wiki/Talk:Key:opening_hours#need_syntax_for_holidays_and_workingdays',"omit hour keyword":'Bitte lasse "{{ko}}" weg oder verwende einen Doppelpunkt. Beispiel: "12:00-14:00".',"omit ko":'Bitte verzichte auf "{{ko}}".',"omit tag key":'Bitte lasse "{{ko}}" weg. Der Tag Schlssel darf nicht im Tag Wert sein.',"omit wrong keyword open end":'Bitte lasse "{{ko}}" weg. Falls du "open end" ausdrcken mchtest verwende bitte ein "+". Beispiel: "12:00+".',"assuming open end for ko":'"{{ko}}" wird als "{{ok}}" ("open end") interpretiert. Example: "12:00+".',"please use ok for uncertainty":'Bitte verwende "{{ok}}" fr "{{ko}}". Falls der begrndete Verdacht der Ungewissheit vorliegt ziehe die Verwendung eines Kommentars in Betracht. Beispiel: 12:00-14:00 "only on sunshine".',"please use fallback rule":'Bitte verwende "{{ok}}" (Fallback Regel) fr "{{ko}}". Beispiel: Mo-Fr 12:00-14:00; PH off || "nach Vereinbarung"',"please use ok for missing data":"Bitte verwende eine FIXME Notiz.","please use 24 hours time for ko":"Bitte verwende 24 Stunden Zeitangaben anstelle der veralteten 12 Stunden Variante. Falls die 12 Stunden Variante verwendet wird ist eventuelle eine Konvertierung notwendig.","please use restriction comment time for ko":'Es sieht so aus also mchtest du zustzliche Einschrnkungen fr eine ffnungszeit geben. Falls sich dies nicht mit der Syntax ausdrcken lsst knnen Kommentare verwendet werden. Zustzlich sollte eventuell das Schlsselwort `open` benutzt werden. Beispiel: open "Nur Frauen".',"please use ok for typographically correct":'Bitte verwende "{{-ok}}" fr "{{ko}}". Auch wenn "{{ko}}" typografisch korrekt ist, ist dies in der opening_hours Syntax nicht definiert. Korrekte Typographie sollte auf Anwendungsebene sichergestellt werden '},pretty:{off:"geschlossen",SH:"Schulferien",PH:"Feiertags"}}},eo:{opening_hours:{texts:{"assuming ok for ko":'"{{ko}}" estas interpretita kiel "{{ok}}".',"please use ok for ko":'Bonvolu uzi la esprimon "{{-ok}}" anstata "{{ko}}".',"please use English abbreviation ok for ko":'Bonvolu uzi la anglan mallongigon "{{ok}}" fr "{{ko}}".'},pretty:{off:"fermita",SH:"lernejaj ferioj",PH:"festotagoj"}}},fi:{opening_hours:{pretty:{off:"suljettu",SH:"koululomat",PH:"lailliset vapaapivt"}}},fr:{opening_hours:{texts:{"assuming ok for ko":`S'il vous plat utiliser "<ok>" pour "<ko>".`,"please use ok for ko":`S'il vous plat utiliser "{{-ok}}" pour "{{ko}}".`,"please use English abbreviation ok for ko":`S'il vous plat utiliser l'abrviation "{{-ok}}" pour "{{ko}}".`},pretty:{off:"ferm",SH:"vacances scolaires",PH:"vacances publiques"}}},nl:{opening_hours:{texts:{"please use English abbreviation ok for ko":'Neem de engelse afkorting "{{ok}}" voor "{{ko}}" alstublieft.'},pretty:{off:"gesloten",SH:"schoolvakantie",PH:"feestdagen"}}},ru:{opening_hours:{pretty:{off:"",SH:"",PH:""}}}};if(Ue.en,Ue.de,Ue.eo,Ue.fi,Ue.fr,Ue.nl,Ue.ru,!g.default.isInitialized)g.default.init({fallbackLng:"en",resources:Ue,getAsync:!0,useCookie:!0});else for(var Ze in Ue)g.default.addResourceBundle(Ze,"opening_hours",Ue[Ze].opening_hours,!0);function bt(it,ut,ft){var He={dawn:330,sunrise:360,sunset:1080,dusk:1110},Mt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wn=["Su","Mo","Tu","We","Th","Fr","Sa"],Ct={su:[0,"weekday"],mo:[1,"weekday"],tu:[2,"weekday"],we:[3,"weekday"],th:[4,"weekday"],fr:[5,"weekday"],sa:[6,"weekday"],jan:[0,"month"],feb:[1,"month"],mar:[2,"month"],apr:[3,"month"],may:[4,"month"],jun:[5,"month"],jul:[6,"month"],aug:[7,"month"],sep:[8,"month"],oct:[9,"month"],nov:[10,"month"],dec:[11,"month"],day:["day","calcday"],days:["days","calcday"],sunrise:["sunrise","timevar"],sunset:["sunset","timevar"],dawn:["dawn","timevar"],dusk:["dusk","timevar"],easter:["easter","event"],week:["week","week"],open:["open","state"],closed:["closed","state"],off:["off","state"],unknown:["unknown","state"]},_e={zero_pad_hour:!0,one_zero_if_hour_zero:!1,leave_off_closed:!0,keyword_for_off_closed:"off",rule_sep_string:" ",print_semicolon:!0,leave_weekday_sep_one_day_betw:!0,sep_one_day_between:",",zero_pad_month_and_week_numbers:!0,locale:"en"},Y={opening_hours:{mode:0,warn_for_PH_missing:!0},collection_times:{mode:2},"opening_hours:.+":{mode:0},".+:opening_hours":{mode:0},".+:opening_hours:.+":{mode:0},smoking_hours:{mode:0},service_times:{mode:2},happy_hours:{mode:0},lit:{mode:0,map:{yes:'sunset-sunrise open "specified as yes: At night (unknown time schedule or daylight detection)"',automatic:'unknown "specified as automatic: When someone enters the way the lights are turned on."',no:'off "specified as no: There are no lights installed."',interval:'unknown "specified as interval"',limited:'unknown "specified as limited"'}}},X=60*24,we=1e3*60*X,Me="opening_hours.js",qe="https://github.com/opening-hours/"+Me,je="en";typeof g.default=="object"&&(je=g.default.language);var We=function(z,ie){if(typeof g.default=="object"&&typeof g.default.t=="function"&&typeof je=="string"&&["de"].indexOf(je)!==-1){var Se;g.default.language!==je?Se=g.default.getFixedT(je):Se=g.default.t;var Ae=Se("opening_hours:texts."+z,ie);return Ae}var Ae=Ne[z];return typeof Ae>"u"&&(Ae=z),Ae.replace(/{{([^{}]*)}}/g,function(xe,Ge){return typeof ie[Ge]<"u"?ie[Ge]:xe})},pt,Gt,rn,St;if(typeof ut=="object"&&ut!==null)typeof ut.address=="object"&&(typeof ut.address.country_code=="string"&&(pt=ut.address.country_code),typeof ut.address.state=="string"?Gt=ut.address.state:typeof ut.address.county=="string"&&(Gt=ut.address.county)),typeof ut.lon=="string"&&typeof ut.lat=="string"&&(rn=ut.lat,St=ut.lon);else if(ut===null)pt="de",Gt="Baden-Wrttemberg",rn="49.5400039",St="9.7937133";else if(typeof ut<"u")throw"The nominatim_object parameter is of unknown type. Given "+typeof ut+", expected object.";var gn=4,Xe,En=!1,yn,Yt;if(typeof ft=="number")Xe=ft;else if(typeof ft=="object"){if(typeof ft.locale=="string"&&(je=ft.locale.split("-")[0]),he("mode","number")&&(Xe=ft.mode),he("warnings_severity","number")&&(gn=ft.warnings_severity,[0,1,2,3,4,5,6,7].indexOf(gn)===-1))throw We("warnings severity",{severity:gn,allowed:"[ 0, 1, 2, 3, 4, 5, 6, 7 ]"});he("tag_key","string")&&(yn=ft.tag_key),he("map_value","boolean")&&(En=ft.map_value)}else if(typeof ft<"u")throw We("optional conf parm type",{given:typeof ft});if(typeof yn=="string")Yt=pe(yn),En&&typeof Y[Yt]=="object"&&typeof Y[Yt].map=="object"&&typeof Y[Yt].map[it]=="string"&&(it=Y[Yt].map[it]);else if(En)throw We("conf param tag key missing");if(typeof Xe>"u")typeof yn=="string"&&Y[Yt]!==void 0&&typeof Y[Yt].mode=="number"?Xe=Y[Yt].mode:Xe=0;else if([0,1,2].indexOf(Xe)===-1)throw We("conf param mode invalid",{given:Xe,allowed:"[ 0, 1, 2 ]"});if(typeof it!="string")throw We("no string");if(/^(?:\s*;?)+$/.test(it))throw We("nothing");for(var Pt=[],an=!1,Dr=!1,Gn=!1,Cn=me(it),Jr="",Pn=!0,jt=[],zn={},Et=[],lt=0;lt<Cn.length;lt++){if(Cn[lt][0].length===0){Pt.push([lt,-1,We("nothing useful")+(lt===Cn.length-1&&lt>0&&!Cn[lt][1]?" "+We("programmers joke"):"")]);continue}var Wt=0,Nn=!1;do{if(Wt===Cn[lt][0].length)break;var Lt={time:[],wraptime:[],weekday:[],holiday:[],week:[],month:[],monthday:[],year:[],date:[],fallback:Cn[lt][1],additional:!!Wt,meaning:!0,unknown:!1,comment:void 0,build_from_token_rule:void 0};Lt.build_from_token_rule=[lt,Wt,Et.length],Wt=cn(Cn[lt][0],Wt,Lt,lt),typeof Wt=="object"?Wt=Wt[0]:Wt=0,Et.push([Cn[lt][0].slice(Lt.build_from_token_rule[1],Wt===0?Cn[lt][0].length:Wt),Cn[lt][1],Cn[lt][2]]),Nn&&Et.length>1&&Et[Et.length-1][0].unshift(Et[Et.length-2][0].pop()),Nn=Wt!==0;var or=["year","holiday","month","monthday","week","weekday"];if(or.forEach(function(z){Lt[z].length>0&&(Lt.date.push(Lt[z]),Lt[z]=[])}),jt.push(Lt),Lt.wraptime.length>0){for(var Kt={time:Lt.wraptime,date:[],meaning:Lt.meaning,unknown:Lt.unknown,comment:Lt.comment,wrapped:!0,build_from_token_rule:Lt.build_from_token_rule},Ee=0;Ee<Lt.date.length;Ee++){Kt.date.push([]);for(var be=0;be<Lt.date[Ee].length;be++)Kt.date[Kt.date.length-1].push(xt(Lt.date[Ee][be],-we))}jt.push(Kt)}}while(Wt)}function pe(z){var ie,Se=!1;return Object.keys(Y).forEach(function(Ae){Se!==!0&&(z===Ae?(ie=Ae,Se=!0):new RegExp(Ae).test(z)&&(ie=Ae))}),ie}function he(z,ie){if(typeof ft[z]===ie)return!0;if(typeof ft[z]<"u")throw We("conf param unknown type",{key:z,given:typeof ft[z],expected:ie});return!1}function ae(z,ie,Se,Ae){if(typeof Ae>"u"&&(Ae=Cn),typeof z=="number"){var xe=0;return z===-1?xe=it.length-ie:typeof Ae[z][0][ie]>"u"?typeof Ae[z][0]&&ie===-1?(xe=it.length,typeof Ae[z+1]=="object"&&typeof Ae[z+1][2]=="number"?xe-=Ae[z+1][2]:typeof Ae[z][2]=="number"&&(xe-=Ae[z][2])):(de("Bug in warning generation code which could not determine the exact position of the warning or error in value."),xe=it.length,typeof Ae[z][2]=="number"&&(xe-=Ae[z][2],console.warn("Last token for rule: "+JSON.stringify(Ae[z])),console.log(it.substring(0,xe)+" <--- ("+Se+")"),console.log(`
`)),console.warn("tokens_to_use[nrule][2] is undefined. This is ok if nrule is the last rule.")):(xe=it.length,typeof Ae[z][0][ie+1]=="object"?xe-=Ae[z][0][ie+1][2]:typeof Ae[z][2]=="number"&&(xe-=Ae[z][2])),it.substring(0,xe)+" <--- ("+Se+")"}else if(typeof z=="string")return z.substring(0,ie)+" <--- ("+Se+")"}function de(z,ie){return typeof z>"u"?z="":z=" "+z,typeof ie!="string"&&(ie="library bug"),z=We(ie,{value:it,url:qe,message:z}),console.error(z),z}function me(z){for(var ie=[],Se=[],Ae=!1;z!=="";){var xe=z.match(/^([a-z]{2,})\b((?:[.]| before| after)?)/i),Ge=void 0;if(xe&&xe[2]===""&&(Ge=Ct[xe[1].toLowerCase()]),typeof Ge=="object")Se.push(Ge.concat([z.length])),z=z.substr(xe[1].length);else if(xe=z.match(/^\s+/))z=z.substr(xe[0].length);else if(xe=z.match(/^24\/7/))Se.push([xe[0],xe[0],z.length]),z=z.substr(xe[0].length);else if(/^;/.test(z))ie.push([Se,Ae,z.length]),z=z.substr(1),Se=[],Ae=!1;else if(/^[:.]/.test(z))z[0]==="."&&!an&&Pt.push([-1,z.length-1,We("hour min separator")]),Se.push([":","timesep",z.length]),z=z.substr(1);else if(xe=z.match(/^(?:PH|SH)/i))Se.push([xe[0].toUpperCase(),"holiday",z.length]),z=z.substr(2);else if(xe=z.match(/^[\u2070-\u209F\u00B2\u00B3\u00B9]{1,2}/)){var Ce={176:0,8304:0,185:1,178:2,179:3},Qe=xe[0].split("").map(function(tt){var _t=tt.charCodeAt(0);if(typeof Ce[_t]=="number")return Ce[_t];if(8308<=_t&&_t<=8313)return _t-8304;if(8320<=_t&&_t<=8329)return _t-8320}).join(""),ht="";if(Se.length>0&&Te(Se,Se.length-1,"number")&&(ht+=":"),ht+=Qe,!an){for(var yt=0;yt<=xe[0].length;yt++)z.charCodeAt(yt)===176&&Pt.push([-1,z.length-(1+yt),We("rant degree sign used for zero")]);Pt.push([-1,z.length-xe[0].length,We("please use ok for ko",{ko:xe[0],ok:ht})])}z=ht+z.substr(xe[0].length)}else if(xe=z.match(/^(&|_||||||=||ffnungszeit(?:en)?:?|opening_hours\s*=|\?|~|||always (?:open|closed)|24x7|24 hours 7 days a week|24 hours|7 ?days(?:(?: a |\/)week)?|7j?\/7|all days?|every day|(?:bis|till?|-|)? ?(?:open ?end|late)|(?:(?:one )?day (?:before|after) )?(?:school|public) holidays?|days?\b||||jours fris|on work days?|sonntags?|(?:nur |an )?sonn-?(?:(?: und |\/)feiertag(?:s|en?)?)?|(?:an )?feiertag(?:s|en?)?|(?:nach|on|by) (?:appointments?|vereinbarung|absprache)|p\.m\.|a\.m\.|[_a-z]+\b|||mo|tu|we|th|fr|sa|su|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)(\.?)/i)){var ot=Be(xe[1].toLowerCase(),z.length);if(typeof ot=="object")Se.push([ot[0],ot[1],z.length]),z=z.substr(xe[0].length);else if(typeof ot=="string"){if(ot==="am"||ot==="pm"){var wt=Se.length-1,qt;wt>=0&&(wt-2>=0&&Te(Se,wt-2,"number","timesep","number")?(wt-=2,qt=Se[wt]):Te(Se,wt,"number")&&(qt=Se[wt]),typeof qt=="object"&&(ot==="pm"&&qt[0]<12&&(qt[0]+=12),ot==="am"&&qt[0]===12&&(qt[0]=0),Se[wt]=qt)),ot=""}var Tt=me(ot)[0];if(Tt[1]===!0)throw de();for(var yt=0;yt<Tt[0].length;yt++)Se.push([Tt[0][yt][0],Tt[0][yt][1],z.length]);z=z.substr(xe[0].length)}else Se.push([z[0].toLowerCase(),z[0].toLowerCase(),z.length-1]),z=z.substr(1);typeof xe[2]=="string"&&xe[2]!==""&&!an&&Pt.push([-1,z.length,We("omit ko",{ko:xe[2]})])}else if(xe=z.match(/^(\d+)(?:([.])([^\d]))?/))Number(xe[1])>1900?(Se.push([Number(xe[1]),"year",z.length]),Number(xe[1])>=2100&&Pt.push([-1,z.length-1,We("interpreted as year",{number:Number(xe[1])})])):Se.push([Number(xe[1]),"number",z.length]),z=z.substr(xe[1].length+(typeof xe[2]=="string"?xe[2].length:0)),typeof xe[2]=="string"&&xe[2]!==""&&!an&&Pt.push([-1,z.length,We("omit ko",{ko:xe[2]})]);else if(/^\|\|/.test(z)){if(Se.length===0)throw ae(-1,z.length-2,We("rule before fallback empty"));ie.push([Se,Ae,z.length]),Se=[],z=z.substr(2),Ae=!0}else if(xe=z.match(/^"([^"]+)"/))Se.push([xe[1],"comment",z.length]),z=z.substr(xe[0].length);else if(xe=z.match(/^(["'])([^"';|]*)(["'])/)){for(var vt=1;vt<=3;vt+=2){var ot=Be(xe[vt],z.length-(vt===3?xe[1].length+xe[2].length:0));if(typeof ot!="string"&&xe[vt]!=='"')throw de("A character for error tolerance was allowed in the regular expression but is not covered by word_error_correction which is needed to format a proper message for the user.")}Se.push([xe[2],"comment",z.length]),z=z.substr(xe[0].length)}else/^(?:|\s)/.test(z)||Se.push([z[0].toLowerCase(),z[0].toLowerCase(),z.length]),z=z.substr(1)}return ie.push([Se,Ae]),ie}function Be(z,ie){var Se,Ae=Ct[z];return typeof Ae=="object"?Ae:(Object.keys(Oe).forEach(function(xe){Se||Object.keys(Oe[xe]).forEach(function(Ge){if(!Se&&new RegExp("^"+Ge+"$").test(z)){var Ce=Oe[xe][Ge];an||Pt.push([-1,ie-z.length,We(xe,{ko:z,ok:Ce})]),Se=Ce}})}),Se)}function Fe(z){if(gn<4)return[];if(!an&&typeof z=="object"){for(var ie=["year","month","week","holiday"],Se=["weekday","time","24/7","state","comment"],Ae=[],xe=[],Ge={},Ce=0;Ce<Et.length;Ce++)if(Et[Ce][0].length!==0){var Qe=[0,0,void 0];Ae[Ce]={},xe[Ce]=[];do{Qe=dt(Et[Ce][0],Qe[1]);for(var ht=0;ht<=Qe[1];ht++)typeof Et[Ce][0][ht]=="object"&&Et[Ce][0][ht][0]==="PH"&&(Ge.PH=!0);Qe[0]===Qe[1]&&Et[Ce][0][Qe[0]][0]==="24/7"&&(Ge["24/7"]=!0),typeof Ae[Ce][Qe[2]]!="object"?Ae[Ce][Qe[2]]=[Qe[1]]:Ae[Ce][Qe[2]].push(Qe[1]),xe[Ce].push(Qe[2]),Qe[1]++}while(Qe[1]<Et[Ce][0].length)}for(var Ce=0;Ce<Ae.length;Ce++){Object.keys(Ae[Ce]).forEach(function(nt){Ae[Ce][nt].length>1&&(Pt.push([Ce,Ae[Ce][nt][Ae[Ce][nt].length-1],We("use multi",{count:Ae[Ce][nt].length,part2:/^(?:comment|state)/.test(nt)?We("selector multi 2a",{what:We(nt==="state"?"selector state":"comments")}):We("selector multi 2b",{what:We(nt+(/^(?:month|weekday)$/.test(nt)?"s":" ranges"))})})]),Dr=!0)}),typeof Ae[Ce].state=="object"&&Object.keys(Ae[Ce]).length===1?Ce!==0&&Pt.push([Ce,Et[Ce][0].length-1,We("default state")]):typeof Ae[Ce].time>"u"&&(typeof Ae[Ce].state=="object"&&Et[Ce][0][Ae[Ce].state[0]][0]==="open"&&typeof Ae[Ce].comment>"u"||typeof Ae[Ce].comment>"u"&&typeof Ae[Ce].state>"u"&&typeof Ae[Ce]["24/7"]>"u")&&Pt.push([Ce,Et[Ce][0].length-1,We("vague")]),typeof Ae[Ce].comment=="object"&&Et[Ce][0][Ae[Ce].comment[0]][0].length===0&&Pt.push([Ce,Ae[Ce].comment[0],We("empty comment")]);for(var yt=0;yt<xe[Ce].length-1;yt++){var ot=xe[Ce][yt],wt=xe[Ce][yt+1];(ie.indexOf(ot)!==-1&&ie.indexOf(wt)!==-1||Se.indexOf(ot)!==-1&&Se.indexOf(wt)!==-1)&&Et[Ce][0][Ae[Ce][ot][0]][0]===":"&&Pt.push([Ce,Ae[Ce][ot][0],We("separator_for_readability")])}if(typeof zn[Ce]=="object"&&typeof zn[Ce].time_wraps_over_midnight=="boolean"&&zn[Ce].time_wraps_over_midnight===!0&&typeof Ae[Ce+1]=="object"&&typeof Ae[Ce+1]["rule separator"]>"u"&&Et[Ce+1][1]===!1){var qt=[Ce,Ce+1].map(function(nt){for(var gt=0;gt<ie.length-1;gt++)if(typeof Ae[nt][ie[gt]]=="object")return!0;return!1}),Tt=qt.filter(function(nt){return nt}).length,vt=!1;if(typeof zn[Ce]=="object"&&typeof zn[Ce]=="object"&&typeof zn[Ce].week_days=="object"&&typeof zn[Ce+1]=="object"&&typeof zn[Ce+1].week_days=="object")for(var yt=0;yt<zn[Ce].week_days.length;yt++){var tt=zn[Ce].week_days[yt];if(zn[Ce+1].week_days.indexOf(tt===6?0:tt+1)!==-1){vt=!0;break}}else vt=!0;var _t=(ft||{}).additional_rule_separator!==!1;Tt<2&&vt&&_t&&Pt.push([Ce+1,Et[Ce+1][0].length-1,We("additional_rule_separator not used after time wrapping midnight"),Et])}typeof Et[Ce][0][0]=="object"&&Et[Ce][0][0][0]===","&&Et[Ce][0][0][1]==="rule separator"&&typeof Ae[Ce].state=="object"&&(Et[Ce][0][Ae[Ce].state[0]][0]==="closed"||Et[Ce][0][Ae[Ce].state[0]][0]==="off")&&Pt.push([Ce,Et[Ce][0].length-1,We("additional rule which evaluates to closed"),Et])}var Jt=z.advance();if(Jt===!0&&Ge["24/7"]&&!an&&Pt.push([-1,0,We("strange 24/7")]),gn>=5&&!Ge.PH&&!Ge["24/7"]&&!an&&(typeof yn=="string"&&Y[Yt].warn_for_PH_missing||typeof yn!="string")){var Vt=[];Object.keys(Y).forEach(function(It){Y[It].warn_for_PH_missing&&Vt.push(It)}),Pt.push([-1,0,We("public holiday",{part2:typeof yn!="string"?We("public holiday part2",{keys:Vt.join(", ")}):""})])}xe.length>1&&xe.filter(function(It){return It.length===1&&It[0]==="time"}).length===xe.length&&Pt.push([-1,0,We("combine rules",{ok:","})]),Ye()}an=!0;for(var At=[],yt=0;yt<Pt.length;yt++)At.push(ae(Pt[yt][0],Pt[yt][1],Pt[yt][2],Pt[yt][3]));return At}function et(z,ie){return typeof z[ie][3]=="string"?3:z[ie][1]==="comment"||z[ie][1]==="state"||z[ie][1]==="24/7"||z[ie][1]==="rule separator"?1:!1}function dt(z,ie){for(var Se=ie,Ae,xe;Se>=0&&(xe=et(z,Se),!xe);Se--);if(Ae=Se,xe===1)return Ae+1<z.length&&z[Ae+1][0]===":"&&Ae++,[Se,Ae,z[Se][xe]];for(Ae++;Ae<z.length;Ae++)if(et(z,Ae))return[Se,Ae-1,z[Se][xe]];return[Se,Ae-1,z[Se][xe]]}function Ye(z){var ie={},Se=!1,Ae;Jr="";var xe=[];typeof z=="object"&&(typeof z.conf=="object"&&(ie=z.conf),typeof z.rule_index=="number"&&(Ae=z.rule_index),z.get_internals===!0&&(Se=!0)),Object.keys(_e).forEach(function(nt){typeof ie[nt]>"u"&&(ie[nt]=_e[nt])});for(var Ge=ie.locale==="en"||ie.locale==="all",Ce=Ge?Mt:[1,2,3,4,5,6,7,8,9,10,11,12].map(function(nt){return new Date(2018,nt-1,1).toLocaleString(ie.locale,{month:"short"})}),Qe=Ge?wn:[1,2,3,4,5,6,7].map(function(nt){return new Date(2017,0,nt).toLocaleString(ie.locale,{weekday:"short"})}),ht=0;ht<Et.length;ht++)if(Et[ht][0].length!==0){if(typeof Ae=="number"){if(Ae!==ht)continue}else ht!==0&&(Jr+=Et[ht][1]?ie.rule_sep_string+"|| ":(Et[ht][0][0][1]==="rule separator"?",":ie.print_semicolon?";":"")+ie.rule_sep_string);var yt=[0,0,void 0],ot=[],wt=0;do{if(yt=dt(Et[ht][0],yt[1]),wt>50)throw de("Infinite loop.");yt[2]!=="rule separator"&&ot.push([yt,qr(Et[ht][0],yt[0],yt[1],yt[2],ie)]),yt[1]++,wt++}while(yt[1]<Et[ht][0].length);var qt=ot.slice();Dr||ot.sort(function(nt,gt){var kt=["year","month","week","holiday","weekday","time","24/7","state","comment"];return kt.indexOf(nt[0][2])-kt.indexOf(gt[0][2])});var Tt=Jr.length;if(typeof ie.locale=="string"&&ie.locale!=="en"){var vt;g.default.language!==ie.locale?vt=g.default.getFixedT(ie.locale):vt=g.default.t;for(var tt=0;tt<ot.length;tt++){var _t=ot[tt][0][2];if(_t==="weekday")wn.forEach(function(nt,gt){ot[tt][1]=ot[tt][1].replace(new RegExp(nt,"g"),Qe[gt])});else if(_t==="month")Mt.forEach(function(nt,gt){ot[tt][1]=ot[tt][1].replace(new RegExp(nt,"g"),Ce[gt])});else{var Jt=ot[tt][1].indexOf(":")===-1;Jt&&(ot[tt][1]=vt(["opening_hours:pretty."+ot[tt][1],ot[tt][1]]))}}}if(Jr+=ot.map(function(nt){return nt[1]}).join(" "),xe.push(ot),!Gn){for(var tt=0,Vt=qt.length;tt<Vt;tt++)if(qt[tt]!==ot[tt]){for(var At=tt+Tt,It=0;It<=tt;It++)At+=ot[It][1].length;Pt.push([Jr,At,We("switched",{first:ot[tt][0][2],second:qt[tt][0][2]})])}}}return Gn=!0,Se?[xe,Et]:Jr}function Te(z,ie){if(ie+arguments.length-2>z.length)return!1;for(var Se=0;Se<arguments.length-2;Se++)if(z[ie+Se][1]!==arguments[Se+2])return!1;return!0}function xt(z,ie){return function(Se){var Ae=z(new Date(Se.getTime()+ie));return typeof Ae[1]>"u"?Ae:[Ae[0],new Date(Ae[1].getTime()-ie)]}}function cn(z,ie,Se,Ae){for(var xe=!1,Ge=[];ie<z.length;){if(Te(z,ie,"weekday"))ie=Vn(z,ie,Se,void 0,Ae);else if(Te(z,ie,"24/7"))Se.time.push(function(){return[!0]}),ie++;else if(Te(z,ie,"holiday"))Te(z,ie+1,",")?ie=Qn(z,ie,Se,!0):ie=Qn(z,ie,Se,!1),Pn=!1;else if(Te(z,ie,"month","number")||Te(z,ie,"month","weekday")||Te(z,ie,"year","month","number")||Te(z,ie,"year","event")||Te(z,ie,"event"))ie=Kn(z,ie,Ae),Pn=!1;else if(Te(z,ie,"year"))ie=Dn(z,ie),Pn=!1;else if(Te(z,ie,"month"))ie=un(z,ie);else if(Te(z,ie,"week"))z[ie][3]="week",ie=$r(z,ie);else if(ie!==0&&ie!==z.length-1&&z[ie][0]===":"&&!(typeof Ge[1]=="string"&&Ge[1]==="time"))!an&&Te(z,ie-1,"holiday")&&Pt.push([Ae,ie,We("no colon after",{token:z[ie-1][1]})]),ie++;else if(Te(z,ie,"number","timesep")||Te(z,ie,"timevar")||Te(z,ie,"(","timevar")||Te(z,ie,"number","-"))ie=Zn(z,ie,Se,!1,Ae),Ge=[ie,"time"];else if(Te(z,ie,"state"))z[ie][0]==="open"?Se.meaning=!0:z[ie][0]==="closed"||z[ie][0]==="off"?Se.meaning=!1:(Se.meaning=!1,Se.unknown=!0),xe=!0,ie++,typeof z[ie]=="object"&&z[ie][0]===","&&(ie=[ie+1]);else if(Te(z,ie,"comment"))Se.comment=z[ie][0],xe||(Se.meaning=!1,Se.unknown=!0),xe=!0,ie++,typeof z[ie]=="object"&&z[ie][0]===","&&(ie=[ie+1]);else if((ie===0||ie===z.length-1)&&Te(z,ie,"rule separator"))ie++;else{var Ce=Fe();throw ae(Ae,ie,We("unexpected token",{token:z[ie][1]}))+(Ce?" "+Ce.join("; "):"")}if(typeof ie=="object"){z[ie[0]-1][1]="rule separator";break}typeof Ge[0]=="number"&&Ge[0]!==ie&&(Ge=[])}return ie}function zt(z,ie){return new Date(z.getFullYear(),z.getMonth(),z.getDate(),0,ie)}function on(z,ie){var Se=ie-z.getDay();return new Date(z.getFullYear(),z.getMonth(),z.getDate()+Se+(Se<0?7:0))}function Dt(z,ie,Se){for(;ie<z.length;ie++){if(Te(z,ie,"number","-","number"))Se(z[ie][0],z[ie+2][0],ie),ie+=3;else if(Te(z,ie,"-","number"))Se(-z[ie+1][0],-z[ie+1][0],ie),ie+=2;else if(Te(z,ie,"number"))Se(z[ie][0],z[ie][0],ie),ie++;else throw ae(lt,ie+Te(z,ie,"-"),"Unexpected token in number range: "+z[ie][1]);if(!Te(z,ie,","))break}return ie}function Ft(z,ie){for(var Se=0,Ae=Dt(z,ie,function(Ge,Ce,Qe){if(Ge===0||Ge<-5||Ge>5)throw ae(lt,Qe,We("number -5 to 5"));if(Ge===Ce){if(Se!==0)throw ae(lt,Qe,We("one weekday constraint"));Se=Ge}else throw ae(lt,Qe+2,We("range constrained weekdays"))}),xe=ie;xe<Ae;xe++)z[xe][4]="positive_number";if(!Te(z,Ae,"]"))throw ae(lt,Ae,We("expected",{symbol:"]"}));return[Se,Ae+1]}function An(z,ie,Se,Ae){if(!an){if(ie===0)throw ae(lt,z,We("range zero",{type:Se}));ie===1&&(typeof Ae=="string"&&Ae==="no_end_year"?Pt.push([lt,z,We("period one year+",{type:Se})]):Pt.push([lt,z,We("period one",{type:Se})]))}}function Ln(z,ie,Se,Ae,xe){var Ge=on(new Date(z,ie+(Ae[0]>0?0:1),1),Se);return Ge.setDate(Ge.getDate()+(Ae[0]+(Ae[0]>0?-1:0))*7),typeof xe=="object"&&xe[1]&&Ge.setDate(Ge.getDate()+xe[0]),Ge}function Un(z,ie,Se,Ae){if(ie<1||ie>31)throw ae(Se,Ae,We("month 31",{month:Mt[z]}));if((z===3||z===5||z===8||z===10)&&ie===31)throw ae(Se,Ae,We("month 30",{month:Mt[z]}));if(z===1&&ie===30)throw ae(Se,Ae,We("month feb",{month:Mt[z]}))}function Zn(z,ie,Se,Ae,xe){for(Ae||(z[ie][3]="time");ie<z.length;ie++){var Ge=[],Ce=[];Ce[0]=Te(z,ie,"number","timesep","number"),Ge[0]=Te(z,ie,"(","timevar");var Qe,ht;if(Ce[0]||Te(z,ie,"timevar")||Ge[0]){var yt=!1,ot=!1,wt=[0,0],qt=[],Tt;Ce[0]?Qe=yr(z,xe,ie+Ge[0]):(qt[0]=z[ie+Ge[0]][0],Qe=He[qt[0]],Ge[0]&&(wt[0]=_n(z,ie),Qe+=wt[0]));var vt=ie+(Ce[0]?3:Ge[0]?7:1)+1;if(!Te(z,vt-1,"-"))if(Te(z,vt-1,"+"))ot=!0;else{if(Xe===0)throw ae(xe,ie+(Ce[0]?typeof z[ie+3]=="object"?3:2:Ge[0]?2:typeof z[ie+1]=="object"?1:0),We("point in time",{calc:Ge[0]?We("calculation")+" ":"",libraryname:Me}));ht=Qe+1,yt=!0}if(ot)Ae===1&&(Qe+=X),Qe>=22*60?ht=Qe+8*60:Qe>=17*60?ht=Qe+10*60:ht=X;else if(!yt){if(Ce[1]=Te(z,vt,"number","timesep","number"),Ge[1]=Te(z,vt,"(","timevar"),!Ce[1]&&!Te(z,vt,"timevar")&&!Ge[1])throw ae(xe,vt-(typeof z[vt]=="object"?0:1),We("time range continue"));Ce[1]?ht=yr(z,xe,vt):(qt[1]=z[vt+Ge[1]][0],ht=He[qt[1]]),Ge[1]&&(wt[1]=_n(z,vt),ht+=wt[1])}if(ie=vt+(yt?-1:Ce[1]?3:Ge[1]?7:!ot),Te(z,ie,"/","number")){if(Te(z,ie+2,"timesep","number"))Tt=yr(z,xe,ie+1),ie+=4;else if(Tt=z[ie+1][0],ie+=2,Te(z,ie,"timesep"))throw ae(xe,ie,We("period continue"));if(Xe===0)throw ae(xe,ie-1,We("time range mode",{libraryname:Me}));yt=!0}else if(Te(z,ie,"+"))Zn(z,vt,Se,ht<Qe?1:!0,xe),ie++;else if(Xe===1&&!yt)throw ae(xe,vt,We("point in time mode",{libraryname:Me}));if(typeof rn=="string"?(!Ce[0]||!(Ce[1]||ot||yt))&&(Pn=!1):qt=[],!Ae&&Qe>=X)throw ae(xe,vt-2,We("outside current day"));if((ht<Qe||Ce[0]&&Ce[1]&&Qe===ht)&&(ht+=X),ht>X*2)throw ae(xe,vt+(Ce[1]?4:Ge[1]?7:1)-2,We("two midnights"));Qe===0&&ht===X?Se.time.push(function(){return[!0]}):ht>X?(Se.time.push(function(tt,_t,Jt,Vt,At,It,nt,gt){return function(kt){var mn=kt.getHours()*60+kt.getMinutes();if(Jt[0]){var Xt=h.default.getTimes(kt,rn,St)[Jt[0]];tt=Xt.getHours()*60+Xt.getMinutes()+Vt[0]}if(Jt[1]){var fn=h.default.getTimes(kt,rn,St)[Jt[1]];_t=fn.getHours()*60+fn.getMinutes()+Vt[1],_t+=X}else It&&typeof nt!="number"&&(_t=tt+1);if(typeof nt=="number"){if(mn<tt)return[!1,zt(kt,tt)];if(mn<=_t)for(var hn=tt;mn+nt>=hn;hn+=nt){if(hn===mn)return[!0,zt(kt,mn+1)];if(mn<hn)return[!1,zt(kt,hn)]}return[!1,zt(kt,X)]}else return mn<tt?[!1,zt(kt,tt)]:[!0,zt(kt,_t),At,gt]}}(Qe,ht,qt,wt,ot,yt,Tt,Ae)),ht-X>0&&(typeof zn[xe]>"u"&&(zn[xe]={}),zn[xe].time_wraps_over_midnight=!0,Se.wraptime.push(function(tt,_t,Jt,Vt,At,It){return function(nt){var gt=nt.getHours()*60+nt.getMinutes();if(_t[1]){var kt=h.default.getTimes(nt,rn,St)[_t[1]];tt=kt.getHours()*60+kt.getMinutes()+Jt[1]}if(typeof At=="number"){if(gt<=tt)for(var mn=0;gt+At>=mn;mn+=At){if(mn===gt)return[!0,zt(nt,gt+1)];if(gt<mn)return[!1,zt(nt,mn)]}}else if(gt<tt)return[!0,zt(nt,tt),Vt,It];return[!1,void 0]}}(ht-X,qt,wt,ot,Tt,Ae)))):Se.time.push(function(tt,_t,Jt,Vt,At,It,nt){return function(gt){var kt=gt.getHours()*60+gt.getMinutes();if(Jt[0]){var mn=h.default.getTimes(gt,rn,St)[Jt[0]];tt=mn.getHours()*60+mn.getMinutes()+Vt[0]}if(Jt[1]){var Xt=h.default.getTimes(gt,rn,St)[Jt[1]];_t=Xt.getHours()*60+Xt.getMinutes()+Vt[1]}else It&&typeof nt!="number"&&(_t=tt+1);if(typeof nt=="number"){if(kt<tt)return[!1,zt(gt,tt)];if(kt<=_t)for(var fn=tt;kt+nt>=fn;fn+=nt){if(fn===kt)return[!0,zt(gt,kt+1)];if(kt<fn)return[!1,zt(gt,fn)]}return[!1,zt(gt,X)]}else return kt<tt?[!1,zt(gt,tt)]:kt<_t?[!0,zt(gt,_t),At]:[!1,zt(gt,tt+X)]}}(Qe,ht,qt,wt,ot,yt,Tt))}else if(Te(z,ie,"number","-","number")){if(Qe=z[ie][0]*60,ht=z[ie+2][0]*60,an||Pt.push([xe,ie+2,We("without minutes",{syntax:(z[ie][0]<10?"0":"")+z[ie][0]+":00-"+(z[ie+2][0]<10?"0":"")+z[ie+2][0]+":00"})]),Qe>=X)throw ae(xe,ie,We("outside day"));if(ht<Qe&&(ht+=X),ht>X*2)throw ae(xe,ie+2,We("two midnights"));ht>X?(Se.time.push(function(tt,_t){return function(Jt){var Vt=Jt.getHours()*60+Jt.getMinutes();return Vt<tt?[!1,zt(Jt,tt)]:[!0,zt(Jt,_t)]}}(Qe,ht)),ht-X>0&&(typeof zn[xe]>"u"&&(zn[xe]={}),zn[xe].time_wraps_over_midnight=!0,Se.wraptime.push(function(tt){return function(_t){var Jt=_t.getHours()*60+_t.getMinutes();return Jt<tt?[!0,zt(_t,tt)]:[!1,void 0]}}(ht-X)))):Se.time.push(function(tt,_t){return function(Jt){var Vt=Jt.getHours()*60+Jt.getMinutes();return Vt<tt?[!1,zt(Jt,tt)]:Vt<_t?[!0,zt(Jt,_t),ot]:[!1,zt(Jt,tt+X)]}}(Qe,ht)),ie+=3}else{if(Te(z,ie,"("))throw ae(xe,ie,'Missing variable time (e.g. sunrise) after: "'+z[ie][1]+'"');if(Te(z,ie,"number","timesep"))throw ae(xe,ie+1,'Missing minutes in time range after: "'+z[ie+1][1]+'"');if(Te(z,ie,"number"))throw ae(xe,ie+(typeof z[ie+1]=="object"?1:0),'Missing time separator in time range after: "'+z[ie][1]+'"');return[ie]}if(!Te(z,ie,","))break;typeof z[ie+1]>"u"&&!an&&Pt.push([xe,ie,We("value ends with token",{token:z[ie][1]})])}return ie}function yr(z,ie,Se){if(z[Se+2][0]>59)throw ae(ie,Se+2,"Minutes are greater than 59.");return z[Se][0]*60+z[Se+2][0]}function _n(z,ie){var Se;if(Te(z,ie+2,"+")||Te(z,ie+2,"-"))if(Te(z,ie+3,"number","timesep","number"))if(Te(z,ie+6,")")){var Ae=z[ie+2][0]==="+"?"1":"-1",xe=yr(z,lt,ie+3)*Ae;return xe===0&&Pt.push([lt,ie+5,We("zero calculation")]),xe}else Se=[ie+6,". "+We("missing",{symbol:")"})+"."];else Se=[ie+5," "+We("(time)")+"."];else Se=[ie+2,". "+We("expected",{symbol:'+" or "-'})];if(Se)throw ae(lt,Se[0],We("calculation syntax")+Se[1])}function Vn(z,ie,Se,Ae,xe){for(Ae||(Ae=!0,z[ie][3]="weekday");ie<z.length;ie++){if(Te(z,ie,"weekday","[")){var Ge=[],Ce=Dt(z,ie+2,function(tt,_t,Jt){if(tt===0||tt<-5||tt>5)throw ae(xe,Jt,We("number -5 to 5"));if(tt===_t)Ge.push(tt);else if(tt<_t)for(var Vt=tt;Vt<=_t;Vt++){if(Vt===0||Vt<-5||Vt>5)throw ae(xe,Jt+2,We("number -5 to 5"));Ge.push(Vt)}else throw ae(xe,Jt+2,We("bad range",{from:tt,to:_t}))});if(!Te(z,Ce,"]"))throw ae(xe,Ce+(typeof z[Ce]=="object"?0:-1),We("] or more numbers"));var Qe=pn(z,Ce+1,6,"constrained weekdays");Pn=!1;for(var ht=0;ht<Ge.length;ht++)Se.weekday.push(function(tt,_t,Jt){return function(Vt){var At=Ut(Vt,!1),It=new Date(Vt.getFullYear(),Vt.getMonth(),1),nt=new Date(Vt.getFullYear(),Vt.getMonth()+1,1),gt;gt=Ln(Vt.getFullYear(),Vt.getMonth(),tt,[_t]);var kt=new Date(gt.getFullYear(),gt.getMonth(),gt.getDate()+Jt);if(kt.getTime()<It.getTime())if(gt.getTime()>=It.getTime())kt=on(new Date(Vt.getFullYear(),Vt.getMonth()+(_t>0?0:1)+1,1),tt),gt.setDate(kt.getDate()+(_t+(_t>0?-1:0))*7+Jt);else return[!1,nt];else if(kt.getTime()>=nt.getTime()&&gt.getTime()>=nt.getTime())return[!1,nt];var mn;if(Jt>0){if(mn=on(new Date(Vt.getFullYear(),Vt.getMonth()+(_t>0?0:1)-1,1),tt),mn.setDate(mn.getDate()+(_t+(_t>0?-1:0))*7+Jt),At===Ut(mn,!1))return[!0,zt(Vt,X)]}else if(Jt<0)if(mn=on(new Date(Vt.getFullYear(),Vt.getMonth()+(_t>0?0:1)+1,1),tt),mn.setDate(mn.getDate()+(_t+(_t>0?-1:0))*7+Jt),mn.getTime()>=nt.getTime()){if(kt.getTime()>=nt.getTime())return[!1,mn]}else{if(kt.getTime()<nt.getTime()&&Ut(kt,!1)===At)return[!0,zt(Vt,X)];kt=mn}return Vt.getDate()===kt.getDate()?[!0,zt(Vt,X)]:Vt.getDate()<kt.getDate()?[!1,kt]:[!1,nt]}}(z[ie][0],Ge[ht],Qe[0]));ie=Ce+1+Qe[1]}else if(Te(z,ie,"weekday")){var yt=Te(z,ie+1,"-","weekday"),ot=z[ie][0],wt=yt?z[ie+2][0]:ot,qt=!0;if(wt<ot){var Tt=wt;wt=ot-1,ot=Tt+1,qt=!1}var vt=Array.apply(0,Array(wt-ot+1)).map(function(tt,_t){return _t+wt});typeof zn[xe]>"u"&&(zn[xe]={}),typeof zn[xe].week_days=="object"?Array.prototype.push.apply(zn[xe].week_days,vt):zn[xe].week_days=vt,wt<ot?Se.weekday.push(function(){return[!0]}):Se.weekday.push(function(tt,_t,Jt){return function(Vt){var At=Vt.getDay();return At<tt||At>_t?[!Jt,on(Vt,tt)]:[Jt,on(Vt,_t+1)]}}(ot,wt,qt)),ie+=yt?3:1}else{if(Te(z,ie,"holiday"))return Pn=!1,Qn(z,ie,Se,!0,Ae);throw Te(z,ie-1,",")?ae(xe,ie-1,We("additional rule no sense")):ae(xe,ie,We("unexpected token weekday range",{token:z[ie][1]}))}if(!Te(z,ie,","))break}return ie}function pn(z,ie,Se,Ae){var xe=[0,0];if(xe[0]=Te(z,ie,"+")||(Te(z,ie,"-")?-1:0),xe[0]!==0&&Te(z,ie+1,"number","calcday")){if(z[ie+1][0]>Se)throw ae(lt,ie+2,We("max differ",{maxdiffer:Se,name:Ae}));xe[0]*=z[ie+1][0],xe[0]===0&&!an&&Pt.push([lt,ie+2,We("adding 0")]),xe[1]=3}else xe[0]=0;return xe}function Qn(z,ie,Se,Ae,xe){for(xe||(Ae?z[ie][3]="weekday":z[ie][3]="holiday");ie<z.length;ie++){if(Te(z,ie,"holiday")){if(z[ie][0]==="PH"){var Ge=$n(z[ie][0]),Ce=pn(z,ie+1,1,"public holiday"),Qe=function(ht,yt){return function(ot){for(var wt=Zt(ht,ot.getFullYear(),yt),qt=Ut(ot,!0),Tt=0;Tt<wt.length;Tt++){var vt=Ut(wt[Tt][0],!0);if(qt<vt){if(yt[0]>0){var tt=Zt(ht,ot.getFullYear()-1,yt),_t=tt[tt.length-1],Jt=Ut(_t[0],!0);if(qt<Jt)return[!1,_t[0]];if(qt===Jt)return[!0,zt(_t[0],X),"Day after "+_t[1]]}return[!1,wt[Tt][0]]}else if(qt===vt)return[!0,new Date(ot.getFullYear(),ot.getMonth(),ot.getDate()+1),(yt[0]>0?"Day after ":yt[0]<0?"Day before ":"")+wt[Tt][1]]}if(yt[0]<0){var Vt=Zt(ht,ot.getFullYear()+1,yt),At=Vt[0],It=Ut(At[0],!0);if(qt===It)return[!0,zt(At[0],X),"Day before "+At[1]]}return[!1,new Date(wt[0][0].getFullYear()+1,wt[0][0].getMonth(),wt[0][0].getDate())]}}(Ge,Ce);Ae?Se.weekday.push(Qe):Se.holiday.push(Qe),ie+=1+Ce[1]}else if(z[ie][0]==="SH"){var Ge=$n(z[ie][0]),Qe=function(ot){return function(wt){for(var qt=Ut(wt),Tt=0;Tt<ot.length;Tt++){var vt=Kr(ot[Tt],wt.getFullYear(),!1);if(!(typeof vt>"u"))for(var tt=0;tt<vt.length;tt+=4){var _t=new Date(wt.getFullYear(),vt[2+tt]-1,vt[3+tt]+1),Jt=(vt[0+tt]-1)*100+vt[1+tt],Vt=(vt[2+tt]-1)*100+vt[3+tt];_t=Ut(_t);var At=Vt<Jt;if(qt<Jt){var It=Kr(ot[ot.length-1],wt.getFullYear()-1,!1);if(typeof It=="object"){var nt=(It[It.length-4]-1)*100+It[It.length-3],gt=(It[It.length-2]-1)*100+It[It.length-1];return nt>gt&&qt<=gt?[!0,new Date(wt.getFullYear(),It[It.length-2]-1,It[It.length-1]+1),ot[ot.length-1].name]:[!1,new Date(wt.getFullYear(),vt[0+tt]-1,vt[1+tt])]}else return[!1,new Date(wt.getFullYear(),vt[0+tt]-1,vt[1+tt])]}else{if(Jt<=qt&&(qt<=Vt||At))return[!0,new Date(wt.getFullYear()+At,vt[2+tt]-1,vt[3+tt]+1),ot[Tt].name];if(_t===qt)return tt+4<vt.length?(tt+=4,[!1,new Date(wt.getFullYear(),vt[0+tt]-1,vt[1+tt])]):[!1,new Date(wt.getFullYear(),vt[2+tt]-1,vt[3+tt]+2)]}}}throw de(We("no SH definition",{name:"",year:wt.getFullYear()}),"library bug PR only")}}(Ge);Ae?Se.weekday.push(Qe):Se.holiday.push(Qe),ie+=1}}else{if(Te(z,ie,"weekday"))return Vn(z,ie,Se,!0,lt);throw Te(z,ie-1,",")?ae(lt,ie-1,We("additional rule no sense")):ae(lt,ie,We("unexpected token holiday",{token:z[ie][1]}))}if(!Te(z,ie,","))break}return ie}function Ut(z,ie){return(ie?z.getFullYear()*1e4:0)+z.getMonth()*100+z.getDate()}function Kr(z,ie,Se){typeof Se!="boolean"&&(Se=!0);var Ae=z[ie];if(typeof Ae>"u"&&(Ae=z.default,typeof Ae>"u")){if(Se)throw de(We("no SH definition",{name:z.name+" ",year:ie}),"library bug PR only");return}return Ae}function $n(z){if(typeof pt!="string")throw We("no country code");if(!Re[pt])throw de(We("no holiday definition",{name:z,cc:pt}),"library bug PR only");var ie=[];if(typeof Gt=="string"&&typeof Re[pt][Gt]=="object"&&typeof Re[pt][Gt][z]=="object"){var Se=Re[pt][z]||[],Ae=Re[pt][Gt][z];if(z==="PH")ie=Ae;else if(!Se.length)ie=Ae;else{var xe=Se.map(function(Qe){return Qe.name}),ie=[];ie.push.apply(ie,Se),ie.push.apply(ie,Ae.filter(function(ht){return xe.indexOf(ht.name)===-1})),ie.sort(function(Qe,ht){var yt=Object.keys(Qe).find(function(Tt){return Tt!=="name"}),ot=Object.keys(ht).find(function(Tt){return Tt!=="name"}),wt=Qe[yt],qt=ht[ot];return wt[0]-qt[0]||wt[1]-qt[1]})}}else if(Re[pt][z]){var Ge=Re[pt][z];switch(z){case"PH":Ge.forEach(function(Ce){"only_states"in Ce&&Ce.only_states.indexOf(Gt)===-1||ie.push(Ce)});break;case"SH":ie=Ge;break}}else throw de(We("no holiday definition state",{name:z,cc:pt,state:Gt}),"library bug PR only");if(ie.length===0)throw de(We("no holiday definition",{name:z,cc:pt}),"library bug PR only");return ie}function nn(z){var ie=Math.floor(z/100),Se=z-19*Math.floor(z/19),Ae=Math.floor((ie-17)/25),xe=ie-Math.floor(ie/4)-Math.floor((ie-Ae)/3)+19*Se+15;xe=xe-30*Math.floor(xe/30),xe=xe-Math.floor(xe/28)*(1-Math.floor(xe/28)*Math.floor(29/(xe+1))*Math.floor((21-Se)/11));var Ge=z+Math.floor(z/4)+xe+2-ie+Math.floor(ie/4);Ge=Ge-7*Math.floor(Ge/7);var Ce=xe-Ge,Qe=3+Math.floor((Ce+40)/44),ht=Ce+28-31*Math.floor(Qe/4),yt=z%4,ot=z%7,wt=z%19,qt=(19*wt+15)%30,Tt=(2*yt+4*ot-qt+34)%7,vt=qt+Tt,tt;vt<9?tt=new Date(z,4-1,vt+4):vt+4<31?tt=new Date(z,4-1,vt+4):tt=new Date(z,5-1,vt-26);var _t=new Date(z,2,0),Jt=_t.getDate()-_t.getDay(),Vt=new Date(z,4,24),At=24-(6+Vt.getDay())%7,It=new Date(z,6,1),nt=It.getDay()===0?2:1;function gt(fn,hn){var Sn=new Date(z,fn,1);return 1+(7+hn-Sn.getDay())%7}function kt(fn,hn){var Sn=new Date(z,fn+1,0),Bn=(7+Sn.getDay()-hn)%7;return Sn.getDate()-Bn}function mn(fn,hn){var Sn=fn-hn.getDay();return Sn<0&&(Sn+=7),hn.setDate(hn.getDate()+Sn),hn}function Xt(fn,hn,Sn){if(fn>=hn)throw de("Not implemented yet.");if(fn<=Sn.getDay()&&Sn.getDay()<=hn)return Sn;var Bn=fn-Sn.getDay();return Bn<0&&(Bn+=7),Sn.setDate(Sn.getDate()+Bn),Sn}return{easter:new Date(z,Qe-1,ht),"orthodox easter":tt,victoriaDay:new Date(z,4,At),canadaDay:new Date(z,6,nt),firstJanuaryMonday:new Date(z,0,gt(0,1)),firstFebruaryMonday:new Date(z,1,gt(1,1)),lastFebruarySunday:new Date(z,1,Jt),firstMarchMonday:new Date(z,2,gt(2,1)),firstAprilMonday:new Date(z,3,gt(3,1)),firstMayMonday:new Date(z,4,gt(4,1)),firstJuneMonday:new Date(z,5,gt(5,1)),firstJulyMonday:new Date(z,6,gt(6,1)),firstAugustMonday:new Date(z,7,gt(7,1)),firstSeptemberMonday:new Date(z,8,gt(8,1)),firstSeptemberTuesday:new Date(z,8,gt(8,2)),firstSeptemberSunday:new Date(z,8,gt(8,0)),firstOctoberMonday:new Date(z,9,gt(9,1)),firstNovemberMonday:new Date(z,10,gt(10,1)),firstNovemberTuesday:new Date(z,10,gt(10,2)),firstMarchTuesday:new Date(z,2,gt(2,2)),firstAugustTuesday:new Date(z,7,gt(7,2)),firstAugustFriday:new Date(z,7,gt(7,5)),firstNovemberThursday:new Date(z,10,gt(10,4)),lastMayMonday:new Date(z,4,kt(4,1)),lastMarchMonday:new Date(z,2,kt(2,1)),lastAprilMonday:new Date(z,3,kt(3,1)),lastAprilFriday:new Date(z,3,kt(3,5)),lastAugustMonday:new Date(z,7,kt(7,1)),lastSeptemberMonday:new Date(z,8,kt(8,1)),lastSeptemberFriday:new Date(z,8,kt(8,5)),lastOctoberMonday:new Date(z,9,kt(9,1)),lastOctoberFriday:new Date(z,9,kt(9,5)),nextSaturday20Jun:mn(6,new Date(z,5,20)),nextSaturday31Oct:mn(6,new Date(z,9,31)),nextWednesday16Nov:mn(3,new Date(z,10,16)),"nextMo-Fr17March":Xt(1,5,new Date(z,2,17)),"nextMo-Sa01May":Xt(1,6,new Date(z,4,1)),"nextMo-Sa07August":Xt(1,6,new Date(z,7,7)),"nextMo-Sa25December":Xt(1,6,new Date(z,11,25))}}function Zt(z,ie,Se){var Ae=nn(ie),xe=[],Ge;return z.forEach(function(Ce){if("fixed_date"in Ce)Ge=new Date(ie,Ce.fixed_date[0]-1,Ce.fixed_date[1]);else if("variable_date"in Ce){var Qe=Ae[Ce.variable_date];if(!Qe)throw We("movable no formula",{name:Ce.name});var ht=0;if("offset"in Ce&&(ht=Ce.offset),Ge=new Date(Qe.getFullYear(),Qe.getMonth(),Qe.getDate()+ht),ie!==Ge.getFullYear())throw We("movable not in year",{name:Ce.variable_date,days:ht})}else throw de("Unexpected object: "+JSON.stringify(Ce,null,"    "));Se[0]&&Ge.setDate(Ge.getDate()+Se[0]),xe.push([Ge,Ce.name])}),xe=xe.sort(function(Ce,Qe){return Ce[0].getTime()<Qe[0].getTime()?-1:Ce[0].getTime()>Qe[0].getTime()?1:0}),xe}function Dn(z,ie){for(z[ie][3]="year";ie<z.length;ie++){if(Te(z,ie,"year")){var Se=!1,Ae,xe;Te(z,ie+1,"-","year","/","number")?(Se=!0,Ae=!0,xe=parseInt(z[ie+4][0]),An(ie+4,xe,"year")):(Se=Te(z,ie+1,"-","year"),Ae=Te(z,ie+1,"/","number"),Ae?(xe=parseInt(z[ie+2][0]),An(ie+2,xe,"year","no_end_year")):Te(z,ie+1,"+")&&(xe=1,Ae=2));var Ge=parseInt(z[ie][0]);if(Se&&z[ie+2][0]<=Ge)throw z[ie+2][0]===Ge?ae(lt,ie,We("year range one year",{year:Ge})):ae(lt,ie,We("year range reverse"));!Se&&Ge<new Date().getFullYear()&&Pt.push([lt,ie,We("year past")]),Se&&z[ie+2][0]<new Date().getFullYear()&&Pt.push([lt,ie+2,We("year past")]),Lt.year.push(function(Ce,Qe,ht,yt,ot,wt){return function(qt){var Tt=qt.getFullYear(),vt=yt?parseInt(Ce[Qe+2][0]):ht;if(Tt<ht)return[!1,new Date(ht,0,1)];if(ot){if(ht<=Tt){if(yt&&Tt>vt)return[!1];if(wt>0)return(Tt-ht)%wt===0?[!0,new Date(Tt+1,0,1)]:[!1,new Date(Tt+wt-1,0,1)]}}else if(yt){if(Tt<=vt)return[!0,new Date(vt+1,0,1)]}else if(Tt===ht)return[!0];return[!1]}}(z,ie,Ge,Se,Ae,xe)),ie+=1+(Se?2:0)+(Ae?Ae===2?1:2:0)}else throw Te(z,ie-1,",")?ae(lt,ie-1,We("additional rule no sense")):ae(lt,ie,We("unexpected token year range",{token:z[ie][1]}));if(!Te(z,ie,","))break}return ie}function $r(z,ie){for(;ie<z.length;ie++){if(Te(z,ie,"week")&&ie++,Te(z,ie,"number")){var Se=Te(z,ie+1,"-","number"),Ae=0,xe=z[ie][0],Ge=Se?z[ie+2][0]:xe;if(xe>Ge)throw ae(lt,ie+2,We("week range reverse"));if(xe<1)throw ae(lt,ie,We("week negative"));if(Ge>53)throw ae(lt,Se?ie+2:ie,We("week exceed"));if(Se&&(Ae=Te(z,ie+3,"/","number"),Ae)){if(Ae=z[ie+4][0],z[ie+4][4]="positive_number",Ae<2)throw ae(lt,ie+4,We("week period less than 2",{weekfrom:xe,weekto:Ge,period:Ae}));if(Ae>26)throw ae(lt,ie+4,We("week period greater than 26",{weekfrom:xe}))}Pn&&(!(xe<=1&&Ge>=53)||Ae)&&(Pn=!1),!Ae&&xe===1&&Ge===53?Lt.week.push(function(){return[!0]}):Lt.week.push(function(Ce,Qe,ht){return function(yt){var ot=rt(yt);if(ot<Ce)return[!1,sn(Ce,yt)];if(ot>Qe)return[!1,sn(Ce,yt)];if(ht){var wt=(ot-Ce)%ht===0;return wt?[!0,sn(ot+1,yt)]:[!1,sn(ot+ht-1,yt)]}return[!0,sn(Qe===53?1:Qe+1,yt)]}}(xe,Ge,Ae)),ie+=1+(Se?2:0)+(Ae?2:0)}else throw Te(z,ie-1,",")?ae(lt,ie-1,We("additional rule no sense")):ae(lt,ie,We("unexpected token week range",{token:z[ie][1]}));if(!Te(z,ie,","))break}return ie}function rt(z){z=new Date(+z),z.setHours(0,0,0,0),z.setDate(z.getDate()+4-(z.getDay()||7));var ie=new Date(z.getFullYear(),0,1);return Math.ceil(((z-ie)/864e5+1)/7)}function Qt(z,ie){var Se=new Date(ie,0,1+(z-1)*7),Ae=Se.getDay(),xe=Se;return Ae<=4?xe.setDate(Se.getDate()-Se.getDay()+1):xe.setDate(Se.getDate()+8-Se.getDay()),xe}function sn(z,ie){for(var Se,Ae=-1;Ae<=1;Ae++)if(Se=Qt(z,ie.getFullYear()+Ae),Se.getTime()>ie.getTime())return Se;throw de()}function un(z,ie,Se,Ae){for(Ae||(z[ie][3]="month");ie<z.length;ie++){if(Te(z,ie,"month","number")&&!Te(z,ie+2,"timesep","number"))return Kn(z,ie,lt,!0);if(Te(z,ie,"month")){var xe=Te(z,ie+1,"-","month"),Ge=z[ie][0],Ce=xe?z[ie+2][0]:Ge;xe&&Pn?Ge!==(Ce+1)%12&&(Pn=!1):Pn=!1;var Qe=!0;if(Ce<Ge){var ht=Ce;Ce=Ge-1,Ge=ht+1,Qe=!1}var yt=function(ot,wt,qt){return function(Tt){var vt=Tt.getMonth();return wt<ot?[!qt]:vt<ot||vt>wt?[!qt,Wn(Tt,ot)]:[qt,Wn(Tt,wt+1)]}}(Ge,Ce,Qe);Se===!0?Lt.monthday.push(yt):Lt.month.push(yt),ie+=xe?3:1}else throw ae(lt,ie,We("unexpected token month range",{token:z[ie][1]}));if(!Te(z,ie,","))break}return ie}function Wn(z,ie){return new Date(z.getFullYear(),ie<z.getMonth()?ie+12:ie)}function Kn(z,ie,Se,Ae){for(Ae||(z[ie][3]="month");ie<z.length;ie++){var xe=[],Ge=[],Ce=[],Qe=[],ht=[];xe[0]=Te(z,ie,"year"),Ge[0]=Te(z,ie+xe[0],"month","number"),Ce[0]=Te(z,ie+xe[0],"event"),Ce[0]&&(Qe[0]=pn(z,ie+xe[0]+1,200,"event like easter"));var yt;Te(z,ie+xe[0],"month","weekday","[")?(ht[0]=Ft(z,ie+xe[0]+3),Qe[0]=pn(z,ht[0][1],6,"constrained weekdays"),yt=ht[0][1]+(typeof Qe[0]=="object"&&Qe[0][1]?3:0)):yt=ie+xe[0]+(Ce[0]?typeof Qe[0]=="object"&&Qe[0][1]?4:1:2);var ot;if((Ge[0]||Ce[0]||ht[0])&&Te(z,yt,"-")&&(xe[1]=Te(z,yt+1,"year"),ot=yt+1+xe[1],Ge[1]=Te(z,ot,"month","number"),Ge[1]||(Ce[1]=Te(z,ot,"event"),Ce[1]?Qe[1]=pn(z,ot+1,366,"event like easter"):Te(z,ot,"month","weekday","[")&&(ht[1]=Ft(z,ot+3),Qe[1]=pn(z,ht[1][1],6,"constrained weekdays")))),xe[0]===xe[1]&&(Ge[1]||Ce[1]||ht[1])){Ge[0]&&Un(z[ie+xe[0]][0],z[ie+xe[0]+1][0],Se,ie+xe[0]+1),Ge[1]&&Un(z[ot][0],z[ot+1][0],Se,ot+1);var wt=function(It,nt,gt,kt,mn,Xt,fn,hn){return function(Sn){var Bn=new Date(Sn.getFullYear()+1,0,1),Cr,dr;if(mn[0]){if(Cr=nn(kt[0]?parseInt(It[nt][0]):Sn.getFullYear()),dr=Cr[It[nt+kt[0]][0]],typeof Xt[0]=="object"&&Xt[0][1]){var Ir=dr.getFullYear();if(dr.setDate(dr.getDate()+Xt[0][0]),Ir!==dr.getFullYear())throw ae(gt,nt+kt[0]+Xt[0][1]*3,We("movable not in year",{name:It[nt+kt[0]][0],days:Xt[0][0]}))}}else hn[0]?dr=Ln(kt[0]?It[nt][0]:Sn.getFullYear(),It[nt+kt[0]][0],It[nt+kt[0]+1][0],hn[0],Xt[0]):dr=new Date(kt[0]?It[nt][0]:Sn.getFullYear(),It[nt+kt[0]][0],It[nt+kt[0]+1][0]);var br;if(mn[1]){if(Cr=nn(kt[1]?parseInt(It[fn-1][0]):Sn.getFullYear()),br=Cr[It[fn][0]],typeof Xt[1]=="object"&&Xt[1][1]){var Fi=br.getFullYear();if(br.setDate(br.getDate()+Xt[1][0]),Fi!==br.getFullYear())throw ae(gt,fn+Xt[1][1],We("movable not in year",{name:It[fn][0],days:Xt[1][0]}))}}else hn[1]?br=Ln(kt[1]?It[fn-1][0]:Sn.getFullYear(),It[fn][0],It[fn+1][0],hn[1],Xt[1]):br=new Date(kt[1]?It[fn-1][0]:Sn.getFullYear(),It[fn][0],It[fn+1][0]+1);var xn=!0;if(br<dr){var Vr=br;br=dr,dr=Vr,xn=!1}return Sn.getTime()<dr.getTime()?[!xn,dr]:Sn.getTime()<br.getTime()?[xn,br]:kt[0]?[!xn]:[!xn,Bn]}}(z,ie,Se,xe,Ce,Qe,ot,ht);Ae===!0?Lt.month.push(wt):Lt.monthday.push(wt),ie=(ht[1]?ht[1][1]:ot+(Ce[1]?1:2))+(typeof Qe[1]=="object"?Qe[1][1]:0)}else if(Ge[0]){xe=xe[0];var qt=z[ie][0],Tt=z[ie+xe][0],vt=!0;do{var tt=z[ie+1+xe][0],_t=Te(z,ie+2+xe,"-","number"),Jt=void 0,Vt=z[ie+xe+(_t?3:1)][0]+1;if(_t&&Te(z,ie+xe+4,"/","number")&&(Jt=z[ie+xe+5][0],z[ie+xe+5][4]="positive_number",An(ie+xe+5,Jt,"day")),vt){var At=ie+xe+1+(_t?2:0)+(Jt?2:0)+!(_t||Jt);if(Te(z,At,"timesep","number")&&(Te(z,At+2,"+")||Te(z,At+2,"-")||Xe!==0))return un(z,ie,!0,!0)}if(Vt<tt)throw ae(Se,ie+xe+3,We("day range reverse"));Un(Tt,tt,Se,ie+1+xe),Un(Tt,Vt-1,Se,ie+xe+(_t?3:1));var wt=function(nt,gt,kt,mn,Xt,fn){return function(hn){var Sn=new Date(hn.getFullYear()+1,0,1),Bn=new Date(gt?nt:hn.getFullYear(),kt,mn);if(kt===1&&mn!==Bn.getDate())return[!1];var Cr=new Date(Bn.getFullYear(),kt,Xt);if(kt===1&&_t&&Xt!==Cr.getDate())return[!1];if(hn.getTime()<Bn.getTime())return[!1,Bn];if(hn.getTime()>=Cr.getTime())return[!1,Sn];if(!fn)return[!0,Cr];var dr=Math.floor((hn.getTime()-Bn.getTime())/we),Ir=dr%fn;return Ir===0?[!0,new Date(hn.getFullYear(),hn.getMonth(),hn.getDate()+1)]:[!1,new Date(hn.getFullYear(),hn.getMonth(),hn.getDate()+fn-Ir)]}}(qt,xe,Tt,tt,Vt,Jt);Ae===!0?Lt.month.push(wt):Lt.monthday.push(wt),ie+=2+xe+(_t?2:0)+(Jt?2:0),vt=!1}while(Te(z,ie,",","number"))}else if(Ce[0]){var wt=function(nt,gt,kt,mn,Xt){return function(fn){var hn=nn(mn?nt[gt][0]:fn.getFullYear()),Sn=hn[nt[gt+mn][0]];if(!Sn)throw We("movable no formula",{name:nt[gt+mn][0]});if(Xt[0]&&(Sn.setDate(Sn.getDate()+Xt[0]),fn.getFullYear()!==Sn.getFullYear()))throw ae(kt,gt+mn+Xt[1],We("movable not in year",{name:nt[gt+mn][0],days:Xt[0]}));return fn.getTime()<Sn.getTime()?[!1,Sn]:Sn.getMonth()*100+Sn.getDate()===fn.getMonth()*100+fn.getDate()?[!0,new Date(fn.getFullYear(),fn.getMonth(),fn.getDate()+1)]:[!1,new Date(fn.getFullYear()+1,0,1)]}}(z,ie,Se,xe[0],Qe[0]);Ae===!0?Lt.month.push(wt):Lt.monthday.push(wt),ie+=xe[0]+Ce[0]+(typeof Qe[0][1]=="number"&&Qe[0][1]?3:0)}else if(ht[0])ie=un(z,ie);else return Te(z,ie,"month")?un(z,ie,!0,!0):ie;if(!Te(z,ie,","))break}return ie}this.getStatePair=function(z){for(var ie=!1,Se,Ae=!1,xe,Ge,Ce=[],Qe=0;Qe<jt.length;Qe++){for(var ht=!0,yt=0;yt<jt[Qe].date.length;yt++){for(var ot=jt[Qe].date[yt],wt=!1,qt=0;qt<ot.length;qt++){var Tt=ot[qt](z);Tt[0]&&(wt=!0,typeof Tt[2]=="string"&&(xe=[Tt[2],Qe])),(typeof Se>"u"||typeof Tt[1]=="object"&&Tt[1].getTime()<Se.getTime())&&(Se=Tt[1])}if(!wt){ht=!1;break}}ht&&((jt[Qe].date.length>0||Qe>0&&jt[Qe].meaning&&jt[Qe-1].date.length===0)&&(jt[Qe].meaning||jt[Qe].unknown)&&!jt[Qe].wrapped&&!jt[Qe].additional&&!jt[Qe].fallback&&(Ce=[]),Ce.push(Qe))}for(var Qe=0;Qe<Ce.length;Qe++){var vt=Ce[Qe];jt[vt].time.length===0&&(!jt[vt].fallback||jt[vt].fallback&&!(ie||Ae))&&(ie=jt[vt].meaning,Ae=jt[vt].unknown,Ge=vt);for(var tt=0;tt<jt[vt].time.length;tt++){var Tt=jt[vt].time[tt](z);if(Tt[0]&&(!jt[vt].fallback||jt[vt].fallback&&!(ie||Ae))){if(ie=jt[vt].meaning,Ae=jt[vt].unknown,Ge=vt,typeof xe=="object"&&xe[0]===We("open end")&&(xe=void 0),Tt[2]===!0&&(ie||Ae)&&(xe=[We("open end"),Ge],ie=!1,Ae=!0,typeof jt[vt].time[tt+1]=="function")){var _t=jt[vt].time[tt+1](z);!_t[0]&&typeof _t[1]=="object"&&jt[vt].time[tt](new Date(z.getTime()-1))[0]&&(ie=!1,Ae=!1)}jt[vt].fallback&&(typeof Se>"u"||typeof Tt[1]<"u"&&Tt[1]<Se)&&(Se=Tt[1])}(typeof Se>"u"||typeof Tt[1]=="object"&&Tt[1]<Se)&&(Se=Tt[1])}}return typeof jt[Ge]=="object"&&typeof jt[Ge].comment=="string"?xe=jt[Ge].comment:typeof xe=="object"&&(xe[1]===Ge?xe=xe[0]:xe=void 0),[ie,Se,Ae,xe,Ge]};function qr(z,ie,Se,Ae,xe){for(var Ge="",Ce=ie;Ce<=Se;)Te(z,Ce,"weekday")?(!xe.leave_weekday_sep_one_day_betw&&Ce-ie>1&&(Te(z,Ce-1,",")||Te(z,Ce-1,"-"))&&Te(z,Ce-2,"weekday")&&z[Ce][0]===(z[Ce-2][0]+1)%7&&(Ge=Ge.substring(0,Ge.length-1)+xe.sep_one_day_between),Ge+=wn[z[Ce][0]]):Ce-ie>0&&Ae==="time"&&Te(z,Ce-1,"timesep")&&Te(z,Ce,"number")?Ge+=(z[Ce][0]<10?"0":"")+z[Ce][0].toString():Ae==="time"&&xe.zero_pad_hour&&Ce!==z.length&&Te(z,Ce,"number")&&Te(z,Ce+1,"timesep")?Ge+=(z[Ce][0]<10?z[Ce][0]===0&&xe.one_zero_if_hour_zero?"":"0":"")+z[Ce][0].toString():Ae==="time"&&Ce+2<=Se&&Te(z,Ce,"number")&&Te(z,Ce+1,"-")&&Te(z,Ce+2,"number")?(Ge+=(z[Ce][0]<10?z[Ce][0]===0&&xe.one_zero_if_hour_zero?"":"0":"")+z[Ce][0].toString(),Ge+=":00-"+(z[Ce+2][0]<10?"0":"")+z[Ce+2][0].toString()+":00",Ce+=2):Te(z,Ce,"comment")?Ge+='"'+z[Ce][0].toString()+'"':Te(z,Ce,"closed")?Ge+=xe.leave_off_closed?z[Ce][0]:xe.keyword_for_off_closed:Ce-ie>0&&Te(z,Ce,"number")&&(Ae==="month"||Ae==="week")?Ge+=(Te(z,Ce-1,"month")||Te(z,Ce-1,"week")?" ":"")+(xe.zero_pad_month_and_week_numbers&&z[Ce][4]!=="positive_number"&&z[Ce][0]<10?"0":"")+z[Ce][0]:Ce-ie>0&&Te(z,Ce,"month")&&Te(z,Ce-1,"year")?Ge+=" "+Mt[[z[Ce][0]]]:Ce-ie>0&&Te(z,Ce,"event")&&Te(z,Ce-1,"year")?Ge+=" "+z[Ce][0]:Te(z,Ce,"month")?(Ge+=Mt[[z[Ce][0]]],Ce+1<=Se&&Te(z,Ce+1,"weekday")&&(Ge+=" ")):Ce+2<=Se&&(Te(z,Ce,"-")||Te(z,Ce,"+"))&&Te(z,Ce+1,"number","calcday")?(Ge+=" "+z[Ce][0]+z[Ce+1][0]+" day"+(Math.abs(z[Ce+1][0])===1?"":"s"),Ce+=2):Ce===Se&&Ae==="weekday"&&z[Ce][0]===":"||Ce===Se&&Ae==="time"&&z[Ce][0]===","||(Ge+=z[Ce][0].toString()),Ce++;return Ge}this.getState=function(z){var ie=this.getIterator(z);return ie.getState()},this.getUnknown=function(z){var ie=this.getIterator(z);return ie.getUnknown()},this.getStateString=function(z,ie){var Se=this.getIterator(z);return Se.getStateString(ie)},this.getComment=function(z){var ie=this.getIterator(z);return ie.getComment()},this.getMatchingRule=function(z){var ie=this.getIterator(z);return ie.getMatchingRule()},this.getWarnings=function(){var z=this.getIterator();return Fe(z)},this.prettifyValue=function(z){return this.getWarnings(),Ye(z)},this.getNextChange=function(z,ie){var Se=this.getIterator(z);if(Se.advance(ie))return Se.getDate()},this.isWeekStable=function(){return Pn},this.isEqualTo=function(z,ie){if(typeof ie>"u")var ie=new Date;var Se;this.isWeekStable()&&z.isWeekStable()?Se=new Date(ie.getTime()+we*10):Se=new Date(ie.getTime()+we*366*5);for(var Ae=this.getIterator(ie),xe=z.getIterator(ie);Ae.advance(Se);){xe.advance(Se);var Ge=[];if(Ae.getDate().getTime()!==xe.getDate().getTime()&&Ge.push("getDate"),Ae.getState()!==xe.getState()&&Ge.push("getState"),Ae.getUnknown()!==xe.getUnknown()&&Ge.push("getUnknown"),Ae.getComment()!==xe.getComment()&&Ge.push("getComment"),Ge.length){var Ce={};return Ce[Ae.getDate().getTime()]=Ge,[!1,{matching_rule:Ae.getMatchingRule(),matching_rule_other:xe.getMatchingRule(),deviation_for_time:Ce}]}}return[!0]},this.getOpenIntervals=function(z,ie){var Se=[],Ae=this.getIterator(z);for((Ae.getState()||Ae.getUnknown())&&Se.push([z,void 0,Ae.getUnknown(),Ae.getComment()]);Ae.advance(ie);)Ae.getState()||Ae.getUnknown()?(Se.length!==0&&typeof Se[Se.length-1][1]>"u"&&(Se[Se.length-1][1]=Ae.getDate()),Se.push([Ae.getDate(),void 0,Ae.getUnknown(),Ae.getComment()])):Se.length!==0&&typeof Se[Se.length-1][1]>"u"&&(Se[Se.length-1][1]=Ae.getDate());return Se.length>0&&typeof Se[Se.length-1][1]>"u"&&(Se[Se.length-1][1]=ie),Se},this.getOpenDuration=function(z,ie){for(var Se=0,Ae=0,xe=this.getIterator(z),Ge=xe.getState()||xe.getUnknown()?z:void 0,Ce=xe.getState(),Qe=xe.getUnknown();xe.advance(ie);)xe.getState()||xe.getUnknown()?(typeof Ge=="object"&&(Qe?Ae+=xe.getDate().getTime()-Ge.getTime():Ce&&(Se+=xe.getDate().getTime()-Ge.getTime())),Ge=xe.getDate(),Ce=xe.getState(),Qe=xe.getUnknown()):typeof Ge=="object"&&(Qe?Ae+=xe.getDate().getTime()-Ge.getTime():Se+=xe.getDate().getTime()-Ge.getTime(),Ge=void 0);return typeof Ge=="object"&&(Qe?Ae+=ie.getTime()-Ge.getTime():Se+=ie.getTime()-Ge.getTime()),[Se,Ae]},this.getIterator=function(z){return new function(ie){typeof z>"u"&&(z=new Date);var Se=[void 0,z,void 0,void 0,void 0],Ae=ie.getStatePair(z);this.getDate=function(){return Se[1]},this.setDate=function(xe){if(typeof xe!="object")throw We("date parameter needed");Se=[void 0,xe,void 0,void 0,void 0],Ae=ie.getStatePair(xe)},this.getState=function(){return Ae[0]},this.getUnknown=function(){return Ae[2]},this.getStateString=function(xe){return Ae[0]?"open":Ae[2]?"unknown":xe?"closed":"close"},this.getComment=function(){return Ae[3]},this.getMatchingRule=function(){if(!(typeof Ae[4]>"u"))return jt[Ae[4]].build_from_token_rule[2]},this.advance=function(xe){if(typeof xe>"u")xe=new Date(Se[1].getTime()+we*366*5);else if(xe.getTime()<=Se[1].getTime())return!1;do{if(typeof Ae[1]>"u")return!1;if(Ae[1].getTime()<=Se[1].getTime())throw"Fatal: infinite loop in nextChange";if(Ae[1].getTime()>=xe.getTime())return!1;Se=Ae,Ae=ie.getStatePair(Se[1])}while(Ae[0]===Se[0]&&Ae[2]===Se[2]&&Ae[3]===Se[3]);return!0}}(this)}}return bt})})(opening_hours);var lodash_customExports={},lodash_custom={get exports(){return lodash_customExports},set exports(n){lodash_customExports=n}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,a="4.15.0",l=200,h="Expected a function",g="__lodash_hash_undefined__",p=1,y=2,b=1/0,E=9007199254740991,C="[object Arguments]",A="[object Array]",B="[object Boolean]",M="[object Date]",N="[object Error]",Z="[object Function]",ee="[object GeneratorFunction]",F="[object Map]",O="[object Number]",k="[object Object]",H="[object Promise]",ce="[object RegExp]",U="[object Set]",te="[object String]",re="[object Symbol]",ue="[object WeakMap]",V="[object ArrayBuffer]",S="[object DataView]",T="[object Float32Array]",G="[object Float64Array]",Q="[object Int8Array]",le="[object Int16Array]",fe="[object Int32Array]",q="[object Uint8Array]",se="[object Uint8ClampedArray]",D="[object Uint16Array]",oe="[object Uint32Array]",Pe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Re=/^\w*$/,Oe=/^\./,Ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ue=/[\\^$.*+?()[\]{}|]/g,Ze=/\\(\\)?/g,bt=/\w*$/,it=/^\[object .+?Constructor\]$/,ut=/^(?:0|[1-9]\d*)$/,ft={};ft[T]=ft[G]=ft[Q]=ft[le]=ft[fe]=ft[q]=ft[se]=ft[D]=ft[oe]=!0,ft[C]=ft[A]=ft[V]=ft[B]=ft[S]=ft[M]=ft[N]=ft[Z]=ft[F]=ft[O]=ft[k]=ft[ce]=ft[U]=ft[te]=ft[ue]=!1;var He={};He[C]=He[A]=He[V]=He[S]=He[B]=He[M]=He[T]=He[G]=He[Q]=He[le]=He[fe]=He[F]=He[O]=He[k]=He[ce]=He[U]=He[te]=He[re]=He[q]=He[se]=He[D]=He[oe]=!0,He[N]=He[Z]=He[ue]=!1;var Mt=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,wn=typeof self=="object"&&self&&self.Object===Object&&self,Ct=Mt||wn||Function("return this")(),_e=e&&!e.nodeType&&e,Y=_e&&!0&&n&&!n.nodeType&&n,X=Y&&Y.exports===_e,we=X&&Mt.process,Me=function(){try{return we&&we.binding("util")}catch{}}(),qe=Me&&Me.isTypedArray;function je(W,ye){return W.set(ye[0],ye[1]),W}function We(W,ye){return W.add(ye),W}function pt(W,ye,Le){switch(Le.length){case 0:return W.call(ye);case 1:return W.call(ye,Le[0]);case 2:return W.call(ye,Le[0],Le[1]);case 3:return W.call(ye,Le[0],Le[1],Le[2])}return W.apply(ye,Le)}function Gt(W,ye){for(var Le=-1,Je=W?W.length:0;++Le<Je&&ye(W[Le],Le,W)!==!1;);return W}function rn(W,ye){for(var Le=-1,Je=ye.length,Nt=W.length;++Le<Je;)W[Nt+Le]=ye[Le];return W}function St(W,ye,Le,Je){var Nt=-1,mt=W?W.length:0;for(Je&&mt&&(Le=W[++Nt]);++Nt<mt;)Le=ye(Le,W[Nt],Nt,W);return Le}function gn(W,ye){for(var Le=-1,Je=W?W.length:0;++Le<Je;)if(ye(W[Le],Le,W))return!0;return!1}function Xe(W){return function(ye){return ye==null?t:ye[W]}}function En(W,ye){for(var Le=-1,Je=Array(W);++Le<W;)Je[Le]=ye(Le);return Je}function yn(W){return function(ye){return W(ye)}}function Yt(W,ye){return W==null?t:W[ye]}function Pt(W){var ye=!1;if(W!=null&&typeof W.toString!="function")try{ye=!!(W+"")}catch{}return ye}function an(W){var ye=-1,Le=Array(W.size);return W.forEach(function(Je,Nt){Le[++ye]=[Nt,Je]}),Le}function Dr(W,ye){return function(Le){return W(ye(Le))}}function Gn(W){var ye=-1,Le=Array(W.size);return W.forEach(function(Je){Le[++ye]=Je}),Le}var Cn=Array.prototype,Jr=Function.prototype,Pn=Object.prototype,jt=Ct["__core-js_shared__"],zn=function(){var W=/[^.]+$/.exec(jt&&jt.keys&&jt.keys.IE_PROTO||"");return W?"Symbol(src)_1."+W:""}(),Et=Jr.toString,lt=Pn.hasOwnProperty,Wt=Et.call(Object),Nn=Pn.toString,Lt=RegExp("^"+Et.call(lt).replace(Ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),or=X?Ct.Buffer:t,Kt=Ct.Symbol,Ee=Ct.Uint8Array,be=Dr(Object.getPrototypeOf,Object),pe=Object.create,he=Pn.propertyIsEnumerable,ae=Cn.splice,de=Object.getOwnPropertySymbols,me=or?or.isBuffer:t,Be=Dr(Object.keys,Object),Fe=Math.max,et=xi(Ct,"DataView"),dt=xi(Ct,"Map"),Ye=xi(Ct,"Promise"),Te=xi(Ct,"Set"),xt=xi(Ct,"WeakMap"),cn=xi(Object,"create"),zt=!he.call({valueOf:1},"valueOf"),on=si(et),Dt=si(dt),Ft=si(Ye),An=si(Te),Ln=si(xt),Un=Kt?Kt.prototype:t,Zn=Un?Un.valueOf:t,yr=Un?Un.toString:t;function _n(){}function Vn(W){var ye=-1,Le=W?W.length:0;for(this.clear();++ye<Le;){var Je=W[ye];this.set(Je[0],Je[1])}}function pn(){this.__data__=cn?cn(null):{}}function Qn(W){return this.has(W)&&delete this.__data__[W]}function Ut(W){var ye=this.__data__;if(cn){var Le=ye[W];return Le===g?t:Le}return lt.call(ye,W)?ye[W]:t}function Kr(W){var ye=this.__data__;return cn?ye[W]!==t:lt.call(ye,W)}function $n(W,ye){var Le=this.__data__;return Le[W]=cn&&ye===t?g:ye,this}Vn.prototype.clear=pn,Vn.prototype.delete=Qn,Vn.prototype.get=Ut,Vn.prototype.has=Kr,Vn.prototype.set=$n;function nn(W){var ye=-1,Le=W?W.length:0;for(this.clear();++ye<Le;){var Je=W[ye];this.set(Je[0],Je[1])}}function Zt(){this.__data__=[]}function Dn(W){var ye=this.__data__,Le=Tt(ye,W);if(Le<0)return!1;var Je=ye.length-1;return Le==Je?ye.pop():ae.call(ye,Le,1),!0}function $r(W){var ye=this.__data__,Le=Tt(ye,W);return Le<0?t:ye[Le][1]}function rt(W){return Tt(this.__data__,W)>-1}function Qt(W,ye){var Le=this.__data__,Je=Tt(Le,W);return Je<0?Le.push([W,ye]):Le[Je][1]=ye,this}nn.prototype.clear=Zt,nn.prototype.delete=Dn,nn.prototype.get=$r,nn.prototype.has=rt,nn.prototype.set=Qt;function sn(W){var ye=-1,Le=W?W.length:0;for(this.clear();++ye<Le;){var Je=W[ye];this.set(Je[0],Je[1])}}function un(){this.__data__={hash:new Vn,map:new(dt||nn),string:new Vn}}function Wn(W){return Rr(this,W).delete(W)}function Kn(W){return Rr(this,W).get(W)}function qr(W){return Rr(this,W).has(W)}function z(W,ye){return Rr(this,W).set(W,ye),this}sn.prototype.clear=un,sn.prototype.delete=Wn,sn.prototype.get=Kn,sn.prototype.has=qr,sn.prototype.set=z;function ie(W){var ye=-1,Le=W?W.length:0;for(this.__data__=new sn;++ye<Le;)this.add(W[ye])}function Se(W){return this.__data__.set(W,g),this}function Ae(W){return this.__data__.has(W)}ie.prototype.add=ie.prototype.push=Se,ie.prototype.has=Ae;function xe(W){this.__data__=new nn(W)}function Ge(){this.__data__=new nn}function Ce(W){return this.__data__.delete(W)}function Qe(W){return this.__data__.get(W)}function ht(W){return this.__data__.has(W)}function yt(W,ye){var Le=this.__data__;if(Le instanceof nn){var Je=Le.__data__;if(!dt||Je.length<l-1)return Je.push([W,ye]),this;Le=this.__data__=new sn(Je)}return Le.set(W,ye),this}xe.prototype.clear=Ge,xe.prototype.delete=Ce,xe.prototype.get=Qe,xe.prototype.has=ht,xe.prototype.set=yt;function ot(W,ye){var Le=Nr(W)||Hr(W)?En(W.length,String):[],Je=Le.length,Nt=!!Je;for(var mt in W)(ye||lt.call(W,mt))&&!(Nt&&(mt=="length"||ra(mt,Je)))&&Le.push(mt);return Le}function wt(W,ye,Le){(Le!==t&&!Li(W[ye],Le)||typeof ye=="number"&&Le===t&&!(ye in W))&&(W[ye]=Le)}function qt(W,ye,Le){var Je=W[ye];(!(lt.call(W,ye)&&Li(Je,Le))||Le===t&&!(ye in W))&&(W[ye]=Le)}function Tt(W,ye){for(var Le=W.length;Le--;)if(Li(W[Le][0],ye))return Le;return-1}function vt(W,ye){return W&&Jn(ye,Lr(ye),W)}function tt(W,ye,Le,Je,Nt,mt,Bt){var Ht;if(Je&&(Ht=mt?Je(W,Nt,mt,Bt):Je(W)),Ht!==t)return Ht;if(!Ot(W))return W;var tn=Nr(W);if(tn){if(Ht=Ui(W),!ye)return Tr(W,Ht)}else{var Mn=Fr(W),Hn=Mn==Z||Mn==ee;if(pr(W))return Gr(W,ye);if(Mn==k||Mn==C||Hn&&!mt){if(Pt(W))return mt?W:{};if(Ht=Ni(Hn?{}:W),!ye)return na(W,vt(Ht,W))}else{if(!He[Mn])return mt?W:{};Ht=Pr(W,Mn,tt,ye)}}Bt||(Bt=new xe);var Yn=Bt.get(W);if(Yn)return Yn;if(Bt.set(W,Ht),!tn)var ar=Le?zi(W):Lr(W);return Gt(ar||W,function(Er,cr){ar&&(cr=Er,Er=W[cr]),qt(Ht,cr,tt(Er,ye,Le,Je,cr,W,Bt))}),Ht}function _t(W){return Ot(W)?pe(W):{}}var Jt=ga(At),Vt=bi();function At(W,ye){return W&&Vt(W,ye,Lr)}function It(W,ye){ye=qi(ye,W)?[ye]:yi(ye);for(var Le=0,Je=ye.length;W!=null&&Le<Je;)W=W[nr(ye[Le++])];return Le&&Le==Je?W:t}function nt(W,ye,Le){var Je=ye(W);return Nr(W)?Je:rn(Je,Le(W))}function gt(W){return Nn.call(W)}function kt(W,ye){return W!=null&&ye in Object(W)}function mn(W,ye,Le,Je,Nt){return W===ye?!0:W==null||ye==null||!Ot(W)&&!mr(ye)?W!==W&&ye!==ye:Xt(W,ye,mn,Le,Je,Nt)}function Xt(W,ye,Le,Je,Nt,mt){var Bt=Nr(W),Ht=Nr(ye),tn=A,Mn=A;Bt||(tn=Fr(W),tn=tn==C?k:tn),Ht||(Mn=Fr(ye),Mn=Mn==C?k:Mn);var Hn=tn==k&&!Pt(W),Yn=Mn==k&&!Pt(ye),ar=tn==Mn;if(ar&&!Hn)return mt||(mt=new xe),Bt||Ei(W)?xr(W,ye,Le,Je,Nt,mt):Gi(W,ye,tn,Le,Je,Nt,mt);if(!(Nt&y)){var Er=Hn&&lt.call(W,"__wrapped__"),cr=Yn&&lt.call(ye,"__wrapped__");if(Er||cr){var Xr=Er?W.value():W,jr=cr?ye.value():ye;return mt||(mt=new xe),Le(Xr,jr,Je,Nt,mt)}}return ar?(mt||(mt=new xe),ei(W,ye,Le,Je,Nt,mt)):!1}function fn(W,ye,Le,Je){var Nt=Le.length,mt=Nt,Bt=!Je;if(W==null)return!mt;for(W=Object(W);Nt--;){var Ht=Le[Nt];if(Bt&&Ht[2]?Ht[1]!==W[Ht[0]]:!(Ht[0]in W))return!1}for(;++Nt<mt;){Ht=Le[Nt];var tn=Ht[0],Mn=W[tn],Hn=Ht[1];if(Bt&&Ht[2]){if(Mn===t&&!(tn in W))return!1}else{var Yn=new xe;if(Je)var ar=Je(Mn,Hn,tn,W,ye,Yn);if(!(ar===t?mn(Hn,Mn,Je,p|y,Yn):ar))return!1}}return!0}function hn(W){if(!Ot(W)||ma(W))return!1;var ye=wr(W)||Pt(W)?Lt:it;return ye.test(si(W))}function Sn(W){return mr(W)&&li(W.length)&&!!ft[Nn.call(W)]}function Bn(W){return typeof W=="function"?W:W==null?Mi:typeof W=="object"?Nr(W)?br(W[0],W[1]):Ir(W):lr(W)}function Cr(W){if(!oi(W))return Be(W);var ye=[];for(var Le in Object(W))lt.call(W,Le)&&Le!="constructor"&&ye.push(Le);return ye}function dr(W){if(!Ot(W))return Sa(W);var ye=oi(W),Le=[];for(var Je in W)Je=="constructor"&&(ye||!lt.call(W,Je))||Le.push(Je);return Le}function Ir(W){var ye=Ea(W);return ye.length==1&&ye[0][2]?Vi(ye[0][0],ye[0][1]):function(Le){return Le===W||fn(Le,W,ye)}}function br(W,ye){return qi(W)&&ia(ye)?Vi(nr(W),ye):function(Le){var Je=en(Le,W);return Je===t&&Je===ye?Rn(Le,W):mn(ye,Je,t,p|y)}}function Fi(W,ye,Le,Je,Nt){if(W!==ye){if(!(Nr(ye)||Ei(ye)))var mt=dr(ye);Gt(mt||ye,function(Bt,Ht){if(mt&&(Ht=Bt,Bt=ye[Ht]),Ot(Bt))Nt||(Nt=new xe),xn(W,ye,Ht,Le,Fi,Je,Nt);else{var tn=Je?Je(W[Ht],Bt,Ht+"",W,ye,Nt):t;tn===t&&(tn=Bt),wt(W,Ht,tn)}})}}function xn(W,ye,Le,Je,Nt,mt,Bt){var Ht=W[Le],tn=ye[Le],Mn=Bt.get(tn);if(Mn){wt(W,Le,Mn);return}var Hn=mt?mt(Ht,tn,Le+"",W,ye,Bt):t,Yn=Hn===t;Yn&&(Hn=tn,Nr(tn)||Ei(tn)?Nr(Ht)?Hn=Ht:Br(Ht)?Hn=Tr(Ht):(Yn=!1,Hn=tt(tn,!0)):ir(tn)||Hr(tn)?Hr(Ht)?Hn=ci(Ht):!Ot(Ht)||Je&&wr(Ht)?(Yn=!1,Hn=tt(tn,!0)):Hn=Ht:Yn=!1),Yn&&(Bt.set(tn,Hn),Nt(Hn,tn,Je,mt,Bt),Bt.delete(tn)),wt(W,Le,Hn)}function Vr(W){return function(ye){return It(ye,W)}}function ea(W,ye){return ye=Fe(ye===t?W.length-1:ye,0),function(){for(var Le=arguments,Je=-1,Nt=Fe(Le.length-ye,0),mt=Array(Nt);++Je<Nt;)mt[Je]=Le[ye+Je];Je=-1;for(var Bt=Array(ye+1);++Je<ye;)Bt[Je]=Le[Je];return Bt[ye]=mt,pt(W,this,Bt)}}function Tn(W){if(typeof W=="string")return W;if(er(W))return yr?yr.call(W):"";var ye=W+"";return ye=="0"&&1/W==-b?"-0":ye}function yi(W){return Nr(W)?W:Oa(W)}function Gr(W,ye){if(ye)return W.slice();var Le=new W.constructor(W.length);return W.copy(Le),Le}function sr(W){var ye=new W.constructor(W.byteLength);return new Ee(ye).set(new Ee(W)),ye}function ta(W,ye){var Le=ye?sr(W.buffer):W.buffer;return new W.constructor(Le,W.byteOffset,W.byteLength)}function _i(W,ye,Le){var Je=ye?Le(an(W),!0):an(W);return St(Je,je,new W.constructor)}function Bi(W){var ye=new W.constructor(W.source,bt.exec(W));return ye.lastIndex=W.lastIndex,ye}function ki(W,ye,Le){var Je=ye?Le(Gn(W),!0):Gn(W);return St(Je,We,new W.constructor)}function $i(W){return Zn?Object(Zn.call(W)):{}}function ct(W,ye){var Le=ye?sr(W.buffer):W.buffer;return new W.constructor(Le,W.byteOffset,W.length)}function Tr(W,ye){var Le=-1,Je=W.length;for(ye||(ye=Array(Je));++Le<Je;)ye[Le]=W[Le];return ye}function Jn(W,ye,Le,Je){Le||(Le={});for(var Nt=-1,mt=ye.length;++Nt<mt;){var Bt=ye[Nt],Ht=Je?Je(Le[Bt],W[Bt],Bt,Le,W):t;qt(Le,Bt,Ht===t?W[Bt]:Ht)}return Le}function na(W,ye){return Jn(W,pa(W),ye)}function Yr(W){return ea(function(ye,Le){var Je=-1,Nt=Le.length,mt=Nt>1?Le[Nt-1]:t,Bt=Nt>2?Le[2]:t;for(mt=W.length>3&&typeof mt=="function"?(Nt--,mt):t,Bt&&ni(Le[0],Le[1],Bt)&&(mt=Nt<3?t:mt,Nt=1),ye=Object(ye);++Je<Nt;){var Ht=Le[Je];Ht&&W(ye,Ht,Je,mt)}return ye})}function ga(W,ye){return function(Le,Je){if(Le==null)return Le;if(!rr(Le))return W(Le,Je);for(var Nt=Le.length,mt=ye?Nt:-1,Bt=Object(Le);(ye?mt--:++mt<Nt)&&Je(Bt[mt],mt,Bt)!==!1;);return Le}}function bi(W){return function(ye,Le,Je){for(var Nt=-1,mt=Object(ye),Bt=Je(ye),Ht=Bt.length;Ht--;){var tn=Bt[W?Ht:++Nt];if(Le(mt[tn],tn,mt)===!1)break}return ye}}function xr(W,ye,Le,Je,Nt,mt){var Bt=Nt&y,Ht=W.length,tn=ye.length;if(Ht!=tn&&!(Bt&&tn>Ht))return!1;var Mn=mt.get(W);if(Mn&&mt.get(ye))return Mn==ye;var Hn=-1,Yn=!0,ar=Nt&p?new ie:t;for(mt.set(W,ye),mt.set(ye,W);++Hn<Ht;){var Er=W[Hn],cr=ye[Hn];if(Je)var Xr=Bt?Je(cr,Er,Hn,ye,W,mt):Je(Er,cr,Hn,W,ye,mt);if(Xr!==t){if(Xr)continue;Yn=!1;break}if(ar){if(!gn(ye,function(jr,kr){if(!ar.has(kr)&&(Er===jr||Le(Er,jr,Je,Nt,mt)))return ar.add(kr)})){Yn=!1;break}}else if(!(Er===cr||Le(Er,cr,Je,Nt,mt))){Yn=!1;break}}return mt.delete(W),mt.delete(ye),Yn}function Gi(W,ye,Le,Je,Nt,mt,Bt){switch(Le){case S:if(W.byteLength!=ye.byteLength||W.byteOffset!=ye.byteOffset)return!1;W=W.buffer,ye=ye.buffer;case V:return!(W.byteLength!=ye.byteLength||!Je(new Ee(W),new Ee(ye)));case B:case M:case O:return Li(+W,+ye);case N:return W.name==ye.name&&W.message==ye.message;case ce:case te:return W==ye+"";case F:var Ht=an;case U:var tn=mt&y;if(Ht||(Ht=Gn),W.size!=ye.size&&!tn)return!1;var Mn=Bt.get(W);if(Mn)return Mn==ye;mt|=p,Bt.set(W,ye);var Hn=xr(Ht(W),Ht(ye),Je,Nt,mt,Bt);return Bt.delete(W),Hn;case re:if(Zn)return Zn.call(W)==Zn.call(ye)}return!1}function ei(W,ye,Le,Je,Nt,mt){var Bt=Nt&y,Ht=Lr(W),tn=Ht.length,Mn=Lr(ye),Hn=Mn.length;if(tn!=Hn&&!Bt)return!1;for(var Yn=tn;Yn--;){var ar=Ht[Yn];if(!(Bt?ar in ye:lt.call(ye,ar)))return!1}var Er=mt.get(W);if(Er&&mt.get(ye))return Er==ye;var cr=!0;mt.set(W,ye),mt.set(ye,W);for(var Xr=Bt;++Yn<tn;){ar=Ht[Yn];var jr=W[ar],kr=ye[ar];if(Je)var aa=Bt?Je(kr,jr,ar,ye,W,mt):Je(jr,kr,ar,W,ye,mt);if(!(aa===t?jr===kr||Le(jr,kr,Je,Nt,mt):aa)){cr=!1;break}Xr||(Xr=ar=="constructor")}if(cr&&!Xr){var In=W.constructor,oa=ye.constructor;In!=oa&&"constructor"in W&&"constructor"in ye&&!(typeof In=="function"&&In instanceof In&&typeof oa=="function"&&oa instanceof oa)&&(cr=!1)}return mt.delete(W),mt.delete(ye),cr}function zi(W){return nt(W,Lr,pa)}function Hi(){var W=_n.iteratee||Ur;return W=W===Ur?Bn:W,arguments.length?W(arguments[0],arguments[1]):W}function Rr(W,ye){var Le=W.__data__;return wi(ye)?Le[typeof ye=="string"?"string":"hash"]:Le.map}function Ea(W){for(var ye=Lr(W),Le=ye.length;Le--;){var Je=ye[Le],Nt=W[Je];ye[Le]=[Je,Nt,ia(Nt)]}return ye}function xi(W,ye){var Le=Yt(W,ye);return hn(Le)?Le:t}var pa=de?Dr(de,Object):fi,Fr=gt;(et&&Fr(new et(new ArrayBuffer(1)))!=S||dt&&Fr(new dt)!=F||Ye&&Fr(Ye.resolve())!=H||Te&&Fr(new Te)!=U||xt&&Fr(new xt)!=ue)&&(Fr=function(W){var ye=Nn.call(W),Le=ye==k?W.constructor:t,Je=Le?si(Le):t;if(Je)switch(Je){case on:return S;case Dt:return F;case Ft:return H;case An:return U;case Ln:return ue}return ye});function gr(W,ye,Le){ye=qi(ye,W)?[ye]:yi(ye);for(var Je,Nt=-1,Bt=ye.length;++Nt<Bt;){var mt=nr(ye[Nt]);if(!(Je=W!=null&&Le(W,mt)))break;W=W[mt]}if(Je)return Je;var Bt=W?W.length:0;return!!Bt&&li(Bt)&&ra(mt,Bt)&&(Nr(W)||Hr(W))}function Ui(W){var ye=W.length,Le=W.constructor(ye);return ye&&typeof W[0]=="string"&&lt.call(W,"index")&&(Le.index=W.index,Le.input=W.input),Le}function Ni(W){return typeof W.constructor=="function"&&!oi(W)?_t(be(W)):{}}function Pr(W,ye,Le,Je){var Nt=W.constructor;switch(ye){case V:return sr(W);case B:case M:return new Nt(+W);case S:return ta(W,Je);case T:case G:case Q:case le:case fe:case q:case se:case D:case oe:return ct(W,Je);case F:return _i(W,Je,Le);case O:case te:return new Nt(W);case ce:return Bi(W);case U:return ki(W,Je,Le);case re:return $i(W)}}function ra(W,ye){return ye=ye??E,!!ye&&(typeof W=="number"||ut.test(W))&&W>-1&&W%1==0&&W<ye}function ni(W,ye,Le){if(!Ot(Le))return!1;var Je=typeof ye;return(Je=="number"?rr(Le)&&ra(ye,Le.length):Je=="string"&&ye in Le)?Li(Le[ye],W):!1}function qi(W,ye){if(Nr(W))return!1;var Le=typeof W;return Le=="number"||Le=="symbol"||Le=="boolean"||W==null||er(W)?!0:Re.test(W)||!Pe.test(W)||ye!=null&&W in Object(ye)}function wi(W){var ye=typeof W;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?W!=="__proto__":W===null}function ma(W){return!!zn&&zn in W}function oi(W){var ye=W&&W.constructor,Le=typeof ye=="function"&&ye.prototype||Pn;return W===Le}function ia(W){return W===W&&!Ot(W)}function Vi(W,ye){return function(Le){return Le==null?!1:Le[W]===ye&&(ye!==t||W in Object(Le))}}function Sa(W){var ye=[];if(W!=null)for(var Le in Object(W))ye.push(Le);return ye}var Oa=Wi(function(W){W=va(W);var ye=[];return Oe.test(W)&&ye.push(""),W.replace(Ne,function(Le,Je,Nt,mt){ye.push(Nt?mt.replace(Ze,"$1"):Je||Le)}),ye});function nr(W){if(typeof W=="string"||er(W))return W;var ye=W+"";return ye=="0"&&1/W==-b?"-0":ye}function si(W){if(W!=null){try{return Et.call(W)}catch{}try{return W+""}catch{}}return""}function zr(W){for(var ye=-1,Le=W?W.length:0,Je=0,Nt=[];++ye<Le;){var mt=W[ye];mt&&(Nt[Je++]=mt)}return Nt}function ui(W,ye){var Le=Nr(W)?Gt:Jt;return Le(W,Hi(ye,3))}function Wi(W,ye){if(typeof W!="function"||ye&&typeof ye!="function")throw new TypeError(h);var Le=function(){var Je=arguments,Nt=ye?ye.apply(this,Je):Je[0],mt=Le.cache;if(mt.has(Nt))return mt.get(Nt);var Bt=W.apply(this,Je);return Le.cache=mt.set(Nt,Bt),Bt};return Le.cache=new(Wi.Cache||sn),Le}Wi.Cache=sn;function ri(W){return tt(W,!1,!0)}function Li(W,ye){return W===ye||W!==W&&ye!==ye}function Hr(W){return Br(W)&&lt.call(W,"callee")&&(!he.call(W,"callee")||Nn.call(W)==C)}var Nr=Array.isArray;function rr(W){return W!=null&&li(W.length)&&!wr(W)}function Br(W){return mr(W)&&rr(W)}var pr=me||Ji;function Ai(W){if(rr(W)&&(Nr(W)||typeof W=="string"||typeof W.splice=="function"||pr(W)||Hr(W)))return!W.length;var ye=Fr(W);if(ye==F||ye==U)return!W.size;if(zt||oi(W))return!Be(W).length;for(var Le in W)if(lt.call(W,Le))return!1;return!0}function wr(W){var ye=Ot(W)?Nn.call(W):"";return ye==Z||ye==ee}function li(W){return typeof W=="number"&&W>-1&&W%1==0&&W<=E}function Ot(W){var ye=typeof W;return!!W&&(ye=="object"||ye=="function")}function mr(W){return!!W&&typeof W=="object"}function ir(W){if(!mr(W)||Nn.call(W)!=k||Pt(W))return!1;var ye=be(W);if(ye===null)return!0;var Le=lt.call(ye,"constructor")&&ye.constructor;return typeof Le=="function"&&Le instanceof Le&&Et.call(Le)==Wt}function er(W){return typeof W=="symbol"||mr(W)&&Nn.call(W)==re}var Ei=qe?yn(qe):Sn;function ci(W){return Jn(W,ur(W))}function va(W){return W==null?"":Tn(W)}function en(W,ye,Le){var Je=W==null?t:It(W,ye);return Je===t?Le:Je}function Rn(W,ye){return W!=null&&gr(W,ye,kt)}function Lr(W){return rr(W)?ot(W):Cr(W)}function ur(W){return rr(W)?ot(W,!0):dr(W)}var ii=Yr(function(W,ye,Le){Fi(W,ye,Le)});function Mi(W){return W}function Ur(W){return Bn(typeof W=="function"?W:tt(W,!0))}function lr(W){return qi(W)?Xe(nr(W)):Vr(W)}function fi(){return[]}function Ji(){return!1}_n.compact=zr,_n.iteratee=Ur,_n.keys=Lr,_n.keysIn=ur,_n.memoize=Wi,_n.merge=ii,_n.property=lr,_n.toPlainObject=ci,_n.clone=ri,_n.eq=Li,_n.forEach=ui,_n.get=en,_n.hasIn=Rn,_n.identity=Mi,_n.isArguments=Hr,_n.isArray=Nr,_n.isArrayLike=rr,_n.isArrayLikeObject=Br,_n.isBuffer=pr,_n.isEmpty=Ai,_n.isFunction=wr,_n.isLength=li,_n.isObject=Ot,_n.isObjectLike=mr,_n.isPlainObject=ir,_n.isSymbol=er,_n.isTypedArray=Ei,_n.stubArray=fi,_n.stubFalse=Ji,_n.toString=va,_n.each=ui,_n.VERSION=a,Y&&((Y.exports=_n)._=_n,_e._=_n)}).call(commonjsGlobal)})(lodash_custom,lodash_customExports);var geojsonRewind=rewind$1;function rewind$1(n,e){var t=n&&n.type,a;if(t==="FeatureCollection")for(a=0;a<n.features.length;a++)rewind$1(n.features[a],e);else if(t==="GeometryCollection")for(a=0;a<n.geometries.length;a++)rewind$1(n.geometries[a],e);else if(t==="Feature")rewind$1(n.geometry,e);else if(t==="Polygon")rewindRings(n.coordinates,e);else if(t==="MultiPolygon")for(a=0;a<n.coordinates.length;a++)rewindRings(n.coordinates[a],e);return n}function rewindRings(n,e){if(n.length!==0){rewindRing(n[0],e);for(var t=1;t<n.length;t++)rewindRing(n[t],!e)}}function rewindRing(n,e){for(var t=0,a=0,l=0,h=n.length,g=h-1;l<h;g=l++){var p=(n[l][0]-n[g][0])*(n[g][1]+n[l][1]),y=t+p;a+=Math.abs(t)>=Math.abs(p)?t-y+p:p-y+t,t=y}t+a>=0!=!!e&&n.reverse()}var osmPolygonFeaturesExports={},osmPolygonFeatures={get exports(){return osmPolygonFeaturesExports},set exports(n){osmPolygonFeaturesExports=n}};const require$$0$1=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];(function(n){n.exports=require$$0$1})(osmPolygonFeatures);var _=lodash_customExports,rewind=geojsonRewind,polygonFeatures$1={};osmPolygonFeaturesExports.forEach(function(n){if(n.polygon==="all")polygonFeatures$1[n.key]=!0;else{var e=n.polygon==="whitelist"?"included_values":"excluded_values",t={};n.values.forEach(function(a){t[a]=!0}),polygonFeatures$1[n.key]={},polygonFeatures$1[n.key][e]=t}});function default_deduplicator(n,e){return(n.version||e.version)&&n.version!==e.version?(+n.version||0)>(+e.version||0)?n:e:_.merge(n,e)}var osmtogeojson={};osmtogeojson=function(n,e,t){e=_.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:polygonFeatures$1,deduplicator:default_deduplicator},e);var a;return typeof XMLDocument<"u"&&n instanceof XMLDocument||typeof XMLDocument>"u"&&n.childNodes?a=h(n):a=l(n),a;function l(y){var b=new Array,E=new Array,C=new Array;function A(H){var ce=_.clone(H);ce.lat=H.center.lat,ce.lon=H.center.lon,ce.__is_center_placeholder=!0,b.push(ce)}function B(H){var ce=_.clone(H);ce.nodes=[];function U(te,re,ue){var V={type:"node",id:"_"+ce.type+"/"+ce.id+"bounds"+ue,lat:te,lon:re};ce.nodes.push(V.id),b.push(V)}U(ce.bounds.minlat,ce.bounds.minlon,1),U(ce.bounds.maxlat,ce.bounds.minlon,2),U(ce.bounds.maxlat,ce.bounds.maxlon,3),U(ce.bounds.minlat,ce.bounds.maxlon,4),ce.nodes.push(ce.nodes[0]),ce.__is_bounds_placeholder=!0,E.push(ce)}function M(H){function ce(U,te,re){var ue={type:"node",id:re,lat:U,lon:te};b.push(ue)}_.isArray(H.nodes)||(H.nodes=H.geometry.map(function(U){return U!==null?"_anonymous@"+U.lat+"/"+U.lon:"_anonymous@unknown_location"})),H.geometry.forEach(function(U,te){U&&ce(U.lat,U.lon,H.nodes[te])})}function N(H){function ce(te,re,ue){var V={type:"node",id:ue,lat:te,lon:re};b.push(V)}function U(te,re){if(E.some(function(S){return S.type=="way"&&S.id==re}))return;var ue={type:"way",id:re,nodes:[]};function V(S,T){var G={type:"node",id:"_anonymous@"+S+"/"+T,lat:S,lon:T};ue.nodes.push(G.id),b.push(G)}te.forEach(function(S){S?V(S.lat,S.lon):ue.nodes.push(void 0)}),E.push(ue)}H.members.forEach(function(te,re){te.type=="node"?te.lat&&ce(te.lat,te.lon,te.ref):te.type=="way"&&te.geometry&&(te.ref="_fullGeom"+te.ref,U(te.geometry,te.ref))})}for(var Z=0;Z<y.elements.length;Z++)switch(y.elements[Z].type){case"node":var ee=y.elements[Z];b.push(ee);break;case"way":var F=_.clone(y.elements[Z]);F.nodes=_.clone(F.nodes),E.push(F),F.center&&A(F),F.geometry?M(F):F.bounds&&B(F);break;case"relation":var O=_.clone(y.elements[Z]);O.members=_.clone(O.members),C.push(O);var k=O.members&&O.members.some(function(H){return H.type=="node"&&H.lat||H.type=="way"&&H.geometry&&H.geometry.length>0});O.center&&A(O),k?N(O):O.bounds&&B(O);break}return g(b,E,C)}function h(y){var b=new Array,E=new Array,C=new Array;function A(O,k,H){O.hasAttribute(H)&&(k[H]=O.getAttribute(H))}function B(O,k){var H=_.clone(O);A(k,H,"lat"),A(k,H,"lon"),H.__is_center_placeholder=!0,b.push(H)}function M(O,k){var H=_.clone(O);H.nodes=[];function ce(U,te,re){var ue={type:"node",id:"_"+H.type+"/"+H.id+"bounds"+re,lat:U,lon:te};H.nodes.push(ue.id),b.push(ue)}ce(k.getAttribute("minlat"),k.getAttribute("minlon"),1),ce(k.getAttribute("maxlat"),k.getAttribute("minlon"),2),ce(k.getAttribute("maxlat"),k.getAttribute("maxlon"),3),ce(k.getAttribute("minlat"),k.getAttribute("maxlon"),4),H.nodes.push(H.nodes[0]),H.__is_bounds_placeholder=!0,E.push(H)}function N(O,k){function H(ce,U,te){var re={type:"node",id:te,lat:ce,lon:U};return b.push(re),re.id}_.isArray(O.nodes)||(O.nodes=[],_.each(k,function(ce,U){O.nodes.push("_anonymous@"+ce.getAttribute("lat")+"/"+ce.getAttribute("lon"))})),_.each(k,function(ce,U){ce.getAttribute("lat")&&H(ce.getAttribute("lat"),ce.getAttribute("lon"),O.nodes[U])})}function Z(O,k){function H(U,te,re){var ue={type:"node",id:re,lat:U,lon:te};b.push(ue)}function ce(U,te){if(E.some(function(V){return V.type=="way"&&V.id==te}))return;var re={type:"way",id:te,nodes:[]};function ue(V,S){var T={type:"node",id:"_anonymous@"+V+"/"+S,lat:V,lon:S};re.nodes.push(T.id),b.push(T)}_.each(U,function(V){V.getAttribute("lat")?ue(V.getAttribute("lat"),V.getAttribute("lon")):re.nodes.push(void 0)}),E.push(re)}_.each(k,function(U,te){O.members[te].type=="node"?U.getAttribute("lat")&&H(U.getAttribute("lat"),U.getAttribute("lon"),O.members[te].ref):O.members[te].type=="way"&&U.getElementsByTagName("nd").length>0&&(O.members[te].ref="_fullGeom"+O.members[te].ref,ce(U.getElementsByTagName("nd"),O.members[te].ref))})}_.each(y.getElementsByTagName("node"),function(O,k){var H={};_.each(O.getElementsByTagName("tag"),function(U){H[U.getAttribute("k")]=U.getAttribute("v")});var ce={type:"node"};A(O,ce,"id"),A(O,ce,"lat"),A(O,ce,"lon"),A(O,ce,"version"),A(O,ce,"timestamp"),A(O,ce,"changeset"),A(O,ce,"uid"),A(O,ce,"user"),_.isEmpty(H)||(ce.tags=H),b.push(ce)});var ee,F;return _.each(y.getElementsByTagName("way"),function(O,k){var H={},ce=[];_.each(O.getElementsByTagName("tag"),function(re){H[re.getAttribute("k")]=re.getAttribute("v")});var U=!1;_.each(O.getElementsByTagName("nd"),function(re,ue){var V;(V=re.getAttribute("ref"))&&(ce[ue]=V),!U&&re.getAttribute("lat")&&(U=!0)});var te={type:"way"};A(O,te,"id"),A(O,te,"version"),A(O,te,"timestamp"),A(O,te,"changeset"),A(O,te,"uid"),A(O,te,"user"),ce.length>0&&(te.nodes=ce),_.isEmpty(H)||(te.tags=H),(ee=O.getElementsByTagName("center")[0])&&B(te,ee),U?N(te,O.getElementsByTagName("nd")):(F=O.getElementsByTagName("bounds")[0])&&M(te,F),E.push(te)}),_.each(y.getElementsByTagName("relation"),function(O,k){var H={},ce=[];_.each(O.getElementsByTagName("tag"),function(re){H[re.getAttribute("k")]=re.getAttribute("v")});var U=!1;_.each(O.getElementsByTagName("member"),function(re,ue){ce[ue]={},A(re,ce[ue],"ref"),A(re,ce[ue],"role"),A(re,ce[ue],"type"),(!U&&ce[ue].type=="node"&&re.getAttribute("lat")||ce[ue].type=="way"&&re.getElementsByTagName("nd").length>0)&&(U=!0)});var te={type:"relation"};A(O,te,"id"),A(O,te,"version"),A(O,te,"timestamp"),A(O,te,"changeset"),A(O,te,"uid"),A(O,te,"user"),ce.length>0&&(te.members=ce),_.isEmpty(H)||(te.tags=H),(ee=O.getElementsByTagName("center")[0])&&B(te,ee),U?Z(te,O.getElementsByTagName("member")):(F=O.getElementsByTagName("bounds")[0])&&M(te,F),C.push(te)}),g(b,E,C)}function g(y,b,E){function C(Pe,Re){if(typeof Re!="object"&&(Re={}),typeof e.uninterestingTags=="function")return!e.uninterestingTags(Pe,Re);for(var Oe in Pe)if(e.uninterestingTags[Oe]!==!0&&!(Re[Oe]===!0||Re[Oe]===Pe[Oe]))return!0;return!1}function A(Pe){var Re={timestamp:Pe.timestamp,version:Pe.version,changeset:Pe.changeset,user:Pe.user,uid:Pe.uid};for(var Oe in Re)Re[Oe]===void 0&&delete Re[Oe];return Re}for(var B=new Object,M=new Object,N=0;N<y.length;N++){var Z=y[N];B[Z.id]!==void 0&&(Z=e.deduplicator(Z,B[Z.id])),B[Z.id]=Z,typeof Z.tags<"u"&&C(Z.tags)&&(M[Z.id]=!0)}for(var N=0;N<E.length;N++)if(_.isArray(E[N].members))for(var ee=0;ee<E[N].members.length;ee++)E[N].members[ee].type=="node"&&(M[E[N].members[ee].ref]=!0);for(var F=new Object,O=new Object,N=0;N<b.length;N++){var k=b[N];if(F[k.id]&&(k=e.deduplicator(k,F[k.id])),F[k.id]=k,_.isArray(k.nodes))for(var ee=0;ee<k.nodes.length;ee++)typeof k.nodes[ee]!="object"&&(O[k.nodes[ee]]=!0,k.nodes[ee]=B[k.nodes[ee]])}var H=new Array;for(var ce in B){var Z=B[ce];(!O[ce]||M[ce])&&H.push(Z)}for(var U=new Array,N=0;N<E.length;N++){var te=E[N];U[te.id]&&(te=e.deduplicator(te,U[te.id])),U[te.id]=te}var re={node:{},way:{},relation:{}};for(var ce in U){var te=U[ce];if(!_.isArray(te.members)){e.verbose&&console.warn("Relation",te.type+"/"+te.id,"ignored because it has no members");continue}for(var ee=0;ee<te.members.length;ee++){var ue=te.members[ee].type,V=te.members[ee].ref;if(typeof V!="number"&&(V=V.replace("_fullGeom","")),!re[ue]){e.verbose&&console.warn("Relation",te.type+"/"+te.id,"member",ue+"/"+V,"ignored because it has an invalid type");continue}typeof re[ue][V]>"u"&&(re[ue][V]=[]),re[ue][V].push({role:te.members[ee].role,rel:te.id,reltags:te.tags})}}var S,T=[];for(N=0;N<H.length;N++){if(typeof H[N].lon>"u"||typeof H[N].lat>"u"){e.verbose&&console.warn("POI",H[N].type+"/"+H[N].id,"ignored because it lacks coordinates");continue}var G={type:"Feature",id:H[N].type+"/"+H[N].id,properties:{type:H[N].type,id:H[N].id,tags:H[N].tags||{},relations:re.node[H[N].id]||[],meta:A(H[N])},geometry:{type:"Point",coordinates:[+H[N].lon,+H[N].lat]}};H[N].__is_center_placeholder&&(G.properties.geometry="center"),t?t(G):T.push(G)}for(var Q=[],le=[],N=0;N<E.length;N++)if(U[E[N].id]===E[N]){if(typeof E[N].tags<"u"&&(E[N].tags.type=="route"||E[N].tags.type=="waterway")){let Re=function(Oe){var Ne=!1,Ue;Ue=Oe.members.filter(function(ut){return ut.type==="way"}),Ue=Ue.map(function(ut){var ft=F[ut.ref];if(ft===void 0||ft.nodes===void 0){e.verbose&&console.warn("Route "+Oe.type+"/"+Oe.id,"tainted by a missing or incomplete  way",ut.type+"/"+ut.ref),Ne=!0;return}return{id:ut.ref,role:ut.role,way:ft,nodes:ft.nodes.filter(function(He){return He!==void 0?!0:(Ne=!0,e.verbose&&console.warn("Route",Oe.type+"/"+Oe.id,"tainted by a way",ut.type+"/"+ut.ref,"with a missing node"),!1)})}}),Ue=_.compact(Ue);var Ze;Ze=join(Ue);var bt=[];if(bt=_.compact(Ze.map(function(ut){return _.compact(ut.map(function(ft){return[+ft.lon,+ft.lat]}))})),bt.length==0)return e.verbose&&console.warn("Route",Oe.type+"/"+Oe.id,"contains no coordinates"),!1;var it={type:"Feature",id:Oe.type+"/"+Oe.id,properties:{type:Oe.type,id:Oe.id,tags:Oe.tags||{},relations:re[Oe.type][Oe.id]||[],meta:A(Oe)},geometry:{type:bt.length===1?"LineString":"MultiLineString",coordinates:bt.length===1?bt[0]:bt}};return Ne&&(e.verbose&&console.warn("Route",Oe.type+"/"+Oe.id,"is tainted"),it.properties.tainted=!0),it};if(!_.isArray(E[N].members)){e.verbose&&console.warn("Route",E[N].type+"/"+E[N].id,"ignored because it has no members");continue}if(E[N].members.forEach(function(Oe){F[Oe.ref]&&!C(F[Oe.ref].tags)&&(F[Oe.ref].is_skippablerelationmember=!0)}),G=Re(E[N]),G===!1){e.verbose&&console.warn("Route relation",E[N].type+"/"+E[N].id,"ignored because it has invalid geometry");continue}t?t(rewind(G)):le.push(G)}if(typeof E[N].tags<"u"&&(E[N].tags.type=="multipolygon"||E[N].tags.type=="boundary")){let Oe=function(Ne,Ue){var Ze=!1,bt=q?"way":"relation",it=typeof Ne.id=="number"?Ne.id:+Ne.id.replace("_fullGeom",""),ut;ut=Ue.members.filter(function(Me){return Me.type==="way"}),ut=ut.map(function(Me){var qe=F[Me.ref];if(qe===void 0||qe.nodes===void 0){e.verbose&&console.warn("Multipolygon",bt+"/"+it,"tainted by a missing or incomplete way",Me.type+"/"+Me.ref),Ze=!0;return}return{id:Me.ref,role:Me.role||"outer",way:qe,nodes:qe.nodes.filter(function(je){return je!==void 0?!0:(Ze=!0,e.verbose&&console.warn("Multipolygon",bt+"/"+it,"tainted by a way",Me.type+"/"+Me.ref,"with a missing node"),!1)})}}),ut=_.compact(ut);var ft,He;ft=join(ut.filter(function(Me){return Me.role==="outer"})),He=join(ut.filter(function(Me){return Me.role==="inner"}));var Mt;function wn(Me){var qe=function(rn,St){for(var gn=0;gn<St.length;gn++)if(We(St[gn],rn))return!0;return!1},je=function(rn){return rn.map(function(St){return[+St.lat,+St.lon]})},We=function(rn,St){for(var gn=rn[0],Xe=rn[1],En=!1,yn=0,Yt=St.length-1;yn<St.length;Yt=yn++){var Pt=St[yn][0],an=St[yn][1],Dr=St[Yt][0],Gn=St[Yt][1],Cn=an>Xe!=Gn>Xe&&gn<(Dr-Pt)*(Xe-an)/(Gn-an)+Pt;Cn&&(En=!En)}return En},pt,Gt;for(Me=je(Me),pt=0;pt<ft.length;pt++)if(Gt=je(ft[pt]),qe(Gt,Me))return pt}Mt=ft.map(function(Me){return[Me]});for(var Ct=0;Ct<He.length;Ct++){var _e=wn(He[Ct]);_e!==void 0?Mt[_e].push(He[Ct]):e.verbose&&console.warn("Multipolygon",bt+"/"+it,"contains an inner ring with no containing outer")}var Y=[];if(Y=_.compact(Mt.map(function(Me){var qe=_.compact(Me.map(function(je){if(je.length<4){e.verbose&&console.warn("Multipolygon",bt+"/"+it,"contains a ring with less than four nodes");return}return _.compact(je.map(function(We){return[+We.lon,+We.lat]}))}));if(qe.length==0){e.verbose&&console.warn("Multipolygon",bt+"/"+it,"contains an empty ring cluster");return}return qe})),Y.length==0)return e.verbose&&console.warn("Multipolygon",bt+"/"+it,"contains no coordinates"),!1;var X="MultiPolygon";Y.length===1&&(X="Polygon",Y=Y[0]);var we={type:"Feature",id:Ne.type+"/"+it,properties:{type:Ne.type,id:it,tags:Ne.tags||{},relations:re[Ne.type][Ne.id]||[],meta:A(Ne)},geometry:{type:X,coordinates:Y}};return Ze&&(e.verbose&&console.warn("Multipolygon",bt+"/"+it,"is tainted"),we.properties.tainted=!0),we};if(!_.isArray(E[N].members)){e.verbose&&console.warn("Multipolygon",E[N].type+"/"+E[N].id,"ignored because it has no members");continue}for(var fe=0,ee=0;ee<E[N].members.length;ee++)E[N].members[ee].role=="outer"?fe++:e.verbose&&E[N].members[ee].role!="inner"&&console.warn("Multipolygon",E[N].type+"/"+E[N].id,"member",E[N].members[ee].type+"/"+E[N].members[ee].ref,'ignored because it has an invalid role: "'+E[N].members[ee].role+'"');if(E[N].members.forEach(function(Ne){F[Ne.ref]&&(Ne.role==="outer"&&!C(F[Ne.ref].tags,E[N].tags)&&(F[Ne.ref].is_skippablerelationmember=!0),Ne.role==="inner"&&!C(F[Ne.ref].tags)&&(F[Ne.ref].is_skippablerelationmember=!0))}),fe==0){e.verbose&&console.warn("Multipolygon relation",E[N].type+"/"+E[N].id,"ignored because it has no outer ways");continue}var q=!1;fe==1&&!C(E[N].tags,{type:!0})&&(q=!0);var G=null;if(!q)G=Oe(E[N],E[N]);else{var se=E[N].members.filter(function(Ne){return Ne.role==="outer"})[0];if(se=F[se.ref],se===void 0){e.verbose&&console.warn("Multipolygon relation",E[N].type+"/"+E[N].id,"ignored because outer way",se.type+"/"+se.ref,"is missing");continue}se.is_skippablerelationmember=!0,G=Oe(se,E[N])}if(G===!1){e.verbose&&console.warn("Multipolygon relation",E[N].type+"/"+E[N].id,"ignored because it has invalid geometry");continue}t?t(rewind(G)):le.push(G)}}for(var N=0;N<b.length;N++)if(F[b[N].id]===b[N]){if(!_.isArray(b[N].nodes)){e.verbose&&console.warn("Way",b[N].type+"/"+b[N].id,"ignored because it has no nodes");continue}if(!b[N].is_skippablerelationmember){typeof b[N].id!="number"&&(b[N].id=+b[N].id.replace("_fullGeom","")),b[N].tainted=!1,b[N].hidden=!1;var D=new Array;for(ee=0;ee<b[N].nodes.length;ee++)typeof b[N].nodes[ee]=="object"?D.push([+b[N].nodes[ee].lon,+b[N].nodes[ee].lat]):(e.verbose&&console.warn("Way",b[N].type+"/"+b[N].id,"is tainted by an invalid node"),b[N].tainted=!0);if(D.length<=1){e.verbose&&console.warn("Way",b[N].type+"/"+b[N].id,"ignored because it contains too few nodes");continue}var oe="LineString";typeof b[N].nodes[0]<"u"&&typeof b[N].nodes[b[N].nodes.length-1]<"u"&&b[N].nodes[0].id===b[N].nodes[b[N].nodes.length-1].id&&(typeof b[N].tags<"u"&&p(b[N].tags)||b[N].__is_bounds_placeholder)&&(oe="Polygon",D=[D]);var G={type:"Feature",id:b[N].type+"/"+b[N].id,properties:{type:b[N].type,id:b[N].id,tags:b[N].tags||{},relations:re.way[b[N].id]||[],meta:A(b[N])},geometry:{type:oe,coordinates:D}};b[N].tainted&&(e.verbose&&console.warn("Way",b[N].type+"/"+b[N].id,"is tainted"),G.properties.tainted=!0),b[N].__is_bounds_placeholder&&(G.properties.geometry="bounds"),t?t(rewind(G)):oe=="LineString"?Q.push(G):le.push(G)}}return t?!0:(S={type:"FeatureCollection",features:[]},S.features=S.features.concat(le),S.features=S.features.concat(Q),S.features=S.features.concat(T),e.flatProperties&&S.features.forEach(function(Pe){Pe.properties=_.merge(Pe.properties.meta,Pe.properties.tags,{id:Pe.properties.type+"/"+Pe.properties.id})}),S=rewind(S),S)}function p(y){var b=e.polygonFeatures;if(typeof b=="function")return b(y);if(y.area==="no")return!1;for(var E in y){var C=y[E],A=b[E];if(!(typeof A>"u")&&C!=="no"&&(A===!0||A.included_values&&A.included_values[C]===!0||A.excluded_values&&A.excluded_values[C]!==!0))return!0}return!1}};function join(n){for(var e=function(C){return C[0]},t=function(C){return C[C.length-1]},a=function(C,A){return C!==void 0&&A!==void 0&&C.id===A.id},l=[],h,g,p,y,b,E;n.length;)for(h=n.pop().nodes.slice(),l.push(h);n.length&&!a(e(h),t(h));){for(g=e(h),p=t(h),y=0;y<n.length;y++)if(E=n[y].nodes,a(p,e(E))){b=h.push,E=E.slice(1);break}else if(a(p,t(E))){b=h.push,E=E.slice(0,-1).reverse();break}else if(a(g,t(E))){b=h.unshift,E=E.slice(0,-1);break}else if(a(g,e(E))){b=h.unshift,E=E.slice(1).reverse();break}else E=b=null;if(!E)break;n.splice(y,1),b.apply(h,E)}return l}osmtogeojson.toGeojson=osmtogeojson;var osmtogeojson_1=osmtogeojson,dist$1={},CountryCoder$1={},turfExports={},turf$1={get exports(){return turfExports},set exports(n){turfExports=n}},turfHelpers={};function feature$1(n,e){return{type:"Feature",properties:e||{},geometry:n}}turfHelpers.feature=feature$1;turfHelpers.point=function(n,e){if(!Array.isArray(n))throw new Error("Coordinates must be an array");if(n.length<2)throw new Error("Coordinates must be at least 2 numbers long");return feature$1({type:"Point",coordinates:n.slice()},e)};turfHelpers.polygon=function(n,e){if(!n)throw new Error("No coordinates passed");for(var t=0;t<n.length;t++){var a=n[t];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<a[a.length-1].length;l++)if(a[a.length-1][l]!==a[0][l])throw new Error("First and last Position are not equivalent.")}return feature$1({type:"Polygon",coordinates:n},e)};turfHelpers.lineString=function(n,e){if(!n)throw new Error("No coordinates passed");return feature$1({type:"LineString",coordinates:n},e)};turfHelpers.featureCollection=function(n){return{type:"FeatureCollection",features:n}};turfHelpers.multiLineString=function(n,e){if(!n)throw new Error("No coordinates passed");return feature$1({type:"MultiLineString",coordinates:n},e)};turfHelpers.multiPoint=function(n,e){if(!n)throw new Error("No coordinates passed");return feature$1({type:"MultiPoint",coordinates:n},e)};turfHelpers.multiPolygon=function(n,e){if(!n)throw new Error("No coordinates passed");return feature$1({type:"MultiPolygon",coordinates:n},e)};turfHelpers.geometryCollection=function(n,e){return feature$1({type:"GeometryCollection",geometries:n},e)};var factors={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373};turfHelpers.radiansToDistance=function(n,e){var t=factors[e||"kilometers"];if(t===void 0)throw new Error("Invalid unit");return n*t};turfHelpers.distanceToRadians=function(n,e){var t=factors[e||"kilometers"];if(t===void 0)throw new Error("Invalid unit");return n/t};turfHelpers.distanceToDegrees=function(n,e){var t=factors[e||"kilometers"];if(t===void 0)throw new Error("Invalid unit");return n/t*57.2958};var polygon$7=turfHelpers.polygon,featurecollection$5=turfHelpers.featureCollection,turfTin=function(n,e){return featurecollection$5(triangulate(n.features.map(function(t){var a={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e&&(a.z=t.properties[e]),a})).map(function(t){return polygon$7([[[t.a.x,t.a.y],[t.b.x,t.b.y],[t.c.x,t.c.y],[t.a.x,t.a.y]]],{a:t.a.z,b:t.b.z,c:t.c.z})}))};function Triangle(n,e,t){this.a=n,this.b=e,this.c=t;var a=e.x-n.x,l=e.y-n.y,h=t.x-n.x,g=t.y-n.y,p=a*(n.x+e.x)+l*(n.y+e.y),y=h*(n.x+t.x)+g*(n.y+t.y),b=2*(a*(t.y-e.y)-l*(t.x-e.x)),E,C,A,B;Math.abs(b)<1e-6?(E=Math.min(n.x,e.x,t.x),C=Math.min(n.y,e.y,t.y),A=(Math.max(n.x,e.x,t.x)-E)*.5,B=(Math.max(n.y,e.y,t.y)-C)*.5,this.x=E+A,this.y=C+B,this.r=A*A+B*B):(this.x=(g*p-l*y)/b,this.y=(a*y-h*p)/b,A=this.x-n.x,B=this.y-n.y,this.r=A*A+B*B)}function byX(n,e){return e.x-n.x}function dedup(n){var e=n.length,t,a,l,h,g;e:for(;e;)for(a=n[--e],t=n[--e],l=e;l;)if(g=n[--l],h=n[--l],t===h&&a===g||t===g&&a===h){n.splice(e,2),n.splice(l,2),e-=2;continue e}}function triangulate(n){if(n.length<3)return[];n.sort(byX);for(var e=n.length-1,t=n[e].x,a=n[0].x,l=n[e].y,h=l;e--;)n[e].y<l&&(l=n[e].y),n[e].y>h&&(h=n[e].y);var g=a-t,p=h-l,y=g>p?g:p,b=(a+t)*.5,E=(h+l)*.5,C=[new Triangle({x:b-20*y,y:E-y,__sentinel:!0},{x:b,y:E+20*y,__sentinel:!0},{x:b+20*y,y:E-y,__sentinel:!0})],A=[],B=[],M,N,Z;for(e=n.length;e--;){for(B.length=0,M=C.length;M--;){if(g=n[e].x-C[M].x,g>0&&g*g>C[M].r){A.push(C[M]),C.splice(M,1);continue}p=n[e].y-C[M].y,!(g*g+p*p>C[M].r)&&(B.push(C[M].a,C[M].b,C[M].b,C[M].c,C[M].c,C[M].a),C.splice(M,1))}for(dedup(B),M=B.length;M;)Z=B[--M],N=B[--M],C.push(new Triangle(N,Z,n[e]))}for(Array.prototype.push.apply(A,C),e=A.length;e--;)(A[e].a.__sentinel||A[e].b.__sentinel||A[e].c.__sentinel)&&A.splice(e,1);return A}var turfInvariant={};function getCoord$3(n){if(Array.isArray(n)&&typeof n[0]=="number"&&typeof n[1]=="number")return n;if(n){if(n.type==="Feature"&&n.geometry&&n.geometry.type==="Point"&&Array.isArray(n.geometry.coordinates))return n.geometry.coordinates;if(n.type==="Point"&&Array.isArray(n.coordinates))return n.coordinates}throw new Error("A coordinate, feature, or point geometry is required")}function geojsonType(n,e,t){if(!e||!t)throw new Error("type and name required");if(!n||n.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+n.type)}function featureOf(n,e,t){if(!t)throw new Error(".featureOf() requires a name");if(!n||n.type!=="Feature"||!n.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!n.geometry||n.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+n.geometry.type)}function collectionOf(n,e,t){if(!t)throw new Error(".collectionOf() requires a name");if(!n||n.type!=="FeatureCollection")throw new Error("Invalid input to "+t+", FeatureCollection required");for(var a=0;a<n.features.length;a++){var l=n.features[a];if(!l||l.type!=="Feature"||!l.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!l.geometry||l.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+l.geometry.type)}}turfInvariant.geojsonType=geojsonType;turfInvariant.collectionOf=collectionOf;turfInvariant.featureOf=featureOf;turfInvariant.getCoord=getCoord$3;var invariant=turfInvariant,turfInside=function(e,t){var a=invariant.getCoord(e),l=t.geometry.coordinates;t.geometry.type==="Polygon"&&(l=[l]);for(var h=0,g=!1;h<l.length&&!g;h++)if(inRing(a,l[h][0])){for(var p=!1,y=1;y<l[h].length&&!p;)inRing(a,l[h][y])&&(p=!0),y++;p||(g=!0)}return g};function inRing(n,e){for(var t=!1,a=0,l=e.length-1;a<e.length;l=a++){var h=e[a][0],g=e[a][1],p=e[l][0],y=e[l][1],b=g>n[1]!=y>n[1]&&n[0]<(p-h)*(n[1]-g)/(y-g)+h;b&&(t=!t)}return t}var isArray$1=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},turfPoint=function(n,e){if(!isArray$1(n))throw new Error("Coordinates must be an array");if(n.length<2)throw new Error("Coordinates must be at least 2 numbers long");return{type:"Feature",geometry:{type:"Point",coordinates:n},properties:e||{}}},point$c=turfPoint,turfGrid=function(n,e){var t=n[0],a=n[1],l=n[2];n[3];for(var h=(l-t)/e,g={type:"FeatureCollection",features:[]},p=0;p<=e;p++)for(var y=0;y<=e;y++)g.features.push(point$c([p*h+t,y*h+a]));return g},turfMeta={};function coordEach$1(n,e,t){var a,l,h,g,p,y,b,E,C,A=0,B,M=n.type==="FeatureCollection",N=n.type==="Feature",Z=M?n.features.length:1;for(a=0;a<Z;a++)for(C=M?n.features[a].geometry:N?n.geometry:n,B=C.type==="GeometryCollection",b=B?C.geometries.length:1,g=0;g<b;g++)if(y=B?C.geometries[g]:C,E=y.coordinates,A=t&&(y.type==="Polygon"||y.type==="MultiPolygon")?1:0,y.type==="Point")e(E);else if(y.type==="LineString"||y.type==="MultiPoint")for(l=0;l<E.length;l++)e(E[l]);else if(y.type==="Polygon"||y.type==="MultiLineString")for(l=0;l<E.length;l++)for(h=0;h<E[l].length-A;h++)e(E[l][h]);else if(y.type==="MultiPolygon")for(l=0;l<E.length;l++)for(h=0;h<E[l].length;h++)for(p=0;p<E[l][h].length-A;p++)e(E[l][h][p]);else throw new Error("Unknown Geometry Type")}turfMeta.coordEach=coordEach$1;function coordReduce(n,e,t,a){return coordEach$1(n,function(l){t=e(t,l)},a),t}turfMeta.coordReduce=coordReduce;function propEach(n,e){var t;switch(n.type){case"FeatureCollection":for(t=0;t<n.features.length;t++)e(n.features[t].properties);break;case"Feature":e(n.properties);break}}turfMeta.propEach=propEach;function propReduce(n,e,t){return propEach(n,function(a){t=e(t,a)}),t}turfMeta.propReduce=propReduce;function featureEach(n,e){if(n.type==="Feature")e(n);else if(n.type==="FeatureCollection")for(var t=0;t<n.features.length;t++)e(n.features[t])}turfMeta.featureEach=featureEach;function coordAll(n){var e=[];return coordEach$1(n,function(t){e.push(t)}),e}turfMeta.coordAll=coordAll;var each$b=turfMeta.coordEach,turfBbox=function(n){var e=[1/0,1/0,-1/0,-1/0];return each$b(n,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e},turfPlanepoint=function(n,e){var t=n.geometry.coordinates[0],a=n.geometry.coordinates[1],l=e.geometry.coordinates[0][0][0],h=e.geometry.coordinates[0][0][1],g=e.properties.a,p=e.geometry.coordinates[0][1][0],y=e.geometry.coordinates[0][1][1],b=e.properties.b,E=e.geometry.coordinates[0][2][0],C=e.geometry.coordinates[0][2][1],A=e.properties.c,B=(A*(t-l)*(a-y)+g*(t-p)*(a-C)+b*(t-E)*(a-h)-b*(t-l)*(a-C)-A*(t-p)*(a-h)-g*(t-E)*(a-y))/((t-l)*(a-y)+(t-p)*(a-C)+(t-E)*(a-h)-(t-l)*(a-C)-(t-p)*(a-h)-(t-E)*(a-y));return B},getCoord$2=turfInvariant.getCoord,radiansToDistance=turfHelpers.radiansToDistance,turfDistance=function(n,e,t){var a=Math.PI/180,l=getCoord$2(n),h=getCoord$2(e),g=a*(h[1]-l[1]),p=a*(h[0]-l[0]),y=a*l[1],b=a*h[1],E=Math.pow(Math.sin(g/2),2)+Math.pow(Math.sin(p/2),2)*Math.cos(y)*Math.cos(b);return radiansToDistance(2*Math.atan2(Math.sqrt(E),Math.sqrt(1-E)),t)},distance$a=turfDistance,turfSquare=function(n){var e=distance$a(n.slice(0,2),[n[2],n[1]],"miles"),t=distance$a(n.slice(0,2),[n[0],n[3]],"miles");if(e>=t){var a=(n[1]+n[3])/2;return[n[0],a-(n[2]-n[0])/2,n[2],a+(n[2]-n[0])/2]}else{var l=(n[0]+n[2])/2;return[l-(n[3]-n[1])/2,n[1],l+(n[3]-n[1])/2,n[3]]}},conrec=Conrec$1,EPSILON=1e-10;function pointsEqual(n,e){var t=n.x-e.x,a=n.y-e.y;return t*t+a*a<EPSILON}function reverseList(n){for(var e=n.head;e;){var t=e.next;e.next=e.prev,e.prev=t,e=t}var t=n.head;n.head=n.tail,n.tail=t}function ContourBuilder(n){this.level=n,this.s=null,this.count=0}ContourBuilder.prototype.remove_seq=function(n){n.prev?n.prev.next=n.next:this.s=n.next,n.next&&(n.next.prev=n.prev),--this.count};ContourBuilder.prototype.addSegment=function(n,e){for(var t=this.s,a=null,l=null,h=!1,g=!1;t&&(a==null&&(pointsEqual(n,t.head.p)?(a=t,h=!0):pointsEqual(n,t.tail.p)&&(a=t)),l==null&&(pointsEqual(e,t.head.p)?(l=t,g=!0):pointsEqual(e,t.tail.p)&&(l=t)),!(l!=null&&a!=null));)t=t.next;var p=(a!=null?1:0)|(l!=null?2:0);switch(p){case 0:var y={p:n,prev:null},b={p:e,next:null};y.next=b,b.prev=y,a={head:y,tail:b,next:this.s,prev:null,closed:!1},this.s&&(this.s.prev=a),this.s=a,++this.count;break;case 1:var E={p:e};h?(E.next=a.head,E.prev=null,a.head.prev=E,a.head=E):(E.next=null,E.prev=a.tail,a.tail.next=E,a.tail=E);break;case 2:var E={p:n};g?(E.next=l.head,E.prev=null,l.head.prev=E,l.head=E):(E.next=null,E.prev=l.tail,l.tail.next=E,l.tail=E);break;case 3:if(a===l){var E={p:a.tail.p,next:a.head,prev:null};a.head.prev=E,a.head=E,a.closed=!0;break}switch((h?1:0)|(g?2:0)){case 0:reverseList(a);case 1:l.tail.next=a.head,a.head.prev=l.tail,l.tail=a.tail,this.remove_seq(a);break;case 3:reverseList(a);case 2:a.tail.next=l.head,l.head.prev=a.tail,a.tail=l.tail,this.remove_seq(l);break}}};function Conrec$1(n){if(n)this.drawContour=n;else{var e=this;e.contours={},this.drawContour=function(t,a,l,h,g,p){var y=e.contours[p];y||(y=e.contours[p]=new ContourBuilder(g)),y.addSegment({x:t,y:a},{x:l,y:h})},this.contourList=function(){var t=[],a=e.contours;for(var l in a)for(var h=a[l].s,g=a[l].level;h;){var p=h.head,y=[];for(y.level=g,y.k=l;p&&p.p;)y.push(p.p),p=p.next;t.push(y),h=h.next}return t.sort(function(b,E){return b.k-E.k}),t}}this.h=new Array(5),this.sh=new Array(5),this.xh=new Array(5),this.yh=new Array(5)}Conrec$1.prototype.contour=function(n,e,t,a,l,h,g,p,y){var b=this.h,E=this.sh,C=this.xh,A=this.yh,B=this.drawContour;this.contours={};for(var M=function(se,D){return(b[D]*C[se]-b[se]*C[D])/(b[D]-b[se])},N=function(se,D){return(b[D]*A[se]-b[se]*A[D])/(b[D]-b[se])},Z,ee,F,O,k,H,ce=0,U=0,te=0,re=0,ue=[0,1,1,0],V=[0,0,1,1],S=[[[0,0,8],[0,2,5],[7,6,9]],[[0,3,4],[1,3,1],[4,3,0]],[[9,6,7],[5,2,0],[8,0,0]]],T=l-1;T>=a;T--)for(var G=e;G<=t-1;G++){var Q,le;if(Q=Math.min(n[G][T],n[G][T+1]),le=Math.min(n[G+1][T],n[G+1][T+1]),k=Math.min(Q,le),Q=Math.max(n[G][T],n[G][T+1]),le=Math.max(n[G+1][T],n[G+1][T+1]),H=Math.max(Q,le),H>=y[0]&&k<=y[p-1]){for(var fe=0;fe<p;fe++)if(y[fe]>=k&&y[fe]<=H){for(var q=4;q>=0;q--)q>0?(b[q]=n[G+ue[q-1]][T+V[q-1]]-y[fe],C[q]=h[G+ue[q-1]],A[q]=g[T+V[q-1]]):(b[0]=.25*(b[1]+b[2]+b[3]+b[4]),C[0]=.5*(h[G]+h[G+1]),A[0]=.5*(g[T]+g[T+1])),b[q]>EPSILON?E[q]=1:b[q]<-EPSILON?E[q]=-1:E[q]=0;for(q=1;q<=4;q++)if(Z=q,ee=0,q!=4?F=q+1:F=1,O=S[E[Z]+1][E[ee]+1][E[F]+1],O!=0){switch(O){case 1:ce=C[Z],te=A[Z],U=C[ee],re=A[ee];break;case 2:ce=C[ee],te=A[ee],U=C[F],re=A[F];break;case 3:ce=C[F],te=A[F],U=C[Z],re=A[Z];break;case 4:ce=C[Z],te=A[Z],U=M(ee,F),re=N(ee,F);break;case 5:ce=C[ee],te=A[ee],U=M(F,Z),re=N(F,Z);break;case 6:ce=C[F],te=A[F],U=M(Z,ee),re=N(Z,ee);break;case 7:ce=M(Z,ee),te=N(Z,ee),U=M(ee,F),re=N(ee,F);break;case 8:ce=M(ee,F),te=N(ee,F),U=M(F,Z),re=N(F,Z);break;case 9:ce=M(F,Z),te=N(F,Z),U=M(Z,ee),re=N(Z,ee);break}B(ce,te,U,re,y[fe],fe)}}}}};var tin$1=turfTin,inside$4=turfInside,grid=turfGrid,bbox$2=turfBbox,planepoint=turfPlanepoint,featurecollection$4=turfHelpers.featureCollection,linestring$2=turfHelpers.lineString,square=turfSquare,Conrec=conrec,turfIsolines=function(n,e,t,a){for(var l=tin$1(n,e),h=bbox$2(n),g=square(h),p=grid(g,t),y=[],b=0;b<p.features.length;b++)for(var E=p.features[b],C=0;C<l.features.length;C++){var A=l.features[C];inside$4(E,A)&&(E.properties={},E.properties[e]=planepoint(E,A))}for(var B=Math.sqrt(p.features.length),M=0;M<B;M++){for(var N=p.features.slice(M*B,(M+1)*B),Z=[],ee=0;ee<N.length;ee++)N[ee].properties?Z.push(N[ee].properties[e]):Z.push(0);y.push(Z)}for(var F=(g[2]-g[0])/B,O=[],k=[],H=0;H<B;H++)O.push(H*F+g[0]),k.push(H*F+g[1]);var ce=new Conrec;ce.contour(y,0,t,0,t,O,k,a.length,a);var U=ce.contourList(),te=featurecollection$4([]);return U.forEach(function(re){if(re.length>2){var ue=[];re.forEach(function(S){ue.push([S.x,S.y])});var V=linestring$2(ue);V.properties={},V.properties[e]=re.level,te.features.push(V)}}),te},ch1d=convexHull1d$1;function convexHull1d$1(n){for(var e=0,t=0,a=1;a<n.length;++a)n[a][0]<n[e][0]&&(e=a),n[a][0]>n[t][0]&&(t=a);return e<t?[[e],[t]]:e>t?[[t],[e]]:[[e]]}var orientationExports={},orientation$1={get exports(){return orientationExports},set exports(n){orientationExports=n}},twoProduct_1=twoProduct$1,SPLITTER=+(Math.pow(2,27)+1);function twoProduct$1(n,e,t){var a=n*e,l=SPLITTER*n,h=l-n,g=l-h,p=n-g,y=SPLITTER*e,b=y-e,E=y-b,C=e-E,A=a-g*E,B=A-p*E,M=B-g*C,N=p*C-M;return t?(t[0]=N,t[1]=a,t):[N,a]}var robustSum=linearExpansionSum;function scalarScalar$1(n,e){var t=n+e,a=t-n,l=t-a,h=e-a,g=n-l,p=g+h;return p?[p,t]:[t]}function linearExpansionSum(n,e){var t=n.length|0,a=e.length|0;if(t===1&&a===1)return scalarScalar$1(n[0],e[0]);var l=t+a,h=new Array(l),g=0,p=0,y=0,b=Math.abs,E=n[p],C=b(E),A=e[y],B=b(A),M,N;C<B?(N=E,p+=1,p<t&&(E=n[p],C=b(E))):(N=A,y+=1,y<a&&(A=e[y],B=b(A))),p<t&&C<B||y>=a?(M=E,p+=1,p<t&&(E=n[p],C=b(E))):(M=A,y+=1,y<a&&(A=e[y],B=b(A)));for(var Z=M+N,ee=Z-M,F=N-ee,O=F,k=Z,H,ce,U,te,re;p<t&&y<a;)C<B?(M=E,p+=1,p<t&&(E=n[p],C=b(E))):(M=A,y+=1,y<a&&(A=e[y],B=b(A))),N=O,Z=M+N,ee=Z-M,F=N-ee,F&&(h[g++]=F),H=k+Z,ce=H-k,U=H-ce,te=Z-ce,re=k-U,O=re+te,k=H;for(;p<t;)M=E,N=O,Z=M+N,ee=Z-M,F=N-ee,F&&(h[g++]=F),H=k+Z,ce=H-k,U=H-ce,te=Z-ce,re=k-U,O=re+te,k=H,p+=1,p<t&&(E=n[p]);for(;y<a;)M=A,N=O,Z=M+N,ee=Z-M,F=N-ee,F&&(h[g++]=F),H=k+Z,ce=H-k,U=H-ce,te=Z-ce,re=k-U,O=re+te,k=H,y+=1,y<a&&(A=e[y]);return O&&(h[g++]=O),k&&(h[g++]=k),g||(h[g++]=0),h.length=g,h}var twoSum$1=fastTwoSum;function fastTwoSum(n,e,t){var a=n+e,l=a-n,h=a-l,g=e-l,p=n-h;return t?(t[0]=p+g,t[1]=a,t):[p+g,a]}var twoProduct=twoProduct_1,twoSum=twoSum$1,robustScale=scaleLinearExpansion;function scaleLinearExpansion(n,e){var t=n.length;if(t===1){var a=twoProduct(n[0],e);return a[0]?a:[a[1]]}var l=new Array(2*t),h=[.1,.1],g=[.1,.1],p=0;twoProduct(n[0],e,h),h[0]&&(l[p++]=h[0]);for(var y=1;y<t;++y){twoProduct(n[y],e,g);var b=h[1];twoSum(b,g[0],h),h[0]&&(l[p++]=h[0]);var E=g[1],C=h[1],A=E+C,B=A-E,M=C-B;h[1]=A,M&&(l[p++]=M)}return h[1]&&(l[p++]=h[1]),p===0&&(l[p++]=0),l.length=p,l}var robustDiff=robustSubtract;function scalarScalar(n,e){var t=n+e,a=t-n,l=t-a,h=e-a,g=n-l,p=g+h;return p?[p,t]:[t]}function robustSubtract(n,e){var t=n.length|0,a=e.length|0;if(t===1&&a===1)return scalarScalar(n[0],-e[0]);var l=t+a,h=new Array(l),g=0,p=0,y=0,b=Math.abs,E=n[p],C=b(E),A=-e[y],B=b(A),M,N;C<B?(N=E,p+=1,p<t&&(E=n[p],C=b(E))):(N=A,y+=1,y<a&&(A=-e[y],B=b(A))),p<t&&C<B||y>=a?(M=E,p+=1,p<t&&(E=n[p],C=b(E))):(M=A,y+=1,y<a&&(A=-e[y],B=b(A)));for(var Z=M+N,ee=Z-M,F=N-ee,O=F,k=Z,H,ce,U,te,re;p<t&&y<a;)C<B?(M=E,p+=1,p<t&&(E=n[p],C=b(E))):(M=A,y+=1,y<a&&(A=-e[y],B=b(A))),N=O,Z=M+N,ee=Z-M,F=N-ee,F&&(h[g++]=F),H=k+Z,ce=H-k,U=H-ce,te=Z-ce,re=k-U,O=re+te,k=H;for(;p<t;)M=E,N=O,Z=M+N,ee=Z-M,F=N-ee,F&&(h[g++]=F),H=k+Z,ce=H-k,U=H-ce,te=Z-ce,re=k-U,O=re+te,k=H,p+=1,p<t&&(E=n[p]);for(;y<a;)M=A,N=O,Z=M+N,ee=Z-M,F=N-ee,F&&(h[g++]=F),H=k+Z,ce=H-k,U=H-ce,te=Z-ce,re=k-U,O=re+te,k=H,y+=1,y<a&&(A=-e[y]);return O&&(h[g++]=O),k&&(h[g++]=k),g||(h[g++]=0),h.length=g,h}(function(n){var e=twoProduct_1,t=robustSum,a=robustScale,l=robustDiff,h=5,g=11102230246251565e-32,p=(3+16*g)*g,y=(7+56*g)*g;function b(O,k,H,ce){return function(te,re,ue){var V=O(O(k(re[1],ue[0]),k(-ue[1],re[0])),O(k(te[1],re[0]),k(-re[1],te[0]))),S=O(k(te[1],ue[0]),k(-ue[1],te[0])),T=ce(V,S);return T[T.length-1]}}function E(O,k,H,ce){return function(te,re,ue,V){var S=O(O(H(O(k(ue[1],V[0]),k(-V[1],ue[0])),re[2]),O(H(O(k(re[1],V[0]),k(-V[1],re[0])),-ue[2]),H(O(k(re[1],ue[0]),k(-ue[1],re[0])),V[2]))),O(H(O(k(re[1],V[0]),k(-V[1],re[0])),te[2]),O(H(O(k(te[1],V[0]),k(-V[1],te[0])),-re[2]),H(O(k(te[1],re[0]),k(-re[1],te[0])),V[2])))),T=O(O(H(O(k(ue[1],V[0]),k(-V[1],ue[0])),te[2]),O(H(O(k(te[1],V[0]),k(-V[1],te[0])),-ue[2]),H(O(k(te[1],ue[0]),k(-ue[1],te[0])),V[2]))),O(H(O(k(re[1],ue[0]),k(-ue[1],re[0])),te[2]),O(H(O(k(te[1],ue[0]),k(-ue[1],te[0])),-re[2]),H(O(k(te[1],re[0]),k(-re[1],te[0])),ue[2])))),G=ce(S,T);return G[G.length-1]}}function C(O,k,H,ce){return function(te,re,ue,V,S){var T=O(O(O(H(O(H(O(k(V[1],S[0]),k(-S[1],V[0])),ue[2]),O(H(O(k(ue[1],S[0]),k(-S[1],ue[0])),-V[2]),H(O(k(ue[1],V[0]),k(-V[1],ue[0])),S[2]))),re[3]),O(H(O(H(O(k(V[1],S[0]),k(-S[1],V[0])),re[2]),O(H(O(k(re[1],S[0]),k(-S[1],re[0])),-V[2]),H(O(k(re[1],V[0]),k(-V[1],re[0])),S[2]))),-ue[3]),H(O(H(O(k(ue[1],S[0]),k(-S[1],ue[0])),re[2]),O(H(O(k(re[1],S[0]),k(-S[1],re[0])),-ue[2]),H(O(k(re[1],ue[0]),k(-ue[1],re[0])),S[2]))),V[3]))),O(H(O(H(O(k(ue[1],V[0]),k(-V[1],ue[0])),re[2]),O(H(O(k(re[1],V[0]),k(-V[1],re[0])),-ue[2]),H(O(k(re[1],ue[0]),k(-ue[1],re[0])),V[2]))),-S[3]),O(H(O(H(O(k(V[1],S[0]),k(-S[1],V[0])),re[2]),O(H(O(k(re[1],S[0]),k(-S[1],re[0])),-V[2]),H(O(k(re[1],V[0]),k(-V[1],re[0])),S[2]))),te[3]),H(O(H(O(k(V[1],S[0]),k(-S[1],V[0])),te[2]),O(H(O(k(te[1],S[0]),k(-S[1],te[0])),-V[2]),H(O(k(te[1],V[0]),k(-V[1],te[0])),S[2]))),-re[3])))),O(O(H(O(H(O(k(re[1],S[0]),k(-S[1],re[0])),te[2]),O(H(O(k(te[1],S[0]),k(-S[1],te[0])),-re[2]),H(O(k(te[1],re[0]),k(-re[1],te[0])),S[2]))),V[3]),O(H(O(H(O(k(re[1],V[0]),k(-V[1],re[0])),te[2]),O(H(O(k(te[1],V[0]),k(-V[1],te[0])),-re[2]),H(O(k(te[1],re[0]),k(-re[1],te[0])),V[2]))),-S[3]),H(O(H(O(k(ue[1],V[0]),k(-V[1],ue[0])),re[2]),O(H(O(k(re[1],V[0]),k(-V[1],re[0])),-ue[2]),H(O(k(re[1],ue[0]),k(-ue[1],re[0])),V[2]))),te[3]))),O(H(O(H(O(k(ue[1],V[0]),k(-V[1],ue[0])),te[2]),O(H(O(k(te[1],V[0]),k(-V[1],te[0])),-ue[2]),H(O(k(te[1],ue[0]),k(-ue[1],te[0])),V[2]))),-re[3]),O(H(O(H(O(k(re[1],V[0]),k(-V[1],re[0])),te[2]),O(H(O(k(te[1],V[0]),k(-V[1],te[0])),-re[2]),H(O(k(te[1],re[0]),k(-re[1],te[0])),V[2]))),ue[3]),H(O(H(O(k(re[1],ue[0]),k(-ue[1],re[0])),te[2]),O(H(O(k(te[1],ue[0]),k(-ue[1],te[0])),-re[2]),H(O(k(te[1],re[0]),k(-re[1],te[0])),ue[2]))),-V[3]))))),G=O(O(O(H(O(H(O(k(V[1],S[0]),k(-S[1],V[0])),ue[2]),O(H(O(k(ue[1],S[0]),k(-S[1],ue[0])),-V[2]),H(O(k(ue[1],V[0]),k(-V[1],ue[0])),S[2]))),te[3]),H(O(H(O(k(V[1],S[0]),k(-S[1],V[0])),te[2]),O(H(O(k(te[1],S[0]),k(-S[1],te[0])),-V[2]),H(O(k(te[1],V[0]),k(-V[1],te[0])),S[2]))),-ue[3])),O(H(O(H(O(k(ue[1],S[0]),k(-S[1],ue[0])),te[2]),O(H(O(k(te[1],S[0]),k(-S[1],te[0])),-ue[2]),H(O(k(te[1],ue[0]),k(-ue[1],te[0])),S[2]))),V[3]),H(O(H(O(k(ue[1],V[0]),k(-V[1],ue[0])),te[2]),O(H(O(k(te[1],V[0]),k(-V[1],te[0])),-ue[2]),H(O(k(te[1],ue[0]),k(-ue[1],te[0])),V[2]))),-S[3]))),O(O(H(O(H(O(k(ue[1],S[0]),k(-S[1],ue[0])),re[2]),O(H(O(k(re[1],S[0]),k(-S[1],re[0])),-ue[2]),H(O(k(re[1],ue[0]),k(-ue[1],re[0])),S[2]))),te[3]),H(O(H(O(k(ue[1],S[0]),k(-S[1],ue[0])),te[2]),O(H(O(k(te[1],S[0]),k(-S[1],te[0])),-ue[2]),H(O(k(te[1],ue[0]),k(-ue[1],te[0])),S[2]))),-re[3])),O(H(O(H(O(k(re[1],S[0]),k(-S[1],re[0])),te[2]),O(H(O(k(te[1],S[0]),k(-S[1],te[0])),-re[2]),H(O(k(te[1],re[0]),k(-re[1],te[0])),S[2]))),ue[3]),H(O(H(O(k(re[1],ue[0]),k(-ue[1],re[0])),te[2]),O(H(O(k(te[1],ue[0]),k(-ue[1],te[0])),-re[2]),H(O(k(te[1],re[0]),k(-re[1],te[0])),ue[2]))),-S[3])))),Q=ce(T,G);return Q[Q.length-1]}}function A(O){var k=O===3?b:O===4?E:C;return k(t,e,a,l)}var B=A(3),M=A(4),N=[function(){return 0},function(){return 0},function(k,H){return H[0]-k[0]},function(k,H,ce){var U=(k[1]-ce[1])*(H[0]-ce[0]),te=(k[0]-ce[0])*(H[1]-ce[1]),re=U-te,ue;if(U>0){if(te<=0)return re;ue=U+te}else if(U<0){if(te>=0)return re;ue=-(U+te)}else return re;var V=p*ue;return re>=V||re<=-V?re:B(k,H,ce)},function(k,H,ce,U){var te=k[0]-U[0],re=H[0]-U[0],ue=ce[0]-U[0],V=k[1]-U[1],S=H[1]-U[1],T=ce[1]-U[1],G=k[2]-U[2],Q=H[2]-U[2],le=ce[2]-U[2],fe=re*T,q=ue*S,se=ue*V,D=te*T,oe=te*S,Pe=re*V,Re=G*(fe-q)+Q*(se-D)+le*(oe-Pe),Oe=(Math.abs(fe)+Math.abs(q))*Math.abs(G)+(Math.abs(se)+Math.abs(D))*Math.abs(Q)+(Math.abs(oe)+Math.abs(Pe))*Math.abs(le),Ne=y*Oe;return Re>Ne||-Re>Ne?Re:M(k,H,ce,U)}];function Z(O){var k=N[O.length];return k||(k=N[O.length]=A(O.length)),k.apply(void 0,O)}function ee(O,k,H,ce,U,te,re){return function(V,S,T,G,Q){switch(arguments.length){case 0:case 1:return 0;case 2:return ce(V,S);case 3:return U(V,S,T);case 4:return te(V,S,T,G);case 5:return re(V,S,T,G,Q)}for(var le=new Array(arguments.length),fe=0;fe<arguments.length;++fe)le[fe]=arguments[fe];return O(le)}}function F(){for(;N.length<=h;)N.push(A(N.length));n.exports=ee.apply(void 0,[Z].concat(N));for(var O=0;O<=h;++O)n.exports[O]=N[O]}F()})(orientation$1);var monotoneConvexHull2d=monotoneConvexHull2D,orient$2=orientationExports[3];function monotoneConvexHull2D(n){var e=n.length;if(e<3){for(var b=new Array(e),t=0;t<e;++t)b[t]=t;return e===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:b}for(var a=new Array(e),t=0;t<e;++t)a[t]=t;a.sort(function(B,M){var N=n[B][0]-n[M][0];return N||n[B][1]-n[M][1]});for(var l=[a[0],a[1]],h=[a[0],a[1]],t=2;t<e;++t){for(var g=a[t],p=n[g],y=l.length;y>1&&orient$2(n[l[y-2]],n[l[y-1]],p)<=0;)y-=1,l.pop();for(l.push(g),y=h.length;y>1&&orient$2(n[h[y-2]],n[h[y-1]],p)>=0;)y-=1,h.pop();h.push(g)}for(var b=new Array(h.length+l.length-2),E=0,t=0,C=l.length;t<C;++t)b[E++]=l[t];for(var A=h.length-2;A>0;--A)b[E++]=h[A];return b}var ch2d=convexHull2D,monotoneHull=monotoneConvexHull2d;function convexHull2D(n){var e=monotoneHull(n),t=e.length;if(t<=2)return[];for(var a=new Array(t),l=e[t-1],h=0;h<t;++h){var g=e[h];a[h]=[l,g],l=g}return a}var topology={},twiddle={},INT_BITS=32;twiddle.INT_BITS=INT_BITS;twiddle.INT_MAX=2147483647;twiddle.INT_MIN=-1<<INT_BITS-1;twiddle.sign=function(n){return(n>0)-(n<0)};twiddle.abs=function(n){var e=n>>INT_BITS-1;return(n^e)-e};twiddle.min=function(n,e){return e^(n^e)&-(n<e)};twiddle.max=function(n,e){return n^(n^e)&-(n<e)};twiddle.isPow2=function(n){return!(n&n-1)&&!!n};twiddle.log2=function(n){var e,t;return e=(n>65535)<<4,n>>>=e,t=(n>255)<<3,n>>>=t,e|=t,t=(n>15)<<2,n>>>=t,e|=t,t=(n>3)<<1,n>>>=t,e|=t,e|n>>1};twiddle.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0};twiddle.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};function countTrailingZeros(n){var e=32;return n&=-n,n&&e--,n&65535&&(e-=16),n&16711935&&(e-=8),n&252645135&&(e-=4),n&858993459&&(e-=2),n&1431655765&&(e-=1),e}twiddle.countTrailingZeros=countTrailingZeros;twiddle.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1};twiddle.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)};twiddle.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var REVERSE_TABLE=new Array(256);(function(n){for(var e=0;e<256;++e){var t=e,a=e,l=7;for(t>>>=1;t;t>>>=1)a<<=1,a|=t&1,--l;n[e]=a<<l&255}})(REVERSE_TABLE);twiddle.reverse=function(n){return REVERSE_TABLE[n&255]<<24|REVERSE_TABLE[n>>>8&255]<<16|REVERSE_TABLE[n>>>16&255]<<8|REVERSE_TABLE[n>>>24&255]};twiddle.interleave2=function(n,e){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1};twiddle.deinterleave2=function(n,e){return n=n>>>e&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16};twiddle.interleave3=function(n,e,t){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,n|=e<<1,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,n|t<<2};twiddle.deinterleave3=function(n,e){return n=n>>>e&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22};twiddle.nextCombination=function(n){var e=n|n-1;return e+1|(~e&-~e)-1>>>countTrailingZeros(n)+1};var unionFind=UnionFind$1;function UnionFind$1(n){this.roots=new Array(n),this.ranks=new Array(n);for(var e=0;e<n;++e)this.roots[e]=e,this.ranks[e]=0}var proto$1=UnionFind$1.prototype;Object.defineProperty(proto$1,"length",{get:function(){return this.roots.length}});proto$1.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n};proto$1.find=function(n){for(var e=n,t=this.roots;t[n]!==n;)n=t[n];for(;t[e]!==n;){var a=t[e];t[e]=n,e=a}return n};proto$1.link=function(n,e){var t=this.find(n),a=this.find(e);if(t!==a){var l=this.ranks,h=this.roots,g=l[t],p=l[a];g<p?h[t]=a:p<g?h[a]=t:(h[a]=t,++l[t])}};var bits=twiddle,UnionFind=unionFind;function dimension(n){for(var e=0,t=Math.max,a=0,l=n.length;a<l;++a)e=t(e,n[a].length);return e-1}topology.dimension=dimension;function countVertices(n){for(var e=-1,t=Math.max,a=0,l=n.length;a<l;++a)for(var h=n[a],g=0,p=h.length;g<p;++g)e=t(e,h[g]);return e+1}topology.countVertices=countVertices;function cloneCells(n){for(var e=new Array(n.length),t=0,a=n.length;t<a;++t)e[t]=n[t].slice(0);return e}topology.cloneCells=cloneCells;function compareCells(n,e){var t=n.length,a=n.length-e.length,l=Math.min;if(a)return a;switch(t){case 0:return 0;case 1:return n[0]-e[0];case 2:var b=n[0]+n[1]-e[0]-e[1];return b||l(n[0],n[1])-l(e[0],e[1]);case 3:var h=n[0]+n[1],g=e[0]+e[1];if(b=h+n[2]-(g+e[2]),b)return b;var p=l(n[0],n[1]),y=l(e[0],e[1]),b=l(p,n[2])-l(y,e[2]);return b||l(p+n[2],h)-l(y+e[2],g);default:var E=n.slice(0);E.sort();var C=e.slice(0);C.sort();for(var A=0;A<t;++A)if(a=E[A]-C[A],a)return a;return 0}}topology.compareCells=compareCells;function compareZipped(n,e){return compareCells(n[0],e[0])}function normalize$2(n,e){if(e){for(var t=n.length,a=new Array(t),l=0;l<t;++l)a[l]=[n[l],e[l]];a.sort(compareZipped);for(var l=0;l<t;++l)n[l]=a[l][0],e[l]=a[l][1];return n}else return n.sort(compareCells),n}topology.normalize=normalize$2;function unique(n){if(n.length===0)return[];for(var e=1,t=n.length,a=1;a<t;++a){var l=n[a];if(compareCells(l,n[a-1])){if(a===e){e++;continue}n[e++]=l}}return n.length=e,n}topology.unique=unique;function findCell(n,e){for(var t=0,a=n.length-1,l=-1;t<=a;){var h=t+a>>1,g=compareCells(n[h],e);g<=0?(g===0&&(l=h),t=h+1):g>0&&(a=h-1)}return l}topology.findCell=findCell;function incidence(n,e){for(var t=new Array(n.length),a=0,l=t.length;a<l;++a)t[a]=[];for(var h=[],a=0,g=e.length;a<g;++a)for(var p=e[a],y=p.length,b=1,E=1<<y;b<E;++b){h.length=bits.popCount(b);for(var C=0,A=0;A<y;++A)b&1<<A&&(h[C++]=p[A]);var B=findCell(n,h);if(!(B<0))for(;t[B++].push(a),!(B>=n.length||compareCells(n[B],h)!==0););}return t}topology.incidence=incidence;function dual(n,e){if(!e)return incidence(unique(skeleton(n,0)),n);for(var t=new Array(e),a=0;a<e;++a)t[a]=[];for(var a=0,l=n.length;a<l;++a)for(var h=n[a],g=0,p=h.length;g<p;++g)t[h[g]].push(a);return t}topology.dual=dual;function explode$1(n){for(var e=[],t=0,a=n.length;t<a;++t)for(var l=n[t],h=l.length|0,g=1,p=1<<h;g<p;++g){for(var y=[],b=0;b<h;++b)g>>>b&1&&y.push(l[b]);e.push(y)}return normalize$2(e)}topology.explode=explode$1;function skeleton(n,e){if(e<0)return[];for(var t=[],a=(1<<e+1)-1,l=0;l<n.length;++l)for(var h=n[l],g=a;g<1<<h.length;g=bits.nextCombination(g)){for(var p=new Array(e+1),y=0,b=0;b<h.length;++b)g&1<<b&&(p[y++]=h[b]);t.push(p)}return normalize$2(t)}topology.skeleton=skeleton;function boundary(n){for(var e=[],t=0,a=n.length;t<a;++t)for(var l=n[t],h=0,g=l.length;h<g;++h){for(var p=new Array(l.length-1),y=0,b=0;y<g;++y)y!==h&&(p[b++]=l[y]);e.push(p)}return normalize$2(e)}topology.boundary=boundary;function connectedComponents_dense(n,e){for(var t=new UnionFind(e),a=0;a<n.length;++a)for(var l=n[a],h=0;h<l.length;++h)for(var g=h+1;g<l.length;++g)t.link(l[h],l[g]);for(var p=[],y=t.ranks,a=0;a<y.length;++a)y[a]=-1;for(var a=0;a<n.length;++a){var b=t.find(n[a][0]);y[b]<0?(y[b]=p.length,p.push([n[a].slice(0)])):p[y[b]].push(n[a].slice(0))}return p}function connectedComponents_sparse(n){for(var e=unique(normalize$2(skeleton(n,0))),t=new UnionFind(e.length),a=0;a<n.length;++a)for(var l=n[a],h=0;h<l.length;++h)for(var g=findCell(e,[l[h]]),p=h+1;p<l.length;++p)t.link(g,findCell(e,[l[p]]));for(var y=[],b=t.ranks,a=0;a<b.length;++a)b[a]=-1;for(var a=0;a<n.length;++a){var E=t.find(findCell(e,[n[a][0]]));b[E]<0?(b[E]=y.length,y.push([n[a].slice(0)])):y[b[E]].push(n[a].slice(0))}return y}function connectedComponents(n,e){return e?connectedComponents_dense(n,e):connectedComponents_sparse(n)}topology.connectedComponents=connectedComponents;var ich$1=incrementalConvexHull,orient$1=orientationExports,compareCell=topology.compareCells;function Simplex(n,e,t){this.vertices=n,this.adjacent=e,this.boundary=t,this.lastVisited=-1}Simplex.prototype.flip=function(){var n=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=n;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};function GlueFacet(n,e,t){this.vertices=n,this.cell=e,this.index=t}function compareGlue(n,e){return compareCell(n.vertices,e.vertices)}function bakeOrient(n){for(var e=["function orient(){var tuple=this.tuple;return test("],t=0;t<=n;++t)t>0&&e.push(","),e.push("tuple[",t,"]");e.push(")}return orient");var a=new Function("test",e.join("")),l=orient$1[n+1];return l||(l=orient$1),a(l)}var BAKED=[];function Triangulation(n,e,t){this.dimension=n,this.vertices=e,this.simplices=t,this.interior=t.filter(function(h){return!h.boundary}),this.tuple=new Array(n+1);for(var a=0;a<=n;++a)this.tuple[a]=this.vertices[a];var l=BAKED[n];l||(l=BAKED[n]=bakeOrient(n)),this.orient=l}var proto=Triangulation.prototype;proto.handleBoundaryDegeneracy=function(n,e){var t=this.dimension,a=this.vertices.length-1,l=this.tuple,h=this.vertices,g=[n];for(n.lastVisited=-a;g.length>0;){n=g.pop(),n.vertices;for(var p=n.adjacent,y=0;y<=t;++y){var b=p[y];if(!(!b.boundary||b.lastVisited<=-a)){for(var E=b.vertices,C=0;C<=t;++C){var A=E[C];A<0?l[C]=e:l[C]=h[A]}var B=this.orient();if(B>0)return b;b.lastVisited=-a,B===0&&g.push(b)}}}return null};proto.walk=function(n,e){var t=this.vertices.length-1,a=this.dimension,l=this.vertices,h=this.tuple,g=e?this.interior.length*Math.random()|0:this.interior.length-1,p=this.interior[g];e:for(;!p.boundary;){for(var y=p.vertices,b=p.adjacent,E=0;E<=a;++E)h[E]=l[y[E]];p.lastVisited=t;for(var E=0;E<=a;++E){var C=b[E];if(!(C.lastVisited>=t)){var A=h[E];h[E]=n;var B=this.orient();if(h[E]=A,B<0){p=C;continue e}else C.boundary?C.lastVisited=-t:C.lastVisited=t}}return}return p};proto.addPeaks=function(n,e){var t=this.vertices.length-1,a=this.dimension,l=this.vertices,h=this.tuple,g=this.interior,p=this.simplices,y=[e];e.lastVisited=t,e.vertices[e.vertices.indexOf(-1)]=t,e.boundary=!1,g.push(e);for(var b=[];y.length>0;){var e=y.pop(),E=e.vertices,C=e.adjacent,A=E.indexOf(t);if(!(A<0)){for(var B=0;B<=a;++B)if(B!==A){var M=C[B];if(!(!M.boundary||M.lastVisited>=t)){var N=M.vertices;if(M.lastVisited!==-t){for(var Z=0,ee=0;ee<=a;++ee)N[ee]<0?(Z=ee,h[ee]=n):h[ee]=l[N[ee]];var F=this.orient();if(F>0){N[Z]=t,M.boundary=!1,g.push(M),y.push(M),M.lastVisited=t;continue}else M.lastVisited=-t}var O=M.adjacent,k=E.slice(),H=C.slice(),ce=new Simplex(k,H,!0);p.push(ce);var U=O.indexOf(e);if(!(U<0)){O[U]=ce,H[A]=M,k[B]=-1,H[B]=e,C[B]=ce,ce.flip();for(var ee=0;ee<=a;++ee){var te=k[ee];if(!(te<0||te===t)){for(var re=new Array(a-1),ue=0,V=0;V<=a;++V){var S=k[V];S<0||V===ee||(re[ue++]=S)}b.push(new GlueFacet(re,ce,ee))}}}}}}}b.sort(compareGlue);for(var B=0;B+1<b.length;B+=2){var T=b[B],G=b[B+1],Q=T.index,le=G.index;Q<0||le<0||(T.cell.adjacent[T.index]=G.cell,G.cell.adjacent[G.index]=T.cell)}};proto.insert=function(n,e){var t=this.vertices;t.push(n);var a=this.walk(n,e);if(a){for(var l=this.dimension,h=this.tuple,g=0;g<=l;++g){var p=a.vertices[g];p<0?h[g]=n:h[g]=t[p]}var y=this.orient(h);y<0||y===0&&(a=this.handleBoundaryDegeneracy(a,n),!a)||this.addPeaks(n,a)}};proto.boundary=function(){for(var n=this.dimension,e=[],t=this.simplices,a=t.length,l=0;l<a;++l){var h=t[l];if(h.boundary){for(var g=new Array(n),p=h.vertices,y=0,b=0,E=0;E<=n;++E)p[E]>=0?g[y++]=p[E]:b=E&1;if(b===(n&1)){var C=g[0];g[0]=g[1],g[1]=C}e.push(g)}}return e};function incrementalConvexHull(n,e){var t=n.length;if(t===0)throw new Error("Must have at least d+1 points");var a=n[0].length;if(t<=a)throw new Error("Must input at least d+1 points");var l=n.slice(0,a+1),h=orient$1.apply(void 0,l);if(h===0)throw new Error("Input not in general position");for(var g=new Array(a+1),p=0;p<=a;++p)g[p]=p;h<0&&(g[0]=1,g[1]=0);for(var y=new Simplex(g,new Array(a+1),!1),b=y.adjacent,E=new Array(a+2),p=0;p<=a;++p){for(var C=g.slice(),A=0;A<=a;++A)A===p&&(C[A]=-1);var B=C[0];C[0]=C[1],C[1]=B;var M=new Simplex(C,new Array(a+1),!0);b[p]=M,E[p]=M}E[a+1]=y;for(var p=0;p<=a;++p)for(var C=b[p].vertices,N=b[p].adjacent,A=0;A<=a;++A){var Z=C[A];if(Z<0){N[A]=y;continue}for(var ee=0;ee<=a;++ee)b[ee].vertices.indexOf(Z)<0&&(N[A]=b[ee])}for(var F=new Triangulation(a,l,E),O=!!e,p=a+1;p<t;++p)F.insert(n[p],O);return F.boundary()}var aff$1=affineHull,orient=orientationExports;function linearlyIndependent(n,e){for(var t=new Array(e+1),a=0;a<n.length;++a)t[a]=n[a];for(var a=0;a<=n.length;++a){for(var l=n.length;l<=e;++l){for(var h=new Array(e),g=0;g<e;++g)h[g]=Math.pow(l+1-a,g);t[l]=h}var p=orient.apply(void 0,t);if(p)return!0}return!1}function affineHull(n){var e=n.length;if(e===0)return[];if(e===1)return[0];for(var t=n[0].length,a=[n[0]],l=[0],h=1;h<e;++h){if(a.push(n[h]),!linearlyIndependent(a,t)){a.pop();continue}if(l.push(h),l.length===t+1)return l}return l}var chnd=convexHullnD,ich=ich$1,aff=aff$1;function permute(n,e){for(var t=n.length,a=new Array(t),l=0;l<e.length;++l)a[l]=n[e[l]];for(var h=e.length,l=0;l<t;++l)e.indexOf(l)<0&&(a[h++]=n[l]);return a}function invPermute(n,e){for(var t=n.length,a=e.length,l=0;l<t;++l)for(var h=n[l],g=0;g<h.length;++g){var p=h[g];if(p<a)h[g]=e[p];else{p=p-a;for(var y=0;y<a;++y)p>=e[y]&&(p+=1);h[g]=p}}return n}function convexHullnD(n,e){try{return ich(n,!0)}catch{var t=aff(n);if(t.length<=e)return[];var a=permute(n,t),l=ich(a,!0);return invPermute(l,t)}}var convexHull1d=ch1d,convexHull2d=ch2d,convexHullnd=chnd,ch=convexHull$1;function convexHull$1(n){var e=n.length;if(e===0)return[];if(e===1)return[[0]];var t=n[0].length;return t===0?[]:t===1?convexHull1d(n):t===2?convexHull2d(n):convexHullnd(n,t)}var each$a=turfMeta.coordEach,convexHull=ch,polygon$6=turfHelpers.polygon,turfConvex=function(n){var e=[];each$a(n,function(h){e.push(h)});var t=convexHull(e);if(t.length>0){for(var a=[],l=0;l<t.length;l++)a.push(e[t[l][0]]);return a.push(e[t[t.length-1][1]]),polygon$6([a])}},inside$3=turfInside,featureCollection$4=turfHelpers.featureCollection,turfWithin=function(n,e){for(var t=featureCollection$4([]),a=0;a<e.features.length;a++)for(var l=0;l<n.features.length;l++){var h=inside$3(n.features[l],e.features[a]);h&&t.features.push(n.features[l])}return t},jsts_minExports={},jsts_min={get exports(){return jsts_minExports},set exports(n){jsts_minExports=n}};(function(n,e){(function(t,a){a(e)})(commonjsGlobal,function(t){function a(u,c){for(var d in c)c.hasOwnProperty(d)&&(u[d]=c[d])}function l(){}function h(){}function g(){}function p(){}function y(){}function b(){}function E(){}function C(u){this.message=u}function A(u,c){u.prototype=Object.create(c.prototype),u.prototype.constructor=u}function B(){if(arguments.length===0)C.call(this);else if(arguments.length===1){var u=arguments[0];C.call(this,u)}}function M(){}function N(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)N.call(this,0,0);else if(arguments.length===1){var u=arguments[0];N.call(this,u.x,u.y,u.z)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];N.call(this,c,d,N.NULL_ORDINATE)}else if(arguments.length===3){var v=arguments[0],x=arguments[1],I=arguments[2];this.x=v,this.y=x,this.z=I}}function Z(){if(this.dimensionsToTest=2,arguments.length===0)Z.call(this,2);else if(arguments.length===1){var u=arguments[0];if(u!==2&&u!==3)throw new h;this.dimensionsToTest=u}}function ee(){}function F(){}function O(u){this.message=u||""}function k(){}function H(u){this.message=u||""}function ce(u){this.message=u||""}function U(){this.array_=[],arguments[0]instanceof F&&this.addAll(arguments[0])}function te(){if(U.apply(this),arguments.length!==0){if(arguments.length===1){var u=arguments[0];this.ensureCapacity(u.length),this.add(u,!0)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.ensureCapacity(c.length),this.add(c,d)}}}function re(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof N){var u=arguments[0];this.init(u.x,u.x,u.y,u.y)}else if(arguments[0]instanceof re){var c=arguments[0];this.init(c)}}else if(arguments.length===2){var d=arguments[0],v=arguments[1];this.init(d.x,v.x,d.y,v.y)}else if(arguments.length===4){var x=arguments[0],I=arguments[1],R=arguments[2],J=arguments[3];this.init(x,I,R,J)}}function ue(){}function V(){ue.call(this,"Projective point not representable on the Cartesian plane.")}function S(){}function T(u,c){return u.interfaces_&&u.interfaces_().indexOf(c)>-1}function G(){}function Q(u){this.str=u}function le(u){this.value=u}function fe(){}function q(){if(this.hi=0,this.lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var u=arguments[0];this.init(u)}else if(arguments[0]instanceof q){var c=arguments[0];this.init(c)}else if(typeof arguments[0]=="string"){var d=arguments[0];q.call(this,q.parse(d))}}else if(arguments.length===2){var v=arguments[0],x=arguments[1];this.init(v,x)}}function se(){}function D(){}function oe(){}function Pe(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var u=arguments[0];this.x=u.x,this.y=u.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var c=arguments[0],d=arguments[1];this.x=c,this.y=d,this.w=1}else if(arguments[0]instanceof Pe&&arguments[1]instanceof Pe){var v=arguments[0],x=arguments[1];this.x=v.y*x.w-x.y*v.w,this.y=x.x*v.w-v.x*x.w,this.w=v.x*x.y-x.x*v.y}else if(arguments[0]instanceof N&&arguments[1]instanceof N){var I=arguments[0],R=arguments[1];this.x=I.y-R.y,this.y=R.x-I.x,this.w=I.x*R.y-R.x*I.y}}else if(arguments.length===3){var J=arguments[0],ge=arguments[1],Ie=arguments[2];this.x=J,this.y=ge,this.w=Ie}else if(arguments.length===4){var ze=arguments[0],Ve=arguments[1],st=arguments[2],Rt=arguments[3],ln=ze.y-Ve.y,vn=Ve.x-ze.x,Xn=ze.x*Ve.y-Ve.x*ze.y,vr=st.y-Rt.y,Ri=Rt.x-st.x,Va=st.x*Rt.y-Rt.x*st.y;this.x=vn*Va-Ri*Xn,this.y=vr*Xn-ln*Va,this.w=ln*Ri-vr*vn}}function Re(){}function Oe(){}function Ne(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var u=arguments[0];this.factory=u,this.SRID=u.getSRID()}function Ue(){}function Ze(){}function bt(){}function it(){}function ut(){}function ft(){}function He(){}function Mt(){}function wn(){}function Ct(){}function _e(){}function Y(){}function X(){this.array_=[],arguments[0]instanceof F&&this.addAll(arguments[0])}function we(u){return u==null?fa:u.color}function Me(u){return u==null?null:u.parent}function qe(u,c){u!==null&&(u.color=c)}function je(u){return u==null?null:u.left}function We(u){return u==null?null:u.right}function pt(){this.root_=null,this.size_=0}function Gt(){}function rn(){}function St(){this.array_=[],arguments[0]instanceof F&&this.addAll(arguments[0])}function gn(){}function Xe(){}function En(){}function yn(){}function Yt(){this.geometries=null;var u=arguments[0],c=arguments[1];if(Ne.call(this,c),u===null&&(u=[]),Ne.hasNullElements(u))throw new h;this.geometries=u}function Pt(){var u=arguments[0],c=arguments[1];Yt.call(this,u,c)}function an(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,arguments.length===1){var u=arguments[0];an.call(this,u,Ze.MOD2_BOUNDARY_RULE)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.geom=c,this.geomFact=c.getFactory(),this.bnRule=d}}function Dr(){this.count=null}function Gn(){}function Cn(){}function Jr(){}function Pn(){}function jt(){}function zn(){}function Et(){}function lt(){}function Wt(){this.points=null;var u=arguments[0],c=arguments[1];Ne.call(this,c),this.init(u)}function Nn(){}function Lt(){this.coordinates=null;var u=arguments[0],c=arguments[1];Ne.call(this,c),this.init(u)}function or(){}function Kt(){this.shell=null,this.holes=null;var u=arguments[0],c=arguments[1],d=arguments[2];if(Ne.call(this,d),u===null&&(u=this.getFactory().createLinearRing()),c===null&&(c=[]),Ne.hasNullElements(c))throw new h;if(u.isEmpty()&&Ne.hasNonEmptyElements(c))throw new h;this.shell=u,this.holes=c}function Ee(){var u=arguments[0],c=arguments[1];Yt.call(this,u,c)}function be(){if(arguments[0]instanceof N&&arguments[1]instanceof Ut){var u=arguments[0],c=arguments[1];be.call(this,c.getCoordinateSequenceFactory().create(u),c)}else if(T(arguments[0],D)&&arguments[1]instanceof Ut){var d=arguments[0],v=arguments[1];Wt.call(this,d,v),this.validateConstruction()}}function pe(){var u=arguments[0],c=arguments[1];Yt.call(this,u,c)}function he(){if(this.factory=null,this.isUserDataCopied=!1,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this.factory=u}}}function ae(){}function de(){}function me(){}function Be(){}function Fe(){if(this.dimension=3,this.coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];Fe.call(this,u,3)}else if(Number.isInteger(arguments[0])){var c=arguments[0];this.coordinates=new Array(c).fill(null);for(var d=0;c>d;d++)this.coordinates[d]=new N}else if(T(arguments[0],D)){var v=arguments[0];if(v===null)return this.coordinates=new Array(0).fill(null),null;this.dimension=v.getDimension(),this.coordinates=new Array(v.size()).fill(null);for(var d=0;d<this.coordinates.length;d++)this.coordinates[d]=v.getCoordinateCopy(d)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var x=arguments[0],I=arguments[1];this.coordinates=x,this.dimension=I,x===null&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var R=arguments[0],J=arguments[1];this.coordinates=new Array(R).fill(null),this.dimension=J;for(var d=0;R>d;d++)this.coordinates[d]=new N}}}function et(){}function dt(u,c){return u===c||u!==u&&c!==c}function Ye(u,c){function d(v){return this&&this.constructor===d?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=c,void(v&&Te.call(this,v))):new d(v)}return c||os(u,"size",{get:yr}),u.constructor=d,d.prototype=u,d}function Te(u){this.add?u.forEach(this.add,this):u.forEach(function(c){this.set(c[0],c[1])},this)}function xt(u){return this.has(u)&&(this._keys.splice(Zi,1),this._values.splice(Zi,1),this._itp.forEach(function(c){Zi<c[0]&&c[0]--})),Zi>-1}function cn(u){return this.has(u)?this._values[Zi]:void 0}function zt(u,c){if(this.objectOnly&&c!==Object(c))throw new TypeError("Invalid value used as weak collection key");if(c!==c||c===0)for(Zi=u.length;Zi--&&!dt(u[Zi],c););else Zi=u.indexOf(c);return Zi>-1}function on(u){return zt.call(this,this._keys,u)}function Dt(u,c){return this.has(u)?this._values[Zi]=c:this._values[this._keys.push(u)-1]=c,this}function Ft(){(this._keys||0).length=this._values.length=0}function An(){return Zn(this._itp,this._keys)}function Ln(){return Zn(this._itp,this._values)}function Un(){return Zn(this._itp,this._keys,this._values)}function Zn(u,c,d){var v=[0],x=!1;return u.push(v),{next:function(){var I,R=v[0];return!x&&R<c.length?(I=d?[c[R],d[R]]:c[R],v[0]++):(x=!0,u.splice(u.indexOf(v),1)),{done:x,value:I}}}}function yr(){return this._values.length}function _n(u,c){for(var d=this.entries();;){var v=d.next();if(v.done)break;u.call(c,v.value[1],v.value[0],this)}}function Vn(){this.map_=new us}function pn(){if(this.modelType=null,this.scale=null,arguments.length===0)this.modelType=pn.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Qn){var u=arguments[0];this.modelType=u,u===pn.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var c=arguments[0];this.modelType=pn.FIXED,this.setScale(c)}else if(arguments[0]instanceof pn){var d=arguments[0];this.modelType=d.modelType,this.scale=d.scale}}}function Qn(){this.name=null;var u=arguments[0];this.name=u,Qn.nameToTypeMap.put(u,this)}function Ut(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,arguments.length===0)Ut.call(this,new pn,0);else if(arguments.length===1){if(T(arguments[0],Re)){var u=arguments[0];Ut.call(this,new pn,0,u)}else if(arguments[0]instanceof pn){var c=arguments[0];Ut.call(this,c,0,Ut.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var d=arguments[0],v=arguments[1];Ut.call(this,d,v,Ut.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var x=arguments[0],I=arguments[1],R=arguments[2];this.precisionModel=x,this.coordinateSequenceFactory=R,this.SRID=I}}function Kr(u){this.geometryFactory=u||new Ut}function $n(u){this.parser=new Kr(u)}function nn(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new N,this.intPt[1]=new N,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function Zt(){nn.apply(this)}function Dn(){}function $r(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var u=arguments[0];this.p=u}function rt(){}function Qt(){if(this.p0=null,this.p1=null,arguments.length===0)Qt.call(this,new N,new N);else if(arguments.length===1){var u=arguments[0];Qt.call(this,u.p0,u.p1)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.p0=c,this.p1=d}else if(arguments.length===4){var v=arguments[0],x=arguments[1],I=arguments[2],R=arguments[3];Qt.call(this,new N(v,x),new N(I,R))}}function sn(){if(this.matrix=null,arguments.length===0)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(Xe.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var u=arguments[0];sn.call(this),this.set(u)}else if(arguments[0]instanceof sn){var c=arguments[0];sn.call(this),this.matrix[S.INTERIOR][S.INTERIOR]=c.matrix[S.INTERIOR][S.INTERIOR],this.matrix[S.INTERIOR][S.BOUNDARY]=c.matrix[S.INTERIOR][S.BOUNDARY],this.matrix[S.INTERIOR][S.EXTERIOR]=c.matrix[S.INTERIOR][S.EXTERIOR],this.matrix[S.BOUNDARY][S.INTERIOR]=c.matrix[S.BOUNDARY][S.INTERIOR],this.matrix[S.BOUNDARY][S.BOUNDARY]=c.matrix[S.BOUNDARY][S.BOUNDARY],this.matrix[S.BOUNDARY][S.EXTERIOR]=c.matrix[S.BOUNDARY][S.EXTERIOR],this.matrix[S.EXTERIOR][S.INTERIOR]=c.matrix[S.EXTERIOR][S.INTERIOR],this.matrix[S.EXTERIOR][S.BOUNDARY]=c.matrix[S.EXTERIOR][S.BOUNDARY],this.matrix[S.EXTERIOR][S.EXTERIOR]=c.matrix[S.EXTERIOR][S.EXTERIOR]}}}function un(){this.areaBasePt=null,this.triangleCent3=new N,this.areasum2=0,this.cg3=new N,this.lineCentSum=new N,this.totalLength=0,this.ptCount=0,this.ptCentSum=new N;var u=arguments[0];this.areaBasePt=null,this.add(u)}function Wn(u){this.message=u||""}function Kn(){this.array_=[]}function qr(){this.treeSet=new St,this.list=new U}function z(){if(this.geomFactory=null,this.inputPts=null,arguments.length===1){var u=arguments[0];z.call(this,z.extractCoordinates(u),u.getFactory())}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.inputPts=qr.filterCoordinates(c),this.geomFactory=d}}function ie(){this.origin=null;var u=arguments[0];this.origin=u}function Se(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function Ae(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new Qt,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Wt&&typeof arguments[1]=="number"){var u=arguments[0],c=arguments[1];Ae.call(this,u.getCoordinates(),c)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var d=arguments[0],v=arguments[1];this.srcPts=d,this._isClosed=Ae.isClosed(d),this.snapTolerance=v}}function xe(){this.srcGeom=null;var u=arguments[0];this.srcGeom=u}function Ge(){if(Se.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,arguments.length===2){var u=arguments[0],c=arguments[1];this.snapTolerance=u,this.snapPts=c}else if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];this.snapTolerance=d,this.snapPts=v,this.isSelfSnap=x}}function Ce(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function Qe(){this.commonCoord=null,this.ccFilter=new ht}function ht(){this.commonBitsX=new Ce,this.commonBitsY=new Ce}function yt(){this.trans=null;var u=arguments[0];this.trans=u}function ot(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var u=arguments[0];this.parent=u,this.atStart=!0,this.index=0,this.max=u.getNumGeometries()}function wt(){if(this.boundaryRule=Ze.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];if(u===null)throw new h;this.boundaryRule=u}}}function qt(){}function Tt(){}function vt(){this.pts=null,this.data=null;var u=arguments[0],c=arguments[1];this.pts=u,this.data=c}function tt(){}function _t(){this.bounds=null,this.item=null;var u=arguments[0],c=arguments[1];this.bounds=u,this.item=c}function Jt(){this._size=null,this.items=null,this._size=0,this.items=new U,this.items.add(null)}function Vt(){}function At(){}function It(){if(this.childBoundables=new U,this.bounds=null,this.level=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this.level=u}}}function nt(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var u=arguments[0],c=arguments[1],d=arguments[2];this.boundable1=u,this.boundable2=c,this.itemDistance=d,this._distance=this.distance()}function gt(){if(this.root=null,this.built=!1,this.itemBoundables=new U,this.nodeCapacity=null,arguments.length===0)gt.call(this,gt.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var u=arguments[0];M.isTrue(u>1,"Node capacity must be greater than 1"),this.nodeCapacity=u}}function kt(){}function mn(){}function Xt(){if(arguments.length===0)Xt.call(this,Xt.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var u=arguments[0];gt.call(this,u)}}function fn(){var u=arguments[0];It.call(this,u)}function hn(){}function Sn(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var u=arguments[0],c=arguments[1],d=arguments[2],v=arguments[3];this.segString=u,this.coord=new N(c),this.segmentIndex=d,this.segmentOctant=v,this._isInterior=!c.equals2D(u.getCoordinate(d))}function Bn(){this.nodeMap=new pt,this.edge=null;var u=arguments[0];this.edge=u}function Cr(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var u=arguments[0];this.nodeList=u,this.edge=u.getEdge(),this.nodeIt=u.iterator(),this.readNextNode()}function dr(){}function Ir(){this.nodeList=new Bn(this),this.pts=null,this.data=null;var u=arguments[0],c=arguments[1];this.pts=u,this.data=c}function br(){this.tempEnv1=new re,this.tempEnv2=new re,this.overlapSeg1=new Qt,this.overlapSeg2=new Qt}function Fi(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var u=arguments[0],c=arguments[1],d=arguments[2],v=arguments[3];this.pts=u,this.start=c,this.end=d,this.context=v}function xn(){}function Vr(){}function ea(){}function Tn(){if(this.segInt=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this.setSegmentIntersector(u)}}}function yi(){if(this.monoChains=new U,this.index=new Xt,this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,arguments.length!==0){if(arguments.length===1){var u=arguments[0];Tn.call(this,u)}}}function Gr(){br.apply(this),this.si=null;var u=arguments[0];this.si=u}function sr(){if(this.pt=null,arguments.length===1){var u=arguments[0];C.call(this,u)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];C.call(this,sr.msgWithCoord(c,d)),this.pt=new N(d)}}function ta(){}function _i(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new U,this.intersectionCount=0,this.keepIntersections=!0;var u=arguments[0];this.li=u,this.interiorIntersection=null}function Bi(){this.li=new Zt,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var u=arguments[0];this.segStrings=u}function ki(){this.nv=null;var u=arguments[0];this.nv=new Bi(ki.toSegmentStrings(u))}function $i(){this.mapOp=null;var u=arguments[0];this.mapOp=u}function ct(){}function Tr(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];this.init(u.length)}else if(Number.isInteger(arguments[0])){var c=arguments[0];this.init(1),this.location[ct.ON]=c}else if(arguments[0]instanceof Tr){var d=arguments[0];if(this.init(d.location.length),d!==null)for(var v=0;v<this.location.length;v++)this.location[v]=d.location[v]}}else if(arguments.length===3){var x=arguments[0],I=arguments[1],R=arguments[2];this.init(3),this.location[ct.ON]=x,this.location[ct.LEFT]=I,this.location[ct.RIGHT]=R}}function Jn(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var u=arguments[0];this.elt[0]=new Tr(u),this.elt[1]=new Tr(u)}else if(arguments[0]instanceof Jn){var c=arguments[0];this.elt[0]=new Tr(c.elt[0]),this.elt[1]=new Tr(c.elt[1])}}else if(arguments.length===2){var d=arguments[0],v=arguments[1];this.elt[0]=new Tr(S.NONE),this.elt[1]=new Tr(S.NONE),this.elt[d].setLocation(v)}else if(arguments.length===3){var x=arguments[0],I=arguments[1],R=arguments[2];this.elt[0]=new Tr(x,I,R),this.elt[1]=new Tr(x,I,R)}else if(arguments.length===4){var J=arguments[0],ge=arguments[1],Ie=arguments[2],ze=arguments[3];this.elt[0]=new Tr(S.NONE,S.NONE,S.NONE),this.elt[1]=new Tr(S.NONE,S.NONE,S.NONE),this.elt[J].setLocations(ge,Ie,ze)}}function na(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new U,this.pts=new U,this.label=new Jn(S.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new U,this.geometryFactory=null;var u=arguments[0],c=arguments[1];this.geometryFactory=c,this.computePoints(u),this.computeRing()}function Yr(){var u=arguments[0],c=arguments[1];na.call(this,u,c)}function ga(){var u=arguments[0],c=arguments[1];na.call(this,u,c)}function bi(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this.label=u}}}function xr(){bi.apply(this),this.coord=null,this.edges=null;var u=arguments[0],c=arguments[1];this.coord=u,this.edges=c,this.label=new Jn(0,S.NONE)}function Gi(){this.nodeMap=new pt,this.nodeFact=null;var u=arguments[0];this.nodeFact=u}function ei(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,arguments.length===1){var u=arguments[0];this.edge=u}else if(arguments.length===3){var c=arguments[0],d=arguments[1],v=arguments[2];ei.call(this,c,d,v,null)}else if(arguments.length===4){var x=arguments[0],I=arguments[1],R=arguments[2],J=arguments[3];ei.call(this,x),this.init(I,R),this.label=J}}function zi(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var u=arguments[0],c=arguments[1];if(ei.call(this,u),this._isForward=c,c)this.init(u.getCoordinate(0),u.getCoordinate(1));else{var d=u.getNumPoints()-1;this.init(u.getCoordinate(d),u.getCoordinate(d-1))}this.computeDirectedLabel()}function Hi(){}function Rr(){if(this.edges=new U,this.nodes=null,this.edgeEndList=new U,arguments.length===0)this.nodes=new Gi(new Hi);else if(arguments.length===1){var u=arguments[0];this.nodes=new Gi(u)}}function Ea(){this.geometryFactory=null,this.shellList=new U;var u=arguments[0];this.geometryFactory=u}function xi(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new U,this.resultLineList=new U;var u=arguments[0],c=arguments[1],d=arguments[2];this.op=u,this.geometryFactory=c,this.ptLocator=d}function pa(){this.op=null,this.geometryFactory=null,this.resultPointList=new U;var u=arguments[0],c=arguments[1];this.op=u,this.geometryFactory=c}function Fr(){}function gr(){this.geom=null;var u=arguments[0];this.geom=u}function Ui(){this.edgeMap=new pt,this.edgeList=null,this.ptInAreaLocation=[S.NONE,S.NONE]}function Ni(){Ui.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function Pr(){Hi.apply(this)}function ra(){this.mce=null,this.chainIndex=null;var u=arguments[0],c=arguments[1];this.mce=u,this.chainIndex=c}function ni(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,arguments.length===2){var u=arguments[0],c=arguments[1];this.eventType=ni.DELETE,this.xValue=u,this.insertEvent=c}else if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];this.eventType=ni.INSERT,this.label=d,this.xValue=v,this.obj=x}}function qi(){}function wi(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var u=arguments[0],c=arguments[1],d=arguments[2];this.li=u,this.includeProper=c,this.recordIsolated=d}function ma(){qi.apply(this),this.events=new U,this.nOverlaps=null}function oi(){this.min=g.POSITIVE_INFINITY,this.max=g.NEGATIVE_INFINITY}function ia(){}function Vi(){oi.apply(this),this.item=null;var u=arguments[0],c=arguments[1],d=arguments[2];this.min=u,this.max=c,this.item=d}function Sa(){oi.apply(this),this.node1=null,this.node2=null;var u=arguments[0],c=arguments[1];this.node1=u,this.node2=c,this.buildExtent(this.node1,this.node2)}function Oa(){this.leaves=new U,this.root=null,this.level=0}function nr(){if(this.lines=null,this.isForcedToLineString=!1,arguments.length===1){var u=arguments[0];this.lines=u}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.lines=c,this.isForcedToLineString=d}}function si(){this.items=new U}function zr(){this.index=null;var u=arguments[0];if(!T(u,or))throw new h;this.index=new Wi(u)}function ui(){this.counter=null;var u=arguments[0];this.counter=u}function Wi(){this.index=new Oa;var u=arguments[0];this.init(u)}function ri(){this.coord=null,this.segmentIndex=null,this.dist=null;var u=arguments[0],c=arguments[1],d=arguments[2];this.coord=new N(u),this.segmentIndex=c,this.dist=d}function Li(){this.nodeMap=new pt,this.edge=null;var u=arguments[0];this.edge=u}function Hr(){}function Nr(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new re,this.env2=new re;var u=arguments[0];this.e=u,this.pts=u.getCoordinates();var c=new Hr;this.startIndex=c.getChainStartIndices(this.pts)}function rr(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var u=0;2>u;u++)for(var c=0;3>c;c++)this.depth[u][c]=rr.NULL_VALUE}function Br(){if(bi.apply(this),this.pts=null,this.env=null,this.eiList=new Li(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new rr,this.depthDelta=0,arguments.length===1){var u=arguments[0];Br.call(this,u,null)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.pts=c,this.label=d}}function pr(){if(Rr.apply(this),this.parentGeom=null,this.lineEdgeMap=new Vn,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new wt,arguments.length===2){var u=arguments[0],c=arguments[1];pr.call(this,u,c,Ze.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];this.argIndex=d,this.parentGeom=v,this.boundaryNodeRule=x,v!==null&&this.add(v)}}function Ai(){if(this.li=new Zt,this.resultPrecisionModel=null,this.arg=null,arguments.length===1){var u=arguments[0];this.setComputationPrecision(u.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new pr(0,u)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];Ai.call(this,c,d,Ze.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var v=arguments[0],x=arguments[1],I=arguments[2];v.getPrecisionModel().compareTo(x.getPrecisionModel())>=0?this.setComputationPrecision(v.getPrecisionModel()):this.setComputationPrecision(x.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new pr(0,v,I),this.arg[1]=new pr(1,x,I)}}function wr(){this.pts=null,this._orientation=null;var u=arguments[0];this.pts=u,this._orientation=wr.orientation(u)}function li(){this.edges=new U,this.ocaMap=new pt}function Ot(){this.ptLocator=new wt,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new li,this.resultPolyList=new U,this.resultLineList=new U,this.resultPointList=new U;var u=arguments[0],c=arguments[1];Ai.call(this,u,c),this.graph=new Rr(new Pr),this.geomFact=u.getFactory()}function mr(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var u=arguments[0],c=arguments[1];this.geom[0]=u,this.geom[1]=c,this.computeSnapTolerance()}function ir(){this.geom=new Array(2).fill(null);var u=arguments[0],c=arguments[1];this.geom[0]=u,this.geom[1]=c}function er(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var u=arguments[0];this.factory=u.getFactory(),this.add(u)}function Ei(){this.poly=null,this.centreY=null,this.hiY=g.MAX_VALUE,this.loY=-g.MAX_VALUE;var u=arguments[0];this.poly=u,this.hiY=u.getEnvelopeInternal().getMaxY(),this.loY=u.getEnvelopeInternal().getMinY(),this.centreY=er.avg(this.loY,this.hiY)}function ci(){this.centroid=null,this.minDistance=g.MAX_VALUE,this.interiorPoint=null;var u=arguments[0];this.centroid=u.getCentroid().getCoordinate(),this.addInterior(u),this.interiorPoint===null&&this.addEndpoints(u)}function va(){this.centroid=null,this.minDistance=g.MAX_VALUE,this.interiorPoint=null;var u=arguments[0];this.centroid=u.getCentroid().getCoordinate(),this.add(u)}function en(){}function Rn(){this.p0=null,this.p1=null,this.p2=null;var u=arguments[0],c=arguments[1],d=arguments[2];this.p0=u,this.p1=c,this.p2=d}function Lr(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var u=arguments[0];this.input=u}function ur(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new Qt,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,arguments.length===1){var u=arguments[0];ur.call(this,u,!1)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.inputGeom=c,this.isConvex=d}}function ii(){this.inputGeom=null,this.distanceTolerance=null;var u=arguments[0];this.inputGeom=u}function Mi(){Se.apply(this),this.distanceTolerance=null;var u=arguments[0];this.distanceTolerance=u}function Ur(){this._orig=null,this._sym=null,this._next=null;var u=arguments[0];this._orig=u}function lr(){this._isMarked=!1;var u=arguments[0];Ur.call(this,u)}function fi(){this.vertexMap=new Vn}function Ji(){this._isStart=!1;var u=arguments[0];lr.call(this,u)}function W(){fi.apply(this)}function ye(){this.result=null,this.factory=null,this.graph=null,this.lines=new U,this.nodeEdgeStack=new Kn,this.ringStartEdge=null,this.graph=new W}function Le(){this.items=new U,this.subnode=new Array(4).fill(null)}function Je(){}function Nt(u,c){var d,v,x,I,R={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},J={32:8,64:11}[u];if(I||(d=0>c||0>1/c,isFinite(c)||(I=R[u],d&&(I.d+=1<<u/4-1),v=Math.pow(2,J)-1,x=0)),!I){for(v={32:127,64:1023}[u],x=Math.abs(c);x>=2;)v++,x/=2;for(;1>x&&v>0;)v--,x*=2;0>=v&&(x/=2),u===32&&v>254&&(I={d:d?255:127,c:128,b:0,a:0},v=Math.pow(2,J)-1,x=0)}return v}function mt(){this.pt=new N,this.level=0,this.env=null;var u=arguments[0];this.computeKey(u)}function Bt(){Le.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var u=arguments[0],c=arguments[1];this.env=u,this.level=c,this.centrex=(u.getMinX()+u.getMaxX())/2,this.centrey=(u.getMinY()+u.getMaxY())/2}function Ht(){}function tn(){Le.apply(this)}function Mn(){this.root=null,this.minExtent=1,this.root=new tn}function Hn(u){this.geometryFactory=u||new Ut}function Yn(u){this.geometryFactory=u||new Ut,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Hn(this.geometryFactory)}function ar(){this.parser=new Hn(this.geometryFactory)}function Er(u){this.geometryFactory=u||new Ut,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Kr(this.geometryFactory)}function cr(u){return[u.x,u.y]}function Xr(u){this.geometryFactory=u||new Ut}function jr(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,arguments.length===2){var u=arguments[0],c=arguments[1];jr.call(this,u,c,0,0)}else if(arguments.length===4){var d=arguments[0],v=arguments[1];this.noder=d,this.scaleFactor=v,this.isScaled=!this.isIntegerPrecision()}}function kr(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,arguments.length===1){var u=arguments[0];this.inputGeom=u}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.inputGeom=c,this.isClosedEndpointsInInterior=!d.isInBoundary(2)}}function aa(){this.pt=null,this.isClosed=null,this.degree=null;var u=arguments[0];this.pt=u,this.isClosed=!1,this.degree=0}function In(){if(this.quadrantSegments=In.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=In.CAP_ROUND,this.joinStyle=In.JOIN_ROUND,this.mitreLimit=In.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=In.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this.setQuadrantSegments(u)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.setQuadrantSegments(c),this.setEndCapStyle(d)}else if(arguments.length===4){var v=arguments[0],x=arguments[1],I=arguments[2],R=arguments[3];this.setQuadrantSegments(v),this.setEndCapStyle(x),this.setJoinStyle(I),this.setMitreLimit(R)}}}function oa(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function hi(){this.array_=[]}function Wa(){this.finder=null,this.dirEdgeList=new U,this.nodes=new U,this.rightMostCoord=null,this.env=null,this.finder=new oa}function Sr(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=rt.COUNTERCLOCKWISE;var u=arguments[0];this.inputLine=u}function Ki(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new U}function Si(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new Qt,this.seg1=new Qt,this.offset0=new Qt,this.offset1=new Qt,this.side=0,this._hasNarrowConcaveAngle=!1;var u=arguments[0],c=arguments[1],d=arguments[2];this.precisionModel=u,this.bufParams=c,this.li=new Zt,this.filletAngleQuantum=Math.PI/2/c.getQuadrantSegments(),c.getQuadrantSegments()>=8&&c.getJoinStyle()===In.JOIN_ROUND&&(this.closingSegLengthFactor=Si.MAX_CLOSING_SEG_LEN_FACTOR),this.init(d)}function sa(){this.distance=0,this.precisionModel=null,this.bufParams=null;var u=arguments[0],c=arguments[1];this.precisionModel=u,this.bufParams=c}function ua(){this.subgraphs=null,this.seg=new Qt,this.cga=new rt;var u=arguments[0];this.subgraphs=u}function Ra(){this.upwardSeg=null,this.leftDepth=null;var u=arguments[0],c=arguments[1];this.upwardSeg=new Qt(u),this.leftDepth=c}function Ja(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new U;var u=arguments[0],c=arguments[1],d=arguments[2];this.inputGeom=u,this.distance=c,this.curveBuilder=d}function Fa(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var u=arguments[0];this.li=u}function Yi(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new li;var u=arguments[0];this.bufParams=u}function Ca(){this.li=new Zt,this.segStrings=null;var u=arguments[0];this.segStrings=u}function ya(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var u=arguments[0],c=arguments[1],d=arguments[2];if(this.originalPt=u,this.pt=u,this.scaleFactor=c,this.li=d,0>=c)throw new h;c!==1&&(this.pt=new N(this.scale(u.x),this.scale(u.y)),this.p0Scaled=new N,this.p1Scaled=new N),this.initCorners(this.pt)}function Xi(){this.tempEnv1=new re,this.selectedSegment=new Qt}function Ba(){this.index=null;var u=arguments[0];this.index=u}function ka(){Xi.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var u=arguments[0],c=arguments[1],d=arguments[2];this.hotPixel=u,this.parentEdge=c,this.hotPixelVertexIndex=d}function Ka(){this.li=null,this.interiorIntersections=null;var u=arguments[0];this.li=u,this.interiorIntersections=new U}function Ya(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var u=arguments[0];this.pm=u,this.li=new Zt,this.li.setPrecisionModel(u),this.scaleFactor=u.getScale()}function Ar(){if(this.argGeom=null,this.distance=null,this.bufParams=new In,this.resultGeometry=null,this.saveException=null,arguments.length===1){var u=arguments[0];this.argGeom=u}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.argGeom=c,this.bufParams=d}}function m(){this.comps=null;var u=arguments[0];this.comps=u}function w(){if(this.component=null,this.segIndex=null,this.pt=null,arguments.length===2){var u=arguments[0],c=arguments[1];w.call(this,u,w.INSIDE_AREA,c)}else if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];this.component=d,this.segIndex=v,this.pt=x}}function P(){this.pts=null;var u=arguments[0];this.pts=u}function $(){this.locations=null;var u=arguments[0];this.locations=u}function ne(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new wt,this.minDistanceLocation=null,this.minDistance=g.MAX_VALUE,arguments.length===2){var u=arguments[0],c=arguments[1];ne.call(this,u,c,0)}else if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=d,this.geom[1]=v,this.terminateDistance=x}}function ve(){this.factory=null,this.directedEdges=new U,this.coordinates=null;var u=arguments[0];this.factory=u}function De(){this._isMarked=!1,this._isVisited=!1,this.data=null}function $e(){De.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var u=arguments[0],c=arguments[1],d=arguments[2],v=arguments[3];this.from=u,this.to=c,this.edgeDirection=v,this.p0=u.getCoordinate(),this.p1=d;var x=this.p1.x-this.p0.x,I=this.p1.y-this.p0.y;this.quadrant=xn.quadrant(x,I),this.angle=Math.atan2(I,x)}function Ke(){var u=arguments[0],c=arguments[1],d=arguments[2],v=arguments[3];$e.call(this,u,c,d,v)}function at(){if(De.apply(this),this.dirEdge=null,arguments.length!==0){if(arguments.length===2){var u=arguments[0],c=arguments[1];this.setDirectedEdges(u,c)}}}function $t(){this.outEdges=new U,this.sorted=!1}function dn(){if(De.apply(this),this.pt=null,this.deStar=null,arguments.length===1){var u=arguments[0];dn.call(this,u,new $t)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.pt=c,this.deStar=d}}function On(){at.apply(this),this.line=null;var u=arguments[0];this.line=u}function ti(){this.nodeMap=new pt}function di(){this.edges=new X,this.dirEdges=new X,this.nodeMap=new ti}function _a(){di.apply(this)}function Di(){this.graph=new _a,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function ba(){this.edgeRing=null,this.next=null,this.label=-1;var u=arguments[0],c=arguments[1],d=arguments[2],v=arguments[3];$e.call(this,u,c,d,v)}function Xa(){at.apply(this),this.line=null;var u=arguments[0];this.line=u}function gi(){this.factory=null,this.deList=new U,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var u=arguments[0];this.factory=u}function lo(){}function fr(){di.apply(this),this.factory=null;var u=arguments[0];this.factory=u}function Zr(){if(this.lineStringAdder=new $a(this),this.graph=null,this.dangles=new U,this.cutEdges=new U,this.invalidRingLines=new U,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,arguments.length===0)Zr.call(this,!1);else if(arguments.length===1){var u=arguments[0];this.extractOnlyPolygonal=u}}function $a(){this.p=null;var u=arguments[0];this.p=u}function hr(){}function la(){if(this.edgeEnds=new U,arguments.length===1){var u=arguments[0];la.call(this,null,u)}else if(arguments.length===2){var c=arguments[1];ei.call(this,c.getEdge(),c.getCoordinate(),c.getDirectedCoordinate(),new Jn(c.getLabel())),this.insert(c)}}function ja(){Ui.apply(this)}function Za(){var u=arguments[0],c=arguments[1];xr.call(this,u,c)}function Ga(){Hi.apply(this)}function Ia(){this.li=new Zt,this.ptLocator=new wt,this.arg=null,this.nodes=new Gi(new Ga),this.im=null,this.isolatedEdges=new U,this.invalidPoint=null;var u=arguments[0];this.arg=u}function Pa(){this.rectEnv=null;var u=arguments[0];this.rectEnv=u.getEnvelopeInternal()}function co(){this.li=new Zt,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var u=arguments[0];this.rectEnv=u,this.diagUp0=new N(u.getMinX(),u.getMinY()),this.diagUp1=new N(u.getMaxX(),u.getMaxY()),this.diagDown0=new N(u.getMinX(),u.getMaxY()),this.diagDown1=new N(u.getMaxX(),u.getMinY())}function Na(){this._isDone=!1}function Qa(){this.rectangle=null,this.rectEnv=null;var u=arguments[0];this.rectangle=u,this.rectEnv=u.getEnvelopeInternal()}function No(){Na.apply(this),this.rectEnv=null,this._intersects=!1;var u=arguments[0];this.rectEnv=u}function Lo(){Na.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var u=arguments[0];this.rectSeq=u.getExteriorRing().getCoordinateSequence(),this.rectEnv=u.getEnvelopeInternal()}function Ao(){Na.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new N,this.p1=new N;var u=arguments[0];this.rectEnv=u.getEnvelopeInternal(),this.rectIntersector=new co(this.rectEnv)}function kn(){if(this._relate=null,arguments.length===2){var u=arguments[0],c=arguments[1];Ai.call(this,u,c),this._relate=new Ia(this.arg)}else if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];Ai.call(this,d,v,x),this._relate=new Ia(this.arg)}}function mi(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var u=arguments[0];this.geomFactory=mi.extractFactory(u),this.inputGeoms=u}function fo(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var u=arguments[0],c=arguments[1];this.pointGeom=u,this.otherGeom=c,this.geomFact=c.getFactory()}function La(){this.sortIndex=-1,this.comps=null;var u=arguments[0],c=arguments[1];this.sortIndex=u,this.comps=c}function Ci(){this.inputPolys=null,this.geomFactory=null;var u=arguments[0];this.inputPolys=u,this.inputPolys===null&&(this.inputPolys=new U)}function Aa(){if(this.polygons=new U,this.lines=new U,this.points=new U,this.geomFact=null,arguments.length===1){if(T(arguments[0],F)){var u=arguments[0];this.extract(u)}else if(arguments[0]instanceof Ne){var c=arguments[0];this.extract(c)}}else if(arguments.length===2){var d=arguments[0],v=arguments[1];this.geomFact=v,this.extract(d)}}function ho(){this.geometryFactory=new Ut,this.geomGraph=null,this.disconnectedRingcoord=null;var u=arguments[0];this.geomGraph=u}function ji(){this.items=new U,this.subnode=[null,null]}function ca(){if(this.min=null,this.max=null,arguments.length===0)this.min=0,this.max=0;else if(arguments.length===1){var u=arguments[0];this.init(u.min,u.max)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.init(c,d)}}function go(){this.pt=0,this.level=0,this.interval=null;var u=arguments[0];this.computeKey(u)}function xa(){ji.apply(this),this.interval=null,this.centre=null,this.level=null;var u=arguments[0],c=arguments[1];this.interval=u,this.level=c,this.centre=(u.getMin()+u.getMax())/2}function eo(){ji.apply(this)}function to(){this.root=null,this.minExtent=1,this.root=new eo}function Yo(){}function Mo(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new ca;var u=arguments[0];this.ring=u,this.buildIndex()}function po(){Xi.apply(this),this.mcp=null,this.p=null;var u=arguments[0],c=arguments[1];this.mcp=u,this.p=c}function Xo(){this.nodes=new Gi(new Ga)}function jo(){this.li=new Zt,this.geomGraph=null,this.nodeGraph=new Xo,this.invalidPoint=null;var u=arguments[0];this.geomGraph=u}function Zo(){this.graph=null,this.rings=new U,this.totalEnv=new re,this.index=null,this.nestedPt=null;var u=arguments[0];this.graph=u}function Fn(){if(this.errorType=null,this.pt=null,arguments.length===1){var u=arguments[0];Fn.call(this,u,null)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.errorType=c,d!==null&&(this.pt=d.copy())}}function Ii(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var u=arguments[0];this.parentGeometry=u}function Do(){he.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var u=arguments[0],c=arguments[1];this.targetPM=u,this.removeCollapsed=c}function za(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var u=arguments[0];this.targetPM=u}function mo(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new Qt;var u=arguments[0];this.pts=u}function no(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var u=arguments[0];this.inputGeom=u}function vo(){Se.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var u=arguments[0],c=arguments[1];this.isEnsureValidTopology=u,this.distanceTolerance=c}function yo(){if(this.parent=null,this.index=null,arguments.length===2){var u=arguments[0],c=arguments[1];yo.call(this,u,c,null,-1)}else if(arguments.length===4){var d=arguments[0],v=arguments[1],x=arguments[2],I=arguments[3];Qt.call(this,d,v),this.parent=x,this.index=I}}function wa(){if(this.parentLine=null,this.segs=null,this.resultSegs=new U,this.minimumSize=null,arguments.length===1){var u=arguments[0];wa.call(this,u,2)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.parentLine=c,this.minimumSize=d,this.init()}}function ro(){this.index=new Mn}function Qo(){this.querySeg=null,this.items=new U;var u=arguments[0];this.querySeg=u}function _o(){this.li=new Zt,this.inputIndex=new ro,this.outputIndex=new ro,this.line=null,this.linePts=null,this.distanceTolerance=0;var u=arguments[0],c=arguments[1];this.inputIndex=u,this.outputIndex=c}function ts(){this.inputIndex=new ro,this.outputIndex=new ro,this.distanceTolerance=0}function Ha(){this.inputGeom=null,this.lineSimplifier=new ts,this.linestringMap=null;var u=arguments[0];this.inputGeom=u}function bo(){Se.apply(this),this.linestringMap=null;var u=arguments[0];this.linestringMap=u}function To(){this.tps=null;var u=arguments[0];this.tps=u}function io(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var u=arguments[0];this.seg=u,this.segLen=u.getLength()}function ns(){}function xo(){}function jn(){}function qn(){if(this.p=null,arguments.length===1){var u=arguments[0];this.p=new N(u)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.p=new N(c,d)}else if(arguments.length===3){var v=arguments[0],x=arguments[1],I=arguments[2];this.p=new N(v,x,I)}}function Ma(){this._isOnConstraint=null,this.constraint=null;var u=arguments[0];qn.call(this,u)}function tr(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function wo(){this.subdiv=null,this.isUsingTolerance=!1;var u=arguments[0];this.subdiv=u,this.isUsingTolerance=u.getTolerance()>0}function rs(){}function Oo(){this.subdiv=null,this.lastEdge=null;var u=arguments[0];this.subdiv=u,this.init()}function ao(){if(this.seg=null,arguments.length===1){if(typeof arguments[0]=="string"){var u=arguments[0];C.call(this,u)}else if(arguments[0]instanceof Qt){var c=arguments[0];C.call(this,"Locate failed to converge (at edge: "+c+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new Qt(c)}}else if(arguments.length===2){var d=arguments[0],v=arguments[1];C.call(this,ao.msgWithSpatial(d,v)),this.seg=new Qt(v)}}function oo(){}function vi(){this.visitedKey=0,this.quadEdges=new U,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new Qt,this.triEdges=new Array(3).fill(null);var u=arguments[0],c=arguments[1];this.tolerance=c,this.edgeCoincidenceTolerance=c/vi.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(u),this.startingEdge=this.initSubdiv(),this.locator=new Oo(this)}function Ro(){}function Fo(){this.triList=new U}function Bo(){this.triList=new U}function ko(){this.coordList=new te,this.triCoords=new U}function Ua(){if(this.ls=null,this.data=null,arguments.length===2){var u=arguments[0],c=arguments[1];this.ls=new Qt(u,c)}else if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];this.ls=new Qt(d,v),this.data=x}else if(arguments.length===6){var I=arguments[0],R=arguments[1],J=arguments[2],ge=arguments[3],Ie=arguments[4],ze=arguments[5];Ua.call(this,new N(I,R,J),new N(ge,Ie,ze))}else if(arguments.length===7){var Ve=arguments[0],st=arguments[1],Rt=arguments[2],ln=arguments[3],vn=arguments[4],Xn=arguments[5],vr=arguments[6];Ua.call(this,new N(Ve,st,Rt),new N(ln,vn,Xn),vr)}}function Eo(){}function $o(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,arguments.length===2){var u=arguments[0],c=arguments[1];this.p=new N(u),this.left=null,this.right=null,this.count=1,this.data=c}else if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];this.p=new N(d,v),this.left=null,this.right=null,this.count=1,this.data=x}}function qa(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,arguments.length===0)qa.call(this,0);else if(arguments.length===1){var u=arguments[0];this.tolerance=u}}function Go(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var u=arguments[0],c=arguments[1];this.p=u,this.tolerance=c}function Da(){this.initialVertices=null,this.segVertices=null,this.segments=new U,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new xo,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var u=arguments[0],c=arguments[1];this.initialVertices=new U(u),this.tolerance=c,this.kdt=new qa(c)}function Wr(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function so(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new pt}function So(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function zo(){}Array.prototype.fill||(Array.prototype.fill=function(u){for(var c=Object(this),d=parseInt(c.length,10),v=arguments[1],x=parseInt(v,10)||0,I=0>x?Math.max(d+x,0):Math.min(x,d),R=arguments[2],J=R===void 0?d:parseInt(R,10)||0,ge=0>J?Math.max(d+J,0):Math.min(J,d);ge>I;I++)c[I]=u;return c}),Number.isFinite=Number.isFinite||function(u){return typeof u=="number"&&isFinite(u)},Number.isInteger=Number.isInteger||function(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(u){return u!==u},Math.trunc=Math.trunc||function(u){return 0>u?Math.ceil(u):Math.floor(u)},a(l.prototype,{interfaces_:function(){return[]},getClass:function(){return l}}),l.equalsWithTolerance=function(u,c,d){return Math.abs(u-c)<=d},g.isNaN=function(u){return Number.isNaN(u)},g.doubleToLongBits=function(u){return u},g.longBitsToDouble=function(u){return u},g.isInfinite=function(u){return!Number.isFinite(u)},g.MAX_VALUE=Number.MAX_VALUE,A(B,C),a(B.prototype,{interfaces_:function(){return[]},getClass:function(){return B}}),a(M.prototype,{interfaces_:function(){return[]},getClass:function(){return M}}),M.shouldNeverReachHere=function(){if(arguments.length===0)M.shouldNeverReachHere(null);else if(arguments.length===1){var u=arguments[0];throw new B("Should never reach here"+(u!==null?": "+u:""))}},M.isTrue=function(){if(arguments.length===1){var u=arguments[0];M.isTrue(u,null)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];if(!c)throw d===null?new B:new B(d)}},M.equals=function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];M.equals(u,c,null)}else if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];if(!v.equals(d))throw new B("Expected "+d+" but encountered "+v+(x!==null?": "+x:""))}},a(N.prototype,{setOrdinate:function(u,c){switch(u){case N.X:this.x=c;break;case N.Y:this.y=c;break;case N.Z:this.z=c;break;default:throw new h}},equals2D:function(){if(arguments.length===1){var u=arguments[0];return this.x!==u.x?!1:this.y===u.y}if(arguments.length===2){var c=arguments[0],d=arguments[1];return l.equalsWithTolerance(this.x,c.x,d)?!!l.equalsWithTolerance(this.y,c.y,d):!1}},getOrdinate:function(u){switch(u){case N.X:return this.x;case N.Y:return this.y;case N.Z:return this.z}throw new h},equals3D:function(u){return this.x===u.x&&this.y===u.y&&(this.z===u.z||g.isNaN(this.z)&&g.isNaN(u.z))},equals:function(u){return u instanceof N?this.equals2D(u):!1},equalInZ:function(u,c){return l.equalsWithTolerance(this.z,u.z,c)},compareTo:function(u){var c=u;return this.x<c.x?-1:this.x>c.x?1:this.y<c.y?-1:this.y>c.y?1:0},clone:function(){try{var u=null;return u}catch(c){if(c instanceof CloneNotSupportedException)return M.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw c}finally{}},copy:function(){return new N(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(u){var c=this.x-u.x,d=this.y-u.y,v=this.z-u.z;return Math.sqrt(c*c+d*d+v*v)},distance:function(u){var c=this.x-u.x,d=this.y-u.y;return Math.sqrt(c*c+d*d)},hashCode:function(){var u=17;return u=37*u+N.hashCode(this.x),u=37*u+N.hashCode(this.y)},setCoordinate:function(u){this.x=u.x,this.y=u.y,this.z=u.z},interfaces_:function(){return[p,y,E]},getClass:function(){return N}}),N.hashCode=function(){if(arguments.length===1){var u=arguments[0],c=g.doubleToLongBits(u);return Math.trunc(c^c>>>32)}},a(Z.prototype,{compare:function(u,c){var d=u,v=c,x=Z.compare(d.x,v.x);if(x!==0)return x;var I=Z.compare(d.y,v.y);if(I!==0)return I;if(this.dimensionsToTest<=2)return 0;var R=Z.compare(d.z,v.z);return R},interfaces_:function(){return[b]},getClass:function(){return Z}}),Z.compare=function(u,c){return c>u?-1:u>c?1:g.isNaN(u)?g.isNaN(c)?0:-1:g.isNaN(c)?1:0},N.DimensionalComparator=Z,N.serialVersionUID=6683108902428367e3,N.NULL_ORDINATE=g.NaN,N.X=0,N.Y=1,N.Z=2,ee.prototype.hasNext=function(){},ee.prototype.next=function(){},ee.prototype.remove=function(){},F.prototype.add=function(){},F.prototype.addAll=function(){},F.prototype.isEmpty=function(){},F.prototype.iterator=function(){},F.prototype.size=function(){},F.prototype.toArray=function(){},F.prototype.remove=function(){},O.prototype=new Error,O.prototype.name="IndexOutOfBoundsException",k.prototype=Object.create(F.prototype),k.prototype.constructor=k,k.prototype.get=function(){},k.prototype.set=function(){},k.prototype.isEmpty=function(){},H.prototype=new Error,H.prototype.name="NoSuchElementException",ce.prototype=new Error,ce.prototype.name="OperationNotSupported",U.prototype=Object.create(k.prototype),U.prototype.constructor=U,U.prototype.ensureCapacity=function(){},U.prototype.interfaces_=function(){return[k,F]},U.prototype.add=function(u){return this.array_.push(u),!0},U.prototype.clear=function(){this.array_=[]},U.prototype.addAll=function(u){for(var c=u.iterator();c.hasNext();)this.add(c.next());return!0},U.prototype.set=function(u,c){var d=this.array_[u];return this.array_[u]=c,d},U.prototype.iterator=function(){return new Co(this)},U.prototype.get=function(u){if(0>u||u>=this.size())throw new O;return this.array_[u]},U.prototype.isEmpty=function(){return this.array_.length===0},U.prototype.size=function(){return this.array_.length},U.prototype.toArray=function(){for(var u=[],c=0,d=this.array_.length;d>c;c++)u.push(this.array_[c]);return u},U.prototype.remove=function(u){for(var c=!1,d=0,v=this.array_.length;v>d;d++)if(this.array_[d]===u){this.array_.splice(d,1),c=!0;break}return c};var Co=function(u){this.arrayList_=u,this.position_=0};Co.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new H;return this.arrayList_.get(this.position_++)},Co.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},Co.prototype.set=function(u){return this.arrayList_.set(this.position_-1,u)},Co.prototype.remove=function(){throw new ce},A(te,U),a(te.prototype,{getCoordinate:function(u){return this.get(u)},addAll:function(){if(arguments.length===2){for(var u=arguments[0],c=arguments[1],d=!1,v=u.iterator();v.hasNext();)this.add(v.next(),c),d=!0;return d}return U.prototype.addAll.apply(this,arguments)},clone:function(){for(var c=U.prototype.clone.call(this),d=0;d<this.size();d++)c.add(d,this.get(d).copy());return c},toCoordinateArray:function(){return this.toArray(te.coordArrayType)},add:function(){if(arguments.length===1){var u=arguments[0];U.prototype.add.call(this,u)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var c=arguments[0],d=arguments[1];return this.add(c,d,!0),!0}if(arguments[0]instanceof N&&typeof arguments[1]=="boolean"){var v=arguments[0],x=arguments[1];if(!x&&this.size()>=1){var I=this.get(this.size()-1);if(I.equals2D(v))return null}U.prototype.add.call(this,v)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var R=arguments[0],J=arguments[1];return this.add(R,J),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var ge=arguments[0],Ie=arguments[1],ze=arguments[2];if(ze)for(var Ve=0;Ve<ge.length;Ve++)this.add(ge[Ve],Ie);else for(var Ve=ge.length-1;Ve>=0;Ve--)this.add(ge[Ve],Ie);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof N){var st=arguments[0],Rt=arguments[1],ln=arguments[2];if(!ln){var vn=this.size();if(vn>0){if(st>0){var Xn=this.get(st-1);if(Xn.equals2D(Rt))return null}if(vn>st){var vr=this.get(st);if(vr.equals2D(Rt))return null}}}U.prototype.add.call(this,st,Rt)}}else if(arguments.length===4){var Ri=arguments[0],Va=arguments[1],qo=arguments[2],Vo=arguments[3],Wo=1;qo>Vo&&(Wo=-1);for(var Ve=qo;Ve!==Vo;Ve+=Wo)this.add(Ri[Ve],Va);return!0}},closeRing:function(){this.size()>0&&this.add(new N(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return te}}),te.coordArrayType=new Array(0).fill(null),a(re.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(u){if(!(u instanceof re))return!1;var c=u;return this.isNull()?c.isNull():this.maxx===c.getMaxX()&&this.maxy===c.getMaxY()&&this.minx===c.getMinX()&&this.miny===c.getMinY()},intersection:function(u){if(this.isNull()||u.isNull()||!this.intersects(u))return new re;var c=this.minx>u.minx?this.minx:u.minx,d=this.miny>u.miny?this.miny:u.miny,v=this.maxx<u.maxx?this.maxx:u.maxx,x=this.maxy<u.maxy?this.maxy:u.maxy;return new re(c,v,d,x)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(arguments.length===1){if(arguments[0]instanceof N){var u=arguments[0];return this.covers(u.x,u.y)}if(arguments[0]instanceof re){var c=arguments[0];return this.isNull()||c.isNull()?!1:c.getMinX()>=this.minx&&c.getMaxX()<=this.maxx&&c.getMinY()>=this.miny&&c.getMaxY()<=this.maxy}}else if(arguments.length===2){var d=arguments[0],v=arguments[1];return this.isNull()?!1:d>=this.minx&&d<=this.maxx&&v>=this.miny&&v<=this.maxy}},intersects:function(){if(arguments.length===1){if(arguments[0]instanceof re){var u=arguments[0];return this.isNull()||u.isNull()?!1:!(u.minx>this.maxx||u.maxx<this.minx||u.miny>this.maxy||u.maxy<this.miny)}if(arguments[0]instanceof N){var c=arguments[0];return this.intersects(c.x,c.y)}}else if(arguments.length===2){var d=arguments[0],v=arguments[1];return this.isNull()?!1:!(d>this.maxx||d<this.minx||v>this.maxy||v<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(arguments.length===1){if(arguments[0]instanceof N){var u=arguments[0];this.expandToInclude(u.x,u.y)}else if(arguments[0]instanceof re){var c=arguments[0];if(c.isNull())return null;this.isNull()?(this.minx=c.getMinX(),this.maxx=c.getMaxX(),this.miny=c.getMinY(),this.maxy=c.getMaxY()):(c.minx<this.minx&&(this.minx=c.minx),c.maxx>this.maxx&&(this.maxx=c.maxx),c.miny<this.miny&&(this.miny=c.miny),c.maxy>this.maxy&&(this.maxy=c.maxy))}}else if(arguments.length===2){var d=arguments[0],v=arguments[1];this.isNull()?(this.minx=d,this.maxx=d,this.miny=v,this.maxy=v):(d<this.minx&&(this.minx=d),d>this.maxx&&(this.maxx=d),v<this.miny&&(this.miny=v),v>this.maxy&&(this.maxy=v))}},minExtent:function(){if(this.isNull())return 0;var u=this.getWidth(),c=this.getHeight();return c>u?u:c},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(u){var c=u;return this.isNull()?c.isNull()?0:-1:c.isNull()?1:this.minx<c.minx?-1:this.minx>c.minx?1:this.miny<c.miny?-1:this.miny>c.miny?1:this.maxx<c.maxx?-1:this.maxx>c.maxx?1:this.maxy<c.maxy?-1:this.maxy>c.maxy?1:0},translate:function(u,c){return this.isNull()?null:void this.init(this.getMinX()+u,this.getMaxX()+u,this.getMinY()+c,this.getMaxY()+c)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var u=this.getWidth(),c=this.getHeight();return u>c?u:c},expandBy:function(){if(arguments.length===1){var u=arguments[0];this.expandBy(u,u)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];if(this.isNull())return null;this.minx-=c,this.maxx+=c,this.miny-=d,this.maxy+=d,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(arguments.length===1){if(arguments[0]instanceof re){var u=arguments[0];return this.covers(u)}if(arguments[0]instanceof N){var c=arguments[0];return this.covers(c)}}else if(arguments.length===2){var d=arguments[0],v=arguments[1];return this.covers(d,v)}},centre:function(){return this.isNull()?null:new N((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof N){var u=arguments[0];this.init(u.x,u.x,u.y,u.y)}else if(arguments[0]instanceof re){var c=arguments[0];this.minx=c.minx,this.maxx=c.maxx,this.miny=c.miny,this.maxy=c.maxy}}else if(arguments.length===2){var d=arguments[0],v=arguments[1];this.init(d.x,v.x,d.y,v.y)}else if(arguments.length===4){var x=arguments[0],I=arguments[1],R=arguments[2],J=arguments[3];I>x?(this.minx=x,this.maxx=I):(this.minx=I,this.maxx=x),J>R?(this.miny=R,this.maxy=J):(this.miny=J,this.maxy=R)}},getMaxY:function(){return this.maxy},distance:function(u){if(this.intersects(u))return 0;var c=0;this.maxx<u.minx?c=u.minx-this.maxx:this.minx>u.maxx&&(c=this.minx-u.maxx);var d=0;return this.maxy<u.miny?d=u.miny-this.maxy:this.miny>u.maxy&&(d=this.miny-u.maxy),c===0?d:d===0?c:Math.sqrt(c*c+d*d)},hashCode:function(){var u=17;return u=37*u+N.hashCode(this.minx),u=37*u+N.hashCode(this.maxx),u=37*u+N.hashCode(this.miny),u=37*u+N.hashCode(this.maxy)},interfaces_:function(){return[p,E]},getClass:function(){return re}}),re.intersects=function(){if(arguments.length===3){var u=arguments[0],c=arguments[1],d=arguments[2];return d.x>=(u.x<c.x?u.x:c.x)&&d.x<=(u.x>c.x?u.x:c.x)&&d.y>=(u.y<c.y?u.y:c.y)&&d.y<=(u.y>c.y?u.y:c.y)}if(arguments.length===4){var v=arguments[0],x=arguments[1],I=arguments[2],R=arguments[3],J=Math.min(I.x,R.x),ge=Math.max(I.x,R.x),Ie=Math.min(v.x,x.x),ze=Math.max(v.x,x.x);return Ie>ge||J>ze?!1:(J=Math.min(I.y,R.y),ge=Math.max(I.y,R.y),Ie=Math.min(v.y,x.y),ze=Math.max(v.y,x.y),Ie>ge?!1:!(J>ze))}},re.serialVersionUID=5873921885273102e3,A(V,ue),a(V.prototype,{interfaces_:function(){return[]},getClass:function(){return V}}),a(S.prototype,{interfaces_:function(){return[]},getClass:function(){return S}}),S.toLocationSymbol=function(u){switch(u){case S.EXTERIOR:return"e";case S.BOUNDARY:return"b";case S.INTERIOR:return"i";case S.NONE:return"-"}throw new h},S.INTERIOR=0,S.BOUNDARY=1,S.EXTERIOR=2,S.NONE=-1,a(G.prototype,{interfaces_:function(){return[]},getClass:function(){return G}}),G.log10=function(u){var c=Math.log(u);return g.isInfinite(c)||g.isNaN(c)?c:c/G.LOG_10},G.min=function(u,c,d,v){var x=u;return x>c&&(x=c),x>d&&(x=d),x>v&&(x=v),x},G.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],c=arguments[1],d=arguments[2];return c>u?c:u>d?d:u}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var v=arguments[0],x=arguments[1],I=arguments[2];return x>v?x:v>I?I:v}},G.wrap=function(u,c){return 0>u?c- -u%c:u%c},G.max=function(){if(arguments.length===3){var u=arguments[0],c=arguments[1],d=arguments[2],v=u;return c>v&&(v=c),d>v&&(v=d),v}if(arguments.length===4){var x=arguments[0],I=arguments[1],R=arguments[2],J=arguments[3],v=x;return I>v&&(v=I),R>v&&(v=R),J>v&&(v=J),v}},G.average=function(u,c){return(u+c)/2},G.LOG_10=Math.log(10),Q.prototype.append=function(u){this.str+=u},Q.prototype.setCharAt=function(u,c){return this.str.substr(0,u)+c+this.str.substr(u+1)},Q.prototype.toString=function(u){return this.str},le.prototype.intValue=function(){return this.value},le.prototype.compareTo=function(u){return this.value<u?-1:this.value>u?1:0},le.isNaN=function(u){return Number.isNaN(u)},fe.isWhitespace=function(u){return 32>=u&&u>=0||u==127},fe.toUpperCase=function(u){return u.toUpperCase()},a(q.prototype,{le:function(u){return this.hi<u.hi||this.hi===u.hi&&this.lo<=u.lo},extractSignificantDigits:function(u,c){var d=this.abs(),v=q.magnitude(d.hi),x=q.TEN.pow(v);d=d.divide(x),d.gt(q.TEN)?(d=d.divide(q.TEN),v+=1):d.lt(q.ONE)&&(d=d.multiply(q.TEN),v-=1);for(var I=v+1,R=new Q,J=q.MAX_PRINT_DIGITS-1,ge=0;J>=ge;ge++){u&&ge===I&&R.append(".");var Ie=Math.trunc(d.hi);if(0>Ie)break;var ze=!1,Ve=0;Ie>9?(ze=!0,Ve="9"):Ve="0"+Ie,R.append(Ve),d=d.subtract(q.valueOf(Ie)).multiply(q.TEN),ze&&d.selfAdd(q.TEN);var st=!0,Rt=q.magnitude(d.hi);if(0>Rt&&Math.abs(Rt)>=J-ge&&(st=!1),!st)break}return c[0]=v,R.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof q){var u=arguments[0];return this.add(u.negate())}if(typeof arguments[0]=="number"){var c=arguments[0];return this.add(-c)}},equals:function(){if(arguments.length===1){var u=arguments[0];return this.hi===u.hi&&this.lo===u.lo}},isZero:function(){return this.hi===0&&this.lo===0},selfSubtract:function(){if(arguments[0]instanceof q){var u=arguments[0];return this.isNaN()?this:this.selfAdd(-u.hi,-u.lo)}if(typeof arguments[0]=="number"){var c=arguments[0];return this.isNaN()?this:this.selfAdd(-c,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(u){return this.le(u)?this:u},selfDivide:function(){if(arguments.length===1){if(arguments[0]instanceof q){var u=arguments[0];return this.selfDivide(u.hi,u.lo)}if(typeof arguments[0]=="number"){var c=arguments[0];return this.selfDivide(c,0)}}else if(arguments.length===2){var d=arguments[0],v=arguments[1],x=null,I=null,R=null,J=null,ge=null,Ie=null,ze=null,Ve=null;return ge=this.hi/d,Ie=q.SPLIT*ge,x=Ie-ge,Ve=q.SPLIT*d,x=Ie-x,I=ge-x,R=Ve-d,ze=ge*d,R=Ve-R,J=d-R,Ve=x*R-ze+x*J+I*R+I*J,Ie=(this.hi-ze-Ve+this.lo-ge*v)/d,Ve=ge+Ie,this.hi=Ve,this.lo=ge-Ve+Ie,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof q){var u=arguments[0],c=null,d=null,v=null,x=null,I=null,R=null,J=null,ge=null;I=this.hi/u.hi,R=q.SPLIT*I,c=R-I,ge=q.SPLIT*u.hi,c=R-c,d=I-c,v=ge-u.hi,J=I*u.hi,v=ge-v,x=u.hi-v,ge=c*v-J+c*x+d*v+d*x,R=(this.hi-J-ge+this.lo-I*u.lo)/u.hi,ge=I+R;var Ie=ge,ze=I-ge+R;return new q(Ie,ze)}if(typeof arguments[0]=="number"){var Ve=arguments[0];return g.isNaN(Ve)?q.createNaN():q.copy(this).selfDivide(Ve,0)}},ge:function(u){return this.hi>u.hi||this.hi===u.hi&&this.lo>=u.lo},pow:function(u){if(u===0)return q.valueOf(1);var c=new q(this),d=q.valueOf(1),v=Math.abs(u);if(v>1)for(;v>0;)v%2===1&&d.selfMultiply(c),v/=2,v>0&&(c=c.sqr());else d=c;return 0>u?d.reciprocal():d},ceil:function(){if(this.isNaN())return q.NaN;var u=Math.ceil(this.hi),c=0;return u===this.hi&&(c=Math.ceil(this.lo)),new q(u,c)},compareTo:function(u){var c=u;return this.hi<c.hi?-1:this.hi>c.hi?1:this.lo<c.lo?-1:this.lo>c.lo?1:0},rint:function(){if(this.isNaN())return this;var u=this.add(.5);return u.floor()},setValue:function(){if(arguments[0]instanceof q){var u=arguments[0];return this.init(u),this}if(typeof arguments[0]=="number"){var c=arguments[0];return this.init(c),this}},max:function(u){return this.ge(u)?this:u},sqrt:function(){if(this.isZero())return q.valueOf(0);if(this.isNegative())return q.NaN;var u=1/Math.sqrt(this.hi),c=this.hi*u,d=q.valueOf(c),v=this.subtract(d.sqr()),x=v.hi*(.5*u);return d.add(x)},selfAdd:function(){if(arguments.length===1){if(arguments[0]instanceof q){var u=arguments[0];return this.selfAdd(u.hi,u.lo)}if(typeof arguments[0]=="number"){var c=arguments[0],d=null,v=null,x=null,I=null,R=null,J=null;return x=this.hi+c,R=x-this.hi,I=x-R,I=c-R+(this.hi-I),J=I+this.lo,d=x+J,v=J+(x-d),this.hi=d+v,this.lo=v+(d-this.hi),this}}else if(arguments.length===2){var ge=arguments[0],Ie=arguments[1],d=null,v=null,ze=null,Ve=null,x=null,I=null,R=null,J=null;x=this.hi+ge,ze=this.lo+Ie,R=x-this.hi,J=ze-this.lo,I=x-R,Ve=ze-J,I=ge-R+(this.hi-I),Ve=Ie-J+(this.lo-Ve),R=I+ze,d=x+R,v=R+(x-d),R=Ve+v;var st=d+R,Rt=R+(d-st);return this.hi=st,this.lo=Rt,this}},selfMultiply:function(){if(arguments.length===1){if(arguments[0]instanceof q){var u=arguments[0];return this.selfMultiply(u.hi,u.lo)}if(typeof arguments[0]=="number"){var c=arguments[0];return this.selfMultiply(c,0)}}else if(arguments.length===2){var d=arguments[0],v=arguments[1],x=null,I=null,R=null,J=null,ge=null,Ie=null;ge=q.SPLIT*this.hi,x=ge-this.hi,Ie=q.SPLIT*d,x=ge-x,I=this.hi-x,R=Ie-d,ge=this.hi*d,R=Ie-R,J=d-R,Ie=x*R-ge+x*J+I*R+I*J+(this.hi*v+this.lo*d);var ze=ge+Ie;x=ge-ze;var Ve=Ie+x;return this.hi=ze,this.lo=Ve,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return q.NaN;var u=Math.floor(this.hi),c=0;return u===this.hi&&(c=Math.floor(this.lo)),new q(u,c)},negate:function(){return this.isNaN()?this:new q(-this.hi,-this.lo)},clone:function(){try{return null}catch(u){if(u instanceof CloneNotSupportedException)return null;throw u}finally{}},multiply:function(){if(arguments[0]instanceof q){var u=arguments[0];return u.isNaN()?q.createNaN():q.copy(this).selfMultiply(u)}if(typeof arguments[0]=="number"){var c=arguments[0];return g.isNaN(c)?q.createNaN():q.copy(this).selfMultiply(c,0)}},isNaN:function(){return g.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var u=q.magnitude(this.hi);return u>=-3&&20>=u?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var u=this.getSpecialNumberString();if(u!==null)return u;var c=new Array(1).fill(null),d=this.extractSignificantDigits(!0,c),v=c[0]+1,x=d;if(d.charAt(0)===".")x="0"+d;else if(0>v)x="0."+q.stringOfChar("0",-v)+d;else if(d.indexOf(".")===-1){var I=v-d.length,R=q.stringOfChar("0",I);x=d+R+".0"}return this.isNegative()?"-"+x:x},reciprocal:function(){var u=null,c=null,d=null,v=null,x=null,I=null,R=null,J=null;x=1/this.hi,I=q.SPLIT*x,u=I-x,J=q.SPLIT*this.hi,u=I-u,c=x-u,d=J-this.hi,R=x*this.hi,d=J-d,v=this.hi-d,J=u*d-R+u*v+c*d+c*v,I=(1-R-J-x*this.lo)/this.hi;var ge=x+I,Ie=x-ge+I;return new q(ge,Ie)},toSciNotation:function(){if(this.isZero())return q.SCI_NOT_ZERO;var u=this.getSpecialNumberString();if(u!==null)return u;var c=new Array(1).fill(null),d=this.extractSignificantDigits(!1,c),v=q.SCI_NOT_EXPONENT_CHAR+c[0];if(d.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+d);var x="";d.length>1&&(x=d.substring(1));var I=d.charAt(0)+"."+x;return this.isNegative()?"-"+I+v:I+v},abs:function(){return this.isNaN()?q.NaN:this.isNegative()?this.negate():new q(this)},isPositive:function(){return this.hi>0||this.hi===0&&this.lo>0},lt:function(u){return this.hi<u.hi||this.hi===u.hi&&this.lo<u.lo},add:function(){if(arguments[0]instanceof q){var u=arguments[0];return q.copy(this).selfAdd(u)}if(typeof arguments[0]=="number"){var c=arguments[0];return q.copy(this).selfAdd(c)}},init:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var u=arguments[0];this.hi=u,this.lo=0}else if(arguments[0]instanceof q){var c=arguments[0];this.hi=c.hi,this.lo=c.lo}}else if(arguments.length===2){var d=arguments[0],v=arguments[1];this.hi=d,this.lo=v}},gt:function(u){return this.hi>u.hi||this.hi===u.hi&&this.lo>u.lo},isNegative:function(){return this.hi<0||this.hi===0&&this.lo<0},trunc:function(){return this.isNaN()?q.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0},interfaces_:function(){return[E,p,y]},getClass:function(){return q}}),q.sqr=function(u){return q.valueOf(u).selfMultiply(u)},q.valueOf=function(){if(typeof arguments[0]=="string"){var u=arguments[0];return q.parse(u)}if(typeof arguments[0]=="number"){var c=arguments[0];return new q(c)}},q.sqrt=function(u){return q.valueOf(u).sqrt()},q.parse=function(u){for(var c=0,d=u.length;fe.isWhitespace(u.charAt(c));)c++;var v=!1;if(d>c){var x=u.charAt(c);x!=="-"&&x!=="+"||(c++,x==="-"&&(v=!0))}for(var I=new q,R=0,J=0,ge=0;!(c>=d);){var Ie=u.charAt(c);if(c++,fe.isDigit(Ie)){var ze=Ie-"0";I.selfMultiply(q.TEN),I.selfAdd(ze),R++}else{if(Ie!=="."){if(Ie==="e"||Ie==="E"){var Ve=u.substring(c);try{ge=le.parseInt(Ve)}catch(vn){throw vn instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+Ve+" in string "+u):vn}finally{}break}throw new NumberFormatException("Unexpected character '"+Ie+"' at position "+c+" in string "+u)}J=R}}var st=I,Rt=R-J-ge;if(Rt===0)st=I;else if(Rt>0){var ln=q.TEN.pow(Rt);st=I.divide(ln)}else if(0>Rt){var ln=q.TEN.pow(-Rt);st=I.multiply(ln)}return v?st.negate():st},q.createNaN=function(){return new q(g.NaN,g.NaN)},q.copy=function(u){return new q(u)},q.magnitude=function(u){var c=Math.abs(u),d=Math.log(c)/Math.log(10),v=Math.trunc(Math.floor(d)),x=Math.pow(10,v);return c>=10*x&&(v+=1),v},q.stringOfChar=function(u,c){for(var d=new Q,v=0;c>v;v++)d.append(u);return d.toString()},q.PI=new q(3.141592653589793,12246467991473532e-32),q.TWO_PI=new q(6.283185307179586,24492935982947064e-32),q.PI_2=new q(1.5707963267948966,6123233995736766e-32),q.E=new q(2.718281828459045,14456468917292502e-32),q.NaN=new q(g.NaN,g.NaN),q.EPS=123259516440783e-46,q.SPLIT=134217729,q.MAX_PRINT_DIGITS=32,q.TEN=q.valueOf(10),q.ONE=q.valueOf(1),q.SCI_NOT_EXPONENT_CHAR="E",q.SCI_NOT_ZERO="0.0E0",a(se.prototype,{interfaces_:function(){return[]},getClass:function(){return se}}),se.orientationIndex=function(u,c,d){var v=se.orientationIndexFilter(u,c,d);if(1>=v)return v;var x=q.valueOf(c.x).selfAdd(-u.x),I=q.valueOf(c.y).selfAdd(-u.y),R=q.valueOf(d.x).selfAdd(-c.x),J=q.valueOf(d.y).selfAdd(-c.y);return x.selfMultiply(J).selfSubtract(I.selfMultiply(R)).signum()},se.signOfDet2x2=function(u,c,d,v){var x=u.multiply(v).selfSubtract(c.multiply(d));return x.signum()},se.intersection=function(u,c,d,v){var x=q.valueOf(v.y).selfSubtract(d.y).selfMultiply(q.valueOf(c.x).selfSubtract(u.x)),I=q.valueOf(v.x).selfSubtract(d.x).selfMultiply(q.valueOf(c.y).selfSubtract(u.y)),R=x.subtract(I),J=q.valueOf(v.x).selfSubtract(d.x).selfMultiply(q.valueOf(u.y).selfSubtract(d.y)),ge=q.valueOf(v.y).selfSubtract(d.y).selfMultiply(q.valueOf(u.x).selfSubtract(d.x)),Ie=J.subtract(ge),ze=Ie.selfDivide(R).doubleValue(),Ve=q.valueOf(u.x).selfAdd(q.valueOf(c.x).selfSubtract(u.x).selfMultiply(ze)).doubleValue(),st=q.valueOf(c.x).selfSubtract(u.x).selfMultiply(q.valueOf(u.y).selfSubtract(d.y)),Rt=q.valueOf(c.y).selfSubtract(u.y).selfMultiply(q.valueOf(u.x).selfSubtract(d.x)),ln=st.subtract(Rt),vn=ln.selfDivide(R).doubleValue(),Xn=q.valueOf(d.y).selfAdd(q.valueOf(v.y).selfSubtract(d.y).selfMultiply(vn)).doubleValue();return new N(Ve,Xn)},se.orientationIndexFilter=function(u,c,d){var v=null,x=(u.x-d.x)*(c.y-d.y),I=(u.y-d.y)*(c.x-d.x),R=x-I;if(x>0){if(0>=I)return se.signum(R);v=x+I}else{if(!(0>x)||I>=0)return se.signum(R);v=-x-I}var J=se.DP_SAFE_EPSILON*v;return R>=J||-R>=J?se.signum(R):2},se.signum=function(u){return u>0?1:0>u?-1:0},se.DP_SAFE_EPSILON=1e-15,a(D.prototype,{setOrdinate:function(u,c,d){},size:function(){},getOrdinate:function(u,c){},getCoordinate:function(){},getCoordinateCopy:function(u){},getDimension:function(){},getX:function(u){},clone:function(){},expandEnvelope:function(u){},copy:function(){},getY:function(u){},toCoordinateArray:function(){},interfaces_:function(){return[y]},getClass:function(){return D}}),D.X=0,D.Y=1,D.Z=2,D.M=3,oe.arraycopy=function(u,c,d,v,x){for(var I=0,R=c;c+x>R;R++)d[v+I]=u[R],I++},oe.getProperty=function(u){return{"line.separator":`
`}[u]},a(Pe.prototype,{getY:function(){var u=this.y/this.w;if(g.isNaN(u)||g.isInfinite(u))throw new V;return u},getX:function(){var u=this.x/this.w;if(g.isNaN(u)||g.isInfinite(u))throw new V;return u},getCoordinate:function(){var u=new N;return u.x=this.getX(),u.y=this.getY(),u},interfaces_:function(){return[]},getClass:function(){return Pe}}),Pe.intersection=function(u,c,d,v){var x=u.y-c.y,I=c.x-u.x,R=u.x*c.y-c.x*u.y,J=d.y-v.y,ge=v.x-d.x,Ie=d.x*v.y-v.x*d.y,ze=I*Ie-ge*R,Ve=J*R-x*Ie,st=x*ge-J*I,Rt=ze/st,ln=Ve/st;if(g.isNaN(Rt)||g.isInfinite(Rt)||g.isNaN(ln)||g.isInfinite(ln))throw new V;return new N(Rt,ln)},a(Re.prototype,{create:function(){arguments.length===1&&(arguments[0]instanceof Array||T(arguments[0],D))},interfaces_:function(){return[]},getClass:function(){return Re}}),a(Oe.prototype,{filter:function(u){},interfaces_:function(){return[]},getClass:function(){return Oe}}),a(Ne.prototype,{isGeometryCollection:function(){return this.getSortIndex()===Ne.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(u){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(arguments.length===1){if(arguments[0]instanceof Ne){var u=arguments[0];return u===null?!1:this.equalsTopo(u)}if(arguments[0]instanceof Object){var c=arguments[0];if(!(c instanceof Ne))return!1;var d=c;return this.equalsExact(d)}}},equalsExact:function(u){return this===u||this.equalsExact(u,0)},geometryChanged:function(){this.apply(Ne.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(u){return u===null?!1:this.norm().equalsExact(u.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(arguments.length===1){var u=arguments[0],c=u;return this.getSortIndex()!==c.getSortIndex()?this.getSortIndex()-c.getSortIndex():this.isEmpty()&&c.isEmpty()?0:this.isEmpty()?-1:c.isEmpty()?1:this.compareToSameClass(u)}if(arguments.length===2){var d=arguments[0],v=arguments[1],c=d;return this.getSortIndex()!==c.getSortIndex()?this.getSortIndex()-c.getSortIndex():this.isEmpty()&&c.isEmpty()?0:this.isEmpty()?-1:c.isEmpty()?1:this.compareToSameClass(d,v)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(u){if(u.getSortIndex()===Ne.SORTINDEX_GEOMETRYCOLLECTION)throw new h},equal:function(u,c,d){return d===0?u.equals(c):u.distance(c)<=d},norm:function(){var u=this.copy();return u.normalize(),u},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return this.envelope===null&&(this.envelope=this.computeEnvelopeInternal()),new re(this.envelope)},setSRID:function(u){this.SRID=u},setUserData:function(u){this.userData=u},compare:function(u,c){for(var d=u.iterator(),v=c.iterator();d.hasNext()&&v.hasNext();){var x=d.next(),I=v.next(),R=x.compareTo(I);if(R!==0)return R}return d.hasNext()?1:v.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===Ne.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Ne.SORTINDEX_MULTIPOINT||this.getSortIndex()===Ne.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Ne.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[y,p,E]},getClass:function(){return Ne}}),Ne.hasNonEmptyElements=function(u){for(var c=0;c<u.length;c++)if(!u[c].isEmpty())return!0;return!1},Ne.hasNullElements=function(u){for(var c=0;c<u.length;c++)if(u[c]===null)return!0;return!1},Ne.serialVersionUID=8763622679187377e3,Ne.SORTINDEX_POINT=0,Ne.SORTINDEX_MULTIPOINT=1,Ne.SORTINDEX_LINESTRING=2,Ne.SORTINDEX_LINEARRING=3,Ne.SORTINDEX_MULTILINESTRING=4,Ne.SORTINDEX_POLYGON=5,Ne.SORTINDEX_MULTIPOLYGON=6,Ne.SORTINDEX_GEOMETRYCOLLECTION=7,Ne.geometryChangedFilter={interfaces_:function(){return[Oe]},filter:function(u){u.geometryChangedAction()}},a(Ue.prototype,{filter:function(u){},interfaces_:function(){return[]},getClass:function(){return Ue}}),a(Ze.prototype,{isInBoundary:function(u){},interfaces_:function(){return[]},getClass:function(){return Ze}}),a(bt.prototype,{isInBoundary:function(u){return u%2===1},interfaces_:function(){return[Ze]},getClass:function(){return bt}}),a(it.prototype,{isInBoundary:function(u){return u>0},interfaces_:function(){return[Ze]},getClass:function(){return it}}),a(ut.prototype,{isInBoundary:function(u){return u>1},interfaces_:function(){return[Ze]},getClass:function(){return ut}}),a(ft.prototype,{isInBoundary:function(u){return u===1},interfaces_:function(){return[Ze]},getClass:function(){return ft}}),Ze.Mod2BoundaryNodeRule=bt,Ze.EndPointBoundaryNodeRule=it,Ze.MultiValentEndPointBoundaryNodeRule=ut,Ze.MonoValentEndPointBoundaryNodeRule=ft,Ze.MOD2_BOUNDARY_RULE=new bt,Ze.ENDPOINT_BOUNDARY_RULE=new it,Ze.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new ut,Ze.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new ft,Ze.OGC_SFS_BOUNDARY_RULE=Ze.MOD2_BOUNDARY_RULE,a(He.prototype,{interfaces_:function(){return[]},getClass:function(){return He}}),He.isRing=function(u){return u.length<4?!1:!!u[0].equals2D(u[u.length-1])},He.ptNotInList=function(u,c){for(var d=0;d<u.length;d++){var v=u[d];if(He.indexOf(v,c)<0)return v}return null},He.scroll=function(u,c){var d=He.indexOf(c,u);if(0>d)return null;var v=new Array(u.length).fill(null);oe.arraycopy(u,d,v,0,u.length-d),oe.arraycopy(u,0,v,u.length-d,d),oe.arraycopy(v,0,u,0,u.length)},He.equals=function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];if(u===c)return!0;if(u===null||c===null||u.length!==c.length)return!1;for(var d=0;d<u.length;d++)if(!u[d].equals(c[d]))return!1;return!0}if(arguments.length===3){var v=arguments[0],x=arguments[1],I=arguments[2];if(v===x)return!0;if(v===null||x===null||v.length!==x.length)return!1;for(var d=0;d<v.length;d++)if(I.compare(v[d],x[d])!==0)return!1;return!0}},He.intersection=function(u,c){for(var d=new te,v=0;v<u.length;v++)c.intersects(u[v])&&d.add(u[v],!0);return d.toCoordinateArray()},He.hasRepeatedPoints=function(u){for(var c=1;c<u.length;c++)if(u[c-1].equals(u[c]))return!0;return!1},He.removeRepeatedPoints=function(u){if(!He.hasRepeatedPoints(u))return u;var c=new te(u,!1);return c.toCoordinateArray()},He.reverse=function(u){for(var c=u.length-1,d=Math.trunc(c/2),v=0;d>=v;v++){var x=u[v];u[v]=u[c-v],u[c-v]=x}},He.removeNull=function(u){for(var c=0,d=0;d<u.length;d++)u[d]!==null&&c++;var v=new Array(c).fill(null);if(c===0)return v;for(var x=0,d=0;d<u.length;d++)u[d]!==null&&(v[x++]=u[d]);return v},He.copyDeep=function(){if(arguments.length===1){for(var u=arguments[0],c=new Array(u.length).fill(null),d=0;d<u.length;d++)c[d]=new N(u[d]);return c}if(arguments.length===5)for(var v=arguments[0],x=arguments[1],I=arguments[2],R=arguments[3],J=arguments[4],d=0;J>d;d++)I[R+d]=new N(v[x+d])},He.isEqualReversed=function(u,c){for(var d=0;d<u.length;d++){var v=u[d],x=c[u.length-d-1];if(v.compareTo(x)!==0)return!1}return!0},He.envelope=function(u){for(var c=new re,d=0;d<u.length;d++)c.expandToInclude(u[d]);return c},He.toCoordinateArray=function(u){return u.toArray(He.coordArrayType)},He.atLeastNCoordinatesOrNothing=function(u,c){return c.length>=u?c:[]},He.indexOf=function(u,c){for(var d=0;d<c.length;d++)if(u.equals(c[d]))return d;return-1},He.increasingDirection=function(u){for(var c=0;c<Math.trunc(u.length/2);c++){var d=u.length-1-c,v=u[c].compareTo(u[d]);if(v!==0)return v}return 1},He.compare=function(u,c){for(var d=0;d<u.length&&d<c.length;){var v=u[d].compareTo(c[d]);if(v!==0)return v;d++}return d<c.length?-1:d<u.length?1:0},He.minCoordinate=function(u){for(var c=null,d=0;d<u.length;d++)(c===null||c.compareTo(u[d])>0)&&(c=u[d]);return c},He.extract=function(u,c,d){c=G.clamp(c,0,u.length),d=G.clamp(d,-1,u.length);var v=d-c+1;0>d&&(v=0),c>=u.length&&(v=0),c>d&&(v=0);var x=new Array(v).fill(null);if(v===0)return x;for(var I=0,R=c;d>=R;R++)x[I++]=u[R];return x},a(Mt.prototype,{compare:function(u,c){var d=u,v=c;return He.compare(d,v)},interfaces_:function(){return[b]},getClass:function(){return Mt}}),a(wn.prototype,{compare:function(u,c){var d=u,v=c;if(d.length<v.length)return-1;if(d.length>v.length)return 1;if(d.length===0)return 0;var x=He.compare(d,v),I=He.isEqualReversed(d,v);return I?0:x},OLDcompare:function(u,c){var d=u,v=c;if(d.length<v.length)return-1;if(d.length>v.length)return 1;if(d.length===0)return 0;for(var x=He.increasingDirection(d),I=He.increasingDirection(v),R=x>0?0:d.length-1,J=I>0?0:d.length-1,ge=0;ge<d.length;ge++){var Ie=d[R].compareTo(v[J]);if(Ie!==0)return Ie;R+=x,J+=I}return 0},interfaces_:function(){return[b]},getClass:function(){return wn}}),He.ForwardComparator=Mt,He.BidirectionalComparator=wn,He.coordArrayType=new Array(0).fill(null),Ct.prototype.get=function(){},Ct.prototype.put=function(){},Ct.prototype.size=function(){},Ct.prototype.values=function(){},Ct.prototype.entrySet=function(){},_e.prototype=new Ct,Y.prototype=new F,Y.prototype.contains=function(){},X.prototype=new Y,X.prototype.contains=function(u){for(var c=0,d=this.array_.length;d>c;c++){var v=this.array_[c];if(v===u)return!0}return!1},X.prototype.add=function(u){return this.contains(u)?!1:(this.array_.push(u),!0)},X.prototype.addAll=function(u){for(var c=u.iterator();c.hasNext();)this.add(c.next());return!0},X.prototype.remove=function(u){throw new javascript.util.OperationNotSupported},X.prototype.size=function(){return this.array_.length},X.prototype.isEmpty=function(){return this.array_.length===0},X.prototype.toArray=function(){for(var u=[],c=0,d=this.array_.length;d>c;c++)u.push(this.array_[c]);return u},X.prototype.iterator=function(){return new Ho(this)};var Ho=function(u){this.hashSet_=u,this.position_=0};Ho.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new H;return this.hashSet_.array_[this.position_++]},Ho.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},Ho.prototype.remove=function(){throw new ce};var fa=0,Ta=1;pt.prototype=new _e,pt.prototype.get=function(u){for(var c=this.root_;c!==null;){var d=u.compareTo(c.key);if(0>d)c=c.left;else{if(!(d>0))return c.value;c=c.right}}return null},pt.prototype.put=function(u,c){if(this.root_===null)return this.root_={key:u,value:c,left:null,right:null,parent:null,color:fa,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var d,v,x=this.root_;do if(d=x,v=u.compareTo(x.key),0>v)x=x.left;else{if(!(v>0)){var I=x.value;return x.value=c,I}x=x.right}while(x!==null);var R={key:u,left:null,right:null,value:c,parent:d,color:fa,getValue:function(){return this.value},getKey:function(){return this.key}};return 0>v?d.left=R:d.right=R,this.fixAfterInsertion(R),this.size_++,null},pt.prototype.fixAfterInsertion=function(u){for(u.color=Ta;u!=null&&u!=this.root_&&u.parent.color==Ta;)if(Me(u)==je(Me(Me(u)))){var c=We(Me(Me(u)));we(c)==Ta?(qe(Me(u),fa),qe(c,fa),qe(Me(Me(u)),Ta),u=Me(Me(u))):(u==We(Me(u))&&(u=Me(u),this.rotateLeft(u)),qe(Me(u),fa),qe(Me(Me(u)),Ta),this.rotateRight(Me(Me(u))))}else{var c=je(Me(Me(u)));we(c)==Ta?(qe(Me(u),fa),qe(c,fa),qe(Me(Me(u)),Ta),u=Me(Me(u))):(u==je(Me(u))&&(u=Me(u),this.rotateRight(u)),qe(Me(u),fa),qe(Me(Me(u)),Ta),this.rotateLeft(Me(Me(u))))}this.root_.color=fa},pt.prototype.values=function(){var u=new U,c=this.getFirstEntry();if(c!==null)for(u.add(c.value);(c=pt.successor(c))!==null;)u.add(c.value);return u},pt.prototype.entrySet=function(){var u=new X,c=this.getFirstEntry();if(c!==null)for(u.add(c);(c=pt.successor(c))!==null;)u.add(c);return u},pt.prototype.rotateLeft=function(u){if(u!=null){var c=u.right;u.right=c.left,c.left!=null&&(c.left.parent=u),c.parent=u.parent,u.parent==null?this.root_=c:u.parent.left==u?u.parent.left=c:u.parent.right=c,c.left=u,u.parent=c}},pt.prototype.rotateRight=function(u){if(u!=null){var c=u.left;u.left=c.right,c.right!=null&&(c.right.parent=u),c.parent=u.parent,u.parent==null?this.root_=c:u.parent.right==u?u.parent.right=c:u.parent.left=c,c.right=u,u.parent=c}},pt.prototype.getFirstEntry=function(){var u=this.root_;if(u!=null)for(;u.left!=null;)u=u.left;return u},pt.successor=function(u){if(u===null)return null;if(u.right!==null){for(var c=u.right;c.left!==null;)c=c.left;return c}for(var c=u.parent,d=u;c!==null&&d===c.right;)d=c,c=c.parent;return c},pt.prototype.size=function(){return this.size_},a(Gt.prototype,{interfaces_:function(){return[]},getClass:function(){return Gt}}),rn.prototype=new Y,St.prototype=new rn,St.prototype.contains=function(u){for(var c=0,d=this.array_.length;d>c;c++){var v=this.array_[c];if(v.compareTo(u)===0)return!0}return!1},St.prototype.add=function(u){if(this.contains(u))return!1;for(var c=0,d=this.array_.length;d>c;c++){var v=this.array_[c];if(v.compareTo(u)===1)return this.array_.splice(c,0,u),!0}return this.array_.push(u),!0},St.prototype.addAll=function(u){for(var c=u.iterator();c.hasNext();)this.add(c.next());return!0},St.prototype.remove=function(u){throw new ce},St.prototype.size=function(){return this.array_.length},St.prototype.isEmpty=function(){return this.array_.length===0},St.prototype.toArray=function(){for(var u=[],c=0,d=this.array_.length;d>c;c++)u.push(this.array_[c]);return u},St.prototype.iterator=function(){return new Uo(this)};var Uo=function(u){this.treeSet_=u,this.position_=0};Uo.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new H;return this.treeSet_.array_[this.position_++]},Uo.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Uo.prototype.remove=function(){throw new ce},gn.sort=function(){var u,c,d,v,x=arguments[0];if(arguments.length===1)return v=function(R,J){return R.compareTo(J)},void x.sort(v);if(arguments.length===2)d=arguments[1],v=function(R,J){return d.compare(R,J)},x.sort(v);else{if(arguments.length===3){c=x.slice(arguments[1],arguments[2]),c.sort();var I=x.slice(0,arguments[1]).concat(c,x.slice(arguments[2],x.length));for(x.splice(0,x.length),u=0;u<I.length;u++)x.push(I[u]);return}if(arguments.length===4){for(c=x.slice(arguments[1],arguments[2]),d=arguments[3],v=function(R,J){return d.compare(R,J)},c.sort(v),I=x.slice(0,arguments[1]).concat(c,x.slice(arguments[2],x.length)),x.splice(0,x.length),u=0;u<I.length;u++)x.push(I[u]);return}}},gn.asList=function(u){for(var c=new U,d=0,v=u.length;v>d;d++)c.add(u[d]);return c},a(Xe.prototype,{interfaces_:function(){return[]},getClass:function(){return Xe}}),Xe.toDimensionSymbol=function(u){switch(u){case Xe.FALSE:return Xe.SYM_FALSE;case Xe.TRUE:return Xe.SYM_TRUE;case Xe.DONTCARE:return Xe.SYM_DONTCARE;case Xe.P:return Xe.SYM_P;case Xe.L:return Xe.SYM_L;case Xe.A:return Xe.SYM_A}throw new h},Xe.toDimensionValue=function(u){switch(fe.toUpperCase(u)){case Xe.SYM_FALSE:return Xe.FALSE;case Xe.SYM_TRUE:return Xe.TRUE;case Xe.SYM_DONTCARE:return Xe.DONTCARE;case Xe.SYM_P:return Xe.P;case Xe.SYM_L:return Xe.L;case Xe.SYM_A:return Xe.A}throw new h},Xe.P=0,Xe.L=1,Xe.A=2,Xe.FALSE=-1,Xe.TRUE=-2,Xe.DONTCARE=-3,Xe.SYM_FALSE="F",Xe.SYM_TRUE="T",Xe.SYM_DONTCARE="*",Xe.SYM_P="0",Xe.SYM_L="1",Xe.SYM_A="2",a(En.prototype,{filter:function(u){},interfaces_:function(){return[]},getClass:function(){return En}}),a(yn.prototype,{filter:function(u,c){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return yn}}),A(Yt,Ne),a(Yt.prototype,{computeEnvelopeInternal:function(){for(var u=new re,c=0;c<this.geometries.length;c++)u.expandToInclude(this.geometries[c].getEnvelopeInternal());return u},getGeometryN:function(u){return this.geometries[u]},getSortIndex:function(){return Ne.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var u=new Array(this.getNumPoints()).fill(null),c=-1,d=0;d<this.geometries.length;d++)for(var v=this.geometries[d].getCoordinates(),x=0;x<v.length;x++)c++,u[c]=v[x];return u},getArea:function(){for(var u=0,c=0;c<this.geometries.length;c++)u+=this.geometries[c].getArea();return u},equalsExact:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];if(!this.isEquivalentClass(u))return!1;var d=u;if(this.geometries.length!==d.geometries.length)return!1;for(var v=0;v<this.geometries.length;v++)if(!this.geometries[v].equalsExact(d.geometries[v],c))return!1;return!0}return Ne.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var u=0;u<this.geometries.length;u++)this.geometries[u].normalize();gn.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var u=Xe.FALSE,c=0;c<this.geometries.length;c++)u=Math.max(u,this.geometries[c].getBoundaryDimension());return u},getDimension:function(){for(var u=Xe.FALSE,c=0;c<this.geometries.length;c++)u=Math.max(u,this.geometries[c].getDimension());return u},getLength:function(){for(var u=0,c=0;c<this.geometries.length;c++)u+=this.geometries[c].getLength();return u},getNumPoints:function(){for(var u=0,c=0;c<this.geometries.length;c++)u+=this.geometries[c].getNumPoints();return u},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var u=this.geometries.length,c=new Array(u).fill(null),d=0;d<this.geometries.length;d++)c[d]=this.geometries[d].reverse();return this.getFactory().createGeometryCollection(c)},compareToSameClass:function(){if(arguments.length===1){var u=arguments[0],c=new St(gn.asList(this.geometries)),d=new St(gn.asList(u.geometries));return this.compare(c,d)}if(arguments.length===2){for(var v=arguments[0],x=arguments[1],I=v,R=this.getNumGeometries(),J=I.getNumGeometries(),ge=0;R>ge&&J>ge;){var Ie=this.getGeometryN(ge),ze=I.getGeometryN(ge),Ve=Ie.compareToSameClass(ze,x);if(Ve!==0)return Ve;ge++}return R>ge?1:J>ge?-1:0}},apply:function(){if(T(arguments[0],Ue))for(var u=arguments[0],c=0;c<this.geometries.length;c++)this.geometries[c].apply(u);else if(T(arguments[0],yn)){var d=arguments[0];if(this.geometries.length===0)return null;for(var c=0;c<this.geometries.length&&(this.geometries[c].apply(d),!d.isDone());c++);d.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],En)){var v=arguments[0];v.filter(this);for(var c=0;c<this.geometries.length;c++)this.geometries[c].apply(v)}else if(T(arguments[0],Oe)){var x=arguments[0];x.filter(this);for(var c=0;c<this.geometries.length;c++)this.geometries[c].apply(x)}},getBoundary:function(){return this.checkNotGeometryCollection(this),M.shouldNeverReachHere(),null},clone:function(){var u=Ne.prototype.clone.call(this);u.geometries=new Array(this.geometries.length).fill(null);for(var c=0;c<this.geometries.length;c++)u.geometries[c]=this.geometries[c].clone();return u},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var u=new Array(this.geometries.length).fill(null),c=0;c<u.length;c++)u[c]=this.geometries[c].copy();return new Yt(u,this.factory)},isEmpty:function(){for(var u=0;u<this.geometries.length;u++)if(!this.geometries[u].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return Yt}}),Yt.serialVersionUID=-5694727726395021e3,A(Pt,Yt),a(Pt.prototype,{getSortIndex:function(){return Ne.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];return this.isEquivalentClass(u)?Yt.prototype.equalsExact.call(this,u,c):!1}return Yt.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?Xe.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var u=0;u<this.geometries.length;u++)if(!this.geometries[u].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var u=this.geometries.length,c=new Array(u).fill(null),d=0;d<this.geometries.length;d++)c[u-1-d]=this.geometries[d].reverse();return this.getFactory().createMultiLineString(c)},getBoundary:function(){return new an(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var u=new Array(this.geometries.length).fill(null),c=0;c<u.length;c++)u[c]=this.geometries[c].copy();return new Pt(u,this.factory)},interfaces_:function(){return[Gt]},getClass:function(){return Pt}}),Pt.serialVersionUID=8166665132445434e3,a(an.prototype,{boundaryMultiLineString:function(u){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var c=this.computeBoundaryCoordinates(u);return c.length===1?this.geomFact.createPoint(c[0]):this.geomFact.createMultiPointFromCoords(c)},getBoundary:function(){return this.geom instanceof Wt?this.boundaryLineString(this.geom):this.geom instanceof Pt?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(u){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(u.isClosed()){var c=this.bnRule.isInBoundary(2);return c?u.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([u.getStartPoint(),u.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(u){var c=new U;this.endpointMap=new pt;for(var d=0;d<u.getNumGeometries();d++){var v=u.getGeometryN(d);v.getNumPoints()!==0&&(this.addEndpoint(v.getCoordinateN(0)),this.addEndpoint(v.getCoordinateN(v.getNumPoints()-1)))}for(var x=this.endpointMap.entrySet().iterator();x.hasNext();){var I=x.next(),R=I.getValue(),J=R.count;this.bnRule.isInBoundary(J)&&c.add(I.getKey())}return He.toCoordinateArray(c)},addEndpoint:function(u){var c=this.endpointMap.get(u);c===null&&(c=new Dr,this.endpointMap.put(u,c)),c.count++},interfaces_:function(){return[]},getClass:function(){return an}}),an.getBoundary=function(){if(arguments.length===1){var u=arguments[0],c=new an(u);return c.getBoundary()}if(arguments.length===2){var d=arguments[0],v=arguments[1],c=new an(d,v);return c.getBoundary()}},a(Dr.prototype,{interfaces_:function(){return[]},getClass:function(){return Dr}}),a(Et.prototype,{interfaces_:function(){return[]},getClass:function(){return Et}}),Et.chars=function(u,c){for(var d=new Array(c).fill(null),v=0;c>v;v++)d[v]=u;return new String(d)},Et.getStackTrace=function(){if(arguments.length===1){var u=arguments[0],c=new Pn,d=new Gn;return u.printStackTrace(d),c.toString()}if(arguments.length===2){for(var v=arguments[0],x=arguments[1],I="",R=new Cn(Et.getStackTrace(v)),J=new zn,ge=0;x>ge;ge++)try{I+=J.readLine()+Et.NEWLINE}catch(Ie){if(!(Ie instanceof jt))throw Ie;M.shouldNeverReachHere()}finally{}return I}},Et.split=function(u,c){for(var d=c.length,v=new U,x=""+u,I=x.indexOf(c);I>=0;){var R=x.substring(0,I);v.add(R),x=x.substring(I+d),I=x.indexOf(c)}x.length>0&&v.add(x);for(var J=new Array(v.size()).fill(null),ge=0;ge<J.length;ge++)J[ge]=v.get(ge);return J},Et.toString=function(){if(arguments.length===1){var u=arguments[0];return Et.SIMPLE_ORDINATE_FORMAT.format(u)}},Et.spaces=function(u){return Et.chars(" ",u)},Et.NEWLINE=oe.getProperty("line.separator"),Et.SIMPLE_ORDINATE_FORMAT=new Jr,a(lt.prototype,{interfaces_:function(){return[]},getClass:function(){return lt}}),lt.copyCoord=function(u,c,d,v){for(var x=Math.min(u.getDimension(),d.getDimension()),I=0;x>I;I++)d.setOrdinate(v,I,u.getOrdinate(c,I))},lt.isRing=function(u){var c=u.size();return c===0?!0:3>=c?!1:u.getOrdinate(0,D.X)===u.getOrdinate(c-1,D.X)&&u.getOrdinate(0,D.Y)===u.getOrdinate(c-1,D.Y)},lt.isEqual=function(u,c){var d=u.size(),v=c.size();if(d!==v)return!1;for(var x=Math.min(u.getDimension(),c.getDimension()),I=0;d>I;I++)for(var R=0;x>R;R++){var J=u.getOrdinate(I,R),ge=c.getOrdinate(I,R);if(!(u.getOrdinate(I,R)===c.getOrdinate(I,R)||g.isNaN(J)&&g.isNaN(ge)))return!1}return!0},lt.extend=function(u,c,d){var v=u.create(d,c.getDimension()),x=c.size();if(lt.copy(c,0,v,0,x),x>0)for(var I=x;d>I;I++)lt.copy(c,x-1,v,I,1);return v},lt.reverse=function(u){for(var c=u.size()-1,d=Math.trunc(c/2),v=0;d>=v;v++)lt.swap(u,v,c-v)},lt.swap=function(u,c,d){if(c===d)return null;for(var v=0;v<u.getDimension();v++){var x=u.getOrdinate(c,v);u.setOrdinate(c,v,u.getOrdinate(d,v)),u.setOrdinate(d,v,x)}},lt.copy=function(u,c,d,v,x){for(var I=0;x>I;I++)lt.copyCoord(u,c+I,d,v+I)},lt.toString=function(){if(arguments.length===1){var u=arguments[0],c=u.size();if(c===0)return"()";var d=u.getDimension(),v=new Q;v.append("(");for(var x=0;c>x;x++){x>0&&v.append(" ");for(var I=0;d>I;I++)I>0&&v.append(","),v.append(Et.toString(u.getOrdinate(x,I)))}return v.append(")"),v.toString()}},lt.ensureValidRing=function(u,c){var d=c.size();if(d===0)return c;if(3>=d)return lt.createClosedRing(u,c,4);var v=c.getOrdinate(0,D.X)===c.getOrdinate(d-1,D.X)&&c.getOrdinate(0,D.Y)===c.getOrdinate(d-1,D.Y);return v?c:lt.createClosedRing(u,c,d+1)},lt.createClosedRing=function(u,c,d){var v=u.create(d,c.getDimension()),x=c.size();lt.copy(c,0,v,0,x);for(var I=x;d>I;I++)lt.copy(c,0,v,I,1);return v},A(Wt,Ne),a(Wt.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new re:this.points.expandEnvelope(new re)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return Ne.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];if(!this.isEquivalentClass(u))return!1;var d=u;if(this.points.size()!==d.points.size())return!1;for(var v=0;v<this.points.size();v++)if(!this.equal(this.points.getCoordinate(v),d.points.getCoordinate(v),c))return!1;return!0}return Ne.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var u=0;u<Math.trunc(this.points.size()/2);u++){var c=this.points.size()-1-u;if(!this.points.getCoordinate(u).equals(this.points.getCoordinate(c)))return this.points.getCoordinate(u).compareTo(this.points.getCoordinate(c))>0&&lt.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?Xe.FALSE:0},isClosed:function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return rt.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var u=this.points.copy();lt.reverse(u);var c=this.getFactory().createLineString(u);return c},compareToSameClass:function(){if(arguments.length===1){for(var u=arguments[0],c=u,d=0,v=0;d<this.points.size()&&v<c.points.size();){var x=this.points.getCoordinate(d).compareTo(c.points.getCoordinate(v));if(x!==0)return x;d++,v++}return d<this.points.size()?1:v<c.points.size()?-1:0}if(arguments.length===2){var I=arguments[0],R=arguments[1],c=I;return R.compare(this.points,c.points)}},apply:function(){if(T(arguments[0],Ue))for(var u=arguments[0],c=0;c<this.points.size();c++)u.filter(this.points.getCoordinate(c));else if(T(arguments[0],yn)){var d=arguments[0];if(this.points.size()===0)return null;for(var c=0;c<this.points.size()&&(d.filter(this.points,c),!d.isDone());c++);d.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],En)){var v=arguments[0];v.filter(this)}else if(T(arguments[0],Oe)){var x=arguments[0];x.filter(this)}},getBoundary:function(){return new an(this).getBoundary()},isEquivalentClass:function(u){return u instanceof Wt},clone:function(){var u=Ne.prototype.clone.call(this);return u.points=this.points.clone(),u},getCoordinateN:function(u){return this.points.getCoordinate(u)},getGeometryType:function(){return"LineString"},copy:function(){return new Wt(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return this.points.size()===0},init:function(u){if(u===null&&(u=this.getFactory().getCoordinateSequenceFactory().create([])),u.size()===1)throw new h("Invalid number of points in LineString (found "+u.size()+" - must be 0 or >= 2)");this.points=u},isCoordinate:function(u){for(var c=0;c<this.points.size();c++)if(this.points.getCoordinate(c).equals(u))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(u){return this.getFactory().createPoint(this.points.getCoordinate(u))},interfaces_:function(){return[Gt]},getClass:function(){return Wt}}),Wt.serialVersionUID=0x2b2b51ba435c8e00,a(Nn.prototype,{interfaces_:function(){return[]},getClass:function(){return Nn}}),A(Lt,Ne),a(Lt.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new re;var u=new re;return u.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),u},getSortIndex:function(){return Ne.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];return this.isEquivalentClass(u)?this.isEmpty()&&u.isEmpty()?!0:this.isEmpty()!==u.isEmpty()?!1:this.equal(u.getCoordinate(),this.getCoordinate(),c):!1}return Ne.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return this.coordinates.size()!==0?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return Xe.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(arguments.length===1){var u=arguments[0],c=u;return this.getCoordinate().compareTo(c.getCoordinate())}if(arguments.length===2){var d=arguments[0],v=arguments[1],c=d;return v.compare(this.coordinates,c.coordinates)}},apply:function(){if(T(arguments[0],Ue)){var u=arguments[0];if(this.isEmpty())return null;u.filter(this.getCoordinate())}else if(T(arguments[0],yn)){var c=arguments[0];if(this.isEmpty())return null;c.filter(this.coordinates,0),c.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],En)){var d=arguments[0];d.filter(this)}else if(T(arguments[0],Oe)){var v=arguments[0];v.filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var u=Ne.prototype.clone.call(this);return u.coordinates=this.coordinates.clone(),u},getGeometryType:function(){return"Point"},copy:function(){return new Lt(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return this.coordinates.size()===0},init:function(u){u===null&&(u=this.getFactory().getCoordinateSequenceFactory().create([])),M.isTrue(u.size()<=1),this.coordinates=u},isSimple:function(){return!0},interfaces_:function(){return[Nn]},getClass:function(){return Lt}}),Lt.serialVersionUID=4902022702746615e3,a(or.prototype,{interfaces_:function(){return[]},getClass:function(){return or}}),A(Kt,Ne),a(Kt.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return Ne.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var u=new Array(this.getNumPoints()).fill(null),c=-1,d=this.shell.getCoordinates(),v=0;v<d.length;v++)c++,u[c]=d[v];for(var x=0;x<this.holes.length;x++)for(var I=this.holes[x].getCoordinates(),R=0;R<I.length;R++)c++,u[c]=I[R];return u},getArea:function(){var u=0;u+=Math.abs(rt.signedArea(this.shell.getCoordinateSequence()));for(var c=0;c<this.holes.length;c++)u-=Math.abs(rt.signedArea(this.holes[c].getCoordinateSequence()));return u},isRectangle:function(){if(this.getNumInteriorRing()!==0||this.shell===null||this.shell.getNumPoints()!==5)return!1;for(var u=this.shell.getCoordinateSequence(),c=this.getEnvelopeInternal(),d=0;5>d;d++){var v=u.getX(d);if(v!==c.getMinX()&&v!==c.getMaxX())return!1;var x=u.getY(d);if(x!==c.getMinY()&&x!==c.getMaxY())return!1}for(var I=u.getX(0),R=u.getY(0),d=1;4>=d;d++){var v=u.getX(d),x=u.getY(d),J=v!==I,ge=x!==R;if(J===ge)return!1;I=v,R=x}return!0},equalsExact:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];if(!this.isEquivalentClass(u))return!1;var d=u,v=this.shell,x=d.shell;if(!v.equalsExact(x,c)||this.holes.length!==d.holes.length)return!1;for(var I=0;I<this.holes.length;I++)if(!this.holes[I].equalsExact(d.holes[I],c))return!1;return!0}return Ne.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(arguments.length===0){this.normalize(this.shell,!0);for(var u=0;u<this.holes.length;u++)this.normalize(this.holes[u],!1);gn.sort(this.holes)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];if(c.isEmpty())return null;var v=new Array(c.getCoordinates().length-1).fill(null);oe.arraycopy(c.getCoordinates(),0,v,0,v.length);var x=He.minCoordinate(c.getCoordinates());He.scroll(v,x),oe.arraycopy(v,0,c.getCoordinates(),0,v.length),c.getCoordinates()[v.length]=v[0],rt.isCCW(c.getCoordinates())===d&&He.reverse(c.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var u=0;u+=this.shell.getLength();for(var c=0;c<this.holes.length;c++)u+=this.holes[c].getLength();return u},getNumPoints:function(){for(var u=this.shell.getNumPoints(),c=0;c<this.holes.length;c++)u+=this.holes[c].getNumPoints();return u},reverse:function(){var u=this.copy();u.shell=this.shell.copy().reverse(),u.holes=new Array(this.holes.length).fill(null);for(var c=0;c<this.holes.length;c++)u.holes[c]=this.holes[c].copy().reverse();return u},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(arguments.length===1){var u=arguments[0],c=this.shell,d=u.shell;return c.compareToSameClass(d)}if(arguments.length===2){var v=arguments[0],x=arguments[1],I=v,c=this.shell,d=I.shell,R=c.compareToSameClass(d,x);if(R!==0)return R;for(var J=this.getNumInteriorRing(),ge=I.getNumInteriorRing(),Ie=0;J>Ie&&ge>Ie;){var ze=this.getInteriorRingN(Ie),Ve=I.getInteriorRingN(Ie),st=ze.compareToSameClass(Ve,x);if(st!==0)return st;Ie++}return J>Ie?1:ge>Ie?-1:0}},apply:function(){if(T(arguments[0],Ue)){var u=arguments[0];this.shell.apply(u);for(var c=0;c<this.holes.length;c++)this.holes[c].apply(u)}else if(T(arguments[0],yn)){var d=arguments[0];if(this.shell.apply(d),!d.isDone())for(var c=0;c<this.holes.length&&(this.holes[c].apply(d),!d.isDone());c++);d.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],En)){var v=arguments[0];v.filter(this)}else if(T(arguments[0],Oe)){var x=arguments[0];x.filter(this),this.shell.apply(x);for(var c=0;c<this.holes.length;c++)this.holes[c].apply(x)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var u=new Array(this.holes.length+1).fill(null);u[0]=this.shell;for(var c=0;c<this.holes.length;c++)u[c+1]=this.holes[c];return u.length<=1?this.getFactory().createLinearRing(u[0].getCoordinateSequence()):this.getFactory().createMultiLineString(u)},clone:function(){var u=Ne.prototype.clone.call(this);u.shell=this.shell.clone(),u.holes=new Array(this.holes.length).fill(null);for(var c=0;c<this.holes.length;c++)u.holes[c]=this.holes[c].clone();return u},getGeometryType:function(){return"Polygon"},copy:function(){for(var u=this.shell.copy(),c=new Array(this.holes.length).fill(null),d=0;d<c.length;d++)c[d]=this.holes[d].copy();return new Kt(u,c,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(u){return this.holes[u]},interfaces_:function(){return[or]},getClass:function(){return Kt}}),Kt.serialVersionUID=-0x307ffefd8dc97200,A(Ee,Yt),a(Ee.prototype,{getSortIndex:function(){return Ne.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];return this.isEquivalentClass(u)?Yt.prototype.equalsExact.call(this,u,c):!1}return Yt.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(arguments.length===1){var u=arguments[0];return this.geometries[u].getCoordinate()}return Yt.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return Xe.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var u=new Array(this.geometries.length).fill(null),c=0;c<u.length;c++)u[c]=this.geometries[c].copy();return new Ee(u,this.factory)},interfaces_:function(){return[Nn]},getClass:function(){return Ee}}),Ee.serialVersionUID=-8048474874175356e3,A(be,Wt),a(be.prototype,{getSortIndex:function(){return Ne.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return Xe.FALSE},isClosed:function(){return this.isEmpty()?!0:Wt.prototype.isClosed.call(this)},reverse:function(){var u=this.points.copy();lt.reverse(u);var c=this.getFactory().createLinearRing(u);return c},validateConstruction:function(){if(!this.isEmpty()&&!Wt.prototype.isClosed.call(this))throw new h;if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<be.MINIMUM_VALID_SIZE)throw new h("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new be(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return be}}),be.MINIMUM_VALID_SIZE=4,be.serialVersionUID=-0x3b229e262367a600,A(pe,Yt),a(pe.prototype,{getSortIndex:function(){return Ne.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];return this.isEquivalentClass(u)?Yt.prototype.equalsExact.call(this,u,c):!1}return Yt.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var u=this.geometries.length,c=new Array(u).fill(null),d=0;d<this.geometries.length;d++)c[d]=this.geometries[d].reverse();return this.getFactory().createMultiPolygon(c)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var u=new U,c=0;c<this.geometries.length;c++)for(var d=this.geometries[c],v=d.getBoundary(),x=0;x<v.getNumGeometries();x++)u.add(v.getGeometryN(x));var I=new Array(u.size()).fill(null);return this.getFactory().createMultiLineString(u.toArray(I))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var u=new Array(this.geometries.length).fill(null),c=0;c<u.length;c++)u[c]=this.geometries[c].copy();return new pe(u,this.factory)},interfaces_:function(){return[or]},getClass:function(){return pe}}),pe.serialVersionUID=-0x7a5aa1369171980,a(he.prototype,{setCopyUserData:function(u){this.isUserDataCopied=u},edit:function(u,c){if(u===null)return null;var d=this.editInternal(u,c);return this.isUserDataCopied&&d.setUserData(u.getUserData()),d},editInternal:function(u,c){return this.factory===null&&(this.factory=u.getFactory()),u instanceof Yt?this.editGeometryCollection(u,c):u instanceof Kt?this.editPolygon(u,c):u instanceof Lt?c.edit(u,this.factory):u instanceof Wt?c.edit(u,this.factory):(M.shouldNeverReachHere("Unsupported Geometry class: "+u.getClass().getName()),null)},editGeometryCollection:function(u,c){for(var d=c.edit(u,this.factory),v=new U,x=0;x<d.getNumGeometries();x++){var I=this.edit(d.getGeometryN(x),c);I===null||I.isEmpty()||v.add(I)}return d.getClass()===Ee?this.factory.createMultiPoint(v.toArray([])):d.getClass()===Pt?this.factory.createMultiLineString(v.toArray([])):d.getClass()===pe?this.factory.createMultiPolygon(v.toArray([])):this.factory.createGeometryCollection(v.toArray([]))},editPolygon:function(u,c){var d=c.edit(u,this.factory);if(d===null&&(d=this.factory.createPolygon(null)),d.isEmpty())return d;var v=this.edit(d.getExteriorRing(),c);if(v===null||v.isEmpty())return this.factory.createPolygon();for(var x=new U,I=0;I<d.getNumInteriorRing();I++){var R=this.edit(d.getInteriorRingN(I),c);R===null||R.isEmpty()||x.add(R)}return this.factory.createPolygon(v,x.toArray([]))},interfaces_:function(){return[]},getClass:function(){return he}}),he.GeometryEditorOperation=ae,a(de.prototype,{edit:function(u,c){return u},interfaces_:function(){return[ae]},getClass:function(){return de}}),a(me.prototype,{edit:function(u,c){if(u instanceof be)return c.createLinearRing(this.editCoordinates(u.getCoordinates(),u));if(u instanceof Wt)return c.createLineString(this.editCoordinates(u.getCoordinates(),u));if(u instanceof Lt){var d=this.editCoordinates(u.getCoordinates(),u);return d.length>0?c.createPoint(d[0]):c.createPoint()}return u},interfaces_:function(){return[ae]},getClass:function(){return me}}),a(Be.prototype,{edit:function(u,c){return u instanceof be?c.createLinearRing(this.edit(u.getCoordinateSequence(),u)):u instanceof Wt?c.createLineString(this.edit(u.getCoordinateSequence(),u)):u instanceof Lt?c.createPoint(this.edit(u.getCoordinateSequence(),u)):u},interfaces_:function(){return[ae]},getClass:function(){return Be}}),he.NoOpGeometryOperation=de,he.CoordinateOperation=me,he.CoordinateSequenceOperation=Be,a(Fe.prototype,{setOrdinate:function(u,c,d){switch(c){case D.X:this.coordinates[u].x=d;break;case D.Y:this.coordinates[u].y=d;break;case D.Z:this.coordinates[u].z=d;break;default:throw new h}},size:function(){return this.coordinates.length},getOrdinate:function(u,c){switch(c){case D.X:return this.coordinates[u].x;case D.Y:return this.coordinates[u].y;case D.Z:return this.coordinates[u].z}return g.NaN},getCoordinate:function(){if(arguments.length===1){var u=arguments[0];return this.coordinates[u]}if(arguments.length===2){var c=arguments[0],d=arguments[1];d.x=this.coordinates[c].x,d.y=this.coordinates[c].y,d.z=this.coordinates[c].z}},getCoordinateCopy:function(u){return new N(this.coordinates[u])},getDimension:function(){return this.dimension},getX:function(u){return this.coordinates[u].x},clone:function(){for(var u=new Array(this.size()).fill(null),c=0;c<this.coordinates.length;c++)u[c]=this.coordinates[c].clone();return new Fe(u,this.dimension)},expandEnvelope:function(u){for(var c=0;c<this.coordinates.length;c++)u.expandToInclude(this.coordinates[c]);return u},copy:function(){for(var u=new Array(this.size()).fill(null),c=0;c<this.coordinates.length;c++)u[c]=this.coordinates[c].copy();return new Fe(u,this.dimension)},toString:function(){if(this.coordinates.length>0){var u=new Q(17*this.coordinates.length);u.append("("),u.append(this.coordinates[0]);for(var c=1;c<this.coordinates.length;c++)u.append(", "),u.append(this.coordinates[c]);return u.append(")"),u.toString()}return"()"},getY:function(u){return this.coordinates[u].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[D,E]},getClass:function(){return Fe}}),Fe.serialVersionUID=-0xcb44a778db18e00,a(et.prototype,{readResolve:function(){return et.instance()},create:function(){if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return new Fe(u)}if(T(arguments[0],D)){var c=arguments[0];return new Fe(c)}}else if(arguments.length===2){var d=arguments[0],v=arguments[1];return v>3&&(v=3),2>v?new Fe(d):new Fe(d,v)}},interfaces_:function(){return[Re,E]},getClass:function(){return et}}),et.instance=function(){return et.instanceObject},et.serialVersionUID=-0x38e49fa6cf6f2e00,et.instanceObject=new et;var Zi,os=Object.defineProperty,ss=Ye({delete:xt,has:on,get:cn,set:Dt,keys:An,values:Ln,entries:Un,forEach:_n,clear:Ft}),us=typeof Map<"u"&&Map.prototype.values?Map:ss;Vn.prototype=new Ct,Vn.prototype.get=function(u){return this.map_.get(u)||null},Vn.prototype.put=function(u,c){return this.map_.set(u,c),c},Vn.prototype.values=function(){for(var u=new U,c=this.map_.values(),d=c.next();!d.done;)u.add(d.value),d=c.next();return u},Vn.prototype.entrySet=function(){var u=new X;return this.map_.entries().forEach(function(c){return u.add(c)}),u},Vn.prototype.size=function(){return this.map_.size()},a(pn.prototype,{equals:function(u){if(!(u instanceof pn))return!1;var c=u;return this.modelType===c.modelType&&this.scale===c.scale},compareTo:function(u){var c=u,d=this.getMaximumSignificantDigits(),v=c.getMaximumSignificantDigits();return new le(d).compareTo(new le(v))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===pn.FLOATING||this.modelType===pn.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var u="UNKNOWN";return this.modelType===pn.FLOATING?u="Floating":this.modelType===pn.FLOATING_SINGLE?u="Floating-Single":this.modelType===pn.FIXED&&(u="Fixed (Scale="+this.getScale()+")"),u},makePrecise:function(){if(typeof arguments[0]=="number"){var u=arguments[0];if(g.isNaN(u))return u;if(this.modelType===pn.FLOATING_SINGLE){var c=u;return c}return this.modelType===pn.FIXED?Math.round(u*this.scale)/this.scale:u}if(arguments[0]instanceof N){var d=arguments[0];if(this.modelType===pn.FLOATING)return null;d.x=this.makePrecise(d.x),d.y=this.makePrecise(d.y)}},getMaximumSignificantDigits:function(){var u=16;return this.modelType===pn.FLOATING?u=16:this.modelType===pn.FLOATING_SINGLE?u=6:this.modelType===pn.FIXED&&(u=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),u},setScale:function(u){this.scale=Math.abs(u)},interfaces_:function(){return[E,p]},getClass:function(){return pn}}),pn.mostPrecise=function(u,c){return u.compareTo(c)>=0?u:c},a(Qn.prototype,{readResolve:function(){return Qn.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[E]},getClass:function(){return Qn}}),Qn.serialVersionUID=-552860263173159e4,Qn.nameToTypeMap=new Vn,pn.Type=Qn,pn.serialVersionUID=7777263578777804e3,pn.FIXED=new Qn("FIXED"),pn.FLOATING=new Qn("FLOATING"),pn.FLOATING_SINGLE=new Qn("FLOATING SINGLE"),pn.maximumPreciseValue=9007199254740992,a(Ut.prototype,{toGeometry:function(u){return u.isNull()?this.createPoint(null):u.getMinX()===u.getMaxX()&&u.getMinY()===u.getMaxY()?this.createPoint(new N(u.getMinX(),u.getMinY())):u.getMinX()===u.getMaxX()||u.getMinY()===u.getMaxY()?this.createLineString([new N(u.getMinX(),u.getMinY()),new N(u.getMaxX(),u.getMaxY())]):this.createPolygon(this.createLinearRing([new N(u.getMinX(),u.getMinY()),new N(u.getMinX(),u.getMaxY()),new N(u.getMaxX(),u.getMaxY()),new N(u.getMaxX(),u.getMinY()),new N(u.getMinX(),u.getMinY())]),null)},createLineString:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return this.createLineString(u!==null?this.getCoordinateSequenceFactory().create(u):null)}if(T(arguments[0],D)){var c=arguments[0];return new Wt(c,this)}}},createMultiLineString:function(){if(arguments.length===0)return new Pt(null,this);if(arguments.length===1){var u=arguments[0];return new Pt(u,this)}},buildGeometry:function(u){for(var c=null,d=!1,v=!1,x=u.iterator();x.hasNext();){var I=x.next(),R=I.getClass();c===null&&(c=R),R!==c&&(d=!0),I.isGeometryCollectionOrDerived()&&(v=!0)}if(c===null)return this.createGeometryCollection();if(d||v)return this.createGeometryCollection(Ut.toGeometryArray(u));var J=u.iterator().next(),ge=u.size()>1;if(ge){if(J instanceof Kt)return this.createMultiPolygon(Ut.toPolygonArray(u));if(J instanceof Wt)return this.createMultiLineString(Ut.toLineStringArray(u));if(J instanceof Lt)return this.createMultiPoint(Ut.toPointArray(u));M.shouldNeverReachHere("Unhandled class: "+J.getClass().getName())}return J},createMultiPointFromCoords:function(u){return this.createMultiPoint(u!==null?this.getCoordinateSequenceFactory().create(u):null)},createPoint:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof N){var u=arguments[0];return this.createPoint(u!==null?this.getCoordinateSequenceFactory().create([u]):null)}if(T(arguments[0],D)){var c=arguments[0];return new Lt(c,this)}}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(arguments.length===0)return new Kt(null,null,this);if(arguments.length===1){if(T(arguments[0],D)){var u=arguments[0];return this.createPolygon(this.createLinearRing(u))}if(arguments[0]instanceof Array){var c=arguments[0];return this.createPolygon(this.createLinearRing(c))}if(arguments[0]instanceof be){var d=arguments[0];return this.createPolygon(d,null)}}else if(arguments.length===2){var v=arguments[0],x=arguments[1];return new Kt(v,x,this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){if(arguments.length===0)return new Yt(null,this);if(arguments.length===1){var u=arguments[0];return new Yt(u,this)}},createGeometry:function(u){var c=new he(this);return c.edit(u,{edit:function(){if(arguments.length===2){var d=arguments[0];return this.coordinateSequenceFactory.create(d)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return this.createLinearRing(u!==null?this.getCoordinateSequenceFactory().create(u):null)}if(T(arguments[0],D)){var c=arguments[0];return new be(c,this)}}},createMultiPolygon:function(){if(arguments.length===0)return new pe(null,this);if(arguments.length===1){var u=arguments[0];return new pe(u,this)}},createMultiPoint:function(){if(arguments.length===0)return new Ee(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return new Ee(u,this)}if(arguments[0]instanceof Array){var c=arguments[0];return this.createMultiPoint(c!==null?this.getCoordinateSequenceFactory().create(c):null)}if(T(arguments[0],D)){var d=arguments[0];if(d===null)return this.createMultiPoint(new Array(0).fill(null));for(var v=new Array(d.size()).fill(null),x=0;x<d.size();x++){var I=this.getCoordinateSequenceFactory().create(1,d.getDimension());lt.copy(d,x,I,0,1),v[x]=this.createPoint(I)}return this.createMultiPoint(v)}}},interfaces_:function(){return[E]},getClass:function(){return Ut}}),Ut.toMultiPolygonArray=function(u){var c=new Array(u.size()).fill(null);return u.toArray(c)},Ut.toGeometryArray=function(u){if(u===null)return null;var c=new Array(u.size()).fill(null);return u.toArray(c)},Ut.getDefaultCoordinateSequenceFactory=function(){return et.instance()},Ut.toMultiLineStringArray=function(u){var c=new Array(u.size()).fill(null);return u.toArray(c)},Ut.toLineStringArray=function(u){var c=new Array(u.size()).fill(null);return u.toArray(c)},Ut.toMultiPointArray=function(u){var c=new Array(u.size()).fill(null);return u.toArray(c)},Ut.toLinearRingArray=function(u){var c=new Array(u.size()).fill(null);return u.toArray(c)},Ut.toPointArray=function(u){var c=new Array(u.size()).fill(null);return u.toArray(c)},Ut.toPolygonArray=function(u){var c=new Array(u.size()).fill(null);return u.toArray(c)},Ut.createPointFromInternalCoord=function(u,c){return c.getPrecisionModel().makePrecise(u),c.getFactory().createPoint(u)},Ut.serialVersionUID=-6820524753094096e3;var Ti={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};a(Kr.prototype,{read:function(u){var c,d,v;u=u.replace(/[\n\r]/g," ");var x=Ti.typeStr.exec(u);if(u.search("EMPTY")!==-1&&(x=Ti.emptyTypeStr.exec(u),x[2]=void 0),x&&(d=x[1].toLowerCase(),v=x[2],uo[d]&&(c=uo[d].apply(this,[v]))),c===void 0)throw new Error("Could not parse WKT "+u);return c},write:function(u){return this.extractGeometry(u)},extractGeometry:function(u){var c=u.getGeometryType().toLowerCase();if(!ha[c])return null;var d=c.toUpperCase();return u.isEmpty()?d+" EMPTY":d+"("+ha[c].apply(this,[u])+")"}});var ha={coordinate:function(u){return u.x+" "+u.y},point:function(u){return ha.coordinate.call(this,u.coordinates.coordinates[0])},multipoint:function(u){for(var c=[],d=0,v=u.geometries.length;v>d;++d)c.push("("+ha.point.apply(this,[u.geometries[d]])+")");return c.join(",")},linestring:function(u){for(var c=[],d=0,v=u.points.coordinates.length;v>d;++d)c.push(ha.coordinate.apply(this,[u.points.coordinates[d]]));return c.join(",")},linearring:function(u){for(var c=[],d=0,v=u.points.coordinates.length;v>d;++d)c.push(ha.coordinate.apply(this,[u.points.coordinates[d]]));return c.join(",")},multilinestring:function(u){for(var c=[],d=0,v=u.geometries.length;v>d;++d)c.push("("+ha.linestring.apply(this,[u.geometries[d]])+")");return c.join(",")},polygon:function(u){var c=[];c.push("("+ha.linestring.apply(this,[u.shell])+")");for(var d=0,v=u.holes.length;v>d;++d)c.push("("+ha.linestring.apply(this,[u.holes[d]])+")");return c.join(",")},multipolygon:function(u){for(var c=[],d=0,v=u.geometries.length;v>d;++d)c.push("("+ha.polygon.apply(this,[u.geometries[d]])+")");return c.join(",")},geometrycollection:function(u){for(var c=[],d=0,v=u.geometries.length;v>d;++d)c.push(this.extractGeometry(u.geometries[d]));return c.join(",")}},uo={point:function(u){if(u===void 0)return this.geometryFactory.createPoint();var c=u.trim().split(Ti.spaces);return this.geometryFactory.createPoint(new N(Number.parseFloat(c[0]),Number.parseFloat(c[1])))},multipoint:function(u){if(u===void 0)return this.geometryFactory.createMultiPoint();for(var c,d=u.trim().split(","),v=[],x=0,I=d.length;I>x;++x)c=d[x].replace(Ti.trimParens,"$1"),v.push(uo.point.apply(this,[c]));return this.geometryFactory.createMultiPoint(v)},linestring:function(u){if(u===void 0)return this.geometryFactory.createLineString();for(var c,d=u.trim().split(","),v=[],x=0,I=d.length;I>x;++x)c=d[x].trim().split(Ti.spaces),v.push(new N(Number.parseFloat(c[0]),Number.parseFloat(c[1])));return this.geometryFactory.createLineString(v)},linearring:function(u){if(u===void 0)return this.geometryFactory.createLinearRing();for(var c,d=u.trim().split(","),v=[],x=0,I=d.length;I>x;++x)c=d[x].trim().split(Ti.spaces),v.push(new N(Number.parseFloat(c[0]),Number.parseFloat(c[1])));return this.geometryFactory.createLinearRing(v)},multilinestring:function(u){if(u===void 0)return this.geometryFactory.createMultiLineString();for(var c,d=u.trim().split(Ti.parenComma),v=[],x=0,I=d.length;I>x;++x)c=d[x].replace(Ti.trimParens,"$1"),v.push(uo.linestring.apply(this,[c]));return this.geometryFactory.createMultiLineString(v)},polygon:function(u){if(u===void 0)return this.geometryFactory.createPolygon();for(var c,d,v,x,I=u.trim().split(Ti.parenComma),R=[],J=0,ge=I.length;ge>J;++J)c=I[J].replace(Ti.trimParens,"$1"),d=uo.linestring.apply(this,[c]),v=this.geometryFactory.createLinearRing(d.points),J===0?x=v:R.push(v);return this.geometryFactory.createPolygon(x,R)},multipolygon:function(u){if(u===void 0)return this.geometryFactory.createMultiPolygon();for(var c,d=u.trim().split(Ti.doubleParenComma),v=[],x=0,I=d.length;I>x;++x)c=d[x].replace(Ti.trimParens,"$1"),v.push(uo.polygon.apply(this,[c]));return this.geometryFactory.createMultiPolygon(v)},geometrycollection:function(u){if(u===void 0)return this.geometryFactory.createGeometryCollection();u=u.replace(/,\s*([A-Za-z])/g,"|$1");for(var c=u.trim().split("|"),d=[],v=0,x=c.length;x>v;++v)d.push(this.read(c[v]));return this.geometryFactory.createGeometryCollection(d)}};a($n.prototype,{write:function(u){return this.parser.write(u)}}),a($n,{toLineString:function(u,c){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+u.x+" "+u.y+", "+c.x+" "+c.y+" )"}}),a(nn.prototype,{getIndexAlongSegment:function(u,c){return this.computeIntLineIndex(),this.intLineIndex[u][c]},getTopologySummary:function(){var u=new Q;return this.isEndPoint()&&u.append(" endpoint"),this._isProper&&u.append(" proper"),this.isCollinear()&&u.append(" collinear"),u.toString()},computeIntersection:function(u,c,d,v){this.inputLines[0][0]=u,this.inputLines[0][1]=c,this.inputLines[1][0]=d,this.inputLines[1][1]=v,this.result=this.computeIntersect(u,c,d,v)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(arguments.length===0)this.intLineIndex===null&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var u=arguments[0],c=this.getEdgeDistance(u,0),d=this.getEdgeDistance(u,1);c>d?(this.intLineIndex[u][0]=0,this.intLineIndex[u][1]=1):(this.intLineIndex[u][0]=1,this.intLineIndex[u][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(u){this.precisionModel=u},isInteriorIntersection:function(){if(arguments.length===0)return this.isInteriorIntersection(0)?!0:!!this.isInteriorIntersection(1);if(arguments.length===1){for(var u=arguments[0],c=0;c<this.result;c++)if(!this.intPt[c].equals2D(this.inputLines[u][0])&&!this.intPt[c].equals2D(this.inputLines[u][1]))return!0;return!1}},getIntersection:function(u){return this.intPt[u]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==nn.NO_INTERSECTION},getEdgeDistance:function(u,c){var d=nn.computeEdgeDistance(this.intPt[c],this.inputLines[u][0],this.inputLines[u][1]);return d},isCollinear:function(){return this.result===nn.COLLINEAR_INTERSECTION},toString:function(){return $n.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+$n.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(u,c){return this.inputLines[u][c]},isIntersection:function(u){for(var c=0;c<this.result;c++)if(this.intPt[c].equals2D(u))return!0;return!1},getIntersectionAlongSegment:function(u,c){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[u][c]]},interfaces_:function(){return[]},getClass:function(){return nn}}),nn.computeEdgeDistance=function(u,c,d){var v=Math.abs(d.x-c.x),x=Math.abs(d.y-c.y),I=-1;if(u.equals(c))I=0;else if(u.equals(d))I=v>x?v:x;else{var R=Math.abs(u.x-c.x),J=Math.abs(u.y-c.y);I=v>x?R:J,I!==0||u.equals(c)||(I=Math.max(R,J))}return M.isTrue(!(I===0&&!u.equals(c)),"Bad distance calculation"),I},nn.nonRobustComputeEdgeDistance=function(u,c,d){var v=u.x-c.x,x=u.y-c.y,I=Math.sqrt(v*v+x*x);return M.isTrue(!(I===0&&!u.equals(c)),"Invalid distance calculation"),I},nn.DONT_INTERSECT=0,nn.DO_INTERSECT=1,nn.COLLINEAR=2,nn.NO_INTERSECTION=0,nn.POINT_INTERSECTION=1,nn.COLLINEAR_INTERSECTION=2,A(Zt,nn),a(Zt.prototype,{isInSegmentEnvelopes:function(u){var c=new re(this.inputLines[0][0],this.inputLines[0][1]),d=new re(this.inputLines[1][0],this.inputLines[1][1]);return c.contains(u)&&d.contains(u)},computeIntersection:function(){if(arguments.length!==3)return nn.prototype.computeIntersection.apply(this,arguments);var u=arguments[0],c=arguments[1],d=arguments[2];return this._isProper=!1,re.intersects(c,d,u)&&rt.orientationIndex(c,d,u)===0&&rt.orientationIndex(d,c,u)===0?(this._isProper=!0,(u.equals(c)||u.equals(d))&&(this._isProper=!1),this.result=nn.POINT_INTERSECTION,null):void(this.result=nn.NO_INTERSECTION)},normalizeToMinimum:function(u,c,d,v,x){x.x=this.smallestInAbsValue(u.x,c.x,d.x,v.x),x.y=this.smallestInAbsValue(u.y,c.y,d.y,v.y),u.x-=x.x,u.y-=x.y,c.x-=x.x,c.y-=x.y,d.x-=x.x,d.y-=x.y,v.x-=x.x,v.y-=x.y},safeHCoordinateIntersection:function(u,c,d,v){var x=null;try{x=Pe.intersection(u,c,d,v)}catch(I){if(!(I instanceof V))throw I;x=Zt.nearestEndpoint(u,c,d,v)}finally{}return x},intersection:function(u,c,d,v){var x=this.intersectionWithNormalization(u,c,d,v);return this.isInSegmentEnvelopes(x)||(x=new N(Zt.nearestEndpoint(u,c,d,v))),this.precisionModel!==null&&this.precisionModel.makePrecise(x),x},smallestInAbsValue:function(u,c,d,v){var x=u,I=Math.abs(x);return Math.abs(c)<I&&(x=c,I=Math.abs(c)),Math.abs(d)<I&&(x=d,I=Math.abs(d)),Math.abs(v)<I&&(x=v),x},checkDD:function(u,c,d,v,x){var I=se.intersection(u,c,d,v),R=this.isInSegmentEnvelopes(I);oe.out.println("DD in env = "+R+"  --------------------- "+I),x.distance(I)>1e-4&&oe.out.println("Distance = "+x.distance(I))},intersectionWithNormalization:function(u,c,d,v){var x=new N(u),I=new N(c),R=new N(d),J=new N(v),ge=new N;this.normalizeToEnvCentre(x,I,R,J,ge);var Ie=this.safeHCoordinateIntersection(x,I,R,J);return Ie.x+=ge.x,Ie.y+=ge.y,Ie},computeCollinearIntersection:function(u,c,d,v){var x=re.intersects(u,c,d),I=re.intersects(u,c,v),R=re.intersects(d,v,u),J=re.intersects(d,v,c);return x&&I?(this.intPt[0]=d,this.intPt[1]=v,nn.COLLINEAR_INTERSECTION):R&&J?(this.intPt[0]=u,this.intPt[1]=c,nn.COLLINEAR_INTERSECTION):x&&R?(this.intPt[0]=d,this.intPt[1]=u,!d.equals(u)||I||J?nn.COLLINEAR_INTERSECTION:nn.POINT_INTERSECTION):x&&J?(this.intPt[0]=d,this.intPt[1]=c,!d.equals(c)||I||R?nn.COLLINEAR_INTERSECTION:nn.POINT_INTERSECTION):I&&R?(this.intPt[0]=v,this.intPt[1]=u,!v.equals(u)||x||J?nn.COLLINEAR_INTERSECTION:nn.POINT_INTERSECTION):I&&J?(this.intPt[0]=v,this.intPt[1]=c,!v.equals(c)||x||R?nn.COLLINEAR_INTERSECTION:nn.POINT_INTERSECTION):nn.NO_INTERSECTION},normalizeToEnvCentre:function(u,c,d,v,x){var I=u.x<c.x?u.x:c.x,R=u.y<c.y?u.y:c.y,J=u.x>c.x?u.x:c.x,ge=u.y>c.y?u.y:c.y,Ie=d.x<v.x?d.x:v.x,ze=d.y<v.y?d.y:v.y,Ve=d.x>v.x?d.x:v.x,st=d.y>v.y?d.y:v.y,Rt=I>Ie?I:Ie,ln=Ve>J?J:Ve,vn=R>ze?R:ze,Xn=st>ge?ge:st,vr=(Rt+ln)/2,Ri=(vn+Xn)/2;x.x=vr,x.y=Ri,u.x-=x.x,u.y-=x.y,c.x-=x.x,c.y-=x.y,d.x-=x.x,d.y-=x.y,v.x-=x.x,v.y-=x.y},computeIntersect:function(u,c,d,v){if(this._isProper=!1,!re.intersects(u,c,d,v))return nn.NO_INTERSECTION;var x=rt.orientationIndex(u,c,d),I=rt.orientationIndex(u,c,v);if(x>0&&I>0||0>x&&0>I)return nn.NO_INTERSECTION;var R=rt.orientationIndex(d,v,u),J=rt.orientationIndex(d,v,c);if(R>0&&J>0||0>R&&0>J)return nn.NO_INTERSECTION;var ge=x===0&&I===0&&R===0&&J===0;return ge?this.computeCollinearIntersection(u,c,d,v):(x===0||I===0||R===0||J===0?(this._isProper=!1,u.equals2D(d)||u.equals2D(v)?this.intPt[0]=u:c.equals2D(d)||c.equals2D(v)?this.intPt[0]=c:x===0?this.intPt[0]=new N(d):I===0?this.intPt[0]=new N(v):R===0?this.intPt[0]=new N(u):J===0&&(this.intPt[0]=new N(c))):(this._isProper=!0,this.intPt[0]=this.intersection(u,c,d,v)),nn.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return Zt}}),Zt.nearestEndpoint=function(u,c,d,v){var x=u,I=rt.distancePointLine(u,d,v),R=rt.distancePointLine(c,d,v);return I>R&&(I=R,x=c),R=rt.distancePointLine(d,u,c),I>R&&(I=R,x=d),R=rt.distancePointLine(v,u,c),I>R&&(I=R,x=v),x},a(Dn.prototype,{interfaces_:function(){return[]},getClass:function(){return Dn}}),Dn.orientationIndex=function(u,c,d){var v=c.x-u.x,x=c.y-u.y,I=d.x-c.x,R=d.y-c.y;return Dn.signOfDet2x2(v,x,I,R)},Dn.signOfDet2x2=function(u,c,d,v){var x=null,I=null,R=null;if(x=1,u===0||v===0)return c===0||d===0?0:c>0?d>0?-x:x:d>0?x:-x;if(c===0||d===0)return v>0?u>0?x:-x:u>0?-x:x;if(c>0?v>0?v>=c||(x=-x,I=u,u=d,d=I,I=c,c=v,v=I):-v>=c?(x=-x,d=-d,v=-v):(I=u,u=-d,d=I,I=c,c=-v,v=I):v>0?v>=-c?(x=-x,u=-u,c=-c):(I=-u,u=d,d=I,I=-c,c=v,v=I):c>=v?(u=-u,c=-c,d=-d,v=-v):(x=-x,I=-u,u=-d,d=I,I=-c,c=-v,v=I),u>0){if(!(d>0)||!(d>=u))return x}else{if(d>0||!(u>=d))return-x;x=-x,u=-u,d=-d}for(;;){if(R=Math.floor(d/u),d-=R*u,v-=R*c,0>v)return-x;if(v>c)return x;if(u>d+d){if(v+v>c)return x}else{if(c>v+v)return-x;d=u-d,v=c-v,x=-x}if(v===0)return d===0?0:-x;if(d===0||(R=Math.floor(u/d),u-=R*d,c-=R*v,0>c))return x;if(c>v)return-x;if(d>u+u){if(c+c>v)return-x}else{if(v>c+c)return x;u=d-u,c=v-c,x=-x}if(c===0)return u===0?0:x;if(u===0)return-x}},a($r.prototype,{countSegment:function(u,c){if(u.x<this.p.x&&c.x<this.p.x)return null;if(this.p.x===c.x&&this.p.y===c.y)return this.isPointOnSegment=!0,null;if(u.y===this.p.y&&c.y===this.p.y){var d=u.x,v=c.x;return d>v&&(d=c.x,v=u.x),this.p.x>=d&&this.p.x<=v&&(this.isPointOnSegment=!0),null}if(u.y>this.p.y&&c.y<=this.p.y||c.y>this.p.y&&u.y<=this.p.y){var x=u.x-this.p.x,I=u.y-this.p.y,R=c.x-this.p.x,J=c.y-this.p.y,ge=Dn.signOfDet2x2(x,I,R,J);if(ge===0)return this.isPointOnSegment=!0,null;I>J&&(ge=-ge),ge>0&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==S.EXTERIOR},getLocation:function(){return this.isPointOnSegment?S.BOUNDARY:this.crossingCount%2===1?S.INTERIOR:S.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return $r}}),$r.locatePointInRing=function(){if(arguments[0]instanceof N&&T(arguments[1],D)){for(var u=arguments[0],c=arguments[1],d=new $r(u),v=new N,x=new N,I=1;I<c.size();I++)if(c.getCoordinate(I,v),c.getCoordinate(I-1,x),d.countSegment(v,x),d.isOnSegment())return d.getLocation();return d.getLocation()}if(arguments[0]instanceof N&&arguments[1]instanceof Array){for(var R=arguments[0],J=arguments[1],d=new $r(R),I=1;I<J.length;I++){var v=J[I],x=J[I-1];if(d.countSegment(v,x),d.isOnSegment())return d.getLocation()}return d.getLocation()}},a(rt.prototype,{interfaces_:function(){return[]},getClass:function(){return rt}}),rt.orientationIndex=function(u,c,d){return se.orientationIndex(u,c,d)},rt.signedArea=function(){if(arguments[0]instanceof Array){var u=arguments[0];if(u.length<3)return 0;for(var c=0,d=u[0].x,v=1;v<u.length-1;v++){var x=u[v].x-d,I=u[v+1].y,R=u[v-1].y;c+=x*(R-I)}return c/2}if(T(arguments[0],D)){var J=arguments[0],ge=J.size();if(3>ge)return 0;var Ie=new N,ze=new N,Ve=new N;J.getCoordinate(0,ze),J.getCoordinate(1,Ve);var d=ze.x;Ve.x-=d;for(var c=0,v=1;ge-1>v;v++)Ie.y=ze.y,ze.x=Ve.x,ze.y=Ve.y,J.getCoordinate(v+1,Ve),Ve.x-=d,c+=ze.x*(Ie.y-Ve.y);return c/2}},rt.distanceLineLine=function(u,c,d,v){if(u.equals(c))return rt.distancePointLine(u,d,v);if(d.equals(v))return rt.distancePointLine(v,u,c);var x=!1;if(re.intersects(u,c,d,v)){var I=(c.x-u.x)*(v.y-d.y)-(c.y-u.y)*(v.x-d.x);if(I===0)x=!0;else{var R=(u.y-d.y)*(v.x-d.x)-(u.x-d.x)*(v.y-d.y),J=(u.y-d.y)*(c.x-u.x)-(u.x-d.x)*(c.y-u.y),ge=J/I,Ie=R/I;(0>Ie||Ie>1||0>ge||ge>1)&&(x=!0)}}else x=!0;return x?G.min(rt.distancePointLine(u,d,v),rt.distancePointLine(c,d,v),rt.distancePointLine(d,u,c),rt.distancePointLine(v,u,c)):0},rt.isPointInRing=function(u,c){return rt.locatePointInRing(u,c)!==S.EXTERIOR},rt.computeLength=function(u){var c=u.size();if(1>=c)return 0;var d=0,v=new N;u.getCoordinate(0,v);for(var x=v.x,I=v.y,R=1;c>R;R++){u.getCoordinate(R,v);var J=v.x,ge=v.y,Ie=J-x,ze=ge-I;d+=Math.sqrt(Ie*Ie+ze*ze),x=J,I=ge}return d},rt.isCCW=function(u){var c=u.length-1;if(3>c)throw new h;for(var d=u[0],v=0,x=1;c>=x;x++){var I=u[x];I.y>d.y&&(d=I,v=x)}var R=v;do R-=1,0>R&&(R=c);while(u[R].equals2D(d)&&R!==v);var J=v;do J=(J+1)%c;while(u[J].equals2D(d)&&J!==v);var ge=u[R],Ie=u[J];if(ge.equals2D(d)||Ie.equals2D(d)||ge.equals2D(Ie))return!1;var ze=rt.computeOrientation(ge,d,Ie);return ze===0?ge.x>Ie.x:ze>0},rt.locatePointInRing=function(u,c){return $r.locatePointInRing(u,c)},rt.distancePointLinePerpendicular=function(u,c,d){var v=(d.x-c.x)*(d.x-c.x)+(d.y-c.y)*(d.y-c.y),x=((c.y-u.y)*(d.x-c.x)-(c.x-u.x)*(d.y-c.y))/v;return Math.abs(x)*Math.sqrt(v)},rt.computeOrientation=function(u,c,d){return rt.orientationIndex(u,c,d)},rt.distancePointLine=function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];if(c.length===0)throw new h;for(var d=u.distance(c[0]),v=0;v<c.length-1;v++){var x=rt.distancePointLine(u,c[v],c[v+1]);d>x&&(d=x)}return d}if(arguments.length===3){var I=arguments[0],R=arguments[1],J=arguments[2];if(R.x===J.x&&R.y===J.y)return I.distance(R);var ge=(J.x-R.x)*(J.x-R.x)+(J.y-R.y)*(J.y-R.y),Ie=((I.x-R.x)*(J.x-R.x)+(I.y-R.y)*(J.y-R.y))/ge;if(0>=Ie)return I.distance(R);if(Ie>=1)return I.distance(J);var ze=((R.y-I.y)*(J.x-R.x)-(R.x-I.x)*(J.y-R.y))/ge;return Math.abs(ze)*Math.sqrt(ge)}},rt.isOnLine=function(u,c){for(var d=new Zt,v=1;v<c.length;v++){var x=c[v-1],I=c[v];if(d.computeIntersection(u,x,I),d.hasIntersection())return!0}return!1},rt.CLOCKWISE=-1,rt.RIGHT=rt.CLOCKWISE,rt.COUNTERCLOCKWISE=1,rt.LEFT=rt.COUNTERCLOCKWISE,rt.COLLINEAR=0,rt.STRAIGHT=rt.COLLINEAR,a(Qt.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof Qt){var u=arguments[0],c=rt.orientationIndex(this.p0,this.p1,u.p0),d=rt.orientationIndex(this.p0,this.p1,u.p1);return c>=0&&d>=0||0>=c&&0>=d?Math.max(c,d):0}if(arguments[0]instanceof N){var v=arguments[0];return rt.orientationIndex(this.p0,this.p1,v)}},toGeometry:function(u){return u.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(u){if(!(u instanceof Qt))return!1;var c=u;return this.p0.equals(c.p0)&&this.p1.equals(c.p1)},intersection:function(u){var c=new Zt;return c.computeIntersection(this.p0,this.p1,u.p0,u.p1),c.hasIntersection()?c.getIntersection(0):null},project:function(){if(arguments[0]instanceof N){var u=arguments[0];if(u.equals(this.p0)||u.equals(this.p1))return new N(u);var c=this.projectionFactor(u),d=new N;return d.x=this.p0.x+c*(this.p1.x-this.p0.x),d.y=this.p0.y+c*(this.p1.y-this.p0.y),d}if(arguments[0]instanceof Qt){var v=arguments[0],x=this.projectionFactor(v.p0),I=this.projectionFactor(v.p1);if(x>=1&&I>=1||0>=x&&0>=I)return null;var R=this.project(v.p0);0>x&&(R=this.p0),x>1&&(R=this.p1);var J=this.project(v.p1);return 0>I&&(J=this.p0),I>1&&(J=this.p1),new Qt(R,J)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(u){return u===0?this.p0:this.p1},distancePerpendicular:function(u){return rt.distancePointLinePerpendicular(u,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return Qt.midPoint(this.p0,this.p1)},projectionFactor:function(u){if(u.equals(this.p0))return 0;if(u.equals(this.p1))return 1;var c=this.p1.x-this.p0.x,d=this.p1.y-this.p0.y,v=c*c+d*d;if(0>=v)return g.NaN;var x=((u.x-this.p0.x)*c+(u.y-this.p0.y)*d)/v;return x},closestPoints:function(u){var c=this.intersection(u);if(c!==null)return[c,c];var d=new Array(2).fill(null),v=g.MAX_VALUE,x=null,I=this.closestPoint(u.p0);v=I.distance(u.p0),d[0]=I,d[1]=u.p0;var R=this.closestPoint(u.p1);x=R.distance(u.p1),v>x&&(v=x,d[0]=R,d[1]=u.p1);var J=u.closestPoint(this.p0);x=J.distance(this.p0),v>x&&(v=x,d[0]=this.p0,d[1]=J);var ge=u.closestPoint(this.p1);return x=ge.distance(this.p1),v>x&&(v=x,d[0]=this.p1,d[1]=ge),d},closestPoint:function(u){var c=this.projectionFactor(u);if(c>0&&1>c)return this.project(u);var d=this.p0.distance(u),v=this.p1.distance(u);return v>d?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(u){var c=u,d=this.p0.compareTo(c.p0);return d!==0?d:this.p1.compareTo(c.p1)},reverse:function(){var u=this.p0;this.p0=this.p1,this.p1=u},equalsTopo:function(u){return this.p0.equals(u.p0)&&this.p1.equals(u.p1)||this.p0.equals(u.p1)&&this.p1.equals(u.p0)},lineIntersection:function(u){try{var c=Pe.intersection(this.p0,this.p1,u.p0,u.p1);return c}catch(d){if(!(d instanceof V))throw d}finally{}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(u,c){var d=this.p0.x+u*(this.p1.x-this.p0.x),v=this.p0.y+u*(this.p1.y-this.p0.y),x=this.p1.x-this.p0.x,I=this.p1.y-this.p0.y,R=Math.sqrt(x*x+I*I),J=0,ge=0;if(c!==0){if(0>=R)throw new IllegalStateException("Cannot compute offset from zero-length line segment");J=c*x/R,ge=c*I/R}var Ie=d-ge,ze=v+J,Ve=new N(Ie,ze);return Ve},setCoordinates:function(){if(arguments.length===1){var u=arguments[0];this.setCoordinates(u.p0,u.p1)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.p0.x=c.x,this.p0.y=c.y,this.p1.x=d.x,this.p1.y=d.y}},segmentFraction:function(u){var c=this.projectionFactor(u);return 0>c?c=0:(c>1||g.isNaN(c))&&(c=1),c},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof Qt){var u=arguments[0];return rt.distanceLineLine(this.p0,this.p1,u.p0,u.p1)}if(arguments[0]instanceof N){var c=arguments[0];return rt.distancePointLine(c,this.p0,this.p1)}},pointAlong:function(u){var c=new N;return c.x=this.p0.x+u*(this.p1.x-this.p0.x),c.y=this.p0.y+u*(this.p1.y-this.p0.y),c},hashCode:function(){var u=java.lang.Double.doubleToLongBits(this.p0.x);u^=31*java.lang.Double.doubleToLongBits(this.p0.y);var c=Math.trunc(u)^Math.trunc(u>>32),d=java.lang.Double.doubleToLongBits(this.p1.x);d^=31*java.lang.Double.doubleToLongBits(this.p1.y);var v=Math.trunc(d)^Math.trunc(d>>32);return c^v},interfaces_:function(){return[p,E]},getClass:function(){return Qt}}),Qt.midPoint=function(u,c){return new N((u.x+c.x)/2,(u.y+c.y)/2)},Qt.serialVersionUID=0x2d2172135f411c00,a(sn.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){var u=sn.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])||sn.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||sn.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||sn.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY]);return u&&this.matrix[S.EXTERIOR][S.INTERIOR]===Xe.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===Xe.FALSE},isCoveredBy:function(){var u=sn.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])||sn.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||sn.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||sn.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY]);return u&&this.matrix[S.INTERIOR][S.EXTERIOR]===Xe.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===Xe.FALSE},set:function(){if(arguments.length===1)for(var u=arguments[0],c=0;c<u.length;c++){var d=Math.trunc(c/3),v=c%3;this.matrix[d][v]=Xe.toDimensionValue(u.charAt(c))}else if(arguments.length===3){var x=arguments[0],I=arguments[1],R=arguments[2];this.matrix[x][I]=R}},isContains:function(){return sn.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.EXTERIOR][S.INTERIOR]===Xe.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===Xe.FALSE},setAtLeast:function(){if(arguments.length===1)for(var u=arguments[0],c=0;c<u.length;c++){var d=Math.trunc(c/3),v=c%3;this.setAtLeast(d,v,Xe.toDimensionValue(u.charAt(c)))}else if(arguments.length===3){var x=arguments[0],I=arguments[1],R=arguments[2];this.matrix[x][I]<R&&(this.matrix[x][I]=R)}},setAtLeastIfValid:function(u,c,d){u>=0&&c>=0&&this.setAtLeast(u,c,d)},isWithin:function(){return sn.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.INTERIOR][S.EXTERIOR]===Xe.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===Xe.FALSE},isTouches:function(u,c){return u>c?this.isTouches(c,u):u===Xe.A&&c===Xe.A||u===Xe.L&&c===Xe.L||u===Xe.L&&c===Xe.A||u===Xe.P&&c===Xe.A||u===Xe.P&&c===Xe.L?this.matrix[S.INTERIOR][S.INTERIOR]===Xe.FALSE&&(sn.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||sn.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||sn.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY])):!1},isOverlaps:function(u,c){return u===Xe.P&&c===Xe.P||u===Xe.A&&c===Xe.A?sn.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&sn.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR])&&sn.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR]):u===Xe.L&&c===Xe.L?this.matrix[S.INTERIOR][S.INTERIOR]===1&&sn.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR])&&sn.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR]):!1},isEquals:function(u,c){return u!==c?!1:sn.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.INTERIOR][S.EXTERIOR]===Xe.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===Xe.FALSE&&this.matrix[S.EXTERIOR][S.INTERIOR]===Xe.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===Xe.FALSE},toString:function(){for(var u=new Q("123456789"),c=0;3>c;c++)for(var d=0;3>d;d++)u.setCharAt(3*c+d,Xe.toDimensionSymbol(this.matrix[c][d]));return u.toString()},setAll:function(u){for(var c=0;3>c;c++)for(var d=0;3>d;d++)this.matrix[c][d]=u},get:function(u,c){return this.matrix[u][c]},transpose:function(){var u=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=u,u=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=u,u=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=u,this},matches:function(u){if(u.length!==9)throw new h;for(var c=0;3>c;c++)for(var d=0;3>d;d++)if(!sn.matches(this.matrix[c][d],u.charAt(3*c+d)))return!1;return!0},add:function(u){for(var c=0;3>c;c++)for(var d=0;3>d;d++)this.setAtLeast(c,d,u.get(c,d))},isDisjoint:function(){return this.matrix[S.INTERIOR][S.INTERIOR]===Xe.FALSE&&this.matrix[S.INTERIOR][S.BOUNDARY]===Xe.FALSE&&this.matrix[S.BOUNDARY][S.INTERIOR]===Xe.FALSE&&this.matrix[S.BOUNDARY][S.BOUNDARY]===Xe.FALSE},isCrosses:function(u,c){return u===Xe.P&&c===Xe.L||u===Xe.P&&c===Xe.A||u===Xe.L&&c===Xe.A?sn.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&sn.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR]):u===Xe.L&&c===Xe.P||u===Xe.A&&c===Xe.P||u===Xe.A&&c===Xe.L?sn.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&sn.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR]):u===Xe.L&&c===Xe.L?this.matrix[S.INTERIOR][S.INTERIOR]===0:!1},interfaces_:function(){return[y]},getClass:function(){return sn}}),sn.matches=function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var u=arguments[0],c=arguments[1];return c===Xe.SYM_DONTCARE||c===Xe.SYM_TRUE&&(u>=0||u===Xe.TRUE)||c===Xe.SYM_FALSE&&u===Xe.FALSE||c===Xe.SYM_P&&u===Xe.P||c===Xe.SYM_L&&u===Xe.L?!0:c===Xe.SYM_A&&u===Xe.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var d=arguments[0],v=arguments[1],x=new sn(d);return x.matches(v)}},sn.isTrue=function(u){return u>=0||u===Xe.TRUE};var ls=Object.freeze({Coordinate:N,CoordinateList:te,Envelope:re,LineSegment:Qt,GeometryFactory:Ut,Geometry:Ne,Point:Lt,LineString:Wt,LinearRing:be,Polygon:Kt,GeometryCollection:Yt,MultiPoint:Ee,MultiLineString:Pt,MultiPolygon:pe,Dimension:Xe,IntersectionMatrix:sn});a(un.prototype,{addPoint:function(u){this.ptCount+=1,this.ptCentSum.x+=u.x,this.ptCentSum.y+=u.y},setBasePoint:function(u){this.areaBasePt===null&&(this.areaBasePt=u)},addLineSegments:function(u){for(var c=0,d=0;d<u.length-1;d++){var v=u[d].distance(u[d+1]);if(v!==0){c+=v;var x=(u[d].x+u[d+1].x)/2;this.lineCentSum.x+=v*x;var I=(u[d].y+u[d+1].y)/2;this.lineCentSum.y+=v*I}}this.totalLength+=c,c===0&&u.length>0&&this.addPoint(u[0])},addHole:function(u){for(var c=rt.isCCW(u),d=0;d<u.length-1;d++)this.addTriangle(this.areaBasePt,u[d],u[d+1],c);this.addLineSegments(u)},getCentroid:function(){var u=new N;if(Math.abs(this.areasum2)>0)u.x=this.cg3.x/3/this.areasum2,u.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)u.x=this.lineCentSum.x/this.totalLength,u.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;u.x=this.ptCentSum.x/this.ptCount,u.y=this.ptCentSum.y/this.ptCount}return u},addShell:function(u){u.length>0&&this.setBasePoint(u[0]);for(var c=!rt.isCCW(u),d=0;d<u.length-1;d++)this.addTriangle(this.areaBasePt,u[d],u[d+1],c);this.addLineSegments(u)},addTriangle:function(u,c,d,v){var x=v?1:-1;un.centroid3(u,c,d,this.triangleCent3);var I=un.area2(u,c,d);this.cg3.x+=x*I*this.triangleCent3.x,this.cg3.y+=x*I*this.triangleCent3.y,this.areasum2+=x*I},add:function(){if(arguments[0]instanceof Kt){var u=arguments[0];this.addShell(u.getExteriorRing().getCoordinates());for(var c=0;c<u.getNumInteriorRing();c++)this.addHole(u.getInteriorRingN(c).getCoordinates())}else if(arguments[0]instanceof Ne){var d=arguments[0];if(d.isEmpty())return null;if(d instanceof Lt)this.addPoint(d.getCoordinate());else if(d instanceof Wt)this.addLineSegments(d.getCoordinates());else if(d instanceof Kt){var v=d;this.add(v)}else if(d instanceof Yt)for(var x=d,c=0;c<x.getNumGeometries();c++)this.add(x.getGeometryN(c))}},interfaces_:function(){return[]},getClass:function(){return un}}),un.area2=function(u,c,d){return(c.x-u.x)*(d.y-u.y)-(d.x-u.x)*(c.y-u.y)},un.centroid3=function(u,c,d,v){return v.x=u.x+c.x+d.x,v.y=u.y+c.y+d.y,null},un.getCentroid=function(u){var c=new un(u);return c.getCentroid()},Wn.prototype=new Error,Wn.prototype.name="EmptyStackException",Kn.prototype=new k,Kn.prototype.add=function(u){return this.array_.push(u),!0},Kn.prototype.get=function(u){if(0>u||u>=this.size())throw new IndexOutOfBoundsException;return this.array_[u]},Kn.prototype.push=function(u){return this.array_.push(u),u},Kn.prototype.pop=function(u){if(this.array_.length===0)throw new Wn;return this.array_.pop()},Kn.prototype.peek=function(){if(this.array_.length===0)throw new Wn;return this.array_[this.array_.length-1]},Kn.prototype.empty=function(){return this.array_.length===0},Kn.prototype.isEmpty=function(){return this.empty()},Kn.prototype.search=function(u){return this.array_.indexOf(u)},Kn.prototype.size=function(){return this.array_.length},Kn.prototype.toArray=function(){for(var u=[],c=0,d=this.array_.length;d>c;c++)u.push(this.array_[c]);return u},a(qr.prototype,{filter:function(u){this.treeSet.contains(u)||(this.list.add(u),this.treeSet.add(u))},getCoordinates:function(){var u=new Array(this.list.size()).fill(null);return this.list.toArray(u)},interfaces_:function(){return[Ue]},getClass:function(){return qr}}),qr.filterCoordinates=function(u){for(var c=new qr,d=0;d<u.length;d++)c.filter(u[d]);return c.getCoordinates()},a(z.prototype,{preSort:function(u){for(var c=null,d=1;d<u.length;d++)(u[d].y<u[0].y||u[d].y===u[0].y&&u[d].x<u[0].x)&&(c=u[0],u[0]=u[d],u[d]=c);return gn.sort(u,1,u.length,new ie(u[0])),u},computeOctRing:function(u){var c=this.computeOctPts(u),d=new te;return d.add(c,!1),d.size()<3?null:(d.closeRing(),d.toCoordinateArray())},lineOrPolygon:function(u){if(u=this.cleanRing(u),u.length===3)return this.geomFactory.createLineString([u[0],u[1]]);var c=this.geomFactory.createLinearRing(u);return this.geomFactory.createPolygon(c,null)},cleanRing:function(u){M.equals(u[0],u[u.length-1]);for(var c=new U,d=null,v=0;v<=u.length-2;v++){var x=u[v],I=u[v+1];x.equals(I)||d!==null&&this.isBetween(d,x,I)||(c.add(x),d=x)}c.add(u[u.length-1]);var R=new Array(c.size()).fill(null);return c.toArray(R)},isBetween:function(u,c,d){return rt.computeOrientation(u,c,d)!==0?!1:u.x!==d.x&&(u.x<=c.x&&c.x<=d.x||d.x<=c.x&&c.x<=u.x)||u.y!==d.y&&(u.y<=c.y&&c.y<=d.y||d.y<=c.y&&c.y<=u.y)},reduce:function(u){var c=this.computeOctRing(u);if(c===null)return u;for(var d=new St,v=0;v<c.length;v++)d.add(c[v]);for(var v=0;v<u.length;v++)rt.isPointInRing(u[v],c)||d.add(u[v]);var x=He.toCoordinateArray(d);return x.length<3?this.padArray3(x):x},getConvexHull:function(){if(this.inputPts.length===0)return this.geomFactory.createGeometryCollection(null);if(this.inputPts.length===1)return this.geomFactory.createPoint(this.inputPts[0]);if(this.inputPts.length===2)return this.geomFactory.createLineString(this.inputPts);var u=this.inputPts;this.inputPts.length>50&&(u=this.reduce(this.inputPts));var c=this.preSort(u),d=this.grahamScan(c),v=this.toCoordinateArray(d);return this.lineOrPolygon(v)},padArray3:function(u){for(var c=new Array(3).fill(null),d=0;d<c.length;d++)d<u.length?c[d]=u[d]:c[d]=u[0];return c},computeOctPts:function(u){for(var c=new Array(8).fill(null),d=0;d<c.length;d++)c[d]=u[0];for(var v=1;v<u.length;v++)u[v].x<c[0].x&&(c[0]=u[v]),u[v].x-u[v].y<c[1].x-c[1].y&&(c[1]=u[v]),u[v].y>c[2].y&&(c[2]=u[v]),u[v].x+u[v].y>c[3].x+c[3].y&&(c[3]=u[v]),u[v].x>c[4].x&&(c[4]=u[v]),u[v].x-u[v].y>c[5].x-c[5].y&&(c[5]=u[v]),u[v].y<c[6].y&&(c[6]=u[v]),u[v].x+u[v].y<c[7].x+c[7].y&&(c[7]=u[v]);return c},toCoordinateArray:function(u){for(var c=new Array(u.size()).fill(null),d=0;d<u.size();d++){var v=u.get(d);c[d]=v}return c},grahamScan:function(u){var c=null,d=new Kn;c=d.push(u[0]),c=d.push(u[1]),c=d.push(u[2]);for(var v=3;v<u.length;v++){for(c=d.pop();!d.empty()&&rt.computeOrientation(d.peek(),c,u[v])>0;)c=d.pop();c=d.push(c),c=d.push(u[v])}return c=d.push(u[0]),d},interfaces_:function(){return[]},getClass:function(){return z}}),z.extractCoordinates=function(u){var c=new qr;return u.apply(c),c.getCoordinates()},a(ie.prototype,{compare:function(u,c){var d=u,v=c;return ie.polarCompare(this.origin,d,v)},interfaces_:function(){return[b]},getClass:function(){return ie}}),ie.polarCompare=function(u,c,d){var v=c.x-u.x,x=c.y-u.y,I=d.x-u.x,R=d.y-u.y,J=rt.computeOrientation(u,c,d);if(J===rt.COUNTERCLOCKWISE)return 1;if(J===rt.CLOCKWISE)return-1;var ge=v*v+x*x,Ie=I*I+R*R;return Ie>ge?-1:ge>Ie?1:0},z.RadialComparator=ie,a(Se.prototype,{transformPoint:function(u,c){return this.factory.createPoint(this.transformCoordinates(u.getCoordinateSequence(),u))},transformPolygon:function(u,c){var d=!0,v=this.transformLinearRing(u.getExteriorRing(),u);v!==null&&v instanceof be&&!v.isEmpty()||(d=!1);for(var x=new U,I=0;I<u.getNumInteriorRing();I++){var R=this.transformLinearRing(u.getInteriorRingN(I),u);R===null||R.isEmpty()||(R instanceof be||(d=!1),x.add(R))}if(d)return this.factory.createPolygon(v,x.toArray([]));var J=new U;return v!==null&&J.add(v),J.addAll(x),this.factory.buildGeometry(J)},createCoordinateSequence:function(u){return this.factory.getCoordinateSequenceFactory().create(u)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(u,c){for(var d=new U,v=0;v<u.getNumGeometries();v++){var x=this.transformLineString(u.getGeometryN(v),u);x!==null&&(x.isEmpty()||d.add(x))}return this.factory.buildGeometry(d)},transformCoordinates:function(u,c){return this.copy(u)},transformLineString:function(u,c){return this.factory.createLineString(this.transformCoordinates(u.getCoordinateSequence(),u))},transformMultiPoint:function(u,c){for(var d=new U,v=0;v<u.getNumGeometries();v++){var x=this.transformPoint(u.getGeometryN(v),u);x!==null&&(x.isEmpty()||d.add(x))}return this.factory.buildGeometry(d)},transformMultiPolygon:function(u,c){for(var d=new U,v=0;v<u.getNumGeometries();v++){var x=this.transformPolygon(u.getGeometryN(v),u);x!==null&&(x.isEmpty()||d.add(x))}return this.factory.buildGeometry(d)},copy:function(u){return u.copy()},transformGeometryCollection:function(u,c){for(var d=new U,v=0;v<u.getNumGeometries();v++){var x=this.transform(u.getGeometryN(v));x!==null&&(this.pruneEmptyGeometry&&x.isEmpty()||d.add(x))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(Ut.toGeometryArray(d)):this.factory.buildGeometry(d)},transform:function(u){if(this.inputGeom=u,this.factory=u.getFactory(),u instanceof Lt)return this.transformPoint(u,null);if(u instanceof Ee)return this.transformMultiPoint(u,null);if(u instanceof be)return this.transformLinearRing(u,null);if(u instanceof Wt)return this.transformLineString(u,null);if(u instanceof Pt)return this.transformMultiLineString(u,null);if(u instanceof Kt)return this.transformPolygon(u,null);if(u instanceof pe)return this.transformMultiPolygon(u,null);if(u instanceof Yt)return this.transformGeometryCollection(u,null);throw new h("Unknown Geometry subtype: "+u.getClass().getName())},transformLinearRing:function(u,c){var d=this.transformCoordinates(u.getCoordinateSequence(),u);if(d===null)return this.factory.createLinearRing(null);var v=d.size();return v>0&&4>v&&!this.preserveType?this.factory.createLineString(d):this.factory.createLinearRing(d)},interfaces_:function(){return[]},getClass:function(){return Se}}),a(Ae.prototype,{snapVertices:function(u,c){for(var d=this._isClosed?u.size()-1:u.size(),v=0;d>v;v++){var x=u.get(v),I=this.findSnapForVertex(x,c);I!==null&&(u.set(v,new N(I)),v===0&&this._isClosed&&u.set(u.size()-1,new N(I)))}},findSnapForVertex:function(u,c){for(var d=0;d<c.length;d++){if(u.equals2D(c[d]))return null;if(u.distance(c[d])<this.snapTolerance)return c[d]}return null},snapTo:function(u){var c=new te(this.srcPts);this.snapVertices(c,u),this.snapSegments(c,u);var d=c.toCoordinateArray();return d},snapSegments:function(u,c){if(c.length===0)return null;var d=c.length;c[0].equals2D(c[c.length-1])&&(d=c.length-1);for(var v=0;d>v;v++){var x=c[v],I=this.findSegmentIndexToSnap(x,u);I>=0&&u.add(I+1,new N(x),!1)}},findSegmentIndexToSnap:function(u,c){for(var d=g.MAX_VALUE,v=-1,x=0;x<c.size()-1;x++){if(this.seg.p0=c.get(x),this.seg.p1=c.get(x+1),this.seg.p0.equals2D(u)||this.seg.p1.equals2D(u)){if(this.allowSnappingToSourceVertices)continue;return-1}var I=this.seg.distance(u);I<this.snapTolerance&&d>I&&(d=I,v=x)}return v},setAllowSnappingToSourceVertices:function(u){this.allowSnappingToSourceVertices=u},interfaces_:function(){return[]},getClass:function(){return Ae}}),Ae.isClosed=function(u){return u.length<=1?!1:u[0].equals2D(u[u.length-1])},a(xe.prototype,{snapTo:function(u,c){var d=this.extractTargetCoordinates(u),v=new Ge(c,d);return v.transform(this.srcGeom)},snapToSelf:function(u,c){var d=this.extractTargetCoordinates(this.srcGeom),v=new Ge(u,d,!0),x=v.transform(this.srcGeom),I=x;return c&&T(I,or)&&(I=x.buffer(0)),I},computeSnapTolerance:function(u){var c=this.computeMinimumSegmentLength(u),d=c/10;return d},extractTargetCoordinates:function(u){for(var c=new St,d=u.getCoordinates(),v=0;v<d.length;v++)c.add(d[v]);return c.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(u){for(var c=g.MAX_VALUE,d=0;d<u.length-1;d++){var v=u[d].distance(u[d+1]);c>v&&(c=v)}return c},interfaces_:function(){return[]},getClass:function(){return xe}}),xe.snap=function(u,c,d){var v=new Array(2).fill(null),x=new xe(u);v[0]=x.snapTo(c,d);var I=new xe(c);return v[1]=I.snapTo(v[0],d),v},xe.computeOverlaySnapTolerance=function(){if(arguments.length===1){var u=arguments[0],c=xe.computeSizeBasedSnapTolerance(u),d=u.getPrecisionModel();if(d.getType()===pn.FIXED){var v=1/d.getScale()*2/1.415;v>c&&(c=v)}return c}if(arguments.length===2){var x=arguments[0],I=arguments[1];return Math.min(xe.computeOverlaySnapTolerance(x),xe.computeOverlaySnapTolerance(I))}},xe.computeSizeBasedSnapTolerance=function(u){var c=u.getEnvelopeInternal(),d=Math.min(c.getHeight(),c.getWidth()),v=d*xe.SNAP_PRECISION_FACTOR;return v},xe.snapToSelf=function(u,c,d){var v=new xe(u);return v.snapToSelf(c,d)},xe.SNAP_PRECISION_FACTOR=1e-9,A(Ge,Se),a(Ge.prototype,{snapLine:function(u,c){var d=new Ae(u,this.snapTolerance);return d.setAllowSnappingToSourceVertices(this.isSelfSnap),d.snapTo(c)},transformCoordinates:function(u,c){var d=u.toCoordinateArray(),v=this.snapLine(d,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(v)},interfaces_:function(){return[]},getClass:function(){return Ge}}),a(Ce.prototype,{getCommon:function(){return g.longBitsToDouble(this.commonBits)},add:function(u){var c=g.doubleToLongBits(u);if(this.isFirst)return this.commonBits=c,this.commonSignExp=Ce.signExpBits(this.commonBits),this.isFirst=!1,null;var d=Ce.signExpBits(c);return d!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=Ce.numCommonMostSigMantissaBits(this.commonBits,c),void(this.commonBits=Ce.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(arguments.length===1){var u=arguments[0],c=g.longBitsToDouble(u),d=Long.toBinaryString(u),v="0000000000000000000000000000000000000000000000000000000000000000"+d,x=v.substring(v.length-64),I=x.substring(0,1)+"  "+x.substring(1,12)+"(exp) "+x.substring(12)+" [ "+c+" ]";return I}},interfaces_:function(){return[]},getClass:function(){return Ce}}),Ce.getBit=function(u,c){var d=1<<c;return u&d?1:0},Ce.signExpBits=function(u){return u>>52},Ce.zeroLowerBits=function(u,c){var d=(1<<c)-1,v=~d,x=u&v;return x},Ce.numCommonMostSigMantissaBits=function(u,c){for(var d=0,v=52;v>=0;v--){if(Ce.getBit(u,v)!==Ce.getBit(c,v))return d;d++}return 52},a(Qe.prototype,{addCommonBits:function(u){var c=new yt(this.commonCoord);u.apply(c),u.geometryChanged()},removeCommonBits:function(u){if(this.commonCoord.x===0&&this.commonCoord.y===0)return u;var c=new N(this.commonCoord);c.x=-c.x,c.y=-c.y;var d=new yt(c);return u.apply(d),u.geometryChanged(),u},getCommonCoordinate:function(){return this.commonCoord},add:function(u){u.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return Qe}}),a(ht.prototype,{filter:function(u){this.commonBitsX.add(u.x),this.commonBitsY.add(u.y)},getCommonCoordinate:function(){return new N(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[Ue]},getClass:function(){return ht}}),a(yt.prototype,{filter:function(u,c){var d=u.getOrdinate(c,0)+this.trans.x,v=u.getOrdinate(c,1)+this.trans.y;u.setOrdinate(c,0,d),u.setOrdinate(c,1,v)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[yn]},getClass:function(){return yt}}),Qe.CommonCoordinateFilter=ht,Qe.Translater=yt,a(ot.prototype,{next:function(){if(this.atStart)return this.atStart=!1,ot.isAtomic(this.parent)&&this.index++,this.parent;if(this.subcollectionIterator!==null){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new H;var u=this.parent.getGeometryN(this.index++);return u instanceof Yt?(this.subcollectionIterator=new ot(u),this.subcollectionIterator.next()):u},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(this.subcollectionIterator!==null){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[ee]},getClass:function(){return ot}}),ot.isAtomic=function(u){return!(u instanceof Yt)},a(wt.prototype,{locateInternal:function(){if(arguments[0]instanceof N&&arguments[1]instanceof Kt){var u=arguments[0],c=arguments[1];if(c.isEmpty())return S.EXTERIOR;var d=c.getExteriorRing(),v=this.locateInPolygonRing(u,d);if(v===S.EXTERIOR)return S.EXTERIOR;if(v===S.BOUNDARY)return S.BOUNDARY;for(var x=0;x<c.getNumInteriorRing();x++){var I=c.getInteriorRingN(x),R=this.locateInPolygonRing(u,I);if(R===S.INTERIOR)return S.EXTERIOR;if(R===S.BOUNDARY)return S.BOUNDARY}return S.INTERIOR}if(arguments[0]instanceof N&&arguments[1]instanceof Wt){var J=arguments[0],ge=arguments[1];if(!ge.getEnvelopeInternal().intersects(J))return S.EXTERIOR;var Ie=ge.getCoordinates();return ge.isClosed()||!J.equals(Ie[0])&&!J.equals(Ie[Ie.length-1])?rt.isOnLine(J,Ie)?S.INTERIOR:S.EXTERIOR:S.BOUNDARY}if(arguments[0]instanceof N&&arguments[1]instanceof Lt){var ze=arguments[0],Ve=arguments[1],st=Ve.getCoordinate();return st.equals2D(ze)?S.INTERIOR:S.EXTERIOR}},locateInPolygonRing:function(u,c){return c.getEnvelopeInternal().intersects(u)?rt.locatePointInRing(u,c.getCoordinates()):S.EXTERIOR},intersects:function(u,c){return this.locate(u,c)!==S.EXTERIOR},updateLocationInfo:function(u){u===S.INTERIOR&&(this.isIn=!0),u===S.BOUNDARY&&this.numBoundaries++},computeLocation:function(u,c){if(c instanceof Lt&&this.updateLocationInfo(this.locateInternal(u,c)),c instanceof Wt)this.updateLocationInfo(this.locateInternal(u,c));else if(c instanceof Kt)this.updateLocationInfo(this.locateInternal(u,c));else if(c instanceof Pt)for(var d=c,v=0;v<d.getNumGeometries();v++){var x=d.getGeometryN(v);this.updateLocationInfo(this.locateInternal(u,x))}else if(c instanceof pe)for(var I=c,v=0;v<I.getNumGeometries();v++){var R=I.getGeometryN(v);this.updateLocationInfo(this.locateInternal(u,R))}else if(c instanceof Yt)for(var J=new ot(c);J.hasNext();){var ge=J.next();ge!==c&&this.computeLocation(u,ge)}},locate:function(u,c){return c.isEmpty()?S.EXTERIOR:c instanceof Wt?this.locateInternal(u,c):c instanceof Kt?this.locateInternal(u,c):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(u,c),this.boundaryRule.isInBoundary(this.numBoundaries)?S.BOUNDARY:this.numBoundaries>0||this.isIn?S.INTERIOR:S.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return wt}}),a(qt.prototype,{interfaces_:function(){return[]},getClass:function(){return qt}}),qt.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],c=arguments[1];if(u===0&&c===0)throw new h;var d=Math.abs(u),v=Math.abs(c);return u>=0?c>=0?d>=v?0:1:d>=v?7:6:c>=0?d>=v?3:2:d>=v?4:5}if(arguments[0]instanceof N&&arguments[1]instanceof N){var x=arguments[0],I=arguments[1],R=I.x-x.x,J=I.y-x.y;if(R===0&&J===0)throw new h;return qt.octant(R,J)}},a(Tt.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(u){},isClosed:function(){},setData:function(u){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return Tt}}),a(vt.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(u){return this.pts[u]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(u){return u===this.pts.length-1?-1:qt.octant(this.getCoordinate(u),this.getCoordinate(u+1))},setData:function(u){this.data=u},getData:function(){return this.data},toString:function(){return $n.toLineString(new Fe(this.pts))},interfaces_:function(){return[Tt]},getClass:function(){return vt}}),a(tt.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return tt}}),a(_t.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[tt,E]},getClass:function(){return _t}}),a(Jt.prototype,{poll:function(){if(this.isEmpty())return null;var u=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),u},size:function(){return this._size},reorder:function(u){for(var c=null,d=this.items.get(u);2*u<=this._size&&(c=2*u,c!==this._size&&this.items.get(c+1).compareTo(this.items.get(c))<0&&c++,this.items.get(c).compareTo(d)<0);u=c)this.items.set(u,this.items.get(c));this.items.set(u,d)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return this._size===0},add:function(u){this.items.add(null),this._size+=1;var c=this._size;for(this.items.set(0,u);u.compareTo(this.items.get(Math.trunc(c/2)))<0;c/=2)this.items.set(c,this.items.get(Math.trunc(c/2)));this.items.set(c,u)},interfaces_:function(){return[]},getClass:function(){return Jt}}),a(Vt.prototype,{visitItem:function(u){},interfaces_:function(){return[]},getClass:function(){return Vt}}),a(At.prototype,{insert:function(u,c){},remove:function(u,c){},query:function(){},interfaces_:function(){return[]},getClass:function(){return At}}),a(It.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(u){M.isTrue(this.bounds===null),this.childBoundables.add(u)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return this.bounds===null&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[tt,E]},getClass:function(){return It}}),It.serialVersionUID=6493722185909574e3;var Qi={reverseOrder:function(){return{compare:function(u,c){return c.compareTo(u)}}},min:function(u){return Qi.sort(u),u.get(0)},sort:function(u,c){var d=u.toArray();c?gn.sort(d,c):gn.sort(d);for(var v=u.iterator(),x=0,I=d.length;I>x;x++)v.next(),v.set(d[x])},singletonList:function(u){var c=new U;return c.add(u),c}};a(nt.prototype,{expandToQueue:function(u,c){var d=nt.isComposite(this.boundable1),v=nt.isComposite(this.boundable2);if(d&&v)return nt.area(this.boundable1)>nt.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,u,c),null):(this.expand(this.boundable2,this.boundable1,u,c),null);if(d)return this.expand(this.boundable1,this.boundable2,u,c),null;if(v)return this.expand(this.boundable2,this.boundable1,u,c),null;throw new h},isLeaves:function(){return!(nt.isComposite(this.boundable1)||nt.isComposite(this.boundable2))},compareTo:function(u){var c=u;return this._distance<c._distance?-1:this._distance>c._distance?1:0},expand:function(u,c,d,v){for(var x=u.getChildBoundables(),I=x.iterator();I.hasNext();){var R=I.next(),J=new nt(R,c,this.itemDistance);J.getDistance()<v&&d.add(J)}},getBoundable:function(u){return u===0?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[p]},getClass:function(){return nt}}),nt.area=function(u){return u.getBounds().getArea()},nt.isComposite=function(u){return u instanceof It},a(gt.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(u){return u.get(u.size()-1)},size:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this.root));if(arguments.length===1){for(var c=arguments[0],d=0,v=c.getChildBoundables().iterator();v.hasNext();){var x=v.next();x instanceof It?d+=this.size(x):x instanceof _t&&(d+=1)}return d}},removeItem:function(u,c){for(var d=null,v=u.getChildBoundables().iterator();v.hasNext();){var x=v.next();x instanceof _t&&x.getItem()===c&&(d=x)}return d!==null?(u.getChildBoundables().remove(d),!0):!1},itemsTree:function(){if(arguments.length===0){this.build();var u=this.itemsTree(this.root);return u===null?new U:u}if(arguments.length===1){for(var c=arguments[0],d=new U,v=c.getChildBoundables().iterator();v.hasNext();){var x=v.next();if(x instanceof It){var I=this.itemsTree(x);I!==null&&d.add(I)}else x instanceof _t?d.add(x.getItem()):M.shouldNeverReachHere()}return d.size()<=0?null:d}},insert:function(u,c){M.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new _t(u,c))},boundablesAtLevel:function(){if(arguments.length===1){var u=arguments[0],c=new U;return this.boundablesAtLevel(u,this.root,c),c}if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];if(M.isTrue(d>-2),v.getLevel()===d)return x.add(v),null;for(var I=v.getChildBoundables().iterator();I.hasNext();){var R=I.next();R instanceof It?this.boundablesAtLevel(d,R,x):(M.isTrue(R instanceof _t),d===-1&&x.add(R))}return null}},query:function(){if(arguments.length===1){var u=arguments[0];this.build();var c=new U;return this.isEmpty()||this.getIntersectsOp().intersects(this.root.getBounds(),u)&&this.query(u,this.root,c),c}if(arguments.length===2){var d=arguments[0],v=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),d)&&this.query(d,this.root,v)}else if(arguments.length===3){if(T(arguments[2],Vt)&&arguments[0]instanceof Object&&arguments[1]instanceof It)for(var x=arguments[0],I=arguments[1],R=arguments[2],J=I.getChildBoundables(),ge=0;ge<J.size();ge++){var Ie=J.get(ge);this.getIntersectsOp().intersects(Ie.getBounds(),x)&&(Ie instanceof It?this.query(x,Ie,R):Ie instanceof _t?R.visitItem(Ie.getItem()):M.shouldNeverReachHere())}else if(T(arguments[2],k)&&arguments[0]instanceof Object&&arguments[1]instanceof It)for(var ze=arguments[0],Ve=arguments[1],st=arguments[2],J=Ve.getChildBoundables(),ge=0;ge<J.size();ge++){var Ie=J.get(ge);this.getIntersectsOp().intersects(Ie.getBounds(),ze)&&(Ie instanceof It?this.query(ze,Ie,st):Ie instanceof _t?st.add(Ie.getItem()):M.shouldNeverReachHere())}}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];return this.build(),this.getIntersectsOp().intersects(this.root.getBounds(),u)?this.remove(u,this.root,c):!1}if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2],I=this.removeItem(v,x);if(I)return!0;for(var R=null,J=v.getChildBoundables().iterator();J.hasNext();){var ge=J.next();if(this.getIntersectsOp().intersects(ge.getBounds(),d)&&ge instanceof It&&(I=this.remove(d,ge,x))){R=ge;break}}return R!==null&&R.getChildBoundables().isEmpty()&&v.getChildBoundables().remove(R),I}},createHigherLevels:function(u,c){M.isTrue(!u.isEmpty());var d=this.createParentBoundables(u,c+1);return d.size()===1?d.get(0):this.createHigherLevels(d,c+1)},depth:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(arguments.length===1){for(var u=arguments[0],c=0,d=u.getChildBoundables().iterator();d.hasNext();){var v=d.next();if(v instanceof It){var x=this.depth(v);x>c&&(c=x)}}return c+1}},createParentBoundables:function(u,c){M.isTrue(!u.isEmpty());var d=new U;d.add(this.createNode(c));var v=new U(u);Qi.sort(v,this.getComparator());for(var x=v.iterator();x.hasNext();){var I=x.next();this.lastNode(d).getChildBoundables().size()===this.getNodeCapacity()&&d.add(this.createNode(c)),this.lastNode(d).addChildBoundable(I)}return d},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[E]},getClass:function(){return gt}}),gt.compareDoubles=function(u,c){return u>c?1:c>u?-1:0},gt.IntersectsOp=kt,gt.serialVersionUID=-3886435814360241e3,gt.DEFAULT_NODE_CAPACITY=10,a(mn.prototype,{distance:function(u,c){},interfaces_:function(){return[]},getClass:function(){return mn}}),A(Xt,gt),a(Xt.prototype,{createParentBoundablesFromVerticalSlices:function(u,c){M.isTrue(u.length>0);for(var d=new U,v=0;v<u.length;v++)d.addAll(this.createParentBoundablesFromVerticalSlice(u[v],c));return d},createNode:function(u){return new fn(u)},size:function(){return arguments.length===0?gt.prototype.size.call(this):gt.prototype.size.apply(this,arguments)},insert:function(){if(arguments.length!==2)return gt.prototype.insert.apply(this,arguments);var u=arguments[0],c=arguments[1];return u.isNull()?null:void gt.prototype.insert.call(this,u,c)},getIntersectsOp:function(){return Xt.intersectsOp},verticalSlices:function(u,c){for(var d=Math.trunc(Math.ceil(u.size()/c)),v=new Array(c).fill(null),x=u.iterator(),I=0;c>I;I++){v[I]=new U;for(var R=0;x.hasNext()&&d>R;){var J=x.next();v[I].add(J),R++}}return v},query:function(){if(arguments.length===1){var u=arguments[0];return gt.prototype.query.call(this,u)}if(arguments.length===2){var c=arguments[0],d=arguments[1];gt.prototype.query.call(this,c,d)}else if(arguments.length===3){if(T(arguments[2],Vt)&&arguments[0]instanceof Object&&arguments[1]instanceof It){var v=arguments[0],x=arguments[1],I=arguments[2];gt.prototype.query.call(this,v,x,I)}else if(T(arguments[2],k)&&arguments[0]instanceof Object&&arguments[1]instanceof It){var R=arguments[0],J=arguments[1],ge=arguments[2];gt.prototype.query.call(this,R,J,ge)}}},getComparator:function(){return Xt.yComparator},createParentBoundablesFromVerticalSlice:function(u,c){return gt.prototype.createParentBoundables.call(this,u,c)},remove:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];return gt.prototype.remove.call(this,u,c)}return gt.prototype.remove.apply(this,arguments)},depth:function(){return arguments.length===0?gt.prototype.depth.call(this):gt.prototype.depth.apply(this,arguments)},createParentBoundables:function(u,c){M.isTrue(!u.isEmpty());var d=Math.trunc(Math.ceil(u.size()/this.getNodeCapacity())),v=new U(u);Qi.sort(v,Xt.xComparator);var x=this.verticalSlices(v,Math.trunc(Math.ceil(Math.sqrt(d))));return this.createParentBoundablesFromVerticalSlices(x,c)},nearestNeighbour:function(){if(arguments.length===1){if(T(arguments[0],mn)){var u=arguments[0],c=new nt(this.getRoot(),this.getRoot(),u);return this.nearestNeighbour(c)}if(arguments[0]instanceof nt){var d=arguments[0];return this.nearestNeighbour(d,g.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof Xt&&T(arguments[1],mn)){var v=arguments[0],x=arguments[1],c=new nt(this.getRoot(),v.getRoot(),x);return this.nearestNeighbour(c)}if(arguments[0]instanceof nt&&typeof arguments[1]=="number"){var I=arguments[0],R=arguments[1],J=R,ge=null,Ie=new Jt;for(Ie.add(I);!Ie.isEmpty()&&J>0;){var ze=Ie.poll(),Ve=ze.getDistance();if(Ve>=J)break;ze.isLeaves()?(J=Ve,ge=ze):ze.expandToQueue(Ie,J)}return[ge.getBoundable(0).getItem(),ge.getBoundable(1).getItem()]}}else if(arguments.length===3){var st=arguments[0],Rt=arguments[1],ln=arguments[2],vn=new _t(st,Rt),c=new nt(this.getRoot(),vn,ln);return this.nearestNeighbour(c)[0]}},interfaces_:function(){return[At,E]},getClass:function(){return Xt}}),Xt.centreX=function(u){return Xt.avg(u.getMinX(),u.getMaxX())},Xt.avg=function(u,c){return(u+c)/2},Xt.centreY=function(u){return Xt.avg(u.getMinY(),u.getMaxY())},A(fn,It),a(fn.prototype,{computeBounds:function(){for(var u=null,c=this.getChildBoundables().iterator();c.hasNext();){var d=c.next();u===null?u=new re(d.getBounds()):u.expandToInclude(d.getBounds())}return u},interfaces_:function(){return[]},getClass:function(){return fn}}),Xt.STRtreeNode=fn,Xt.serialVersionUID=0x39920f7d5f261e0,Xt.xComparator={interfaces_:function(){return[b]},compare:function(u,c){return gt.compareDoubles(Xt.centreX(u.getBounds()),Xt.centreX(c.getBounds()))}},Xt.yComparator={interfaces_:function(){return[b]},compare:function(u,c){return gt.compareDoubles(Xt.centreY(u.getBounds()),Xt.centreY(c.getBounds()))}},Xt.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(u,c){return u.intersects(c)}},Xt.DEFAULT_NODE_CAPACITY=10,a(hn.prototype,{interfaces_:function(){return[]},getClass:function(){return hn}}),hn.relativeSign=function(u,c){return c>u?-1:u>c?1:0},hn.compare=function(u,c,d){if(c.equals2D(d))return 0;var v=hn.relativeSign(c.x,d.x),x=hn.relativeSign(c.y,d.y);switch(u){case 0:return hn.compareValue(v,x);case 1:return hn.compareValue(x,v);case 2:return hn.compareValue(x,-v);case 3:return hn.compareValue(-v,x);case 4:return hn.compareValue(-v,-x);case 5:return hn.compareValue(-x,-v);case 6:return hn.compareValue(-x,v);case 7:return hn.compareValue(v,-x)}return M.shouldNeverReachHere("invalid octant value"),0},hn.compareValue=function(u,c){return 0>u?-1:u>0?1:0>c?-1:c>0?1:0},a(Sn.prototype,{getCoordinate:function(){return this.coord},print:function(u){u.print(this.coord),u.print(" seg # = "+this.segmentIndex)},compareTo:function(u){var c=u;return this.segmentIndex<c.segmentIndex?-1:this.segmentIndex>c.segmentIndex?1:this.coord.equals2D(c.coord)?0:hn.compare(this.segmentOctant,this.coord,c.coord)},isEndPoint:function(u){return this.segmentIndex!==0||this._isInterior?this.segmentIndex===u:!0},isInterior:function(){return this._isInterior},interfaces_:function(){return[p]},getClass:function(){return Sn}}),a(Bn.prototype,{getSplitCoordinates:function(){var u=new te;this.addEndpoints();for(var c=this.iterator(),d=c.next();c.hasNext();){var v=c.next();this.addEdgeCoordinates(d,v,u),d=v}return u.toCoordinateArray()},addCollapsedNodes:function(){var u=new U;this.findCollapsesFromInsertedNodes(u),this.findCollapsesFromExistingVertices(u);for(var c=u.iterator();c.hasNext();){var d=c.next().intValue();this.add(this.edge.getCoordinate(d),d)}},print:function(u){u.println("Intersections:");for(var c=this.iterator();c.hasNext();){var d=c.next();d.print(u)}},findCollapsesFromExistingVertices:function(u){for(var c=0;c<this.edge.size()-2;c++){var d=this.edge.getCoordinate(c),v=(this.edge.getCoordinate(c+1),this.edge.getCoordinate(c+2));d.equals2D(v)&&u.add(new le(c+1))}},addEdgeCoordinates:function(u,c,d){c.segmentIndex-u.segmentIndex+2;var v=this.edge.getCoordinate(c.segmentIndex),x=c.isInterior()||!c.coord.equals2D(v);d.add(new N(u.coord),!1);for(var I=u.segmentIndex+1;I<=c.segmentIndex;I++)d.add(this.edge.getCoordinate(I));x&&d.add(new N(c.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(u){this.addEndpoints(),this.addCollapsedNodes();for(var c=this.iterator(),d=c.next();c.hasNext();){var v=c.next(),x=this.createSplitEdge(d,v);u.add(x),d=v}},findCollapseIndex:function(u,c,d){if(!u.coord.equals2D(c.coord))return!1;var v=c.segmentIndex-u.segmentIndex;return c.isInterior()||v--,v===1?(d[0]=u.segmentIndex+1,!0):!1},findCollapsesFromInsertedNodes:function(u){for(var c=new Array(1).fill(null),d=this.iterator(),v=d.next();d.hasNext();){var x=d.next(),I=this.findCollapseIndex(v,x,c);I&&u.add(new le(c[0])),v=x}},getEdge:function(){return this.edge},addEndpoints:function(){var u=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(u),u)},createSplitEdge:function(u,c){var d=c.segmentIndex-u.segmentIndex+2,v=this.edge.getCoordinate(c.segmentIndex),x=c.isInterior()||!c.coord.equals2D(v);x||d--;var I=new Array(d).fill(null),R=0;I[R++]=new N(u.coord);for(var J=u.segmentIndex+1;J<=c.segmentIndex;J++)I[R++]=this.edge.getCoordinate(J);return x&&(I[R]=new N(c.coord)),new Ir(I,this.edge.getData())},add:function(u,c){var d=new Sn(this.edge,u,c,this.edge.getSegmentOctant(c)),v=this.nodeMap.get(d);return v!==null?(M.isTrue(v.coord.equals2D(u),"Found equal nodes with different coordinates"),v):(this.nodeMap.put(d,d),d)},checkSplitEdgesCorrectness:function(u){var c=this.edge.getCoordinates(),d=u.get(0),v=d.getCoordinate(0);if(!v.equals2D(c[0]))throw new C("bad split edge start point at "+v);var x=u.get(u.size()-1),I=x.getCoordinates(),R=I[I.length-1];if(!R.equals2D(c[c.length-1]))throw new C("bad split edge end point at "+R)},interfaces_:function(){return[]},getClass:function(){return Bn}}),a(Cr.prototype,{next:function(){return this.currNode===null?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):this.nextNode===null?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex>this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return this.nextNode!==null},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[ee]},getClass:function(){return Cr}}),a(dr.prototype,{addIntersection:function(u,c){},interfaces_:function(){return[Tt]},getClass:function(){return dr}}),a(Ir.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(u){return this.pts[u]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(u){return u===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(u),this.getCoordinate(u+1))},setData:function(u){this.data=u},safeOctant:function(u,c){return u.equals2D(c)?0:qt.octant(u,c)},getData:function(){return this.data},addIntersection:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];this.addIntersectionNode(u,c)}else if(arguments.length===4){var d=arguments[0],v=arguments[1],x=arguments[3],I=new N(d.getIntersection(x));this.addIntersection(I,v)}},toString:function(){return $n.toLineString(new Fe(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(u,c){var d=c,v=d+1;if(v<this.pts.length){var x=this.pts[v];u.equals2D(x)&&(d=v)}var I=this.nodeList.add(u,d);return I},addIntersections:function(u,c,d){for(var v=0;v<u.getIntersectionNum();v++)this.addIntersection(u,c,d,v)},interfaces_:function(){return[dr]},getClass:function(){return Ir}}),Ir.getNodedSubstrings=function(){if(arguments.length===1){var u=arguments[0],c=new U;return Ir.getNodedSubstrings(u,c),c}if(arguments.length===2)for(var d=arguments[0],v=arguments[1],x=d.iterator();x.hasNext();){var I=x.next();I.getNodeList().addSplitEdges(v)}},a(br.prototype,{overlap:function(){if(arguments.length!==2){if(arguments.length===4){var u=arguments[0],c=arguments[1],d=arguments[2],v=arguments[3];u.getLineSegment(c,this.overlapSeg1),d.getLineSegment(v,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}}},interfaces_:function(){return[]},getClass:function(){return br}}),a(Fi.prototype,{getLineSegment:function(u,c){c.p0=this.pts[u],c.p1=this.pts[u+1]},computeSelect:function(u,c,d,v){var x=this.pts[c],I=this.pts[d];if(v.tempEnv1.init(x,I),d-c===1)return v.select(this,c),null;if(!u.intersects(v.tempEnv1))return null;var R=Math.trunc((c+d)/2);R>c&&this.computeSelect(u,c,R,v),d>R&&this.computeSelect(u,R,d,v)},getCoordinates:function(){for(var u=new Array(this.end-this.start+1).fill(null),c=0,d=this.start;d<=this.end;d++)u[c++]=this.pts[d];return u},computeOverlaps:function(u,c){this.computeOverlapsInternal(this.start,this.end,u,u.start,u.end,c)},setId:function(u){this.id=u},select:function(u,c){this.computeSelect(u,this.start,this.end,c)},getEnvelope:function(){if(this.env===null){var u=this.pts[this.start],c=this.pts[this.end];this.env=new re(u,c)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(u,c,d,v,x,I){var R=this.pts[u],J=this.pts[c],ge=d.pts[v],Ie=d.pts[x];if(c-u===1&&x-v===1)return I.overlap(this,u,d,v),null;if(I.tempEnv1.init(R,J),I.tempEnv2.init(ge,Ie),!I.tempEnv1.intersects(I.tempEnv2))return null;var ze=Math.trunc((u+c)/2),Ve=Math.trunc((v+x)/2);ze>u&&(Ve>v&&this.computeOverlapsInternal(u,ze,d,v,Ve,I),x>Ve&&this.computeOverlapsInternal(u,ze,d,Ve,x,I)),c>ze&&(Ve>v&&this.computeOverlapsInternal(ze,c,d,v,Ve,I),x>Ve&&this.computeOverlapsInternal(ze,c,d,Ve,x,I))},interfaces_:function(){return[]},getClass:function(){return Fi}}),a(xn.prototype,{interfaces_:function(){return[]},getClass:function(){return xn}}),xn.isNorthern=function(u){return u===xn.NE||u===xn.NW},xn.isOpposite=function(u,c){if(u===c)return!1;var d=(u-c+4)%4;return d===2},xn.commonHalfPlane=function(u,c){if(u===c)return u;var d=(u-c+4)%4;if(d===2)return-1;var v=c>u?u:c,x=u>c?u:c;return v===0&&x===3?3:v},xn.isInHalfPlane=function(u,c){return c===xn.SE?u===xn.SE||u===xn.SW:u===c||u===c+1},xn.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],c=arguments[1];if(u===0&&c===0)throw new h;return u>=0?c>=0?xn.NE:xn.SE:c>=0?xn.NW:xn.SW}if(arguments[0]instanceof N&&arguments[1]instanceof N){var d=arguments[0],v=arguments[1];if(v.x===d.x&&v.y===d.y)throw new h;return v.x>=d.x?v.y>=d.y?xn.NE:xn.SE:v.y>=d.y?xn.NW:xn.SW}},xn.NE=0,xn.NW=1,xn.SW=2,xn.SE=3,a(Vr.prototype,{interfaces_:function(){return[]},getClass:function(){return Vr}}),Vr.getChainStartIndices=function(u){var c=0,d=new U;d.add(new le(c));do{var v=Vr.findChainEnd(u,c);d.add(new le(v)),c=v}while(c<u.length-1);var x=Vr.toIntArray(d);return x},Vr.findChainEnd=function(u,c){for(var d=c;d<u.length-1&&u[d].equals2D(u[d+1]);)d++;if(d>=u.length-1)return u.length-1;for(var v=xn.quadrant(u[d],u[d+1]),x=c+1;x<u.length;){if(!u[x-1].equals2D(u[x])){var I=xn.quadrant(u[x-1],u[x]);if(I!==v)break}x++}return x-1},Vr.getChains=function(){if(arguments.length===1){var u=arguments[0];return Vr.getChains(u,null)}if(arguments.length===2){for(var c=arguments[0],d=arguments[1],v=new U,x=Vr.getChainStartIndices(c),I=0;I<x.length-1;I++){var R=new Fi(c,x[I],x[I+1],d);v.add(R)}return v}},Vr.toIntArray=function(u){for(var c=new Array(u.size()).fill(null),d=0;d<c.length;d++)c[d]=u.get(d).intValue();return c},a(ea.prototype,{computeNodes:function(u){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return ea}}),a(Tn.prototype,{setSegmentIntersector:function(u){this.segInt=u},interfaces_:function(){return[ea]},getClass:function(){return Tn}}),A(yi,Tn),a(yi.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return Ir.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(u){for(var c=Vr.getChains(u.getCoordinates(),u),d=c.iterator();d.hasNext();){var v=d.next();v.setId(this.idCounter++),this.index.insert(v.getEnvelope(),v),this.monoChains.add(v)}},computeNodes:function(u){this.nodedSegStrings=u;for(var c=u.iterator();c.hasNext();)this.add(c.next());this.intersectChains()},intersectChains:function(){for(var u=new Gr(this.segInt),c=this.monoChains.iterator();c.hasNext();)for(var d=c.next(),v=this.index.query(d.getEnvelope()),x=v.iterator();x.hasNext();){var I=x.next();if(I.getId()>d.getId()&&(d.computeOverlaps(I,u),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return yi}}),A(Gr,br),a(Gr.prototype,{overlap:function(){if(arguments.length!==4)return br.prototype.overlap.apply(this,arguments);var u=arguments[0],c=arguments[1],d=arguments[2],v=arguments[3],x=u.getContext(),I=d.getContext();this.si.processIntersections(x,c,I,v)},interfaces_:function(){return[]},getClass:function(){return Gr}}),yi.SegmentOverlapAction=Gr,A(sr,C),a(sr.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return sr}}),sr.msgWithCoord=function(u,c){return c!==null?u+" [ "+c+" ]":u},a(ta.prototype,{processIntersections:function(u,c,d,v){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return ta}}),a(_i.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(u){this.isCheckEndSegmentsOnly=u},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(u){this.findAllIntersections=u},setKeepIntersections:function(u){this.keepIntersections=u},processIntersections:function(u,c,d,v){if(!this.findAllIntersections&&this.hasIntersection()||u===d&&c===v)return null;if(this.isCheckEndSegmentsOnly){var x=this.isEndSegment(u,c)||this.isEndSegment(d,v);if(!x)return null}var I=u.getCoordinates()[c],R=u.getCoordinates()[c+1],J=d.getCoordinates()[v],ge=d.getCoordinates()[v+1];this.li.computeIntersection(I,R,J,ge),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=I,this.intSegments[1]=R,this.intSegments[2]=J,this.intSegments[3]=ge,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(u,c){return c===0?!0:c>=u.size()-2},hasIntersection:function(){return this.interiorIntersection!==null},isDone:function(){return this.findAllIntersections?!1:this.interiorIntersection!==null},interfaces_:function(){return[ta]},getClass:function(){return _i}}),_i.createAllIntersectionsFinder=function(u){var c=new _i(u);return c.setFindAllIntersections(!0),c},_i.createAnyIntersectionFinder=function(u){return new _i(u)},_i.createIntersectionCounter=function(u){var c=new _i(u);return c.setFindAllIntersections(!0),c.setKeepIntersections(!1),c},a(Bi.prototype,{execute:function(){return this.segInt!==null?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(u){this.findAllIntersections=u},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new _i(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var u=new yi;return u.setSegmentIntersector(this.segInt),u.computeNodes(this.segStrings),this.segInt.hasIntersection()?(this._isValid=!1,null):void 0},checkValid:function(){if(this.execute(),!this._isValid)throw new sr(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var u=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+$n.toLineString(u[0],u[1])+" and "+$n.toLineString(u[2],u[3])},interfaces_:function(){return[]},getClass:function(){return Bi}}),Bi.computeIntersections=function(u){var c=new Bi(u);return c.setFindAllIntersections(!0),c.isValid(),c.getIntersections()},a(ki.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return ki}}),ki.toSegmentStrings=function(u){for(var c=new U,d=u.iterator();d.hasNext();){var v=d.next();c.add(new vt(v.getCoordinates(),v))}return c},ki.checkValid=function(u){var c=new ki(u);c.checkValid()},a($i.prototype,{map:function(u){for(var c=new U,d=0;d<u.getNumGeometries();d++){var v=this.mapOp.map(u.getGeometryN(d));v.isEmpty()||c.add(v)}return u.getFactory().createGeometryCollection(Ut.toGeometryArray(c))},interfaces_:function(){return[]},getClass:function(){return $i}}),$i.map=function(u,c){var d=new $i(c);return d.map(u)},a(ct.prototype,{interfaces_:function(){return[]},getClass:function(){return ct}}),ct.opposite=function(u){return u===ct.LEFT?ct.RIGHT:u===ct.RIGHT?ct.LEFT:u},ct.ON=0,ct.LEFT=1,ct.RIGHT=2,a(Tr.prototype,{setAllLocations:function(u){for(var c=0;c<this.location.length;c++)this.location[c]=u},isNull:function(){for(var u=0;u<this.location.length;u++)if(this.location[u]!==S.NONE)return!1;return!0},setAllLocationsIfNull:function(u){for(var c=0;c<this.location.length;c++)this.location[c]===S.NONE&&(this.location[c]=u)},isLine:function(){return this.location.length===1},merge:function(u){if(u.location.length>this.location.length){var c=new Array(3).fill(null);c[ct.ON]=this.location[ct.ON],c[ct.LEFT]=S.NONE,c[ct.RIGHT]=S.NONE,this.location=c}for(var d=0;d<this.location.length;d++)this.location[d]===S.NONE&&d<u.location.length&&(this.location[d]=u.location[d])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var u=this.location[ct.LEFT];this.location[ct.LEFT]=this.location[ct.RIGHT],this.location[ct.RIGHT]=u},toString:function(){var u=new Q;return this.location.length>1&&u.append(S.toLocationSymbol(this.location[ct.LEFT])),u.append(S.toLocationSymbol(this.location[ct.ON])),this.location.length>1&&u.append(S.toLocationSymbol(this.location[ct.RIGHT])),u.toString()},setLocations:function(u,c,d){this.location[ct.ON]=u,this.location[ct.LEFT]=c,this.location[ct.RIGHT]=d},get:function(u){return u<this.location.length?this.location[u]:S.NONE},isArea:function(){return this.location.length>1},isAnyNull:function(){for(var u=0;u<this.location.length;u++)if(this.location[u]===S.NONE)return!0;return!1},setLocation:function(){if(arguments.length===1){var u=arguments[0];this.setLocation(ct.ON,u)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.location[c]=d}},init:function(u){this.location=new Array(u).fill(null),this.setAllLocations(S.NONE)},isEqualOnSide:function(u,c){return this.location[c]===u.location[c]},allPositionsEqual:function(u){for(var c=0;c<this.location.length;c++)if(this.location[c]!==u)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return Tr}}),a(Jn.prototype,{getGeometryCount:function(){var u=0;return this.elt[0].isNull()||u++,this.elt[1].isNull()||u++,u},setAllLocations:function(u,c){this.elt[u].setAllLocations(c)},isNull:function(u){return this.elt[u].isNull()},setAllLocationsIfNull:function(){if(arguments.length===1){var u=arguments[0];this.setAllLocationsIfNull(0,u),this.setAllLocationsIfNull(1,u)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.elt[c].setAllLocationsIfNull(d)}},isLine:function(u){return this.elt[u].isLine()},merge:function(u){for(var c=0;2>c;c++)this.elt[c]===null&&u.elt[c]!==null?this.elt[c]=new Tr(u.elt[c]):this.elt[c].merge(u.elt[c])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(arguments.length===1){var u=arguments[0];return this.elt[u].get(ct.ON)}if(arguments.length===2){var c=arguments[0],d=arguments[1];return this.elt[c].get(d)}},toString:function(){var u=new Q;return this.elt[0]!==null&&(u.append("A:"),u.append(this.elt[0].toString())),this.elt[1]!==null&&(u.append(" B:"),u.append(this.elt[1].toString())),u.toString()},isArea:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var u=arguments[0];return this.elt[u].isArea()}},isAnyNull:function(u){return this.elt[u].isAnyNull()},setLocation:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];this.elt[u].setLocation(ct.ON,c)}else if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];this.elt[d].setLocation(v,x)}},isEqualOnSide:function(u,c){return this.elt[0].isEqualOnSide(u.elt[0],c)&&this.elt[1].isEqualOnSide(u.elt[1],c)},allPositionsEqual:function(u,c){return this.elt[u].allPositionsEqual(c)},toLine:function(u){this.elt[u].isArea()&&(this.elt[u]=new Tr(this.elt[u].location[0]))},interfaces_:function(){return[]},getClass:function(){return Jn}}),Jn.toLineLabel=function(u){for(var c=new Jn(S.NONE),d=0;2>d;d++)c.setLocation(d,u.getLocation(d));return c},a(na.prototype,{computeRing:function(){if(this.ring!==null)return null;for(var u=new Array(this.pts.size()).fill(null),c=0;c<this.pts.size();c++)u[c]=this.pts.get(c);this.ring=this.geometryFactory.createLinearRing(u),this._isHole=rt.isCCW(this.ring.getCoordinates())},isIsolated:function(){return this.label.getGeometryCount()===1},computePoints:function(u){this.startDe=u;var c=u,d=!0;do{if(c===null)throw new sr("Found null DirectedEdge");if(c.getEdgeRing()===this)throw new sr("Directed Edge visited twice during ring-building at "+c.getCoordinate());this.edges.add(c);var v=c.getLabel();M.isTrue(v.isArea()),this.mergeLabel(v),this.addPoints(c.getEdge(),c.isForward(),d),d=!1,this.setEdgeRing(c,this),c=this.getNext(c)}while(c!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(u){return this.pts.get(u)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var u=this.startDe;do{var c=u.getNode(),d=c.getEdges().getOutgoingDegree(this);d>this.maxNodeDegree&&(this.maxNodeDegree=d),u=this.getNext(u)}while(u!==this.startDe);this.maxNodeDegree*=2},addPoints:function(u,c,d){var v=u.getCoordinates();if(c){var x=1;d&&(x=0);for(var I=x;I<v.length;I++)this.pts.add(v[I])}else{var x=v.length-2;d&&(x=v.length-1);for(var I=x;I>=0;I--)this.pts.add(v[I])}},isHole:function(){return this._isHole},setInResult:function(){var u=this.startDe;do u.getEdge().setInResult(!0),u=u.getNext();while(u!==this.startDe)},containsPoint:function(u){var c=this.getLinearRing(),d=c.getEnvelopeInternal();if(!d.contains(u)||!rt.isPointInRing(u,c.getCoordinates()))return!1;for(var v=this.holes.iterator();v.hasNext();){var x=v.next();if(x.containsPoint(u))return!1}return!0},addHole:function(u){this.holes.add(u)},isShell:function(){return this.shell===null},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(arguments.length===1){var u=arguments[0];this.mergeLabel(u,0),this.mergeLabel(u,1)}else if(arguments.length===2){var c=arguments[0],d=arguments[1],v=c.getLocation(d,ct.RIGHT);if(v===S.NONE)return null;if(this.label.getLocation(d)===S.NONE)return this.label.setLocation(d,v),null}},setShell:function(u){this.shell=u,u!==null&&u.addHole(this)},toPolygon:function(u){for(var c=new Array(this.holes.size()).fill(null),d=0;d<this.holes.size();d++)c[d]=this.holes.get(d).getLinearRing();var v=u.createPolygon(this.getLinearRing(),c);return v},interfaces_:function(){return[]},getClass:function(){return na}}),A(Yr,na),a(Yr.prototype,{setEdgeRing:function(u,c){u.setMinEdgeRing(c)},getNext:function(u){return u.getNextMin()},interfaces_:function(){return[]},getClass:function(){return Yr}}),A(ga,na),a(ga.prototype,{buildMinimalRings:function(){var u=new U,c=this.startDe;do{if(c.getMinEdgeRing()===null){var d=new Yr(c,this.geometryFactory);u.add(d)}c=c.getNext()}while(c!==this.startDe);return u},setEdgeRing:function(u,c){u.setEdgeRing(c)},linkDirectedEdgesForMinimalEdgeRings:function(){var u=this.startDe;do{var c=u.getNode();c.getEdges().linkMinimalDirectedEdges(this),u=u.getNext()}while(u!==this.startDe)},getNext:function(u){return u.getNext()},interfaces_:function(){return[]},getClass:function(){return ga}}),a(bi.prototype,{setVisited:function(u){this._isVisited=u},setInResult:function(u){this._isInResult=u},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(u){this.label=u},getLabel:function(){return this.label},setCovered:function(u){this._isCovered=u,this._isCoveredSet=!0},updateIM:function(u){M.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(u)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return bi}}),A(xr,bi),a(xr.prototype,{isIncidentEdgeInResult:function(){for(var u=this.getEdges().getEdges().iterator();u.hasNext();){var c=u.next();if(c.getEdge().isInResult())return!0}return!1},isIsolated:function(){return this.label.getGeometryCount()===1},getCoordinate:function(){return this.coord},print:function(u){u.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(u){},computeMergedLocation:function(u,c){var d=S.NONE;if(d=this.label.getLocation(c),!u.isNull(c)){var v=u.getLocation(c);d!==S.BOUNDARY&&(d=v)}return d},setLabel:function(){if(arguments.length!==2)return bi.prototype.setLabel.apply(this,arguments);var u=arguments[0],c=arguments[1];this.label===null?this.label=new Jn(u,c):this.label.setLocation(u,c)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof xr){var u=arguments[0];this.mergeLabel(u.label)}else if(arguments[0]instanceof Jn)for(var c=arguments[0],d=0;2>d;d++){var v=this.computeMergedLocation(c,d),x=this.label.getLocation(d);x===S.NONE&&this.label.setLocation(d,v)}},add:function(u){this.edges.insert(u),u.setNode(this)},setLabelBoundary:function(u){if(this.label===null)return null;var c=S.NONE;this.label!==null&&(c=this.label.getLocation(u));var d=null;switch(c){case S.BOUNDARY:d=S.INTERIOR;break;case S.INTERIOR:d=S.BOUNDARY;break;default:d=S.BOUNDARY}this.label.setLocation(u,d)},interfaces_:function(){return[]},getClass:function(){return xr}}),a(Gi.prototype,{find:function(u){return this.nodeMap.get(u)},addNode:function(){if(arguments[0]instanceof N){var u=arguments[0],c=this.nodeMap.get(u);return c===null&&(c=this.nodeFact.createNode(u),this.nodeMap.put(u,c)),c}if(arguments[0]instanceof xr){var d=arguments[0],c=this.nodeMap.get(d.getCoordinate());return c===null?(this.nodeMap.put(d.getCoordinate(),d),d):(c.mergeLabel(d),c)}},print:function(u){for(var c=this.iterator();c.hasNext();){var d=c.next();d.print(u)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(u){for(var c=new U,d=this.iterator();d.hasNext();){var v=d.next();v.getLabel().getLocation(u)===S.BOUNDARY&&c.add(v)}return c},add:function(u){var c=u.getCoordinate(),d=this.addNode(c);d.add(u)},interfaces_:function(){return[]},getClass:function(){return Gi}}),a(ei.prototype,{compareDirection:function(u){return this.dx===u.dx&&this.dy===u.dy?0:this.quadrant>u.quadrant?1:this.quadrant<u.quadrant?-1:rt.computeOrientation(u.p0,u.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(u){this.node=u},print:function(u){var c=Math.atan2(this.dy,this.dx),d=this.getClass().getName(),v=d.lastIndexOf("."),x=d.substring(v+1);u.print("  "+x+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+c+"   "+this.label)},compareTo:function(u){var c=u;return this.compareDirection(c)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var u=Math.atan2(this.dy,this.dx),c=this.getClass().getName(),d=c.lastIndexOf("."),v=c.substring(d+1);return"  "+v+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+u+"   "+this.label},computeLabel:function(u){},init:function(u,c){this.p0=u,this.p1=c,this.dx=c.x-u.x,this.dy=c.y-u.y,this.quadrant=xn.quadrant(this.dx,this.dy),M.isTrue(!(this.dx===0&&this.dy===0),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[p]},getClass:function(){return ei}}),A(zi,ei),a(zi.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(u){return this.depth[u]},setVisited:function(u){this._isVisited=u},computeDirectedLabel:function(){this.label=new Jn(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(u,c){if(this.depth[u]!==-999&&this.depth[u]!==c)throw new sr("assigned depths do not match",this.getCoordinate());this.depth[u]=c},isInteriorAreaEdge:function(){for(var c=!0,d=0;2>d;d++)this.label.isArea(d)&&this.label.getLocation(d,ct.LEFT)===S.INTERIOR&&this.label.getLocation(d,ct.RIGHT)===S.INTERIOR||(c=!1);return c},setNextMin:function(u){this.nextMin=u},print:function(u){ei.prototype.print.call(this,u),u.print(" "+this.depth[ct.LEFT]+"/"+this.depth[ct.RIGHT]),u.print(" ("+this.getDepthDelta()+")"),this._isInResult&&u.print(" inResult")},setMinEdgeRing:function(u){this.minEdgeRing=u},isLineEdge:function(){var u=this.label.isLine(0)||this.label.isLine(1),c=!this.label.isArea(0)||this.label.allPositionsEqual(0,S.EXTERIOR),d=!this.label.isArea(1)||this.label.allPositionsEqual(1,S.EXTERIOR);return u&&c&&d},setEdgeRing:function(u){this.edgeRing=u},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var u=this.edge.getDepthDelta();return this._isForward||(u=-u),u},setInResult:function(u){this._isInResult=u},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(u){this.print(u),u.print(" "),this._isForward?this.edge.print(u):this.edge.printReverse(u)},setSym:function(u){this.sym=u},setVisitedEdge:function(u){this.setVisited(u),this.sym.setVisited(u)},setEdgeDepths:function(u,c){var d=this.getEdge().getDepthDelta();this._isForward||(d=-d);var v=1;u===ct.LEFT&&(v=-1);var x=ct.opposite(u),I=d*v,R=c+I;this.setDepth(u,c),this.setDepth(x,R)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(u){this.next=u},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return zi}}),zi.depthFactor=function(u,c){return u===S.EXTERIOR&&c===S.INTERIOR?1:u===S.INTERIOR&&c===S.EXTERIOR?-1:0},a(Hi.prototype,{createNode:function(u){return new xr(u,null)},interfaces_:function(){return[]},getClass:function(){return Hi}}),a(Rr.prototype,{printEdges:function(u){u.println("Edges:");for(var c=0;c<this.edges.size();c++){u.println("edge "+c+":");var d=this.edges.get(c);d.print(u),d.eiList.print(u)}},find:function(u){return this.nodes.find(u)},addNode:function(){if(arguments[0]instanceof xr){var u=arguments[0];return this.nodes.addNode(u)}if(arguments[0]instanceof N){var c=arguments[0];return this.nodes.addNode(c)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var u=this.nodes.iterator();u.hasNext();){var c=u.next();c.getEdges().linkResultDirectedEdges()}},debugPrintln:function(u){oe.out.println(u)},isBoundaryNode:function(u,c){var d=this.nodes.find(c);if(d===null)return!1;var v=d.getLabel();return v!==null&&v.getLocation(u)===S.BOUNDARY},linkAllDirectedEdges:function(){for(var u=this.nodes.iterator();u.hasNext();){var c=u.next();c.getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(u,c,d,v){return u.equals(d)?rt.computeOrientation(u,c,v)===rt.COLLINEAR&&xn.quadrant(u,c)===xn.quadrant(d,v):!1},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(u){oe.out.print(u)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(u,c){for(var d=0;d<this.edges.size();d++){var v=this.edges.get(d),x=v.getCoordinates();if(this.matchInSameDirection(u,c,x[0],x[1])||this.matchInSameDirection(u,c,x[x.length-1],x[x.length-2]))return v}return null},insertEdge:function(u){this.edges.add(u)},findEdgeEnd:function(u){for(var c=this.getEdgeEnds().iterator();c.hasNext();){var d=c.next();if(d.getEdge()===u)return d}return null},addEdges:function(u){for(var c=u.iterator();c.hasNext();){var d=c.next();this.edges.add(d);var v=new zi(d,!0),x=new zi(d,!1);v.setSym(x),x.setSym(v),this.add(v),this.add(x)}},add:function(u){this.nodes.add(u),this.edgeEndList.add(u)},getNodes:function(){return this.nodes.values()},findEdge:function(u,c){for(var d=0;d<this.edges.size();d++){var v=this.edges.get(d),x=v.getCoordinates();if(u.equals(x[0])&&c.equals(x[1]))return v}return null},interfaces_:function(){return[]},getClass:function(){return Rr}}),Rr.linkResultDirectedEdges=function(u){for(var c=u.iterator();c.hasNext();){var d=c.next();d.getEdges().linkResultDirectedEdges()}},a(Ea.prototype,{sortShellsAndHoles:function(u,c,d){for(var v=u.iterator();v.hasNext();){var x=v.next();x.isHole()?d.add(x):c.add(x)}},computePolygons:function(u){for(var c=new U,d=u.iterator();d.hasNext();){var v=d.next(),x=v.toPolygon(this.geometryFactory);c.add(x)}return c},placeFreeHoles:function(u,c){for(var d=c.iterator();d.hasNext();){var v=d.next();if(v.getShell()===null){var x=this.findEdgeRingContaining(v,u);if(x===null)throw new sr("unable to assign hole to a shell",v.getCoordinate(0));v.setShell(x)}}},buildMinimalEdgeRings:function(u,c,d){for(var v=new U,x=u.iterator();x.hasNext();){var I=x.next();if(I.getMaxNodeDegree()>2){I.linkDirectedEdgesForMinimalEdgeRings();var R=I.buildMinimalRings(),J=this.findShell(R);J!==null?(this.placePolygonHoles(J,R),c.add(J)):d.addAll(R)}else v.add(I)}return v},containsPoint:function(u){for(var c=this.shellList.iterator();c.hasNext();){var d=c.next();if(d.containsPoint(u))return!0}return!1},buildMaximalEdgeRings:function(u){for(var c=new U,d=u.iterator();d.hasNext();){var v=d.next();if(v.isInResult()&&v.getLabel().isArea()&&v.getEdgeRing()===null){var x=new ga(v,this.geometryFactory);c.add(x),x.setInResult()}}return c},placePolygonHoles:function(u,c){for(var d=c.iterator();d.hasNext();){var v=d.next();v.isHole()&&v.setShell(u)}},getPolygons:function(){var u=this.computePolygons(this.shellList);return u},findEdgeRingContaining:function(u,c){for(var d=u.getLinearRing(),v=d.getEnvelopeInternal(),x=d.getCoordinateN(0),I=null,R=null,J=c.iterator();J.hasNext();){var ge=J.next(),Ie=ge.getLinearRing(),ze=Ie.getEnvelopeInternal();I!==null&&(R=I.getLinearRing().getEnvelopeInternal());var Ve=!1;ze.contains(v)&&rt.isPointInRing(x,Ie.getCoordinates())&&(Ve=!0),Ve&&(I===null||R.contains(ze))&&(I=ge)}return I},findShell:function(u){for(var c=0,d=null,v=u.iterator();v.hasNext();){var x=v.next();x.isHole()||(d=x,c++)}return M.isTrue(1>=c,"found two shells in MinimalEdgeRing list"),d},add:function(){if(arguments.length===1){var u=arguments[0];this.add(u.getEdgeEnds(),u.getNodes())}else if(arguments.length===2){var c=arguments[0],d=arguments[1];Rr.linkResultDirectedEdges(d);var v=this.buildMaximalEdgeRings(c),x=new U,I=this.buildMinimalEdgeRings(v,this.shellList,x);this.sortShellsAndHoles(I,this.shellList,x),this.placeFreeHoles(this.shellList,x)}},interfaces_:function(){return[]},getClass:function(){return Ea}}),a(xi.prototype,{collectLines:function(u){for(var c=this.op.getGraph().getEdgeEnds().iterator();c.hasNext();){var d=c.next();this.collectLineEdge(d,u,this.lineEdgesList),this.collectBoundaryTouchEdge(d,u,this.lineEdgesList)}},labelIsolatedLine:function(u,c){var d=this.ptLocator.locate(u.getCoordinate(),this.op.getArgGeometry(c));u.getLabel().setLocation(c,d)},build:function(u){return this.findCoveredLineEdges(),this.collectLines(u),this.buildLines(u),this.resultLineList},collectLineEdge:function(u,c,d){var v=u.getLabel(),x=u.getEdge();u.isLineEdge()&&(u.isVisited()||!Ot.isResultOfOp(v,c)||x.isCovered()||(d.add(x),u.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var u=this.op.getGraph().getNodes().iterator();u.hasNext();){var c=u.next();c.getEdges().findCoveredLineEdges()}for(var d=this.op.getGraph().getEdgeEnds().iterator();d.hasNext();){var v=d.next(),x=v.getEdge();if(v.isLineEdge()&&!x.isCoveredSet()){var I=this.op.isCoveredByA(v.getCoordinate());x.setCovered(I)}}},labelIsolatedLines:function(u){for(var c=u.iterator();c.hasNext();){var d=c.next(),v=d.getLabel();d.isIsolated()&&(v.isNull(0)?this.labelIsolatedLine(d,0):this.labelIsolatedLine(d,1))}},buildLines:function(u){for(var c=this.lineEdgesList.iterator();c.hasNext();){var d=c.next(),v=(d.getLabel(),this.geometryFactory.createLineString(d.getCoordinates()));this.resultLineList.add(v),d.setInResult(!0)}},collectBoundaryTouchEdge:function(u,c,d){var v=u.getLabel();return u.isLineEdge()||u.isVisited()||u.isInteriorAreaEdge()||u.getEdge().isInResult()?null:(M.isTrue(!(u.isInResult()||u.getSym().isInResult())||!u.getEdge().isInResult()),void(Ot.isResultOfOp(v,c)&&c===Ot.INTERSECTION&&(d.add(u.getEdge()),u.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return xi}}),a(pa.prototype,{filterCoveredNodeToPoint:function(u){var c=u.getCoordinate();if(!this.op.isCoveredByLA(c)){var d=this.geometryFactory.createPoint(c);this.resultPointList.add(d)}},extractNonCoveredResultNodes:function(u){for(var c=this.op.getGraph().getNodes().iterator();c.hasNext();){var d=c.next();if(!(d.isInResult()||d.isIncidentEdgeInResult()||d.getEdges().getDegree()!==0&&u!==Ot.INTERSECTION)){var v=d.getLabel();Ot.isResultOfOp(v,u)&&this.filterCoveredNodeToPoint(d)}}},build:function(u){return this.extractNonCoveredResultNodes(u),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return pa}}),a(Fr.prototype,{locate:function(u){},interfaces_:function(){return[]},getClass:function(){return Fr}}),a(gr.prototype,{locate:function(u){return gr.locate(u,this.geom)},interfaces_:function(){return[Fr]},getClass:function(){return gr}}),gr.isPointInRing=function(u,c){return c.getEnvelopeInternal().intersects(u)?rt.isPointInRing(u,c.getCoordinates()):!1},gr.containsPointInPolygon=function(u,c){if(c.isEmpty())return!1;var d=c.getExteriorRing();if(!gr.isPointInRing(u,d))return!1;for(var v=0;v<c.getNumInteriorRing();v++){var x=c.getInteriorRingN(v);if(gr.isPointInRing(u,x))return!1}return!0},gr.containsPoint=function(u,c){if(c instanceof Kt)return gr.containsPointInPolygon(u,c);if(c instanceof Yt)for(var d=new ot(c);d.hasNext();){var v=d.next();if(v!==c&&gr.containsPoint(u,v))return!0}return!1},gr.locate=function(u,c){return c.isEmpty()?S.EXTERIOR:gr.containsPoint(u,c)?S.INTERIOR:S.EXTERIOR},a(Ui.prototype,{getNextCW:function(u){this.getEdges();var c=this.edgeList.indexOf(u),d=c-1;return c===0&&(d=this.edgeList.size()-1),this.edgeList.get(d)},propagateSideLabels:function(u){for(var c=S.NONE,d=this.iterator();d.hasNext();){var v=d.next(),x=v.getLabel();x.isArea(u)&&x.getLocation(u,ct.LEFT)!==S.NONE&&(c=x.getLocation(u,ct.LEFT))}if(c===S.NONE)return null;for(var I=c,d=this.iterator();d.hasNext();){var v=d.next(),x=v.getLabel();if(x.getLocation(u,ct.ON)===S.NONE&&x.setLocation(u,ct.ON,I),x.isArea(u)){var R=x.getLocation(u,ct.LEFT),J=x.getLocation(u,ct.RIGHT);if(J!==S.NONE){if(J!==I)throw new sr("side location conflict",v.getCoordinate());R===S.NONE&&M.shouldNeverReachHere("found single null side (at "+v.getCoordinate()+")"),I=R}else M.isTrue(x.getLocation(u,ct.LEFT)===S.NONE,"found single null side"),x.setLocation(u,ct.RIGHT,I),x.setLocation(u,ct.LEFT,I)}}},getCoordinate:function(){var u=this.iterator();if(!u.hasNext())return null;var c=u.next();return c.getCoordinate()},print:function(u){oe.out.println("EdgeEndStar:   "+this.getCoordinate());for(var c=this.iterator();c.hasNext();){var d=c.next();d.print(u)}},isAreaLabelsConsistent:function(u){return this.computeEdgeEndLabels(u.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(u){var c=this.getEdges();if(c.size()<=0)return!0;var d=c.size()-1,v=c.get(d).getLabel(),x=v.getLocation(u,ct.LEFT);M.isTrue(x!==S.NONE,"Found unlabelled area edge");for(var I=x,R=this.iterator();R.hasNext();){var J=R.next(),ge=J.getLabel();M.isTrue(ge.isArea(u),"Found non-area edge");var Ie=ge.getLocation(u,ct.LEFT),ze=ge.getLocation(u,ct.RIGHT);if(Ie===ze||ze!==I)return!1;I=Ie}return!0},findIndex:function(u){this.iterator();for(var c=0;c<this.edgeList.size();c++){var d=this.edgeList.get(c);if(d===u)return c}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return this.edgeList===null&&(this.edgeList=new U(this.edgeMap.values())),this.edgeList},getLocation:function(u,c,d){return this.ptInAreaLocation[u]===S.NONE&&(this.ptInAreaLocation[u]=gr.locate(c,d[u].getGeometry())),this.ptInAreaLocation[u]},toString:function(){var u=new Q;u.append("EdgeEndStar:   "+this.getCoordinate()),u.append(`
`);for(var c=this.iterator();c.hasNext();){var d=c.next();u.append(d),u.append(`
`)}return u.toString()},computeEdgeEndLabels:function(u){for(var c=this.iterator();c.hasNext();){var d=c.next();d.computeLabel(u)}},computeLabelling:function(u){this.computeEdgeEndLabels(u[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var c=[!1,!1],d=this.iterator();d.hasNext();)for(var v=d.next(),x=v.getLabel(),I=0;2>I;I++)x.isLine(I)&&x.getLocation(I)===S.BOUNDARY&&(c[I]=!0);for(var d=this.iterator();d.hasNext();)for(var v=d.next(),x=v.getLabel(),I=0;2>I;I++)if(x.isAnyNull(I)){var R=S.NONE;if(c[I])R=S.EXTERIOR;else{var J=v.getCoordinate();R=this.getLocation(I,J,u)}x.setAllLocationsIfNull(I,R)}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(u,c){this.edgeMap.put(u,c),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return Ui}}),A(Ni,Ui),a(Ni.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var u=null,c=null,d=this.SCANNING_FOR_INCOMING,v=0;v<this.resultAreaEdgeList.size();v++){var x=this.resultAreaEdgeList.get(v),I=x.getSym();if(x.getLabel().isArea())switch(u===null&&x.isInResult()&&(u=x),d){case this.SCANNING_FOR_INCOMING:if(!I.isInResult())continue;c=I,d=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!x.isInResult())continue;c.setNext(x),d=this.SCANNING_FOR_INCOMING}}if(d===this.LINKING_TO_OUTGOING){if(u===null)throw new sr("no outgoing dirEdge found",this.getCoordinate());M.isTrue(u.isInResult(),"unable to link last incoming dirEdge"),c.setNext(u)}},insert:function(u){var c=u;this.insertEdgeEnd(c,c)},getRightmostEdge:function(){var u=this.getEdges(),c=u.size();if(1>c)return null;var d=u.get(0);if(c===1)return d;var v=u.get(c-1),x=d.getQuadrant(),I=v.getQuadrant();return xn.isNorthern(x)&&xn.isNorthern(I)?d:!xn.isNorthern(x)&&!xn.isNorthern(I)?v:d.getDy()!==0?d:v.getDy()!==0?v:(M.shouldNeverReachHere("found two horizontal edges incident on node"),null)},print:function(u){oe.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var c=this.iterator();c.hasNext();){var d=c.next();u.print("out "),d.print(u),u.println(),u.print("in "),d.getSym().print(u),u.println()}},getResultAreaEdges:function(){if(this.resultAreaEdgeList!==null)return this.resultAreaEdgeList;this.resultAreaEdgeList=new U;for(var u=this.iterator();u.hasNext();){var c=u.next();(c.isInResult()||c.getSym().isInResult())&&this.resultAreaEdgeList.add(c)}return this.resultAreaEdgeList},updateLabelling:function(u){for(var c=this.iterator();c.hasNext();){var d=c.next(),v=d.getLabel();v.setAllLocationsIfNull(0,u.getLocation(0)),v.setAllLocationsIfNull(1,u.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var u=null,c=null,d=this.edgeList.size()-1;d>=0;d--){var v=this.edgeList.get(d),x=v.getSym();c===null&&(c=x),u!==null&&x.setNext(u),u=v}c.setNext(u)},computeDepths:function(){if(arguments.length===1){var u=arguments[0],c=this.findIndex(u),d=(u.getLabel(),u.getDepth(ct.LEFT)),v=u.getDepth(ct.RIGHT),x=this.computeDepths(c+1,this.edgeList.size(),d),I=this.computeDepths(0,c,x);if(I!==v)throw new sr("depth mismatch at "+u.getCoordinate())}else if(arguments.length===3){for(var R=arguments[0],J=arguments[1],ge=arguments[2],Ie=ge,ze=R;J>ze;ze++){var Ve=this.edgeList.get(ze);Ve.getLabel(),Ve.setEdgeDepths(ct.RIGHT,Ie),Ie=Ve.getDepth(ct.LEFT)}return Ie}},mergeSymLabels:function(){for(var u=this.iterator();u.hasNext();){var c=u.next(),d=c.getLabel();d.merge(c.getSym().getLabel())}},linkMinimalDirectedEdges:function(u){for(var c=null,d=null,v=this.SCANNING_FOR_INCOMING,x=this.resultAreaEdgeList.size()-1;x>=0;x--){var I=this.resultAreaEdgeList.get(x),R=I.getSym();switch(c===null&&I.getEdgeRing()===u&&(c=I),v){case this.SCANNING_FOR_INCOMING:if(R.getEdgeRing()!==u)continue;d=R,v=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(I.getEdgeRing()!==u)continue;d.setNextMin(I),v=this.SCANNING_FOR_INCOMING}}v===this.LINKING_TO_OUTGOING&&(M.isTrue(c!==null,"found null for first outgoing dirEdge"),M.isTrue(c.getEdgeRing()===u,"unable to link last incoming dirEdge"),d.setNextMin(c))},getOutgoingDegree:function(){if(arguments.length===0){for(var u=0,c=this.iterator();c.hasNext();){var d=c.next();d.isInResult()&&u++}return u}if(arguments.length===1){for(var v=arguments[0],u=0,c=this.iterator();c.hasNext();){var d=c.next();d.getEdgeRing()===v&&u++}return u}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var u=S.NONE,c=this.iterator();c.hasNext();){var d=c.next(),v=d.getSym();if(!d.isLineEdge()){if(d.isInResult()){u=S.INTERIOR;break}if(v.isInResult()){u=S.EXTERIOR;break}}}if(u===S.NONE)return null;for(var x=u,c=this.iterator();c.hasNext();){var d=c.next(),v=d.getSym();d.isLineEdge()?d.getEdge().setCovered(x===S.INTERIOR):(d.isInResult()&&(x=S.EXTERIOR),v.isInResult()&&(x=S.INTERIOR))}},computeLabelling:function(u){Ui.prototype.computeLabelling.call(this,u),this.label=new Jn(S.NONE);for(var c=this.iterator();c.hasNext();)for(var d=c.next(),v=d.getEdge(),x=v.getLabel(),I=0;2>I;I++){var R=x.getLocation(I);R!==S.INTERIOR&&R!==S.BOUNDARY||this.label.setLocation(I,S.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Ni}}),A(Pr,Hi),a(Pr.prototype,{createNode:function(u){return new xr(u,new Ni)},interfaces_:function(){return[]},getClass:function(){return Pr}}),a(ra.prototype,{computeIntersections:function(u,c){this.mce.computeIntersectsForChain(this.chainIndex,u.mce,u.chainIndex,c)},interfaces_:function(){return[]},getClass:function(){return ra}}),a(ni.prototype,{isDelete:function(){return this.eventType===ni.DELETE},setDeleteEventIndex:function(u){this.deleteEventIndex=u},getObject:function(){return this.obj},compareTo:function(u){var c=u;return this.xValue<c.xValue?-1:this.xValue>c.xValue?1:this.eventType<c.eventType?-1:this.eventType>c.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===ni.INSERT},isSameLabel:function(u){return this.label===null?!1:this.label===u.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[p]},getClass:function(){return ni}}),ni.INSERT=1,ni.DELETE=2,a(qi.prototype,{interfaces_:function(){return[]},getClass:function(){return qi}}),a(wi.prototype,{isTrivialIntersection:function(u,c,d,v){if(u===d&&this.li.getIntersectionNum()===1){if(wi.isAdjacentSegments(c,v))return!0;if(u.isClosed()){var x=u.getNumPoints()-1;if(c===0&&v===x||v===0&&c===x)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(u){this.isDoneWhenProperInt=u},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(u,c){for(var d=c.iterator();d.hasNext();){var v=d.next(),x=v.getCoordinate();if(u.isIntersection(x))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(u,c){return c===null?!1:this.isBoundaryPointInternal(u,c[0])?!0:!!this.isBoundaryPointInternal(u,c[1])},setBoundaryNodes:function(u,c){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=u,this.bdyNodes[1]=c},addIntersections:function(u,c,d,v){if(u===d&&c===v)return null;this.numTests++;var x=u.getCoordinates()[c],I=u.getCoordinates()[c+1],R=d.getCoordinates()[v],J=d.getCoordinates()[v+1];this.li.computeIntersection(x,I,R,J),this.li.hasIntersection()&&(this.recordIsolated&&(u.setIsolated(!1),d.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(u,c,d,v)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(u.addIntersections(this.li,c,0),d.addIntersections(this.li,v,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return wi}}),wi.isAdjacentSegments=function(u,c){return Math.abs(u-c)===1},A(ma,qi),a(ma.prototype,{prepareEvents:function(){Qi.sort(this.events);for(var u=0;u<this.events.size();u++){var c=this.events.get(u);c.isDelete()&&c.getInsertEvent().setDeleteEventIndex(u)}},computeIntersections:function(){if(arguments.length===1){var u=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var c=0;c<this.events.size();c++){var d=this.events.get(c);if(d.isInsert()&&this.processOverlaps(c,d.getDeleteEventIndex(),d,u),u.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof wi&&T(arguments[0],k)&&T(arguments[1],k)){var v=arguments[0],x=arguments[1],I=arguments[2];this.addEdges(v,v),this.addEdges(x,x),this.computeIntersections(I)}else if(typeof arguments[2]=="boolean"&&T(arguments[0],k)&&arguments[1]instanceof wi){var R=arguments[0],J=arguments[1],ge=arguments[2];ge?this.addEdges(R,null):this.addEdges(R),this.computeIntersections(J)}}},addEdge:function(u,c){for(var d=u.getMonotoneChainEdge(),v=d.getStartIndexes(),x=0;x<v.length-1;x++){var I=new ra(d,x),R=new ni(c,d.getMinX(x),I);this.events.add(R),this.events.add(new ni(d.getMaxX(x),R))}},processOverlaps:function(u,c,d,v){for(var x=d.getObject(),I=u;c>I;I++){var R=this.events.get(I);if(R.isInsert()){var J=R.getObject();d.isSameLabel(R)||(x.computeIntersections(J,v),this.nOverlaps++)}}},addEdges:function(){if(arguments.length===1)for(var u=arguments[0],c=u.iterator();c.hasNext();){var d=c.next();this.addEdge(d,d)}else if(arguments.length===2)for(var v=arguments[0],x=arguments[1],c=v.iterator();c.hasNext();){var d=c.next();this.addEdge(d,x)}},interfaces_:function(){return[]},getClass:function(){return ma}}),a(oi.prototype,{getMin:function(){return this.min},intersects:function(u,c){return!(this.min>c||this.max<u)},getMax:function(){return this.max},toString:function(){return $n.toLineString(new N(this.min,0),new N(this.max,0))},interfaces_:function(){return[]},getClass:function(){return oi}}),a(ia.prototype,{compare:function(u,c){var d=u,v=c,x=(d.min+d.max)/2,I=(v.min+v.max)/2;return I>x?-1:x>I?1:0},interfaces_:function(){return[b]},getClass:function(){return ia}}),oi.NodeComparator=ia,A(Vi,oi),a(Vi.prototype,{query:function(u,c,d){return this.intersects(u,c)?void d.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return Vi}}),A(Sa,oi),a(Sa.prototype,{buildExtent:function(u,c){this.min=Math.min(u.min,c.min),this.max=Math.max(u.max,c.max)},query:function(u,c,d){return this.intersects(u,c)?(this.node1!==null&&this.node1.query(u,c,d),void(this.node2!==null&&this.node2.query(u,c,d))):null},interfaces_:function(){return[]},getClass:function(){return Sa}}),a(Oa.prototype,{buildTree:function(){Qi.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var u=this.leaves,c=null,d=new U;;){if(this.buildLevel(u,d),d.size()===1)return d.get(0);c=u,u=d,d=c}},insert:function(u,c,d){if(this.root!==null)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new Vi(u,c,d))},query:function(u,c,d){this.init(),this.root.query(u,c,d)},buildRoot:function(){return this.root!==null?null:void(this.root=this.buildTree())},printNode:function(u){oe.out.println($n.toLineString(new N(u.min,this.level),new N(u.max,this.level)))},init:function(){return this.root!==null?null:void this.buildRoot()},buildLevel:function(u,c){this.level++,c.clear();for(var d=0;d<u.size();d+=2){var v=u.get(d),x=d+1<u.size()?u.get(d):null;if(x===null)c.add(v);else{var I=new Sa(u.get(d),u.get(d+1));c.add(I)}}},interfaces_:function(){return[]},getClass:function(){return Oa}}),a(nr.prototype,{filter:function(u){if(this.isForcedToLineString&&u instanceof be){var c=u.getFactory().createLineString(u.getCoordinateSequence());return this.lines.add(c),null}u instanceof Wt&&this.lines.add(u)},setForceToLineString:function(u){this.isForcedToLineString=u},interfaces_:function(){return[Oe]},getClass:function(){return nr}}),nr.getGeometry=function(){if(arguments.length===1){var u=arguments[0];return u.getFactory().buildGeometry(nr.getLines(u))}if(arguments.length===2){var c=arguments[0],d=arguments[1];return c.getFactory().buildGeometry(nr.getLines(c,d))}},nr.getLines=function(){if(arguments.length===1){var u=arguments[0];return nr.getLines(u,!1)}if(arguments.length===2){if(T(arguments[0],F)&&T(arguments[1],F)){for(var c=arguments[0],d=arguments[1],v=c.iterator();v.hasNext();){var x=v.next();nr.getLines(x,d)}return d}if(arguments[0]instanceof Ne&&typeof arguments[1]=="boolean"){var I=arguments[0],R=arguments[1],J=new U;return I.apply(new nr(J,R)),J}if(arguments[0]instanceof Ne&&T(arguments[1],F)){var ge=arguments[0],Ie=arguments[1];return ge instanceof Wt?Ie.add(ge):ge.apply(new nr(Ie)),Ie}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&T(arguments[0],F)&&T(arguments[1],F)){for(var ze=arguments[0],Ve=arguments[1],st=arguments[2],v=ze.iterator();v.hasNext();){var x=v.next();nr.getLines(x,Ve,st)}return Ve}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Ne&&T(arguments[1],F)){var Rt=arguments[0],ln=arguments[1],vn=arguments[2];return Rt.apply(new nr(ln,vn)),ln}}},a(si.prototype,{visitItem:function(u){this.items.add(u)},getItems:function(){return this.items},interfaces_:function(){return[Vt]},getClass:function(){return si}}),a(zr.prototype,{locate:function(u){var c=new $r(u),d=new ui(c);return this.index.query(u.y,u.y,d),c.getLocation()},interfaces_:function(){return[Fr]},getClass:function(){return zr}}),a(ui.prototype,{visitItem:function(u){var c=u;this.counter.countSegment(c.getCoordinate(0),c.getCoordinate(1))},interfaces_:function(){return[Vt]},getClass:function(){return ui}}),a(Wi.prototype,{init:function(u){for(var c=nr.getLines(u),d=c.iterator();d.hasNext();){var v=d.next(),x=v.getCoordinates();this.addLine(x)}},addLine:function(u){for(var c=1;c<u.length;c++){var d=new Qt(u[c-1],u[c]),v=Math.min(d.p0.y,d.p1.y),x=Math.max(d.p0.y,d.p1.y);this.index.insert(v,x,d)}},query:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1],d=new si;return this.index.query(u,c,d),d.getItems()}if(arguments.length===3){var v=arguments[0],x=arguments[1],I=arguments[2];this.index.query(v,x,I)}},interfaces_:function(){return[]},getClass:function(){return Wi}}),zr.SegmentVisitor=ui,zr.IntervalIndexedGeometry=Wi,a(ri.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(u){u.print(this.coord),u.print(" seg # = "+this.segmentIndex),u.println(" dist = "+this.dist)},compareTo:function(u){var c=u;return this.compare(c.segmentIndex,c.dist)},isEndPoint:function(u){return this.segmentIndex===0&&this.dist===0?!0:this.segmentIndex===u},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(u,c){return this.segmentIndex<u?-1:this.segmentIndex>u?1:this.dist<c?-1:this.dist>c?1:0},interfaces_:function(){return[p]},getClass:function(){return ri}}),a(Li.prototype,{print:function(u){u.println("Intersections:");for(var c=this.iterator();c.hasNext();){var d=c.next();d.print(u)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(u){this.addEndpoints();for(var c=this.iterator(),d=c.next();c.hasNext();){var v=c.next(),x=this.createSplitEdge(d,v);u.add(x),d=v}},addEndpoints:function(){var u=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[u],u,0)},createSplitEdge:function(u,c){var d=c.segmentIndex-u.segmentIndex+2,v=this.edge.pts[c.segmentIndex],x=c.dist>0||!c.coord.equals2D(v);x||d--;var I=new Array(d).fill(null),R=0;I[R++]=new N(u.coord);for(var J=u.segmentIndex+1;J<=c.segmentIndex;J++)I[R++]=this.edge.pts[J];return x&&(I[R]=c.coord),new Br(I,new Jn(this.edge.label))},add:function(u,c,d){var v=new ri(u,c,d),x=this.nodeMap.get(v);return x!==null?x:(this.nodeMap.put(v,v),v)},isIntersection:function(u){for(var c=this.iterator();c.hasNext();){var d=c.next();if(d.coord.equals(u))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return Li}}),a(Hr.prototype,{getChainStartIndices:function(u){var c=0,d=new U;d.add(new le(c));do{var v=this.findChainEnd(u,c);d.add(new le(v)),c=v}while(c<u.length-1);var x=Hr.toIntArray(d);return x},findChainEnd:function(u,c){for(var d=xn.quadrant(u[c],u[c+1]),v=c+1;v<u.length;){var x=xn.quadrant(u[v-1],u[v]);if(x!==d)break;v++}return v-1},interfaces_:function(){return[]},getClass:function(){return Hr}}),Hr.toIntArray=function(u){for(var c=new Array(u.size()).fill(null),d=0;d<c.length;d++)c[d]=u.get(d).intValue();return c},a(Nr.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(u){var c=this.pts[this.startIndex[u]].x,d=this.pts[this.startIndex[u+1]].x;return c>d?c:d},getMinX:function(u){var c=this.pts[this.startIndex[u]].x,d=this.pts[this.startIndex[u+1]].x;return d>c?c:d},computeIntersectsForChain:function(){if(arguments.length===4){var u=arguments[0],c=arguments[1],d=arguments[2],v=arguments[3];this.computeIntersectsForChain(this.startIndex[u],this.startIndex[u+1],c,c.startIndex[d],c.startIndex[d+1],v)}else if(arguments.length===6){var x=arguments[0],I=arguments[1],R=arguments[2],J=arguments[3],ge=arguments[4],Ie=arguments[5],ze=this.pts[x],Ve=this.pts[I],st=R.pts[J],Rt=R.pts[ge];if(I-x===1&&ge-J===1)return Ie.addIntersections(this.e,x,R.e,J),null;if(this.env1.init(ze,Ve),this.env2.init(st,Rt),!this.env1.intersects(this.env2))return null;var ln=Math.trunc((x+I)/2),vn=Math.trunc((J+ge)/2);ln>x&&(vn>J&&this.computeIntersectsForChain(x,ln,R,J,vn,Ie),ge>vn&&this.computeIntersectsForChain(x,ln,R,vn,ge,Ie)),I>ln&&(vn>J&&this.computeIntersectsForChain(ln,I,R,J,vn,Ie),ge>vn&&this.computeIntersectsForChain(ln,I,R,vn,ge,Ie))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(u,c){for(var d=0;d<this.startIndex.length-1;d++)for(var v=0;v<u.startIndex.length-1;v++)this.computeIntersectsForChain(d,u,v,c)},interfaces_:function(){return[]},getClass:function(){return Nr}}),a(rr.prototype,{getDepth:function(u,c){return this.depth[u][c]},setDepth:function(u,c,d){this.depth[u][c]=d},isNull:function(){if(arguments.length===0){for(var u=0;2>u;u++)for(var c=0;3>c;c++)if(this.depth[u][c]!==rr.NULL_VALUE)return!1;return!0}if(arguments.length===1){var d=arguments[0];return this.depth[d][1]===rr.NULL_VALUE}if(arguments.length===2){var v=arguments[0],x=arguments[1];return this.depth[v][x]===rr.NULL_VALUE}},normalize:function(){for(var u=0;2>u;u++)if(!this.isNull(u)){var c=this.depth[u][1];this.depth[u][2]<c&&(c=this.depth[u][2]),0>c&&(c=0);for(var d=1;3>d;d++){var v=0;this.depth[u][d]>c&&(v=1),this.depth[u][d]=v}}},getDelta:function(u){return this.depth[u][ct.RIGHT]-this.depth[u][ct.LEFT]},getLocation:function(u,c){return this.depth[u][c]<=0?S.EXTERIOR:S.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(arguments.length===1)for(var u=arguments[0],c=0;2>c;c++)for(var d=1;3>d;d++){var v=u.getLocation(c,d);v!==S.EXTERIOR&&v!==S.INTERIOR||(this.isNull(c,d)?this.depth[c][d]=rr.depthAtLocation(v):this.depth[c][d]+=rr.depthAtLocation(v))}else if(arguments.length===3){var x=arguments[0],I=arguments[1],R=arguments[2];R===S.INTERIOR&&this.depth[x][I]++}},interfaces_:function(){return[]},getClass:function(){return rr}}),rr.depthAtLocation=function(u){return u===S.EXTERIOR?0:u===S.INTERIOR?1:rr.NULL_VALUE},rr.NULL_VALUE=-1,A(Br,bi),a(Br.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var u=new Array(2).fill(null);u[0]=this.pts[0],u[1]=this.pts[1];var c=new Br(u,Jn.toLineLabel(this.label));return c},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(u){this._isIsolated=u},setName:function(u){this.name=u},equals:function(u){if(!(u instanceof Br))return!1;var c=u;if(this.pts.length!==c.pts.length)return!1;for(var d=!0,v=!0,x=this.pts.length,I=0;I<this.pts.length;I++)if(this.pts[I].equals2D(c.pts[I])||(d=!1),this.pts[I].equals2D(c.pts[--x])||(v=!1),!d&&!v)return!1;return!0},getCoordinate:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var u=arguments[0];return this.pts[u]}},print:function(u){u.print("edge "+this.name+": "),u.print("LINESTRING (");for(var c=0;c<this.pts.length;c++)c>0&&u.print(","),u.print(this.pts[c].x+" "+this.pts[c].y);u.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(u){Br.updateIM(this.label,u)},isCollapsed:function(){return this.label.isArea()?this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2]):!1},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(u){u.print("edge "+this.name+": ");for(var c=this.pts.length-1;c>=0;c--)u.print(this.pts[c]+" ");u.println("")},getMonotoneChainEdge:function(){return this.mce===null&&(this.mce=new Nr(this)),this.mce},getEnvelope:function(){if(this.env===null){this.env=new re;for(var u=0;u<this.pts.length;u++)this.env.expandToInclude(this.pts[u])}return this.env},addIntersection:function(u,c,d,v){var x=new N(u.getIntersection(v)),I=c,R=u.getEdgeDistance(d,v),J=I+1;if(J<this.pts.length){var ge=this.pts[J];x.equals2D(ge)&&(I=J,R=0)}this.eiList.add(x,I,R)},toString:function(){var u=new Q;u.append("edge "+this.name+": "),u.append("LINESTRING (");for(var c=0;c<this.pts.length;c++)c>0&&u.append(","),u.append(this.pts[c].x+" "+this.pts[c].y);return u.append(")  "+this.label+" "+this.depthDelta),u.toString()},isPointwiseEqual:function(u){if(this.pts.length!==u.pts.length)return!1;for(var c=0;c<this.pts.length;c++)if(!this.pts[c].equals2D(u.pts[c]))return!1;return!0},setDepthDelta:function(u){this.depthDelta=u},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(u,c,d){for(var v=0;v<u.getIntersectionNum();v++)this.addIntersection(u,c,d,v)},interfaces_:function(){return[]},getClass:function(){return Br}}),Br.updateIM=function(){if(arguments.length!==2)return bi.prototype.updateIM.apply(this,arguments);var u=arguments[0],c=arguments[1];c.setAtLeastIfValid(u.getLocation(0,ct.ON),u.getLocation(1,ct.ON),1),u.isArea()&&(c.setAtLeastIfValid(u.getLocation(0,ct.LEFT),u.getLocation(1,ct.LEFT),2),c.setAtLeastIfValid(u.getLocation(0,ct.RIGHT),u.getLocation(1,ct.RIGHT),2))},A(pr,Rr),a(pr.prototype,{insertBoundaryPoint:function(u,c){var d=this.nodes.addNode(c),v=d.getLabel(),x=1,I=S.NONE;I=v.getLocation(u,ct.ON),I===S.BOUNDARY&&x++;var R=pr.determineBoundary(this.boundaryNodeRule,x);v.setLocation(u,R)},computeSelfNodes:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];return this.computeSelfNodes(u,c,!1)}if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2],I=new wi(d,!0,!1);I.setIsDoneIfProperInt(x);var R=this.createEdgeSetIntersector(),J=this.parentGeom instanceof be||this.parentGeom instanceof Kt||this.parentGeom instanceof pe,ge=v||!J;return R.computeIntersections(this.edges,I,ge),this.addSelfIntersectionNodes(this.argIndex),I}},computeSplitEdges:function(u){for(var c=this.edges.iterator();c.hasNext();){var d=c.next();d.eiList.addSplitEdges(u)}},computeEdgeIntersections:function(u,c,d){var v=new wi(c,d,!0);v.setBoundaryNodes(this.getBoundaryNodes(),u.getBoundaryNodes());var x=this.createEdgeSetIntersector();return x.computeIntersections(this.edges,u.edges,v),v},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof Lt){var u=arguments[0],c=u.getCoordinate();this.insertPoint(this.argIndex,c,S.INTERIOR)}else if(arguments[0]instanceof N){var d=arguments[0];this.insertPoint(this.argIndex,d,S.INTERIOR)}},addPolygon:function(u){this.addPolygonRing(u.getExteriorRing(),S.EXTERIOR,S.INTERIOR);for(var c=0;c<u.getNumInteriorRing();c++){var d=u.getInteriorRingN(c);this.addPolygonRing(d,S.INTERIOR,S.EXTERIOR)}},addEdge:function(u){this.insertEdge(u);var c=u.getCoordinates();this.insertPoint(this.argIndex,c[0],S.BOUNDARY),this.insertPoint(this.argIndex,c[c.length-1],S.BOUNDARY)},addLineString:function(u){var c=He.removeRepeatedPoints(u.getCoordinates());if(c.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=c[0],null;var d=new Br(c,new Jn(this.argIndex,S.INTERIOR));this.lineEdgeMap.put(u,d),this.insertEdge(d),M.isTrue(c.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,c[0]),this.insertBoundaryPoint(this.argIndex,c[c.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var u=this.getBoundaryNodes(),c=new Array(u.size()).fill(null),d=0,v=u.iterator();v.hasNext();){var x=v.next();c[d++]=x.getCoordinate().copy()}return c},getBoundaryNodes:function(){return this.boundaryNodes===null&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(u,c,d){return this.isBoundaryNode(u,c)?null:void(d===S.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(u,c):this.insertPoint(u,c,d))},addPolygonRing:function(u,c,d){if(u.isEmpty())return null;var v=He.removeRepeatedPoints(u.getCoordinates());if(v.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=v[0],null;var x=c,I=d;rt.isCCW(v)&&(x=d,I=c);var R=new Br(v,new Jn(this.argIndex,S.BOUNDARY,x,I));this.lineEdgeMap.put(u,R),this.insertEdge(R),this.insertPoint(this.argIndex,v[0],S.BOUNDARY)},insertPoint:function(u,c,d){var v=this.nodes.addNode(c),x=v.getLabel();x===null?v.label=new Jn(u,d):x.setLocation(u,d)},createEdgeSetIntersector:function(){return new ma},addSelfIntersectionNodes:function(u){for(var c=this.edges.iterator();c.hasNext();)for(var d=c.next(),v=d.getLabel().getLocation(u),x=d.eiList.iterator();x.hasNext();){var I=x.next();this.addSelfIntersectionNode(u,I.coord,v)}},add:function(){if(arguments.length!==1)return Rr.prototype.add.apply(this,arguments);var u=arguments[0];if(u.isEmpty())return null;if(u instanceof pe&&(this.useBoundaryDeterminationRule=!1),u instanceof Kt)this.addPolygon(u);else if(u instanceof Wt)this.addLineString(u);else if(u instanceof Lt)this.addPoint(u);else if(u instanceof Ee)this.addCollection(u);else if(u instanceof Pt)this.addCollection(u);else if(u instanceof pe)this.addCollection(u);else{if(!(u instanceof Yt))throw new UnsupportedOperationException(u.getClass().getName());this.addCollection(u)}},addCollection:function(u){for(var c=0;c<u.getNumGeometries();c++){var d=u.getGeometryN(c);this.add(d)}},locate:function(u){return T(this.parentGeom,or)&&this.parentGeom.getNumGeometries()>50?(this.areaPtLocator===null&&(this.areaPtLocator=new zr(this.parentGeom)),this.areaPtLocator.locate(u)):this.ptLocator.locate(u,this.parentGeom)},findEdge:function(){if(arguments.length===1){var u=arguments[0];return this.lineEdgeMap.get(u)}return Rr.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return pr}}),pr.determineBoundary=function(u,c){return u.isInBoundary(c)?S.BOUNDARY:S.INTERIOR},a(Ai.prototype,{getArgGeometry:function(u){return this.arg[u].getGeometry()},setComputationPrecision:function(u){this.resultPrecisionModel=u,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return Ai}}),a(wr.prototype,{compareTo:function(u){var c=u,d=wr.compareOriented(this.pts,this._orientation,c.pts,c._orientation);return d},interfaces_:function(){return[p]},getClass:function(){return wr}}),wr.orientation=function(u){return He.increasingDirection(u)===1},wr.compareOriented=function(u,c,d,v){for(var x=c?1:-1,I=v?1:-1,R=c?u.length:-1,J=v?d.length:-1,ge=c?0:u.length-1,Ie=v?0:d.length-1;;){var ze=u[ge].compareTo(d[Ie]);if(ze!==0)return ze;ge+=x,Ie+=I;var Ve=ge===R,st=Ie===J;if(Ve&&!st)return-1;if(!Ve&&st)return 1;if(Ve&&st)return 0}},a(li.prototype,{print:function(u){u.print("MULTILINESTRING ( ");for(var c=0;c<this.edges.size();c++){var d=this.edges.get(c);c>0&&u.print(","),u.print("(");for(var v=d.getCoordinates(),x=0;x<v.length;x++)x>0&&u.print(","),u.print(v[x].x+" "+v[x].y);u.println(")")}u.print(")  ")},addAll:function(u){for(var c=u.iterator();c.hasNext();)this.add(c.next())},findEdgeIndex:function(u){for(var c=0;c<this.edges.size();c++)if(this.edges.get(c).equals(u))return c;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(u){return this.edges.get(u)},findEqualEdge:function(u){var c=new wr(u.getCoordinates()),d=this.ocaMap.get(c);return d},add:function(u){this.edges.add(u);var c=new wr(u.getCoordinates());this.ocaMap.put(c,u)},interfaces_:function(){return[]},getClass:function(){return li}}),A(Ot,Ai),a(Ot.prototype,{insertUniqueEdge:function(u){var c=this.edgeList.findEqualEdge(u);if(c!==null){var d=c.getLabel(),v=u.getLabel();c.isPointwiseEqual(u)||(v=new Jn(u.getLabel()),v.flip());var x=c.getDepth();x.isNull()&&x.add(d),x.add(v),d.merge(v)}else this.edgeList.add(u)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var u=this.graph.getEdgeEnds().iterator();u.hasNext();){var c=u.next(),d=c.getSym();c.isInResult()&&d.isInResult()&&(c.setInResult(!1),d.setInResult(!1))}},isCoveredByLA:function(u){return this.isCovered(u,this.resultLineList)?!0:!!this.isCovered(u,this.resultPolyList)},computeGeometry:function(u,c,d,v){var x=new U;return x.addAll(u),x.addAll(c),x.addAll(d),x.isEmpty()?Ot.createEmptyResult(v,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(x)},mergeSymLabels:function(){for(var u=this.graph.getNodes().iterator();u.hasNext();){var c=u.next();c.getEdges().mergeSymLabels()}},isCovered:function(u,c){for(var d=c.iterator();d.hasNext();){var v=d.next(),x=this.ptLocator.locate(u,v);if(x!==S.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var u=new U,c=this.edgeList.iterator();c.hasNext();){var d=c.next();d.isCollapsed()&&(c.remove(),u.add(d.getCollapsedEdge()))}this.edgeList.addAll(u)},updateNodeLabelling:function(){for(var u=this.graph.getNodes().iterator();u.hasNext();){var c=u.next(),d=c.getEdges().getLabel();c.getLabel().merge(d)}},getResultGeometry:function(u){return this.computeOverlay(u),this.resultGeom},insertUniqueEdges:function(u){for(var c=u.iterator();c.hasNext();){var d=c.next();this.insertUniqueEdge(d)}},computeOverlay:function(u){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var c=new U;this.arg[0].computeSplitEdges(c),this.arg[1].computeSplitEdges(c),this.insertUniqueEdges(c),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ki.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(u),this.cancelDuplicateResultEdges();var d=new Ea(this.geomFact);d.add(this.graph),this.resultPolyList=d.getPolygons();var v=new xi(this,this.geomFact,this.ptLocator);this.resultLineList=v.build(u);var x=new pa(this,this.geomFact,this.ptLocator);this.resultPointList=x.build(u),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,u)},labelIncompleteNode:function(u,c){var d=this.ptLocator.locate(u.getCoordinate(),this.arg[c].getGeometry());u.getLabel().setLocation(c,d)},copyPoints:function(u){for(var c=this.arg[u].getNodeIterator();c.hasNext();){var d=c.next(),v=this.graph.addNode(d.getCoordinate());v.setLabel(u,d.getLabel().getLocation(u))}},findResultAreaEdges:function(u){for(var c=this.graph.getEdgeEnds().iterator();c.hasNext();){var d=c.next(),v=d.getLabel();v.isArea()&&!d.isInteriorAreaEdge()&&Ot.isResultOfOp(v.getLocation(0,ct.RIGHT),v.getLocation(1,ct.RIGHT),u)&&d.setInResult(!0)}},computeLabelsFromDepths:function(){for(var u=this.edgeList.iterator();u.hasNext();){var c=u.next(),d=c.getLabel(),v=c.getDepth();if(!v.isNull()){v.normalize();for(var x=0;2>x;x++)d.isNull(x)||!d.isArea()||v.isNull(x)||(v.getDelta(x)===0?d.toLine(x):(M.isTrue(!v.isNull(x,ct.LEFT),"depth of LEFT side has not been initialized"),d.setLocation(x,ct.LEFT,v.getLocation(x,ct.LEFT)),M.isTrue(!v.isNull(x,ct.RIGHT),"depth of RIGHT side has not been initialized"),d.setLocation(x,ct.RIGHT,v.getLocation(x,ct.RIGHT))))}}},computeLabelling:function(){for(var u=this.graph.getNodes().iterator();u.hasNext();){var c=u.next();c.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var u=0,c=this.graph.getNodes().iterator();c.hasNext();){var d=c.next(),v=d.getLabel();d.isIsolated()&&(u++,v.isNull(0)?this.labelIncompleteNode(d,0):this.labelIncompleteNode(d,1)),d.getEdges().updateLabelling(v)}},isCoveredByA:function(u){return!!this.isCovered(u,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return Ot}}),Ot.overlayOp=function(u,c,d){var v=new Ot(u,c),x=v.getResultGeometry(d);return x},Ot.intersection=function(u,c){if(u.isEmpty()||c.isEmpty())return Ot.createEmptyResult(Ot.INTERSECTION,u,c,u.getFactory());if(u.isGeometryCollection()){var d=c;return $i.map(u,{interfaces_:function(){return[MapOp]},map:function(v){return v.intersection(d)}})}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(c),ir.overlayOp(u,c,Ot.INTERSECTION)},Ot.symDifference=function(u,c){if(u.isEmpty()||c.isEmpty()){if(u.isEmpty()&&c.isEmpty())return Ot.createEmptyResult(Ot.SYMDIFFERENCE,u,c,u.getFactory());if(u.isEmpty())return c.copy();if(c.isEmpty())return u.copy()}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(c),ir.overlayOp(u,c,Ot.SYMDIFFERENCE)},Ot.resultDimension=function(u,c,d){var v=c.getDimension(),x=d.getDimension(),I=-1;switch(u){case Ot.INTERSECTION:I=Math.min(v,x);break;case Ot.UNION:I=Math.max(v,x);break;case Ot.DIFFERENCE:I=v;break;case Ot.SYMDIFFERENCE:I=Math.max(v,x)}return I},Ot.createEmptyResult=function(u,c,d,v){var x=null;switch(Ot.resultDimension(u,c,d)){case-1:x=v.createGeometryCollection(new Array(0).fill(null));break;case 0:x=v.createPoint();break;case 1:x=v.createLineString();break;case 2:x=v.createPolygon()}return x},Ot.difference=function(u,c){return u.isEmpty()?Ot.createEmptyResult(Ot.DIFFERENCE,u,c,u.getFactory()):c.isEmpty()?u.copy():(u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(c),ir.overlayOp(u,c,Ot.DIFFERENCE))},Ot.isResultOfOp=function(){if(arguments.length===2){var u=arguments[0],c=arguments[1],d=u.getLocation(0),v=u.getLocation(1);return Ot.isResultOfOp(d,v,c)}if(arguments.length===3){var x=arguments[0],I=arguments[1],R=arguments[2];switch(x===S.BOUNDARY&&(x=S.INTERIOR),I===S.BOUNDARY&&(I=S.INTERIOR),R){case Ot.INTERSECTION:return x===S.INTERIOR&&I===S.INTERIOR;case Ot.UNION:return x===S.INTERIOR||I===S.INTERIOR;case Ot.DIFFERENCE:return x===S.INTERIOR&&I!==S.INTERIOR;case Ot.SYMDIFFERENCE:return x===S.INTERIOR&&I!==S.INTERIOR||x!==S.INTERIOR&&I===S.INTERIOR}return!1}},Ot.INTERSECTION=1,Ot.UNION=2,Ot.DIFFERENCE=3,Ot.SYMDIFFERENCE=4,a(mr.prototype,{selfSnap:function(u){var c=new xe(u),d=c.snapTo(u,this.snapTolerance);return d},removeCommonBits:function(u){this.cbr=new Qe,this.cbr.add(u[0]),this.cbr.add(u[1]);var c=new Array(2).fill(null);return c[0]=this.cbr.removeCommonBits(u[0].copy()),c[1]=this.cbr.removeCommonBits(u[1].copy()),c},prepareResult:function(u){return this.cbr.addCommonBits(u),u},getResultGeometry:function(u){var c=this.snap(this.geom),d=Ot.overlayOp(c[0],c[1],u);return this.prepareResult(d)},checkValid:function(u){u.isValid()||oe.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=xe.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(u){var c=this.removeCommonBits(u),d=xe.snap(c[0],c[1],this.snapTolerance);return d},interfaces_:function(){return[]},getClass:function(){return mr}}),mr.overlayOp=function(u,c,d){var v=new mr(u,c);return v.getResultGeometry(d)},mr.union=function(u,c){return mr.overlayOp(u,c,Ot.UNION)},mr.intersection=function(u,c){return mr.overlayOp(u,c,Ot.INTERSECTION)},mr.symDifference=function(u,c){return mr.overlayOp(u,c,Ot.SYMDIFFERENCE)},mr.difference=function(u,c){return mr.overlayOp(u,c,Ot.DIFFERENCE)},a(ir.prototype,{getResultGeometry:function(u){var c=null,d=!1,v=null;try{c=Ot.overlayOp(this.geom[0],this.geom[1],u);var x=!0;x&&(d=!0)}catch(I){if(!(I instanceof C))throw I;v=I}finally{}if(!d)try{c=mr.overlayOp(this.geom[0],this.geom[1],u)}catch(I){throw I instanceof C?v:I}finally{}return c},interfaces_:function(){return[]},getClass:function(){return ir}}),ir.overlayOp=function(u,c,d){var v=new ir(u,c);return v.getResultGeometry(d)},ir.union=function(u,c){return ir.overlayOp(u,c,Ot.UNION)},ir.intersection=function(u,c){return ir.overlayOp(u,c,Ot.INTERSECTION)},ir.symDifference=function(u,c){return ir.overlayOp(u,c,Ot.SYMDIFFERENCE)},ir.difference=function(u,c){return ir.overlayOp(u,c,Ot.DIFFERENCE)},a(er.prototype,{addPolygon:function(u){if(u.isEmpty())return null;var c=null,d=0,v=this.horizontalBisector(u);if(v.getLength()===0)d=0,c=v.getCoordinate();else{var x=ir.overlayOp(v,u,Ot.INTERSECTION),I=this.widestGeometry(x);d=I.getEnvelopeInternal().getWidth(),c=er.centre(I.getEnvelopeInternal())}(this.interiorPoint===null||d>this.maxWidth)&&(this.interiorPoint=c,this.maxWidth=d)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function(){if(arguments[0]instanceof Yt){var c=arguments[0];if(c.isEmpty())return c;for(var d=c.getGeometryN(0),v=1;v<c.getNumGeometries();v++)c.getGeometryN(v).getEnvelopeInternal().getWidth()>d.getEnvelopeInternal().getWidth()&&(d=c.getGeometryN(v));return d}if(arguments[0]instanceof Ne){var x=arguments[0];return x instanceof Yt?this.widestGeometry(x):x}},horizontalBisector:function(u){var c=u.getEnvelopeInternal(),d=Ei.getBisectorY(u);return this.factory.createLineString([new N(c.getMinX(),d),new N(c.getMaxX(),d)])},add:function(u){if(u instanceof Kt)this.addPolygon(u);else if(u instanceof Yt)for(var c=u,d=0;d<c.getNumGeometries();d++)this.add(c.getGeometryN(d))},interfaces_:function(){return[]},getClass:function(){return er}}),er.centre=function(u){return new N(er.avg(u.getMinX(),u.getMaxX()),er.avg(u.getMinY(),u.getMaxY()))},er.avg=function(u,c){return(u+c)/2},a(Ei.prototype,{updateInterval:function(u){u<=this.centreY?u>this.loY&&(this.loY=u):u>this.centreY&&u<this.hiY&&(this.hiY=u)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var u=0;u<this.poly.getNumInteriorRing();u++)this.process(this.poly.getInteriorRingN(u));var c=er.avg(this.hiY,this.loY);return c},process:function(u){for(var c=u.getCoordinateSequence(),d=0;d<c.size();d++){var v=c.getY(d);this.updateInterval(v)}},interfaces_:function(){return[]},getClass:function(){return Ei}}),Ei.getBisectorY=function(u){var c=new Ei(u);return c.getBisectorY()},er.SafeBisectorFinder=Ei,a(ci.prototype,{addEndpoints:function(){if(arguments[0]instanceof Ne){var u=arguments[0];if(u instanceof Wt)this.addEndpoints(u.getCoordinates());else if(u instanceof Yt)for(var c=u,d=0;d<c.getNumGeometries();d++)this.addEndpoints(c.getGeometryN(d))}else if(arguments[0]instanceof Array){var v=arguments[0];this.add(v[0]),this.add(v[v.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof Ne){var u=arguments[0];if(u instanceof Wt)this.addInterior(u.getCoordinates());else if(u instanceof Yt)for(var c=u,d=0;d<c.getNumGeometries();d++)this.addInterior(c.getGeometryN(d))}else if(arguments[0]instanceof Array)for(var v=arguments[0],d=1;d<v.length-1;d++)this.add(v[d])},add:function(u){var c=u.distance(this.centroid);c<this.minDistance&&(this.interiorPoint=new N(u),this.minDistance=c)},interfaces_:function(){return[]},getClass:function(){return ci}}),a(va.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof Ne){var u=arguments[0];if(u instanceof Lt)this.add(u.getCoordinate());else if(u instanceof Yt)for(var c=u,d=0;d<c.getNumGeometries();d++)this.add(c.getGeometryN(d))}else if(arguments[0]instanceof N){var v=arguments[0],x=v.distance(this.centroid);x<this.minDistance&&(this.interiorPoint=new N(v),this.minDistance=x)}},interfaces_:function(){return[]},getClass:function(){return va}}),a(en.prototype,{interfaces_:function(){return[]},getClass:function(){return en}}),en.toDegrees=function(u){return 180*u/Math.PI},en.normalize=function(u){for(;u>Math.PI;)u-=en.PI_TIMES_2;for(;u<=-Math.PI;)u+=en.PI_TIMES_2;return u},en.angle=function(){if(arguments.length===1){var u=arguments[0];return Math.atan2(u.y,u.x)}if(arguments.length===2){var c=arguments[0],d=arguments[1],v=d.x-c.x,x=d.y-c.y;return Math.atan2(x,v)}},en.isAcute=function(u,c,d){var v=u.x-c.x,x=u.y-c.y,I=d.x-c.x,R=d.y-c.y,J=v*I+x*R;return J>0},en.isObtuse=function(u,c,d){var v=u.x-c.x,x=u.y-c.y,I=d.x-c.x,R=d.y-c.y,J=v*I+x*R;return 0>J},en.interiorAngle=function(u,c,d){var v=en.angle(c,u),x=en.angle(c,d);return Math.abs(x-v)},en.normalizePositive=function(u){if(0>u){for(;0>u;)u+=en.PI_TIMES_2;u>=en.PI_TIMES_2&&(u=0)}else{for(;u>=en.PI_TIMES_2;)u-=en.PI_TIMES_2;0>u&&(u=0)}return u},en.angleBetween=function(u,c,d){var v=en.angle(c,u),x=en.angle(c,d);return en.diff(v,x)},en.diff=function(u,c){var d=null;return d=c>u?c-u:u-c,d>Math.PI&&(d=2*Math.PI-d),d},en.toRadians=function(u){return u*Math.PI/180},en.getTurn=function(u,c){var d=Math.sin(c-u);return d>0?en.COUNTERCLOCKWISE:0>d?en.CLOCKWISE:en.NONE},en.angleBetweenOriented=function(u,c,d){var v=en.angle(c,u),x=en.angle(c,d),I=x-v;return I<=-Math.PI?I+en.PI_TIMES_2:I>Math.PI?I-en.PI_TIMES_2:I},en.PI_TIMES_2=2*Math.PI,en.PI_OVER_2=Math.PI/2,en.PI_OVER_4=Math.PI/4,en.COUNTERCLOCKWISE=rt.COUNTERCLOCKWISE,en.CLOCKWISE=rt.CLOCKWISE,en.NONE=rt.COLLINEAR,a(Rn.prototype,{area:function(){return Rn.area(this.p0,this.p1,this.p2)},signedArea:function(){return Rn.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(u){if(u===null)throw new h;return Rn.interpolateZ(u,this.p0,this.p1,this.p2)},longestSideLength:function(){return Rn.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return Rn.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return Rn.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return Rn.area3D(this.p0,this.p1,this.p2)},centroid:function(){return Rn.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return Rn.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return Rn}}),Rn.area=function(u,c,d){return Math.abs(((d.x-u.x)*(c.y-u.y)-(c.x-u.x)*(d.y-u.y))/2)},Rn.signedArea=function(u,c,d){return((d.x-u.x)*(c.y-u.y)-(c.x-u.x)*(d.y-u.y))/2},Rn.det=function(u,c,d,v){return u*v-c*d},Rn.interpolateZ=function(u,c,d,v){var x=c.x,I=c.y,R=d.x-x,J=v.x-x,ge=d.y-I,Ie=v.y-I,ze=R*Ie-J*ge,Ve=u.x-x,st=u.y-I,Rt=(Ie*Ve-J*st)/ze,ln=(-ge*Ve+R*st)/ze,vn=c.z+Rt*(d.z-c.z)+ln*(v.z-c.z);return vn},Rn.longestSideLength=function(u,c,d){var v=u.distance(c),x=c.distance(d),I=d.distance(u),R=v;return x>R&&(R=x),I>R&&(R=I),R},Rn.isAcute=function(u,c,d){return en.isAcute(u,c,d)&&en.isAcute(c,d,u)?!!en.isAcute(d,u,c):!1},Rn.circumcentre=function(u,c,d){var v=d.x,x=d.y,I=u.x-v,R=u.y-x,J=c.x-v,ge=c.y-x,Ie=2*Rn.det(I,R,J,ge),ze=Rn.det(R,I*I+R*R,ge,J*J+ge*ge),Ve=Rn.det(I,I*I+R*R,J,J*J+ge*ge),st=v-ze/Ie,Rt=x+Ve/Ie;return new N(st,Rt)},Rn.perpendicularBisector=function(u,c){var d=c.x-u.x,v=c.y-u.y,x=new Pe(u.x+d/2,u.y+v/2,1),I=new Pe(u.x-v+d/2,u.y+d+v/2,1);return new Pe(x,I)},Rn.angleBisector=function(u,c,d){var v=c.distance(u),x=c.distance(d),I=v/(v+x),R=d.x-u.x,J=d.y-u.y,ge=new N(u.x+I*R,u.y+I*J);return ge},Rn.area3D=function(u,c,d){var v=c.x-u.x,x=c.y-u.y,I=c.z-u.z,R=d.x-u.x,J=d.y-u.y,ge=d.z-u.z,Ie=x*ge-I*J,ze=I*R-v*ge,Ve=v*J-x*R,st=Ie*Ie+ze*ze+Ve*Ve,Rt=Math.sqrt(st)/2;return Rt},Rn.centroid=function(u,c,d){var v=(u.x+c.x+d.x)/3,x=(u.y+c.y+d.y)/3;return new N(v,x)},Rn.inCentre=function(u,c,d){var v=c.distance(d),x=u.distance(d),I=u.distance(c),R=v+x+I,J=(v*u.x+x*c.x+I*d.x)/R,ge=(v*u.y+x*c.y+I*d.y)/R;return new N(J,ge)},a(Lr.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var u=this.extremalPts[0],c=this.extremalPts[1];return this.input.getFactory().createLineString([u,c])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(this.input.getNumPoints()===1){var d=this.input.getCoordinates();return this.extremalPts=[new N(d[0])],null}var u=this.input.convexHull(),c=u.getCoordinates(),d=c;if(c[0].equals2D(c[c.length-1])&&(d=new Array(c.length-1).fill(null),He.copyDeep(c,0,d,0,c.length-1)),d.length<=2)return this.extremalPts=He.copyDeep(d),null;for(var v=Lr.lowestPoint(d),x=Lr.pointWitMinAngleWithX(d,v),I=0;I<d.length;I++){var R=Lr.pointWithMinAngleWithSegment(d,v,x);if(en.isObtuse(v,R,x))return this.extremalPts=[new N(v),new N(x)],null;if(en.isObtuse(R,v,x))v=R;else{if(!en.isObtuse(R,x,v))return this.extremalPts=[new N(v),new N(x),new N(R)],null;x=R}}M.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return this.extremalPts!==null?null:(this.computeCirclePoints(),this.computeCentre(),void(this.centre!==null&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var u=this.extremalPts[0],c=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([u,c])},getCircle:function(){if(this.compute(),this.centre===null)return this.input.getFactory().createPolygon();var u=this.input.getFactory().createPoint(this.centre);return this.radius===0?u:u.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new N((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=Rn.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return Lr}}),Lr.pointWitMinAngleWithX=function(u,c){for(var d=g.MAX_VALUE,v=null,x=0;x<u.length;x++){var I=u[x];if(I!==c){var R=I.x-c.x,J=I.y-c.y;0>J&&(J=-J);var ge=Math.sqrt(R*R+J*J),Ie=J/ge;d>Ie&&(d=Ie,v=I)}}return v},Lr.lowestPoint=function(u){for(var c=u[0],d=1;d<u.length;d++)u[d].y<c.y&&(c=u[d]);return c},Lr.pointWithMinAngleWithSegment=function(u,c,d){for(var v=g.MAX_VALUE,x=null,I=0;I<u.length;I++){var R=u[I];if(R!==c&&R!==d){var J=en.angleBetween(c,R,d);v>J&&(v=J,x=R)}}return x},a(ur.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),this.minWidthPt===null)return this.inputGeom.getFactory().createLineString(null);var u=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([u,this.minWidthPt])},computeWidthConvex:function(u){u instanceof Kt?this.convexHullPts=u.getExteriorRing().getCoordinates():this.convexHullPts=u.getCoordinates(),this.convexHullPts.length===0?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):this.convexHullPts.length===1?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):this.convexHullPts.length===2||this.convexHullPts.length===3?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(u){this.minWidth=g.MAX_VALUE;for(var c=1,d=new Qt,v=0;v<u.length-1;v++)d.p0=u[v],d.p1=u[v+1],c=this.findMaxPerpDistance(u,d,c)},computeMinimumDiameter:function(){if(this.minWidthPt!==null)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var u=new z(this.inputGeom).getConvexHull();this.computeWidthConvex(u)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(u,c,d){for(var v=c.distancePerpendicular(u[d]),x=v,I=d,R=I;x>=v;)v=x,I=R,R=ur.nextIndex(u,I),x=c.distancePerpendicular(u[R]);return v<this.minWidth&&(this.minPtIndex=I,this.minWidth=v,this.minWidthPt=u[this.minPtIndex],this.minBaseSeg=new Qt(c)),I},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),this.minWidth===0)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var u=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,c=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,d=g.MAX_VALUE,v=-g.MAX_VALUE,x=g.MAX_VALUE,I=-g.MAX_VALUE,R=0;R<this.convexHullPts.length;R++){var J=ur.computeC(u,c,this.convexHullPts[R]);J>v&&(v=J),d>J&&(d=J);var ge=ur.computeC(-c,u,this.convexHullPts[R]);ge>I&&(I=ge),x>ge&&(x=ge)}var Ie=ur.computeSegmentForLine(-u,-c,I),ze=ur.computeSegmentForLine(-u,-c,x),Ve=ur.computeSegmentForLine(-c,u,v),st=ur.computeSegmentForLine(-c,u,d),Rt=Ve.lineIntersection(Ie),ln=st.lineIntersection(Ie),vn=st.lineIntersection(ze),Xn=Ve.lineIntersection(ze),vr=this.inputGeom.getFactory().createLinearRing([Rt,ln,vn,Xn,Rt]);return this.inputGeom.getFactory().createPolygon(vr,null)},interfaces_:function(){return[]},getClass:function(){return ur}}),ur.nextIndex=function(u,c){return c++,c>=u.length&&(c=0),c},ur.computeC=function(u,c,d){return u*d.y-c*d.x},ur.getMinimumDiameter=function(u){return new ur(u).getDiameter()},ur.getMinimumRectangle=function(u){return new ur(u).getMinimumRectangle()},ur.computeSegmentForLine=function(u,c,d){var v=null,x=null;return Math.abs(c)>Math.abs(u)?(v=new N(0,d/c),x=new N(1,d/c-u/c)):(v=new N(d/u,0),x=new N(d/u-c/u,1)),new Qt(v,x)};var cs=Object.freeze({Centroid:un,CGAlgorithms:rt,ConvexHull:z,InteriorPointArea:er,InteriorPointLine:ci,InteriorPointPoint:va,RobustLineIntersector:Zt,MinimumBoundingCircle:Lr,MinimumDiameter:ur});a(ii.prototype,{getResultGeometry:function(){return new Mi(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(u){if(0>=u)throw new h;this.distanceTolerance=u},interfaces_:function(){return[]},getClass:function(){return ii}}),ii.densifyPoints=function(u,c,d){for(var v=new Qt,x=new te,I=0;I<u.length-1;I++){v.p0=u[I],v.p1=u[I+1],x.add(v.p0,!1);var R=v.getLength(),J=Math.trunc(R/c)+1;if(J>1)for(var ge=R/J,Ie=1;J>Ie;Ie++){var ze=Ie*ge/R,Ve=v.pointAlong(ze);d.makePrecise(Ve),x.add(Ve,!1)}}return x.add(u[u.length-1],!1),x.toCoordinateArray()},ii.densify=function(u,c){var d=new ii(u);return d.setDistanceTolerance(c),d.getResultGeometry()},A(Mi,Se),a(Mi.prototype,{transformMultiPolygon:function(u,c){var d=Se.prototype.transformMultiPolygon.call(this,u,c);return this.createValidArea(d)},transformPolygon:function(u,c){var d=Se.prototype.transformPolygon.call(this,u,c);return c instanceof pe?d:this.createValidArea(d)},transformCoordinates:function(u,c){var d=u.toCoordinateArray(),v=ii.densifyPoints(d,this.distanceTolerance,c.getPrecisionModel());return c instanceof Wt&&v.length===1&&(v=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(v)},createValidArea:function(u){return u.buffer(0)},interfaces_:function(){return[]},getClass:function(){return Mi}}),ii.DensifyTransformer=Mi;var fs=Object.freeze({Densifier:ii});a(Ur.prototype,{find:function(u){var c=this;do{if(c===null)return null;if(c.dest().equals2D(u))return c;c=c.oNext()}while(c!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(u){if(this.oNext()===this)return this.insertAfter(u),null;var c=this.compareTo(u),d=this;do{var v=d.oNext(),x=v.compareTo(u);if(x!==c||v===this)return d.insertAfter(u),null;d=v}while(d!==this);M.shouldNeverReachHere()},insertAfter:function(u){M.equals(this._orig,u.orig());var c=this.oNext();this._sym.setNext(u),u.sym().setNext(c)},degree:function(){var c=0,d=this;do c++,d=d.oNext();while(d!==this);return c},equals:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];return this._orig.equals2D(u)&&this._sym._orig.equals(c)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(u){var c=this.deltaX(),d=this.deltaY(),v=u.deltaX(),x=u.deltaY();if(c===v&&d===x)return 0;var I=xn.quadrant(c,d),R=xn.quadrant(v,x);return I>R?1:R>I?-1:rt.computeOrientation(u._orig,u.dest(),this.dest())},prevNode:function(){for(var u=this;u.degree()===2;)if(u=u.prev(),u===this)return null;return u},compareTo:function(u){var c=u,d=this.compareAngularDirection(c);return d},next:function(){return this._next},setSym:function(u){this._sym=u},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(u){this._next=u},init:function(u){this.setSym(u),u.setSym(this),this.setNext(u),u.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return Ur}}),Ur.init=function(u,c){if(u._sym!==null||c._sym!==null||u._next!==null||c._next!==null)throw new IllegalStateException("Edges are already initialized");return u.init(c),u},Ur.create=function(u,c){var d=new Ur(u),v=new Ur(c);return d.init(v),d},A(lr,Ur),a(lr.prototype,{mark:function(){this._isMarked=!0},setMark:function(u){this._isMarked=u},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return lr}}),lr.setMarkBoth=function(u,c){u.setMark(c),u.sym().setMark(c)},lr.isMarked=function(u){return u.isMarked()},lr.setMark=function(u,c){u.setMark(c)},lr.markBoth=function(u){u.mark(),u.sym().mark()},lr.mark=function(u){u.mark()},a(fi.prototype,{insert:function(u,c,d){var v=this.create(u,c);d!==null?d.insert(v):this.vertexMap.put(u,v);var x=this.vertexMap.get(c);return x!==null?x.insert(v.sym()):this.vertexMap.put(c,v.sym()),v},create:function(u,c){var d=this.createEdge(u),v=this.createEdge(c);return Ur.init(d,v),d},createEdge:function(u){return new Ur(u)},addEdge:function(u,c){if(!fi.isValidEdge(u,c))return null;var d=this.vertexMap.get(u),v=null;if(d!==null&&(v=d.find(c)),v!==null)return v;var x=this.insert(u,c,d);return x},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(u,c){var d=this.vertexMap.get(u);return d===null?null:d.find(c)},interfaces_:function(){return[]},getClass:function(){return fi}}),fi.isValidEdge=function(u,c){var d=c.compareTo(u);return d!==0},A(Ji,lr),a(Ji.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return Ji}}),A(W,fi),a(W.prototype,{createEdge:function(u){return new Ji(u)},interfaces_:function(){return[]},getClass:function(){return W}}),a(ye.prototype,{addLine:function(u){this.lines.add(this.factory.createLineString(u.toCoordinateArray()))},updateRingStartEdge:function(u){return u.isStart()||(u=u.sym(),u.isStart())?this.ringStartEdge===null?(this.ringStartEdge=u,null):void(u.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=u)):null},getResult:function(){return this.result===null&&this.computeResult(),this.result},process:function(u){var c=u.prevNode();c===null&&(c=u),this.stackEdges(c),this.buildLines()},buildRing:function(u){var c=new te,d=u;for(c.add(d.orig().copy(),!1);d.sym().degree()===2;){var v=d.next();if(v===u)break;c.add(v.orig().copy(),!1),d=v}c.add(d.dest().copy(),!1),this.addLine(c)},buildLine:function(u){var c=new te,d=u;for(this.ringStartEdge=null,lr.markBoth(d),c.add(d.orig().copy(),!1);d.sym().degree()===2;){this.updateRingStartEdge(d);var v=d.next();if(v===u)return this.buildRing(this.ringStartEdge),null;c.add(v.orig().copy(),!1),d=v,lr.markBoth(d)}c.add(d.dest().copy(),!1),this.stackEdges(d.sym()),this.addLine(c)},stackEdges:function(u){var c=u;do lr.isMarked(c)||this.nodeEdgeStack.add(c),c=c.oNext();while(c!==u)},computeResult:function(){for(var u=this.graph.getVertexEdges(),c=u.iterator();c.hasNext();){var d=c.next();lr.isMarked(d)||this.process(d)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var u=this.nodeEdgeStack.pop();lr.isMarked(u)||this.buildLine(u)}},add:function(){if(arguments[0]instanceof Ne){var u=arguments[0];u.apply({interfaces_:function(){return[Oe]},filter:function(ge){ge instanceof Wt&&this.add(ge)}})}else if(T(arguments[0],F))for(var c=arguments[0],d=c.iterator();d.hasNext();){var v=d.next();this.add(v)}else if(arguments[0]instanceof Wt){var x=arguments[0];this.factory===null&&(this.factory=x.getFactory());for(var I=x.getCoordinateSequence(),R=!1,d=1;d<I.size();d++){var J=this.graph.addEdge(I.getCoordinate(d-1),I.getCoordinate(d));J!==null&&(R||(J.setStart(),R=!0))}}},interfaces_:function(){return[]},getClass:function(){return ye}}),ye.dissolve=function(u){var c=new ye;return c.add(u),c.getResult()};var hs=Object.freeze({LineDissolver:ye});a(Le.prototype,{hasChildren:function(){for(var u=0;4>u;u++)if(this.subnode[u]!==null)return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(u){u.addAll(this.items);for(var c=0;4>c;c++)this.subnode[c]!==null&&this.subnode[c].addAllItems(u);return u},getNodeCount:function(){for(var u=0,c=0;4>c;c++)this.subnode[c]!==null&&(u+=this.subnode[c].size());return u+1},size:function(){for(var u=0,c=0;4>c;c++)this.subnode[c]!==null&&(u+=this.subnode[c].size());return u+this.items.size()},addAllItemsFromOverlapping:function(u,c){if(!this.isSearchMatch(u))return null;c.addAll(this.items);for(var d=0;4>d;d++)this.subnode[d]!==null&&this.subnode[d].addAllItemsFromOverlapping(u,c)},visitItems:function(u,c){for(var d=this.items.iterator();d.hasNext();)c.visitItem(d.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(u,c){if(!this.isSearchMatch(u))return!1;for(var d=!1,v=0;4>v;v++)if(this.subnode[v]!==null&&(d=this.subnode[v].remove(u,c))){this.subnode[v].isPrunable()&&(this.subnode[v]=null);break}return d||(d=this.items.remove(c))},visit:function(u,c){if(!this.isSearchMatch(u))return null;this.visitItems(u,c);for(var d=0;4>d;d++)this.subnode[d]!==null&&this.subnode[d].visit(u,c)},getItems:function(){return this.items},depth:function(){for(var u=0,c=0;4>c;c++)if(this.subnode[c]!==null){var d=this.subnode[c].depth();d>u&&(u=d)}return u+1},isEmpty:function(){var c=!0;this.items.isEmpty()||(c=!1);for(var d=0;4>d;d++)this.subnode[d]!==null&&(this.subnode[d].isEmpty()||(c=!1));return c},add:function(u){this.items.add(u)},interfaces_:function(){return[E]},getClass:function(){return Le}}),Le.getSubnodeIndex=function(u,c,d){var v=-1;return u.getMinX()>=c&&(u.getMinY()>=d&&(v=3),u.getMaxY()<=d&&(v=1)),u.getMaxX()<=c&&(u.getMinY()>=d&&(v=2),u.getMaxY()<=d&&(v=0)),v},Je.exponent=function(u){return Nt(64,u)-1023},Je.powerOf2=function(u){return Math.pow(2,u)},a(mt.prototype,{getLevel:function(){return this.level},computeKey:function(){if(arguments.length===1){var u=arguments[0];for(this.level=mt.computeQuadLevel(u),this.env=new re,this.computeKey(this.level,u);!this.env.contains(u);)this.level+=1,this.computeKey(this.level,u)}else if(arguments.length===2){var c=arguments[0],d=arguments[1],v=Je.powerOf2(c);this.pt.x=Math.floor(d.getMinX()/v)*v,this.pt.y=Math.floor(d.getMinY()/v)*v,this.env.init(this.pt.x,this.pt.x+v,this.pt.y,this.pt.y+v)}},getEnvelope:function(){return this.env},getCentre:function(){return new N((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return mt}}),mt.computeQuadLevel=function(u){var c=u.getWidth(),d=u.getHeight(),v=c>d?c:d,x=Je.exponent(v)+1;return x},A(Bt,Le),a(Bt.prototype,{find:function(u){var c=Le.getSubnodeIndex(u,this.centrex,this.centrey);if(c===-1)return this;if(this.subnode[c]!==null){var d=this.subnode[c];return d.find(u)}return this},isSearchMatch:function(u){return this.env.intersects(u)},getSubnode:function(u){return this.subnode[u]===null&&(this.subnode[u]=this.createSubnode(u)),this.subnode[u]},getEnvelope:function(){return this.env},getNode:function(u){var c=Le.getSubnodeIndex(u,this.centrex,this.centrey);if(c!==-1){var d=this.getSubnode(c);return d.getNode(u)}return this},createSubnode:function(u){var c=0,d=0,v=0,x=0;switch(u){case 0:c=this.env.getMinX(),d=this.centrex,v=this.env.getMinY(),x=this.centrey;break;case 1:c=this.centrex,d=this.env.getMaxX(),v=this.env.getMinY(),x=this.centrey;break;case 2:c=this.env.getMinX(),d=this.centrex,v=this.centrey,x=this.env.getMaxY();break;case 3:c=this.centrex,d=this.env.getMaxX(),v=this.centrey,x=this.env.getMaxY()}var I=new re(c,d,v,x),R=new Bt(I,this.level-1);return R},insertNode:function(u){M.isTrue(this.env===null||this.env.contains(u.env));var c=Le.getSubnodeIndex(u.env,this.centrex,this.centrey);if(u.level===this.level-1)this.subnode[c]=u;else{var d=this.createSubnode(c);d.insertNode(u),this.subnode[c]=d}},interfaces_:function(){return[]},getClass:function(){return Bt}}),Bt.createNode=function(u){var c=new mt(u),d=new Bt(c.getEnvelope(),c.getLevel());return d},Bt.createExpanded=function(u,c){var d=new re(c);u!==null&&d.expandToInclude(u.env);var v=Bt.createNode(d);return u!==null&&v.insertNode(u),v},a(Ht.prototype,{interfaces_:function(){return[]},getClass:function(){return Ht}}),Ht.isZeroWidth=function(u,c){var d=c-u;if(d===0)return!0;var v=Math.max(Math.abs(u),Math.abs(c)),x=d/v,I=Je.exponent(x);return I<=Ht.MIN_BINARY_EXPONENT},Ht.MIN_BINARY_EXPONENT=-50,A(tn,Le),a(tn.prototype,{insert:function(u,c){var d=Le.getSubnodeIndex(u,tn.origin.x,tn.origin.y);if(d===-1)return this.add(c),null;var v=this.subnode[d];if(v===null||!v.getEnvelope().contains(u)){var x=Bt.createExpanded(v,u);this.subnode[d]=x}this.insertContained(this.subnode[d],u,c)},isSearchMatch:function(u){return!0},insertContained:function(u,c,d){M.isTrue(u.getEnvelope().contains(c));var v=Ht.isZeroWidth(c.getMinX(),c.getMaxX()),x=Ht.isZeroWidth(c.getMinY(),c.getMaxY()),I=null;I=v||x?u.find(c):u.getNode(c),I.add(d)},interfaces_:function(){return[]},getClass:function(){return tn}}),tn.origin=new N(0,0),a(Mn.prototype,{size:function(){return this.root!==null?this.root.size():0},insert:function(u,c){this.collectStats(u);var d=Mn.ensureExtent(u,this.minExtent);this.root.insert(d,c)},query:function(){if(arguments.length===1){var u=arguments[0],c=new si;return this.query(u,c),c.getItems()}if(arguments.length===2){var d=arguments[0],v=arguments[1];this.root.visit(d,v)}},queryAll:function(){var u=new U;return this.root.addAllItems(u),u},remove:function(u,c){var d=Mn.ensureExtent(u,this.minExtent);return this.root.remove(d,c)},collectStats:function(u){var c=u.getWidth();c<this.minExtent&&c>0&&(this.minExtent=c);var d=u.getHeight();d<this.minExtent&&d>0&&(this.minExtent=d)},depth:function(){return this.root!==null?this.root.depth():0},isEmpty:function(){return this.root===null},interfaces_:function(){return[At,E]},getClass:function(){return Mn}}),Mn.ensureExtent=function(u,c){var d=u.getMinX(),v=u.getMaxX(),x=u.getMinY(),I=u.getMaxY();return d!==v&&x!==I?u:(d===v&&(d-=c/2,v=d+c/2),x===I&&(x-=c/2,I=x+c/2),new re(d,v,x,I))},Mn.serialVersionUID=-7461163625812743e3;var ds=Object.freeze({Quadtree:Mn}),gs=Object.freeze({STRtree:Xt}),ps=Object.freeze({quadtree:ds,strtree:gs}),ms=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];a(Hn.prototype,{read:function(u){var c=void 0;c=typeof u=="string"?JSON.parse(u):u;var d=c.type;if(!Oi[d])throw new Error("Unknown GeoJSON type: "+c.type);return ms.indexOf(d)!==-1?Oi[d].apply(this,[c.coordinates]):d==="GeometryCollection"?Oi[d].apply(this,[c.geometries]):Oi[d].apply(this,[c])},write:function(u){var c=u.getGeometryType();if(!da[c])throw new Error("Geometry is not supported");return da[c].apply(this,[u])}});var Oi={Feature:function(u){var c={};for(var d in u)c[d]=u[d];if(u.geometry){var v=u.geometry.type;if(!Oi[v])throw new Error("Unknown GeoJSON type: "+u.type);c.geometry=this.read(u.geometry)}return u.bbox&&(c.bbox=Oi.bbox.apply(this,[u.bbox])),c},FeatureCollection:function(u){var c={};if(u.features){c.features=[];for(var d=0;d<u.features.length;++d)c.features.push(this.read(u.features[d]))}return u.bbox&&(c.bbox=this.parse.bbox.apply(this,[u.bbox])),c},coordinates:function(c){for(var d=[],v=0;v<c.length;++v){var x=c[v];d.push(new N(x[0],x[1]))}return d},bbox:function(u){return this.geometryFactory.createLinearRing([new N(u[0],u[1]),new N(u[2],u[1]),new N(u[2],u[3]),new N(u[0],u[3]),new N(u[0],u[1])])},Point:function(u){var c=new N(u[0],u[1]);return this.geometryFactory.createPoint(c)},MultiPoint:function(u){for(var c=[],d=0;d<u.length;++d)c.push(Oi.Point.apply(this,[u[d]]));return this.geometryFactory.createMultiPoint(c)},LineString:function(u){var c=Oi.coordinates.apply(this,[u]);return this.geometryFactory.createLineString(c)},MultiLineString:function(u){for(var c=[],d=0;d<u.length;++d)c.push(Oi.LineString.apply(this,[u[d]]));return this.geometryFactory.createMultiLineString(c)},Polygon:function(u){for(var c=Oi.coordinates.apply(this,[u[0]]),d=this.geometryFactory.createLinearRing(c),v=[],x=1;x<u.length;++x){var I=u[x],R=Oi.coordinates.apply(this,[I]),J=this.geometryFactory.createLinearRing(R);v.push(J)}return this.geometryFactory.createPolygon(d,v)},MultiPolygon:function(u){for(var c=[],d=0;d<u.length;++d){var v=u[d];c.push(Oi.Polygon.apply(this,[v]))}return this.geometryFactory.createMultiPolygon(c)},GeometryCollection:function(u){for(var c=[],d=0;d<u.length;++d){var v=u[d];c.push(this.read(v))}return this.geometryFactory.createGeometryCollection(c)}},da={coordinate:function(u){return[u.x,u.y]},Point:function(u){var c=da.coordinate.apply(this,[u.getCoordinate()]);return{type:"Point",coordinates:c}},MultiPoint:function(u){for(var c=[],d=0;d<u.geometries.length;++d){var v=u.geometries[d],x=da.Point.apply(this,[v]);c.push(x.coordinates)}return{type:"MultiPoint",coordinates:c}},LineString:function(u){for(var c=[],d=u.getCoordinates(),v=0;v<d.length;++v){var x=d[v];c.push(da.coordinate.apply(this,[x]))}return{type:"LineString",coordinates:c}},MultiLineString:function(u){for(var c=[],d=0;d<u.geometries.length;++d){var v=u.geometries[d],x=da.LineString.apply(this,[v]);c.push(x.coordinates)}return{type:"MultiLineString",coordinates:c}},Polygon:function(u){var c=[],d=da.LineString.apply(this,[u.shell]);c.push(d.coordinates);for(var v=0;v<u.holes.length;++v){var x=u.holes[v],I=da.LineString.apply(this,[x]);c.push(I.coordinates)}return{type:"Polygon",coordinates:c}},MultiPolygon:function(u){for(var c=[],d=0;d<u.geometries.length;++d){var v=u.geometries[d],x=da.Polygon.apply(this,[v]);c.push(x.coordinates)}return{type:"MultiPolygon",coordinates:c}},GeometryCollection:function(u){for(var c=[],d=0;d<u.geometries.length;++d){var v=u.geometries[d],x=v.getGeometryType();c.push(da[x].apply(this,[v]))}return{type:"GeometryCollection",geometries:c}}};a(Yn.prototype,{read:function(u){var c=this.parser.read(u);return this.precisionModel.getType()===pn.FIXED&&this.reducePrecision(c),c},reducePrecision:function(u){var c,d;if(u.coordinate)this.precisionModel.makePrecise(u.coordinate);else if(u.points)for(c=0,d=u.points.length;d>c;c++)this.precisionModel.makePrecise(u.points[c]);else if(u.geometries)for(c=0,d=u.geometries.length;d>c;c++)this.reducePrecision(u.geometries[c])}}),a(ar.prototype,{write:function(u){return this.parser.write(u)}}),a(Er.prototype,{read:function(u){var c=this.parser.read(u);return this.precisionModel.getType()===pn.FIXED&&this.reducePrecision(c),c},reducePrecision:function(u){if(u.coordinate)this.precisionModel.makePrecise(u.coordinate);else if(u.points)for(var c=0,d=u.points.coordinates.length;d>c;c++)this.precisionModel.makePrecise(u.points.coordinates[c]);else if(u.geometries)for(var v=0,x=u.geometries.length;x>v;v++)this.reducePrecision(u.geometries[v])}}),a(Xr.prototype,{read:function(u){return u instanceof ol.geom.Point?this.convertFromPoint(u):u instanceof ol.geom.LineString?this.convertFromLineString(u):u instanceof ol.geom.LinearRing?this.convertFromLinearRing(u):u instanceof ol.geom.Polygon?this.convertFromPolygon(u):u instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(u):u instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(u):u instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(u):u instanceof ol.geom.GeometryCollection?this.convertFromCollection(u):void 0},convertFromPoint:function(u){var c=u.getCoordinates();return this.geometryFactory.createPoint(new N(c[0],c[1]))},convertFromLineString:function(u){return this.geometryFactory.createLineString(u.getCoordinates().map(function(c){return new N(c[0],c[1])}))},convertFromLinearRing:function(u){return this.geometryFactory.createLinearRing(u.getCoordinates().map(function(c){return new N(c[0],c[1])}))},convertFromPolygon:function(u){for(var c=u.getLinearRings(),d=null,v=[],x=0;x<c.length;x++){var I=this.convertFromLinearRing(c[x]);x===0?d=I:v.push(I)}return this.geometryFactory.createPolygon(d,v)},convertFromMultiPoint:function(u){var c=u.getPoints().map(function(d){return this.convertFromPoint(d)},this);return this.geometryFactory.createMultiPoint(c)},convertFromMultiLineString:function(u){var c=u.getLineStrings().map(function(d){return this.convertFromLineString(d)},this);return this.geometryFactory.createMultiLineString(c)},convertFromMultiPolygon:function(u){var c=u.getPolygons().map(function(d){return this.convertFromPolygon(d)},this);return this.geometryFactory.createMultiPolygon(c)},convertFromCollection:function(u){var c=u.getGeometries().map(function(d){return this.read(d)},this);return this.geometryFactory.createGeometryCollection(c)},write:function(u){return u.getGeometryType()==="Point"?this.convertToPoint(u.getCoordinate()):u.getGeometryType()==="LineString"?this.convertToLineString(u):u.getGeometryType()==="LinearRing"?this.convertToLinearRing(u):u.getGeometryType()==="Polygon"?this.convertToPolygon(u):u.getGeometryType()==="MultiPoint"?this.convertToMultiPoint(u):u.getGeometryType()==="MultiLineString"?this.convertToMultiLineString(u):u.getGeometryType()==="MultiPolygon"?this.convertToMultiPolygon(u):u.getGeometryType()==="GeometryCollection"?this.convertToCollection(u):void 0},convertToPoint:function(u){return new ol.geom.Point([u.x,u.y])},convertToLineString:function(u){var c=u.points.coordinates.map(cr);return new ol.geom.LineString(c)},convertToLinearRing:function(u){var c=u.points.coordinates.map(cr);return new ol.geom.LinearRing(c)},convertToPolygon:function(u){for(var c=[u.shell.points.coordinates.map(cr)],d=0;d<u.holes.length;d++)c.push(u.holes[d].points.coordinates.map(cr));return new ol.geom.Polygon(c)},convertToMultiPoint:function(u){return new ol.geom.MultiPoint(u.getCoordinates().map(cr))},convertToMultiLineString:function(u){for(var c=[],d=0;d<u.geometries.length;d++)c.push(this.convertToLineString(u.geometries[d]).getCoordinates());return new ol.geom.MultiLineString(c)},convertToMultiPolygon:function(u){for(var c=[],d=0;d<u.geometries.length;d++)c.push(this.convertToPolygon(u.geometries[d]).getCoordinates());return new ol.geom.MultiPolygon(c)},convertToCollection:function(u){for(var c=[],d=0;d<u.geometries.length;d++){var v=u.geometries[d];c.push(this.write(v))}return new ol.geom.GeometryCollection(c)}});var vs=Object.freeze({GeoJSONReader:Yn,GeoJSONWriter:ar,OL3Parser:Xr,WKTReader:Er,WKTWriter:$n});a(jr.prototype,{rescale:function(){if(T(arguments[0],F))for(var u=arguments[0],c=u.iterator();c.hasNext();){var d=c.next();this.rescale(d.getCoordinates())}else if(arguments[0]instanceof Array){var v=arguments[0];v.length===2&&(new N(v[0]),new N(v[1]));for(var c=0;c<v.length;c++)v[c].x=v[c].x/this.scaleFactor+this.offsetX,v[c].y=v[c].y/this.scaleFactor+this.offsetY;v.length===2&&v[0].equals2D(v[1])&&oe.out.println(v)}},scale:function(){if(T(arguments[0],F)){for(var u=arguments[0],c=new U,d=u.iterator();d.hasNext();){var v=d.next();c.add(new Ir(this.scale(v.getCoordinates()),v.getData()))}return c}if(arguments[0]instanceof Array){for(var x=arguments[0],I=new Array(x.length).fill(null),d=0;d<x.length;d++)I[d]=new N(Math.round((x[d].x-this.offsetX)*this.scaleFactor),Math.round((x[d].y-this.offsetY)*this.scaleFactor),x[d].z);var R=He.removeRepeatedPoints(I);return R}},isIntegerPrecision:function(){return this.scaleFactor===1},getNodedSubstrings:function(){var u=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(u),u},computeNodes:function(u){var c=u;this.isScaled&&(c=this.scale(u)),this.noder.computeNodes(c)},interfaces_:function(){return[ea]},getClass:function(){return jr}});var ys=Object.freeze({MCIndexNoder:yi,ScaledNoder:jr,SegmentString:Tt});a(kr.prototype,{isSimpleMultiPoint:function(u){if(u.isEmpty())return!0;for(var c=new St,d=0;d<u.getNumGeometries();d++){var v=u.getGeometryN(d),x=v.getCoordinate();if(c.contains(x))return this.nonSimpleLocation=x,!1;c.add(x)}return!0},isSimplePolygonal:function(u){for(var c=nr.getLines(u),d=c.iterator();d.hasNext();){var v=d.next();if(!this.isSimpleLinearGeometry(v))return!1}return!0},hasClosedEndpointIntersection:function(u){for(var c=new pt,d=u.getEdgeIterator();d.hasNext();){var v=d.next(),x=(v.getMaximumSegmentIndex(),v.isClosed()),I=v.getCoordinate(0);this.addEndpoint(c,I,x);var R=v.getCoordinate(v.getNumPoints()-1);this.addEndpoint(c,R,x)}for(var d=c.values().iterator();d.hasNext();){var J=d.next();if(J.isClosed&&J.degree!==2)return this.nonSimpleLocation=J.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(u){if(u.isEmpty())return!0;var c=new pr(0,u),d=new Zt,v=c.computeSelfNodes(d,!0);return v.hasIntersection()?v.hasProperIntersection()?(this.nonSimpleLocation=v.getProperIntersectionPoint(),!1):this.hasNonEndpointIntersection(c)?!1:!this.isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(c):!0},hasNonEndpointIntersection:function(u){for(var c=u.getEdgeIterator();c.hasNext();)for(var d=c.next(),v=d.getMaximumSegmentIndex(),x=d.getEdgeIntersectionList().iterator();x.hasNext();){var I=x.next();if(!I.isEndPoint(v))return this.nonSimpleLocation=I.getCoordinate(),!0}return!1},addEndpoint:function(u,c,d){var v=u.get(c);v===null&&(v=new aa(c),u.put(c,v)),v.addEndpoint(d)},computeSimple:function(u){return this.nonSimpleLocation=null,u.isEmpty()?!0:u instanceof Wt?this.isSimpleLinearGeometry(u):u instanceof Pt?this.isSimpleLinearGeometry(u):u instanceof Ee?this.isSimpleMultiPoint(u):T(u,or)?this.isSimplePolygonal(u):u instanceof Yt?this.isSimpleGeometryCollection(u):!0},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(u){for(var c=0;c<u.getNumGeometries();c++){var d=u.getGeometryN(c);if(!this.computeSimple(d))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return kr}}),a(aa.prototype,{addEndpoint:function(u){this.degree++,this.isClosed|=u},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return aa}}),kr.EndpointInfo=aa,a(In.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(u){this.quadrantSegments=u,this.quadrantSegments===0&&(this.joinStyle=In.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=In.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),0>=u&&(this.quadrantSegments=1),this.joinStyle!==In.JOIN_ROUND&&(this.quadrantSegments=In.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(u){this.joinStyle=u},setSimplifyFactor:function(u){this.simplifyFactor=0>u?0:u},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(u){this.endCapStyle=u},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(u){this.mitreLimit=u},setSingleSided:function(u){this._isSingleSided=u},interfaces_:function(){return[]},getClass:function(){return In}}),In.bufferDistanceError=function(u){var c=Math.PI/2/u;return 1-Math.cos(c/2)},In.CAP_ROUND=1,In.CAP_FLAT=2,In.CAP_SQUARE=3,In.JOIN_ROUND=1,In.JOIN_MITRE=2,In.JOIN_BEVEL=3,In.DEFAULT_QUADRANT_SEGMENTS=8,In.DEFAULT_MITRE_LIMIT=5,In.DEFAULT_SIMPLIFY_FACTOR=.01,a(oa.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(u,c){var d=this.getRightmostSideOfSegment(u,c);return 0>d&&(d=this.getRightmostSideOfSegment(u,c-1)),0>d&&(this.minCoord=null,this.checkForRightmostCoordinate(u)),d},findRightmostEdgeAtVertex:function(){var u=this.minDe.getEdge().getCoordinates();M.isTrue(this.minIndex>0&&this.minIndex<u.length,"rightmost point expected to be interior vertex of edge");var c=u[this.minIndex-1],d=u[this.minIndex+1],v=rt.computeOrientation(this.minCoord,d,c),x=!1;(c.y<this.minCoord.y&&d.y<this.minCoord.y&&v===rt.COUNTERCLOCKWISE||c.y>this.minCoord.y&&d.y>this.minCoord.y&&v===rt.CLOCKWISE)&&(x=!0),x&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(u,c){var d=u.getEdge(),v=d.getCoordinates();if(0>c||c+1>=v.length||v[c].y===v[c+1].y)return-1;var x=ct.LEFT;return v[c].y<v[c+1].y&&(x=ct.RIGHT),x},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(u){for(var c=u.getEdge().getCoordinates(),d=0;d<c.length-1;d++)(this.minCoord===null||c[d].x>this.minCoord.x)&&(this.minDe=u,this.minIndex=d,this.minCoord=c[d])},findRightmostEdgeAtNode:function(){var u=this.minDe.getNode(),c=u.getEdges();this.minDe=c.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(u){for(var c=u.iterator();c.hasNext();){var d=c.next();d.isForward()&&this.checkForRightmostCoordinate(d)}M.isTrue(this.minIndex!==0||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),this.minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var v=this.getRightmostSide(this.minDe,this.minIndex);v===ct.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return oa}}),hi.prototype.addLast=function(u){this.array_.push(u)},hi.prototype.removeFirst=function(){return this.array_.shift()},hi.prototype.isEmpty=function(){return this.array_.length===0},a(Wa.prototype,{clearVisitedEdges:function(){for(var u=this.dirEdgeList.iterator();u.hasNext();){var c=u.next();c.setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(u){for(var c=null,d=u.getEdges().iterator();d.hasNext();){var v=d.next();if(v.isVisited()||v.getSym().isVisited()){c=v;break}}if(c===null)throw new sr("unable to find edge to compute depths at "+u.getCoordinate());u.getEdges().computeDepths(c);for(var d=u.getEdges().iterator();d.hasNext();){var v=d.next();v.setVisited(!0),this.copySymDepths(v)}},computeDepth:function(u){this.clearVisitedEdges();var c=this.finder.getEdge();c.getNode(),c.getLabel(),c.setEdgeDepths(ct.RIGHT,u),this.copySymDepths(c),this.computeDepths(c)},create:function(u){this.addReachable(u),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var u=this.dirEdgeList.iterator();u.hasNext();){var c=u.next();c.getDepth(ct.RIGHT)>=1&&c.getDepth(ct.LEFT)<=0&&!c.isInteriorAreaEdge()&&c.setInResult(!0)}},computeDepths:function(u){var c=new X,d=new hi,v=u.getNode();for(d.addLast(v),c.add(v),u.setVisited(!0);!d.isEmpty();){var x=d.removeFirst();c.add(x),this.computeNodeDepth(x);for(var I=x.getEdges().iterator();I.hasNext();){var R=I.next(),J=R.getSym();if(!J.isVisited()){var ge=J.getNode();c.contains(ge)||(d.addLast(ge),c.add(ge))}}}},compareTo:function(u){var c=u;return this.rightMostCoord.x<c.rightMostCoord.x?-1:this.rightMostCoord.x>c.rightMostCoord.x?1:0},getEnvelope:function(){if(this.env===null){for(var u=new re,c=this.dirEdgeList.iterator();c.hasNext();)for(var d=c.next(),v=d.getEdge().getCoordinates(),x=0;x<v.length-1;x++)u.expandToInclude(v[x]);this.env=u}return this.env},addReachable:function(u){var c=new Kn;for(c.add(u);!c.empty();){var d=c.pop();this.add(d,c)}},copySymDepths:function(u){var c=u.getSym();c.setDepth(ct.LEFT,u.getDepth(ct.RIGHT)),c.setDepth(ct.RIGHT,u.getDepth(ct.LEFT))},add:function(u,c){u.setVisited(!0),this.nodes.add(u);for(var d=u.getEdges().iterator();d.hasNext();){var v=d.next();this.dirEdgeList.add(v);var x=v.getSym(),I=x.getNode();I.isVisited()||c.push(I)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[p]},getClass:function(){return Wa}}),a(Sr.prototype,{isDeletable:function(u,c,d,v){var x=this.inputLine[u],I=this.inputLine[c],R=this.inputLine[d];return this.isConcave(x,I,R)&&this.isShallow(x,I,R,v)?this.isShallowSampled(x,I,u,d,v):!1},deleteShallowConcavities:function(){for(var u=1,c=(this.inputLine.length-1,this.findNextNonDeletedIndex(u)),d=this.findNextNonDeletedIndex(c),v=!1;d<this.inputLine.length;){var x=!1;this.isDeletable(u,c,d,this.distanceTol)&&(this.isDeleted[c]=Sr.DELETE,x=!0,v=!0),u=x?d:c,c=this.findNextNonDeletedIndex(u),d=this.findNextNonDeletedIndex(c)}return v},isShallowConcavity:function(u,c,d,v){var x=rt.computeOrientation(u,c,d),I=x===this.angleOrientation;if(!I)return!1;var R=rt.distancePointLine(c,u,d);return v>R},isShallowSampled:function(u,c,d,v,x){var I=Math.trunc((v-d)/Sr.NUM_PTS_TO_CHECK);0>=I&&(I=1);for(var R=d;v>R;R+=I)if(!this.isShallow(u,c,this.inputLine[R],x))return!1;return!0},isConcave:function(c,d,v){var x=rt.computeOrientation(c,d,v),I=x===this.angleOrientation;return I},simplify:function(u){this.distanceTol=Math.abs(u),0>u&&(this.angleOrientation=rt.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var c=!1;do c=this.deleteShallowConcavities();while(c);return this.collapseLine()},findNextNonDeletedIndex:function(u){for(var c=u+1;c<this.inputLine.length&&this.isDeleted[c]===Sr.DELETE;)c++;return c},isShallow:function(u,c,d,v){var x=rt.distancePointLine(c,u,d);return v>x},collapseLine:function(){for(var u=new te,c=0;c<this.inputLine.length;c++)this.isDeleted[c]!==Sr.DELETE&&u.add(this.inputLine[c]);return u.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Sr}}),Sr.simplify=function(u,c){var d=new Sr(u);return d.simplify(c)},Sr.INIT=0,Sr.DELETE=1,Sr.KEEP=1,Sr.NUM_PTS_TO_CHECK=10,a(Ki.prototype,{getCoordinates:function(){var u=this.ptList.toArray(Ki.COORDINATE_ARRAY_TYPE);return u},setPrecisionModel:function(u){this.precisionModel=u},addPt:function(u){var c=new N(u);return this.precisionModel.makePrecise(c),this.isRedundant(c)?null:void this.ptList.add(c)},reverse:function(){},addPts:function(u,c){if(c)for(var d=0;d<u.length;d++)this.addPt(u[d]);else for(var d=u.length-1;d>=0;d--)this.addPt(u[d])},isRedundant:function(u){if(this.ptList.size()<1)return!1;var c=this.ptList.get(this.ptList.size()-1),d=u.distance(c);return d<this.minimimVertexDistance},toString:function(){var u=new Ut,c=u.createLineString(this.getCoordinates());return c.toString()},closeRing:function(){if(this.ptList.size()<1)return null;var u=new N(this.ptList.get(0)),c=this.ptList.get(this.ptList.size()-1);return this.ptList.size()>=2&&this.ptList.get(this.ptList.size()-2),u.equals(c)?null:void this.ptList.add(u)},setMinimumVertexDistance:function(u){this.minimimVertexDistance=u},interfaces_:function(){return[]},getClass:function(){return Ki}}),Ki.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),a(Si.prototype,{addNextSegment:function(u,c){if(this.s0=this.s1,this.s1=this.s2,this.s2=u,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var d=rt.computeOrientation(this.s0,this.s1,this.s2),v=d===rt.CLOCKWISE&&this.side===ct.LEFT||d===rt.COUNTERCLOCKWISE&&this.side===ct.RIGHT;d===0?this.addCollinear(c):v?this.addOutsideTurn(d,c):this.addInsideTurn(d,c)},addLineEndCap:function(u,c){var d=new Qt(u,c),v=new Qt;this.computeOffsetSegment(d,ct.LEFT,this.distance,v);var x=new Qt;this.computeOffsetSegment(d,ct.RIGHT,this.distance,x);var I=c.x-u.x,R=c.y-u.y,J=Math.atan2(R,I);switch(this.bufParams.getEndCapStyle()){case In.CAP_ROUND:this.segList.addPt(v.p1),this.addFilletArc(c,J+Math.PI/2,J-Math.PI/2,rt.CLOCKWISE,this.distance),this.segList.addPt(x.p1);break;case In.CAP_FLAT:this.segList.addPt(v.p1),this.segList.addPt(x.p1);break;case In.CAP_SQUARE:var ge=new N;ge.x=Math.abs(this.distance)*Math.cos(J),ge.y=Math.abs(this.distance)*Math.sin(J);var Ie=new N(v.p1.x+ge.x,v.p1.y+ge.y),ze=new N(x.p1.x+ge.x,x.p1.y+ge.y);this.segList.addPt(Ie),this.segList.addPt(ze)}},getCoordinates:function(){var u=this.segList.getCoordinates();return u},addMitreJoin:function(u,c,d,v){var x=!0,I=null;try{I=Pe.intersection(c.p0,c.p1,d.p0,d.p1);var R=0>=v?1:I.distance(u)/Math.abs(v);R>this.bufParams.getMitreLimit()&&(x=!1)}catch(J){if(!(J instanceof V))throw J;I=new N(0,0),x=!1}finally{}x?this.segList.addPt(I):this.addLimitedMitreJoin(c,d,v,this.bufParams.getMitreLimit())},addFilletCorner:function(u,c,d,v,x){var I=c.x-u.x,R=c.y-u.y,J=Math.atan2(R,I),ge=d.x-u.x,Ie=d.y-u.y,ze=Math.atan2(Ie,ge);v===rt.CLOCKWISE?ze>=J&&(J+=2*Math.PI):J>=ze&&(J-=2*Math.PI),this.segList.addPt(c),this.addFilletArc(u,J,ze,v,x),this.segList.addPt(d)},addOutsideTurn:function(u,c){return this.offset0.p1.distance(this.offset1.p0)<this.distance*Si.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===In.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===In.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(c&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,u,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(u){this.segList.addPt(new N(u.x+this.distance,u.y+this.distance)),this.segList.addPt(new N(u.x+this.distance,u.y-this.distance)),this.segList.addPt(new N(u.x-this.distance,u.y-this.distance)),this.segList.addPt(new N(u.x-this.distance,u.y+this.distance)),this.segList.closeRing()},addSegments:function(u,c){this.segList.addPts(u,c)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(u,c,d){this.s1=u,this.s2=c,this.side=d,this.seg1.setCoordinates(u,c),this.computeOffsetSegment(this.seg1,d,this.distance,this.offset1)},addLimitedMitreJoin:function(u,c,d,v){var x=this.seg0.p1,I=en.angle(x,this.seg0.p0),R=(en.angle(x,this.seg1.p1),en.angleBetweenOriented(this.seg0.p0,x,this.seg1.p1)),J=R/2,ge=en.normalize(I+J),Ie=en.normalize(ge+Math.PI),ze=v*d,Ve=ze*Math.abs(Math.sin(J)),st=d-Ve,Rt=x.x+ze*Math.cos(Ie),ln=x.y+ze*Math.sin(Ie),vn=new N(Rt,ln),Xn=new Qt(x,vn),vr=Xn.pointAlongOffset(1,st),Ri=Xn.pointAlongOffset(1,-st);this.side===ct.LEFT?(this.segList.addPt(vr),this.segList.addPt(Ri)):(this.segList.addPt(Ri),this.segList.addPt(vr))},computeOffsetSegment:function(u,c,d,v){var x=c===ct.LEFT?1:-1,I=u.p1.x-u.p0.x,R=u.p1.y-u.p0.y,J=Math.sqrt(I*I+R*R),ge=x*d*I/J,Ie=x*d*R/J;v.p0.x=u.p0.x-Ie,v.p0.y=u.p0.y+ge,v.p1.x=u.p1.x-Ie,v.p1.y=u.p1.y+ge},addFilletArc:function(u,c,d,v,x){var I=v===rt.CLOCKWISE?-1:1,R=Math.abs(c-d),J=Math.trunc(R/this.filletAngleQuantum+.5);if(1>J)return null;var ge=null,Ie=null;ge=0,Ie=R/J;for(var ze=ge,Ve=new N;R>ze;){var st=c+I*ze;Ve.x=u.x+x*Math.cos(st),Ve.y=u.y+x*Math.sin(st),this.segList.addPt(Ve),ze+=Ie}},addInsideTurn:function(u,c){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*Si.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var d=new N((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(d);var v=new N((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(v)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(u){var c=new N(u.x+this.distance,u.y);this.segList.addPt(c),this.addFilletArc(u,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(u,c){this.segList.addPt(u.p1),this.segList.addPt(c.p0)},init:function(u){this.distance=u,this.maxCurveSegmentError=u*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new Ki,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(u*Si.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(u){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var c=this.li.getIntersectionNum();c>=2&&(this.bufParams.getJoinStyle()===In.JOIN_BEVEL||this.bufParams.getJoinStyle()===In.JOIN_MITRE?(u&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,rt.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return Si}}),Si.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Si.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Si.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Si.MAX_CLOSING_SEG_LEN_FACTOR=80,a(sa.prototype,{getOffsetCurve:function(u,c){if(this.distance=c,c===0)return null;var d=0>c,v=Math.abs(c),x=this.getSegGen(v);u.length<=1?this.computePointCurve(u[0],x):this.computeOffsetCurve(u,d,x);var I=x.getCoordinates();return d&&He.reverse(I),I},computeSingleSidedBufferCurve:function(u,c,d){var v=this.simplifyTolerance(this.distance);if(c){d.addSegments(u,!0);var x=Sr.simplify(u,-v),I=x.length-1;d.initSideSegments(x[I],x[I-1],ct.LEFT),d.addFirstSegment();for(var R=I-2;R>=0;R--)d.addNextSegment(x[R],!0)}else{d.addSegments(u,!1);var J=Sr.simplify(u,v),ge=J.length-1;d.initSideSegments(J[0],J[1],ct.LEFT),d.addFirstSegment();for(var R=2;ge>=R;R++)d.addNextSegment(J[R],!0)}d.addLastSegment(),d.closeRing()},computeRingBufferCurve:function(u,c,d){var v=this.simplifyTolerance(this.distance);c===ct.RIGHT&&(v=-v);var x=Sr.simplify(u,v),I=x.length-1;d.initSideSegments(x[I-1],x[0],c);for(var R=1;I>=R;R++){var J=R!==1;d.addNextSegment(x[R],J)}d.closeRing()},computeLineBufferCurve:function(u,c){var d=this.simplifyTolerance(this.distance),v=Sr.simplify(u,d),x=v.length-1;c.initSideSegments(v[0],v[1],ct.LEFT);for(var I=2;x>=I;I++)c.addNextSegment(v[I],!0);c.addLastSegment(),c.addLineEndCap(v[x-1],v[x]);var R=Sr.simplify(u,-d),J=R.length-1;c.initSideSegments(R[J],R[J-1],ct.LEFT);for(var I=J-2;I>=0;I--)c.addNextSegment(R[I],!0);c.addLastSegment(),c.addLineEndCap(R[1],R[0]),c.closeRing()},computePointCurve:function(u,c){switch(this.bufParams.getEndCapStyle()){case In.CAP_ROUND:c.createCircle(u);break;case In.CAP_SQUARE:c.createSquare(u)}},getLineCurve:function(u,c){if(this.distance=c,0>c&&!this.bufParams.isSingleSided()||c===0)return null;var d=Math.abs(c),v=this.getSegGen(d);if(u.length<=1)this.computePointCurve(u[0],v);else if(this.bufParams.isSingleSided()){var x=0>c;this.computeSingleSidedBufferCurve(u,x,v)}else this.computeLineBufferCurve(u,v);var I=v.getCoordinates();return I},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(u){return u*this.bufParams.getSimplifyFactor()},getRingCurve:function(u,c,d){if(this.distance=d,u.length<=2)return this.getLineCurve(u,d);if(d===0)return sa.copyCoordinates(u);var v=this.getSegGen(d);return this.computeRingBufferCurve(u,c,v),v.getCoordinates()},computeOffsetCurve:function(u,c,d){var v=this.simplifyTolerance(this.distance);if(c){var x=Sr.simplify(u,-v),I=x.length-1;d.initSideSegments(x[I],x[I-1],ct.LEFT),d.addFirstSegment();for(var R=I-2;R>=0;R--)d.addNextSegment(x[R],!0)}else{var J=Sr.simplify(u,v),ge=J.length-1;d.initSideSegments(J[0],J[1],ct.LEFT),d.addFirstSegment();for(var R=2;ge>=R;R++)d.addNextSegment(J[R],!0)}d.addLastSegment()},getSegGen:function(u){return new Si(this.precisionModel,this.bufParams,u)},interfaces_:function(){return[]},getClass:function(){return sa}}),sa.copyCoordinates=function(u){for(var c=new Array(u.length).fill(null),d=0;d<c.length;d++)c[d]=new N(u[d]);return c},a(ua.prototype,{findStabbedSegments:function(){if(arguments.length===1){for(var u=arguments[0],c=new U,d=this.subgraphs.iterator();d.hasNext();){var v=d.next(),x=v.getEnvelope();u.y<x.getMinY()||u.y>x.getMaxY()||this.findStabbedSegments(u,v.getDirectedEdges(),c)}return c}if(arguments.length===3){if(T(arguments[2],k)&&arguments[0]instanceof N&&arguments[1]instanceof zi)for(var I=arguments[0],R=arguments[1],J=arguments[2],ge=R.getEdge().getCoordinates(),d=0;d<ge.length-1;d++){this.seg.p0=ge[d],this.seg.p1=ge[d+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var Ie=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(Ie<I.x||this.seg.isHorizontal()||I.y<this.seg.p0.y||I.y>this.seg.p1.y||rt.computeOrientation(this.seg.p0,this.seg.p1,I)===rt.RIGHT)){var ze=R.getDepth(ct.LEFT);this.seg.p0.equals(ge[d])||(ze=R.getDepth(ct.RIGHT));var Ve=new Ra(this.seg,ze);J.add(Ve)}}else if(T(arguments[2],k)&&arguments[0]instanceof N&&T(arguments[1],k))for(var st=arguments[0],Rt=arguments[1],ln=arguments[2],d=Rt.iterator();d.hasNext();){var vn=d.next();vn.isForward()&&this.findStabbedSegments(st,vn,ln)}}},getDepth:function(u){var c=this.findStabbedSegments(u);if(c.size()===0)return 0;var d=Qi.min(c);return d.leftDepth},interfaces_:function(){return[]},getClass:function(){return ua}}),a(Ra.prototype,{compareTo:function(u){var c=u;if(this.upwardSeg.minX()>=c.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=c.upwardSeg.minX())return-1;var d=this.upwardSeg.orientationIndex(c.upwardSeg);return d!==0?d:(d=-1*c.upwardSeg.orientationIndex(this.upwardSeg),d!==0?d:this.upwardSeg.compareTo(c.upwardSeg))},compareX:function(u,c){var d=u.p0.compareTo(c.p0);return d!==0?d:u.p1.compareTo(c.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[p]},getClass:function(){return Ra}}),ua.DepthSegment=Ra,a(Ja.prototype,{addPoint:function(u){if(this.distance<=0)return null;var c=u.getCoordinates(),d=this.curveBuilder.getLineCurve(c,this.distance);this.addCurve(d,S.EXTERIOR,S.INTERIOR)},addPolygon:function(u){var c=this.distance,d=ct.LEFT;this.distance<0&&(c=-this.distance,d=ct.RIGHT);var v=u.getExteriorRing(),x=He.removeRepeatedPoints(v.getCoordinates());if(this.distance<0&&this.isErodedCompletely(v,this.distance)||this.distance<=0&&x.length<3)return null;this.addPolygonRing(x,c,d,S.EXTERIOR,S.INTERIOR);for(var I=0;I<u.getNumInteriorRing();I++){var R=u.getInteriorRingN(I),J=He.removeRepeatedPoints(R.getCoordinates());this.distance>0&&this.isErodedCompletely(R,-this.distance)||this.addPolygonRing(J,c,ct.opposite(d),S.INTERIOR,S.EXTERIOR)}},isTriangleErodedCompletely:function(u,c){var d=new Rn(u[0],u[1],u[2]),v=d.inCentre(),x=rt.distancePointLine(v,d.p0,d.p1);return x<Math.abs(c)},addLineString:function(u){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var c=He.removeRepeatedPoints(u.getCoordinates()),d=this.curveBuilder.getLineCurve(c,this.distance);this.addCurve(d,S.EXTERIOR,S.INTERIOR)},addCurve:function(u,c,d){if(u===null||u.length<2)return null;var v=new Ir(u,new Jn(0,S.BOUNDARY,c,d));this.curveList.add(v)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(u,c,d,v,x){if(c===0&&u.length<be.MINIMUM_VALID_SIZE)return null;var I=v,R=x;u.length>=be.MINIMUM_VALID_SIZE&&rt.isCCW(u)&&(I=x,R=v,d=ct.opposite(d));var J=this.curveBuilder.getRingCurve(u,d,c);this.addCurve(J,I,R)},add:function(u){if(u.isEmpty())return null;if(u instanceof Kt)this.addPolygon(u);else if(u instanceof Wt)this.addLineString(u);else if(u instanceof Lt)this.addPoint(u);else if(u instanceof Ee)this.addCollection(u);else if(u instanceof Pt)this.addCollection(u);else if(u instanceof pe)this.addCollection(u);else{if(!(u instanceof Yt))throw new UnsupportedOperationException(u.getClass().getName());this.addCollection(u)}},isErodedCompletely:function(u,c){var d=u.getCoordinates();if(d.length<4)return 0>c;if(d.length===4)return this.isTriangleErodedCompletely(d,c);var v=u.getEnvelopeInternal(),x=Math.min(v.getHeight(),v.getWidth());return 0>c&&2*Math.abs(c)>x},addCollection:function(u){for(var c=0;c<u.getNumGeometries();c++){var d=u.getGeometryN(c);this.add(d)}},interfaces_:function(){return[]},getClass:function(){return Ja}}),a(Fa.prototype,{isTrivialIntersection:function(u,c,d,v){if(u===d&&this.li.getIntersectionNum()===1){if(Fa.isAdjacentSegments(c,v))return!0;if(u.isClosed()){var x=u.size()-1;if(c===0&&v===x||v===0&&c===x)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(u,c,d,v){if(u===d&&c===v)return null;this.numTests++;var x=u.getCoordinates()[c],I=u.getCoordinates()[c+1],R=d.getCoordinates()[v],J=d.getCoordinates()[v+1];this.li.computeIntersection(x,I,R,J),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(u,c,d,v)||(this._hasIntersection=!0,u.addIntersections(this.li,c,0),d.addIntersections(this.li,v,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[ta]},getClass:function(){return Fa}}),Fa.isAdjacentSegments=function(u,c){return Math.abs(u-c)===1},a(Yi.prototype,{setWorkingPrecisionModel:function(u){this.workingPrecisionModel=u},insertUniqueEdge:function(u){var c=this.edgeList.findEqualEdge(u);if(c!==null){var d=c.getLabel(),v=u.getLabel();c.isPointwiseEqual(u)||(v=new Jn(u.getLabel()),v.flip()),d.merge(v);var x=Yi.depthDelta(v),I=c.getDepthDelta(),R=I+x;c.setDepthDelta(R)}else this.edgeList.add(u),u.setDepthDelta(Yi.depthDelta(u.getLabel()))},buildSubgraphs:function(u,c){for(var d=new U,v=u.iterator();v.hasNext();){var x=v.next(),I=x.getRightmostCoordinate(),R=new ua(d),J=R.getDepth(I);x.computeDepth(J),x.findResultEdges(),d.add(x),c.add(x.getDirectedEdges(),x.getNodes())}},createSubgraphs:function(u){for(var c=new U,d=u.getNodes().iterator();d.hasNext();){var v=d.next();if(!v.isVisited()){var x=new Wa;x.create(v),c.add(x)}}return Qi.sort(c,Qi.reverseOrder()),c},createEmptyResultGeometry:function(){var u=this.geomFact.createPolygon();return u},getNoder:function(u){if(this.workingNoder!==null)return this.workingNoder;var c=new yi,d=new Zt;return d.setPrecisionModel(u),c.setSegmentIntersector(new Fa(d)),c},buffer:function(u,c){var d=this.workingPrecisionModel;d===null&&(d=u.getPrecisionModel()),this.geomFact=u.getFactory();var v=new sa(d,this.bufParams),x=new Ja(u,c,v),I=x.getCurves();if(I.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(I,d),this.graph=new Rr(new Pr),this.graph.addEdges(this.edgeList.getEdges());var R=this.createSubgraphs(this.graph),J=new Ea(this.geomFact);this.buildSubgraphs(R,J);var ge=J.getPolygons();if(ge.size()<=0)return this.createEmptyResultGeometry();var Ie=this.geomFact.buildGeometry(ge);return Ie},computeNodedEdges:function(u,c){var d=this.getNoder(c);d.computeNodes(u);for(var v=d.getNodedSubstrings(),x=v.iterator();x.hasNext();){var I=x.next(),R=I.getCoordinates();if(R.length!==2||!R[0].equals2D(R[1])){var J=I.getData(),ge=new Br(I.getCoordinates(),new Jn(J));this.insertUniqueEdge(ge)}}},setNoder:function(u){this.workingNoder=u},interfaces_:function(){return[]},getClass:function(){return Yi}}),Yi.depthDelta=function(u){var c=u.getLocation(0,ct.LEFT),d=u.getLocation(0,ct.RIGHT);return c===S.INTERIOR&&d===S.EXTERIOR?1:c===S.EXTERIOR&&d===S.INTERIOR?-1:0},Yi.convertSegStrings=function(u){for(var c=new Ut,d=new U;u.hasNext();){var v=u.next(),x=c.createLineString(v.getCoordinates());d.add(x)}return c.buildGeometry(d)},a(Ca.prototype,{checkEndPtVertexIntersections:function(){if(arguments.length===0)for(var u=this.segStrings.iterator();u.hasNext();){var c=u.next(),d=c.getCoordinates();this.checkEndPtVertexIntersections(d[0],this.segStrings),this.checkEndPtVertexIntersections(d[d.length-1],this.segStrings)}else if(arguments.length===2){for(var v=arguments[0],x=arguments[1],u=x.iterator();u.hasNext();)for(var c=u.next(),d=c.getCoordinates(),I=1;I<d.length-1;I++)if(d[I].equals(v))throw new C("found endpt/interior pt intersection at index "+I+" :pt "+v)}},checkInteriorIntersections:function(){if(arguments.length===0)for(var u=this.segStrings.iterator();u.hasNext();)for(var c=u.next(),d=this.segStrings.iterator();d.hasNext();){var v=d.next();this.checkInteriorIntersections(c,v)}else if(arguments.length===2)for(var x=arguments[0],I=arguments[1],R=x.getCoordinates(),J=I.getCoordinates(),ge=0;ge<R.length-1;ge++)for(var Ie=0;Ie<J.length-1;Ie++)this.checkInteriorIntersections(x,ge,I,Ie);else if(arguments.length===4){var ze=arguments[0],Ve=arguments[1],st=arguments[2],Rt=arguments[3];if(ze===st&&Ve===Rt)return null;var ln=ze.getCoordinates()[Ve],vn=ze.getCoordinates()[Ve+1],Xn=st.getCoordinates()[Rt],vr=st.getCoordinates()[Rt+1];if(this.li.computeIntersection(ln,vn,Xn,vr),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,ln,vn)||this.hasInteriorIntersection(this.li,Xn,vr)))throw new C("found non-noded intersection at "+ln+"-"+vn+" and "+Xn+"-"+vr)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(arguments.length===0)for(var u=this.segStrings.iterator();u.hasNext();){var c=u.next();this.checkCollapses(c)}else if(arguments.length===1)for(var d=arguments[0],v=d.getCoordinates(),u=0;u<v.length-2;u++)this.checkCollapse(v[u],v[u+1],v[u+2])},hasInteriorIntersection:function(u,c,d){for(var v=0;v<u.getIntersectionNum();v++){var x=u.getIntersection(v);if(!x.equals(c)&&!x.equals(d))return!0}return!1},checkCollapse:function(u,c,d){if(u.equals(d))throw new C("found non-noded collapse at "+Ca.fact.createLineString([u,c,d]))},interfaces_:function(){return[]},getClass:function(){return Ca}}),Ca.fact=new Ut,a(ya.prototype,{intersectsScaled:function(u,c){var d=Math.min(u.x,c.x),v=Math.max(u.x,c.x),x=Math.min(u.y,c.y),I=Math.max(u.y,c.y),R=this.maxx<d||this.minx>v||this.maxy<x||this.miny>I;if(R)return!1;var J=this.intersectsToleranceSquare(u,c);return M.isTrue(!(R&&J),"Found bad envelope test"),J},initCorners:function(u){var c=.5;this.minx=u.x-c,this.maxx=u.x+c,this.miny=u.y-c,this.maxy=u.y+c,this.corner[0]=new N(this.maxx,this.maxy),this.corner[1]=new N(this.minx,this.maxy),this.corner[2]=new N(this.minx,this.miny),this.corner[3]=new N(this.maxx,this.miny)},intersects:function(u,c){return this.scaleFactor===1?this.intersectsScaled(u,c):(this.copyScaled(u,this.p0Scaled),this.copyScaled(c,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(u){return Math.round(u*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(u,c){c.x=this.scale(u.x),c.y=this.scale(u.y)},getSafeEnvelope:function(){if(this.safeEnv===null){var u=ya.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new re(this.originalPt.x-u,this.originalPt.x+u,this.originalPt.y-u,this.originalPt.y+u)}return this.safeEnv},intersectsPixelClosure:function(u,c){return this.li.computeIntersection(u,c,this.corner[0],this.corner[1]),this.li.hasIntersection()?!0:(this.li.computeIntersection(u,c,this.corner[1],this.corner[2]),this.li.hasIntersection()?!0:(this.li.computeIntersection(u,c,this.corner[2],this.corner[3]),this.li.hasIntersection()?!0:(this.li.computeIntersection(u,c,this.corner[3],this.corner[0]),!!this.li.hasIntersection())))},intersectsToleranceSquare:function(u,c){var d=!1,v=!1;return this.li.computeIntersection(u,c,this.corner[0],this.corner[1]),this.li.isProper()?!0:(this.li.computeIntersection(u,c,this.corner[1],this.corner[2]),this.li.isProper()?!0:(this.li.hasIntersection()&&(d=!0),this.li.computeIntersection(u,c,this.corner[2],this.corner[3]),this.li.isProper()?!0:(this.li.hasIntersection()&&(v=!0),this.li.computeIntersection(u,c,this.corner[3],this.corner[0]),this.li.isProper()||d&&v||u.equals(this.pt)?!0:!!c.equals(this.pt))))},addSnappedNode:function(u,c){var d=u.getCoordinate(c),v=u.getCoordinate(c+1);return this.intersects(d,v)?(u.addIntersection(this.getCoordinate(),c),!0):!1},interfaces_:function(){return[]},getClass:function(){return ya}}),ya.SAFE_ENV_EXPANSION_FACTOR=.75,a(Xi.prototype,{select:function(){if(arguments.length!==1){if(arguments.length===2){var u=arguments[0],c=arguments[1];u.getLineSegment(c,this.selectedSegment),this.select(this.selectedSegment)}}},interfaces_:function(){return[]},getClass:function(){return Xi}}),a(Ba.prototype,{snap:function(){if(arguments.length===1){var u=arguments[0];return this.snap(u,null,-1)}if(arguments.length===3){var c=arguments[0],d=arguments[1],v=arguments[2],x=c.getSafeEnvelope(),I=new ka(c,d,v);return this.index.query(x,{interfaces_:function(){return[Vt]},visitItem:function(R){var J=R;J.select(x,I)}}),I.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return Ba}}),A(ka,Xi),a(ka.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(arguments.length!==2)return Xi.prototype.select.apply(this,arguments);var u=arguments[0],c=arguments[1],d=u.getContext();return this.parentEdge!==null&&d===this.parentEdge&&c===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(d,c))},interfaces_:function(){return[]},getClass:function(){return ka}}),Ba.HotPixelSnapAction=ka,a(Ka.prototype,{processIntersections:function(u,c,d,v){if(u===d&&c===v)return null;var x=u.getCoordinates()[c],I=u.getCoordinates()[c+1],R=d.getCoordinates()[v],J=d.getCoordinates()[v+1];if(this.li.computeIntersection(x,I,R,J),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var ge=0;ge<this.li.getIntersectionNum();ge++)this.interiorIntersections.add(this.li.getIntersection(ge));u.addIntersections(this.li,c,0),d.addIntersections(this.li,v,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[ta]},getClass:function(){return Ka}}),a(Ya.prototype,{checkCorrectness:function(u){var c=Ir.getNodedSubstrings(u),d=new Ca(c);try{d.checkValid()}catch(v){if(!(v instanceof ue))throw v;v.printStackTrace()}finally{}},getNodedSubstrings:function(){return Ir.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(u,c){var d=this.findInteriorIntersections(u,c);this.computeIntersectionSnaps(d),this.computeVertexSnaps(u)},findInteriorIntersections:function(u,c){var d=new Ka(c);return this.noder.setSegmentIntersector(d),this.noder.computeNodes(u),d.getInteriorIntersections()},computeVertexSnaps:function(){if(T(arguments[0],F))for(var u=arguments[0],c=u.iterator();c.hasNext();){var d=c.next();this.computeVertexSnaps(d)}else if(arguments[0]instanceof Ir)for(var v=arguments[0],x=v.getCoordinates(),I=0;I<x.length;I++){var R=new ya(x[I],this.scaleFactor,this.li),J=this.pointSnapper.snap(R,v,I);J&&v.addIntersection(x[I],I)}},computeNodes:function(u){this.nodedSegStrings=u,this.noder=new yi,this.pointSnapper=new Ba(this.noder.getIndex()),this.snapRound(u,this.li)},computeIntersectionSnaps:function(u){for(var c=u.iterator();c.hasNext();){var d=c.next(),v=new ya(d,this.scaleFactor,this.li);this.pointSnapper.snap(v)}},interfaces_:function(){return[ea]},getClass:function(){return Ya}}),a(Ar.prototype,{bufferFixedPrecision:function(u){var c=new jr(new Ya(new pn(1)),u.getScale()),d=new Yi(this.bufParams);d.setWorkingPrecisionModel(u),d.setNoder(c),this.resultGeometry=d.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(arguments.length===0){for(var u=Ar.MAX_PRECISION_DIGITS;u>=0;u--){try{this.bufferReducedPrecision(u)}catch(x){if(!(x instanceof sr))throw x;this.saveException=x}finally{}if(this.resultGeometry!==null)return null}throw this.saveException}if(arguments.length===1){var c=arguments[0],d=Ar.precisionScaleFactor(this.argGeom,this.distance,c),v=new pn(d);this.bufferFixedPrecision(v)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),this.resultGeometry!==null)return null;var u=this.argGeom.getFactory().getPrecisionModel();u.getType()===pn.FIXED?this.bufferFixedPrecision(u):this.bufferReducedPrecision()},setQuadrantSegments:function(u){this.bufParams.setQuadrantSegments(u)},bufferOriginalPrecision:function(){try{var u=new Yi(this.bufParams);this.resultGeometry=u.buffer(this.argGeom,this.distance)}catch(c){if(!(c instanceof C))throw c;this.saveException=c}finally{}},getResultGeometry:function(u){return this.distance=u,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(u){this.bufParams.setEndCapStyle(u)},interfaces_:function(){return[]},getClass:function(){return Ar}}),Ar.bufferOp=function(){if(arguments.length===2){var u=arguments[0],c=arguments[1],d=new Ar(u),v=d.getResultGeometry(c);return v}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Ne&&typeof arguments[1]=="number"){var x=arguments[0],I=arguments[1],R=arguments[2],J=new Ar(x);J.setQuadrantSegments(R);var v=J.getResultGeometry(I);return v}if(arguments[2]instanceof In&&arguments[0]instanceof Ne&&typeof arguments[1]=="number"){var ge=arguments[0],Ie=arguments[1],ze=arguments[2],J=new Ar(ge,ze),v=J.getResultGeometry(Ie);return v}}else if(arguments.length===4){var Ve=arguments[0],st=arguments[1],Rt=arguments[2],ln=arguments[3],J=new Ar(Ve);J.setQuadrantSegments(Rt),J.setEndCapStyle(ln);var v=J.getResultGeometry(st);return v}},Ar.precisionScaleFactor=function(u,c,d){var v=u.getEnvelopeInternal(),x=G.max(Math.abs(v.getMaxX()),Math.abs(v.getMaxY()),Math.abs(v.getMinX()),Math.abs(v.getMinY())),I=c>0?c:0,R=x+2*I,J=Math.trunc(Math.log(R)/Math.log(10)+1),ge=d-J,Ie=Math.pow(10,ge);return Ie},Ar.CAP_ROUND=In.CAP_ROUND,Ar.CAP_BUTT=In.CAP_FLAT,Ar.CAP_FLAT=In.CAP_FLAT,Ar.CAP_SQUARE=In.CAP_SQUARE,Ar.MAX_PRECISION_DIGITS=12;var _s=Object.freeze({BufferOp:Ar,BufferParameters:In});a(m.prototype,{filter:function(u){u instanceof Kt&&this.comps.add(u)},interfaces_:function(){return[En]},getClass:function(){return m}}),m.getPolygons=function(){if(arguments.length===1){var u=arguments[0];return m.getPolygons(u,new U)}if(arguments.length===2){var c=arguments[0],d=arguments[1];return c instanceof Kt?d.add(c):c instanceof Yt&&c.apply(new m(d)),d}},a(w.prototype,{isInsideArea:function(){return this.segIndex===w.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return w}}),w.INSIDE_AREA=-1,a(P.prototype,{filter:function(u){u instanceof Lt&&this.pts.add(u)},interfaces_:function(){return[En]},getClass:function(){return P}}),P.getPoints=function(){if(arguments.length===1){var u=arguments[0];return u instanceof Lt?Qi.singletonList(u):P.getPoints(u,new U)}if(arguments.length===2){var c=arguments[0],d=arguments[1];return c instanceof Lt?d.add(c):c instanceof Yt&&c.apply(new P(d)),d}},a($.prototype,{filter:function(u){(u instanceof Lt||u instanceof Wt||u instanceof Kt)&&this.locations.add(new w(u,0,u.getCoordinate()))},interfaces_:function(){return[En]},getClass:function(){return $}}),$.getLocations=function(u){var c=new U;return u.apply(new $(c)),c},a(ne.prototype,{computeContainmentDistance:function(){if(arguments.length===0){var u=new Array(2).fill(null);if(this.computeContainmentDistance(0,u),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,u)}else if(arguments.length===2){var c=arguments[0],d=arguments[1],v=1-c,x=m.getPolygons(this.geom[c]);if(x.size()>0){var I=$.getLocations(this.geom[v]);if(this.computeContainmentDistance(I,x,d),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[v]=d[0],this.minDistanceLocation[c]=d[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&T(arguments[0],k)&&T(arguments[1],k)){for(var R=arguments[0],J=arguments[1],ge=arguments[2],Ie=0;Ie<R.size();Ie++)for(var ze=R.get(Ie),Ve=0;Ve<J.size();Ve++)if(this.computeContainmentDistance(ze,J.get(Ve),ge),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof w&&arguments[1]instanceof Kt){var st=arguments[0],Rt=arguments[1],ln=arguments[2],vn=st.getCoordinate();if(S.EXTERIOR!==this.ptLocator.locate(vn,Rt))return this.minDistance=0,ln[0]=st,ln[1]=new w(Rt,vn),null}}},computeMinDistanceLinesPoints:function(u,c,d){for(var v=0;v<u.size();v++)for(var x=u.get(v),I=0;I<c.size();I++){var R=c.get(I);if(this.computeMinDistance(x,R,d),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var u=new Array(2).fill(null),c=nr.getLines(this.geom[0]),d=nr.getLines(this.geom[1]),v=P.getPoints(this.geom[0]),x=P.getPoints(this.geom[1]);return this.computeMinDistanceLines(c,d,u),this.updateMinDistance(u,!1),this.minDistance<=this.terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistanceLinesPoints(c,x,u),this.updateMinDistance(u,!1),this.minDistance<=this.terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistanceLinesPoints(d,v,u),this.updateMinDistance(u,!0),this.minDistance<=this.terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistancePoints(v,x,u),void this.updateMinDistance(u,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(u,c){return u[0]===null?null:void(c?(this.minDistanceLocation[0]=u[1],this.minDistanceLocation[1]=u[0]):(this.minDistanceLocation[0]=u[0],this.minDistanceLocation[1]=u[1]))},nearestPoints:function(){this.computeMinDistance();var u=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return u},computeMinDistance:function(){if(arguments.length===0){if(this.minDistanceLocation!==null||(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof Wt&&arguments[1]instanceof Lt){var u=arguments[0],c=arguments[1],d=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this.minDistance)return null;for(var v=u.getCoordinates(),x=c.getCoordinate(),I=0;I<v.length-1;I++){var R=rt.distancePointLine(x,v[I],v[I+1]);if(R<this.minDistance){this.minDistance=R;var J=new Qt(v[I],v[I+1]),ge=J.closestPoint(x);d[0]=new w(u,I,ge),d[1]=new w(c,0,x)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Wt&&arguments[1]instanceof Wt){var Ie=arguments[0],ze=arguments[1],Ve=arguments[2];if(Ie.getEnvelopeInternal().distance(ze.getEnvelopeInternal())>this.minDistance)return null;for(var v=Ie.getCoordinates(),st=ze.getCoordinates(),I=0;I<v.length-1;I++)for(var Rt=0;Rt<st.length-1;Rt++){var R=rt.distanceLineLine(v[I],v[I+1],st[Rt],st[Rt+1]);if(R<this.minDistance){this.minDistance=R;var ln=new Qt(v[I],v[I+1]),vn=new Qt(st[Rt],st[Rt+1]),Xn=ln.closestPoints(vn);Ve[0]=new w(Ie,I,Xn[0]),Ve[1]=new w(ze,Rt,Xn[1])}if(this.minDistance<=this.terminateDistance)return null}}}},computeMinDistancePoints:function(u,c,d){for(var v=0;v<u.size();v++)for(var x=u.get(v),I=0;I<c.size();I++){var R=c.get(I),J=x.getCoordinate().distance(R.getCoordinate());if(J<this.minDistance&&(this.minDistance=J,d[0]=new w(x,0,x.getCoordinate()),d[1]=new w(R,0,R.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(this.geom[0]===null||this.geom[1]===null)throw new h;return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(u,c,d){for(var v=0;v<u.size();v++)for(var x=u.get(v),I=0;I<c.size();I++){var R=c.get(I);if(this.computeMinDistance(x,R,d),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return ne}}),ne.distance=function(u,c){var d=new ne(u,c);return d.distance()},ne.isWithinDistance=function(u,c,d){var v=new ne(u,c,d);return v.distance()<=d},ne.nearestPoints=function(u,c){var d=new ne(u,c);return d.nearestPoints()};var bs=Object.freeze({DistanceOp:ne});a(ve.prototype,{getCoordinates:function(){if(this.coordinates===null){for(var u=0,c=0,d=new te,v=this.directedEdges.iterator();v.hasNext();){var x=v.next();x.getEdgeDirection()?u++:c++,d.add(x.getEdge().getLine().getCoordinates(),!1,x.getEdgeDirection())}this.coordinates=d.toCoordinateArray(),c>u&&He.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(u){this.directedEdges.add(u)},interfaces_:function(){return[]},getClass:function(){return ve}}),a(De.prototype,{setVisited:function(u){this._isVisited=u},isMarked:function(){return this._isMarked},setData:function(u){this.data=u},getData:function(){return this.data},setMarked:function(u){this._isMarked=u},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(u){this.data=u},interfaces_:function(){return[]},getClass:function(){return De}}),De.getComponentWithVisitedState=function(u,c){for(;u.hasNext();){var d=u.next();if(d.isVisited()===c)return d}return null},De.setVisited=function(u,c){for(;u.hasNext();){var d=u.next();d.setVisited(c)}},De.setMarked=function(u,c){for(;u.hasNext();){var d=u.next();d.setMarked(c)}},A($e,De),a($e.prototype,{isRemoved:function(){return this.parentEdge===null},compareDirection:function(u){return this.quadrant>u.quadrant?1:this.quadrant<u.quadrant?-1:rt.computeOrientation(u.p0,u.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(u){var c=this.getClass().getName(),d=c.lastIndexOf("."),v=c.substring(d+1);u.print("  "+v+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(u){var c=u;return this.compareDirection(c)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(u){this.parentEdge=u},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(u){this.sym=u},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[p]},getClass:function(){return $e}}),$e.toEdges=function(u){for(var c=new U,d=u.iterator();d.hasNext();)c.add(d.next().parentEdge);return c},A(Ke,$e),a(Ke.prototype,{getNext:function(){return this.getToNode().getDegree()!==2?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(M.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return Ke}}),A(at,De),a(at.prototype,{isRemoved:function(){return this.dirEdge===null},setDirectedEdges:function(u,c){this.dirEdge=[u,c],u.setEdge(this),c.setEdge(this),u.setSym(c),c.setSym(u),u.getFromNode().addOutEdge(u),c.getFromNode().addOutEdge(c)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var u=arguments[0];return this.dirEdge[u]}if(arguments[0]instanceof dn){var c=arguments[0];return this.dirEdge[0].getFromNode()===c?this.dirEdge[0]:this.dirEdge[1].getFromNode()===c?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(u){return this.dirEdge[0].getFromNode()===u?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===u?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return at}}),a($t.prototype,{getNextEdge:function(u){var c=this.getIndex(u);return this.outEdges.get(this.getIndex(c+1))},getCoordinate:function(){var u=this.iterator();if(!u.hasNext())return null;var c=u.next();return c.getCoordinate()},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(Qi.sort(this.outEdges),this.sorted=!0)},remove:function(u){this.outEdges.remove(u)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(u){var c=this.getIndex(u);return this.outEdges.get(this.getIndex(c-1))},getIndex:function(){if(arguments[0]instanceof at){var u=arguments[0];this.sortEdges();for(var c=0;c<this.outEdges.size();c++){var d=this.outEdges.get(c);if(d.getEdge()===u)return c}return-1}if(arguments[0]instanceof $e){var v=arguments[0];this.sortEdges();for(var c=0;c<this.outEdges.size();c++){var d=this.outEdges.get(c);if(d===v)return c}return-1}if(Number.isInteger(arguments[0])){var x=arguments[0],I=x%this.outEdges.size();return 0>I&&(I+=this.outEdges.size()),I}},add:function(u){this.outEdges.add(u),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return $t}}),A(dn,De),a(dn.prototype,{isRemoved:function(){return this.pt===null},addOutEdge:function(u){this.deStar.add(u)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(arguments.length===0)this.pt=null;else if(arguments.length===1){var u=arguments[0];this.deStar.remove(u)}},getIndex:function(u){return this.deStar.getIndex(u)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return dn}}),dn.getEdgesBetween=function(u,c){var d=$e.toEdges(u.getOutEdges().getEdges()),v=new X(d),x=$e.toEdges(c.getOutEdges().getEdges());return v.retainAll(x),v},A(On,at),a(On.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return On}}),a(ti.prototype,{find:function(u){return this.nodeMap.get(u)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(u){return this.nodeMap.remove(u)},values:function(){return this.nodeMap.values()},add:function(u){return this.nodeMap.put(u.getCoordinate(),u),u},interfaces_:function(){return[]},getClass:function(){return ti}}),a(di.prototype,{findNodesOfDegree:function(u){for(var c=new U,d=this.nodeIterator();d.hasNext();){var v=d.next();v.getDegree()===u&&c.add(v)}return c},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof at){var u=arguments[0];this.remove(u.getDirEdge(0)),this.remove(u.getDirEdge(1)),this.edges.remove(u),u.remove()}else if(arguments[0]instanceof $e){var c=arguments[0],d=c.getSym();d!==null&&d.setSym(null),c.getFromNode().remove(c),c.remove(),this.dirEdges.remove(c)}else if(arguments[0]instanceof dn){for(var v=arguments[0],x=v.getOutEdges().getEdges(),I=x.iterator();I.hasNext();){var R=I.next(),d=R.getSym();d!==null&&this.remove(d),this.dirEdges.remove(R);var J=R.getEdge();J!==null&&this.edges.remove(J)}this.nodeMap.remove(v.getCoordinate()),v.remove()}},findNode:function(u){return this.nodeMap.find(u)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof at){var u=arguments[0];return this.edges.contains(u)}if(arguments[0]instanceof $e){var c=arguments[0];return this.dirEdges.contains(c)}},add:function(){if(arguments[0]instanceof dn){var u=arguments[0];this.nodeMap.add(u)}else if(arguments[0]instanceof at){var c=arguments[0];this.edges.add(c),this.add(c.getDirEdge(0)),this.add(c.getDirEdge(1))}else if(arguments[0]instanceof $e){var d=arguments[0];this.dirEdges.add(d)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return di}}),A(_a,di),a(_a.prototype,{addEdge:function(u){if(u.isEmpty())return null;var c=He.removeRepeatedPoints(u.getCoordinates());if(c.length<=1)return null;var d=c[0],v=c[c.length-1],x=this.getNode(d),I=this.getNode(v),R=new Ke(x,I,c[1],!0),J=new Ke(I,x,c[c.length-2],!1),ge=new On(u);ge.setDirectedEdges(R,J),this.add(ge)},getNode:function(u){var c=this.findNode(u);return c===null&&(c=new dn(u),this.add(c)),c},interfaces_:function(){return[]},getClass:function(){return _a}}),a(Di.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var u=this.graph.getNodes().iterator();u.hasNext();){var c=u.next();c.isMarked()||(M.isTrue(c.getDegree()===2),this.buildEdgeStringsStartingAt(c),c.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var u=this.graph.getNodes().iterator();u.hasNext();){var c=u.next();c.getDegree()!==2&&(this.buildEdgeStringsStartingAt(c),c.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(u){for(var c=u.getOutEdges().iterator();c.hasNext();){var d=c.next();d.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(d))}},merge:function(){if(this.mergedLineStrings!==null)return null;De.setMarked(this.graph.nodeIterator(),!1),De.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new U,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new U;for(var u=this.edgeStrings.iterator();u.hasNext();){var c=u.next();this.mergedLineStrings.add(c.toLineString())}},buildEdgeStringStartingWith:function(u){var c=new ve(this.factory),d=u;do c.add(d),d.getEdge().setMarked(!0),d=d.getNext();while(d!==null&&d!==u);return c},add:function(){if(arguments[0]instanceof Ne){var u=arguments[0];u.apply({interfaces_:function(){return[Oe]},filter:function(I){I instanceof Wt&&this.add(I)}})}else if(T(arguments[0],F)){var c=arguments[0];this.mergedLineStrings=null;for(var d=c.iterator();d.hasNext();){var v=d.next();this.add(v)}}else if(arguments[0]instanceof Wt){var x=arguments[0];this.factory===null&&(this.factory=x.getFactory()),this.graph.addEdge(x)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return Di}});var xs=Object.freeze({LineMerger:Di}),ws=Object.freeze({OverlayOp:Ot});A(ba,$e),a(ba.prototype,{getNext:function(){return this.next},isInRing:function(){return this.edgeRing!==null},setRing:function(u){this.edgeRing=u},setLabel:function(u){this.label=u},getLabel:function(){return this.label},setNext:function(u){this.next=u},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return ba}}),A(Xa,at),a(Xa.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return Xa}}),a(gi.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(this.ringPts===null){for(var u=new te,c=this.deList.iterator();c.hasNext();){var d=c.next(),v=d.getEdge();gi.addEdge(v.getLine().getCoordinates(),d.getEdgeDirection(),u)}this.ringPts=u.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),this.ringPts.length<=3?!1:(this.getRing(),this.ring.isValid())},build:function(u){var c=u;do this.add(c),c.setRing(this),c=c.getNext(),M.isTrue(c!==null,"found null DE in ring"),M.isTrue(c===u||!c.isInRing(),"found DE already in ring");while(c!==u)},isOuterHole:function(){return this._isHole?!this.hasShell():!1},getPolygon:function(){var u=null;if(this.holes!==null){u=new Array(this.holes.size()).fill(null);for(var c=0;c<this.holes.size();c++)u[c]=this.holes.get(c)}var d=this.factory.createPolygon(this.ring,u);return d},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof be){var u=arguments[0];this.holes===null&&(this.holes=new U),this.holes.add(u)}else if(arguments[0]instanceof gi){var c=arguments[0];c.setShell(this);var d=c.getRing();this.holes===null&&(this.holes=new U),this.holes.add(d)}},setIncluded:function(u){this._isIncluded=u,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var u=0;u<this.deList.size();u++){var c=this.deList.get(u),d=c.getSym().getRing();if(d.isOuterHole())return d}return null},computeHole:function(){var u=this.getRing();this._isHole=rt.isCCW(u.getCoordinates())},hasShell:function(){return this.shell!==null},isOuterShell:function(){return this.getOuterHole()!==null},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return $n.toLineString(new Fe(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(u){this.deList.add(u)},getRing:function(){if(this.ring!==null)return this.ring;this.getCoordinates(),this.ringPts.length<3&&oe.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(u){if(!(u instanceof ue))throw u;oe.out.println(this.ringPts)}finally{}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var u=0;u<this.deList.size();u++){var c=this.deList.get(u),d=c.getSym().getRing().getShell();if(d!==null&&d.isIncludedSet())return this.setIncluded(!d.isIncluded()),null}},setShell:function(u){this.shell=u},setProcessed:function(u){this._isProcessed=u},interfaces_:function(){return[]},getClass:function(){return gi}}),gi.findDirEdgesInRing=function(u){var c=u,d=new U;do d.add(c),c=c.getNext(),M.isTrue(c!==null,"found null DE in ring"),M.isTrue(c===u||!c.isInRing(),"found DE already in ring");while(c!==u);return d},gi.addEdge=function(u,c,d){if(c)for(var v=0;v<u.length;v++)d.add(u[v],!1);else for(var v=u.length-1;v>=0;v--)d.add(u[v],!1)},gi.findEdgeRingContaining=function(u,c){for(var d=u.getRing(),v=d.getEnvelopeInternal(),x=d.getCoordinateN(0),I=null,R=null,J=c.iterator();J.hasNext();){var ge=J.next(),Ie=ge.getRing(),ze=Ie.getEnvelopeInternal();if(!ze.equals(v)&&ze.contains(v)){x=He.ptNotInList(d.getCoordinates(),Ie.getCoordinates());var Ve=!1;rt.isPointInRing(x,Ie.getCoordinates())&&(Ve=!0),Ve&&(I===null||R.contains(ze))&&(I=ge,R=I.getRing().getEnvelopeInternal())}}return I},a(lo.prototype,{compare:function(u,c){var d=u,v=c;return d.getRing().getEnvelope().compareTo(v.getRing().getEnvelope())},interfaces_:function(){return[b]},getClass:function(){return lo}}),gi.EnvelopeComparator=lo,A(fr,di),a(fr.prototype,{findEdgeRing:function(u){var c=new gi(this.factory);return c.build(u),c},computeDepthParity:function(){if(arguments.length===0)for(;;){var u=null;if(u===null)return null;this.computeDepthParity(u)}},computeNextCWEdges:function(){for(var u=this.nodeIterator();u.hasNext();){var c=u.next();fr.computeNextCWEdges(c)}},addEdge:function(u){if(u.isEmpty())return null;var c=He.removeRepeatedPoints(u.getCoordinates());if(c.length<2)return null;var d=c[0],v=c[c.length-1],x=this.getNode(d),I=this.getNode(v),R=new ba(x,I,c[1],!0),J=new ba(I,x,c[c.length-2],!1),ge=new Xa(u);ge.setDirectedEdges(R,J),this.add(ge)},deleteCutEdges:function(){this.computeNextCWEdges(),fr.findLabeledEdgeRings(this.dirEdges);for(var u=new U,c=this.dirEdges.iterator();c.hasNext();){var d=c.next();if(!d.isMarked()){var v=d.getSym();if(d.getLabel()===v.getLabel()){d.setMarked(!0),v.setMarked(!0);var x=d.getEdge();u.add(x.getLine())}}}return u},getEdgeRings:function(){this.computeNextCWEdges(),fr.label(this.dirEdges,-1);var u=fr.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(u);for(var c=new U,d=this.dirEdges.iterator();d.hasNext();){var v=d.next();if(!v.isMarked()&&!v.isInRing()){var x=this.findEdgeRing(v);c.add(x)}}return c},getNode:function(u){var c=this.findNode(u);return c===null&&(c=new dn(u),this.add(c)),c},convertMaximalToMinimalEdgeRings:function(u){for(var c=u.iterator();c.hasNext();){var d=c.next(),v=d.getLabel(),x=fr.findIntersectionNodes(d,v);if(x!==null)for(var I=x.iterator();I.hasNext();){var R=I.next();fr.computeNextCCWEdges(R,v)}}},deleteDangles:function(){for(var u=this.findNodesOfDegree(1),c=new X,d=new Kn,v=u.iterator();v.hasNext();)d.push(v.next());for(;!d.isEmpty();){var x=d.pop();fr.deleteAllEdges(x);for(var I=x.getOutEdges().getEdges(),v=I.iterator();v.hasNext();){var R=v.next();R.setMarked(!0);var J=R.getSym();J!==null&&J.setMarked(!0);var ge=R.getEdge();c.add(ge.getLine());var Ie=R.getToNode();fr.getDegreeNonDeleted(Ie)===1&&d.push(Ie)}}return c},interfaces_:function(){return[]},getClass:function(){return fr}}),fr.findLabeledEdgeRings=function(u){for(var c=new U,d=1,v=u.iterator();v.hasNext();){var x=v.next();if(!(x.isMarked()||x.getLabel()>=0)){c.add(x);var I=gi.findDirEdgesInRing(x);fr.label(I,d),d++}}return c},fr.getDegreeNonDeleted=function(u){for(var c=u.getOutEdges().getEdges(),d=0,v=c.iterator();v.hasNext();){var x=v.next();x.isMarked()||d++}return d},fr.deleteAllEdges=function(u){for(var c=u.getOutEdges().getEdges(),d=c.iterator();d.hasNext();){var v=d.next();v.setMarked(!0);var x=v.getSym();x!==null&&x.setMarked(!0)}},fr.label=function(u,c){for(var d=u.iterator();d.hasNext();){var v=d.next();v.setLabel(c)}},fr.computeNextCWEdges=function(u){for(var c=u.getOutEdges(),d=null,v=null,x=c.getEdges().iterator();x.hasNext();){var I=x.next();if(!I.isMarked()){if(d===null&&(d=I),v!==null){var R=v.getSym();R.setNext(I)}v=I}}if(v!==null){var R=v.getSym();R.setNext(d)}},fr.computeNextCCWEdges=function(u,c){for(var d=u.getOutEdges(),v=null,x=null,I=d.getEdges(),R=I.size()-1;R>=0;R--){var J=I.get(R),ge=J.getSym(),Ie=null;J.getLabel()===c&&(Ie=J);var ze=null;ge.getLabel()===c&&(ze=ge),Ie===null&&ze===null||(ze!==null&&(x=ze),Ie!==null&&(x!==null&&(x.setNext(Ie),x=null),v===null&&(v=Ie)))}x!==null&&(M.isTrue(v!==null),x.setNext(v))},fr.getDegree=function(u,c){for(var d=u.getOutEdges().getEdges(),v=0,x=d.iterator();x.hasNext();){var I=x.next();I.getLabel()===c&&v++}return v},fr.findIntersectionNodes=function(u,c){var d=u,v=null;do{var x=d.getFromNode();fr.getDegree(x,c)>1&&(v===null&&(v=new U),v.add(x)),d=d.getNext(),M.isTrue(d!==null,"found null DE in ring"),M.isTrue(d===u||!d.isInRing(),"found DE already in ring")}while(d!==u);return v},a(Zr.prototype,{getGeometry:function(){return this.geomFactory===null&&(this.geomFactory=new Ut),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(Ut.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(u,c,d){for(var v=u.iterator();v.hasNext();){var x=v.next();x.isValid()?c.add(x):d.add(x.getLineString())}},polygonize:function(){if(this.polyList!==null||(this.polyList=new U,this.graph===null))return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var u=this.graph.getEdgeRings(),c=new U;this.invalidRingLines=new U,this.isCheckingRingsValid?this.findValidRings(u,c,this.invalidRingLines):c=u,this.findShellsAndHoles(c),Zr.assignHolesToShells(this.holeList,this.shellList),Qi.sort(this.shellList,new gi.EnvelopeComparator);var d=!0;this.extractOnlyPolygonal&&(Zr.findDisjointShells(this.shellList),d=!1),this.polyList=Zr.extractPolygons(this.shellList,d)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(T(arguments[0],F))for(var u=arguments[0],c=u.iterator();c.hasNext();){var d=c.next();this.add(d)}else if(arguments[0]instanceof Wt){var v=arguments[0];this.geomFactory=v.getFactory(),this.graph===null&&(this.graph=new fr(this.geomFactory)),this.graph.addEdge(v)}else if(arguments[0]instanceof Ne){var x=arguments[0];x.apply(this.lineStringAdder)}},setCheckRingsValid:function(u){this.isCheckingRingsValid=u},findShellsAndHoles:function(u){this.holeList=new U,this.shellList=new U;for(var c=u.iterator();c.hasNext();){var d=c.next();d.computeHole(),d.isHole()?this.holeList.add(d):this.shellList.add(d)}},interfaces_:function(){return[]},getClass:function(){return Zr}}),Zr.findOuterShells=function(u){for(var c=u.iterator();c.hasNext();){var d=c.next(),v=d.getOuterHole();v===null||v.isProcessed()||(d.setIncluded(!0),v.setProcessed(!0))}},Zr.extractPolygons=function(u,c){for(var d=new U,v=u.iterator();v.hasNext();){var x=v.next();(c||x.isIncluded())&&d.add(x.getPolygon())}return d},Zr.assignHolesToShells=function(u,c){for(var d=u.iterator();d.hasNext();){var v=d.next();Zr.assignHoleToShell(v,c)}},Zr.assignHoleToShell=function(u,c){var d=gi.findEdgeRingContaining(u,c);d!==null&&d.addHole(u)},Zr.findDisjointShells=function(u){Zr.findOuterShells(u);var c=null;do{c=!1;for(var d=u.iterator();d.hasNext();){var v=d.next();v.isIncludedSet()||(v.updateIncluded(),v.isIncludedSet()||(c=!0))}}while(c)},a($a.prototype,{filter:function(u){u instanceof Wt&&this.p.add(u)},interfaces_:function(){return[Oe]},getClass:function(){return $a}}),Zr.LineStringAdder=$a;var Es=Object.freeze({Polygonizer:Zr});a(hr.prototype,{createEdgeEndForNext:function(u,c,d,v){var x=d.segmentIndex+1;if(x>=u.getNumPoints()&&v===null)return null;var I=u.getCoordinate(x);v!==null&&v.segmentIndex===d.segmentIndex&&(I=v.coord);var R=new ei(u,d.coord,I,new Jn(u.getLabel()));c.add(R)},createEdgeEndForPrev:function(u,c,d,v){var x=d.segmentIndex;if(d.dist===0){if(x===0)return null;x--}var I=u.getCoordinate(x);v!==null&&v.segmentIndex>=x&&(I=v.coord);var R=new Jn(u.getLabel());R.flip();var J=new ei(u,d.coord,I,R);c.add(J)},computeEdgeEnds:function(){if(arguments.length===1){for(var u=arguments[0],c=new U,d=u;d.hasNext();){var v=d.next();this.computeEdgeEnds(v,c)}return c}if(arguments.length===2){var x=arguments[0],I=arguments[1],R=x.getEdgeIntersectionList();R.addEndpoints();var J=R.iterator(),ge=null,Ie=null;if(!J.hasNext())return null;var ze=J.next();do ge=Ie,Ie=ze,ze=null,J.hasNext()&&(ze=J.next()),Ie!==null&&(this.createEdgeEndForPrev(x,I,Ie,ge),this.createEdgeEndForNext(x,I,Ie,ze));while(Ie!==null)}},interfaces_:function(){return[]},getClass:function(){return hr}}),A(la,ei),a(la.prototype,{insert:function(u){this.edgeEnds.add(u)},print:function(u){u.println("EdgeEndBundle--> Label: "+this.label);for(var c=this.iterator();c.hasNext();){var d=c.next();d.print(u),u.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(u,c){for(var d=0,v=!1,x=this.iterator();x.hasNext();){var I=x.next(),R=I.getLabel().getLocation(u);R===S.BOUNDARY&&d++,R===S.INTERIOR&&(v=!0)}var R=S.NONE;v&&(R=S.INTERIOR),d>0&&(R=pr.determineBoundary(c,d)),this.label.setLocation(u,R)},computeLabelSide:function(u,c){for(var d=this.iterator();d.hasNext();){var v=d.next();if(v.getLabel().isArea()){var x=v.getLabel().getLocation(u,c);if(x===S.INTERIOR)return this.label.setLocation(u,c,S.INTERIOR),null;x===S.EXTERIOR&&this.label.setLocation(u,c,S.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(u){this.computeLabelSide(u,ct.LEFT),this.computeLabelSide(u,ct.RIGHT)},updateIM:function(u){Br.updateIM(this.label,u)},computeLabel:function(u){for(var c=!1,d=this.iterator();d.hasNext();){var v=d.next();v.getLabel().isArea()&&(c=!0)}c?this.label=new Jn(S.NONE,S.NONE,S.NONE):this.label=new Jn(S.NONE);for(var x=0;2>x;x++)this.computeLabelOn(x,u),c&&this.computeLabelSides(x)},interfaces_:function(){return[]},getClass:function(){return la}}),A(ja,Ui),a(ja.prototype,{updateIM:function(u){for(var c=this.iterator();c.hasNext();){var d=c.next();d.updateIM(u)}},insert:function(u){var c=this.edgeMap.get(u);c===null?(c=new la(u),this.insertEdgeEnd(u,c)):c.insert(u)},interfaces_:function(){return[]},getClass:function(){return ja}}),A(Za,xr),a(Za.prototype,{updateIMFromEdges:function(u){this.edges.updateIM(u)},computeIM:function(u){u.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return Za}}),A(Ga,Hi),a(Ga.prototype,{createNode:function(u){return new Za(u,new ja)},interfaces_:function(){return[]},getClass:function(){return Ga}}),a(Ia.prototype,{insertEdgeEnds:function(u){for(var c=u.iterator();c.hasNext();){var d=c.next();this.nodes.add(d)}},computeProperIntersectionIM:function(u,c){var d=this.arg[0].getGeometry().getDimension(),v=this.arg[1].getGeometry().getDimension(),x=u.hasProperIntersection(),I=u.hasProperInteriorIntersection();d===2&&v===2?x&&c.setAtLeast("212101212"):d===2&&v===1?(x&&c.setAtLeast("FFF0FFFF2"),I&&c.setAtLeast("1FFFFF1FF")):d===1&&v===2?(x&&c.setAtLeast("F0FFFFFF2"),I&&c.setAtLeast("1F1FFFFFF")):d===1&&v===1&&I&&c.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(u,c){for(var d=this.arg[u].getEdgeIterator();d.hasNext();){var v=d.next();v.isIsolated()&&(this.labelIsolatedEdge(v,c,this.arg[c].getGeometry()),this.isolatedEdges.add(v))}},labelIsolatedEdge:function(u,c,d){if(d.getDimension()>0){var v=this.ptLocator.locate(u.getCoordinate(),d);u.getLabel().setAllLocations(c,v)}else u.getLabel().setAllLocations(c,S.EXTERIOR)},computeIM:function(){var u=new sn;if(u.set(S.EXTERIOR,S.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(u),u;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var c=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(c,u);var d=new hr,v=d.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(v);var x=d.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(x),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(u),u},labelNodeEdges:function(){for(var u=this.nodes.iterator();u.hasNext();){var c=u.next();c.getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(u){for(var c=this.arg[u].getNodeIterator();c.hasNext();){var d=c.next(),v=this.nodes.addNode(d.getCoordinate());v.setLabel(u,d.getLabel().getLocation(u))}},labelIntersectionNodes:function(u){for(var c=this.arg[u].getEdgeIterator();c.hasNext();)for(var d=c.next(),v=d.getLabel().getLocation(u),x=d.getEdgeIntersectionList().iterator();x.hasNext();){var I=x.next(),R=this.nodes.find(I.coord);R.getLabel().isNull(u)&&(v===S.BOUNDARY?R.setLabelBoundary(u):R.setLabel(u,S.INTERIOR))}},labelIsolatedNode:function(u,c){var d=this.ptLocator.locate(u.getCoordinate(),this.arg[c].getGeometry());u.getLabel().setAllLocations(c,d)},computeIntersectionNodes:function(u){for(var c=this.arg[u].getEdgeIterator();c.hasNext();)for(var d=c.next(),v=d.getLabel().getLocation(u),x=d.getEdgeIntersectionList().iterator();x.hasNext();){var I=x.next(),R=this.nodes.addNode(I.coord);v===S.BOUNDARY?R.setLabelBoundary(u):R.getLabel().isNull(u)&&R.setLabel(u,S.INTERIOR)}},labelIsolatedNodes:function(){for(var u=this.nodes.iterator();u.hasNext();){var c=u.next(),d=c.getLabel();M.isTrue(d.getGeometryCount()>0,"node with empty label found"),c.isIsolated()&&(d.isNull(0)?this.labelIsolatedNode(c,0):this.labelIsolatedNode(c,1))}},updateIM:function(u){for(var c=this.isolatedEdges.iterator();c.hasNext();){var d=c.next();d.updateIM(u)}for(var v=this.nodes.iterator();v.hasNext();){var x=v.next();x.updateIM(u),x.updateIMFromEdges(u)}},computeDisjointIM:function(u){var c=this.arg[0].getGeometry();c.isEmpty()||(u.set(S.INTERIOR,S.EXTERIOR,c.getDimension()),u.set(S.BOUNDARY,S.EXTERIOR,c.getBoundaryDimension()));var d=this.arg[1].getGeometry();d.isEmpty()||(u.set(S.EXTERIOR,S.INTERIOR,d.getDimension()),u.set(S.EXTERIOR,S.BOUNDARY,d.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return Ia}}),a(Pa.prototype,{isContainedInBoundary:function(u){if(u instanceof Kt)return!1;if(u instanceof Lt)return this.isPointContainedInBoundary(u);if(u instanceof Wt)return this.isLineStringContainedInBoundary(u);for(var c=0;c<u.getNumGeometries();c++){var d=u.getGeometryN(c);if(!this.isContainedInBoundary(d))return!1}return!0},isLineSegmentContainedInBoundary:function(u,c){if(u.equals(c))return this.isPointContainedInBoundary(u);if(u.x===c.x){if(u.x===this.rectEnv.getMinX()||u.x===this.rectEnv.getMaxX())return!0}else if(u.y===c.y&&(u.y===this.rectEnv.getMinY()||u.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(u){for(var c=u.getCoordinateSequence(),d=new N,v=new N,x=0;x<c.size()-1;x++)if(c.getCoordinate(x,d),c.getCoordinate(x+1,v),!this.isLineSegmentContainedInBoundary(d,v))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof Lt){var u=arguments[0];return this.isPointContainedInBoundary(u.getCoordinate())}if(arguments[0]instanceof N){var c=arguments[0];return c.x===this.rectEnv.getMinX()||c.x===this.rectEnv.getMaxX()||c.y===this.rectEnv.getMinY()||c.y===this.rectEnv.getMaxY()}},contains:function(u){return this.rectEnv.contains(u.getEnvelopeInternal())?!this.isContainedInBoundary(u):!1},interfaces_:function(){return[]},getClass:function(){return Pa}}),Pa.contains=function(u,c){var d=new Pa(u);return d.contains(c)},a(co.prototype,{intersects:function(u,c){var d=new re(u,c);if(!this.rectEnv.intersects(d))return!1;if(this.rectEnv.intersects(u)||this.rectEnv.intersects(c))return!0;if(u.compareTo(c)>0){var v=u;u=c,c=v}var x=!1;return c.y>u.y&&(x=!0),x?this.li.computeIntersection(u,c,this.diagDown0,this.diagDown1):this.li.computeIntersection(u,c,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return co}}),a(Na.prototype,{applyTo:function(u){for(var c=0;c<u.getNumGeometries()&&!this._isDone;c++){var d=u.getGeometryN(c);if(d instanceof Yt)this.applyTo(d);else if(this.visit(d),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return Na}}),a(Qa.prototype,{intersects:function(u){if(!this.rectEnv.intersects(u.getEnvelopeInternal()))return!1;var c=new No(this.rectEnv);if(c.applyTo(u),c.intersects())return!0;var d=new Lo(this.rectangle);if(d.applyTo(u),d.containsPoint())return!0;var v=new Ao(this.rectangle);return v.applyTo(u),!!v.intersects()},interfaces_:function(){return[]},getClass:function(){return Qa}}),Qa.intersects=function(u,c){var d=new Qa(u);return d.intersects(c)},A(No,Na),a(No.prototype,{isDone:function(){return this._intersects===!0},visit:function(u){var c=u.getEnvelopeInternal();return this.rectEnv.intersects(c)?this.rectEnv.contains(c)?(this._intersects=!0,null):c.getMinX()>=this.rectEnv.getMinX()&&c.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):c.getMinY()>=this.rectEnv.getMinY()&&c.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return No}}),A(Lo,Na),a(Lo.prototype,{isDone:function(){return this._containsPoint===!0},visit:function(u){if(!(u instanceof Kt))return null;var c=u.getEnvelopeInternal();if(!this.rectEnv.intersects(c))return null;for(var d=new N,v=0;4>v;v++)if(this.rectSeq.getCoordinate(v,d),c.contains(d)&&gr.containsPointInPolygon(d,u))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return Lo}}),A(Ao,Na),a(Ao.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return this.hasIntersection===!0},visit:function(u){var c=u.getEnvelopeInternal();if(!this.rectEnv.intersects(c))return null;var d=nr.getLines(u);this.checkIntersectionWithLineStrings(d)},checkIntersectionWithLineStrings:function(u){for(var c=u.iterator();c.hasNext();){var d=c.next();if(this.checkIntersectionWithSegments(d),this.hasIntersection)return null}},checkIntersectionWithSegments:function(u){for(var c=u.getCoordinateSequence(),d=1;d<c.size();d++)if(c.getCoordinate(d-1,this.p0),c.getCoordinate(d,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return Ao}}),A(kn,Ai),a(kn.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return kn}}),kn.covers=function(u,c){return u.getEnvelopeInternal().covers(c.getEnvelopeInternal())?u.isRectangle()?!0:kn.relate(u,c).isCovers():!1},kn.intersects=function(u,c){return u.getEnvelopeInternal().intersects(c.getEnvelopeInternal())?u.isRectangle()?Qa.intersects(u,c):c.isRectangle()?Qa.intersects(c,u):kn.relate(u,c).isIntersects():!1},kn.touches=function(u,c){return u.getEnvelopeInternal().intersects(c.getEnvelopeInternal())?kn.relate(u,c).isTouches(u.getDimension(),c.getDimension()):!1},kn.within=function(u,c){return c.contains(u)},kn.coveredBy=function(u,c){return kn.covers(c,u)},kn.relate=function(){if(arguments.length===2){var u=arguments[0],c=arguments[1],d=new kn(u,c),v=d.getIntersectionMatrix();return v}if(arguments.length===3){if(typeof arguments[2]=="string"&&arguments[0]instanceof Ne&&arguments[1]instanceof Ne){var x=arguments[0],I=arguments[1],R=arguments[2];return kn.relateWithCheck(x,I).matches(R)}if(T(arguments[2],Ze)&&arguments[0]instanceof Ne&&arguments[1]instanceof Ne){var J=arguments[0],ge=arguments[1],Ie=arguments[2],d=new kn(J,ge,Ie),v=d.getIntersectionMatrix();return v}}},kn.overlaps=function(u,c){return u.getEnvelopeInternal().intersects(c.getEnvelopeInternal())?kn.relate(u,c).isOverlaps(u.getDimension(),c.getDimension()):!1},kn.disjoint=function(u,c){return!u.intersects(c)},kn.relateWithCheck=function(u,c){return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(c),kn.relate(u,c)},kn.crosses=function(u,c){return u.getEnvelopeInternal().intersects(c.getEnvelopeInternal())?kn.relate(u,c).isCrosses(u.getDimension(),c.getDimension()):!1},kn.contains=function(u,c){return u.getEnvelopeInternal().contains(c.getEnvelopeInternal())?u.isRectangle()?Pa.contains(u,c):kn.relate(u,c).isContains():!1};var Ss=Object.freeze({RelateOp:kn});a(mi.prototype,{extractElements:function(u,c){if(u===null)return null;for(var d=0;d<u.getNumGeometries();d++){var v=u.getGeometryN(d);this.skipEmpty&&v.isEmpty()||c.add(v)}},combine:function(){for(var u=new U,c=this.inputGeoms.iterator();c.hasNext();){var d=c.next();this.extractElements(d,u)}return u.size()===0?this.geomFactory!==null?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(u)},interfaces_:function(){return[]},getClass:function(){return mi}}),mi.combine=function(){if(arguments.length===1){var u=arguments[0],c=new mi(u);return c.combine()}if(arguments.length===2){var d=arguments[0],v=arguments[1],c=new mi(mi.createList(d,v));return c.combine()}if(arguments.length===3){var x=arguments[0],I=arguments[1],R=arguments[2],c=new mi(mi.createList(x,I,R));return c.combine()}},mi.extractFactory=function(u){return u.isEmpty()?null:u.iterator().next().getFactory()},mi.createList=function(){if(arguments.length===2){var u=arguments[0],c=arguments[1],d=new U;return d.add(u),d.add(c),d}if(arguments.length===3){var v=arguments[0],x=arguments[1],I=arguments[2],d=new U;return d.add(v),d.add(x),d.add(I),d}},a(fo.prototype,{union:function(){for(var u=new wt,c=new St,d=0;d<this.pointGeom.getNumGeometries();d++){var v=this.pointGeom.getGeometryN(d),x=v.getCoordinate(),I=u.locate(x,this.otherGeom);I===S.EXTERIOR&&c.add(x)}if(c.size()===0)return this.otherGeom;var R=null,J=He.toCoordinateArray(c);return R=J.length===1?this.geomFact.createPoint(J[0]):this.geomFact.createMultiPointFromCoords(J),mi.combine(R,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return fo}}),fo.union=function(u,c){var d=new fo(u,c);return d.union()},a(La.prototype,{filter:function(u){this.sortIndex!==-1&&u.getSortIndex()!==this.sortIndex||this.comps.add(u)},interfaces_:function(){return[En]},getClass:function(){return La}}),La.extract=function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];return La.extract(u,c,new U)}if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];return d.getSortIndex()===v?x.add(d):d instanceof Yt&&d.apply(new La(v,x)),x}},a(Ci.prototype,{reduceToGeometries:function(u){for(var c=new U,d=u.iterator();d.hasNext();){var v=d.next(),x=null;T(v,k)?x=this.unionTree(v):v instanceof Ne&&(x=v),c.add(x)}return c},extractByEnvelope:function(u,c,d){for(var v=new U,x=0;x<c.getNumGeometries();x++){var I=c.getGeometryN(x);I.getEnvelopeInternal().intersects(u)?v.add(I):d.add(I)}return this.geomFactory.buildGeometry(v)},unionOptimized:function(u,c){var d=u.getEnvelopeInternal(),v=c.getEnvelopeInternal();if(!d.intersects(v)){var x=mi.combine(u,c);return x}if(u.getNumGeometries()<=1&&c.getNumGeometries()<=1)return this.unionActual(u,c);var I=d.intersection(v);return this.unionUsingEnvelopeIntersection(u,c,I)},union:function(){if(this.inputPolys===null)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var u=new Xt(Ci.STRTREE_NODE_CAPACITY),c=this.inputPolys.iterator();c.hasNext();){var d=c.next();u.insert(d.getEnvelopeInternal(),d)}this.inputPolys=null;var v=u.itemsTree(),x=this.unionTree(v);return x},binaryUnion:function(){if(arguments.length===1){var u=arguments[0];return this.binaryUnion(u,0,u.size())}if(arguments.length===3){var c=arguments[0],d=arguments[1],v=arguments[2];if(1>=v-d){var I=Ci.getGeometry(c,d);return this.unionSafe(I,null)}if(v-d===2)return this.unionSafe(Ci.getGeometry(c,d),Ci.getGeometry(c,d+1));var x=Math.trunc((v+d)/2),I=this.binaryUnion(c,d,x),R=this.binaryUnion(c,x,v);return this.unionSafe(I,R)}},repeatedUnion:function(u){for(var c=null,d=u.iterator();d.hasNext();){var v=d.next();c=c===null?v.copy():c.union(v)}return c},unionSafe:function(u,c){return u===null&&c===null?null:u===null?c.copy():c===null?u.copy():this.unionOptimized(u,c)},unionActual:function(u,c){return Ci.restrictToPolygons(u.union(c))},unionTree:function(u){var c=this.reduceToGeometries(u),d=this.binaryUnion(c);return d},unionUsingEnvelopeIntersection:function(u,c,d){var v=new U,x=this.extractByEnvelope(d,u,v),I=this.extractByEnvelope(d,c,v),R=this.unionActual(x,I);v.add(R);var J=mi.combine(v);return J},bufferUnion:function(){if(arguments.length===1){var u=arguments[0],c=u.get(0).getFactory(),d=c.buildGeometry(u),v=d.buffer(0);return v}if(arguments.length===2){var x=arguments[0],I=arguments[1],c=x.getFactory(),d=c.createGeometryCollection([x,I]),v=d.buffer(0);return v}},interfaces_:function(){return[]},getClass:function(){return Ci}}),Ci.restrictToPolygons=function(u){if(T(u,or))return u;var c=m.getPolygons(u);return c.size()===1?c.get(0):u.getFactory().createMultiPolygon(Ut.toPolygonArray(c))},Ci.getGeometry=function(u,c){return c>=u.size()?null:u.get(c)},Ci.union=function(u){var c=new Ci(u);return c.union()},Ci.STRTREE_NODE_CAPACITY=4,a(Aa.prototype,{unionNoOpt:function(u){var c=this.geomFact.createPoint();return ir.overlayOp(u,c,Ot.UNION)},unionWithNull:function(u,c){return u===null&&c===null?null:c===null?u:u===null?c:u.union(c)},extract:function(){if(T(arguments[0],F))for(var u=arguments[0],c=u.iterator();c.hasNext();){var d=c.next();this.extract(d)}else if(arguments[0]instanceof Ne){var v=arguments[0];this.geomFact===null&&(this.geomFact=v.getFactory()),La.extract(v,Ne.SORTINDEX_POLYGON,this.polygons),La.extract(v,Ne.SORTINDEX_LINESTRING,this.lines),La.extract(v,Ne.SORTINDEX_POINT,this.points)}},union:function(){if(this.geomFact===null)return null;var c=null;if(this.points.size()>0){var d=this.geomFact.buildGeometry(this.points);c=this.unionNoOpt(d)}var v=null;if(this.lines.size()>0){var x=this.geomFact.buildGeometry(this.lines);v=this.unionNoOpt(x)}var I=null;this.polygons.size()>0&&(I=Ci.union(this.polygons));var R=this.unionWithNull(v,I),J=null;return J=c===null?R:R===null?c:fo.union(c,R),J===null?this.geomFact.createGeometryCollection():J},interfaces_:function(){return[]},getClass:function(){return Aa}}),Aa.union=function(){if(arguments.length===1){if(T(arguments[0],F)){var u=arguments[0],c=new Aa(u);return c.union()}if(arguments[0]instanceof Ne){var d=arguments[0],c=new Aa(d);return c.union()}}else if(arguments.length===2){var v=arguments[0],x=arguments[1],c=new Aa(v,x);return c.union()}};var Cs=Object.freeze({UnaryUnionOp:Aa});a(ho.prototype,{visitInteriorRing:function(u,c){var d=u.getCoordinates(),v=d[0],x=ho.findDifferentPoint(d,v),I=c.findEdgeInSameDirection(v,x),R=c.findEdgeEnd(I),J=null;R.getLabel().getLocation(0,ct.RIGHT)===S.INTERIOR?J=R:R.getSym().getLabel().getLocation(0,ct.RIGHT)===S.INTERIOR&&(J=R.getSym()),M.isTrue(J!==null,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(J)},visitShellInteriors:function(u,c){if(u instanceof Kt){var d=u;this.visitInteriorRing(d.getExteriorRing(),c)}if(u instanceof pe)for(var v=u,x=0;x<v.getNumGeometries();x++){var d=v.getGeometryN(x);this.visitInteriorRing(d.getExteriorRing(),c)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(u){for(var c=u.getEdgeEnds().iterator();c.hasNext();){var d=c.next();d.getLabel().getLocation(0,ct.RIGHT)===S.INTERIOR&&d.setInResult(!0)}},visitLinkedDirectedEdges:function(u){var c=u,d=u;do M.isTrue(d!==null,"found null Directed Edge"),d.setVisited(!0),d=d.getNext();while(d!==c)},buildEdgeRings:function(u){for(var c=new U,d=u.iterator();d.hasNext();){var v=d.next();if(v.isInResult()&&v.getEdgeRing()===null){var x=new ga(v,this.geometryFactory);x.linkDirectedEdgesForMinimalEdgeRings();var I=x.buildMinimalRings();c.addAll(I)}}return c},hasUnvisitedShellEdge:function(u){for(var c=0;c<u.size();c++){var d=u.get(c);if(!d.isHole()){var v=d.getEdges(),x=v.get(0);if(x.getLabel().getLocation(0,ct.RIGHT)===S.INTERIOR){for(var I=0;I<v.size();I++)if(x=v.get(I),!x.isVisited())return this.disconnectedRingcoord=x.getCoordinate(),!0}}}return!1},isInteriorsConnected:function(){var u=new U;this.geomGraph.computeSplitEdges(u);var c=new Rr(new Pr);c.addEdges(u),this.setInteriorEdgesInResult(c),c.linkResultDirectedEdges();var d=this.buildEdgeRings(c.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),c),!this.hasUnvisitedShellEdge(d)},interfaces_:function(){return[]},getClass:function(){return ho}}),ho.findDifferentPoint=function(u,c){for(var d=0;d<u.length;d++)if(!u[d].equals(c))return u[d];return null},a(ji.prototype,{hasChildren:function(){for(var u=0;2>u;u++)if(this.subnode[u]!==null)return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(u){u.addAll(this.items);for(var c=0;2>c;c++)this.subnode[c]!==null&&this.subnode[c].addAllItems(u);return u},size:function(){for(var u=0,c=0;2>c;c++)this.subnode[c]!==null&&(u+=this.subnode[c].size());return u+this.items.size()},addAllItemsFromOverlapping:function(u,c){return u===null||this.isSearchMatch(u)?(c.addAll(this.items),this.subnode[0]!==null&&this.subnode[0].addAllItemsFromOverlapping(u,c),void(this.subnode[1]!==null&&this.subnode[1].addAllItemsFromOverlapping(u,c))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(u,c){if(!this.isSearchMatch(u))return!1;for(var d=!1,v=0;2>v;v++)if(this.subnode[v]!==null&&(d=this.subnode[v].remove(u,c))){this.subnode[v].isPrunable()&&(this.subnode[v]=null);break}return d||(d=this.items.remove(c))},getItems:function(){return this.items},depth:function(){for(var u=0,c=0;2>c;c++)if(this.subnode[c]!==null){var d=this.subnode[c].depth();d>u&&(u=d)}return u+1},nodeSize:function(){for(var u=0,c=0;2>c;c++)this.subnode[c]!==null&&(u+=this.subnode[c].nodeSize());return u+1},add:function(u){this.items.add(u)},interfaces_:function(){return[]},getClass:function(){return ji}}),ji.getSubnodeIndex=function(u,c){var d=-1;return u.min>=c&&(d=1),u.max<=c&&(d=0),d},a(ca.prototype,{expandToInclude:function(u){u.max>this.max&&(this.max=u.max),u.min<this.min&&(this.min=u.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(arguments.length===1){var u=arguments[0];return this.overlaps(u.min,u.max)}if(arguments.length===2){var c=arguments[0],d=arguments[1];return!(this.min>d||this.max<c)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(arguments.length===1){if(arguments[0]instanceof ca){var u=arguments[0];return this.contains(u.min,u.max)}if(typeof arguments[0]=="number"){var c=arguments[0];return c>=this.min&&c<=this.max}}else if(arguments.length===2){var d=arguments[0],v=arguments[1];return d>=this.min&&v<=this.max}},init:function(u,c){this.min=u,this.max=c,u>c&&(this.min=c,this.max=u)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return ca}}),a(go.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(u){for(this.level=go.computeLevel(u),this.interval=new ca,this.computeInterval(this.level,u);!this.interval.contains(u);)this.level+=1,this.computeInterval(this.level,u)},computeInterval:function(u,c){var d=Je.powerOf2(u);this.pt=Math.floor(c.getMin()/d)*d,this.interval.init(this.pt,this.pt+d)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return go}}),go.computeLevel=function(u){var c=u.getWidth(),d=Je.exponent(c)+1;return d},A(xa,ji),a(xa.prototype,{getInterval:function(){return this.interval},find:function(u){var c=ji.getSubnodeIndex(u,this.centre);if(c===-1)return this;if(this.subnode[c]!==null){var d=this.subnode[c];return d.find(u)}return this},insert:function(u){M.isTrue(this.interval===null||this.interval.contains(u.interval));var c=ji.getSubnodeIndex(u.interval,this.centre);if(u.level===this.level-1)this.subnode[c]=u;else{var d=this.createSubnode(c);d.insert(u),this.subnode[c]=d}},isSearchMatch:function(u){return u.overlaps(this.interval)},getSubnode:function(u){return this.subnode[u]===null&&(this.subnode[u]=this.createSubnode(u)),this.subnode[u]},getNode:function(u){var c=ji.getSubnodeIndex(u,this.centre);if(c!==-1){var d=this.getSubnode(c);return d.getNode(u)}return this},createSubnode:function(u){var c=0,d=0;switch(u){case 0:c=this.interval.getMin(),d=this.centre;break;case 1:c=this.centre,d=this.interval.getMax()}var v=new ca(c,d),x=new xa(v,this.level-1);return x},interfaces_:function(){return[]},getClass:function(){return xa}}),xa.createNode=function(u){var c=new go(u),d=new xa(c.getInterval(),c.getLevel());return d},xa.createExpanded=function(u,c){var d=new ca(c);u!==null&&d.expandToInclude(u.interval);var v=xa.createNode(d);return u!==null&&v.insert(u),v},A(eo,ji),a(eo.prototype,{insert:function(u,c){var d=ji.getSubnodeIndex(u,eo.origin);if(d===-1)return this.add(c),null;var v=this.subnode[d];if(v===null||!v.getInterval().contains(u)){var x=xa.createExpanded(v,u);this.subnode[d]=x}this.insertContained(this.subnode[d],u,c)},isSearchMatch:function(u){return!0},insertContained:function(u,c,d){M.isTrue(u.getInterval().contains(c));var v=Ht.isZeroWidth(c.getMin(),c.getMax()),x=null;x=v?u.find(c):u.getNode(c),x.add(d)},interfaces_:function(){return[]},getClass:function(){return eo}}),eo.origin=0,a(to.prototype,{size:function(){return this.root!==null?this.root.size():0},insert:function(u,c){this.collectStats(u);var d=to.ensureExtent(u,this.minExtent);this.root.insert(d,c)},query:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var u=arguments[0];return this.query(new ca(u,u))}if(arguments[0]instanceof ca){var c=arguments[0],d=new U;return this.query(c,d),d}}else if(arguments.length===2){var v=arguments[0],x=arguments[1];this.root.addAllItemsFromOverlapping(v,x)}},iterator:function(){var u=new U;return this.root.addAllItems(u),u.iterator()},remove:function(u,c){var d=to.ensureExtent(u,this.minExtent);return this.root.remove(d,c)},collectStats:function(u){var c=u.getWidth();c<this.minExtent&&c>0&&(this.minExtent=c)},depth:function(){return this.root!==null?this.root.depth():0},nodeSize:function(){return this.root!==null?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return to}}),to.ensureExtent=function(u,c){var d=u.getMin(),v=u.getMax();return d!==v?u:(d===v&&(d-=c/2,v=d+c/2),new ca(d,v))},a(Yo.prototype,{isInside:function(u){},interfaces_:function(){return[]},getClass:function(){return Yo}}),a(Mo.prototype,{testLineSegment:function(u,c){var d=null,v=null,x=null,I=null,R=null,J=c.p0,ge=c.p1;v=J.x-u.x,x=J.y-u.y,I=ge.x-u.x,R=ge.y-u.y,(x>0&&0>=R||R>0&&0>=x)&&(d=Dn.signOfDet2x2(v,x,I,R)/(R-x),d>0&&this.crossings++)},buildIndex:function(){this.tree=new to;for(var u=He.removeRepeatedPoints(this.ring.getCoordinates()),c=Vr.getChains(u),d=0;d<c.size();d++){var v=c.get(d),x=v.getEnvelope();this.interval.min=x.getMinY(),this.interval.max=x.getMaxY(),this.tree.insert(this.interval,v)}},testMonotoneChain:function(u,c,d){d.select(u,c)},isInside:function(u){this.crossings=0;var c=new re(g.NEGATIVE_INFINITY,g.POSITIVE_INFINITY,u.y,u.y);this.interval.min=u.y,this.interval.max=u.y;for(var d=this.tree.query(this.interval),v=new po(this,u),x=d.iterator();x.hasNext();){var I=x.next();this.testMonotoneChain(c,v,I)}return this.crossings%2===1},interfaces_:function(){return[Yo]},getClass:function(){return Mo}}),A(po,Xi),a(po.prototype,{select:function(){if(arguments.length!==1)return Xi.prototype.select.apply(this,arguments);var u=arguments[0];this.mcp.testLineSegment(this.p,u)},interfaces_:function(){return[]},getClass:function(){return po}}),Mo.MCSelecter=po,a(Xo.prototype,{insertEdgeEnds:function(u){for(var c=u.iterator();c.hasNext();){var d=c.next();this.nodes.add(d)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(u,c){for(var d=u.getNodeIterator();d.hasNext();){var v=d.next(),x=this.nodes.addNode(v.getCoordinate());x.setLabel(c,v.getLabel().getLocation(c))}},build:function(u){this.computeIntersectionNodes(u,0),this.copyNodesAndLabels(u,0);var c=new hr,d=c.computeEdgeEnds(u.getEdgeIterator());this.insertEdgeEnds(d)},computeIntersectionNodes:function(u,c){for(var d=u.getEdgeIterator();d.hasNext();)for(var v=d.next(),x=v.getLabel().getLocation(c),I=v.getEdgeIntersectionList().iterator();I.hasNext();){var R=I.next(),J=this.nodes.addNode(R.coord);x===S.BOUNDARY?J.setLabelBoundary(c):J.getLabel().isNull(c)&&J.setLabel(c,S.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Xo}}),a(jo.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var u=this.nodeGraph.getNodeIterator();u.hasNext();){var c=u.next();if(!c.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=c.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var u=this.nodeGraph.getNodeIterator();u.hasNext();)for(var c=u.next(),d=c.getEdges().iterator();d.hasNext();){var v=d.next();if(v.getEdgeEnds().size()>1)return this.invalidPoint=v.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var u=this.geomGraph.computeSelfNodes(this.li,!0,!0);return u.hasProperIntersection()?(this.invalidPoint=u.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return jo}}),a(Zo.prototype,{buildIndex:function(){this.index=new Xt;for(var u=0;u<this.rings.size();u++){var c=this.rings.get(u),d=c.getEnvelopeInternal();this.index.insert(d,c)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var u=0;u<this.rings.size();u++)for(var c=this.rings.get(u),d=c.getCoordinates(),v=this.index.query(c.getEnvelopeInternal()),x=0;x<v.size();x++){var I=v.get(x),R=I.getCoordinates();if(c!==I&&c.getEnvelopeInternal().intersects(I.getEnvelopeInternal())){var J=Ii.findPtNotNode(d,I,this.graph);if(J!==null){var ge=rt.isPointInRing(J,R);if(ge)return this.nestedPt=J,!1}}}return!0},add:function(u){this.rings.add(u),this.totalEnv.expandToInclude(u.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return Zo}}),a(Fn.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return Fn.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var u="";return this.pt!==null&&(u=" at or near point "+this.pt),this.getMessage()+u},interfaces_:function(){return[]},getClass:function(){return Fn}}),Fn.ERROR=0,Fn.REPEATED_POINT=1,Fn.HOLE_OUTSIDE_SHELL=2,Fn.NESTED_HOLES=3,Fn.DISCONNECTED_INTERIOR=4,Fn.SELF_INTERSECTION=5,Fn.RING_SELF_INTERSECTION=6,Fn.NESTED_SHELLS=7,Fn.DUPLICATE_RINGS=8,Fn.TOO_FEW_POINTS=9,Fn.INVALID_COORDINATE=10,Fn.RING_NOT_CLOSED=11,Fn.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],a(Ii.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var u=arguments[0],c=0;c<u.length;c++)if(!Ii.isValid(u[c]))return this.validErr=new Fn(Fn.INVALID_COORDINATE,u[c]),null}else if(arguments[0]instanceof Kt){var d=arguments[0];if(this.checkInvalidCoordinates(d.getExteriorRing().getCoordinates()),this.validErr!==null)return null;for(var c=0;c<d.getNumInteriorRing();c++)if(this.checkInvalidCoordinates(d.getInteriorRingN(c).getCoordinates()),this.validErr!==null)return null}},checkHolesNotNested:function(u,c){for(var d=new Zo(c),v=0;v<u.getNumInteriorRing();v++){var x=u.getInteriorRingN(v);d.add(x)}var I=d.isNonNested();I||(this.validErr=new Fn(Fn.NESTED_HOLES,d.getNestedPoint()))},checkConsistentArea:function(u){var c=new jo(u),d=c.isNodeConsistentArea();return d?void(c.hasDuplicateRings()&&(this.validErr=new Fn(Fn.DUPLICATE_RINGS,c.getInvalidPoint()))):(this.validErr=new Fn(Fn.SELF_INTERSECTION,c.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),this.validErr===null},checkShellInsideHole:function(u,c,d){var v=u.getCoordinates(),x=c.getCoordinates(),I=Ii.findPtNotNode(v,c,d);if(I!==null){var R=rt.isPointInRing(I,x);if(!R)return I}var J=Ii.findPtNotNode(x,u,d);if(J!==null){var ge=rt.isPointInRing(J,v);return ge?J:null}return M.shouldNeverReachHere("points in shell and hole appear to be equal"),null},checkNoSelfIntersectingRings:function(u){for(var c=u.getEdgeIterator();c.hasNext();){var d=c.next();if(this.checkNoSelfIntersectingRing(d.getEdgeIntersectionList()),this.validErr!==null)return null}},checkConnectedInteriors:function(u){var c=new ho(u);c.isInteriorsConnected()||(this.validErr=new Fn(Fn.DISCONNECTED_INTERIOR,c.getCoordinate()))},checkNoSelfIntersectingRing:function(u){for(var c=new St,d=!0,v=u.iterator();v.hasNext();){var x=v.next();if(d)d=!1;else{if(c.contains(x.coord))return this.validErr=new Fn(Fn.RING_SELF_INTERSECTION,x.coord),null;c.add(x.coord)}}},checkHolesInShell:function(u,c){for(var d=u.getExteriorRing(),v=new Mo(d),x=0;x<u.getNumInteriorRing();x++){var I=u.getInteriorRingN(x),R=Ii.findPtNotNode(I.getCoordinates(),d,c);if(R===null)return null;var J=!v.isInside(R);if(J)return this.validErr=new Fn(Fn.HOLE_OUTSIDE_SHELL,R),null}},checkTooFewPoints:function(u){return u.hasTooFewPoints()?(this.validErr=new Fn(Fn.TOO_FEW_POINTS,u.getInvalidPoint()),null):void 0},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof Lt){var u=arguments[0];this.checkInvalidCoordinates(u.getCoordinates())}else if(arguments[0]instanceof Ee){var c=arguments[0];this.checkInvalidCoordinates(c.getCoordinates())}else if(arguments[0]instanceof be){var d=arguments[0];if(this.checkInvalidCoordinates(d.getCoordinates()),this.validErr!==null||(this.checkClosedRing(d),this.validErr!==null))return null;var v=new pr(0,d);if(this.checkTooFewPoints(v),this.validErr!==null)return null;var x=new Zt;v.computeSelfNodes(x,!0,!0),this.checkNoSelfIntersectingRings(v)}else if(arguments[0]instanceof Wt){var I=arguments[0];if(this.checkInvalidCoordinates(I.getCoordinates()),this.validErr!==null)return null;var v=new pr(0,I);this.checkTooFewPoints(v)}else if(arguments[0]instanceof Kt){var R=arguments[0];if(this.checkInvalidCoordinates(R),this.validErr!==null||(this.checkClosedRings(R),this.validErr!==null))return null;var v=new pr(0,R);if(this.checkTooFewPoints(v),this.validErr!==null||(this.checkConsistentArea(v),this.validErr!==null)||!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(v),this.validErr!==null)||(this.checkHolesInShell(R,v),this.validErr!==null)||(this.checkHolesNotNested(R,v),this.validErr!==null))return null;this.checkConnectedInteriors(v)}else if(arguments[0]instanceof pe){for(var J=arguments[0],ge=0;ge<J.getNumGeometries();ge++){var Ie=J.getGeometryN(ge);if(this.checkInvalidCoordinates(Ie),this.validErr!==null||(this.checkClosedRings(Ie),this.validErr!==null))return null}var v=new pr(0,J);if(this.checkTooFewPoints(v),this.validErr!==null||(this.checkConsistentArea(v),this.validErr!==null)||!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(v),this.validErr!==null))return null;for(var ge=0;ge<J.getNumGeometries();ge++){var Ie=J.getGeometryN(ge);if(this.checkHolesInShell(Ie,v),this.validErr!==null)return null}for(var ge=0;ge<J.getNumGeometries();ge++){var Ie=J.getGeometryN(ge);if(this.checkHolesNotNested(Ie,v),this.validErr!==null)return null}if(this.checkShellsNotNested(J,v),this.validErr!==null)return null;this.checkConnectedInteriors(v)}else if(arguments[0]instanceof Yt)for(var ze=arguments[0],ge=0;ge<ze.getNumGeometries();ge++){var Ve=ze.getGeometryN(ge);if(this.checkValid(Ve),this.validErr!==null)return null}else if(arguments[0]instanceof Ne){var st=arguments[0];if(this.validErr=null,st.isEmpty())return null;if(st instanceof Lt)this.checkValid(st);else if(st instanceof Ee)this.checkValid(st);else if(st instanceof be)this.checkValid(st);else if(st instanceof Wt)this.checkValid(st);else if(st instanceof Kt)this.checkValid(st);else if(st instanceof pe)this.checkValid(st);else{if(!(st instanceof Yt))throw new UnsupportedOperationException(st.getClass().getName());this.checkValid(st)}}},setSelfTouchingRingFormingHoleValid:function(u){this.isSelfTouchingRingFormingHoleValid=u},checkShellNotNested:function(u,c,d){var v=u.getCoordinates(),x=c.getExteriorRing(),I=x.getCoordinates(),R=Ii.findPtNotNode(v,x,d);if(R===null)return null;var J=rt.isPointInRing(R,I);if(!J)return null;if(c.getNumInteriorRing()<=0)return this.validErr=new Fn(Fn.NESTED_SHELLS,R),null;for(var ge=null,Ie=0;Ie<c.getNumInteriorRing();Ie++){var ze=c.getInteriorRingN(Ie);if(ge=this.checkShellInsideHole(u,ze,d),ge===null)return null}this.validErr=new Fn(Fn.NESTED_SHELLS,ge)},checkClosedRings:function(u){if(this.checkClosedRing(u.getExteriorRing()),this.validErr!==null)return null;for(var c=0;c<u.getNumInteriorRing();c++)if(this.checkClosedRing(u.getInteriorRingN(c)),this.validErr!==null)return null},checkClosedRing:function(u){if(!u.isClosed()){var c=null;u.getNumPoints()>=1&&(c=u.getCoordinateN(0)),this.validErr=new Fn(Fn.RING_NOT_CLOSED,c)}},checkShellsNotNested:function(u,c){for(var d=0;d<u.getNumGeometries();d++)for(var v=u.getGeometryN(d),x=v.getExteriorRing(),I=0;I<u.getNumGeometries();I++)if(d!==I){var R=u.getGeometryN(I);if(this.checkShellNotNested(x,R,c),this.validErr!==null)return null}},interfaces_:function(){return[]},getClass:function(){return Ii}}),Ii.findPtNotNode=function(u,c,d){for(var v=d.findEdge(c),x=v.getEdgeIntersectionList(),I=0;I<u.length;I++){var R=u[I];if(!x.isIntersection(R))return R}return null},Ii.isValid=function(){if(arguments[0]instanceof Ne){var u=arguments[0],c=new Ii(u);return c.isValid()}if(arguments[0]instanceof N){var d=arguments[0];return g.isNaN(d.x)||g.isInfinite(d.x)||g.isNaN(d.y)?!1:!g.isInfinite(d.y)}};var Is=Object.freeze({IsValidOp:Ii}),Ps=Object.freeze({BoundaryOp:an,IsSimpleOp:kr,buffer:_s,distance:bs,linemerge:xs,overlay:ws,polygonize:Es,relate:Ss,union:Cs,valid:Is});A(Do,he.CoordinateOperation),a(Do.prototype,{editCoordinates:function(u,c){if(u.length===0)return null;for(var d=new Array(u.length).fill(null),v=0;v<u.length;v++){var x=new N(u[v]);this.targetPM.makePrecise(x),d[v]=x}var I=new te(d,!1),R=I.toCoordinateArray(),J=0;c instanceof Wt&&(J=2),c instanceof be&&(J=4);var ge=d;return this.removeCollapsed&&(ge=null),R.length<J?ge:R},interfaces_:function(){return[]},getClass:function(){return Do}}),a(za.prototype,{fixPolygonalTopology:function(u){var c=u;this.changePrecisionModel||(c=this.changePM(u,this.targetPM));var d=c.buffer(0),v=d;return this.changePrecisionModel||(v=u.getFactory().createGeometry(d)),v},reducePointwise:function(u){var c=null;if(this.changePrecisionModel){var d=this.createFactory(u.getFactory(),this.targetPM);c=new he(d)}else c=new he;var v=this.removeCollapsed;u.getDimension()>=2&&(v=!0);var x=c.edit(u,new Do(this.targetPM,v));return x},changePM:function(u,c){var d=this.createEditor(u.getFactory(),c);return d.edit(u,new he.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(u){this.removeCollapsed=u},createFactory:function(u,c){var d=new Ut(c,u.getSRID(),u.getCoordinateSequenceFactory());return d},setChangePrecisionModel:function(u){this.changePrecisionModel=u},reduce:function(u){var c=this.reducePointwise(u);return this.isPointwise?c:T(c,or)?c.isValid()?c:this.fixPolygonalTopology(c):c},setPointwise:function(u){this.isPointwise=u},createEditor:function(u,c){if(u.getPrecisionModel()===c)return new he;var d=this.createFactory(u,c),v=new he(d);return v},interfaces_:function(){return[]},getClass:function(){return za}}),za.reduce=function(u,c){var d=new za(c);return d.reduce(u)},za.reducePointwise=function(u,c){var d=new za(c);return d.setPointwise(!0),d.reduce(u)};var Ns=Object.freeze({GeometryPrecisionReducer:za});a(mo.prototype,{simplifySection:function(u,c){if(u+1===c)return null;this.seg.p0=this.pts[u],this.seg.p1=this.pts[c];for(var d=-1,v=u,x=u+1;c>x;x++){var I=this.seg.distance(this.pts[x]);I>d&&(d=I,v=x)}if(d<=this.distanceTolerance)for(var x=u+1;c>x;x++)this.usePt[x]=!1;else this.simplifySection(u,v),this.simplifySection(v,c)},setDistanceTolerance:function(u){this.distanceTolerance=u},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var u=0;u<this.pts.length;u++)this.usePt[u]=!0;this.simplifySection(0,this.pts.length-1);for(var c=new te,u=0;u<this.pts.length;u++)this.usePt[u]&&c.add(new N(this.pts[u]));return c.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return mo}}),mo.simplify=function(u,c){var d=new mo(u);return d.setDistanceTolerance(c),d.simplify()},a(no.prototype,{setEnsureValid:function(u){this.isEnsureValidTopology=u},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new vo(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(u){if(0>u)throw new h;this.distanceTolerance=u},interfaces_:function(){return[]},getClass:function(){return no}}),no.simplify=function(u,c){var d=new no(u);return d.setDistanceTolerance(c),d.getResultGeometry()},A(vo,Se),a(vo.prototype,{transformPolygon:function(u,c){if(u.isEmpty())return null;var d=Se.prototype.transformPolygon.call(this,u,c);return c instanceof pe?d:this.createValidArea(d)},createValidArea:function(u){return this.isEnsureValidTopology?u.buffer(0):u},transformCoordinates:function(u,c){var d=u.toCoordinateArray(),v=null;return v=d.length===0?new Array(0).fill(null):mo.simplify(d,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(v)},transformMultiPolygon:function(u,c){var d=Se.prototype.transformMultiPolygon.call(this,u,c);return this.createValidArea(d)},transformLinearRing:function(u,c){var d=c instanceof Kt,v=Se.prototype.transformLinearRing.call(this,u,c);return!d||v instanceof be?v:null},interfaces_:function(){return[]},getClass:function(){return vo}}),no.DPTransformer=vo,A(yo,Qt),a(yo.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return yo}}),a(wa.prototype,{addToResult:function(u){this.resultSegs.add(u)},asLineString:function(){return this.parentLine.getFactory().createLineString(wa.extractCoordinates(this.resultSegs))},getResultSize:function(){var u=this.resultSegs.size();return u===0?0:u+1},getParent:function(){return this.parentLine},getSegment:function(u){return this.segs[u]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(wa.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var u=this.parentLine.getCoordinates();this.segs=new Array(u.length-1).fill(null);for(var c=0;c<u.length-1;c++){var d=new yo(u[c],u[c+1],this.parentLine,c);this.segs[c]=d}},getResultCoordinates:function(){return wa.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return wa}}),wa.extractCoordinates=function(u){for(var c=new Array(u.size()+1).fill(null),d=null,v=0;v<u.size();v++)d=u.get(v),c[v]=d.p0;return c[c.length-1]=d.p1,c},a(ro.prototype,{remove:function(u){this.index.remove(new re(u.p0,u.p1),u)},add:function(){if(arguments[0]instanceof wa)for(var u=arguments[0],c=u.getSegments(),d=0;d<c.length;d++){var v=c[d];this.add(v)}else if(arguments[0]instanceof Qt){var x=arguments[0];this.index.insert(new re(x.p0,x.p1),x)}},query:function(u){var c=new re(u.p0,u.p1),d=new Qo(u);this.index.query(c,d);var v=d.getItems();return v},interfaces_:function(){return[]},getClass:function(){return ro}}),a(Qo.prototype,{visitItem:function(u){var c=u;re.intersects(c.p0,c.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(u)},getItems:function(){return this.items},interfaces_:function(){return[Vt]},getClass:function(){return Qo}}),a(_o.prototype,{flatten:function(u,c){var d=this.linePts[u],v=this.linePts[c],x=new Qt(d,v);return this.remove(this.line,u,c),this.outputIndex.add(x),x},hasBadIntersection:function(u,c,d){return this.hasBadOutputIntersection(d)?!0:!!this.hasBadInputIntersection(u,c,d)},setDistanceTolerance:function(u){this.distanceTolerance=u},simplifySection:function(u,c,d){d+=1;var v=new Array(2).fill(null);if(u+1===c){var x=this.line.getSegment(u);return this.line.addToResult(x),null}var I=!0;if(this.line.getResultSize()<this.line.getMinimumSize()){var R=d+1;R<this.line.getMinimumSize()&&(I=!1)}var J=new Array(1).fill(null),ge=this.findFurthestPoint(this.linePts,u,c,J);J[0]>this.distanceTolerance&&(I=!1);var Ie=new Qt;if(Ie.p0=this.linePts[u],Ie.p1=this.linePts[c],v[0]=u,v[1]=c,this.hasBadIntersection(this.line,v,Ie)&&(I=!1),I){var x=this.flatten(u,c);return this.line.addToResult(x),null}this.simplifySection(u,ge,d),this.simplifySection(ge,c,d)},hasBadOutputIntersection:function(u){for(var c=this.outputIndex.query(u),d=c.iterator();d.hasNext();){var v=d.next();if(this.hasInteriorIntersection(v,u))return!0}return!1},findFurthestPoint:function(u,c,d,v){var x=new Qt;x.p0=u[c],x.p1=u[d];for(var I=-1,R=c,J=c+1;d>J;J++){var ge=u[J],Ie=x.distance(ge);Ie>I&&(I=Ie,R=J)}return v[0]=I,R},simplify:function(u){this.line=u,this.linePts=u.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(u,c,d){for(var v=c;d>v;v++){var x=u.getSegment(v);this.inputIndex.remove(x)}},hasInteriorIntersection:function(u,c){return this.li.computeIntersection(u.p0,u.p1,c.p0,c.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(u,c,d){for(var v=this.inputIndex.query(d),x=v.iterator();x.hasNext();){var I=x.next();if(this.hasInteriorIntersection(I,d)){if(_o.isInLineSection(u,c,I))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return _o}}),_o.isInLineSection=function(u,c,d){if(d.getParent()!==u.getParent())return!1;var v=d.getIndex();return v>=c[0]&&v<c[1]},a(ts.prototype,{setDistanceTolerance:function(u){this.distanceTolerance=u},simplify:function(u){for(var c=u.iterator();c.hasNext();)this.inputIndex.add(c.next());for(var c=u.iterator();c.hasNext();){var d=new _o(this.inputIndex,this.outputIndex);d.setDistanceTolerance(this.distanceTolerance),d.simplify(c.next())}},interfaces_:function(){return[]},getClass:function(){return ts}}),a(Ha.prototype,{getResultGeometry:function(){if(this.inputGeom.isEmpty())return this.inputGeom.copy();this.linestringMap=new Vn,this.inputGeom.apply(new To(this)),this.lineSimplifier.simplify(this.linestringMap.values());var u=new bo(this.linestringMap).transform(this.inputGeom);return u},setDistanceTolerance:function(u){if(0>u)throw new h;this.lineSimplifier.setDistanceTolerance(u)},interfaces_:function(){return[]},getClass:function(){return Ha}}),Ha.simplify=function(u,c){var d=new Ha(u);return d.setDistanceTolerance(c),d.getResultGeometry()},A(bo,Se),a(bo.prototype,{transformCoordinates:function(u,c){if(u.size()===0)return null;if(c instanceof Wt){var d=this.linestringMap.get(c);return this.createCoordinateSequence(d.getResultCoordinates())}return Se.prototype.transformCoordinates.call(this,u,c)},interfaces_:function(){return[]},getClass:function(){return bo}}),a(To.prototype,{filter:function(u){if(u instanceof Wt){var c=u;if(c.isEmpty())return null;var d=c.isClosed()?4:2,v=new wa(c,d);this.tps.linestringMap.put(c,v)}},interfaces_:function(){return[Oe]},getClass:function(){return To}}),Ha.LineStringTransformer=bo,Ha.LineStringMapBuilderFilter=To;var Ls=Object.freeze({DouglasPeuckerSimplifier:no,TopologyPreservingSimplifier:Ha});a(io.prototype,{splitAt:function(){if(arguments.length===1){var u=arguments[0],c=this.minimumLen/this.segLen;if(u.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(c),null;if(u.distance(this.seg.p1)<this.minimumLen)return this.splitPt=io.pointAlongReverse(this.seg,c),null;this.splitPt=u}else if(arguments.length===2){var d=arguments[0],v=arguments[1],x=this.getConstrainedLength(d),I=x/this.segLen;v.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(I):this.splitPt=io.pointAlongReverse(this.seg,I)}},setMinimumLength:function(u){this.minimumLen=u},getConstrainedLength:function(u){return u<this.minimumLen?this.minimumLen:u},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return io}}),io.pointAlongReverse=function(u,c){var d=new N;return d.x=u.p1.x-c*(u.p1.x-u.p0.x),d.y=u.p1.y-c*(u.p1.y-u.p0.y),d},a(ns.prototype,{findSplitPoint:function(u,c){},interfaces_:function(){return[]},getClass:function(){return ns}}),a(xo.prototype,{findSplitPoint:function(u,c){var d=u.getLineSegment(),v=d.getLength(),x=v/2,I=new io(d),R=xo.projectedSplitPoint(u,c),J=2*R.distance(c)*.8,ge=J;return ge>x&&(ge=x),I.setMinimumLength(ge),I.splitAt(R),I.getSplitPoint()},interfaces_:function(){return[ns]},getClass:function(){return xo}}),xo.projectedSplitPoint=function(u,c){var d=u.getLineSegment(),v=d.project(c);return v},a(jn.prototype,{interfaces_:function(){return[]},getClass:function(){return jn}}),jn.triArea=function(u,c,d){return(c.x-u.x)*(d.y-u.y)-(c.y-u.y)*(d.x-u.x)},jn.isInCircleDDNormalized=function(u,c,d,v){var x=q.valueOf(u.x).selfSubtract(v.x),I=q.valueOf(u.y).selfSubtract(v.y),R=q.valueOf(c.x).selfSubtract(v.x),J=q.valueOf(c.y).selfSubtract(v.y),ge=q.valueOf(d.x).selfSubtract(v.x),Ie=q.valueOf(d.y).selfSubtract(v.y),ze=x.multiply(J).selfSubtract(R.multiply(I)),Ve=R.multiply(Ie).selfSubtract(ge.multiply(J)),st=ge.multiply(I).selfSubtract(x.multiply(Ie)),Rt=x.multiply(x).selfAdd(I.multiply(I)),ln=R.multiply(R).selfAdd(J.multiply(J)),vn=ge.multiply(ge).selfAdd(Ie.multiply(Ie)),Xn=Rt.selfMultiply(Ve).selfAdd(ln.selfMultiply(st)).selfAdd(vn.selfMultiply(ze)),vr=Xn.doubleValue()>0;return vr},jn.checkRobustInCircle=function(u,c,d,v){var x=jn.isInCircleNonRobust(u,c,d,v),I=jn.isInCircleDDSlow(u,c,d,v),R=jn.isInCircleCC(u,c,d,v),J=Rn.circumcentre(u,c,d);oe.out.println("p radius diff a = "+Math.abs(v.distance(J)-u.distance(J))/u.distance(J)),x===I&&x===R||(oe.out.println("inCircle robustness failure (double result = "+x+", DD result = "+I+", CC result = "+R+")"),oe.out.println($n.toLineString(new Fe([u,c,d,v]))),oe.out.println("Circumcentre = "+$n.toPoint(J)+" radius = "+u.distance(J)),oe.out.println("p radius diff a = "+Math.abs(v.distance(J)/u.distance(J)-1)),oe.out.println("p radius diff b = "+Math.abs(v.distance(J)/c.distance(J)-1)),oe.out.println("p radius diff c = "+Math.abs(v.distance(J)/d.distance(J)-1)),oe.out.println())},jn.isInCircleDDFast=function(u,c,d,v){var x=q.sqr(u.x).selfAdd(q.sqr(u.y)).selfMultiply(jn.triAreaDDFast(c,d,v)),I=q.sqr(c.x).selfAdd(q.sqr(c.y)).selfMultiply(jn.triAreaDDFast(u,d,v)),R=q.sqr(d.x).selfAdd(q.sqr(d.y)).selfMultiply(jn.triAreaDDFast(u,c,v)),J=q.sqr(v.x).selfAdd(q.sqr(v.y)).selfMultiply(jn.triAreaDDFast(u,c,d)),ge=x.selfSubtract(I).selfAdd(R).selfSubtract(J),Ie=ge.doubleValue()>0;return Ie},jn.isInCircleCC=function(u,c,d,v){var x=Rn.circumcentre(u,c,d),I=u.distance(x),R=v.distance(x)-I;return 0>=R},jn.isInCircleNormalized=function(u,c,d,v){var x=u.x-v.x,I=u.y-v.y,R=c.x-v.x,J=c.y-v.y,ge=d.x-v.x,Ie=d.y-v.y,ze=x*J-R*I,Ve=R*Ie-ge*J,st=ge*I-x*Ie,Rt=x*x+I*I,ln=R*R+J*J,vn=ge*ge+Ie*Ie,Xn=Rt*Ve+ln*st+vn*ze;return Xn>0},jn.isInCircleDDSlow=function(u,c,d,v){var x=q.valueOf(v.x),I=q.valueOf(v.y),R=q.valueOf(u.x),J=q.valueOf(u.y),ge=q.valueOf(c.x),Ie=q.valueOf(c.y),ze=q.valueOf(d.x),Ve=q.valueOf(d.y),st=R.multiply(R).add(J.multiply(J)).multiply(jn.triAreaDDSlow(ge,Ie,ze,Ve,x,I)),Rt=ge.multiply(ge).add(Ie.multiply(Ie)).multiply(jn.triAreaDDSlow(R,J,ze,Ve,x,I)),ln=ze.multiply(ze).add(Ve.multiply(Ve)).multiply(jn.triAreaDDSlow(R,J,ge,Ie,x,I)),vn=x.multiply(x).add(I.multiply(I)).multiply(jn.triAreaDDSlow(R,J,ge,Ie,ze,Ve)),Xn=st.subtract(Rt).add(ln).subtract(vn),vr=Xn.doubleValue()>0;return vr},jn.isInCircleNonRobust=function(u,c,d,v){var x=(u.x*u.x+u.y*u.y)*jn.triArea(c,d,v)-(c.x*c.x+c.y*c.y)*jn.triArea(u,d,v)+(d.x*d.x+d.y*d.y)*jn.triArea(u,c,v)-(v.x*v.x+v.y*v.y)*jn.triArea(u,c,d)>0;return x},jn.isInCircleRobust=function(u,c,d,v){return jn.isInCircleNormalized(u,c,d,v)},jn.triAreaDDSlow=function(u,c,d,v,x,I){return d.subtract(u).multiply(I.subtract(c)).subtract(v.subtract(c).multiply(x.subtract(u)))},jn.triAreaDDFast=function(u,c,d){var v=q.valueOf(c.x).selfSubtract(u.x).selfMultiply(q.valueOf(d.y).selfSubtract(u.y)),x=q.valueOf(c.y).selfSubtract(u.y).selfMultiply(q.valueOf(d.x).selfSubtract(u.x));return v.selfSubtract(x)},a(qn.prototype,{circleCenter:function(u,c){var d=new qn(this.getX(),this.getY()),v=this.bisector(d,u),x=this.bisector(u,c),I=new Pe(v,x),R=null;try{R=new qn(I.getX(),I.getY())}catch(J){if(!(J instanceof V))throw J;oe.err.println("a: "+d+"  b: "+u+"  c: "+c),oe.err.println(J)}finally{}return R},dot:function(u){return this.p.x*u.getX()+this.p.y*u.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(u,c){var d=c.getX()-u.getX(),v=c.getY()-u.getY(),x=new Pe(u.getX()+d/2,u.getY()+v/2,1),I=new Pe(u.getX()-v+d/2,u.getY()+d+v/2,1);return new Pe(x,I)},equals:function(){if(arguments.length===1){var u=arguments[0];return this.p.x===u.getX()&&this.p.y===u.getY()}if(arguments.length===2){var c=arguments[0],d=arguments[1];return this.p.distance(c.getCoordinate())<d}},getCoordinate:function(){return this.p},isInCircle:function(u,c,d){return jn.isInCircleRobust(u.p,c.p,d.p,this.p)},interpolateZValue:function(u,c,d){var v=u.getX(),x=u.getY(),I=c.getX()-v,R=d.getX()-v,J=c.getY()-x,ge=d.getY()-x,Ie=I*ge-R*J,ze=this.getX()-v,Ve=this.getY()-x,st=(ge*ze-R*Ve)/Ie,Rt=(-J*ze+I*Ve)/Ie,ln=u.getZ()+st*(c.getZ()-u.getZ())+Rt*(d.getZ()-u.getZ());return ln},midPoint:function(u){var c=(this.p.x+u.getX())/2,d=(this.p.y+u.getY())/2,v=(this.p.z+u.getZ())/2;return new qn(c,d,v)},rightOf:function(u){return this.isCCW(u.dest(),u.orig())},isCCW:function(u,c){return(u.p.x-this.p.x)*(c.p.y-this.p.y)-(u.p.y-this.p.y)*(c.p.x-this.p.x)>0},getX:function(){return this.p.x},crossProduct:function(u){return this.p.x*u.getY()-this.p.y*u.getX()},setZ:function(u){this.p.z=u},times:function(u){return new qn(u*this.p.x,u*this.p.y)},cross:function(){return new qn(this.p.y,-this.p.x)},leftOf:function(u){return this.isCCW(u.orig(),u.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(u){return new qn(this.p.x-u.getX(),this.p.y-u.getY())},getY:function(){return this.p.y},classify:function(u,c){var d=this,v=c.sub(u),x=d.sub(u),I=v.crossProduct(x);return I>0?qn.LEFT:0>I?qn.RIGHT:v.getX()*x.getX()<0||v.getY()*x.getY()<0?qn.BEHIND:v.magn()<x.magn()?qn.BEYOND:u.equals(d)?qn.ORIGIN:c.equals(d)?qn.DESTINATION:qn.BETWEEN},sum:function(u){return new qn(this.p.x+u.getX(),this.p.y+u.getY())},distance:function(u,c){return Math.sqrt(Math.pow(c.getX()-u.getX(),2)+Math.pow(c.getY()-u.getY(),2))},circumRadiusRatio:function(u,c){var d=this.circleCenter(u,c),v=this.distance(d,u),x=this.distance(this,u),I=this.distance(u,c);return x>I&&(x=I),I=this.distance(c,this),x>I&&(x=I),v/x},interfaces_:function(){return[]},getClass:function(){return qn}}),qn.interpolateZ=function(){if(arguments.length===3){var u=arguments[0],c=arguments[1],d=arguments[2],v=c.distance(d),x=u.distance(c),I=d.z-c.z,R=c.z+I*(x/v);return R}if(arguments.length===4){var J=arguments[0],ge=arguments[1],Ie=arguments[2],ze=arguments[3],Ve=ge.x,st=ge.y,Rt=Ie.x-Ve,ln=ze.x-Ve,vn=Ie.y-st,Xn=ze.y-st,vr=Rt*Xn-ln*vn,Ri=J.x-Ve,Va=J.y-st,qo=(Xn*Ri-ln*Va)/vr,Vo=(-vn*Ri+Rt*Va)/vr,Wo=ge.z+qo*(Ie.z-ge.z)+Vo*(ze.z-ge.z);return Wo}},qn.LEFT=0,qn.RIGHT=1,qn.BEYOND=2,qn.BEHIND=3,qn.BETWEEN=4,qn.ORIGIN=5,qn.DESTINATION=6,A(Ma,qn),a(Ma.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(u){this._isOnConstraint=u},merge:function(u){u._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=u.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(u){this._isOnConstraint=!0,this.constraint=u},interfaces_:function(){return[]},getClass:function(){return Ma}}),a(tr.prototype,{equalsNonOriented:function(u){return this.equalsOriented(u)?!0:!!this.equalsOriented(u.sym())},toLineSegment:function(){return new Qt(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(u){return!(!this.orig().getCoordinate().equals2D(u.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(u.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(u){this.vertex=u},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(u){this.sym().setOrig(u)},setData:function(u){this.data=u},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var u=this.vertex.getCoordinate(),c=this.dest().getCoordinate();return $n.toLineString(u,c)},isLive:function(){return this._rot!==null},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(u){this.next=u},interfaces_:function(){return[]},getClass:function(){return tr}}),tr.makeEdge=function(u,c){var d=new tr,v=new tr,x=new tr,I=new tr;d._rot=v,v._rot=x,x._rot=I,I._rot=d,d.setNext(d),v.setNext(I),x.setNext(x),I.setNext(v);var R=d;return R.setOrig(u),R.setDest(c),R},tr.swap=function(u){var c=u.oPrev(),d=u.sym().oPrev();tr.splice(u,c),tr.splice(u.sym(),d),tr.splice(u,c.lNext()),tr.splice(u.sym(),d.lNext()),u.setOrig(c.dest()),u.setDest(d.dest())},tr.splice=function(u,c){var d=u.oNext().rot(),v=c.oNext().rot(),x=c.oNext(),I=u.oNext(),R=v.oNext(),J=d.oNext();u.setNext(x),c.setNext(I),d.setNext(R),v.setNext(J)},tr.connect=function(u,c){var d=tr.makeEdge(u.dest(),c.orig());return tr.splice(d,u.lNext()),tr.splice(d.sym(),c),d},a(wo.prototype,{insertSite:function(u){var c=this.subdiv.locate(u);if(this.subdiv.isVertexOfEdge(c,u))return c;this.subdiv.isOnEdge(c,u.getCoordinate())&&(c=c.oPrev(),this.subdiv.delete(c.oNext()));var d=this.subdiv.makeEdge(c.orig(),u);tr.splice(d,c);var v=d;do d=this.subdiv.connect(c,d.sym()),c=d.oPrev();while(c.lNext()!==v);for(;;){var x=c.oPrev();if(x.dest().rightOf(c)&&u.isInCircle(c.orig(),x.dest(),c.dest()))tr.swap(c),c=c.oPrev();else{if(c.oNext()===v)return d;c=c.oNext().lPrev()}}},insertSites:function(u){for(var c=u.iterator();c.hasNext();){var d=c.next();this.insertSite(d)}},interfaces_:function(){return[]},getClass:function(){return wo}}),a(rs.prototype,{locate:function(u){},interfaces_:function(){return[]},getClass:function(){return rs}}),a(Oo.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(u){this.lastEdge.isLive()||this.init();var c=this.subdiv.locateFromEdge(u,this.lastEdge);return this.lastEdge=c,c},findEdge:function(){var u=this.subdiv.getEdges();return u.iterator().next()},interfaces_:function(){return[rs]},getClass:function(){return Oo}}),A(ao,C),a(ao.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return ao}}),ao.msgWithSpatial=function(u,c){return c!==null?u+" [ "+c+" ]":u},a(oo.prototype,{visit:function(u){},interfaces_:function(){return[]},getClass:function(){return oo}}),a(vi.prototype,{getTriangleVertices:function(u){var c=new Bo;return this.visitTriangles(c,u),c.getTriangleVertices()},isFrameVertex:function(u){return u.equals(this.frameVertex[0])||u.equals(this.frameVertex[1])?!0:!!u.equals(this.frameVertex[2])},isVertexOfEdge:function(u,c){return!(!c.equals(u.orig(),this.tolerance)&&!c.equals(u.dest(),this.tolerance))},connect:function(u,c){var d=tr.connect(u,c);return this.quadEdges.add(d),d},getVoronoiCellPolygon:function(u,c){var d=new U,v=u;do{var x=u.rot().orig().getCoordinate();d.add(x),u=u.oPrev()}while(u!==v);var I=new te;I.addAll(d,!1),I.closeRing(),I.size()<4&&(oe.out.println(I),I.add(I.get(I.size()-1),!0));var R=I.toCoordinateArray(),J=c.createPolygon(c.createLinearRing(R),null),ge=v.orig();return J.setUserData(ge.getCoordinate()),J},setLocator:function(u){this.locator=u},initSubdiv:function(){var u=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),c=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);tr.splice(u.sym(),c);var d=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return tr.splice(c.sym(),d),tr.splice(d.sym(),u),u},isFrameBorderEdge:function(u){var c=new Array(3).fill(null);vi.getTriangleEdges(u,c);var d=new Array(3).fill(null);vi.getTriangleEdges(u.sym(),d);var v=u.lNext().dest();if(this.isFrameVertex(v))return!0;var x=u.sym().lNext().dest();return!!this.isFrameVertex(x)},makeEdge:function(u,c){var d=tr.makeEdge(u,c);return this.quadEdges.add(d),d},visitTriangles:function(u,c){this.visitedKey++;var d=new Kn;d.push(this.startingEdge);for(var v=new X;!d.empty();){var x=d.pop();if(!v.contains(x)){var I=this.fetchTriangleToVisit(x,d,c,v);I!==null&&u.visit(I)}}},isFrameEdge:function(u){return!(!this.isFrameVertex(u.orig())&&!this.isFrameVertex(u.dest()))},isOnEdge:function(u,c){this.seg.setCoordinates(u.orig().getCoordinate(),u.dest().getCoordinate());var d=this.seg.distance(c);return d<this.edgeCoincidenceTolerance},getEnvelope:function(){return new re(this.frameEnv)},createFrame:function(u){var c=u.getWidth(),d=u.getHeight(),v=0;v=c>d?10*c:10*d,this.frameVertex[0]=new qn((u.getMaxX()+u.getMinX())/2,u.getMaxY()+v),this.frameVertex[1]=new qn(u.getMinX()-v,u.getMinY()-v),this.frameVertex[2]=new qn(u.getMaxX()+v,u.getMinY()-v),this.frameEnv=new re(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(u){var c=new ko;return this.visitTriangles(c,u),c.getTriangles()},getVertices:function(u){for(var c=new X,d=this.quadEdges.iterator();d.hasNext();){var v=d.next(),x=v.orig();!u&&this.isFrameVertex(x)||c.add(x);var I=v.dest();!u&&this.isFrameVertex(I)||c.add(I)}return c},fetchTriangleToVisit:function(u,c,d,v){var x=u,I=0,R=!1;do{this.triEdges[I]=x,this.isFrameEdge(x)&&(R=!0);var J=x.sym();v.contains(J)||c.push(J),v.add(x),I++,x=x.lNext()}while(x!==u);return R&&!d?null:this.triEdges},getEdges:function(){if(arguments.length===0)return this.quadEdges;if(arguments.length===1){for(var u=arguments[0],c=this.getPrimaryEdges(!1),d=new Array(c.size()).fill(null),v=0,x=c.iterator();x.hasNext();){var I=x.next();d[v++]=u.createLineString([I.orig().getCoordinate(),I.dest().getCoordinate()])}return u.createMultiLineString(d)}},getVertexUniqueEdges:function(u){for(var c=new U,d=new X,v=this.quadEdges.iterator();v.hasNext();){var x=v.next(),I=x.orig();d.contains(I)||(d.add(I),!u&&this.isFrameVertex(I)||c.add(x));var R=x.sym(),J=R.orig();d.contains(J)||(d.add(J),!u&&this.isFrameVertex(J)||c.add(R))}return c},getTriangleEdges:function(u){var c=new Fo;return this.visitTriangles(c,u),c.getTriangleEdges()},getPrimaryEdges:function(u){this.visitedKey++;var c=new U,d=new Kn;d.push(this.startingEdge);for(var v=new X;!d.empty();){var x=d.pop();if(!v.contains(x)){var I=x.getPrimary();!u&&this.isFrameEdge(I)||c.add(I),d.push(x.oNext()),d.push(x.sym().oNext()),v.add(x),v.add(x.sym())}}return c},delete:function(u){tr.splice(u,u.oPrev()),tr.splice(u.sym(),u.sym().oPrev());var c=u.sym(),d=u.rot(),v=u.rot().sym();this.quadEdges.remove(u),this.quadEdges.remove(c),this.quadEdges.remove(d),this.quadEdges.remove(v),u.delete(),c.delete(),d.delete(),v.delete()},locateFromEdge:function(u,c){for(var d=0,v=this.quadEdges.size(),x=c;;){if(d++,d>v)throw new ao(x.toLineSegment());if(u.equals(x.orig())||u.equals(x.dest()))break;if(u.rightOf(x))x=x.sym();else if(u.rightOf(x.oNext())){if(u.rightOf(x.dPrev()))break;x=x.dPrev()}else x=x.oNext()}return x},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(u){this.visitTriangles(new Ro,!0);for(var c=new U,d=this.getVertexUniqueEdges(!1),v=d.iterator();v.hasNext();){var x=v.next();c.add(this.getVoronoiCellPolygon(x,u))}return c},getVoronoiDiagram:function(u){var c=this.getVoronoiCellPolygons(u);return u.createGeometryCollection(Ut.toGeometryArray(c))},getTriangles:function(u){for(var c=this.getTriangleCoordinates(!1),d=new Array(c.size()).fill(null),v=0,x=c.iterator();x.hasNext();){var I=x.next();d[v++]=u.createPolygon(u.createLinearRing(I),null)}return u.createGeometryCollection(d)},insertSite:function(u){var c=this.locate(u);if(u.equals(c.orig(),this.tolerance)||u.equals(c.dest(),this.tolerance))return c;var d=this.makeEdge(c.orig(),u);tr.splice(d,c);var v=d;do d=this.connect(c,d.sym()),c=d.oPrev();while(c.lNext()!==v);return v},locate:function(){if(arguments.length===1){if(arguments[0]instanceof qn){var u=arguments[0];return this.locator.locate(u)}if(arguments[0]instanceof N){var c=arguments[0];return this.locator.locate(new qn(c))}}else if(arguments.length===2){var d=arguments[0],v=arguments[1],x=this.locator.locate(new qn(d));if(x===null)return null;var I=x;x.dest().getCoordinate().equals2D(d)&&(I=x.sym());var R=I;do{if(R.dest().getCoordinate().equals2D(v))return R;R=R.oNext()}while(R!==I);return null}},interfaces_:function(){return[]},getClass:function(){return vi}}),vi.getTriangleEdges=function(u,c){if(c[0]=u,c[1]=c[0].lNext(),c[2]=c[1].lNext(),c[2].lNext()!==c[0])throw new h},a(Ro.prototype,{visit:function(u){for(var c=u[0].orig().getCoordinate(),d=u[1].orig().getCoordinate(),v=u[2].orig().getCoordinate(),x=Rn.circumcentre(c,d,v),I=new qn(x),R=0;3>R;R++)u[R].rot().setOrig(I)},interfaces_:function(){return[oo]},getClass:function(){return Ro}}),a(Fo.prototype,{getTriangleEdges:function(){return this.triList},visit:function(u){this.triList.add(u.clone())},interfaces_:function(){return[oo]},getClass:function(){return Fo}}),a(Bo.prototype,{visit:function(u){this.triList.add([u[0].orig(),u[1].orig(),u[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[oo]},getClass:function(){return Bo}}),a(ko.prototype,{checkTriangleSize:function(u){u.length>=2?$n.toLineString(u[0],u[1]):u.length>=1&&$n.toPoint(u[0])},visit:function(u){this.coordList.clear();for(var c=0;3>c;c++){var d=u[c].orig();this.coordList.add(d.getCoordinate())}if(this.coordList.size()>0){this.coordList.closeRing();var v=this.coordList.toCoordinateArray();if(v.length!==4)return null;this.triCoords.add(v)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[oo]},getClass:function(){return ko}}),vi.TriangleCircumcentreVisitor=Ro,vi.TriangleEdgesListVisitor=Fo,vi.TriangleVertexListVisitor=Bo,vi.TriangleCoordinatesVisitor=ko,vi.EDGE_COINCIDENCE_TOL_FACTOR=1e3,a(Ua.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){var u=this.ls.getCoordinate(1);return u.z},getStartZ:function(){var u=this.ls.getCoordinate(0);return u.z},intersection:function(u){return this.ls.intersection(u.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){var u=this.ls.getCoordinate(1);return u.y},getStartX:function(){var u=this.ls.getCoordinate(0);return u.x},equalsTopo:function(u){return this.ls.equalsTopo(u.getLineSegment())},getStartY:function(){var u=this.ls.getCoordinate(0);return u.y},setData:function(u){this.data=u},getData:function(){return this.data},getEndX:function(){var u=this.ls.getCoordinate(1);return u.x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return Ua}}),a(Eo.prototype,{visit:function(u){},interfaces_:function(){return[]},getClass:function(){return Eo}}),a($o.prototype,{isRepeated:function(){return this.count>1},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(u){this.left=u},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(u){this.right=u},interfaces_:function(){return[]},getClass:function(){return $o}}),a(qa.prototype,{insert:function(){if(arguments.length===1){var u=arguments[0];return this.insert(u,null)}if(arguments.length===2){var c=arguments[0],d=arguments[1];if(this.root===null)return this.root=new $o(c,d),this.root;if(this.tolerance>0){var v=this.findBestMatchNode(c);if(v!==null)return v.increment(),v}return this.insertExact(c,d)}},query:function(){var u=arguments,c=this;if(arguments.length===1){var d=arguments[0],v=new U;return this.query(d,v),v}if(arguments.length===2){if(arguments[0]instanceof re&&T(arguments[1],k))(function(){var R=u[0],J=u[1];c.queryNode(c.root,R,!0,{interfaces_:function(){return[Eo]},visit:function(ge){J.add(ge)}})})();else if(arguments[0]instanceof re&&T(arguments[1],Eo)){var x=arguments[0],I=arguments[1];this.queryNode(this.root,x,!0,I)}}},queryNode:function(u,c,d,v){if(u===null)return null;var x=null,I=null,R=null;d?(x=c.getMinX(),I=c.getMaxX(),R=u.getX()):(x=c.getMinY(),I=c.getMaxY(),R=u.getY());var J=R>x,ge=I>=R;J&&this.queryNode(u.getLeft(),c,!d,v),c.contains(u.getCoordinate())&&v.visit(u),ge&&this.queryNode(u.getRight(),c,!d,v)},findBestMatchNode:function(u){var c=new Go(u,this.tolerance);return this.query(c.queryEnvelope(),c),c.getNode()},isEmpty:function(){return this.root===null},insertExact:function(u,c){for(var d=this.root,v=this.root,x=!0,I=!0;d!==null;){if(d!==null){var R=u.distance(d.getCoordinate())<=this.tolerance;if(R)return d.increment(),d}I=x?u.x<d.getX():u.y<d.getY(),v=d,d=I?d.getLeft():d.getRight(),x=!x}this.numberOfNodes=this.numberOfNodes+1;var J=new $o(u,c);return I?v.setLeft(J):v.setRight(J),J},interfaces_:function(){return[]},getClass:function(){return qa}}),qa.toCoordinates=function(){if(arguments.length===1){var u=arguments[0];return qa.toCoordinates(u,!1)}if(arguments.length===2){for(var c=arguments[0],d=arguments[1],v=new te,x=c.iterator();x.hasNext();)for(var I=x.next(),R=d?I.getCount():1,J=0;R>J;J++)v.add(I.getCoordinate(),!0);return v.toCoordinateArray()}},a(Go.prototype,{visit:function(u){var c=this.p.distance(u.getCoordinate()),d=c<=this.tolerance;if(!d)return null;var v=!1;(this.matchNode===null||c<this.matchDist||this.matchNode!==null&&c===this.matchDist&&u.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(v=!0),v&&(this.matchNode=u,this.matchDist=c)},queryEnvelope:function(){var u=new re(this.p);return u.expandBy(this.tolerance),u},getNode:function(){return this.matchNode},interfaces_:function(){return[Eo]},getClass:function(){return Go}}),qa.BestMatchVisitor=Go,a(Da.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();var u=0,c=0;do c=this.enforceGabriel(this.segments),u++;while(c>0&&u<Da.MAX_SPLIT_ITER)},insertSites:function(u){for(var c=u.iterator();c.hasNext();){var d=c.next();this.insertSite(d)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var u=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),c=0,d=this.initialVertices.iterator();d.hasNext();){var v=d.next();u[c++]=v.getCoordinate()}for(var x=this.segVertices.iterator();x.hasNext();){var v=x.next();u[c++]=v.getCoordinate()}return u},setConstraints:function(u,c){this.segments=u,this.segVertices=c},computeConvexHull:function(){var u=new Ut,c=this.getPointArray(),d=new z(c,u);this.convexHull=d.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(u){var c=u.getStart(),d=u.getEnd(),v=new N((c.x+d.x)/2,(c.y+d.y)/2),x=c.distance(v),I=new re(v);I.expandBy(x);for(var R=this.kdt.query(I),J=null,ge=g.MAX_VALUE,Ie=R.iterator();Ie.hasNext();){var ze=Ie.next(),Ve=ze.getCoordinate();if(!Ve.equals2D(c)&&!Ve.equals2D(d)){var st=v.distance(Ve);if(x>st){var Rt=st;(J===null||ge>Rt)&&(J=Ve,ge=Rt)}}}return J},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(u){this.splitFinder=u},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(u){for(var c=new U,d=0,v=new U,x=u.iterator();x.hasNext();){var I=x.next(),R=this.findNonGabrielPoint(I);if(R!==null){this.splitPt=this.splitFinder.findSplitPoint(I,R);var J=this.createVertex(this.splitPt,I),ge=(this.insertSite(J),new Ua(I.getStartX(),I.getStartY(),I.getStartZ(),J.getX(),J.getY(),J.getZ(),I.getData())),Ie=new Ua(J.getX(),J.getY(),J.getZ(),I.getEndX(),I.getEndY(),I.getEndZ(),I.getData());c.add(ge),c.add(Ie),v.add(I),d+=1}}return u.removeAll(v),u.addAll(c),d},createVertex:function(){if(arguments.length===1){var u=arguments[0],c=null;return c=this.vertexFactory!==null?this.vertexFactory.createVertex(u,null):new Ma(u)}if(arguments.length===2){var d=arguments[0],v=arguments[1],c=null;return c=this.vertexFactory!==null?this.vertexFactory.createVertex(d,v):new Ma(d),c.setOnConstraint(!0),c}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var u=Da.computeVertexEnvelope(this.initialVertices),c=Da.computeVertexEnvelope(this.segVertices),d=new re(u);d.expandToInclude(c);var v=.2*d.getWidth(),x=.2*d.getHeight(),I=Math.max(v,x);this.computeAreaEnv=new re(d),this.computeAreaEnv.expandBy(I)},setVertexFactory:function(u){this.vertexFactory=u},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new vi(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new Oo(this.subdiv)),this.incDel=new wo(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof Ma){var u=arguments[0],c=this.kdt.insert(u.getCoordinate(),u);if(c.isRepeated()){var d=c.getData();return d.merge(u),d}return this.incDel.insertSite(u),u}if(arguments[0]instanceof N){var v=arguments[0];this.insertSite(this.createVertex(v))}},interfaces_:function(){return[]},getClass:function(){return Da}}),Da.computeVertexEnvelope=function(u){for(var c=new re,d=u.iterator();d.hasNext();){var v=d.next();c.expandToInclude(v.getCoordinate())}return c},Da.MAX_SPLIT_ITER=99,a(Wr.prototype,{create:function(){if(this.subdiv!==null)return null;var u=Wr.envelope(this.siteCoords),c=Wr.toVertices(this.siteCoords);this.subdiv=new vi(u,this.tolerance);var d=new wo(this.subdiv);d.insertSites(c)},setTolerance:function(u){this.tolerance=u},setSites:function(){if(arguments[0]instanceof Ne){var u=arguments[0];this.siteCoords=Wr.extractUniqueCoordinates(u)}else if(T(arguments[0],F)){var c=arguments[0];this.siteCoords=Wr.unique(He.toCoordinateArray(c))}},getEdges:function(u){return this.create(),this.subdiv.getEdges(u)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(u){return this.create(),this.subdiv.getTriangles(u)},interfaces_:function(){return[]},getClass:function(){return Wr}}),Wr.extractUniqueCoordinates=function(u){if(u===null)return new te;var c=u.getCoordinates();return Wr.unique(c)},Wr.envelope=function(u){for(var c=new re,d=u.iterator();d.hasNext();){var v=d.next();c.expandToInclude(v)}return c},Wr.unique=function(u){var c=He.copyDeep(u);gn.sort(c);var d=new te(c,!1);return d},Wr.toVertices=function(u){for(var c=new U,d=u.iterator();d.hasNext();){var v=d.next();c.add(new qn(v))}return c},a(so.prototype,{createSiteVertices:function(u){for(var c=new U,d=u.iterator();d.hasNext();){var v=d.next();this.constraintVertexMap.containsKey(v)||c.add(new Ma(v))}return c},create:function(){if(this.subdiv!==null)return null;var u=Wr.envelope(this.siteCoords),c=new U;this.constraintLines!==null&&(u.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),c=so.createConstraintSegments(this.constraintLines));var d=this.createSiteVertices(this.siteCoords),v=new Da(d,this.tolerance);v.setConstraints(c,new U(this.constraintVertexMap.values())),v.formInitialDelaunay(),v.enforceConstraints(),this.subdiv=v.getSubdivision()},setTolerance:function(u){this.tolerance=u},setConstraints:function(u){this.constraintLines=u},setSites:function(u){this.siteCoords=Wr.extractUniqueCoordinates(u)},getEdges:function(u){return this.create(),this.subdiv.getEdges(u)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(u){return this.create(),this.subdiv.getTriangles(u)},createVertices:function(u){for(var c=u.getCoordinates(),d=0;d<c.length;d++){var v=new Ma(c[d]);this.constraintVertexMap.put(c[d],v)}},interfaces_:function(){return[]},getClass:function(){return so}}),so.createConstraintSegments=function(){if(arguments.length===1){for(var u=arguments[0],c=nr.getLines(u),d=new U,v=c.iterator();v.hasNext();){var x=v.next();so.createConstraintSegments(x,d)}return d}if(arguments.length===2)for(var I=arguments[0],R=arguments[1],J=I.getCoordinates(),v=1;v<J.length;v++)R.add(new Ua(J[v-1],J[v]))},a(So.prototype,{create:function(){if(this.subdiv!==null)return null;var u=Wr.envelope(this.siteCoords);this.diagramEnv=u;var c=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(c),this.clipEnv!==null&&this.diagramEnv.expandToInclude(this.clipEnv);var d=Wr.toVertices(this.siteCoords);this.subdiv=new vi(u,this.tolerance);var v=new wo(this.subdiv);v.insertSites(d)},getDiagram:function(u){this.create();var c=this.subdiv.getVoronoiDiagram(u);return So.clipGeometryCollection(c,this.diagramEnv)},setTolerance:function(u){this.tolerance=u},setSites:function(){if(arguments[0]instanceof Ne){var u=arguments[0];this.siteCoords=Wr.extractUniqueCoordinates(u)}else if(T(arguments[0],F)){var c=arguments[0];this.siteCoords=Wr.unique(He.toCoordinateArray(c))}},setClipEnvelope:function(u){this.clipEnv=u},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return So}}),So.clipGeometryCollection=function(u,c){for(var d=u.getFactory().toGeometry(c),v=new U,x=0;x<u.getNumGeometries();x++){var I=u.getGeometryN(x),R=null;c.contains(I.getEnvelopeInternal())?R=I:c.intersects(I.getEnvelopeInternal())&&(R=d.intersection(I),R.setUserData(I.getUserData())),R===null||R.isEmpty()||v.add(R)}return u.getFactory().createGeometryCollection(Ut.toGeometryArray(v))};var As=Object.freeze({ConformingDelaunayTriangulationBuilder:so,DelaunayTriangulationBuilder:Wr,VoronoiDiagramBuilder:So});a(zo.prototype,{interfaces_:function(){return[]},getClass:function(){return zo}}),zo.union=function(u,c){if(u.isEmpty()||c.isEmpty()){if(u.isEmpty()&&c.isEmpty())return Ot.createEmptyResult(Ot.UNION,u,c,u.getFactory());if(u.isEmpty())return c.copy();if(c.isEmpty())return u.copy()}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(c),ir.overlayOp(u,c,Ot.UNION)},a(Ne.prototype,{equalsTopo:function(u){return this.getEnvelopeInternal().equals(u.getEnvelopeInternal())?kn.relate(this,u).isEquals(this.getDimension(),u.getDimension()):!1},union:function(){if(arguments.length===0)return Aa.union(this);if(arguments.length===1){var u=arguments[0];return zo.union(this,u)}},isValid:function(){return Ii.isValid(this)},intersection:function(u){if(this.isEmpty()||u.isEmpty())return Ot.createEmptyResult(Ot.INTERSECTION,this,u,this.factory);if(this.isGeometryCollection()){var c=u;return $i.map(this,{interfaces_:function(){return[MapOp]},map:function(d){return d.intersection(c)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(u),ir.overlayOp(this,u,Ot.INTERSECTION)},covers:function(u){return kn.covers(this,u)},coveredBy:function(u){return kn.coveredBy(this,u)},touches:function(u){return kn.touches(this,u)},intersects:function(u){return kn.intersects(this,u)},within:function(u){return kn.within(this,u)},overlaps:function(u){return kn.overlaps(this,u)},disjoint:function(u){return kn.disjoint(this,u)},crosses:function(u){return kn.crosses(this,u)},buffer:function(){if(arguments.length===1){var u=arguments[0];return Ar.bufferOp(this,u)}if(arguments.length===2){var c=arguments[0],d=arguments[1];return Ar.bufferOp(this,c,d)}if(arguments.length===3){var v=arguments[0],x=arguments[1],I=arguments[2];return Ar.bufferOp(this,v,x,I)}},convexHull:function(){return new z(this).getConvexHull()},relate:function(){for(var u=arguments.length,c=Array(u),d=0;u>d;d++)c[d]=arguments[d];return kn.relate.apply(kn,[this].concat(c))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var u=un.getCentroid(this);return this.createPointFromInternalCoord(u,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var u=null,c=this.getDimension();if(c===0){var d=new va(this);u=d.getInteriorPoint()}else if(c===1){var d=new ci(this);u=d.getInteriorPoint()}else{var d=new er(this);u=d.getInteriorPoint()}return this.createPointFromInternalCoord(u,this)},symDifference:function(u){if(this.isEmpty()||u.isEmpty()){if(this.isEmpty()&&u.isEmpty())return Ot.createEmptyResult(Ot.SYMDIFFERENCE,this,u,this.factory);if(this.isEmpty())return u.copy();if(u.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(u),ir.overlayOp(this,u,Ot.SYMDIFFERENCE)},createPointFromInternalCoord:function(u,c){return c.getPrecisionModel().makePrecise(u),c.getFactory().createPoint(u)},toText:function(){var u=new $n;return u.write(this)},toString:function(){this.toText()},contains:function(u){return kn.contains(this,u)},difference:function(u){return this.isEmpty()?Ot.createEmptyResult(Ot.DIFFERENCE,this,u,this.factory):u.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(u),ir.overlayOp(this,u,Ot.DIFFERENCE))},isSimple:function(){var u=new kr(this);return u.isSimple()},isWithinDistance:function(u,c){var d=this.getEnvelopeInternal().distance(u.getEnvelopeInternal());return d>c?!1:ne.isWithinDistance(this,u,c)},distance:function(u){return ne.distance(this,u)},isEquivalentClass:function(u){return this.getClass()===u.getClass()}});var Ms="1.1.2 (248dab8)";t.version=Ms,t.algorithm=cs,t.densify=fs,t.dissolve=hs,t.geom=ls,t.index=ps,t.io=vs,t.noding=ys,t.operation=Ps,t.precision=Ns,t.simplify=Ls,t.triangulate=As})})(jsts_min,jsts_minExports);var jsts$3=jsts_minExports,turfUnion=function(n,e){var t=new jsts$3.io.GeoJSONReader,a=t.read(JSON.stringify(n.geometry)),l=t.read(JSON.stringify(e.geometry)),h=a.union(l),g=new jsts$3.io.GeoJSONWriter;return h=g.write(h),{type:"Feature",geometry:h,properties:n.properties}},tin=turfTin,union=turfUnion,distance$9=turfDistance;function concave(n,e,t){if(typeof e!="number")throw new Error("maxEdge parameter is required");if(typeof t!="string")throw new Error("units parameter is required");var a=tin(n),l=a.features.filter(h);a.features=l;function h(g){var p=g.geometry.coordinates[0][0],y=g.geometry.coordinates[0][1],b=g.geometry.coordinates[0][2],E=distance$9(p,y,t),C=distance$9(y,b,t),A=distance$9(p,b,t);return E<=e&&C<=e&&A<=e}return merge$1(a)}function merge$1(n){for(var e=JSON.parse(JSON.stringify(n.features[0])),t=n.features,a=0,l=t.length;a<l;a++){var h=t[a];h.geometry&&(e=union(e,h))}return e}var turfConcave=concave,jsts$2=jsts_minExports,turfDifference=function(n,e){var t=JSON.parse(JSON.stringify(n)),a=JSON.parse(JSON.stringify(e));t.type!=="Feature"&&(t={type:"Feature",properties:{},geometry:t}),a.type!=="Feature"&&(a={type:"Feature",properties:{},geometry:a});var l=new jsts$2.io.GeoJSONReader,h=l.read(JSON.stringify(t.geometry)),g=l.read(JSON.stringify(a.geometry)),p=h.difference(g);if(!p.isEmpty()){var y=new jsts$2.io.GeoJSONWriter,b=y.write(p);return t.geometry=p,{type:"Feature",properties:t.properties,geometry:b}}},inside$2=turfInside,turfCollect=function(e,t,a,l){return e.features.forEach(function(h){var g=t.features.filter(function(p){return inside$2(p,h)}).map(function(p){return p.properties[a]});h.properties||(h.properties={}),h.properties[l]=g}),e},coordEach=turfMeta.coordEach,turfFlip=function(e){return e=JSON.parse(JSON.stringify(e)),coordEach(e,function(t){t.reverse()}),e},simplifyExports={},simplify$1={get exports(){return simplifyExports},set exports(n){simplifyExports=n}};(function(n){(function(){function e(p,y){var b=p.x-y.x,E=p.y-y.y;return b*b+E*E}function t(p,y,b){var E=y.x,C=y.y,A=b.x-E,B=b.y-C;if(A!==0||B!==0){var M=((p.x-E)*A+(p.y-C)*B)/(A*A+B*B);M>1?(E=b.x,C=b.y):M>0&&(E+=A*M,C+=B*M)}return A=p.x-E,B=p.y-C,A*A+B*B}function a(p,y){for(var b=p[0],E=[b],C,A=1,B=p.length;A<B;A++)C=p[A],e(C,b)>y&&(E.push(C),b=C);return b!==C&&E.push(C),E}function l(p,y,b,E,C){for(var A=E,B,M=y+1;M<b;M++){var N=t(p[M],p[y],p[b]);N>A&&(B=M,A=N)}A>E&&(B-y>1&&l(p,y,B,E,C),C.push(p[B]),b-B>1&&l(p,B,b,E,C))}function h(p,y){var b=p.length-1,E=[p[0]];return l(p,0,b,y,E),E.push(p[b]),E}function g(p,y,b){if(p.length<=2)return p;var E=y!==void 0?y*y:1;return p=b?p:a(p,E),p=h(p,E),p}n.exports=g,n.exports.default=g})()})(simplify$1);var simplify=simplifyExports,supportedTypes=["LineString","MultiLineString","Polygon","MultiPolygon"],turfSimplify=function(n,e,t){return n.type==="Feature"?simpleFeature(simplifyHelper(n,e,t),n.properties):n.type==="FeatureCollection"?{type:"FeatureCollection",features:n.features.map(function(a){var l=simplifyHelper(a,e,t);return supportedTypes.indexOf(l.type)>-1?simpleFeature(l,a.properties):l})}:n.type==="GeometryCollection"?{type:"GeometryCollection",geometries:n.geometries.map(function(a){return supportedTypes.indexOf(a.type)>-1?simplifyHelper({type:"Feature",geometry:a},e,t):a})}:n};function simplifyHelper(n,e,t){return n.geometry.type==="LineString"?{type:"LineString",coordinates:simplifyLine(n.geometry.coordinates,e,t)}:n.geometry.type==="MultiLineString"?{type:"MultiLineString",coordinates:n.geometry.coordinates.map(function(a){return simplifyLine(a,e,t)})}:n.geometry.type==="Polygon"?{type:"Polygon",coordinates:simplifyPolygon(n.geometry.coordinates,e,t)}:n.geometry.type==="MultiPolygon"?{type:"MultiPolygon",coordinates:n.geometry.coordinates.map(function(a){return simplifyPolygon(a,e,t)})}:n}function checkValidity(n){return n.length<3?!1:!(n.length===3&&n[2][0]===n[0][0]&&n[2][1]===n[0][1])}function simpleFeature(n,e){return{type:"Feature",geometry:n,properties:e}}function simplifyLine(n,e,t){return simplify(n.map(function(a){return{x:a[0],y:a[1]}}),e,t).map(function(a){return[a.x,a.y]})}function simplifyPolygon(n,e,t){return n.map(function(a){var l=a.map(function(g){return{x:g[0],y:g[1]}});if(l.length<4)throw new Error("Invalid polygon");for(var h=simplify(l,e,t).map(function(g){return[g.x,g.y]});!checkValidity(h);)e-=e*.01,h=simplify(l,e,t).map(function(g){return[g.x,g.y]});return(h[h.length-1][0]!==h[0][0]||h[h.length-1][1]!==h[0][1])&&h.push(h[0]),h})}var Spline$1=function(n){this.points=n.points||[],this.duration=n.duration||1e4,this.sharpness=n.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=n.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(var e=0;e<this.length-1;e++){var t=this.points[e],a=this.points[e+1];this.centers.push({x:(t.x+a.x)/2,y:(t.y+a.y)/2,z:(t.z+a.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var e=0;e<this.centers.length-1;e++){var t=this.centers[e],a=this.centers[e+1],l=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,h=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,g=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+l),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+h),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+g)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+l),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+h),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+g)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};Spline$1.prototype.cacheSteps=function(n){var e=[],t=this.pos(0);e.push(0);for(var a=0;a<this.duration;a+=10){var l=this.pos(a),h=Math.sqrt((l.x-t.x)*(l.x-t.x)+(l.y-t.y)*(l.y-t.y)+(l.z-t.z)*(l.z-t.z));h>n&&(e.push(a),t=l)}return e};Spline$1.prototype.vector=function(n){var e=this.pos(n+10),t=this.pos(n-10);return{angle:180*Math.atan2(e.y-t.y,e.x-t.x)/3.14,speed:Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z))}};Spline$1.prototype.pos=function(n){function e(g,p,y,b,E){var C=function(M){var N=M*M,Z=N*M;return[Z,3*N*(1-M),3*M*(1-M)*(1-M),(1-M)*(1-M)*(1-M)]},A=C(g),B={x:E.x*A[0]+b.x*A[1]+y.x*A[2]+p.x*A[3],y:E.y*A[0]+b.y*A[1]+y.y*A[2]+p.y*A[3],z:E.z*A[0]+b.z*A[1]+y.z*A[2]+p.z*A[3]};return B}var t=n-this.delay;t<0&&(t=0),t>this.duration&&(t=this.duration-1);var a=t/this.duration;if(a>=1)return this.points[this.length-1];var l=Math.floor((this.points.length-1)*a),h=(this.length-1)*a-l;return e(h,this.points[l],this.controls[l][1],this.controls[l+1][0],this.points[l+1])};var spline=Spline$1,linestring$1=turfHelpers.lineString,Spline=spline,turfBezier=function(n,e,t){var a=linestring$1([]);a.properties=n.properties;for(var l=new Spline({points:n.geometry.coordinates.map(function(p){return{x:p[0],y:p[1]}}),duration:e,sharpness:t}),h=0;h<l.duration;h+=10){var g=l.pos(h);Math.floor(h/100)%2===0&&a.geometry.coordinates.push([g.x,g.y])}return a},inside$1=turfInside,turfTag=function(n,e,t,a){return n=JSON.parse(JSON.stringify(n)),e=JSON.parse(JSON.stringify(e)),n.features.forEach(function(l){l.properties||(l.properties={}),e.features.forEach(function(h){if(l.properties[a]===void 0){var g=inside$1(l,h);g&&(l.properties[a]=h.properties[t])}})}),n},featureCollection$3=turfHelpers.featureCollection,turfSample=function(n,e){var t=featureCollection$3(getRandomSubarray(n.features,e));return t};function getRandomSubarray(n,e){for(var t=n.slice(0),a=n.length,l=a-e,h,g;a-- >l;)g=Math.floor((a+1)*Math.random()),h=t[g],t[g]=t[a],t[a]=h;return t.slice(l)}var polygon$5=turfHelpers.polygon,turfBboxPolygon=function(n){var e=[n[0],n[1]],t=[n[0],n[3]],a=[n[2],n[3]],l=[n[2],n[1]];return polygon$5([[e,l,a,t,e]])},bbox$1=turfBbox,bboxPolygon=turfBboxPolygon,turfEnvelope=function(n){return bboxPolygon(bbox$1(n))},getCoord$1=turfInvariant.getCoord,turfBearing=function(n,e){var t=Math.PI/180,a=180/Math.PI,l=getCoord$1(n),h=getCoord$1(e),g=t*l[0],p=t*h[0],y=t*l[1],b=t*h[1],E=Math.sin(p-g)*Math.cos(b),C=Math.cos(y)*Math.sin(b)-Math.sin(y)*Math.cos(b)*Math.cos(p-g),A=a*Math.atan2(E,C);return A},getCoord=turfInvariant.getCoord,helpers$2=turfHelpers,point$b=helpers$2.point,distanceToRadians=helpers$2.distanceToRadians,turfDestination=function(n,e,t,a){var l=Math.PI/180,h=180/Math.PI,g=getCoord(n),p=l*g[0],y=l*g[1],b=l*t,E=distanceToRadians(e,a),C=Math.asin(Math.sin(y)*Math.cos(E)+Math.cos(y)*Math.sin(E)*Math.cos(b)),A=p+Math.atan2(Math.sin(b)*Math.sin(E)*Math.cos(y),Math.cos(E)-Math.sin(y)*Math.sin(C));return point$b([h*A,h*C])},bearing$2=turfBearing,destination$2=turfDestination,distance$8=turfDistance,turfMidpoint=function(n,e){var t=distance$8(n,e,"miles"),a=bearing$2(n,e),l=destination$2(n,t/2,a,"miles");return l},geojsonNormalize=normalize$1,types$1={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function normalize$1(n){if(!n||!n.type)return null;var e=types$1[n.type];if(!e)return null;if(e==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:n}]};if(e==="feature")return{type:"FeatureCollection",features:[n]};if(e==="featurecollection")return n}var helpers$1=turfHelpers,featureCollection$2=helpers$1.featureCollection,jsts$1=jsts_minExports,normalize=geojsonNormalize,turfBuffer=function(n,e,t){var a=helpers$1.distanceToDegrees(e,t),l=normalize(n),h=normalize(featureCollection$2(l.features.map(function(g){return bufferOp(g,a)})));if(h.features.length>1)return h;if(h.features.length===1)return h.features[0]};function bufferOp(n,e){var t=new jsts$1.io.GeoJSONReader,a=t.read(n.geometry),l=a.buffer(e),h=new jsts$1.io.GeoJSONWriter;return l=h.write(l),{type:"Feature",geometry:l,properties:{}}}var bbox=turfBbox,point$a=turfHelpers.point,turfCenter=function(n){var e=bbox(n),t=(e[0]+e[2])/2,a=(e[1]+e[3])/2;return point$a([t,a])},each$9=turfMeta.coordEach,point$9=turfHelpers.point,turfCentroid=function(n){var e=0,t=0,a=0;return each$9(n,function(l){e+=l[0],t+=l[1],a++},!0),point$9([e/a,t/a])},meta=turfMeta,turfCombine=function(n){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},t=Object.keys(e).reduce(function(l,h){return l[h.replace("Multi","")]=h,l},{});function a(l,h,g){g?e[h].coordinates=e[h].coordinates.concat(l.geometry.coordinates):e[h].coordinates.push(l.geometry.coordinates),e[h].properties.push(l.properties)}return meta.featureEach(n,function(l){l.geometry&&(e[l.geometry.type]?a(l,l.geometry.type,!0):t[l.geometry.type]&&a(l,t[l.geometry.type],!1))}),{type:"FeatureCollection",features:Object.keys(e).filter(function(l){return e[l].coordinates.length}).sort().map(function(l){return{type:"Feature",properties:{collectedProperties:e[l].properties},geometry:{type:l,coordinates:e[l].coordinates}}})}},featureCollection$1=turfHelpers.featureCollection,each$8=turfMeta.coordEach,point$8=turfHelpers.point,turfExplode=function(n){var e=[];return each$8(n,function(t){e.push(point$8(t))}),featureCollection$1(e)},polygon$4=turfHelpers.polygon,earcut=earcutExports,turfTesselate=function(n){if(!n.geometry||n.geometry.type!=="Polygon"&&n.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return n.geometry.type==="Polygon"?e.features=processPolygon(n.geometry.coordinates):n.geometry.coordinates.forEach(function(t){e.features=e.features.concat(processPolygon(t))}),e};function processPolygon(n){var e=flattenCoords(n),t=2,a=earcut(e.vertices,e.holes,t),l=[],h=[];a.forEach(function(y,b){var E=a[b];h.push([e.vertices[E*t],e.vertices[E*t+1]])});for(var g=0;g<h.length;g+=3){var p=h.slice(g,g+3);p.push(h[g]),l.push(polygon$4([p]))}return l}function flattenCoords(n){for(var e=n[0][0].length,t={vertices:[],holes:[],dimensions:e},a=0,l=0;l<n.length;l++){for(var h=0;h<n[l].length;h++)for(var g=0;g<e;g++)t.vertices.push(n[l][h][g]);l>0&&(a+=n[l-1].length,t.holes.push(a))}return t}var jsts=jsts_minExports,turfIntersect=function(e,t){var a,l;e.type==="Feature"?a=e.geometry:a=e,t.type==="Feature"?l=t.geometry:l=t;var h=new jsts.io.GeoJSONReader,g=h.read(JSON.stringify(a)),p=h.read(JSON.stringify(l)),y=g.intersection(p);if(!y.isEmpty()){var b=new jsts.io.GeoJSONWriter,E=b.write(y);return{type:"Feature",properties:{},geometry:E}}},distance$7=turfDistance,turfNearest=function(n,e){for(var t,a=1/0,l=0;l<e.features.length;l++){var h=distance$7(n,e.features[l],"miles");h<a&&(t=e.features[l],a=h)}return t},geojsonRandomExports={},geojsonRandom={get exports(){return geojsonRandomExports},set exports(n){geojsonRandomExports=n}};geojsonRandom.exports=function(){throw new Error("call .point() or .polygon() instead")};function position(n){return n?coordInBBBOX(n):[lon(),lat()]}geojsonRandomExports.position=position;geojsonRandomExports.point=function(n,e){var t=[];for(i=0;i<n;i++)t.push(feature(e?point$7(position(e)):point$7()));return collection(t)};geojsonRandomExports.polygon=function(n,e,t,a){typeof e!="number"&&(e=10),typeof t!="number"&&(t=10);var l=[];for(i=0;i<n;i++){var h=[],g=Array.apply(null,new Array(e+1)).map(Math.random);g.forEach(p),g.forEach(y),h[h.length-1]=h[0],h=h.map(vertexToCoordinate(position(a))),l.push(feature(polygon$3([h])))}function p(b,E,C){C[E]=E>0?b+C[E-1]:b}function y(b,E){b=b*2*Math.PI/g[g.length-1];var C=Math.random();h.push([C*t*Math.sin(b),C*t*Math.cos(b)])}return collection(l)};function vertexToCoordinate(n){return function(e,t){return[e[0]+n[0],e[1]+n[1]]}}function rnd(){return Math.random()-.5}function lon(){return rnd()*360}function lat(){return rnd()*180}function point$7(n){return{type:"Point",coordinates:n||[lon(),lat()]}}function coordInBBBOX(n){return[Math.random()*(n[2]-n[0])+n[0],Math.random()*(n[3]-n[1])+n[1]]}function polygon$3(n){return{type:"Polygon",coordinates:n}}function feature(n){return{type:"Feature",geometry:n,properties:{}}}function collection(n){return{type:"FeatureCollection",features:n}}var random$1=geojsonRandomExports,turfRandom=function(n,e,t){switch(t=t||{},e=e||1,n){case"point":case"points":case void 0:return random$1.point(e,t.bbox);case"polygon":case"polygons":return random$1.polygon(e,t.num_vertices,t.max_radial_length,t.bbox);default:throw new Error("Unknown type given: valid options are points and polygons")}},point$6=turfHelpers.point,turfKinks=function(n){var e,t={type:"FeatureCollection",features:[]};return n.type==="Feature"?e=n.geometry:e=n,e.coordinates.forEach(function(a){e.coordinates.forEach(function(l){for(var h=0;h<a.length-1;h++)for(var g=0;g<l.length-1;g++)if(!(a===l&&(Math.abs(h-g)===1||Math.abs(h-g)===a.length-2))){var p=lineIntersects$1(a[h][0],a[h][1],a[h+1][0],a[h+1][1],l[g][0],l[g][1],l[g+1][0],l[g+1][1]);p&&t.features.push(point$6([p[0],p[1]]))}})}),t};function lineIntersects$1(n,e,t,a,l,h,g,p){var y,b,E,C,A,B={x:null,y:null,onLine1:!1,onLine2:!1};return y=(p-h)*(t-n)-(g-l)*(a-e),y===0?B.x!==null&&B.y!==null?B:!1:(b=e-h,E=n-l,C=(g-l)*b-(p-h)*E,A=(t-n)*b-(a-e)*E,b=C/y,E=A/y,B.x=n+b*(t-n),B.y=e+b*(a-e),b>=0&&b<=1&&(B.onLine1=!0),E>=0&&E<=1&&(B.onLine2=!0),B.onLine1&&B.onLine2?[B.x,B.y]:!1)}var featureCollection=turfHelpers.featureCollection,centroid=turfCenter,distance$6=turfDistance,inside=turfInside,explode=turfExplode;function pointOnSurface(n){n.type!=="FeatureCollection"&&(n.type!=="Feature"&&(n={type:"Feature",geometry:n,properties:{}}),n=featureCollection([n]));for(var e=centroid(n),t=!1,a=0;!t&&a<n.features.length;){var l=n.features[a].geometry,h,g,p,y,b,E,C,A=!1;if(l.type==="Point")e.geometry.coordinates[0]===l.coordinates[0]&&e.geometry.coordinates[1]===l.coordinates[1]&&(t=!0);else if(l.type==="MultiPoint"){var B=!1;for(C=0;!B&&C<l.coordinates.length;)e.geometry.coordinates[0]===l.coordinates[C][0]&&e.geometry.coordinates[1]===l.coordinates[C][1]&&(t=!0,B=!0),C++}else if(l.type==="LineString")for(C=0;!A&&C<l.coordinates.length-1;)h=e.geometry.coordinates[0],g=e.geometry.coordinates[1],p=l.coordinates[C][0],y=l.coordinates[C][1],b=l.coordinates[C+1][0],E=l.coordinates[C+1][1],pointOnSegment(h,g,p,y,b,E)&&(A=!0,t=!0),C++;else if(l.type==="MultiLineString")for(var M=0;M<l.coordinates.length;){A=!1,C=0;for(var N=l.coordinates[M];!A&&C<N.length-1;)h=e.geometry.coordinates[0],g=e.geometry.coordinates[1],p=N[C][0],y=N[C][1],b=N[C+1][0],E=N[C+1][1],pointOnSegment(h,g,p,y,b,E)&&(A=!0,t=!0),C++;M++}else if(l.type==="Polygon"||l.type==="MultiPolygon"){var Z={type:"Feature",geometry:l,properties:{}};inside(e,Z)&&(t=!0)}a++}if(t)return e;var ee=featureCollection([]);for(a=0;a<n.features.length;a++)ee.features=ee.features.concat(explode(n.features[a]).features);var F,O=1/0;for(a=0;a<ee.features.length;a++){var k=distance$6(e,ee.features[a],"miles");k<O&&(O=k,F=ee.features[a])}return F}function pointOnSegment(n,e,t,a,l,h){var g=Math.sqrt((l-t)*(l-t)+(h-a)*(h-a)),p=Math.sqrt((n-t)*(n-t)+(e-a)*(e-a)),y=Math.sqrt((l-n)*(l-n)+(h-e)*(h-e));if(g===p+y)return!0}var turfPointOnSurface=pointOnSurface,geojsonArea={},wgs84$1={};wgs84$1.RADIUS=6378137;wgs84$1.FLATTENING=1/298.257223563;wgs84$1.POLAR_RADIUS=63567523142e-4;var wgs84=wgs84$1;geojsonArea.geometry=geometry;geojsonArea.ring=ringArea;function geometry(n){var e=0,t;switch(n.type){case"Polygon":return polygonArea(n.coordinates);case"MultiPolygon":for(t=0;t<n.coordinates.length;t++)e+=polygonArea(n.coordinates[t]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(t=0;t<n.geometries.length;t++)e+=geometry(n.geometries[t]);return e}}function polygonArea(n){var e=0;if(n&&n.length>0){e+=Math.abs(ringArea(n[0]));for(var t=1;t<n.length;t++)e-=Math.abs(ringArea(n[t]))}return e}function ringArea(n){var e,t,a,l,h,g,p=0,y=n.length;if(y>2){for(i=0;i<y;i++)i===y-2?(l=y-2,h=y-1,g=0):i===y-1?(l=y-1,h=0,g=1):(l=i,h=i+1,g=i+2),e=n[l],t=n[h],a=n[g],p+=(rad(a[0])-rad(e[0]))*Math.sin(rad(t[1]));p=p*wgs84.RADIUS*wgs84.RADIUS/2}return p}function rad(n){return n*Math.PI/180}var geometryArea=geojsonArea.geometry;function area(n){if(n.type==="FeatureCollection"){for(var e=0,t=0;e<n.features.length;e++)n.features[e].geometry&&(t+=geometryArea(n.features[e].geometry));return t}else return n.type==="Feature"?geometryArea(n.geometry):geometryArea(n)}var turfArea=area,measureDistance=turfDistance,point$5=turfHelpers.point,bearing$1=turfBearing,destination$1=turfDestination,turfAlong=function(n,e,t){var a;if(n.type==="Feature")a=n.geometry.coordinates;else if(n.type==="LineString")a=n.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var l=0,h=0;h<a.length&&!(e>=l&&h===a.length-1);h++)if(l>=e){var g=e-l;if(g){var p=bearing$1(a[h],a[h-1])-180,y=destination$1(a[h],g,p,t);return y}else return point$5(a[h])}else l+=measureDistance(a[h],a[h+1],t);return point$5(a[a.length-1])},distance$5=turfDistance,point$4=turfHelpers.point,turfLineDistance=function n(e,t){if(e.type==="FeatureCollection")return e.features.reduce(function(p,y){return p+n(y,t)},0);var a=e.type==="Feature"?e.geometry:e,l,h;if(a.type==="LineString")return length(a.coordinates,t);if(a.type==="Polygon"||a.type==="MultiLineString"){for(l=0,h=0;h<a.coordinates.length;h++)l+=length(a.coordinates[h],t);return l}else if(e.type==="MultiPolygon"){for(l=0,h=0;h<a.coordinates.length;h++)for(var g=0;g<a.coordinates[h].length;g++)l+=length(a.coordinates[h][g],t);return l}else throw new Error("input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry (or a FeatureCollection containing only those types)")};function length(n,e){for(var t=0,a=point$4(n[0]),l=point$4(n[0]),h,g=1;g<n.length;g++)l.geometry.coordinates=n[g],t+=distance$5(a,l,e),h=a,a=l,l=h;return t}var distance$4=turfDistance,point$3=turfHelpers.point,bearing=turfBearing,destination=turfDestination,turfPointOnLine=function(n,e){var t;if(n.type==="Feature")t=n.geometry.coordinates;else if(n.type==="LineString")t=n.coordinates;else throw new Error("input must be a LineString Feature or Geometry");return pointOnLine$1(e,t)};function pointOnLine$1(n,e){for(var t="miles",a=point$3([1/0,1/0],{dist:1/0}),l=0;l<e.length-1;l++){var h=point$3(e[l]),g=point$3(e[l+1]);h.properties.dist=distance$4(n,h,t),g.properties.dist=distance$4(n,g,t);var p=Math.max(h.properties.dist,g.properties.dist),y=bearing(h,g),b=destination(n,p,y+90,t),E=destination(n,p,y-90,t),C=lineIntersects(b.geometry.coordinates[0],b.geometry.coordinates[1],E.geometry.coordinates[0],E.geometry.coordinates[1],h.geometry.coordinates[0],h.geometry.coordinates[1],g.geometry.coordinates[0],g.geometry.coordinates[1]),A;C&&(A=point$3(C),A.properties.dist=distance$4(n,A,t)),h.properties.dist<a.properties.dist&&(a=h,a.properties.index=l),g.properties.dist<a.properties.dist&&(a=g,a.properties.index=l),A&&A.properties.dist<a.properties.dist&&(a=A,a.properties.index=l)}return a}function lineIntersects(n,e,t,a,l,h,g,p){var y,b,E,C,A,B={x:null,y:null,onLine1:!1,onLine2:!1};return y=(p-h)*(t-n)-(g-l)*(a-e),y===0?B.x!==null&&B.y!==null?B:!1:(b=e-h,E=n-l,C=(g-l)*b-(p-h)*E,A=(t-n)*b-(a-e)*E,b=C/y,E=A/y,B.x=n+b*(t-n),B.y=e+b*(a-e),b>0&&b<1&&(B.onLine1=!0),E>0&&E<1&&(B.onLine2=!0),B.onLine1&&B.onLine2?[B.x,B.y]:!1)}var linestring=turfHelpers.lineString,pointOnLine=turfPointOnLine,turfLineSlice=function(e,t,a){var l;if(a.type==="Feature")l=a.geometry.coordinates;else if(a.type==="LineString")l=a.coordinates;else throw new Error("input must be a LineString Feature or Geometry");var h=pointOnLine(a,e),g=pointOnLine(a,t),p;h.properties.index<=g.properties.index?p=[h,g]:p=[g,h];for(var y=linestring([p[0].geometry.coordinates],{}),b=p[0].properties.index+1;b<p[1].properties.index+1;b++)y.geometry.coordinates.push(l[b]);return y.geometry.coordinates.push(p[1].geometry.coordinates),y},point$2=turfHelpers.point,featurecollection$3=turfHelpers.featureCollection,distance$3=turfDistance,turfPointGrid=function(e,t,a){for(var l=featurecollection$3([]),h=t/distance$3(point$2([e[0],e[1]]),point$2([e[2],e[1]]),a),g=h*(e[2]-e[0]),p=t/distance$3(point$2([e[0],e[1]]),point$2([e[0],e[3]]),a),y=p*(e[3]-e[1]),b=e[0];b<=e[2];){for(var E=e[1];E<=e[3];)l.features.push(point$2([b,E])),E+=y;b+=g}return l},featurecollection$2=turfHelpers.featureCollection,point$1=turfHelpers.point,polygon$2=turfHelpers.polygon,distance$2=turfDistance,turfSquareGrid=function(e,t,a){for(var l=featurecollection$2([]),h=t/distance$2(point$1([e[0],e[1]]),point$1([e[2],e[1]]),a),g=h*(e[2]-e[0]),p=t/distance$2(point$1([e[0],e[1]]),point$1([e[0],e[3]]),a),y=p*(e[3]-e[1]),b=e[0];b<=e[2];){for(var E=e[1];E<=e[3];){var C=polygon$2([[[b,E],[b,E+y],[b+g,E+y],[b+g,E],[b,E]]]);l.features.push(C),E+=y}b+=g}return l},featurecollection$1=turfHelpers.featureCollection,polygon$1=turfHelpers.polygon,distance$1=turfDistance,turfTriangleGrid=function(n,e,t){for(var a=featurecollection$1([]),l=e/distance$1([n[0],n[1]],[n[2],n[1]],t),h=l*(n[2]-n[0]),g=e/distance$1([n[0],n[1]],[n[0],n[3]],t),p=g*(n[3]-n[1]),y=0,b=n[0];b<=n[2];){for(var E=0,C=n[1];C<=n[3];)y%2===0&&E%2===0?a.features.push(polygon$1([[[b,C],[b,C+p],[b+h,C],[b,C]]]),polygon$1([[[b,C+p],[b+h,C+p],[b+h,C],[b,C+p]]])):y%2===0&&E%2===1?a.features.push(polygon$1([[[b,C],[b+h,C+p],[b+h,C],[b,C]]]),polygon$1([[[b,C],[b,C+p],[b+h,C+p],[b,C]]])):E%2===0&&y%2===1?a.features.push(polygon$1([[[b,C],[b,C+p],[b+h,C+p],[b,C]]]),polygon$1([[[b,C],[b+h,C+p],[b+h,C],[b,C]]])):E%2===1&&y%2===1&&a.features.push(polygon$1([[[b,C],[b,C+p],[b+h,C],[b,C]]]),polygon$1([[[b,C+p],[b+h,C+p],[b+h,C],[b,C+p]]])),C+=p,E++;y++,b+=h}return a},point=turfHelpers.point,polygon=turfHelpers.polygon,distance=turfDistance,featurecollection=turfHelpers.featureCollection,cosines=[],sines=[];for(var i$2=0;i$2<6;i$2++){var angle=2*Math.PI/6*i$2;cosines.push(Math.cos(angle)),sines.push(Math.sin(angle))}var turfHexGrid=function(e,t,a,l){var h=t/distance(point([e[0],e[1]]),point([e[2],e[1]]),a),g=h*(e[2]-e[0]),p=t/distance(point([e[0],e[1]]),point([e[0],e[3]]),a),y=p*(e[3]-e[1]),b=g/2,E=b*2,C=Math.sqrt(3)/2*y,A=e[2]-e[0],B=e[3]-e[1],M=3/4*E,N=C,Z=A/(E-b/2),ee=Math.ceil(Z);Math.round(Z)===ee&&ee++;var F=(ee*M-b/2-A)/2-b/2,O=Math.ceil(B/C),k=(B-O*C)/2,H=O*C-B>C/2;H&&(k-=C/4);for(var ce=featurecollection([]),U=0;U<ee;U++)for(var te=0;te<=O;te++){var re=U%2===1;if(!(te===0&&re)&&!(te===0&&H)){var ue=U*M+e[0]-F,V=te*N+e[1]+k;re&&(V-=C/2),l?ce.features.push.apply(ce.features,hexTriangles([ue,V],g/2,y/2)):ce.features.push(hexagon([ue,V],g/2,y/2))}}return ce};function hexagon(n,e,t){for(var a=[],l=0;l<6;l++){var h=n[0]+e*cosines[l],g=n[1]+t*sines[l];a.push([h,g])}return a.push(a[0]),polygon([a])}function hexTriangles(n,e,t){for(var a=[],l=0;l<6;l++){var h=[];h.push(n),h.push([n[0]+e*cosines[l],n[1]+t*sines[l]]),h.push([n[0]+e*cosines[(l+1)%6],n[1]+t*sines[(l+1)%6]]),h.push(n),a.push(polygon([h]))}return a}turf$1.exports={isolines:turfIsolines,convex:turfConvex,within:turfWithin,concave:turfConcave,difference:turfDifference,collect:turfCollect,flip:turfFlip,simplify:turfSimplify,bezier:turfBezier,tag:turfTag,sample:turfSample,envelope:turfEnvelope,square:turfSquare,midpoint:turfMidpoint,buffer:turfBuffer,center:turfCenter,centroid:turfCentroid,combine:turfCombine,distance:turfDistance,explode:turfExplode,bbox:turfBbox,tesselate:turfTesselate,bboxPolygon:turfBboxPolygon,inside:turfInside,intersect:turfIntersect,nearest:turfNearest,planepoint:turfPlanepoint,random:turfRandom,tin:turfTin,union:turfUnion,bearing:turfBearing,destination:turfDestination,kinks:turfKinks,pointOnSurface:turfPointOnSurface,area:turfArea,along:turfAlong,lineDistance:turfLineDistance,lineSlice:turfLineSlice,pointOnLine:turfPointOnLine,pointGrid:turfPointGrid,squareGrid:turfSquareGrid,triangleGrid:turfTriangleGrid,hexGrid:turfHexGrid};var helpers=turfHelpers;turfExports.point=helpers.point;turfExports.polygon=helpers.polygon;turfExports.lineString=helpers.lineString;turfExports.multiPoint=helpers.multiPoint;turfExports.multiPolygon=helpers.multiPolygon;turfExports.multiLineString=helpers.multiLineString;turfExports.feature=helpers.feature;turfExports.featureCollection=helpers.featureCollection;turfExports.geometryCollection=helpers.geometryCollection;var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(n,e,t,a){a===void 0&&(a=t),Object.defineProperty(n,a,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,a){a===void 0&&(a=t),n[a]=e[t]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&__createBinding(e,n,t);return __setModuleDefault(e,n),e},__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(n,e,t,a){function l(h){return h instanceof t?h:new t(function(g){g(h)})}return new(t||(t=Promise))(function(h,g){function p(E){try{b(a.next(E))}catch(C){g(C)}}function y(E){try{b(a.throw(E))}catch(C){g(C)}}function b(E){E.done?h(E.value):l(E.value).then(p,y)}b((a=a.apply(n,e||[])).next())})};Object.defineProperty(CountryCoder$1,"__esModule",{value:!0});CountryCoder$1.CountryCoder=void 0;const turf=__importStar(turfExports);class CountryCoder{constructor(e,t){this._host=e,this._downloadFunction=t}GetCountryCodeAsync(e,t){return __awaiter$1(this,void 0,void 0,function*(){return this.GetCountryCodeForTile(e,t,0,0,0)})}GetCountryCodeFor(e,t,a){this.GetCountryCodeAsync(e,t).then(a)}static lon2tile(e,t){return Math.floor((e+180)/360*Math.pow(2,t))}static lat2tile(e,t){return Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,t))}static FetchJsonXhr(e){return new Promise((t,a)=>{const l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="json",l.onload=function(){var h=l.status;h===200?t(l.response):(console.error("COULD NOT GET ",e),a(e))},l.send()})}Fetch(e,t,a){return __awaiter$1(this,void 0,void 0,function*(){const l=`${e}.${t}.${a}.json`,h=this._host+"/"+l;return this._downloadFunction!==void 0?this._downloadFunction(h):CountryCoder.FetchJsonXhr(h)})}FetchCached(e,t,a){return __awaiter$1(this,void 0,void 0,function*(){const l=`${e}.${t}.${a}.json`;let h=CountryCoder.cache.get(l);if(h!==void 0)return h;const g=this.Fetch(e,t,a);return CountryCoder.cache.set(l,g),g})}GetCountryCodeForTile(e,t,a,l,h){return __awaiter$1(this,void 0,void 0,function*(){const g=yield this.FetchCached(a,l,h);if(g===void 0)throw`Got undefined for ${a}, ${l}, ${h}`;if(g.length===void 0){const A=g,B=[];for(const M of A.features)if(turf.inside(turf.point([e,t]),M)){const Z=M.properties.country;B.push(Z)}return B.sort(),B}if(g.length===1)return g;const p=CountryCoder.lon2tile(e,a+1),y=CountryCoder.lat2tile(t,a+1),b=p-l*2+2*(y-h*2),E=g[b];if(E===0)return[];const C=Number(E);return isNaN(C)?[E]:this.GetCountryCodeForTile(e,t,C,CountryCoder.lon2tile(e,C),CountryCoder.lat2tile(t,C))})}}CountryCoder$1.CountryCoder=CountryCoder;CountryCoder.cache=new Map;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CountryCoder=void 0;var e=CountryCoder$1;Object.defineProperty(n,"CountryCoder",{enumerable:!0,get:function(){return e.CountryCoder}})})(dist$1);const polygonFeatures=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}],polygon_features=Object.freeze(Object.defineProperty({__proto__:null,default:polygonFeatures},Symbol.toStringTag,{value:"Module"})),_r=class{constructor(e,t){ke(this,"type");ke(this,"id");ke(this,"tags");ke(this,"version");ke(this,"changed",!1);ke(this,"timestamp");this.id=t,this.type=e,this.tags={id:`${this.type}/${t}`}}static SetBackendUrl(e){if(!e.endsWith("/"))throw"Backend URL must end with a '/'";if(!e.startsWith("http"))throw"Backend URL must begin with http";this.backendURL=e}static DownloadObject(e,t=!1){let a;if(_r.objectCache.has(e))if(a=_r.objectCache.get(e),t)a.setData(void 0);else return a;else a=UIEventSource.FromPromise(_r.DownloadObjectAsync(e));return _r.objectCache.set(e,a),a}static async DownloadPropertiesOf(e){const t=e.split("/");if(Number(t[1])<0)return;const l=`${_r.backendURL}api/0.6/${e}`,h=await Utils.downloadJsonCachedAdvanced(l,1e3);return h.error!==void 0&&h.statuscode===410?"deleted":h.content.elements[0].tags}static async DownloadObjectAsync(e,t){const a=e.split("/"),l=a[0],h=Number(a[1]);if(h<0)return;const g=e.startsWith("node")?"":"/full",p=`${_r.backendURL}api/0.6/${e}${g}`,y=await Utils.downloadJsonCached(p,(t??10)*1e3);if(y===void 0)return;const b=_r.ParseObjects(y.elements);for(const E of b)if(E.type===l&&E.id===h)return E;throw"PANIC: requested object is not part of the response"}static DownloadReferencingWays(e){return Utils.downloadJsonCached(`${_r.backendURL}api/0.6/${e}/ways`,60*1e3).then(t=>t.elements.map(a=>{const l=new OsmWay(a.id);return l.LoadData(a),l}))}static async DownloadReferencingRelations(e){return(await Utils.downloadJsonCached(`${_r.backendURL}api/0.6/${e}/relations`,6e4)).elements.map(a=>{const l=new OsmRelation(a.id);return l.LoadData(a),l.SaveExtraData(a,void 0),l})}static DownloadHistory(e){if(_r.historyCache.has(e))return _r.historyCache.get(e);const t=e.split("/"),a=t[0],l=Number(t[1]),h=new UIEventSource([]);return _r.historyCache.set(e,h),Utils.downloadJsonCached(`${_r.backendURL}api/0.6/${a}/${l}/history`,10*60*1e3).then(g=>{const p=g.elements,y=[];for(const b of p){let E=null;switch(a){case"node":E=new OsmNode(l);break;case"way":E=new OsmWay(l);break;case"relation":E=new OsmRelation(l);break}E==null||E.LoadData(b),E==null||E.SaveExtraData(b,[]),y.push(E)}h.setData(y)}),h}static async LoadArea(e){const t=`${_r.backendURL}api/0.6/map.json?bbox=${e.minLon},${e.minLat},${e.maxLon},${e.maxLat}`,l=(await Utils.downloadJson(t)).elements;return _r.ParseObjects(l)}static ParseObjects(e){const t=[],a=new Map;for(const l of e){const h=l.type,g=l.id;let p=null;switch(h){case"node":const y=new OsmNode(g);a.set(g,y),p=y,y.SaveExtraData(l);break;case"way":p=new OsmWay(g);const b=l.nodes.map(A=>a.get(A));p.SaveExtraData(l,b);break;case"relation":p=new OsmRelation(g);const C=osmtogeojson_1({elements:e},{flatProperties:!0}).features.find(A=>A.id===p.type+"/"+p.id);p.SaveExtraData(l,C);break}p!==void 0&&_r.backendURL!==_r.defaultBackend&&(p.tags._backend=_r.backendURL),p==null||p.LoadData(l),t.push(p)}return t}static isPolygon(e){for(const t in e){if(!e.hasOwnProperty(t))continue;const a=_r.polygonFeatures.get(t);if(a===void 0)continue;if(a.values===null)return!a.blacklist;const l=a.values.has(e[t]);return a.blacklist?!l:l}return!1}static constructPolygonFeatures(){const e=new Map;for(const t of polygonFeatures??polygon_features){const a=t.key;if(t.polygon==="all"){e.set(a,{values:null,blacklist:!1});continue}const l=t.polygon==="blacklist";e.set(a,{values:new Set(t.values),blacklist:l})}return e}TagsXML(){let e="";for(const t in this.tags){if(t.startsWith("_")||t==="id")continue;const a=this.tags[t];a!==""&&a!==void 0&&(e+='        <tag k="'+Utils.EncodeXmlValue(t)+'" v="'+Utils.EncodeXmlValue(this.tags[t])+`"/>
`)}return e}VersionXML(){return this.version===void 0?"":'version="'+this.version+'"'}LoadData(e){this.tags=e.tags??this.tags,this.version=e.version,this.timestamp=e.timestamp;const t=this.tags;e.tags!==void 0&&(t["_last_edit:contributor"]=e.user,t["_last_edit:contributor:uid"]=e.uid,t["_last_edit:changeset"]=e.changeset,t["_last_edit:timestamp"]=e.timestamp,t._version_number=e.version,t.id=this.type+"/"+this.id)}};let OsmObject=_r;ke(OsmObject,"defaultBackend","https://www.openstreetmap.org/"),ke(OsmObject,"backendURL",_r.defaultBackend),ke(OsmObject,"polygonFeatures",_r.constructPolygonFeatures()),ke(OsmObject,"objectCache",new Map),ke(OsmObject,"historyCache",new Map);class OsmNode extends OsmObject{constructor(t){super("node",t);ke(this,"lat");ke(this,"lon")}ChangesetXML(t){let a=this.TagsXML();return'    <node id="'+this.id+'" changeset="'+t+'" '+this.VersionXML()+' lat="'+this.lat+'" lon="'+this.lon+`">
`+a+`    </node>
`}SaveExtraData(t){this.lat=t.lat,this.lon=t.lon}centerpoint(){return[this.lat,this.lon]}asGeoJson(){return{type:"Feature",properties:this.tags,geometry:{type:"Point",coordinates:[this.lon,this.lat]}}}}class OsmWay extends OsmObject{constructor(t){super("way",t);ke(this,"nodes",[]);ke(this,"coordinates",[]);ke(this,"lat");ke(this,"lon")}centerpoint(){return[this.lat,this.lon]}ChangesetXML(t){let a=this.TagsXML(),l="";for(const h in this.nodes)l+='      <nd ref="'+this.nodes[h]+`"/>
`;return'    <way id="'+this.id+'" changeset="'+t+'" '+this.VersionXML()+`>
`+l+a+`    </way>
`}SaveExtraData(t,a){let l=0,h=0;const g=new Map;for(const y of a)g.set(y.id,y);t.nodes===void 0&&console.error("PANIC: no nodes!");for(const y of t.nodes){const b=g.get(y);if(b===void 0){console.error("Error: node ",y,"not found in ",g);continue}this.coordinates.push(b.centerpoint()),l+=b.lat,h+=b.lon}let p=this.coordinates.length;this.lat=l/p,this.lon=h/p,this.nodes=t.nodes}asGeoJson(){let t=this.coordinates.map(([l,h])=>[h,l]),a;return this.isPolygon()?a={type:"Polygon",coordinates:[t]}:a={type:"LineString",coordinates:t},{type:"Feature",properties:this.tags,geometry:a}}isPolygon(){return this.coordinates[0][0]!==this.coordinates[this.coordinates.length-1][0]||this.coordinates[0][1]!==this.coordinates[this.coordinates.length-1][1]?!1:OsmObject.isPolygon(this.tags)}}class OsmRelation extends OsmObject{constructor(t){super("relation",t);ke(this,"members");ke(this,"geojson")}centerpoint(){return[0,0]}ChangesetXML(t){let a="";for(const g of this.members)a+='      <member type="'+g.type+'" ref="'+g.ref+'" role="'+g.role+`"/>
`;let l=this.TagsXML(),h="";return t!==void 0&&(h=`changeset="${t}"`),`    <relation id="${this.id}" ${h} ${this.VersionXML()}>
${a}${l}        </relation>
`}SaveExtraData(t,a){this.members=t.members,this.geojson=a}asGeoJson(){if(this.geojson!==void 0)return this.geojson;throw"Not Implemented"}}class SimpleMetaTagger{constructor(e,t){ke(this,"keys");ke(this,"doc");ke(this,"isLazy");ke(this,"includesDates");ke(this,"applyMetaTagsOnFeature");if(this.keys=e.keys,this.doc=e.doc,this.isLazy=e.isLazy,this.applyMetaTagsOnFeature=t,this.includesDates=e.includesDates??!1,!e.cleanupRetagger){for(const a of e.keys)if(!a.startsWith("_")&&a.toLowerCase().indexOf("theme")<0)throw`Incorrect key for a calculated meta value '${a}': it should start with underscore (_)`}}}const as=class extends SimpleMetaTagger{constructor(){const t=new Set;super({keys:["_country"],doc:"The country code of the property (with latlon2country)",includesDates:!1},(a,l,h,g)=>{let p=GeoOperations.centerpoint(a);const y=p.geometry.coordinates[1],b=p.geometry.coordinates[0];return t.add(a),as.coder.GetCountryCodeAsync(b,y).then(E=>{var C;t.delete(a);try{const A=a.properties._country;if(a.properties._country=E[0].trim().toLowerCase(),A!==a.properties._country){const B=(C=g==null?void 0:g.allElements)==null?void 0:C.getEventSourceById(a.properties.id);B==null||B.ping()}}catch(A){console.warn(A)}}).catch(E=>{t.delete(a)}),!1});ke(this,"runningTasks");this.runningTasks=t}};let CountryTagger=as;ke(CountryTagger,"coder",new dist$1.CountryCoder(Constants.countryCoderEndpoint,Utils.downloadJson));const Mr=class{static removeBothTagging(e){let t=!1;function a(h,g){(e[h]===void 0||e[h]==="")&&(e[h]=g,t=!0)}if(e.sidewalk){const h=e.sidewalk;switch(h){case"none":case"no":a("sidewalk:left","no"),a("sidewalk:right","no");break;case"both":a("sidewalk:left","yes"),a("sidewalk:right","yes");break;case"left":a("sidewalk:left","yes"),a("sidewalk:right","no");break;case"right":a("sidewalk:left","no"),a("sidewalk:right","yes");break;default:a("sidewalk:left",h),a("sidewalk:right",h);break}delete e.sidewalk,t=!0}const l=/\([^:]*\):both:\(.*\)/;for(const h in e){const g=e[h];if(h.endsWith(":both")){const y=h.substring(0,h.length-5);a(y+":left",g),a(y+":right",g),delete e[h];continue}const p=h.match(l);if(p!==null){const y=p[1],b=p[1];a(y+":left:"+b,g),a(y+":right:"+b,g),console.log("Left-right rewritten "+h),delete e[h]}}return t}static HelpText(){const e=[new Combine(["Metatags are extra tags available, in order to display more data or to give better questions.","They are calculated automatically on every feature when the data arrives in the webbrowser. This document gives an overview of the available metatags.","**Hint:** when using metatags, add the [query parameter](URL_Parameters.md) `debug=true` to the URL. This will include a box in the popup for features which shows all the properties of the object"]).SetClass("flex-col")];e.push(new Title("Metatags calculated by MapComplete",2)),e.push(new FixedUiElement("The following values are always calculated, by default, by MapComplete and are available automatically on all elements in every theme"));for(const t of Mr.metatags)e.push(new Title(t.keys.join(", "),3),t.doc,t.isLazy?"This is a lazy metatag and is only calculated when needed":"");return new Combine(e).SetClass("flex-col")}};let SimpleMetaTaggers=Mr;ke(SimpleMetaTaggers,"objectMetaInfo",new SimpleMetaTagger({keys:["_last_edit:contributor","_last_edit:contributor:uid","_last_edit:changeset","_last_edit:timestamp","_version_number","_backend"],doc:"Information about the last edit of this object."},e=>{const t=e.properties;let a=!1;function l(h,g){t[h]!==void 0&&(t[g]=t[h],delete t[h],a=!0)}return l("user","_last_edit:contributor"),l("uid","_last_edit:contributor:uid"),l("changeset","_last_edit:changeset"),l("timestamp","_last_edit:timestamp"),l("version","_version_number"),a})),ke(SimpleMetaTaggers,"country",new CountryTagger),ke(SimpleMetaTaggers,"geometryType",new SimpleMetaTagger({keys:["_geometry:type"],doc:"Adds the geometry type as property. This is identical to the GoeJson geometry type and is one of `Point`,`LineString`, `Polygon` and exceptionally `MultiPolygon` or `MultiLineString`"},(e,t)=>{const a=e.properties["_geometry:type"]===e.geometry.type;return e.properties["_geometry:type"]=e.geometry.type,a})),ke(SimpleMetaTaggers,"cardinalDirections",{N:0,NNE:22.5,NE:45,ENE:67.5,E:90,ESE:112.5,SE:135,SSE:157.5,S:180,SSW:202.5,SW:225,WSW:247.5,W:270,WNW:292.5,NW:315,NNW:337.5}),ke(SimpleMetaTaggers,"latlon",new SimpleMetaTagger({keys:["_lat","_lon"],doc:"The latitude and longitude of the point (or centerpoint in the case of a way/area)"},e=>{const t=GeoOperations.centerpoint(e),a=t.geometry.coordinates[1],l=t.geometry.coordinates[0];return e.properties._lat=""+a,e.properties._lon=""+l,e._lon=l,e._lat=a,!0})),ke(SimpleMetaTaggers,"layerInfo",new SimpleMetaTagger({doc:"The layer-id to which this feature belongs. Note that this might be return any applicable if `passAllFeatures` is defined.",keys:["_layer"],includesDates:!1},(e,t,a)=>e.properties._layer===a.id?!1:(e.properties._layer=a.id,!0))),ke(SimpleMetaTaggers,"noBothButLeftRight",new SimpleMetaTagger({keys:["sidewalk:left","sidewalk:right","generic_key:left:property","generic_key:right:property"],doc:"Rewrites tags from 'generic_key:both:property' as 'generic_key:left:property' and 'generic_key:right:property' (and similar for sidewalk tagging). Note that this rewritten tags _will be reuploaded on a change_. To prevent to much unrelated retagging, this is only enabled if the layer has at least some lineRenderings with offset defined",includesDates:!1,cleanupRetagger:!0},(e,t,a)=>{if(a.lineRendering.some(l=>l.leftRightSensitive))return Mr.removeBothTagging(e.properties)})),ke(SimpleMetaTaggers,"surfaceArea",new SimpleMetaTagger({keys:["_surface","_surface:ha"],doc:"The surface area of the feature, in square meters and in hectare. Not set on points and ways",isLazy:!0},e=>(Object.defineProperty(e.properties,"_surface",{enumerable:!1,configurable:!0,get:()=>{const t=""+GeoOperations.surfaceAreaInSqMeters(e);return delete e.properties._surface,e.properties._surface=t,t}}),Object.defineProperty(e.properties,"_surface:ha",{enumerable:!1,configurable:!0,get:()=>{const t=GeoOperations.surfaceAreaInSqMeters(e),a=""+Math.floor(t/1e3)/10;return delete e.properties["_surface:ha"],e.properties["_surface:ha"]=a,a}}),!0))),ke(SimpleMetaTaggers,"levels",new SimpleMetaTagger({doc:"Extract the 'level'-tag into a normalized, ';'-separated value",keys:["_level"]},e=>{if(e.properties.level===void 0)return!1;const t=e.properties.level,a=TagUtils.LevelsParser(t).join(";");return t===a?!1:(e.properties.level=a,!0)})),ke(SimpleMetaTaggers,"canonicalize",new SimpleMetaTagger({doc:"If 'units' is defined in the layoutConfig, then this metatagger will rewrite the specified keys to have the canonical form (e.g. `1meter` will be rewritten to `1m`; `1` will be rewritten to `1m` as well)",keys:["Theme-defined keys"]},(e,t,a,l)=>{var p,y;const h=Utils.NoNull([].concat(...((y=(p=l==null?void 0:l.layoutToUse)==null?void 0:p.layers)==null?void 0:y.map(b=>b.units))??[]));if(h.length==0)return;let g=!1;for(const b in e.properties)if(e.properties.hasOwnProperty(b))for(const E of h){if(E===void 0)continue;if(E.appliesToKeys===void 0){console.error("The unit ",E,"has no appliesToKey defined");continue}if(!E.appliesToKeys.has(b))continue;const C=e.properties[b],A=E.findDenomination(C,()=>e.properties._country);if(A===void 0)break;const[,B]=A,M=E.getDefaultDenomination(()=>e.properties._country);let N=(B==null?void 0:B.canonicalValue(C,M==B))??void 0;if(N===C||(console.log("Rewritten ",b,` from '${C}' into '${N}'`),N===void 0&&!E.eraseInvalid))break;e.properties[b]=N,g=!0;break}return g})),ke(SimpleMetaTaggers,"lngth",new SimpleMetaTagger({keys:["_length","_length:km"],doc:"The total length of a feature in meters (and in kilometers, rounded to one decimal for '_length:km'). For a surface, the length of the perimeter"},e=>{const t=GeoOperations.lengthInMeters(e);e.properties._length=""+t;const a=Math.floor(t/1e3),l=Math.round((t-a*1e3)/100);return e.properties["_length:km"]=""+a+"."+l,!0})),ke(SimpleMetaTaggers,"isOpen",new SimpleMetaTagger({keys:["_isOpen"],doc:"If 'opening_hours' is present, it will add the current state of the feature (being 'yes' or 'no')",includesDates:!0,isLazy:!0},(e,t,a,l)=>{if(Utils.runningFromConsole)return!1;if(e.properties.opening_hours==="24/7")return e.properties._isOpen="yes",!0;Object.defineProperty(e.properties,"_isOpen",{enumerable:!1,configurable:!0,get:()=>{const h=e.properties;if(h.opening_hours!==void 0&&h._country!==void 0)try{const[g,p]=GeoOperations.centerpointCoordinates(e);return new opening_hoursExports(h.opening_hours,{lat:p,lon:g,address:{country_code:h._country.toLowerCase(),state:void 0}},{tag_key:"opening_hours"}).getState()?"yes":"no"}catch(g){console.warn("Error while parsing opening hours of ",h.id,g),delete h._isOpen,h._isOpen="parse_error"}}}),l.allElements.getEventSourceById(e.properties.id)})),ke(SimpleMetaTaggers,"directionSimplified",new SimpleMetaTagger({keys:["_direction:numerical","_direction:leftright"],doc:"_direction:numerical is a normalized, numerical direction based on 'camera:direction' or on 'direction'; it is only present if a valid direction is found (e.g. 38.5 or NE). _direction:leftright is either 'left' or 'right', which is left-looking on the map or 'right-looking' on the map"},e=>{const t=e.properties,a=t["camera:direction"]??t.direction;if(a===void 0)return!1;const l=Mr.cardinalDirections[a]??Number(a);if(isNaN(l))return!1;const h=(l%360+360)%360;return t["_direction:numerical"]=h,t["_direction:leftright"]=h<=180?"right":"left",!0})),ke(SimpleMetaTaggers,"directionCenterpoint",new SimpleMetaTagger({keys:["_direction:centerpoint"],isLazy:!0,doc:"_direction:centerpoint is the direction of the linestring (in degrees) if one were standing at the projected centerpoint."},e=>{if(e.geometry.type!=="LineString")return!1;const t=e;return Object.defineProperty(e.properties,"_direction:centerpoint",{enumerable:!1,configurable:!0,get:()=>{const a=GeoOperations.centerpoint(e),l=GeoOperations.nearestPoint(t,a.geometry.coordinates),h=t.geometry.coordinates[l.properties.index+1],g=GeoOperations.bearing(l.geometry.coordinates,h);return delete e.properties["_direction:centerpoint"],e.properties["_direction:centerpoint"]=g,g}}),!0})),ke(SimpleMetaTaggers,"currentTime",new SimpleMetaTagger({keys:["_now:date","_now:datetime","_loaded:date","_loaded:_datetime"],doc:"Adds the time that the data got loaded - pretty much the time of downloading from overpass. The format is YYYY-MM-DD hh:mm, aka 'sortable' aka ISO-8601-but-not-entirely",includesDates:!0},(e,t)=>{const a=new Date;typeof t=="string"&&(t=new Date(t));function l(g){return g.toISOString().slice(0,10)}function h(g){return g.toISOString().slice(0,-5).replace("T"," ")}return e.properties["_now:date"]=l(a),e.properties["_now:datetime"]=h(a),e.properties["_loaded:date"]=l(t),e.properties["_loaded:datetime"]=h(t),!0})),ke(SimpleMetaTaggers,"referencingWays",new SimpleMetaTagger({keys:["_referencing_ways"],isLazy:!0,doc:"_referencing_ways contains - for a node - which ways use this this node as point in their geometry. "},(e,t,a,l)=>{const h=e.properties.id;return h.startsWith("node/")?(OsmObject.DownloadReferencingWays(h).then(g=>{var E;const p=((E=l.allElements)==null?void 0:E.getEventSourceById(h))??[],y=g.map(C=>"way/"+C.id);y.sort();const b=y.join(";");b!==""&&p.data._referencing_ways!==b&&(p.data._referencing_ways=b,p.ping())}),!0):!1})),ke(SimpleMetaTaggers,"metatags",[Mr.latlon,Mr.layerInfo,Mr.surfaceArea,Mr.lngth,Mr.canonicalize,Mr.country,Mr.isOpen,Mr.directionSimplified,Mr.directionCenterpoint,Mr.currentTime,Mr.objectMetaInfo,Mr.noBothButLeftRight,Mr.geometryType,Mr.levels,Mr.referencingWays]),ke(SimpleMetaTaggers,"lazyTags",[].concat(...Mr.metatags.filter(e=>e.isLazy).map(e=>e.keys)));class ChangeDescriptionTools{static rewriteIds(e,t){const a=e.type+"/"+e.id,l=((e.changes??{}).nodes??[]).some(p=>t.has("node/"+p)),h=((e.changes??{}).members??[]).some(p=>t.has(p.type+"/"+p.ref));if((t.has(a)||l||h)&&(e={...e}),t.has(a)){const[p,y]=t.get(a).split("/");e.id=Number.parseInt(y)}return l&&(e.changes={...e.changes},e.changes.nodes=e.changes.nodes.map(p=>{const y="node/"+p;if(!t.has(y))return p;const[b,E]=t.get(y).split("/");return Number.parseInt(E)})),h&&(e.changes={...e.changes},e.changes.members=e.changes.members.map(p=>{const y=p.type+"/"+p.ref;if(!t.has(y))return p;const[b,E]=t.get(y).split("/");return{...p,ref:Number.parseInt(E)}})),e}static getGeojsonGeometry(e){switch(e.type){case"node":const t=new OsmNode(e.id);return t.lat=e.changes.lat,t.lon=e.changes.lon,t.asGeoJson().geometry;case"way":const a=new OsmWay(e.id);return a.nodes=e.changes.nodes,a.coordinates=e.changes.coordinates.map(([h,g])=>[g,h]),a.asGeoJson().geometry;case"relation":const l=new OsmRelation(e.id);return l.members=e.changes.members,l.asGeoJson().geometry}}}var hashesExports={},hashes$1={get exports(){return hashesExports},set exports(n){hashesExports=n}};(function(n,e){(function(){var t;function a(M){var N,Z,ee="",F=-1,O;if(M&&M.length)for(O=M.length;(F+=1)<O;)N=M.charCodeAt(F),Z=F+1<O?M.charCodeAt(F+1):0,55296<=N&&N<=56319&&56320<=Z&&Z<=57343&&(N=65536+((N&1023)<<10)+(Z&1023),F+=1),N<=127?ee+=String.fromCharCode(N):N<=2047?ee+=String.fromCharCode(192|N>>>6&31,128|N&63):N<=65535?ee+=String.fromCharCode(224|N>>>12&15,128|N>>>6&63,128|N&63):N<=2097151&&(ee+=String.fromCharCode(240|N>>>18&7,128|N>>>12&63,128|N>>>6&63,128|N&63));return ee}function l(M){var N,Z,ee,F,O,k=[],H;if(N=Z=ee=F=O=0,M&&M.length)for(H=M.length,M+="";N<H;)ee=M.charCodeAt(N),Z+=1,ee<128?(k[Z]=String.fromCharCode(ee),N+=1):ee>191&&ee<224?(F=M.charCodeAt(N+1),k[Z]=String.fromCharCode((ee&31)<<6|F&63),N+=2):(F=M.charCodeAt(N+1),O=M.charCodeAt(N+2),k[Z]=String.fromCharCode((ee&15)<<12|(F&63)<<6|O&63),N+=3);return k.join("")}function h(M,N){var Z=(M&65535)+(N&65535),ee=(M>>16)+(N>>16)+(Z>>16);return ee<<16|Z&65535}function g(M,N){return M<<N|M>>>32-N}function p(M,N){for(var Z=N?"0123456789ABCDEF":"0123456789abcdef",ee="",F,O=0,k=M.length;O<k;O+=1)F=M.charCodeAt(O),ee+=Z.charAt(F>>>4&15)+Z.charAt(F&15);return ee}function y(M){var N,Z=M.length*32,ee="";for(N=0;N<Z;N+=8)ee+=String.fromCharCode(M[N>>5]>>>24-N%32&255);return ee}function b(M){var N,Z=M.length*32,ee="";for(N=0;N<Z;N+=8)ee+=String.fromCharCode(M[N>>5]>>>N%32&255);return ee}function E(M){var N,Z=M.length*8,ee=Array(M.length>>2),F=ee.length;for(N=0;N<F;N+=1)ee[N]=0;for(N=0;N<Z;N+=8)ee[N>>5]|=(M.charCodeAt(N/8)&255)<<N%32;return ee}function C(M){var N,Z=M.length*8,ee=Array(M.length>>2),F=ee.length;for(N=0;N<F;N+=1)ee[N]=0;for(N=0;N<Z;N+=8)ee[N>>5]|=(M.charCodeAt(N/8)&255)<<24-N%32;return ee}function A(M,N){var Z=N.length,ee=Array(),F,O,k,H,ce,U,te,re;for(U=Array(Math.ceil(M.length/2)),H=U.length,F=0;F<H;F+=1)U[F]=M.charCodeAt(F*2)<<8|M.charCodeAt(F*2+1);for(;U.length>0;){for(ce=Array(),k=0,F=0;F<U.length;F+=1)k=(k<<16)+U[F],O=Math.floor(k/Z),k-=O*Z,(ce.length>0||O>0)&&(ce[ce.length]=O);ee[ee.length]=k,U=ce}for(te="",F=ee.length-1;F>=0;F--)te+=N.charAt(ee[F]);for(re=Math.ceil(M.length*8/(Math.log(N.length)/Math.log(2))),F=te.length;F<re;F+=1)te=N[0]+te;return te}function B(M,N){var Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ee="",F=M.length,O,k,H;for(N=N||"=",O=0;O<F;O+=3)for(H=M.charCodeAt(O)<<16|(O+1<F?M.charCodeAt(O+1)<<8:0)|(O+2<F?M.charCodeAt(O+2):0),k=0;k<4;k+=1)O*8+k*6>M.length*8?ee+=N:ee+=Z.charAt(H>>>6*(3-k)&63);return ee}t={VERSION:"1.0.6",Base64:function(){var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N="=",Z=!0;this.encode=function(ee){var F,O,k,H="",ce=ee.length;for(N=N||"=",ee=Z?a(ee):ee,F=0;F<ce;F+=3)for(k=ee.charCodeAt(F)<<16|(F+1<ce?ee.charCodeAt(F+1)<<8:0)|(F+2<ce?ee.charCodeAt(F+2):0),O=0;O<4;O+=1)F*8+O*6>ce*8?H+=N:H+=M.charAt(k>>>6*(3-O)&63);return H},this.decode=function(ee){var F,O,k,H,ce,U,te,re,ue,V,S="",T=[];if(!ee)return ee;F=V=0,ee=ee.replace(new RegExp("\\"+N,"gi"),"");do ce=M.indexOf(ee.charAt(F+=1)),U=M.indexOf(ee.charAt(F+=1)),te=M.indexOf(ee.charAt(F+=1)),re=M.indexOf(ee.charAt(F+=1)),ue=ce<<18|U<<12|te<<6|re,O=ue>>16&255,k=ue>>8&255,H=ue&255,V+=1,te===64?T[V]=String.fromCharCode(O):re===64?T[V]=String.fromCharCode(O,k):T[V]=String.fromCharCode(O,k,H);while(F<ee.length);return S=T.join(""),S=Z?l(S):S,S},this.setPad=function(ee){return N=ee||N,this},this.setTab=function(ee){return M=ee||M,this},this.setUTF8=function(ee){return typeof ee=="boolean"&&(Z=ee),this}},CRC32:function(M){var N=0,Z=0,ee=0,F,O,k;for(M=a(M),F=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),N=N^-1,O=0,k=M.length;O<k;O+=1)ee=(N^M.charCodeAt(O))&255,Z="0x"+F.substr(ee*9,8),N=N>>>8^Z;return(N^-1)>>>0},MD5:function(M){var N=M&&typeof M.uppercase=="boolean"?M.uppercase:!1,Z=M&&typeof M.pad=="string"?M.pad:"=",ee=M&&typeof M.utf8=="boolean"?M.utf8:!0;this.hex=function(ue){return p(F(ue),N)},this.b64=function(ue){return B(F(ue),Z)},this.any=function(ue,V){return A(F(ue),V)},this.raw=function(ue){return F(ue)},this.hex_hmac=function(ue,V){return p(O(ue,V),N)},this.b64_hmac=function(ue,V){return B(O(ue,V),Z)},this.any_hmac=function(ue,V,S){return A(O(ue,V),S)},this.vm_test=function(){return hex("abc").toLowerCase()==="900150983cd24fb0d6963f7d28e17f72"},this.setUpperCase=function(ue){return typeof ue=="boolean"&&(N=ue),this},this.setPad=function(ue){return Z=ue||Z,this},this.setUTF8=function(ue){return typeof ue=="boolean"&&(ee=ue),this};function F(ue){return ue=ee?a(ue):ue,b(k(E(ue),ue.length*8))}function O(ue,V){var S,T,G,Q,le;for(ue=ee?a(ue):ue,V=ee?a(V):V,S=E(ue),S.length>16&&(S=k(S,ue.length*8)),T=Array(16),G=Array(16),le=0;le<16;le+=1)T[le]=S[le]^909522486,G[le]=S[le]^1549556828;return Q=k(T.concat(E(V)),512+V.length*8),b(k(G.concat(Q),512+128))}function k(ue,V){var S,T,G,Q,le,fe=1732584193,q=-271733879,se=-1732584194,D=271733878;for(ue[V>>5]|=128<<V%32,ue[(V+64>>>9<<4)+14]=V,S=0;S<ue.length;S+=16)T=fe,G=q,Q=se,le=D,fe=ce(fe,q,se,D,ue[S+0],7,-680876936),D=ce(D,fe,q,se,ue[S+1],12,-389564586),se=ce(se,D,fe,q,ue[S+2],17,606105819),q=ce(q,se,D,fe,ue[S+3],22,-1044525330),fe=ce(fe,q,se,D,ue[S+4],7,-176418897),D=ce(D,fe,q,se,ue[S+5],12,1200080426),se=ce(se,D,fe,q,ue[S+6],17,-1473231341),q=ce(q,se,D,fe,ue[S+7],22,-45705983),fe=ce(fe,q,se,D,ue[S+8],7,1770035416),D=ce(D,fe,q,se,ue[S+9],12,-1958414417),se=ce(se,D,fe,q,ue[S+10],17,-42063),q=ce(q,se,D,fe,ue[S+11],22,-1990404162),fe=ce(fe,q,se,D,ue[S+12],7,1804603682),D=ce(D,fe,q,se,ue[S+13],12,-40341101),se=ce(se,D,fe,q,ue[S+14],17,-1502002290),q=ce(q,se,D,fe,ue[S+15],22,1236535329),fe=U(fe,q,se,D,ue[S+1],5,-165796510),D=U(D,fe,q,se,ue[S+6],9,-1069501632),se=U(se,D,fe,q,ue[S+11],14,643717713),q=U(q,se,D,fe,ue[S+0],20,-373897302),fe=U(fe,q,se,D,ue[S+5],5,-701558691),D=U(D,fe,q,se,ue[S+10],9,38016083),se=U(se,D,fe,q,ue[S+15],14,-660478335),q=U(q,se,D,fe,ue[S+4],20,-405537848),fe=U(fe,q,se,D,ue[S+9],5,568446438),D=U(D,fe,q,se,ue[S+14],9,-1019803690),se=U(se,D,fe,q,ue[S+3],14,-187363961),q=U(q,se,D,fe,ue[S+8],20,1163531501),fe=U(fe,q,se,D,ue[S+13],5,-1444681467),D=U(D,fe,q,se,ue[S+2],9,-51403784),se=U(se,D,fe,q,ue[S+7],14,1735328473),q=U(q,se,D,fe,ue[S+12],20,-1926607734),fe=te(fe,q,se,D,ue[S+5],4,-378558),D=te(D,fe,q,se,ue[S+8],11,-2022574463),se=te(se,D,fe,q,ue[S+11],16,1839030562),q=te(q,se,D,fe,ue[S+14],23,-35309556),fe=te(fe,q,se,D,ue[S+1],4,-1530992060),D=te(D,fe,q,se,ue[S+4],11,1272893353),se=te(se,D,fe,q,ue[S+7],16,-155497632),q=te(q,se,D,fe,ue[S+10],23,-1094730640),fe=te(fe,q,se,D,ue[S+13],4,681279174),D=te(D,fe,q,se,ue[S+0],11,-358537222),se=te(se,D,fe,q,ue[S+3],16,-722521979),q=te(q,se,D,fe,ue[S+6],23,76029189),fe=te(fe,q,se,D,ue[S+9],4,-640364487),D=te(D,fe,q,se,ue[S+12],11,-421815835),se=te(se,D,fe,q,ue[S+15],16,530742520),q=te(q,se,D,fe,ue[S+2],23,-995338651),fe=re(fe,q,se,D,ue[S+0],6,-198630844),D=re(D,fe,q,se,ue[S+7],10,1126891415),se=re(se,D,fe,q,ue[S+14],15,-1416354905),q=re(q,se,D,fe,ue[S+5],21,-57434055),fe=re(fe,q,se,D,ue[S+12],6,1700485571),D=re(D,fe,q,se,ue[S+3],10,-1894986606),se=re(se,D,fe,q,ue[S+10],15,-1051523),q=re(q,se,D,fe,ue[S+1],21,-2054922799),fe=re(fe,q,se,D,ue[S+8],6,1873313359),D=re(D,fe,q,se,ue[S+15],10,-30611744),se=re(se,D,fe,q,ue[S+6],15,-1560198380),q=re(q,se,D,fe,ue[S+13],21,1309151649),fe=re(fe,q,se,D,ue[S+4],6,-145523070),D=re(D,fe,q,se,ue[S+11],10,-1120210379),se=re(se,D,fe,q,ue[S+2],15,718787259),q=re(q,se,D,fe,ue[S+9],21,-343485551),fe=h(fe,T),q=h(q,G),se=h(se,Q),D=h(D,le);return Array(fe,q,se,D)}function H(ue,V,S,T,G,Q){return h(g(h(h(V,ue),h(T,Q)),G),S)}function ce(ue,V,S,T,G,Q,le){return H(V&S|~V&T,ue,V,G,Q,le)}function U(ue,V,S,T,G,Q,le){return H(V&T|S&~T,ue,V,G,Q,le)}function te(ue,V,S,T,G,Q,le){return H(V^S^T,ue,V,G,Q,le)}function re(ue,V,S,T,G,Q,le){return H(S^(V|~T),ue,V,G,Q,le)}},SHA1:function(M){var N=M&&typeof M.uppercase=="boolean"?M.uppercase:!1,Z=M&&typeof M.pad=="string"?M.pad:"=",ee=M&&typeof M.utf8=="boolean"?M.utf8:!0;this.hex=function(U){return p(F(U),N)},this.b64=function(U){return B(F(U),Z)},this.any=function(U,te){return A(F(U),te)},this.raw=function(U){return F(U)},this.hex_hmac=function(U,te){return p(O(U,te))},this.b64_hmac=function(U,te){return B(O(U,te),Z)},this.any_hmac=function(U,te,re){return A(O(U,te),re)},this.vm_test=function(){return hex("abc").toLowerCase()==="900150983cd24fb0d6963f7d28e17f72"},this.setUpperCase=function(U){return typeof U=="boolean"&&(N=U),this},this.setPad=function(U){return Z=U||Z,this},this.setUTF8=function(U){return typeof U=="boolean"&&(ee=U),this};function F(U){return U=ee?a(U):U,y(k(C(U),U.length*8))}function O(U,te){var re,ue,V,S,T;for(U=ee?a(U):U,te=ee?a(te):te,re=C(U),re.length>16&&(re=k(re,U.length*8)),ue=Array(16),V=Array(16),S=0;S<16;S+=1)ue[S]=re[S]^909522486,V[S]=re[S]^1549556828;return T=k(ue.concat(C(te)),512+te.length*8),y(k(V.concat(T),512+160))}function k(U,te){var re,ue,V,S,T,G,Q,le,fe=Array(80),q=1732584193,se=-271733879,D=-1732584194,oe=271733878,Pe=-1009589776;for(U[te>>5]|=128<<24-te%32,U[(te+64>>9<<4)+15]=te,re=0;re<U.length;re+=16){for(S=q,T=se,G=D,Q=oe,le=Pe,ue=0;ue<80;ue+=1)ue<16?fe[ue]=U[re+ue]:fe[ue]=g(fe[ue-3]^fe[ue-8]^fe[ue-14]^fe[ue-16],1),V=h(h(g(q,5),H(ue,se,D,oe)),h(h(Pe,fe[ue]),ce(ue))),Pe=oe,oe=D,D=g(se,30),se=q,q=V;q=h(q,S),se=h(se,T),D=h(D,G),oe=h(oe,Q),Pe=h(Pe,le)}return Array(q,se,D,oe,Pe)}function H(U,te,re,ue){return U<20?te&re|~te&ue:U<40?te^re^ue:U<60?te&re|te&ue|re&ue:te^re^ue}function ce(U){return U<20?1518500249:U<40?1859775393:U<60?-1894007588:-899497514}},SHA256:function(M){M&&typeof M.uppercase=="boolean"&&M.uppercase;var N=M&&typeof M.pad=="string"?M.pad:"=",Z=M&&typeof M.utf8=="boolean"?M.utf8:!0,ee;this.hex=function(T){return p(F(T,Z))},this.b64=function(T){return B(F(T,Z),N)},this.any=function(T,G){return A(F(T,Z),G)},this.raw=function(T){return F(T,Z)},this.hex_hmac=function(T,G){return p(O(T,G))},this.b64_hmac=function(T,G){return B(O(T,G),N)},this.any_hmac=function(T,G,Q){return A(O(T,G),Q)},this.vm_test=function(){return hex("abc").toLowerCase()==="900150983cd24fb0d6963f7d28e17f72"},this.setUpperCase=function(T){return this},this.setPad=function(T){return N=T||N,this},this.setUTF8=function(T){return typeof T=="boolean"&&(Z=T),this};function F(T,G){return T=G?a(T):T,y(S(C(T),T.length*8))}function O(T,G){T=Z?a(T):T,G=Z?a(G):G;var Q,le=0,fe=C(T),q=Array(16),se=Array(16);for(fe.length>16&&(fe=S(fe,T.length*8));le<16;le+=1)q[le]=fe[le]^909522486,se[le]=fe[le]^1549556828;return Q=S(q.concat(C(G)),512+G.length*8),y(S(se.concat(Q),512+256))}function k(T,G){return T>>>G|T<<32-G}function H(T,G){return T>>>G}function ce(T,G,Q){return T&G^~T&Q}function U(T,G,Q){return T&G^T&Q^G&Q}function te(T){return k(T,2)^k(T,13)^k(T,22)}function re(T){return k(T,6)^k(T,11)^k(T,25)}function ue(T){return k(T,7)^k(T,18)^H(T,3)}function V(T){return k(T,17)^k(T,19)^H(T,10)}ee=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];function S(T,G){var Q=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],le=new Array(64),fe,q,se,D,oe,Pe,Re,Oe,Ne,Ue,Ze,bt;for(T[G>>5]|=128<<24-G%32,T[(G+64>>9<<4)+15]=G,Ne=0;Ne<T.length;Ne+=16){for(fe=Q[0],q=Q[1],se=Q[2],D=Q[3],oe=Q[4],Pe=Q[5],Re=Q[6],Oe=Q[7],Ue=0;Ue<64;Ue+=1)Ue<16?le[Ue]=T[Ue+Ne]:le[Ue]=h(h(h(V(le[Ue-2]),le[Ue-7]),ue(le[Ue-15])),le[Ue-16]),Ze=h(h(h(h(Oe,re(oe)),ce(oe,Pe,Re)),ee[Ue]),le[Ue]),bt=h(te(fe),U(fe,q,se)),Oe=Re,Re=Pe,Pe=oe,oe=h(D,Ze),D=se,se=q,q=fe,fe=h(Ze,bt);Q[0]=h(fe,Q[0]),Q[1]=h(q,Q[1]),Q[2]=h(se,Q[2]),Q[3]=h(D,Q[3]),Q[4]=h(oe,Q[4]),Q[5]=h(Pe,Q[5]),Q[6]=h(Re,Q[6]),Q[7]=h(Oe,Q[7])}return Q}},SHA512:function(M){M&&typeof M.uppercase=="boolean"&&M.uppercase;var N=M&&typeof M.pad=="string"?M.pad:"=",Z=M&&typeof M.utf8=="boolean"?M.utf8:!0,ee;this.hex=function(T){return p(F(T))},this.b64=function(T){return B(F(T),N)},this.any=function(T,G){return A(F(T),G)},this.raw=function(T){return F(T)},this.hex_hmac=function(T,G){return p(O(T,G))},this.b64_hmac=function(T,G){return B(O(T,G),N)},this.any_hmac=function(T,G,Q){return A(O(T,G),Q)},this.vm_test=function(){return hex("abc").toLowerCase()==="900150983cd24fb0d6963f7d28e17f72"},this.setUpperCase=function(T){return this},this.setPad=function(T){return N=T||N,this},this.setUTF8=function(T){return typeof T=="boolean"&&(Z=T),this};function F(T){return T=Z?a(T):T,y(k(C(T),T.length*8))}function O(T,G){T=Z?a(T):T,G=Z?a(G):G;var Q,le=0,fe=C(T),q=Array(32),se=Array(32);for(fe.length>32&&(fe=k(fe,T.length*8));le<32;le+=1)q[le]=fe[le]^909522486,se[le]=fe[le]^1549556828;return Q=k(q.concat(C(G)),1024+G.length*8),y(k(se.concat(Q),1024+512))}function k(T,G){var Q,le,fe,q=new Array(80),se=new Array(16),D=[new H(1779033703,-205731576),new H(-1150833019,-2067093701),new H(1013904242,-23791573),new H(-1521486534,1595750129),new H(1359893119,-1377402159),new H(-1694144372,725511199),new H(528734635,-79577749),new H(1541459225,327033209)],oe=new H(0,0),Pe=new H(0,0),Re=new H(0,0),Oe=new H(0,0),Ne=new H(0,0),Ue=new H(0,0),Ze=new H(0,0),bt=new H(0,0),it=new H(0,0),ut=new H(0,0),ft=new H(0,0),He=new H(0,0),Mt=new H(0,0),wn=new H(0,0),Ct=new H(0,0),_e=new H(0,0),Y=new H(0,0);for(ee===void 0&&(ee=[new H(1116352408,-685199838),new H(1899447441,602891725),new H(-1245643825,-330482897),new H(-373957723,-2121671748),new H(961987163,-213338824),new H(1508970993,-1241133031),new H(-1841331548,-1357295717),new H(-1424204075,-630357736),new H(-670586216,-1560083902),new H(310598401,1164996542),new H(607225278,1323610764),new H(1426881987,-704662302),new H(1925078388,-226784913),new H(-2132889090,991336113),new H(-1680079193,633803317),new H(-1046744716,-815192428),new H(-459576895,-1628353838),new H(-272742522,944711139),new H(264347078,-1953704523),new H(604807628,2007800933),new H(770255983,1495990901),new H(1249150122,1856431235),new H(1555081692,-1119749164),new H(1996064986,-2096016459),new H(-1740746414,-295247957),new H(-1473132947,766784016),new H(-1341970488,-1728372417),new H(-1084653625,-1091629340),new H(-958395405,1034457026),new H(-710438585,-1828018395),new H(113926993,-536640913),new H(338241895,168717936),new H(666307205,1188179964),new H(773529912,1546045734),new H(1294757372,1522805485),new H(1396182291,-1651133473),new H(1695183700,-1951439906),new H(1986661051,1014477480),new H(-2117940946,1206759142),new H(-1838011259,344077627),new H(-1564481375,1290863460),new H(-1474664885,-1136513023),new H(-1035236496,-789014639),new H(-949202525,106217008),new H(-778901479,-688958952),new H(-694614492,1432725776),new H(-200395387,1467031594),new H(275423344,851169720),new H(430227734,-1194143544),new H(506948616,1363258195),new H(659060556,-544281703),new H(883997877,-509917016),new H(958139571,-976659869),new H(1322822218,-482243893),new H(1537002063,2003034995),new H(1747873779,-692930397),new H(1955562222,1575990012),new H(2024104815,1125592928),new H(-2067236844,-1578062990),new H(-1933114872,442776044),new H(-1866530822,593698344),new H(-1538233109,-561857047),new H(-1090935817,-1295615723),new H(-965641998,-479046869),new H(-903397682,-366583396),new H(-779700025,566280711),new H(-354779690,-840897762),new H(-176337025,-294727304),new H(116418474,1914138554),new H(174292421,-1563912026),new H(289380356,-1090974290),new H(460393269,320620315),new H(685471733,587496836),new H(852142971,1086792851),new H(1017036298,365543100),new H(1126000580,-1676669620),new H(1288033470,-885112138),new H(1501505948,-60457430),new H(1607167915,987167468),new H(1816402316,1246189591)]),le=0;le<80;le+=1)q[le]=new H(0,0);for(T[G>>5]|=128<<24-(G&31),T[(G+128>>10<<5)+31]=G,fe=T.length,le=0;le<fe;le+=32){for(ce(Re,D[0]),ce(Oe,D[1]),ce(Ne,D[2]),ce(Ue,D[3]),ce(Ze,D[4]),ce(bt,D[5]),ce(it,D[6]),ce(ut,D[7]),Q=0;Q<16;Q+=1)q[Q].h=T[le+2*Q],q[Q].l=T[le+2*Q+1];for(Q=16;Q<80;Q+=1)U(Ct,q[Q-2],19),te(_e,q[Q-2],29),re(Y,q[Q-2],6),He.l=Ct.l^_e.l^Y.l,He.h=Ct.h^_e.h^Y.h,U(Ct,q[Q-15],1),U(_e,q[Q-15],8),re(Y,q[Q-15],7),ft.l=Ct.l^_e.l^Y.l,ft.h=Ct.h^_e.h^Y.h,V(q[Q],He,q[Q-7],ft,q[Q-16]);for(Q=0;Q<80;Q+=1)Mt.l=Ze.l&bt.l^~Ze.l&it.l,Mt.h=Ze.h&bt.h^~Ze.h&it.h,U(Ct,Ze,14),U(_e,Ze,18),te(Y,Ze,9),He.l=Ct.l^_e.l^Y.l,He.h=Ct.h^_e.h^Y.h,U(Ct,Re,28),te(_e,Re,2),te(Y,Re,7),ft.l=Ct.l^_e.l^Y.l,ft.h=Ct.h^_e.h^Y.h,wn.l=Re.l&Oe.l^Re.l&Ne.l^Oe.l&Ne.l,wn.h=Re.h&Oe.h^Re.h&Ne.h^Oe.h&Ne.h,S(oe,ut,He,Mt,ee[Q],q[Q]),ue(Pe,ft,wn),ce(ut,it),ce(it,bt),ce(bt,Ze),ue(Ze,Ue,oe),ce(Ue,Ne),ce(Ne,Oe),ce(Oe,Re),ue(Re,oe,Pe);ue(D[0],D[0],Re),ue(D[1],D[1],Oe),ue(D[2],D[2],Ne),ue(D[3],D[3],Ue),ue(D[4],D[4],Ze),ue(D[5],D[5],bt),ue(D[6],D[6],it),ue(D[7],D[7],ut)}for(le=0;le<8;le+=1)se[2*le]=D[le].h,se[2*le+1]=D[le].l;return se}function H(T,G){this.h=T,this.l=G}function ce(T,G){T.h=G.h,T.l=G.l}function U(T,G,Q){T.l=G.l>>>Q|G.h<<32-Q,T.h=G.h>>>Q|G.l<<32-Q}function te(T,G,Q){T.l=G.h>>>Q|G.l<<32-Q,T.h=G.l>>>Q|G.h<<32-Q}function re(T,G,Q){T.l=G.l>>>Q|G.h<<32-Q,T.h=G.h>>>Q}function ue(T,G,Q){var le=(G.l&65535)+(Q.l&65535),fe=(G.l>>>16)+(Q.l>>>16)+(le>>>16),q=(G.h&65535)+(Q.h&65535)+(fe>>>16),se=(G.h>>>16)+(Q.h>>>16)+(q>>>16);T.l=le&65535|fe<<16,T.h=q&65535|se<<16}function V(T,G,Q,le,fe){var q=(G.l&65535)+(Q.l&65535)+(le.l&65535)+(fe.l&65535),se=(G.l>>>16)+(Q.l>>>16)+(le.l>>>16)+(fe.l>>>16)+(q>>>16),D=(G.h&65535)+(Q.h&65535)+(le.h&65535)+(fe.h&65535)+(se>>>16),oe=(G.h>>>16)+(Q.h>>>16)+(le.h>>>16)+(fe.h>>>16)+(D>>>16);T.l=q&65535|se<<16,T.h=D&65535|oe<<16}function S(T,G,Q,le,fe,q){var se=(G.l&65535)+(Q.l&65535)+(le.l&65535)+(fe.l&65535)+(q.l&65535),D=(G.l>>>16)+(Q.l>>>16)+(le.l>>>16)+(fe.l>>>16)+(q.l>>>16)+(se>>>16),oe=(G.h&65535)+(Q.h&65535)+(le.h&65535)+(fe.h&65535)+(q.h&65535)+(D>>>16),Pe=(G.h>>>16)+(Q.h>>>16)+(le.h>>>16)+(fe.h>>>16)+(q.h>>>16)+(oe>>>16);T.l=se&65535|D<<16,T.h=oe&65535|Pe<<16}},RMD160:function(M){M&&typeof M.uppercase=="boolean"&&M.uppercase;var N=M&&typeof M.pad=="string"?M.pa:"=",Z=M&&typeof M.utf8=="boolean"?M.utf8:!0,ee=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],F=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],O=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],k=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];this.hex=function(S){return p(H(S))},this.b64=function(S){return B(H(S),N)},this.any=function(S,T){return A(H(S),T)},this.raw=function(S){return H(S)},this.hex_hmac=function(S,T){return p(ce(S,T))},this.b64_hmac=function(S,T){return B(ce(S,T),N)},this.any_hmac=function(S,T,G){return A(ce(S,T),G)},this.vm_test=function(){return hex("abc").toLowerCase()==="900150983cd24fb0d6963f7d28e17f72"},this.setUpperCase=function(S){return this},this.setPad=function(S){return typeof S<"u"&&(N=S),this},this.setUTF8=function(S){return typeof S=="boolean"&&(Z=S),this};function H(S){return S=Z?a(S):S,U(te(E(S),S.length*8))}function ce(S,T){S=Z?a(S):S,T=Z?a(T):T;var G,Q,le=E(S),fe=Array(16),q=Array(16);for(le.length>16&&(le=te(le,S.length*8)),G=0;G<16;G+=1)fe[G]=le[G]^909522486,q[G]=le[G]^1549556828;return Q=te(fe.concat(E(T)),512+T.length*8),U(te(q.concat(Q),512+160))}function U(S){var T,G="",Q=S.length*32;for(T=0;T<Q;T+=8)G+=String.fromCharCode(S[T>>5]>>>T%32&255);return G}function te(S,T){var G,Q,le,fe,q=1732584193,se=4023233417,D=2562383102,oe=271733878,Pe=3285377520,Re,Oe,Ne,Ue,Ze,bt,it,ut,ft,He;for(S[T>>5]|=128<<T%32,S[(T+64>>>9<<4)+14]=T,fe=S.length,le=0;le<fe;le+=16){for(Re=bt=q,Oe=it=se,Ne=ut=D,Ue=ft=oe,Ze=He=Pe,Q=0;Q<=79;Q+=1)G=h(Re,re(Q,Oe,Ne,Ue)),G=h(G,S[le+ee[Q]]),G=h(G,ue(Q)),G=h(g(G,O[Q]),Ze),Re=Ze,Ze=Ue,Ue=g(Ne,10),Ne=Oe,Oe=G,G=h(bt,re(79-Q,it,ut,ft)),G=h(G,S[le+F[Q]]),G=h(G,V(Q)),G=h(g(G,k[Q]),He),bt=He,He=ft,ft=g(ut,10),ut=it,it=G;G=h(se,h(Ne,ft)),se=h(D,h(Ue,He)),D=h(oe,h(Ze,bt)),oe=h(Pe,h(Re,it)),Pe=h(q,h(Oe,ut)),q=G}return[q,se,D,oe,Pe]}function re(S,T,G,Q){return 0<=S&&S<=15?T^G^Q:16<=S&&S<=31?T&G|~T&Q:32<=S&&S<=47?(T|~G)^Q:48<=S&&S<=63?T&Q|G&~Q:64<=S&&S<=79?T^(G|~Q):"rmd160_f: j out of range"}function ue(S){return 0<=S&&S<=15?0:16<=S&&S<=31?1518500249:32<=S&&S<=47?1859775393:48<=S&&S<=63?2400959708:64<=S&&S<=79?2840853838:"rmd160_K1: j out of range"}function V(S){return 0<=S&&S<=15?1352829926:16<=S&&S<=31?1548603684:32<=S&&S<=47?1836072691:48<=S&&S<=63?2053994217:64<=S&&S<=79?0:"rmd160_K2: j out of range"}}},function(M,N){var Z=!1;Z=e,e&&typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal===commonjsGlobal.global&&(M=commonjsGlobal),typeof N=="function"&&typeof N.amd=="object"&&N.amd?N(function(){return t}):Z?n&&n.exports===Z?n.exports=t:Z.Hashes=t:M.Hashes=t}(this)})()})(hashes$1,hashesExports);var hashes=hashesExports,sha1=new hashes.SHA1,hasOwnProperty$2=Object.prototype.hasOwnProperty;function xtend$1(){for(var n={},e=0;e<arguments.length;e++){var t=arguments[e];for(var a in t)hasOwnProperty$2.call(t,a)&&(n[a]=t[a])}return n}var ohauth$1={};ohauth$1.qsString=function(n){return Object.keys(n).sort().map(function(e){return ohauth$1.percentEncode(e)+"="+ohauth$1.percentEncode(n[e])}).join("&")};ohauth$1.stringQs=function(n){return n.split("&").filter(function(e){return e!==""}).reduce(function(e,t){var a=t.split("=");return e[decodeURIComponent(a[0])]=a[1]===null?"":decodeURIComponent(a[1]),e},{})};ohauth$1.rawxhr=function(n,e,t,a,l){var h=new XMLHttpRequest,g=/^20\d$/;h.onreadystatechange=function(){if(h.readyState===4&&h.status!==0)if(g.test(h.status))l(null,h);else return l(h,null)},h.onerror=function(y){return l(y,null)},h.open(n,e,!0);for(var p in a)h.setRequestHeader(p,a[p]);return h.send(t),h};ohauth$1.xhr=function(n,e,t,a,l,h){var g=l&&l.header||{"Content-Type":"application/x-www-form-urlencoded"};return g.Authorization="OAuth "+ohauth$1.authHeader(t),ohauth$1.rawxhr(n,e,a,g,h)};ohauth$1.nonce=function(){for(var n="";n.length<6;)n+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz"[Math.floor(Math.random()*61)];return n};ohauth$1.authHeader=function(n){return Object.keys(n).sort().map(function(e){return encodeURIComponent(e)+'="'+encodeURIComponent(n[e])+'"'}).join(", ")};ohauth$1.timestamp=function(){return~~(+new Date/1e3)};ohauth$1.percentEncode=function(n){return encodeURIComponent(n).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29")};ohauth$1.baseString=function(n,e,t){return t.oauth_signature&&delete t.oauth_signature,[n,ohauth$1.percentEncode(e),ohauth$1.percentEncode(ohauth$1.qsString(t))].join("&")};ohauth$1.signature=function(n,e,t){return sha1.b64_hmac(ohauth$1.percentEncode(n)+"&"+ohauth$1.percentEncode(e),t)};ohauth$1.headerGenerator=function(n){n=n||{};var e=n.consumer_key||"",t=n.consumer_secret||"",a=n.signature_method||"HMAC-SHA1",l=n.version||"1.0",h=n.token||"",g=n.token_secret||"";return function(p,y,b){p=p.toUpperCase(),typeof b=="string"&&b.length>0&&(b=ohauth$1.stringQs(b));var E=y.split("?",2),C=E[0],A=E.length===2?ohauth$1.stringQs(E[1]):{},B={oauth_consumer_key:e,oauth_signature_method:a,oauth_version:l,oauth_timestamp:ohauth$1.timestamp(),oauth_nonce:ohauth$1.nonce()};h&&(B.oauth_token=h);var M=xtend$1({},B,A,b),N=ohauth$1.baseString(p,C,M);return B.oauth_signature=ohauth$1.signature(t,g,N),"OAuth "+ohauth$1.authHeader(B)}};var ohauth_1=ohauth$1,resolveUrlExports={},resolveUrl$1={get exports(){return resolveUrlExports},set exports(n){resolveUrlExports=n}};(function(n,e){(function(t,a){n.exports=a()})(commonjsGlobal,function(){function t(){var a=arguments.length;if(a===0)throw new Error("resolveUrl requires at least one argument; got none.");var l=document.createElement("base");if(l.href=arguments[0],a===1)return l.href;var h=document.getElementsByTagName("head")[0];h.insertBefore(l,h.firstChild);for(var g=document.createElement("a"),p,y=1;y<a;y++)g.href=arguments[y],p=g.href,l.href=p;return h.removeChild(l),p}return t})})(resolveUrl$1);var assign=make_assign(),create$1=make_create(),trim$2=make_trim(),Global$5=typeof window<"u"?window:commonjsGlobal,util$6={assign,create:create$1,trim:trim$2,bind:bind$2,slice:slice$1,each:each$7,map,pluck:pluck$1,isList:isList$1,isFunction:isFunction$2,isObject:isObject$3,Global:Global$5};function make_assign(){return Object.assign?Object.assign:function(e,t,a,l){for(var h=1;h<arguments.length;h++)each$7(Object(arguments[h]),function(g,p){e[p]=g});return e}}function make_create(){if(Object.create)return function(e,t,a,l){var h=slice$1(arguments,1);return assign.apply(this,[Object.create(e)].concat(h))};{let n=function(){};return function(t,a,l,h){var g=slice$1(arguments,1);return n.prototype=t,assign.apply(this,[new n].concat(g))}}}function make_trim(){return String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function bind$2(n,e){return function(){return e.apply(n,Array.prototype.slice.call(arguments,0))}}function slice$1(n,e){return Array.prototype.slice.call(n,e||0)}function each$7(n,e){pluck$1(n,function(t,a){return e(t,a),!1})}function map(n,e){var t=isList$1(n)?[]:{};return pluck$1(n,function(a,l){return t[l]=e(a,l),!1}),t}function pluck$1(n,e){if(isList$1(n)){for(var t=0;t<n.length;t++)if(e(n[t],t))return n[t]}else for(var a in n)if(n.hasOwnProperty(a)&&e(n[a],a))return n[a]}function isList$1(n){return n!=null&&typeof n!="function"&&typeof n.length=="number"}function isFunction$2(n){return n&&{}.toString.call(n)==="[object Function]"}function isObject$3(n){return n&&{}.toString.call(n)==="[object Object]"}var util$5=util$6,slice=util$5.slice,pluck=util$5.pluck,each$6=util$5.each,bind$1=util$5.bind,create=util$5.create,isList=util$5.isList,isFunction$1=util$5.isFunction,isObject$2=util$5.isObject,storeEngine={createStore},storeAPI={version:"2.0.12",enabled:!1,get:function(n,e){var t=this.storage.read(this._namespacePrefix+n);return this._deserialize(t,e)},set:function(n,e){return e===void 0?this.remove(n):(this.storage.write(this._namespacePrefix+n,this._serialize(e)),e)},remove:function(n){this.storage.remove(this._namespacePrefix+n)},each:function(n){var e=this;this.storage.each(function(t,a){n.call(e,e._deserialize(t),(a||"").replace(e._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(n){return this._namespacePrefix=="__storejs_"+n+"_"},createStore:function(){return createStore.apply(this,arguments)},addPlugin:function(n){this._addPlugin(n)},namespace:function(n){return createStore(this.storage,this.plugins,n)}};function _warn(){var n=typeof console>"u"?null:console;if(n){var e=n.warn?n.warn:n.log;e.apply(n,arguments)}}function createStore(n,e,t){t||(t=""),n&&!isList(n)&&(n=[n]),e&&!isList(e)&&(e=[e]);var a=t?"__storejs_"+t+"_":"",l=t?new RegExp("^"+a):null,h=/^[a-zA-Z0-9_\-]*$/;if(!h.test(t))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var g={_namespacePrefix:a,_namespaceRegexp:l,_testStorage:function(y){try{var b="__storejs__test__";y.write(b,b);var E=y.read(b)===b;return y.remove(b),E}catch{return!1}},_assignPluginFnProp:function(y,b){var E=this[b];this[b]=function(){var A=slice(arguments,0),B=this;function M(){if(E)return each$6(arguments,function(Z,ee){A[ee]=Z}),E.apply(B,A)}var N=[M].concat(A);return y.apply(B,N)}},_serialize:function(y){return JSON.stringify(y)},_deserialize:function(y,b){if(!y)return b;var E="";try{E=JSON.parse(y)}catch{E=y}return E!==void 0?E:b},_addStorage:function(y){this.enabled||this._testStorage(y)&&(this.storage=y,this.enabled=!0)},_addPlugin:function(y){var b=this;if(isList(y)){each$6(y,function(A){b._addPlugin(A)});return}var E=pluck(this.plugins,function(A){return y===A});if(!E){if(this.plugins.push(y),!isFunction$1(y))throw new Error("Plugins must be function values that return objects");var C=y.call(this);if(!isObject$2(C))throw new Error("Plugins must return an object of function properties");each$6(C,function(A,B){if(!isFunction$1(A))throw new Error("Bad plugin property: "+B+" from plugin "+y.name+". Plugins should only return functions.");b._assignPluginFnProp(A,B)})}},addStorage:function(y){_warn("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(y)}},p=create(g,storeAPI,{plugins:[]});return p.raw={},each$6(p,function(y,b){isFunction$1(y)&&(p.raw[b]=bind$1(p,y))}),each$6(n,function(y){p._addStorage(y)}),each$6(e,function(y){p._addPlugin(y)}),p}var util$4=util$6,Global$4=util$4.Global,localStorage_1={name:"localStorage",read:read$5,write:write$5,each:each$5,remove:remove$5,clearAll:clearAll$5};function localStorage$1(){return Global$4.localStorage}function read$5(n){return localStorage$1().getItem(n)}function write$5(n,e){return localStorage$1().setItem(n,e)}function each$5(n){for(var e=localStorage$1().length-1;e>=0;e--){var t=localStorage$1().key(e);n(read$5(t),t)}}function remove$5(n){return localStorage$1().removeItem(n)}function clearAll$5(){return localStorage$1().clear()}var util$3=util$6,Global$3=util$3.Global,oldFFGlobalStorage={name:"oldFF-globalStorage",read:read$4,write:write$4,each:each$4,remove:remove$4,clearAll:clearAll$4},globalStorage=Global$3.globalStorage;function read$4(n){return globalStorage[n]}function write$4(n,e){globalStorage[n]=e}function each$4(n){for(var e=globalStorage.length-1;e>=0;e--){var t=globalStorage.key(e);n(globalStorage[t],t)}}function remove$4(n){return globalStorage.removeItem(n)}function clearAll$4(){each$4(function(n,e){delete globalStorage[n]})}var util$2=util$6,Global$2=util$2.Global,oldIEUserDataStorage={name:"oldIE-userDataStorage",write:write$3,read:read$3,each:each$3,remove:remove$3,clearAll:clearAll$3},storageName="storejs",doc$1=Global$2.document,_withStorageEl=_makeIEStorageElFunction(),disable=(Global$2.navigator?Global$2.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./);function write$3(n,e){if(!disable){var t=fixKey(n);_withStorageEl(function(a){a.setAttribute(t,e),a.save(storageName)})}}function read$3(n){if(!disable){var e=fixKey(n),t=null;return _withStorageEl(function(a){t=a.getAttribute(e)}),t}}function each$3(n){_withStorageEl(function(e){for(var t=e.XMLDocument.documentElement.attributes,a=t.length-1;a>=0;a--){var l=t[a];n(e.getAttribute(l.name),l.name)}})}function remove$3(n){var e=fixKey(n);_withStorageEl(function(t){t.removeAttribute(e),t.save(storageName)})}function clearAll$3(){_withStorageEl(function(n){var e=n.XMLDocument.documentElement.attributes;n.load(storageName);for(var t=e.length-1;t>=0;t--)n.removeAttribute(e[t].name);n.save(storageName)})}var forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function fixKey(n){return n.replace(/^\d/,"___$&").replace(forbiddenCharsRegex,"___")}function _makeIEStorageElFunction(){if(!doc$1||!doc$1.documentElement||!doc$1.documentElement.addBehavior)return null;var n="script",e,t,a;try{t=new ActiveXObject("htmlfile"),t.open(),t.write("<"+n+">document.w=window</"+n+'><iframe src="/favicon.ico"></iframe>'),t.close(),e=t.w.frames[0].document,a=e.createElement("div")}catch{a=doc$1.createElement("div"),e=doc$1.body}return function(l){var h=[].slice.call(arguments,0);h.unshift(a),e.appendChild(a),a.addBehavior("#default#userData"),a.load(storageName),l.apply(this,h),e.removeChild(a)}}var util$1=util$6,Global$1=util$1.Global,trim$1=util$1.trim,cookieStorage={name:"cookieStorage",read:read$2,write:write$2,each:each$2,remove:remove$2,clearAll:clearAll$2},doc=Global$1.document;function read$2(n){if(!n||!_has(n))return null;var e="(?:^|.*;\\s*)"+escape(n).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(doc.cookie.replace(new RegExp(e),"$1"))}function each$2(n){for(var e=doc.cookie.split(/; ?/g),t=e.length-1;t>=0;t--)if(trim$1(e[t])){var a=e[t].split("="),l=unescape(a[0]),h=unescape(a[1]);n(h,l)}}function write$2(n,e){n&&(doc.cookie=escape(n)+"="+escape(e)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")}function remove$2(n){!n||!_has(n)||(doc.cookie=escape(n)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function clearAll$2(){each$2(function(n,e){remove$2(e)})}function _has(n){return new RegExp("(?:^|;\\s*)"+escape(n).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(doc.cookie)}var util=util$6,Global=util.Global,sessionStorage_1={name:"sessionStorage",read:read$1,write:write$1,each:each$1,remove:remove$1,clearAll:clearAll$1};function sessionStorage(){return Global.sessionStorage}function read$1(n){return sessionStorage().getItem(n)}function write$1(n,e){return sessionStorage().setItem(n,e)}function each$1(n){for(var e=sessionStorage().length-1;e>=0;e--){var t=sessionStorage().key(e);n(read$1(t),t)}}function remove$1(n){return sessionStorage().removeItem(n)}function clearAll$1(){return sessionStorage().clear()}var memoryStorage_1={name:"memoryStorage",read,write,each,remove,clearAll},memoryStorage={};function read(n){return memoryStorage[n]}function write(n,e){memoryStorage[n]=e}function each(n){for(var e in memoryStorage)memoryStorage.hasOwnProperty(e)&&n(memoryStorage[e],e)}function remove(n){delete memoryStorage[n]}function clearAll(n){memoryStorage={}}var all=[localStorage_1,oldFFGlobalStorage,oldIEUserDataStorage,cookieStorage,sessionStorage_1,memoryStorage_1],json2$1={},hasRequiredJson2;function requireJson2(){return hasRequiredJson2||(hasRequiredJson2=1,typeof JSON!="object"&&(JSON={}),function(){var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function f(n){return n<10?"0"+n:n}function this_value(){return this.valueOf()}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;function quote(n){return rx_escapable.lastIndex=0,rx_escapable.test(n)?'"'+n.replace(rx_escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function str(n,e){var t,a,l,h,g=gap,p,y=e[n];switch(y&&typeof y=="object"&&typeof y.toJSON=="function"&&(y=y.toJSON(n)),typeof rep=="function"&&(y=rep.call(e,n,y)),typeof y){case"string":return quote(y);case"number":return isFinite(y)?String(y):"null";case"boolean":case"null":return String(y);case"object":if(!y)return"null";if(gap+=indent,p=[],Object.prototype.toString.apply(y)==="[object Array]"){for(h=y.length,t=0;t<h;t+=1)p[t]=str(t,y)||"null";return l=p.length===0?"[]":gap?`[
`+gap+p.join(`,
`+gap)+`
`+g+"]":"["+p.join(",")+"]",gap=g,l}if(rep&&typeof rep=="object")for(h=rep.length,t=0;t<h;t+=1)typeof rep[t]=="string"&&(a=rep[t],l=str(a,y),l&&p.push(quote(a)+(gap?": ":":")+l));else for(a in y)Object.prototype.hasOwnProperty.call(y,a)&&(l=str(a,y),l&&p.push(quote(a)+(gap?": ":":")+l));return l=p.length===0?"{}":gap?`{
`+gap+p.join(`,
`+gap)+`
`+g+"}":"{"+p.join(",")+"}",gap=g,l}}typeof JSON.stringify!="function"&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(n,e,t){var a;if(gap="",indent="",typeof t=="number")for(a=0;a<t;a+=1)indent+=" ";else typeof t=="string"&&(indent=t);if(rep=e,e&&typeof e!="function"&&(typeof e!="object"||typeof e.length!="number"))throw new Error("JSON.stringify");return str("",{"":n})}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){var j;function walk(n,e){var t,a,l=n[e];if(l&&typeof l=="object")for(t in l)Object.prototype.hasOwnProperty.call(l,t)&&(a=walk(l,t),a!==void 0?l[t]=a:delete l[t]);return reviver.call(n,e,l)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()),json2$1}var json2=json2Plugin;function json2Plugin(){return requireJson2(),{}}var engine=storeEngine,storages=all,plugins=[json2],store_legacy=engine.createStore(storages,plugins),ohauth=ohauth_1,resolveUrl=resolveUrlExports,store=store_legacy,hasOwnProperty$1=Object.prototype.hasOwnProperty;function xtend(){for(var n={},e=0;e<arguments.length;e++){var t=arguments[e];for(var a in t)hasOwnProperty$1.call(t,a)&&(n[a]=t[a])}return n}var osmAuth=function(n){var e={};e.authenticated=function(){return!!(a("oauth_token")&&a("oauth_token_secret"))},e.logout=function(){return a("oauth_token",""),a("oauth_token_secret",""),a("oauth_request_token_secret",""),e},e.authenticate=function(g){if(e.authenticated())return g();e.logout();var p=t(h(n)),y=n.url+"/oauth/request_token";if(p.oauth_signature=ohauth.signature(n.oauth_secret,"",ohauth.baseString("POST",y,p)),!n.singlepage){var b=600,E=550,C=[["width",b],["height",E],["left",screen.width/2-b/2],["top",screen.height/2-E/2]].map(function(ee){return ee.join("=")}).join(","),A=window.open("about:blank","oauth_window",C);if(e.popupWindow=A,!A){var B=new Error("Popup was blocked");throw B.status="popup-blocked",B}}ohauth.xhr("POST",y,p,null,{},M),n.loading();function M(ee,F){if(n.done(),ee)return g(ee);var O=ohauth.stringQs(F.response);a("oauth_request_token_secret",O.oauth_token_secret);var k=n.url+"/oauth/authorize?"+ohauth.qsString({oauth_token:O.oauth_token,oauth_callback:resolveUrl(n.landing)});n.singlepage?location.href=k:A.location=k}window.authComplete=function(ee){var F=ohauth.stringQs(ee.split("?")[1]);N(F.oauth_token),delete window.authComplete};function N(ee){var F=n.url+"/oauth/access_token",O=t(h(n)),k=a("oauth_request_token_secret");O.oauth_token=ee,O.oauth_signature=ohauth.signature(n.oauth_secret,k,ohauth.baseString("POST",F,O)),ohauth.xhr("POST",F,O,null,{},Z),n.loading()}function Z(ee,F){if(n.done(),ee)return g(ee);var O=ohauth.stringQs(F.response);a("oauth_token",O.oauth_token),a("oauth_token_secret",O.oauth_token_secret),g(null,e)}},e.bringPopupWindowToFront=function(){var g=!1;try{e.popupWindow&&!e.popupWindow.closed&&(e.popupWindow.focus(),g=!0)}catch{}return g},e.bootstrapToken=function(g,p){function y(E){var C=n.url+"/oauth/access_token",A=t(h(n)),B=a("oauth_request_token_secret");A.oauth_token=E,A.oauth_signature=ohauth.signature(n.oauth_secret,B,ohauth.baseString("POST",C,A)),ohauth.xhr("POST",C,A,null,{},b),n.loading()}function b(E,C){if(n.done(),E)return p(E);var A=ohauth.stringQs(C.response);a("oauth_token",A.oauth_token),a("oauth_token_secret",A.oauth_token_secret),p(null,e)}y(g)},e.xhr=function(g,p){if(e.authenticated())return y();if(n.auto)return e.authenticate(y);p("not authenticated",null);return;function y(){var E=t(h(n)),C=a("oauth_token_secret"),A=g.prefix!==!1?n.url+g.path:g.path,B=A.replace(/#.*$/,"").split("?",2),M=B[0],N=B.length===2?B[1]:"";return(!g.options||!g.options.header||g.options.header["Content-Type"]==="application/x-www-form-urlencoded")&&g.content&&(E=xtend(E,ohauth.stringQs(g.content))),E.oauth_token=a("oauth_token"),E.oauth_signature=ohauth.signature(n.oauth_secret,C,ohauth.baseString(g.method,M,xtend(E,ohauth.stringQs(N)))),ohauth.xhr(g.method,A,E,g.content,g.options,b)}function b(E,C){return E?p(E):C.responseXML?p(E,C.responseXML):p(E,C.response)}},e.preauth=function(g){if(g)return g.oauth_token&&a("oauth_token",g.oauth_token),g.oauth_token_secret&&a("oauth_token_secret",g.oauth_token_secret),e},e.options=function(g){return arguments.length?(n=g,n.url=n.url||"https://www.openstreetmap.org",n.landing=n.landing||"land.html",n.singlepage=n.singlepage||!1,n.loading=n.loading||function(){},n.done=n.done||function(){},e.preauth(n)):n};function t(g){return g.oauth_timestamp=ohauth.timestamp(),g.oauth_nonce=ohauth.nonce(),g}var a;if(store.enabled)a=function(g,p){if(arguments.length===1)return store.get(n.url+g);if(arguments.length===2)return store.set(n.url+g,p)};else{var l={};a=function(g,p){if(arguments.length===1)return l[n.url+g];if(arguments.length===2)return l[n.url+g]=p}}function h(g){return{oauth_consumer_key:g.oauth_consumer_key,oauth_signature_method:"HMAC-SHA1"}}return e.options(n),e};leafletSrcExports.DomEvent.preventDefault;class OsmPreferences{constructor(e,t){ke(this,"preferences",new UIEventSource({},"all-osm-preferences"));ke(this,"preferenceSources",new Map);ke(this,"auth");ke(this,"userDetails");ke(this,"longPreferences",{});this.auth=e,this.userDetails=t.userDetails;const a=this;t.OnLoggedIn(()=>a.UpdatePreferences())}GetLongPreference(e,t="mapcomplete-"){if(this.longPreferences[t+e]!==void 0)return this.longPreferences[t+e];const a=new UIEventSource(void 0,"long-osm-preference:"+t+e);this.longPreferences[t+e]=a;const l=t+e+"-combined",h=this.GetPreference(l+"-length","","");if((l+"-length").length>255)throw"This preference key is too long, it has "+e.length+" characters, but at most "+(255-7-9-t.length)+" characters are allowed";const g=this;a.addCallback(y=>{if(y===void 0||y==="")return;if(y===null){console.error("Deleting "+l);let E=parseInt(h.data);for(let C=0;C<E;C++)g.GetPreference(l+"-"+C,"","").setData("");g.GetPreference(l+"-length","","").setData("");return}let b=0;for(;y!=="";){if(y===void 0||y==="undefined")throw"Long pref became undefined?";if(b>100)throw"This long preference is getting very long... ";g.GetPreference(l+"-"+b,"","").setData(y.substr(0,255)),y=y.substr(255),b++}h.setData(""+b)});function p(y){if(Object.keys(g.preferences.data).length===0)return;const b=Number(y);if(b>100)throw"Length to long";let E="";for(let C=0;C<b;C++){const A=l+"-"+C;g.preferences.data[A]===void 0&&console.warn("Detected a broken combined preference:",A,"is undefined",g.preferences),E+=g.preferences.data[A]??""}a.setData(E)}return h.addCallback(y=>{p(Number(y))}),this.preferences.addCallbackAndRun(y=>{p(Number(h.data))}),a}GetPreference(e,t=void 0,a="mapcomplete-"){if(e.startsWith(a)&&a!==""&&console.trace("A preference was requested which has a duplicate prefix in its key. This is probably a bug"),e=a+e,e=e.replace(/[:\\\/"' {}.%]/g,""),e.length>=255)throw"Preferences: key length to big";const l=this.preferenceSources.get(e);if(l!==void 0)return l;this.userDetails.data.loggedIn&&this.preferences.data[e]===void 0&&this.UpdatePreferences();const h=new UIEventSource(this.preferences.data[e]??t,"osm-preference:"+e);return h.addCallback(g=>{this.UploadPreference(e,g)}),this.preferences.addCallbackD(g=>{const p=g[e];p!==void 0&&h.setData(p)}),this.preferenceSources.set(e,h),h}ClearPreferences(){let e=!1;const t=this;this.preferences.addCallback(a=>{if(console.log("Cleaning preferences..."),Object.keys(a).length==0||e)return;e=!0;const l=["mapcomplete-"];for(const h in a)l.some(p=>h.startsWith(p))&&(console.log("Clearing ",h),t.GetPreference(h,"","").setData(""));e=!1})}UpdatePreferences(){const e=this;this.auth.xhr({method:"GET",path:"/api/0.6/user/preferences"},function(t,a){if(t){console.log("Could not load preferences",t);return}const l=a.getElementsByTagName("preference");for(let h=0;h<l.length;h++){const g=l[h],p=g.getAttribute("k"),y=g.getAttribute("v");e.preferences.data[p]=y}e.preferenceSources.forEach((h,g)=>{const p=e.preferences.data[g];p===void 0&&h.data!==void 0?e.UploadPreference(g,h.data):h.setData(p)}),e.preferences.ping()})}UploadPreference(e,t){if(!this.userDetails.data.loggedIn){console.debug(`Not saving preference ${e}: user not logged in`);return}if(this.preferences.data[e]===t)return;const a=this;if(console.debug("Updating preference",e," to ",Utils.EllipsesAfter(t,15)),t===void 0||t===""){this.auth.xhr({method:"DELETE",path:"/api/0.6/user/preferences/"+encodeURIComponent(e),options:{header:{"Content-Type":"text/plain"}}},function(l){if(l){console.warn("Could not remove preference",l);return}delete a.preferences.data[e],a.preferences.ping(),console.debug("Preference ",e,"removed!")});return}this.auth.xhr({method:"PUT",path:"/api/0.6/user/preferences/"+encodeURIComponent(e),options:{header:{"Content-Type":"text/plain"}},content:t},function(l){if(l){console.warn(`Could not set preference "${e}"'`,l);return}a.preferences.data[e]=t,a.preferences.ping(),console.debug(`Preference ${e} written!`)})}}/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var matchHtmlRegExp=/["'&<>]/,escapeHtml_1=escapeHtml;function escapeHtml(n){var e=""+n,t=matchHtmlRegExp.exec(e);if(!t)return e;var a,l="",h=0,g=0;for(h=t.index;h<e.length;h++){switch(e.charCodeAt(h)){case 34:a="&quot;";break;case 38:a="&amp;";break;case 39:a="&#39;";break;case 60:a="&lt;";break;case 62:a="&gt;";break;default:continue}g!==h&&(l+=e.substring(g,h)),g=h+1,l+=a}return g!==h?l+e.substring(g,h):l}class ChangesetHandler{constructor(e,t,a,l,h){ke(this,"allElements");ke(this,"osmConnection");ke(this,"changes");ke(this,"_dryRun");ke(this,"userDetails");ke(this,"auth");ke(this,"backend");ke(this,"_remappings",new Map);this.osmConnection=t,this.allElements=a,this.changes=l,this._dryRun=e,this.userDetails=t.userDetails,this.backend=t._oauth_config.url,this.auth=h,e&&console.log("DRYRUN ENABLED")}static removeDuplicateMetaTags(e){const t=[],a=new Set;for(const l of e)a.has(l.key)||(t.push(l),a.add(l.key));return t}static rewriteMetaTags(e,t){let a=!1;for(const l of e){const h=l.key.match(/^([a-zA-Z0-9_]+):(node\/-[0-9])$/);if(h==null)continue;const[g,p,y]=h;t.has(y)&&(l.key=p+":"+t.get(y),a=!0)}return a}async UploadChangeset(e,t,a){if(!t.some(l=>l.key==="comment")||!t.some(l=>l.key==="theme"))throw"The meta tags should at least contain a `comment` and a `theme`";if(t=[...t,...this.defaultChangesetTags()],t=ChangesetHandler.removeDuplicateMetaTags(t),this.userDetails.data.csCount==0&&(this.userDetails.data.csCount=1,this.userDetails.ping()),this._dryRun.data){const l=e(123456,this._remappings);console.log("Metatags are",t),console.log(l);return}if(a.data===void 0)try{const l=await this.OpenChangeset(t);a.setData(l);const h=e(l,this._remappings);console.trace("Opened a new changeset (openChangeset.data is undefined):",h);const g=await this.UploadChange(l,h);ChangesetHandler.rewriteMetaTags(t,g)&&await this.UpdateTags(l,t)}catch(l){console.error("Could not open/upload changeset due to ",l),a.setData(void 0)}else{const l=a.data;try{const h=await this.GetChangesetMeta(l);if(!h.open){console.log("Could not fetch the metadata from the already open changeset"),a.setData(void 0),await this.UploadChangeset(e,t,a);return}const g=await this.UploadChange(l,e(l,this._remappings)),p=this.RewriteTagsOf(t,g,h);await this.UpdateTags(l,p)}catch(h){console.warn("Could not upload, changeset is probably closed: ",h),a.setData(void 0)}}}RewriteTagsOf(e,t,a){const l=new Map;for(const g of e)l.set(g.key,g);const h=a.tags;for(const g in h){const p=l.get(g),y=h[g];if(!(p!==void 0&&p.value===y)){if(p===void 0){e.push({key:g,value:h[g]});continue}if(p.aggregate){let b=Number(p.value);isNaN(b)&&(b=0);let E=Number(h[g]);isNaN(E)&&(E=0),p.value=""+(b+E)}}}return ChangesetHandler.rewriteMetaTags(e,t),e}static parseIdRewrite(e,t){const a=parseInt(e.attributes.old_id.value);if(e.attributes.new_id===void 0)return[t+"/"+a,void 0];const l=parseInt(e.attributes.new_id.value),h=[t+"/"+a,t+"/"+l];if(a!==l)return h}parseUploadChangesetResponse(e){const t=e.getElementsByTagName("node"),a=[];for(const h of Array.from(t)){const g=ChangesetHandler.parseIdRewrite(h,"node");g!==void 0&&a.push(g)}const l=e.getElementsByTagName("way");for(const h of Array.from(l)){const g=ChangesetHandler.parseIdRewrite(h,"way");g!==void 0&&a.push(g)}for(const h of a){const[g,p]=h;this.allElements.addAlias(g,p),p!==void 0&&this._remappings.set(h[0],h[1])}return new Map(a)}async CloseChangeset(e=void 0){const t=this;return new Promise(function(a,l){e!==void 0&&t.auth.xhr({method:"PUT",path:"/api/0.6/changeset/"+e+"/close"},function(h,g){g==null&&console.log("err",h),console.log("Closed changeset ",e),a()})})}async GetChangesetMeta(e){const t=`${this.backend}/api/0.6/changeset/${e}`;return(await Utils.downloadJson(t)).elements[0]}async UpdateTags(e,t){t=ChangesetHandler.removeDuplicateMetaTags(t);const a=this;return new Promise(function(l,h){t=Utils.NoNull(t).filter(p=>p.key!==void 0&&p.value!==void 0&&p.key!==""&&p.value!=="");const g=t.map(p=>`<tag k="${p.key}" v="${escapeHtml_1(p.value)}"/>`);a.auth.xhr({method:"PUT",path:"/api/0.6/changeset/"+e,options:{header:{"Content-Type":"text/xml"}},content:["<osm><changeset>",g,"</changeset></osm>"].join("")},function(p,y){y===void 0?(console.error("Updating the tags of changeset "+e+" failed:",p),h(p)):l(y)})})}defaultChangesetTags(){var e,t,a,l,h;return[["created_by",`MapComplete ${Constants.vNumber}`],["locale",Locale.language.data],["host",`${window.location.origin}${window.location.pathname}`],["source",((a=(t=(e=this.changes.state.currentUserLocation)==null?void 0:e.features)==null?void 0:t.data)==null?void 0:a.length)>0?"survey":void 0],["imagery",(h=(l=this.changes.state.backgroundLayer)==null?void 0:l.data)==null?void 0:h.id]].map(([g,p])=>({key:g,value:p,aggretage:!1}))}OpenChangeset(e){const t=this;return new Promise(function(a,l){const h=e.map(g=>[g.key,g.value]).filter(g=>(g[1]??"")!=="").map(g=>`<tag k="${g[0]}" v="${escapeHtml_1(g[1])}"/>`).join(`
`);t.auth.xhr({method:"PUT",path:"/api/0.6/changeset/create",options:{header:{"Content-Type":"text/xml"}},content:["<osm><changeset>",h,"</changeset></osm>"].join("")},function(g,p){p===void 0?(console.error("Opening a changeset failed:",g),l(g)):a(Number(p))})})}UploadChange(e,t){const a=this;return new Promise(function(l,h){a.auth.xhr({method:"POST",options:{header:{"Content-Type":"text/xml"}},path:"/api/0.6/changeset/"+e+"/upload",content:t},function(g,p){p==null&&(console.error("Uploading an actual change failed",g),h(g));const y=a.parseUploadChangesetResponse(p);console.log("Uploaded changeset ",e),l(y)})})}}class UserDetails{constructor(e){ke(this,"loggedIn",!1);ke(this,"name","Not logged in");ke(this,"uid");ke(this,"csCount",0);ke(this,"img");ke(this,"unreadMessages",0);ke(this,"totalMessages",0);ke(this,"home");ke(this,"backend");ke(this,"account_created");ke(this,"tracesCount",0);ke(this,"description");this.backend=e}}const Jo=class{constructor(e){ke(this,"auth");ke(this,"userDetails");ke(this,"isLoggedIn");ke(this,"gpxServiceIsOnline",new UIEventSource("unknown"));ke(this,"apiIsOnline",new UIEventSource("unknown"));ke(this,"loadingStatus",new UIEventSource("not-attempted"));ke(this,"preferencesHandler");ke(this,"_oauth_config");ke(this,"_dryRun");ke(this,"fakeUser");ke(this,"_onLoggedIn",[]);ke(this,"_iframeMode");ke(this,"_singlePage");ke(this,"isChecking",!1);var a;if(e=e??{},this.fakeUser=e.fakeUser??!1,this._singlePage=e.singlePage??!0,this._oauth_config=Jo.oauth_configs[e.osmConfiguration??"osm"]??Jo.oauth_configs.osm,console.debug("Using backend",this._oauth_config.url),OsmObject.SetBackendUrl(this._oauth_config.url+"/"),this._iframeMode=Utils.runningFromConsole?!1:window!==window.top,this.userDetails=new UIEventSource(new UserDetails(this._oauth_config.url),"userDetails"),e.fakeUser){const l=this.userDetails.data;l.csCount=5678,l.loggedIn=!0,l.unreadMessages=0,l.name="Fake user",l.totalMessages=42}const t=this;if(this.UpdateCapabilities(),this.isLoggedIn=this.userDetails.map(l=>l.loggedIn&&(t.apiIsOnline.data==="unknown"||t.apiIsOnline.data==="online"),[this.apiIsOnline]),this.isLoggedIn.addCallback(l=>{t.userDetails.data.loggedIn==!1&&l==!0&&t.AttemptLogin()}),this._dryRun=e.dryRun??new UIEventSource(!1),this.updateAuthObject(),this.preferencesHandler=new OsmPreferences(this.auth,this),((a=e.oauth_token)==null?void 0:a.data)!==void 0){console.log(e.oauth_token.data);const l=this;this.auth.bootstrapToken(e.oauth_token.data,h=>{console.log("Called back: ",h),l.AttemptLogin()},this.auth),e.oauth_token.setData(void 0)}this.auth.authenticated()&&e.attemptLogin!==!1?this.AttemptLogin():console.log("Not authenticated")}CreateChangesetHandler(e,t){return new ChangesetHandler(this._dryRun,this,e,t,this.auth)}GetPreference(e,t=void 0,a="mapcomplete-"){return this.preferencesHandler.GetPreference(e,t,a)}GetLongPreference(e,t="mapcomplete-"){return this.preferencesHandler.GetLongPreference(e,t)}OnLoggedIn(e){this._onLoggedIn.push(e)}LogOut(){this.auth.logout(),this.userDetails.data.loggedIn=!1,this.userDetails.data.csCount=0,this.userDetails.data.name="",this.userDetails.ping(),console.log("Logged out"),this.loadingStatus.setData("not-attempted")}Backend(){return this._oauth_config.url}AttemptLogin(){if(this.UpdateCapabilities(),this.loadingStatus.setData("loading"),this.fakeUser){this.loadingStatus.setData("logged-in"),console.log("AttemptLogin called, but ignored as fakeUser is set");return}const e=this;console.log("Trying to log in..."),this.updateAuthObject(),this.auth.xhr({method:"GET",path:"/api/0.6/user/details"},function(t,a){var E;if(t!=null){console.log(t),e.loadingStatus.setData("error"),t.status==401&&(console.log("Clearing tokens..."),["https://www.openstreetmap.orgoauth_request_token_secret","https://www.openstreetmap.orgoauth_token","https://www.openstreetmap.orgoauth_token_secret"].forEach(A=>localStorage.removeItem(A)));return}if(a==null){e.loadingStatus.setData("error");return}e.CheckForMessagesContinuously();let l=a.getElementsByTagName("user")[0],h=e.userDetails.data;h.loggedIn=!0,console.log("Login completed, userinfo is ",l),h.name=l.getAttribute("display_name"),h.account_created=l.getAttribute("account_created"),h.uid=Number(l.getAttribute("id")),h.csCount=Number.parseInt(l.getElementsByTagName("changesets")[0].getAttribute("count")??0),h.tracesCount=Number.parseInt(l.getElementsByTagName("changesets")[0].getAttribute("count")??0),h.img=void 0;const g=l.getElementsByTagName("img");g!==void 0&&g[0]!==void 0&&(h.img=g[0].getAttribute("href"));const p=l.getElementsByTagName("description");p!==void 0&&p[0]!==void 0&&(h.description=(E=p[0])==null?void 0:E.innerHTML);const y=l.getElementsByTagName("home");if(y!==void 0&&y[0]!==void 0){const C=parseFloat(y[0].getAttribute("lat")),A=parseFloat(y[0].getAttribute("lon"));h.home={lat:C,lon:A}}e.loadingStatus.setData("logged-in");const b=l.getElementsByTagName("messages")[0].getElementsByTagName("received")[0];h.unreadMessages=parseInt(b.getAttribute("unread")),h.totalMessages=parseInt(b.getAttribute("count")),e.userDetails.ping();for(const C of e._onLoggedIn)C(e.userDetails.data);e._onLoggedIn=[]})}closeNote(e,t){let a="";return(t??"")!==""&&(a="?text="+encodeURIComponent(t)),this._dryRun.data?(console.warn("Dryrun enabled - not actually closing note ",e," with text ",t),new Promise(l=>{l()})):new Promise((l,h)=>{this.auth.xhr({method:"POST",path:`/api/0.6/notes/${e}/close${a}`},function(g,p){g!==null?h(g):l()})})}reopenNote(e,t){if(this._dryRun.data)return console.warn("Dryrun enabled - not actually reopening note ",e," with text ",t),new Promise(l=>{l()});let a="";return(t??"")!==""&&(a="?text="+encodeURIComponent(t)),new Promise((l,h)=>{this.auth.xhr({method:"POST",path:`/api/0.6/notes/${e}/reopen${a}`},function(g,p){g!==null?h(g):l()})})}openNote(e,t,a){if(this._dryRun.data)return console.warn("Dryrun enabled - not actually opening note with text ",a),new Promise(g=>{window.setTimeout(()=>g({id:Math.floor(Math.random()*1e3)}),Math.random()*5e3)});const l=this.auth,h={lat:e,lon:t,text:a};return new Promise((g,p)=>{l.xhr({method:"POST",path:"/api/0.6/notes.json",options:{header:{"Content-Type":"application/json"}},content:JSON.stringify(h)},function(y,b){if(console.log("RESPONSE IS",b),y!==null)p(y);else{const C=JSON.parse(b).properties.id;console.log("OPENED NOTE",C),g({id:C})}})})}async uploadGpxTrack(e,t){var y;if(this._dryRun.data)return console.warn("Dryrun enabled - not actually uploading GPX ",e),new Promise((b,E)=>{window.setTimeout(()=>b({id:Math.floor(Math.random()*1e3)}),Math.random()*5e3)});const a={file:e,description:t.description??"",tags:((y=t.labels)==null?void 0:y.join(","))??"",visibility:t.visibility},l={file:'; filename="'+(t.filename??"gpx_track_mapcomplete_"+new Date().toISOString())+`"\r
Content-Type: application/gpx+xml`},h=this.auth,g="987654";let p="";for(const b in a)p+="--"+g+`\r
`,p+='Content-Disposition: form-data; name="'+b+'"',l[b]!==void 0&&(p+=l[b]),p+=`\r
\r
`,p+=a[b]+`\r
`;return p+="--"+g+`--\r
`,new Promise((b,E)=>{h.xhr({method:"POST",path:"/api/0.6/gpx/create",options:{header:{"Content-Type":"multipart/form-data; boundary="+g,"Content-Length":p.length}},content:p},function(C,A){if(console.log("RESPONSE IS",A),C!==null)E(C);else{const B=JSON.parse(A);console.log("Uploaded GPX track",B),b({id:B})}})})}addCommentToNote(e,t){if(this._dryRun.data)return console.warn("Dryrun enabled - not actually adding comment ",t,"to  note ",e),new Promise(a=>{a()});if((t??"")==="")throw"Invalid text!";return new Promise((a,l)=>{this.auth.xhr({method:"POST",path:`/api/0.6/notes/${e}/comment?text=${encodeURIComponent(t)}`},function(h,g){h!==null?l(h):a()})})}updateAuthObject(){let e=!1;try{(Utils.runningFromConsole||window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches)&&(e=!0)}catch(a){console.warn("Detecting standalone mode failed",a,". Assuming in browser and not worrying furhter")}const t=this._iframeMode||e||!this._singlePage;this.auth=new osmAuth({oauth_consumer_key:this._oauth_config.oauth_consumer_key,oauth_secret:this._oauth_config.oauth_secret,url:this._oauth_config.url,landing:t?void 0:window.location.href,singlepage:!t,auto:!0})}CheckForMessagesContinuously(){const e=this;this.isChecking||(this.isChecking=!0,Stores.Chronic(5*60*1e3).addCallback(t=>{e.isLoggedIn.data&&(console.log("Checking for messages"),e.AttemptLogin())}))}UpdateCapabilities(){const e=this;this.FetchCapabilities().then(({api:t,gpx:a})=>{e.apiIsOnline.setData(t),e.gpxServiceIsOnline.setData(a)})}async FetchCapabilities(){if(Utils.runningFromConsole)return{api:"online",gpx:"online"};const e=await Utils.downloadAdvanced(this.Backend()+"/api/0.6/capabilities");if(e.content===void 0)return console.log("Something went wrong:",e),{api:"unreachable",gpx:"unreachable"};const t=e.content,l=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("status")[0],h=l.getAttribute("api"),g=l.getAttribute("gpx");return{api:h,gpx:g}}};let OsmConnection=Jo;ke(OsmConnection,"oauth_configs",{osm:{oauth_consumer_key:"hivV7ec2o49Two8g9h8Is1VIiVOgxQ1iYexCbvem",oauth_secret:"wDBRTCem0vxD7txrg1y6p5r8nvmz8tAhET7zDASI",url:"https://www.openstreetmap.org"},"osm-test":{oauth_consumer_key:"Zgr7EoKb93uwPv2EOFkIlf3n9NLwj5wbyfjZMhz2",oauth_secret:"3am1i1sykHDMZ66SGq4wI2Z7cJMKgzneCHp3nctn",url:"https://master.apis.dev.openstreetmap.org"}});var dist={},MangroveReviews$1={},asn1$2={},bnExports={},bn={get exports(){return bnExports},set exports(n){bnExports=n}};(function(n){(function(e,t){function a(V,S){if(!V)throw new Error(S||"Assertion failed")}function l(V,S){V.super_=S;var T=function(){};T.prototype=S.prototype,V.prototype=new T,V.prototype.constructor=V}function h(V,S,T){if(h.isBN(V))return V;this.negative=0,this.words=null,this.length=0,this.red=null,V!==null&&((S==="le"||S==="be")&&(T=S,S=10),this._init(V||0,S||10,T||"be"))}typeof e=="object"?e.exports=h:t.BN=h,h.BN=h,h.wordSize=26;var g;try{typeof window<"u"&&typeof window.Buffer<"u"?g=window.Buffer:g=require$$0$3.Buffer}catch{}h.isBN=function(S){return S instanceof h?!0:S!==null&&typeof S=="object"&&S.constructor.wordSize===h.wordSize&&Array.isArray(S.words)},h.max=function(S,T){return S.cmp(T)>0?S:T},h.min=function(S,T){return S.cmp(T)<0?S:T},h.prototype._init=function(S,T,G){if(typeof S=="number")return this._initNumber(S,T,G);if(typeof S=="object")return this._initArray(S,T,G);T==="hex"&&(T=16),a(T===(T|0)&&T>=2&&T<=36),S=S.toString().replace(/\s+/g,"");var Q=0;S[0]==="-"&&(Q++,this.negative=1),Q<S.length&&(T===16?this._parseHex(S,Q,G):(this._parseBase(S,T,Q),G==="le"&&this._initArray(this.toArray(),T,G)))},h.prototype._initNumber=function(S,T,G){S<0&&(this.negative=1,S=-S),S<67108864?(this.words=[S&67108863],this.length=1):S<4503599627370496?(this.words=[S&67108863,S/67108864&67108863],this.length=2):(a(S<9007199254740992),this.words=[S&67108863,S/67108864&67108863,1],this.length=3),G==="le"&&this._initArray(this.toArray(),T,G)},h.prototype._initArray=function(S,T,G){if(a(typeof S.length=="number"),S.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(S.length/3),this.words=new Array(this.length);for(var Q=0;Q<this.length;Q++)this.words[Q]=0;var le,fe,q=0;if(G==="be")for(Q=S.length-1,le=0;Q>=0;Q-=3)fe=S[Q]|S[Q-1]<<8|S[Q-2]<<16,this.words[le]|=fe<<q&67108863,this.words[le+1]=fe>>>26-q&67108863,q+=24,q>=26&&(q-=26,le++);else if(G==="le")for(Q=0,le=0;Q<S.length;Q+=3)fe=S[Q]|S[Q+1]<<8|S[Q+2]<<16,this.words[le]|=fe<<q&67108863,this.words[le+1]=fe>>>26-q&67108863,q+=24,q>=26&&(q-=26,le++);return this.strip()};function p(V,S){var T=V.charCodeAt(S);return T>=65&&T<=70?T-55:T>=97&&T<=102?T-87:T-48&15}function y(V,S,T){var G=p(V,T);return T-1>=S&&(G|=p(V,T-1)<<4),G}h.prototype._parseHex=function(S,T,G){this.length=Math.ceil((S.length-T)/6),this.words=new Array(this.length);for(var Q=0;Q<this.length;Q++)this.words[Q]=0;var le=0,fe=0,q;if(G==="be")for(Q=S.length-1;Q>=T;Q-=2)q=y(S,T,Q)<<le,this.words[fe]|=q&67108863,le>=18?(le-=18,fe+=1,this.words[fe]|=q>>>26):le+=8;else{var se=S.length-T;for(Q=se%2===0?T+1:T;Q<S.length;Q+=2)q=y(S,T,Q)<<le,this.words[fe]|=q&67108863,le>=18?(le-=18,fe+=1,this.words[fe]|=q>>>26):le+=8}this.strip()};function b(V,S,T,G){for(var Q=0,le=Math.min(V.length,T),fe=S;fe<le;fe++){var q=V.charCodeAt(fe)-48;Q*=G,q>=49?Q+=q-49+10:q>=17?Q+=q-17+10:Q+=q}return Q}h.prototype._parseBase=function(S,T,G){this.words=[0],this.length=1;for(var Q=0,le=1;le<=67108863;le*=T)Q++;Q--,le=le/T|0;for(var fe=S.length-G,q=fe%Q,se=Math.min(fe,fe-q)+G,D=0,oe=G;oe<se;oe+=Q)D=b(S,oe,oe+Q,T),this.imuln(le),this.words[0]+D<67108864?this.words[0]+=D:this._iaddn(D);if(q!==0){var Pe=1;for(D=b(S,oe,S.length,T),oe=0;oe<q;oe++)Pe*=T;this.imuln(Pe),this.words[0]+D<67108864?this.words[0]+=D:this._iaddn(D)}this.strip()},h.prototype.copy=function(S){S.words=new Array(this.length);for(var T=0;T<this.length;T++)S.words[T]=this.words[T];S.length=this.length,S.negative=this.negative,S.red=this.red},h.prototype.clone=function(){var S=new h(null);return this.copy(S),S},h.prototype._expand=function(S){for(;this.length<S;)this.words[this.length++]=0;return this},h.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},h.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},h.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var E=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],C=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];h.prototype.toString=function(S,T){S=S||10,T=T|0||1;var G;if(S===16||S==="hex"){G="";for(var Q=0,le=0,fe=0;fe<this.length;fe++){var q=this.words[fe],se=((q<<Q|le)&16777215).toString(16);le=q>>>24-Q&16777215,le!==0||fe!==this.length-1?G=E[6-se.length]+se+G:G=se+G,Q+=2,Q>=26&&(Q-=26,fe--)}for(le!==0&&(G=le.toString(16)+G);G.length%T!==0;)G="0"+G;return this.negative!==0&&(G="-"+G),G}if(S===(S|0)&&S>=2&&S<=36){var D=C[S],oe=A[S];G="";var Pe=this.clone();for(Pe.negative=0;!Pe.isZero();){var Re=Pe.modn(oe).toString(S);Pe=Pe.idivn(oe),Pe.isZero()?G=Re+G:G=E[D-Re.length]+Re+G}for(this.isZero()&&(G="0"+G);G.length%T!==0;)G="0"+G;return this.negative!==0&&(G="-"+G),G}a(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var S=this.words[0];return this.length===2?S+=this.words[1]*67108864:this.length===3&&this.words[2]===1?S+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-S:S},h.prototype.toJSON=function(){return this.toString(16)},h.prototype.toBuffer=function(S,T){return a(typeof g<"u"),this.toArrayLike(g,S,T)},h.prototype.toArray=function(S,T){return this.toArrayLike(Array,S,T)},h.prototype.toArrayLike=function(S,T,G){var Q=this.byteLength(),le=G||Math.max(1,Q);a(Q<=le,"byte array longer than desired length"),a(le>0,"Requested array length <= 0"),this.strip();var fe=T==="le",q=new S(le),se,D,oe=this.clone();if(fe){for(D=0;!oe.isZero();D++)se=oe.andln(255),oe.iushrn(8),q[D]=se;for(;D<le;D++)q[D]=0}else{for(D=0;D<le-Q;D++)q[D]=0;for(D=0;!oe.isZero();D++)se=oe.andln(255),oe.iushrn(8),q[le-D-1]=se}return q},Math.clz32?h.prototype._countBits=function(S){return 32-Math.clz32(S)}:h.prototype._countBits=function(S){var T=S,G=0;return T>=4096&&(G+=13,T>>>=13),T>=64&&(G+=7,T>>>=7),T>=8&&(G+=4,T>>>=4),T>=2&&(G+=2,T>>>=2),G+T},h.prototype._zeroBits=function(S){if(S===0)return 26;var T=S,G=0;return T&8191||(G+=13,T>>>=13),T&127||(G+=7,T>>>=7),T&15||(G+=4,T>>>=4),T&3||(G+=2,T>>>=2),T&1||G++,G},h.prototype.bitLength=function(){var S=this.words[this.length-1],T=this._countBits(S);return(this.length-1)*26+T};function B(V){for(var S=new Array(V.bitLength()),T=0;T<S.length;T++){var G=T/26|0,Q=T%26;S[T]=(V.words[G]&1<<Q)>>>Q}return S}h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var S=0,T=0;T<this.length;T++){var G=this._zeroBits(this.words[T]);if(S+=G,G!==26)break}return S},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(S){return this.negative!==0?this.abs().inotn(S).iaddn(1):this.clone()},h.prototype.fromTwos=function(S){return this.testn(S-1)?this.notn(S).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return this.negative!==0},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(S){for(;this.length<S.length;)this.words[this.length++]=0;for(var T=0;T<S.length;T++)this.words[T]=this.words[T]|S.words[T];return this.strip()},h.prototype.ior=function(S){return a((this.negative|S.negative)===0),this.iuor(S)},h.prototype.or=function(S){return this.length>S.length?this.clone().ior(S):S.clone().ior(this)},h.prototype.uor=function(S){return this.length>S.length?this.clone().iuor(S):S.clone().iuor(this)},h.prototype.iuand=function(S){var T;this.length>S.length?T=S:T=this;for(var G=0;G<T.length;G++)this.words[G]=this.words[G]&S.words[G];return this.length=T.length,this.strip()},h.prototype.iand=function(S){return a((this.negative|S.negative)===0),this.iuand(S)},h.prototype.and=function(S){return this.length>S.length?this.clone().iand(S):S.clone().iand(this)},h.prototype.uand=function(S){return this.length>S.length?this.clone().iuand(S):S.clone().iuand(this)},h.prototype.iuxor=function(S){var T,G;this.length>S.length?(T=this,G=S):(T=S,G=this);for(var Q=0;Q<G.length;Q++)this.words[Q]=T.words[Q]^G.words[Q];if(this!==T)for(;Q<T.length;Q++)this.words[Q]=T.words[Q];return this.length=T.length,this.strip()},h.prototype.ixor=function(S){return a((this.negative|S.negative)===0),this.iuxor(S)},h.prototype.xor=function(S){return this.length>S.length?this.clone().ixor(S):S.clone().ixor(this)},h.prototype.uxor=function(S){return this.length>S.length?this.clone().iuxor(S):S.clone().iuxor(this)},h.prototype.inotn=function(S){a(typeof S=="number"&&S>=0);var T=Math.ceil(S/26)|0,G=S%26;this._expand(T),G>0&&T--;for(var Q=0;Q<T;Q++)this.words[Q]=~this.words[Q]&67108863;return G>0&&(this.words[Q]=~this.words[Q]&67108863>>26-G),this.strip()},h.prototype.notn=function(S){return this.clone().inotn(S)},h.prototype.setn=function(S,T){a(typeof S=="number"&&S>=0);var G=S/26|0,Q=S%26;return this._expand(G+1),T?this.words[G]=this.words[G]|1<<Q:this.words[G]=this.words[G]&~(1<<Q),this.strip()},h.prototype.iadd=function(S){var T;if(this.negative!==0&&S.negative===0)return this.negative=0,T=this.isub(S),this.negative^=1,this._normSign();if(this.negative===0&&S.negative!==0)return S.negative=0,T=this.isub(S),S.negative=1,T._normSign();var G,Q;this.length>S.length?(G=this,Q=S):(G=S,Q=this);for(var le=0,fe=0;fe<Q.length;fe++)T=(G.words[fe]|0)+(Q.words[fe]|0)+le,this.words[fe]=T&67108863,le=T>>>26;for(;le!==0&&fe<G.length;fe++)T=(G.words[fe]|0)+le,this.words[fe]=T&67108863,le=T>>>26;if(this.length=G.length,le!==0)this.words[this.length]=le,this.length++;else if(G!==this)for(;fe<G.length;fe++)this.words[fe]=G.words[fe];return this},h.prototype.add=function(S){var T;return S.negative!==0&&this.negative===0?(S.negative=0,T=this.sub(S),S.negative^=1,T):S.negative===0&&this.negative!==0?(this.negative=0,T=S.sub(this),this.negative=1,T):this.length>S.length?this.clone().iadd(S):S.clone().iadd(this)},h.prototype.isub=function(S){if(S.negative!==0){S.negative=0;var T=this.iadd(S);return S.negative=1,T._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(S),this.negative=1,this._normSign();var G=this.cmp(S);if(G===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Q,le;G>0?(Q=this,le=S):(Q=S,le=this);for(var fe=0,q=0;q<le.length;q++)T=(Q.words[q]|0)-(le.words[q]|0)+fe,fe=T>>26,this.words[q]=T&67108863;for(;fe!==0&&q<Q.length;q++)T=(Q.words[q]|0)+fe,fe=T>>26,this.words[q]=T&67108863;if(fe===0&&q<Q.length&&Q!==this)for(;q<Q.length;q++)this.words[q]=Q.words[q];return this.length=Math.max(this.length,q),Q!==this&&(this.negative=1),this.strip()},h.prototype.sub=function(S){return this.clone().isub(S)};function M(V,S,T){T.negative=S.negative^V.negative;var G=V.length+S.length|0;T.length=G,G=G-1|0;var Q=V.words[0]|0,le=S.words[0]|0,fe=Q*le,q=fe&67108863,se=fe/67108864|0;T.words[0]=q;for(var D=1;D<G;D++){for(var oe=se>>>26,Pe=se&67108863,Re=Math.min(D,S.length-1),Oe=Math.max(0,D-V.length+1);Oe<=Re;Oe++){var Ne=D-Oe|0;Q=V.words[Ne]|0,le=S.words[Oe]|0,fe=Q*le+Pe,oe+=fe/67108864|0,Pe=fe&67108863}T.words[D]=Pe|0,se=oe|0}return se!==0?T.words[D]=se|0:T.length--,T.strip()}var N=function(S,T,G){var Q=S.words,le=T.words,fe=G.words,q=0,se,D,oe,Pe=Q[0]|0,Re=Pe&8191,Oe=Pe>>>13,Ne=Q[1]|0,Ue=Ne&8191,Ze=Ne>>>13,bt=Q[2]|0,it=bt&8191,ut=bt>>>13,ft=Q[3]|0,He=ft&8191,Mt=ft>>>13,wn=Q[4]|0,Ct=wn&8191,_e=wn>>>13,Y=Q[5]|0,X=Y&8191,we=Y>>>13,Me=Q[6]|0,qe=Me&8191,je=Me>>>13,We=Q[7]|0,pt=We&8191,Gt=We>>>13,rn=Q[8]|0,St=rn&8191,gn=rn>>>13,Xe=Q[9]|0,En=Xe&8191,yn=Xe>>>13,Yt=le[0]|0,Pt=Yt&8191,an=Yt>>>13,Dr=le[1]|0,Gn=Dr&8191,Cn=Dr>>>13,Jr=le[2]|0,Pn=Jr&8191,jt=Jr>>>13,zn=le[3]|0,Et=zn&8191,lt=zn>>>13,Wt=le[4]|0,Nn=Wt&8191,Lt=Wt>>>13,or=le[5]|0,Kt=or&8191,Ee=or>>>13,be=le[6]|0,pe=be&8191,he=be>>>13,ae=le[7]|0,de=ae&8191,me=ae>>>13,Be=le[8]|0,Fe=Be&8191,et=Be>>>13,dt=le[9]|0,Ye=dt&8191,Te=dt>>>13;G.negative=S.negative^T.negative,G.length=19,se=Math.imul(Re,Pt),D=Math.imul(Re,an),D=D+Math.imul(Oe,Pt)|0,oe=Math.imul(Oe,an);var xt=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(xt>>>26)|0,xt&=67108863,se=Math.imul(Ue,Pt),D=Math.imul(Ue,an),D=D+Math.imul(Ze,Pt)|0,oe=Math.imul(Ze,an),se=se+Math.imul(Re,Gn)|0,D=D+Math.imul(Re,Cn)|0,D=D+Math.imul(Oe,Gn)|0,oe=oe+Math.imul(Oe,Cn)|0;var cn=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(cn>>>26)|0,cn&=67108863,se=Math.imul(it,Pt),D=Math.imul(it,an),D=D+Math.imul(ut,Pt)|0,oe=Math.imul(ut,an),se=se+Math.imul(Ue,Gn)|0,D=D+Math.imul(Ue,Cn)|0,D=D+Math.imul(Ze,Gn)|0,oe=oe+Math.imul(Ze,Cn)|0,se=se+Math.imul(Re,Pn)|0,D=D+Math.imul(Re,jt)|0,D=D+Math.imul(Oe,Pn)|0,oe=oe+Math.imul(Oe,jt)|0;var zt=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(zt>>>26)|0,zt&=67108863,se=Math.imul(He,Pt),D=Math.imul(He,an),D=D+Math.imul(Mt,Pt)|0,oe=Math.imul(Mt,an),se=se+Math.imul(it,Gn)|0,D=D+Math.imul(it,Cn)|0,D=D+Math.imul(ut,Gn)|0,oe=oe+Math.imul(ut,Cn)|0,se=se+Math.imul(Ue,Pn)|0,D=D+Math.imul(Ue,jt)|0,D=D+Math.imul(Ze,Pn)|0,oe=oe+Math.imul(Ze,jt)|0,se=se+Math.imul(Re,Et)|0,D=D+Math.imul(Re,lt)|0,D=D+Math.imul(Oe,Et)|0,oe=oe+Math.imul(Oe,lt)|0;var on=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(on>>>26)|0,on&=67108863,se=Math.imul(Ct,Pt),D=Math.imul(Ct,an),D=D+Math.imul(_e,Pt)|0,oe=Math.imul(_e,an),se=se+Math.imul(He,Gn)|0,D=D+Math.imul(He,Cn)|0,D=D+Math.imul(Mt,Gn)|0,oe=oe+Math.imul(Mt,Cn)|0,se=se+Math.imul(it,Pn)|0,D=D+Math.imul(it,jt)|0,D=D+Math.imul(ut,Pn)|0,oe=oe+Math.imul(ut,jt)|0,se=se+Math.imul(Ue,Et)|0,D=D+Math.imul(Ue,lt)|0,D=D+Math.imul(Ze,Et)|0,oe=oe+Math.imul(Ze,lt)|0,se=se+Math.imul(Re,Nn)|0,D=D+Math.imul(Re,Lt)|0,D=D+Math.imul(Oe,Nn)|0,oe=oe+Math.imul(Oe,Lt)|0;var Dt=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,se=Math.imul(X,Pt),D=Math.imul(X,an),D=D+Math.imul(we,Pt)|0,oe=Math.imul(we,an),se=se+Math.imul(Ct,Gn)|0,D=D+Math.imul(Ct,Cn)|0,D=D+Math.imul(_e,Gn)|0,oe=oe+Math.imul(_e,Cn)|0,se=se+Math.imul(He,Pn)|0,D=D+Math.imul(He,jt)|0,D=D+Math.imul(Mt,Pn)|0,oe=oe+Math.imul(Mt,jt)|0,se=se+Math.imul(it,Et)|0,D=D+Math.imul(it,lt)|0,D=D+Math.imul(ut,Et)|0,oe=oe+Math.imul(ut,lt)|0,se=se+Math.imul(Ue,Nn)|0,D=D+Math.imul(Ue,Lt)|0,D=D+Math.imul(Ze,Nn)|0,oe=oe+Math.imul(Ze,Lt)|0,se=se+Math.imul(Re,Kt)|0,D=D+Math.imul(Re,Ee)|0,D=D+Math.imul(Oe,Kt)|0,oe=oe+Math.imul(Oe,Ee)|0;var Ft=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,se=Math.imul(qe,Pt),D=Math.imul(qe,an),D=D+Math.imul(je,Pt)|0,oe=Math.imul(je,an),se=se+Math.imul(X,Gn)|0,D=D+Math.imul(X,Cn)|0,D=D+Math.imul(we,Gn)|0,oe=oe+Math.imul(we,Cn)|0,se=se+Math.imul(Ct,Pn)|0,D=D+Math.imul(Ct,jt)|0,D=D+Math.imul(_e,Pn)|0,oe=oe+Math.imul(_e,jt)|0,se=se+Math.imul(He,Et)|0,D=D+Math.imul(He,lt)|0,D=D+Math.imul(Mt,Et)|0,oe=oe+Math.imul(Mt,lt)|0,se=se+Math.imul(it,Nn)|0,D=D+Math.imul(it,Lt)|0,D=D+Math.imul(ut,Nn)|0,oe=oe+Math.imul(ut,Lt)|0,se=se+Math.imul(Ue,Kt)|0,D=D+Math.imul(Ue,Ee)|0,D=D+Math.imul(Ze,Kt)|0,oe=oe+Math.imul(Ze,Ee)|0,se=se+Math.imul(Re,pe)|0,D=D+Math.imul(Re,he)|0,D=D+Math.imul(Oe,pe)|0,oe=oe+Math.imul(Oe,he)|0;var An=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(An>>>26)|0,An&=67108863,se=Math.imul(pt,Pt),D=Math.imul(pt,an),D=D+Math.imul(Gt,Pt)|0,oe=Math.imul(Gt,an),se=se+Math.imul(qe,Gn)|0,D=D+Math.imul(qe,Cn)|0,D=D+Math.imul(je,Gn)|0,oe=oe+Math.imul(je,Cn)|0,se=se+Math.imul(X,Pn)|0,D=D+Math.imul(X,jt)|0,D=D+Math.imul(we,Pn)|0,oe=oe+Math.imul(we,jt)|0,se=se+Math.imul(Ct,Et)|0,D=D+Math.imul(Ct,lt)|0,D=D+Math.imul(_e,Et)|0,oe=oe+Math.imul(_e,lt)|0,se=se+Math.imul(He,Nn)|0,D=D+Math.imul(He,Lt)|0,D=D+Math.imul(Mt,Nn)|0,oe=oe+Math.imul(Mt,Lt)|0,se=se+Math.imul(it,Kt)|0,D=D+Math.imul(it,Ee)|0,D=D+Math.imul(ut,Kt)|0,oe=oe+Math.imul(ut,Ee)|0,se=se+Math.imul(Ue,pe)|0,D=D+Math.imul(Ue,he)|0,D=D+Math.imul(Ze,pe)|0,oe=oe+Math.imul(Ze,he)|0,se=se+Math.imul(Re,de)|0,D=D+Math.imul(Re,me)|0,D=D+Math.imul(Oe,de)|0,oe=oe+Math.imul(Oe,me)|0;var Ln=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,se=Math.imul(St,Pt),D=Math.imul(St,an),D=D+Math.imul(gn,Pt)|0,oe=Math.imul(gn,an),se=se+Math.imul(pt,Gn)|0,D=D+Math.imul(pt,Cn)|0,D=D+Math.imul(Gt,Gn)|0,oe=oe+Math.imul(Gt,Cn)|0,se=se+Math.imul(qe,Pn)|0,D=D+Math.imul(qe,jt)|0,D=D+Math.imul(je,Pn)|0,oe=oe+Math.imul(je,jt)|0,se=se+Math.imul(X,Et)|0,D=D+Math.imul(X,lt)|0,D=D+Math.imul(we,Et)|0,oe=oe+Math.imul(we,lt)|0,se=se+Math.imul(Ct,Nn)|0,D=D+Math.imul(Ct,Lt)|0,D=D+Math.imul(_e,Nn)|0,oe=oe+Math.imul(_e,Lt)|0,se=se+Math.imul(He,Kt)|0,D=D+Math.imul(He,Ee)|0,D=D+Math.imul(Mt,Kt)|0,oe=oe+Math.imul(Mt,Ee)|0,se=se+Math.imul(it,pe)|0,D=D+Math.imul(it,he)|0,D=D+Math.imul(ut,pe)|0,oe=oe+Math.imul(ut,he)|0,se=se+Math.imul(Ue,de)|0,D=D+Math.imul(Ue,me)|0,D=D+Math.imul(Ze,de)|0,oe=oe+Math.imul(Ze,me)|0,se=se+Math.imul(Re,Fe)|0,D=D+Math.imul(Re,et)|0,D=D+Math.imul(Oe,Fe)|0,oe=oe+Math.imul(Oe,et)|0;var Un=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(Un>>>26)|0,Un&=67108863,se=Math.imul(En,Pt),D=Math.imul(En,an),D=D+Math.imul(yn,Pt)|0,oe=Math.imul(yn,an),se=se+Math.imul(St,Gn)|0,D=D+Math.imul(St,Cn)|0,D=D+Math.imul(gn,Gn)|0,oe=oe+Math.imul(gn,Cn)|0,se=se+Math.imul(pt,Pn)|0,D=D+Math.imul(pt,jt)|0,D=D+Math.imul(Gt,Pn)|0,oe=oe+Math.imul(Gt,jt)|0,se=se+Math.imul(qe,Et)|0,D=D+Math.imul(qe,lt)|0,D=D+Math.imul(je,Et)|0,oe=oe+Math.imul(je,lt)|0,se=se+Math.imul(X,Nn)|0,D=D+Math.imul(X,Lt)|0,D=D+Math.imul(we,Nn)|0,oe=oe+Math.imul(we,Lt)|0,se=se+Math.imul(Ct,Kt)|0,D=D+Math.imul(Ct,Ee)|0,D=D+Math.imul(_e,Kt)|0,oe=oe+Math.imul(_e,Ee)|0,se=se+Math.imul(He,pe)|0,D=D+Math.imul(He,he)|0,D=D+Math.imul(Mt,pe)|0,oe=oe+Math.imul(Mt,he)|0,se=se+Math.imul(it,de)|0,D=D+Math.imul(it,me)|0,D=D+Math.imul(ut,de)|0,oe=oe+Math.imul(ut,me)|0,se=se+Math.imul(Ue,Fe)|0,D=D+Math.imul(Ue,et)|0,D=D+Math.imul(Ze,Fe)|0,oe=oe+Math.imul(Ze,et)|0,se=se+Math.imul(Re,Ye)|0,D=D+Math.imul(Re,Te)|0,D=D+Math.imul(Oe,Ye)|0,oe=oe+Math.imul(Oe,Te)|0;var Zn=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,se=Math.imul(En,Gn),D=Math.imul(En,Cn),D=D+Math.imul(yn,Gn)|0,oe=Math.imul(yn,Cn),se=se+Math.imul(St,Pn)|0,D=D+Math.imul(St,jt)|0,D=D+Math.imul(gn,Pn)|0,oe=oe+Math.imul(gn,jt)|0,se=se+Math.imul(pt,Et)|0,D=D+Math.imul(pt,lt)|0,D=D+Math.imul(Gt,Et)|0,oe=oe+Math.imul(Gt,lt)|0,se=se+Math.imul(qe,Nn)|0,D=D+Math.imul(qe,Lt)|0,D=D+Math.imul(je,Nn)|0,oe=oe+Math.imul(je,Lt)|0,se=se+Math.imul(X,Kt)|0,D=D+Math.imul(X,Ee)|0,D=D+Math.imul(we,Kt)|0,oe=oe+Math.imul(we,Ee)|0,se=se+Math.imul(Ct,pe)|0,D=D+Math.imul(Ct,he)|0,D=D+Math.imul(_e,pe)|0,oe=oe+Math.imul(_e,he)|0,se=se+Math.imul(He,de)|0,D=D+Math.imul(He,me)|0,D=D+Math.imul(Mt,de)|0,oe=oe+Math.imul(Mt,me)|0,se=se+Math.imul(it,Fe)|0,D=D+Math.imul(it,et)|0,D=D+Math.imul(ut,Fe)|0,oe=oe+Math.imul(ut,et)|0,se=se+Math.imul(Ue,Ye)|0,D=D+Math.imul(Ue,Te)|0,D=D+Math.imul(Ze,Ye)|0,oe=oe+Math.imul(Ze,Te)|0;var yr=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(yr>>>26)|0,yr&=67108863,se=Math.imul(En,Pn),D=Math.imul(En,jt),D=D+Math.imul(yn,Pn)|0,oe=Math.imul(yn,jt),se=se+Math.imul(St,Et)|0,D=D+Math.imul(St,lt)|0,D=D+Math.imul(gn,Et)|0,oe=oe+Math.imul(gn,lt)|0,se=se+Math.imul(pt,Nn)|0,D=D+Math.imul(pt,Lt)|0,D=D+Math.imul(Gt,Nn)|0,oe=oe+Math.imul(Gt,Lt)|0,se=se+Math.imul(qe,Kt)|0,D=D+Math.imul(qe,Ee)|0,D=D+Math.imul(je,Kt)|0,oe=oe+Math.imul(je,Ee)|0,se=se+Math.imul(X,pe)|0,D=D+Math.imul(X,he)|0,D=D+Math.imul(we,pe)|0,oe=oe+Math.imul(we,he)|0,se=se+Math.imul(Ct,de)|0,D=D+Math.imul(Ct,me)|0,D=D+Math.imul(_e,de)|0,oe=oe+Math.imul(_e,me)|0,se=se+Math.imul(He,Fe)|0,D=D+Math.imul(He,et)|0,D=D+Math.imul(Mt,Fe)|0,oe=oe+Math.imul(Mt,et)|0,se=se+Math.imul(it,Ye)|0,D=D+Math.imul(it,Te)|0,D=D+Math.imul(ut,Ye)|0,oe=oe+Math.imul(ut,Te)|0;var _n=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(_n>>>26)|0,_n&=67108863,se=Math.imul(En,Et),D=Math.imul(En,lt),D=D+Math.imul(yn,Et)|0,oe=Math.imul(yn,lt),se=se+Math.imul(St,Nn)|0,D=D+Math.imul(St,Lt)|0,D=D+Math.imul(gn,Nn)|0,oe=oe+Math.imul(gn,Lt)|0,se=se+Math.imul(pt,Kt)|0,D=D+Math.imul(pt,Ee)|0,D=D+Math.imul(Gt,Kt)|0,oe=oe+Math.imul(Gt,Ee)|0,se=se+Math.imul(qe,pe)|0,D=D+Math.imul(qe,he)|0,D=D+Math.imul(je,pe)|0,oe=oe+Math.imul(je,he)|0,se=se+Math.imul(X,de)|0,D=D+Math.imul(X,me)|0,D=D+Math.imul(we,de)|0,oe=oe+Math.imul(we,me)|0,se=se+Math.imul(Ct,Fe)|0,D=D+Math.imul(Ct,et)|0,D=D+Math.imul(_e,Fe)|0,oe=oe+Math.imul(_e,et)|0,se=se+Math.imul(He,Ye)|0,D=D+Math.imul(He,Te)|0,D=D+Math.imul(Mt,Ye)|0,oe=oe+Math.imul(Mt,Te)|0;var Vn=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,se=Math.imul(En,Nn),D=Math.imul(En,Lt),D=D+Math.imul(yn,Nn)|0,oe=Math.imul(yn,Lt),se=se+Math.imul(St,Kt)|0,D=D+Math.imul(St,Ee)|0,D=D+Math.imul(gn,Kt)|0,oe=oe+Math.imul(gn,Ee)|0,se=se+Math.imul(pt,pe)|0,D=D+Math.imul(pt,he)|0,D=D+Math.imul(Gt,pe)|0,oe=oe+Math.imul(Gt,he)|0,se=se+Math.imul(qe,de)|0,D=D+Math.imul(qe,me)|0,D=D+Math.imul(je,de)|0,oe=oe+Math.imul(je,me)|0,se=se+Math.imul(X,Fe)|0,D=D+Math.imul(X,et)|0,D=D+Math.imul(we,Fe)|0,oe=oe+Math.imul(we,et)|0,se=se+Math.imul(Ct,Ye)|0,D=D+Math.imul(Ct,Te)|0,D=D+Math.imul(_e,Ye)|0,oe=oe+Math.imul(_e,Te)|0;var pn=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(pn>>>26)|0,pn&=67108863,se=Math.imul(En,Kt),D=Math.imul(En,Ee),D=D+Math.imul(yn,Kt)|0,oe=Math.imul(yn,Ee),se=se+Math.imul(St,pe)|0,D=D+Math.imul(St,he)|0,D=D+Math.imul(gn,pe)|0,oe=oe+Math.imul(gn,he)|0,se=se+Math.imul(pt,de)|0,D=D+Math.imul(pt,me)|0,D=D+Math.imul(Gt,de)|0,oe=oe+Math.imul(Gt,me)|0,se=se+Math.imul(qe,Fe)|0,D=D+Math.imul(qe,et)|0,D=D+Math.imul(je,Fe)|0,oe=oe+Math.imul(je,et)|0,se=se+Math.imul(X,Ye)|0,D=D+Math.imul(X,Te)|0,D=D+Math.imul(we,Ye)|0,oe=oe+Math.imul(we,Te)|0;var Qn=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,se=Math.imul(En,pe),D=Math.imul(En,he),D=D+Math.imul(yn,pe)|0,oe=Math.imul(yn,he),se=se+Math.imul(St,de)|0,D=D+Math.imul(St,me)|0,D=D+Math.imul(gn,de)|0,oe=oe+Math.imul(gn,me)|0,se=se+Math.imul(pt,Fe)|0,D=D+Math.imul(pt,et)|0,D=D+Math.imul(Gt,Fe)|0,oe=oe+Math.imul(Gt,et)|0,se=se+Math.imul(qe,Ye)|0,D=D+Math.imul(qe,Te)|0,D=D+Math.imul(je,Ye)|0,oe=oe+Math.imul(je,Te)|0;var Ut=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,se=Math.imul(En,de),D=Math.imul(En,me),D=D+Math.imul(yn,de)|0,oe=Math.imul(yn,me),se=se+Math.imul(St,Fe)|0,D=D+Math.imul(St,et)|0,D=D+Math.imul(gn,Fe)|0,oe=oe+Math.imul(gn,et)|0,se=se+Math.imul(pt,Ye)|0,D=D+Math.imul(pt,Te)|0,D=D+Math.imul(Gt,Ye)|0,oe=oe+Math.imul(Gt,Te)|0;var Kr=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,se=Math.imul(En,Fe),D=Math.imul(En,et),D=D+Math.imul(yn,Fe)|0,oe=Math.imul(yn,et),se=se+Math.imul(St,Ye)|0,D=D+Math.imul(St,Te)|0,D=D+Math.imul(gn,Ye)|0,oe=oe+Math.imul(gn,Te)|0;var $n=(q+se|0)+((D&8191)<<13)|0;q=(oe+(D>>>13)|0)+($n>>>26)|0,$n&=67108863,se=Math.imul(En,Ye),D=Math.imul(En,Te),D=D+Math.imul(yn,Ye)|0,oe=Math.imul(yn,Te);var nn=(q+se|0)+((D&8191)<<13)|0;return q=(oe+(D>>>13)|0)+(nn>>>26)|0,nn&=67108863,fe[0]=xt,fe[1]=cn,fe[2]=zt,fe[3]=on,fe[4]=Dt,fe[5]=Ft,fe[6]=An,fe[7]=Ln,fe[8]=Un,fe[9]=Zn,fe[10]=yr,fe[11]=_n,fe[12]=Vn,fe[13]=pn,fe[14]=Qn,fe[15]=Ut,fe[16]=Kr,fe[17]=$n,fe[18]=nn,q!==0&&(fe[19]=q,G.length++),G};Math.imul||(N=M);function Z(V,S,T){T.negative=S.negative^V.negative,T.length=V.length+S.length;for(var G=0,Q=0,le=0;le<T.length-1;le++){var fe=Q;Q=0;for(var q=G&67108863,se=Math.min(le,S.length-1),D=Math.max(0,le-V.length+1);D<=se;D++){var oe=le-D,Pe=V.words[oe]|0,Re=S.words[D]|0,Oe=Pe*Re,Ne=Oe&67108863;fe=fe+(Oe/67108864|0)|0,Ne=Ne+q|0,q=Ne&67108863,fe=fe+(Ne>>>26)|0,Q+=fe>>>26,fe&=67108863}T.words[le]=q,G=fe,fe=Q}return G!==0?T.words[le]=G:T.length--,T.strip()}function ee(V,S,T){var G=new F;return G.mulp(V,S,T)}h.prototype.mulTo=function(S,T){var G,Q=this.length+S.length;return this.length===10&&S.length===10?G=N(this,S,T):Q<63?G=M(this,S,T):Q<1024?G=Z(this,S,T):G=ee(this,S,T),G};function F(V,S){this.x=V,this.y=S}F.prototype.makeRBT=function(S){for(var T=new Array(S),G=h.prototype._countBits(S)-1,Q=0;Q<S;Q++)T[Q]=this.revBin(Q,G,S);return T},F.prototype.revBin=function(S,T,G){if(S===0||S===G-1)return S;for(var Q=0,le=0;le<T;le++)Q|=(S&1)<<T-le-1,S>>=1;return Q},F.prototype.permute=function(S,T,G,Q,le,fe){for(var q=0;q<fe;q++)Q[q]=T[S[q]],le[q]=G[S[q]]},F.prototype.transform=function(S,T,G,Q,le,fe){this.permute(fe,S,T,G,Q,le);for(var q=1;q<le;q<<=1)for(var se=q<<1,D=Math.cos(2*Math.PI/se),oe=Math.sin(2*Math.PI/se),Pe=0;Pe<le;Pe+=se)for(var Re=D,Oe=oe,Ne=0;Ne<q;Ne++){var Ue=G[Pe+Ne],Ze=Q[Pe+Ne],bt=G[Pe+Ne+q],it=Q[Pe+Ne+q],ut=Re*bt-Oe*it;it=Re*it+Oe*bt,bt=ut,G[Pe+Ne]=Ue+bt,Q[Pe+Ne]=Ze+it,G[Pe+Ne+q]=Ue-bt,Q[Pe+Ne+q]=Ze-it,Ne!==se&&(ut=D*Re-oe*Oe,Oe=D*Oe+oe*Re,Re=ut)}},F.prototype.guessLen13b=function(S,T){var G=Math.max(T,S)|1,Q=G&1,le=0;for(G=G/2|0;G;G=G>>>1)le++;return 1<<le+1+Q},F.prototype.conjugate=function(S,T,G){if(!(G<=1))for(var Q=0;Q<G/2;Q++){var le=S[Q];S[Q]=S[G-Q-1],S[G-Q-1]=le,le=T[Q],T[Q]=-T[G-Q-1],T[G-Q-1]=-le}},F.prototype.normalize13b=function(S,T){for(var G=0,Q=0;Q<T/2;Q++){var le=Math.round(S[2*Q+1]/T)*8192+Math.round(S[2*Q]/T)+G;S[Q]=le&67108863,le<67108864?G=0:G=le/67108864|0}return S},F.prototype.convert13b=function(S,T,G,Q){for(var le=0,fe=0;fe<T;fe++)le=le+(S[fe]|0),G[2*fe]=le&8191,le=le>>>13,G[2*fe+1]=le&8191,le=le>>>13;for(fe=2*T;fe<Q;++fe)G[fe]=0;a(le===0),a((le&-8192)===0)},F.prototype.stub=function(S){for(var T=new Array(S),G=0;G<S;G++)T[G]=0;return T},F.prototype.mulp=function(S,T,G){var Q=2*this.guessLen13b(S.length,T.length),le=this.makeRBT(Q),fe=this.stub(Q),q=new Array(Q),se=new Array(Q),D=new Array(Q),oe=new Array(Q),Pe=new Array(Q),Re=new Array(Q),Oe=G.words;Oe.length=Q,this.convert13b(S.words,S.length,q,Q),this.convert13b(T.words,T.length,oe,Q),this.transform(q,fe,se,D,Q,le),this.transform(oe,fe,Pe,Re,Q,le);for(var Ne=0;Ne<Q;Ne++){var Ue=se[Ne]*Pe[Ne]-D[Ne]*Re[Ne];D[Ne]=se[Ne]*Re[Ne]+D[Ne]*Pe[Ne],se[Ne]=Ue}return this.conjugate(se,D,Q),this.transform(se,D,Oe,fe,Q,le),this.conjugate(Oe,fe,Q),this.normalize13b(Oe,Q),G.negative=S.negative^T.negative,G.length=S.length+T.length,G.strip()},h.prototype.mul=function(S){var T=new h(null);return T.words=new Array(this.length+S.length),this.mulTo(S,T)},h.prototype.mulf=function(S){var T=new h(null);return T.words=new Array(this.length+S.length),ee(this,S,T)},h.prototype.imul=function(S){return this.clone().mulTo(S,this)},h.prototype.imuln=function(S){a(typeof S=="number"),a(S<67108864);for(var T=0,G=0;G<this.length;G++){var Q=(this.words[G]|0)*S,le=(Q&67108863)+(T&67108863);T>>=26,T+=Q/67108864|0,T+=le>>>26,this.words[G]=le&67108863}return T!==0&&(this.words[G]=T,this.length++),this},h.prototype.muln=function(S){return this.clone().imuln(S)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(S){var T=B(S);if(T.length===0)return new h(1);for(var G=this,Q=0;Q<T.length&&T[Q]===0;Q++,G=G.sqr());if(++Q<T.length)for(var le=G.sqr();Q<T.length;Q++,le=le.sqr())T[Q]!==0&&(G=G.mul(le));return G},h.prototype.iushln=function(S){a(typeof S=="number"&&S>=0);var T=S%26,G=(S-T)/26,Q=67108863>>>26-T<<26-T,le;if(T!==0){var fe=0;for(le=0;le<this.length;le++){var q=this.words[le]&Q,se=(this.words[le]|0)-q<<T;this.words[le]=se|fe,fe=q>>>26-T}fe&&(this.words[le]=fe,this.length++)}if(G!==0){for(le=this.length-1;le>=0;le--)this.words[le+G]=this.words[le];for(le=0;le<G;le++)this.words[le]=0;this.length+=G}return this.strip()},h.prototype.ishln=function(S){return a(this.negative===0),this.iushln(S)},h.prototype.iushrn=function(S,T,G){a(typeof S=="number"&&S>=0);var Q;T?Q=(T-T%26)/26:Q=0;var le=S%26,fe=Math.min((S-le)/26,this.length),q=67108863^67108863>>>le<<le,se=G;if(Q-=fe,Q=Math.max(0,Q),se){for(var D=0;D<fe;D++)se.words[D]=this.words[D];se.length=fe}if(fe!==0)if(this.length>fe)for(this.length-=fe,D=0;D<this.length;D++)this.words[D]=this.words[D+fe];else this.words[0]=0,this.length=1;var oe=0;for(D=this.length-1;D>=0&&(oe!==0||D>=Q);D--){var Pe=this.words[D]|0;this.words[D]=oe<<26-le|Pe>>>le,oe=Pe&q}return se&&oe!==0&&(se.words[se.length++]=oe),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},h.prototype.ishrn=function(S,T,G){return a(this.negative===0),this.iushrn(S,T,G)},h.prototype.shln=function(S){return this.clone().ishln(S)},h.prototype.ushln=function(S){return this.clone().iushln(S)},h.prototype.shrn=function(S){return this.clone().ishrn(S)},h.prototype.ushrn=function(S){return this.clone().iushrn(S)},h.prototype.testn=function(S){a(typeof S=="number"&&S>=0);var T=S%26,G=(S-T)/26,Q=1<<T;if(this.length<=G)return!1;var le=this.words[G];return!!(le&Q)},h.prototype.imaskn=function(S){a(typeof S=="number"&&S>=0);var T=S%26,G=(S-T)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=G)return this;if(T!==0&&G++,this.length=Math.min(G,this.length),T!==0){var Q=67108863^67108863>>>T<<T;this.words[this.length-1]&=Q}return this.strip()},h.prototype.maskn=function(S){return this.clone().imaskn(S)},h.prototype.iaddn=function(S){return a(typeof S=="number"),a(S<67108864),S<0?this.isubn(-S):this.negative!==0?this.length===1&&(this.words[0]|0)<S?(this.words[0]=S-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(S),this.negative=1,this):this._iaddn(S)},h.prototype._iaddn=function(S){this.words[0]+=S;for(var T=0;T<this.length&&this.words[T]>=67108864;T++)this.words[T]-=67108864,T===this.length-1?this.words[T+1]=1:this.words[T+1]++;return this.length=Math.max(this.length,T+1),this},h.prototype.isubn=function(S){if(a(typeof S=="number"),a(S<67108864),S<0)return this.iaddn(-S);if(this.negative!==0)return this.negative=0,this.iaddn(S),this.negative=1,this;if(this.words[0]-=S,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var T=0;T<this.length&&this.words[T]<0;T++)this.words[T]+=67108864,this.words[T+1]-=1;return this.strip()},h.prototype.addn=function(S){return this.clone().iaddn(S)},h.prototype.subn=function(S){return this.clone().isubn(S)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype._ishlnsubmul=function(S,T,G){var Q=S.length+G,le;this._expand(Q);var fe,q=0;for(le=0;le<S.length;le++){fe=(this.words[le+G]|0)+q;var se=(S.words[le]|0)*T;fe-=se&67108863,q=(fe>>26)-(se/67108864|0),this.words[le+G]=fe&67108863}for(;le<this.length-G;le++)fe=(this.words[le+G]|0)+q,q=fe>>26,this.words[le+G]=fe&67108863;if(q===0)return this.strip();for(a(q===-1),q=0,le=0;le<this.length;le++)fe=-(this.words[le]|0)+q,q=fe>>26,this.words[le]=fe&67108863;return this.negative=1,this.strip()},h.prototype._wordDiv=function(S,T){var G=this.length-S.length,Q=this.clone(),le=S,fe=le.words[le.length-1]|0,q=this._countBits(fe);G=26-q,G!==0&&(le=le.ushln(G),Q.iushln(G),fe=le.words[le.length-1]|0);var se=Q.length-le.length,D;if(T!=="mod"){D=new h(null),D.length=se+1,D.words=new Array(D.length);for(var oe=0;oe<D.length;oe++)D.words[oe]=0}var Pe=Q.clone()._ishlnsubmul(le,1,se);Pe.negative===0&&(Q=Pe,D&&(D.words[se]=1));for(var Re=se-1;Re>=0;Re--){var Oe=(Q.words[le.length+Re]|0)*67108864+(Q.words[le.length+Re-1]|0);for(Oe=Math.min(Oe/fe|0,67108863),Q._ishlnsubmul(le,Oe,Re);Q.negative!==0;)Oe--,Q.negative=0,Q._ishlnsubmul(le,1,Re),Q.isZero()||(Q.negative^=1);D&&(D.words[Re]=Oe)}return D&&D.strip(),Q.strip(),T!=="div"&&G!==0&&Q.iushrn(G),{div:D||null,mod:Q}},h.prototype.divmod=function(S,T,G){if(a(!S.isZero()),this.isZero())return{div:new h(0),mod:new h(0)};var Q,le,fe;return this.negative!==0&&S.negative===0?(fe=this.neg().divmod(S,T),T!=="mod"&&(Q=fe.div.neg()),T!=="div"&&(le=fe.mod.neg(),G&&le.negative!==0&&le.iadd(S)),{div:Q,mod:le}):this.negative===0&&S.negative!==0?(fe=this.divmod(S.neg(),T),T!=="mod"&&(Q=fe.div.neg()),{div:Q,mod:fe.mod}):this.negative&S.negative?(fe=this.neg().divmod(S.neg(),T),T!=="div"&&(le=fe.mod.neg(),G&&le.negative!==0&&le.isub(S)),{div:fe.div,mod:le}):S.length>this.length||this.cmp(S)<0?{div:new h(0),mod:this}:S.length===1?T==="div"?{div:this.divn(S.words[0]),mod:null}:T==="mod"?{div:null,mod:new h(this.modn(S.words[0]))}:{div:this.divn(S.words[0]),mod:new h(this.modn(S.words[0]))}:this._wordDiv(S,T)},h.prototype.div=function(S){return this.divmod(S,"div",!1).div},h.prototype.mod=function(S){return this.divmod(S,"mod",!1).mod},h.prototype.umod=function(S){return this.divmod(S,"mod",!0).mod},h.prototype.divRound=function(S){var T=this.divmod(S);if(T.mod.isZero())return T.div;var G=T.div.negative!==0?T.mod.isub(S):T.mod,Q=S.ushrn(1),le=S.andln(1),fe=G.cmp(Q);return fe<0||le===1&&fe===0?T.div:T.div.negative!==0?T.div.isubn(1):T.div.iaddn(1)},h.prototype.modn=function(S){a(S<=67108863);for(var T=(1<<26)%S,G=0,Q=this.length-1;Q>=0;Q--)G=(T*G+(this.words[Q]|0))%S;return G},h.prototype.idivn=function(S){a(S<=67108863);for(var T=0,G=this.length-1;G>=0;G--){var Q=(this.words[G]|0)+T*67108864;this.words[G]=Q/S|0,T=Q%S}return this.strip()},h.prototype.divn=function(S){return this.clone().idivn(S)},h.prototype.egcd=function(S){a(S.negative===0),a(!S.isZero());var T=this,G=S.clone();T.negative!==0?T=T.umod(S):T=T.clone();for(var Q=new h(1),le=new h(0),fe=new h(0),q=new h(1),se=0;T.isEven()&&G.isEven();)T.iushrn(1),G.iushrn(1),++se;for(var D=G.clone(),oe=T.clone();!T.isZero();){for(var Pe=0,Re=1;!(T.words[0]&Re)&&Pe<26;++Pe,Re<<=1);if(Pe>0)for(T.iushrn(Pe);Pe-- >0;)(Q.isOdd()||le.isOdd())&&(Q.iadd(D),le.isub(oe)),Q.iushrn(1),le.iushrn(1);for(var Oe=0,Ne=1;!(G.words[0]&Ne)&&Oe<26;++Oe,Ne<<=1);if(Oe>0)for(G.iushrn(Oe);Oe-- >0;)(fe.isOdd()||q.isOdd())&&(fe.iadd(D),q.isub(oe)),fe.iushrn(1),q.iushrn(1);T.cmp(G)>=0?(T.isub(G),Q.isub(fe),le.isub(q)):(G.isub(T),fe.isub(Q),q.isub(le))}return{a:fe,b:q,gcd:G.iushln(se)}},h.prototype._invmp=function(S){a(S.negative===0),a(!S.isZero());var T=this,G=S.clone();T.negative!==0?T=T.umod(S):T=T.clone();for(var Q=new h(1),le=new h(0),fe=G.clone();T.cmpn(1)>0&&G.cmpn(1)>0;){for(var q=0,se=1;!(T.words[0]&se)&&q<26;++q,se<<=1);if(q>0)for(T.iushrn(q);q-- >0;)Q.isOdd()&&Q.iadd(fe),Q.iushrn(1);for(var D=0,oe=1;!(G.words[0]&oe)&&D<26;++D,oe<<=1);if(D>0)for(G.iushrn(D);D-- >0;)le.isOdd()&&le.iadd(fe),le.iushrn(1);T.cmp(G)>=0?(T.isub(G),Q.isub(le)):(G.isub(T),le.isub(Q))}var Pe;return T.cmpn(1)===0?Pe=Q:Pe=le,Pe.cmpn(0)<0&&Pe.iadd(S),Pe},h.prototype.gcd=function(S){if(this.isZero())return S.abs();if(S.isZero())return this.abs();var T=this.clone(),G=S.clone();T.negative=0,G.negative=0;for(var Q=0;T.isEven()&&G.isEven();Q++)T.iushrn(1),G.iushrn(1);do{for(;T.isEven();)T.iushrn(1);for(;G.isEven();)G.iushrn(1);var le=T.cmp(G);if(le<0){var fe=T;T=G,G=fe}else if(le===0||G.cmpn(1)===0)break;T.isub(G)}while(!0);return G.iushln(Q)},h.prototype.invm=function(S){return this.egcd(S).a.umod(S)},h.prototype.isEven=function(){return(this.words[0]&1)===0},h.prototype.isOdd=function(){return(this.words[0]&1)===1},h.prototype.andln=function(S){return this.words[0]&S},h.prototype.bincn=function(S){a(typeof S=="number");var T=S%26,G=(S-T)/26,Q=1<<T;if(this.length<=G)return this._expand(G+1),this.words[G]|=Q,this;for(var le=Q,fe=G;le!==0&&fe<this.length;fe++){var q=this.words[fe]|0;q+=le,le=q>>>26,q&=67108863,this.words[fe]=q}return le!==0&&(this.words[fe]=le,this.length++),this},h.prototype.isZero=function(){return this.length===1&&this.words[0]===0},h.prototype.cmpn=function(S){var T=S<0;if(this.negative!==0&&!T)return-1;if(this.negative===0&&T)return 1;this.strip();var G;if(this.length>1)G=1;else{T&&(S=-S),a(S<=67108863,"Number is too big");var Q=this.words[0]|0;G=Q===S?0:Q<S?-1:1}return this.negative!==0?-G|0:G},h.prototype.cmp=function(S){if(this.negative!==0&&S.negative===0)return-1;if(this.negative===0&&S.negative!==0)return 1;var T=this.ucmp(S);return this.negative!==0?-T|0:T},h.prototype.ucmp=function(S){if(this.length>S.length)return 1;if(this.length<S.length)return-1;for(var T=0,G=this.length-1;G>=0;G--){var Q=this.words[G]|0,le=S.words[G]|0;if(Q!==le){Q<le?T=-1:Q>le&&(T=1);break}}return T},h.prototype.gtn=function(S){return this.cmpn(S)===1},h.prototype.gt=function(S){return this.cmp(S)===1},h.prototype.gten=function(S){return this.cmpn(S)>=0},h.prototype.gte=function(S){return this.cmp(S)>=0},h.prototype.ltn=function(S){return this.cmpn(S)===-1},h.prototype.lt=function(S){return this.cmp(S)===-1},h.prototype.lten=function(S){return this.cmpn(S)<=0},h.prototype.lte=function(S){return this.cmp(S)<=0},h.prototype.eqn=function(S){return this.cmpn(S)===0},h.prototype.eq=function(S){return this.cmp(S)===0},h.red=function(S){return new re(S)},h.prototype.toRed=function(S){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),S.convertTo(this)._forceRed(S)},h.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype._forceRed=function(S){return this.red=S,this},h.prototype.forceRed=function(S){return a(!this.red,"Already a number in reduction context"),this._forceRed(S)},h.prototype.redAdd=function(S){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,S)},h.prototype.redIAdd=function(S){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,S)},h.prototype.redSub=function(S){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,S)},h.prototype.redISub=function(S){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,S)},h.prototype.redShl=function(S){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,S)},h.prototype.redMul=function(S){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.mul(this,S)},h.prototype.redIMul=function(S){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.imul(this,S)},h.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},h.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},h.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},h.prototype.redPow=function(S){return a(this.red&&!S.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,S)};var O={k256:null,p224:null,p192:null,p25519:null};function k(V,S){this.name=V,this.p=new h(S,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}k.prototype._tmp=function(){var S=new h(null);return S.words=new Array(Math.ceil(this.n/13)),S},k.prototype.ireduce=function(S){var T=S,G;do this.split(T,this.tmp),T=this.imulK(T),T=T.iadd(this.tmp),G=T.bitLength();while(G>this.n);var Q=G<this.n?-1:T.ucmp(this.p);return Q===0?(T.words[0]=0,T.length=1):Q>0?T.isub(this.p):T.strip!==void 0?T.strip():T._strip(),T},k.prototype.split=function(S,T){S.iushrn(this.n,0,T)},k.prototype.imulK=function(S){return S.imul(this.k)};function H(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}l(H,k),H.prototype.split=function(S,T){for(var G=4194303,Q=Math.min(S.length,9),le=0;le<Q;le++)T.words[le]=S.words[le];if(T.length=Q,S.length<=9){S.words[0]=0,S.length=1;return}var fe=S.words[9];for(T.words[T.length++]=fe&G,le=10;le<S.length;le++){var q=S.words[le]|0;S.words[le-10]=(q&G)<<4|fe>>>22,fe=q}fe>>>=22,S.words[le-10]=fe,fe===0&&S.length>10?S.length-=10:S.length-=9},H.prototype.imulK=function(S){S.words[S.length]=0,S.words[S.length+1]=0,S.length+=2;for(var T=0,G=0;G<S.length;G++){var Q=S.words[G]|0;T+=Q*977,S.words[G]=T&67108863,T=Q*64+(T/67108864|0)}return S.words[S.length-1]===0&&(S.length--,S.words[S.length-1]===0&&S.length--),S};function ce(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}l(ce,k);function U(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}l(U,k);function te(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}l(te,k),te.prototype.imulK=function(S){for(var T=0,G=0;G<S.length;G++){var Q=(S.words[G]|0)*19+T,le=Q&67108863;Q>>>=26,S.words[G]=le,T=Q}return T!==0&&(S.words[S.length++]=T),S},h._prime=function(S){if(O[S])return O[S];var T;if(S==="k256")T=new H;else if(S==="p224")T=new ce;else if(S==="p192")T=new U;else if(S==="p25519")T=new te;else throw new Error("Unknown prime "+S);return O[S]=T,T};function re(V){if(typeof V=="string"){var S=h._prime(V);this.m=S.p,this.prime=S}else a(V.gtn(1),"modulus must be greater than 1"),this.m=V,this.prime=null}re.prototype._verify1=function(S){a(S.negative===0,"red works only with positives"),a(S.red,"red works only with red numbers")},re.prototype._verify2=function(S,T){a((S.negative|T.negative)===0,"red works only with positives"),a(S.red&&S.red===T.red,"red works only with red numbers")},re.prototype.imod=function(S){return this.prime?this.prime.ireduce(S)._forceRed(this):S.umod(this.m)._forceRed(this)},re.prototype.neg=function(S){return S.isZero()?S.clone():this.m.sub(S)._forceRed(this)},re.prototype.add=function(S,T){this._verify2(S,T);var G=S.add(T);return G.cmp(this.m)>=0&&G.isub(this.m),G._forceRed(this)},re.prototype.iadd=function(S,T){this._verify2(S,T);var G=S.iadd(T);return G.cmp(this.m)>=0&&G.isub(this.m),G},re.prototype.sub=function(S,T){this._verify2(S,T);var G=S.sub(T);return G.cmpn(0)<0&&G.iadd(this.m),G._forceRed(this)},re.prototype.isub=function(S,T){this._verify2(S,T);var G=S.isub(T);return G.cmpn(0)<0&&G.iadd(this.m),G},re.prototype.shl=function(S,T){return this._verify1(S),this.imod(S.ushln(T))},re.prototype.imul=function(S,T){return this._verify2(S,T),this.imod(S.imul(T))},re.prototype.mul=function(S,T){return this._verify2(S,T),this.imod(S.mul(T))},re.prototype.isqr=function(S){return this.imul(S,S.clone())},re.prototype.sqr=function(S){return this.mul(S,S)},re.prototype.sqrt=function(S){if(S.isZero())return S.clone();var T=this.m.andln(3);if(a(T%2===1),T===3){var G=this.m.add(new h(1)).iushrn(2);return this.pow(S,G)}for(var Q=this.m.subn(1),le=0;!Q.isZero()&&Q.andln(1)===0;)le++,Q.iushrn(1);a(!Q.isZero());var fe=new h(1).toRed(this),q=fe.redNeg(),se=this.m.subn(1).iushrn(1),D=this.m.bitLength();for(D=new h(2*D*D).toRed(this);this.pow(D,se).cmp(q)!==0;)D.redIAdd(q);for(var oe=this.pow(D,Q),Pe=this.pow(S,Q.addn(1).iushrn(1)),Re=this.pow(S,Q),Oe=le;Re.cmp(fe)!==0;){for(var Ne=Re,Ue=0;Ne.cmp(fe)!==0;Ue++)Ne=Ne.redSqr();a(Ue<Oe);var Ze=this.pow(oe,new h(1).iushln(Oe-Ue-1));Pe=Pe.redMul(Ze),oe=Ze.redSqr(),Re=Re.redMul(oe),Oe=Ue}return Pe},re.prototype.invm=function(S){var T=S._invmp(this.m);return T.negative!==0?(T.negative=0,this.imod(T).redNeg()):this.imod(T)},re.prototype.pow=function(S,T){if(T.isZero())return new h(1).toRed(this);if(T.cmpn(1)===0)return S.clone();var G=4,Q=new Array(1<<G);Q[0]=new h(1).toRed(this),Q[1]=S;for(var le=2;le<Q.length;le++)Q[le]=this.mul(Q[le-1],S);var fe=Q[0],q=0,se=0,D=T.bitLength()%26;for(D===0&&(D=26),le=T.length-1;le>=0;le--){for(var oe=T.words[le],Pe=D-1;Pe>=0;Pe--){var Re=oe>>Pe&1;if(fe!==Q[0]&&(fe=this.sqr(fe)),Re===0&&q===0){se=0;continue}q<<=1,q|=Re,se++,!(se!==G&&(le!==0||Pe!==0))&&(fe=this.mul(fe,Q[q]),se=0,q=0)}D=26}return fe},re.prototype.convertTo=function(S){var T=S.umod(this.m);return T===S?T.clone():T},re.prototype.convertFrom=function(S){var T=S.clone();return T.red=null,T},h.mont=function(S){return new ue(S)};function ue(V){re.call(this,V),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}l(ue,re),ue.prototype.convertTo=function(S){return this.imod(S.ushln(this.shift))},ue.prototype.convertFrom=function(S){var T=this.imod(S.mul(this.rinv));return T.red=null,T},ue.prototype.imul=function(S,T){if(S.isZero()||T.isZero())return S.words[0]=0,S.length=1,S;var G=S.imul(T),Q=G.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),le=G.isub(Q).iushrn(this.shift),fe=le;return le.cmp(this.m)>=0?fe=le.isub(this.m):le.cmpn(0)<0&&(fe=le.iadd(this.m)),fe._forceRed(this)},ue.prototype.mul=function(S,T){if(S.isZero()||T.isZero())return new h(0)._forceRed(this);var G=S.mul(T),Q=G.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),le=G.isub(Q).iushrn(this.shift),fe=le;return le.cmp(this.m)>=0?fe=le.isub(this.m):le.cmpn(0)<0&&(fe=le.iadd(this.m)),fe._forceRed(this)},ue.prototype.invm=function(S){var T=this.imod(S._invmp(this.m).mul(this.r2));return T._forceRed(this)}})(n,commonjsGlobal)})(bn);var api={},encoders={},inherits_browserExports={},inherits_browser={get exports(){return inherits_browserExports},set exports(n){inherits_browserExports=n}};typeof Object.create=="function"?inherits_browser.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,t){if(t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}};var buffer$2={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code.length;i$1<len;++i$1)lookup[i$1]=code[i$1],revLookup[code.charCodeAt(i$1)]=i$1;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var a=t===e?0:4-t%4;return[t,a]}function byteLength(n){var e=getLens(n),t=e[0],a=e[1];return(t+a)*3/4-a}function _byteLength(n,e,t){return(e+t)*3/4-t}function toByteArray(n){var e,t=getLens(n),a=t[0],l=t[1],h=new Arr(_byteLength(n,a,l)),g=0,p=l>0?a-4:a,y;for(y=0;y<p;y+=4)e=revLookup[n.charCodeAt(y)]<<18|revLookup[n.charCodeAt(y+1)]<<12|revLookup[n.charCodeAt(y+2)]<<6|revLookup[n.charCodeAt(y+3)],h[g++]=e>>16&255,h[g++]=e>>8&255,h[g++]=e&255;return l===2&&(e=revLookup[n.charCodeAt(y)]<<2|revLookup[n.charCodeAt(y+1)]>>4,h[g++]=e&255),l===1&&(e=revLookup[n.charCodeAt(y)]<<10|revLookup[n.charCodeAt(y+1)]<<4|revLookup[n.charCodeAt(y+2)]>>2,h[g++]=e>>8&255,h[g++]=e&255),h}function tripletToBase64(n){return lookup[n>>18&63]+lookup[n>>12&63]+lookup[n>>6&63]+lookup[n&63]}function encodeChunk(n,e,t){for(var a,l=[],h=e;h<t;h+=3)a=(n[h]<<16&16711680)+(n[h+1]<<8&65280)+(n[h+2]&255),l.push(tripletToBase64(a));return l.join("")}function fromByteArray(n){for(var e,t=n.length,a=t%3,l=[],h=16383,g=0,p=t-a;g<p;g+=h)l.push(encodeChunk(n,g,g+h>p?p:g+h));return a===1?(e=n[t-1],l.push(lookup[e>>2]+lookup[e<<4&63]+"==")):a===2&&(e=(n[t-2]<<8)+n[t-1],l.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),l.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(n,e,t,a,l){var h,g,p=l*8-a-1,y=(1<<p)-1,b=y>>1,E=-7,C=t?l-1:0,A=t?-1:1,B=n[e+C];for(C+=A,h=B&(1<<-E)-1,B>>=-E,E+=p;E>0;h=h*256+n[e+C],C+=A,E-=8);for(g=h&(1<<-E)-1,h>>=-E,E+=a;E>0;g=g*256+n[e+C],C+=A,E-=8);if(h===0)h=1-b;else{if(h===y)return g?NaN:(B?-1:1)*(1/0);g=g+Math.pow(2,a),h=h-b}return(B?-1:1)*g*Math.pow(2,h-a)};ieee754.write=function(n,e,t,a,l,h){var g,p,y,b=h*8-l-1,E=(1<<b)-1,C=E>>1,A=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=a?0:h-1,M=a?1:-1,N=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(p=isNaN(e)?1:0,g=E):(g=Math.floor(Math.log(e)/Math.LN2),e*(y=Math.pow(2,-g))<1&&(g--,y*=2),g+C>=1?e+=A/y:e+=A*Math.pow(2,1-C),e*y>=2&&(g++,y/=2),g+C>=E?(p=0,g=E):g+C>=1?(p=(e*y-1)*Math.pow(2,l),g=g+C):(p=e*Math.pow(2,C-1)*Math.pow(2,l),g=0));l>=8;n[t+B]=p&255,B+=M,p/=256,l-=8);for(g=g<<l|p,b+=l;b>0;n[t+B]=g&255,B+=M,g/=256,b-=8);n[t+B-M]|=N*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){var e=base64Js,t=ieee754,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=p,n.SlowBuffer=F,n.INSPECT_MAX_BYTES=50;var l=2147483647;n.kMaxLength=l,p.TYPED_ARRAY_SUPPORT=h(),!p.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function h(){try{var _e=new Uint8Array(1),Y={foo:function(){return 42}};return Object.setPrototypeOf(Y,Uint8Array.prototype),Object.setPrototypeOf(_e,Y),_e.foo()===42}catch{return!1}}Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}});function g(_e){if(_e>l)throw new RangeError('The value "'+_e+'" is invalid for option "size"');var Y=new Uint8Array(_e);return Object.setPrototypeOf(Y,p.prototype),Y}function p(_e,Y,X){if(typeof _e=="number"){if(typeof Y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(_e)}return y(_e,Y,X)}p.poolSize=8192;function y(_e,Y,X){if(typeof _e=="string")return A(_e,Y);if(ArrayBuffer.isView(_e))return M(_e);if(_e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _e);if(Mt(_e,ArrayBuffer)||_e&&Mt(_e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Mt(_e,SharedArrayBuffer)||_e&&Mt(_e.buffer,SharedArrayBuffer)))return N(_e,Y,X);if(typeof _e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var we=_e.valueOf&&_e.valueOf();if(we!=null&&we!==_e)return p.from(we,Y,X);var Me=Z(_e);if(Me)return Me;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof _e[Symbol.toPrimitive]=="function")return p.from(_e[Symbol.toPrimitive]("string"),Y,X);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _e)}p.from=function(_e,Y,X){return y(_e,Y,X)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array);function b(_e){if(typeof _e!="number")throw new TypeError('"size" argument must be of type number');if(_e<0)throw new RangeError('The value "'+_e+'" is invalid for option "size"')}function E(_e,Y,X){return b(_e),_e<=0?g(_e):Y!==void 0?typeof X=="string"?g(_e).fill(Y,X):g(_e).fill(Y):g(_e)}p.alloc=function(_e,Y,X){return E(_e,Y,X)};function C(_e){return b(_e),g(_e<0?0:ee(_e)|0)}p.allocUnsafe=function(_e){return C(_e)},p.allocUnsafeSlow=function(_e){return C(_e)};function A(_e,Y){if((typeof Y!="string"||Y==="")&&(Y="utf8"),!p.isEncoding(Y))throw new TypeError("Unknown encoding: "+Y);var X=O(_e,Y)|0,we=g(X),Me=we.write(_e,Y);return Me!==X&&(we=we.slice(0,Me)),we}function B(_e){for(var Y=_e.length<0?0:ee(_e.length)|0,X=g(Y),we=0;we<Y;we+=1)X[we]=_e[we]&255;return X}function M(_e){if(Mt(_e,Uint8Array)){var Y=new Uint8Array(_e);return N(Y.buffer,Y.byteOffset,Y.byteLength)}return B(_e)}function N(_e,Y,X){if(Y<0||_e.byteLength<Y)throw new RangeError('"offset" is outside of buffer bounds');if(_e.byteLength<Y+(X||0))throw new RangeError('"length" is outside of buffer bounds');var we;return Y===void 0&&X===void 0?we=new Uint8Array(_e):X===void 0?we=new Uint8Array(_e,Y):we=new Uint8Array(_e,Y,X),Object.setPrototypeOf(we,p.prototype),we}function Z(_e){if(p.isBuffer(_e)){var Y=ee(_e.length)|0,X=g(Y);return X.length===0||_e.copy(X,0,0,Y),X}if(_e.length!==void 0)return typeof _e.length!="number"||wn(_e.length)?g(0):B(_e);if(_e.type==="Buffer"&&Array.isArray(_e.data))return B(_e.data)}function ee(_e){if(_e>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return _e|0}function F(_e){return+_e!=_e&&(_e=0),p.alloc(+_e)}p.isBuffer=function(Y){return Y!=null&&Y._isBuffer===!0&&Y!==p.prototype},p.compare=function(Y,X){if(Mt(Y,Uint8Array)&&(Y=p.from(Y,Y.offset,Y.byteLength)),Mt(X,Uint8Array)&&(X=p.from(X,X.offset,X.byteLength)),!p.isBuffer(Y)||!p.isBuffer(X))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Y===X)return 0;for(var we=Y.length,Me=X.length,qe=0,je=Math.min(we,Me);qe<je;++qe)if(Y[qe]!==X[qe]){we=Y[qe],Me=X[qe];break}return we<Me?-1:Me<we?1:0},p.isEncoding=function(Y){switch(String(Y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(Y,X){if(!Array.isArray(Y))throw new TypeError('"list" argument must be an Array of Buffers');if(Y.length===0)return p.alloc(0);var we;if(X===void 0)for(X=0,we=0;we<Y.length;++we)X+=Y[we].length;var Me=p.allocUnsafe(X),qe=0;for(we=0;we<Y.length;++we){var je=Y[we];if(Mt(je,Uint8Array))qe+je.length>Me.length?p.from(je).copy(Me,qe):Uint8Array.prototype.set.call(Me,je,qe);else if(p.isBuffer(je))je.copy(Me,qe);else throw new TypeError('"list" argument must be an Array of Buffers');qe+=je.length}return Me};function O(_e,Y){if(p.isBuffer(_e))return _e.length;if(ArrayBuffer.isView(_e)||Mt(_e,ArrayBuffer))return _e.byteLength;if(typeof _e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof _e);var X=_e.length,we=arguments.length>2&&arguments[2]===!0;if(!we&&X===0)return 0;for(var Me=!1;;)switch(Y){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":return bt(_e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X*2;case"hex":return X>>>1;case"base64":return ft(_e).length;default:if(Me)return we?-1:bt(_e).length;Y=(""+Y).toLowerCase(),Me=!0}}p.byteLength=O;function k(_e,Y,X){var we=!1;if((Y===void 0||Y<0)&&(Y=0),Y>this.length||((X===void 0||X>this.length)&&(X=this.length),X<=0)||(X>>>=0,Y>>>=0,X<=Y))return"";for(_e||(_e="utf8");;)switch(_e){case"hex":return se(this,Y,X);case"utf8":case"utf-8":return G(this,Y,X);case"ascii":return fe(this,Y,X);case"latin1":case"binary":return q(this,Y,X);case"base64":return T(this,Y,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,Y,X);default:if(we)throw new TypeError("Unknown encoding: "+_e);_e=(_e+"").toLowerCase(),we=!0}}p.prototype._isBuffer=!0;function H(_e,Y,X){var we=_e[Y];_e[Y]=_e[X],_e[X]=we}p.prototype.swap16=function(){var Y=this.length;if(Y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var X=0;X<Y;X+=2)H(this,X,X+1);return this},p.prototype.swap32=function(){var Y=this.length;if(Y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var X=0;X<Y;X+=4)H(this,X,X+3),H(this,X+1,X+2);return this},p.prototype.swap64=function(){var Y=this.length;if(Y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var X=0;X<Y;X+=8)H(this,X,X+7),H(this,X+1,X+6),H(this,X+2,X+5),H(this,X+3,X+4);return this},p.prototype.toString=function(){var Y=this.length;return Y===0?"":arguments.length===0?G(this,0,Y):k.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(Y){if(!p.isBuffer(Y))throw new TypeError("Argument must be a Buffer");return this===Y?!0:p.compare(this,Y)===0},p.prototype.inspect=function(){var Y="",X=n.INSPECT_MAX_BYTES;return Y=this.toString("hex",0,X).replace(/(.{2})/g,"$1 ").trim(),this.length>X&&(Y+=" ... "),"<Buffer "+Y+">"},a&&(p.prototype[a]=p.prototype.inspect),p.prototype.compare=function(Y,X,we,Me,qe){if(Mt(Y,Uint8Array)&&(Y=p.from(Y,Y.offset,Y.byteLength)),!p.isBuffer(Y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Y);if(X===void 0&&(X=0),we===void 0&&(we=Y?Y.length:0),Me===void 0&&(Me=0),qe===void 0&&(qe=this.length),X<0||we>Y.length||Me<0||qe>this.length)throw new RangeError("out of range index");if(Me>=qe&&X>=we)return 0;if(Me>=qe)return-1;if(X>=we)return 1;if(X>>>=0,we>>>=0,Me>>>=0,qe>>>=0,this===Y)return 0;for(var je=qe-Me,We=we-X,pt=Math.min(je,We),Gt=this.slice(Me,qe),rn=Y.slice(X,we),St=0;St<pt;++St)if(Gt[St]!==rn[St]){je=Gt[St],We=rn[St];break}return je<We?-1:We<je?1:0};function ce(_e,Y,X,we,Me){if(_e.length===0)return-1;if(typeof X=="string"?(we=X,X=0):X>2147483647?X=2147483647:X<-2147483648&&(X=-2147483648),X=+X,wn(X)&&(X=Me?0:_e.length-1),X<0&&(X=_e.length+X),X>=_e.length){if(Me)return-1;X=_e.length-1}else if(X<0)if(Me)X=0;else return-1;if(typeof Y=="string"&&(Y=p.from(Y,we)),p.isBuffer(Y))return Y.length===0?-1:U(_e,Y,X,we,Me);if(typeof Y=="number")return Y=Y&255,typeof Uint8Array.prototype.indexOf=="function"?Me?Uint8Array.prototype.indexOf.call(_e,Y,X):Uint8Array.prototype.lastIndexOf.call(_e,Y,X):U(_e,[Y],X,we,Me);throw new TypeError("val must be string, number or Buffer")}function U(_e,Y,X,we,Me){var qe=1,je=_e.length,We=Y.length;if(we!==void 0&&(we=String(we).toLowerCase(),we==="ucs2"||we==="ucs-2"||we==="utf16le"||we==="utf-16le")){if(_e.length<2||Y.length<2)return-1;qe=2,je/=2,We/=2,X/=2}function pt(Xe,En){return qe===1?Xe[En]:Xe.readUInt16BE(En*qe)}var Gt;if(Me){var rn=-1;for(Gt=X;Gt<je;Gt++)if(pt(_e,Gt)===pt(Y,rn===-1?0:Gt-rn)){if(rn===-1&&(rn=Gt),Gt-rn+1===We)return rn*qe}else rn!==-1&&(Gt-=Gt-rn),rn=-1}else for(X+We>je&&(X=je-We),Gt=X;Gt>=0;Gt--){for(var St=!0,gn=0;gn<We;gn++)if(pt(_e,Gt+gn)!==pt(Y,gn)){St=!1;break}if(St)return Gt}return-1}p.prototype.includes=function(Y,X,we){return this.indexOf(Y,X,we)!==-1},p.prototype.indexOf=function(Y,X,we){return ce(this,Y,X,we,!0)},p.prototype.lastIndexOf=function(Y,X,we){return ce(this,Y,X,we,!1)};function te(_e,Y,X,we){X=Number(X)||0;var Me=_e.length-X;we?(we=Number(we),we>Me&&(we=Me)):we=Me;var qe=Y.length;we>qe/2&&(we=qe/2);for(var je=0;je<we;++je){var We=parseInt(Y.substr(je*2,2),16);if(wn(We))return je;_e[X+je]=We}return je}function re(_e,Y,X,we){return He(bt(Y,_e.length-X),_e,X,we)}function ue(_e,Y,X,we){return He(it(Y),_e,X,we)}function V(_e,Y,X,we){return He(ft(Y),_e,X,we)}function S(_e,Y,X,we){return He(ut(Y,_e.length-X),_e,X,we)}p.prototype.write=function(Y,X,we,Me){if(X===void 0)Me="utf8",we=this.length,X=0;else if(we===void 0&&typeof X=="string")Me=X,we=this.length,X=0;else if(isFinite(X))X=X>>>0,isFinite(we)?(we=we>>>0,Me===void 0&&(Me="utf8")):(Me=we,we=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var qe=this.length-X;if((we===void 0||we>qe)&&(we=qe),Y.length>0&&(we<0||X<0)||X>this.length)throw new RangeError("Attempt to write outside buffer bounds");Me||(Me="utf8");for(var je=!1;;)switch(Me){case"hex":return te(this,Y,X,we);case"utf8":case"utf-8":return re(this,Y,X,we);case"ascii":case"latin1":case"binary":return ue(this,Y,X,we);case"base64":return V(this,Y,X,we);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,Y,X,we);default:if(je)throw new TypeError("Unknown encoding: "+Me);Me=(""+Me).toLowerCase(),je=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(_e,Y,X){return Y===0&&X===_e.length?e.fromByteArray(_e):e.fromByteArray(_e.slice(Y,X))}function G(_e,Y,X){X=Math.min(_e.length,X);for(var we=[],Me=Y;Me<X;){var qe=_e[Me],je=null,We=qe>239?4:qe>223?3:qe>191?2:1;if(Me+We<=X){var pt,Gt,rn,St;switch(We){case 1:qe<128&&(je=qe);break;case 2:pt=_e[Me+1],(pt&192)===128&&(St=(qe&31)<<6|pt&63,St>127&&(je=St));break;case 3:pt=_e[Me+1],Gt=_e[Me+2],(pt&192)===128&&(Gt&192)===128&&(St=(qe&15)<<12|(pt&63)<<6|Gt&63,St>2047&&(St<55296||St>57343)&&(je=St));break;case 4:pt=_e[Me+1],Gt=_e[Me+2],rn=_e[Me+3],(pt&192)===128&&(Gt&192)===128&&(rn&192)===128&&(St=(qe&15)<<18|(pt&63)<<12|(Gt&63)<<6|rn&63,St>65535&&St<1114112&&(je=St))}}je===null?(je=65533,We=1):je>65535&&(je-=65536,we.push(je>>>10&1023|55296),je=56320|je&1023),we.push(je),Me+=We}return le(we)}var Q=4096;function le(_e){var Y=_e.length;if(Y<=Q)return String.fromCharCode.apply(String,_e);for(var X="",we=0;we<Y;)X+=String.fromCharCode.apply(String,_e.slice(we,we+=Q));return X}function fe(_e,Y,X){var we="";X=Math.min(_e.length,X);for(var Me=Y;Me<X;++Me)we+=String.fromCharCode(_e[Me]&127);return we}function q(_e,Y,X){var we="";X=Math.min(_e.length,X);for(var Me=Y;Me<X;++Me)we+=String.fromCharCode(_e[Me]);return we}function se(_e,Y,X){var we=_e.length;(!Y||Y<0)&&(Y=0),(!X||X<0||X>we)&&(X=we);for(var Me="",qe=Y;qe<X;++qe)Me+=Ct[_e[qe]];return Me}function D(_e,Y,X){for(var we=_e.slice(Y,X),Me="",qe=0;qe<we.length-1;qe+=2)Me+=String.fromCharCode(we[qe]+we[qe+1]*256);return Me}p.prototype.slice=function(Y,X){var we=this.length;Y=~~Y,X=X===void 0?we:~~X,Y<0?(Y+=we,Y<0&&(Y=0)):Y>we&&(Y=we),X<0?(X+=we,X<0&&(X=0)):X>we&&(X=we),X<Y&&(X=Y);var Me=this.subarray(Y,X);return Object.setPrototypeOf(Me,p.prototype),Me};function oe(_e,Y,X){if(_e%1!==0||_e<0)throw new RangeError("offset is not uint");if(_e+Y>X)throw new RangeError("Trying to access beyond buffer length")}p.prototype.readUintLE=p.prototype.readUIntLE=function(Y,X,we){Y=Y>>>0,X=X>>>0,we||oe(Y,X,this.length);for(var Me=this[Y],qe=1,je=0;++je<X&&(qe*=256);)Me+=this[Y+je]*qe;return Me},p.prototype.readUintBE=p.prototype.readUIntBE=function(Y,X,we){Y=Y>>>0,X=X>>>0,we||oe(Y,X,this.length);for(var Me=this[Y+--X],qe=1;X>0&&(qe*=256);)Me+=this[Y+--X]*qe;return Me},p.prototype.readUint8=p.prototype.readUInt8=function(Y,X){return Y=Y>>>0,X||oe(Y,1,this.length),this[Y]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(Y,X){return Y=Y>>>0,X||oe(Y,2,this.length),this[Y]|this[Y+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(Y,X){return Y=Y>>>0,X||oe(Y,2,this.length),this[Y]<<8|this[Y+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(Y,X){return Y=Y>>>0,X||oe(Y,4,this.length),(this[Y]|this[Y+1]<<8|this[Y+2]<<16)+this[Y+3]*16777216},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(Y,X){return Y=Y>>>0,X||oe(Y,4,this.length),this[Y]*16777216+(this[Y+1]<<16|this[Y+2]<<8|this[Y+3])},p.prototype.readIntLE=function(Y,X,we){Y=Y>>>0,X=X>>>0,we||oe(Y,X,this.length);for(var Me=this[Y],qe=1,je=0;++je<X&&(qe*=256);)Me+=this[Y+je]*qe;return qe*=128,Me>=qe&&(Me-=Math.pow(2,8*X)),Me},p.prototype.readIntBE=function(Y,X,we){Y=Y>>>0,X=X>>>0,we||oe(Y,X,this.length);for(var Me=X,qe=1,je=this[Y+--Me];Me>0&&(qe*=256);)je+=this[Y+--Me]*qe;return qe*=128,je>=qe&&(je-=Math.pow(2,8*X)),je},p.prototype.readInt8=function(Y,X){return Y=Y>>>0,X||oe(Y,1,this.length),this[Y]&128?(255-this[Y]+1)*-1:this[Y]},p.prototype.readInt16LE=function(Y,X){Y=Y>>>0,X||oe(Y,2,this.length);var we=this[Y]|this[Y+1]<<8;return we&32768?we|4294901760:we},p.prototype.readInt16BE=function(Y,X){Y=Y>>>0,X||oe(Y,2,this.length);var we=this[Y+1]|this[Y]<<8;return we&32768?we|4294901760:we},p.prototype.readInt32LE=function(Y,X){return Y=Y>>>0,X||oe(Y,4,this.length),this[Y]|this[Y+1]<<8|this[Y+2]<<16|this[Y+3]<<24},p.prototype.readInt32BE=function(Y,X){return Y=Y>>>0,X||oe(Y,4,this.length),this[Y]<<24|this[Y+1]<<16|this[Y+2]<<8|this[Y+3]},p.prototype.readFloatLE=function(Y,X){return Y=Y>>>0,X||oe(Y,4,this.length),t.read(this,Y,!0,23,4)},p.prototype.readFloatBE=function(Y,X){return Y=Y>>>0,X||oe(Y,4,this.length),t.read(this,Y,!1,23,4)},p.prototype.readDoubleLE=function(Y,X){return Y=Y>>>0,X||oe(Y,8,this.length),t.read(this,Y,!0,52,8)},p.prototype.readDoubleBE=function(Y,X){return Y=Y>>>0,X||oe(Y,8,this.length),t.read(this,Y,!1,52,8)};function Pe(_e,Y,X,we,Me,qe){if(!p.isBuffer(_e))throw new TypeError('"buffer" argument must be a Buffer instance');if(Y>Me||Y<qe)throw new RangeError('"value" argument is out of bounds');if(X+we>_e.length)throw new RangeError("Index out of range")}p.prototype.writeUintLE=p.prototype.writeUIntLE=function(Y,X,we,Me){if(Y=+Y,X=X>>>0,we=we>>>0,!Me){var qe=Math.pow(2,8*we)-1;Pe(this,Y,X,we,qe,0)}var je=1,We=0;for(this[X]=Y&255;++We<we&&(je*=256);)this[X+We]=Y/je&255;return X+we},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(Y,X,we,Me){if(Y=+Y,X=X>>>0,we=we>>>0,!Me){var qe=Math.pow(2,8*we)-1;Pe(this,Y,X,we,qe,0)}var je=we-1,We=1;for(this[X+je]=Y&255;--je>=0&&(We*=256);)this[X+je]=Y/We&255;return X+we},p.prototype.writeUint8=p.prototype.writeUInt8=function(Y,X,we){return Y=+Y,X=X>>>0,we||Pe(this,Y,X,1,255,0),this[X]=Y&255,X+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(Y,X,we){return Y=+Y,X=X>>>0,we||Pe(this,Y,X,2,65535,0),this[X]=Y&255,this[X+1]=Y>>>8,X+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(Y,X,we){return Y=+Y,X=X>>>0,we||Pe(this,Y,X,2,65535,0),this[X]=Y>>>8,this[X+1]=Y&255,X+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(Y,X,we){return Y=+Y,X=X>>>0,we||Pe(this,Y,X,4,4294967295,0),this[X+3]=Y>>>24,this[X+2]=Y>>>16,this[X+1]=Y>>>8,this[X]=Y&255,X+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(Y,X,we){return Y=+Y,X=X>>>0,we||Pe(this,Y,X,4,4294967295,0),this[X]=Y>>>24,this[X+1]=Y>>>16,this[X+2]=Y>>>8,this[X+3]=Y&255,X+4},p.prototype.writeIntLE=function(Y,X,we,Me){if(Y=+Y,X=X>>>0,!Me){var qe=Math.pow(2,8*we-1);Pe(this,Y,X,we,qe-1,-qe)}var je=0,We=1,pt=0;for(this[X]=Y&255;++je<we&&(We*=256);)Y<0&&pt===0&&this[X+je-1]!==0&&(pt=1),this[X+je]=(Y/We>>0)-pt&255;return X+we},p.prototype.writeIntBE=function(Y,X,we,Me){if(Y=+Y,X=X>>>0,!Me){var qe=Math.pow(2,8*we-1);Pe(this,Y,X,we,qe-1,-qe)}var je=we-1,We=1,pt=0;for(this[X+je]=Y&255;--je>=0&&(We*=256);)Y<0&&pt===0&&this[X+je+1]!==0&&(pt=1),this[X+je]=(Y/We>>0)-pt&255;return X+we},p.prototype.writeInt8=function(Y,X,we){return Y=+Y,X=X>>>0,we||Pe(this,Y,X,1,127,-128),Y<0&&(Y=255+Y+1),this[X]=Y&255,X+1},p.prototype.writeInt16LE=function(Y,X,we){return Y=+Y,X=X>>>0,we||Pe(this,Y,X,2,32767,-32768),this[X]=Y&255,this[X+1]=Y>>>8,X+2},p.prototype.writeInt16BE=function(Y,X,we){return Y=+Y,X=X>>>0,we||Pe(this,Y,X,2,32767,-32768),this[X]=Y>>>8,this[X+1]=Y&255,X+2},p.prototype.writeInt32LE=function(Y,X,we){return Y=+Y,X=X>>>0,we||Pe(this,Y,X,4,2147483647,-2147483648),this[X]=Y&255,this[X+1]=Y>>>8,this[X+2]=Y>>>16,this[X+3]=Y>>>24,X+4},p.prototype.writeInt32BE=function(Y,X,we){return Y=+Y,X=X>>>0,we||Pe(this,Y,X,4,2147483647,-2147483648),Y<0&&(Y=4294967295+Y+1),this[X]=Y>>>24,this[X+1]=Y>>>16,this[X+2]=Y>>>8,this[X+3]=Y&255,X+4};function Re(_e,Y,X,we,Me,qe){if(X+we>_e.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function Oe(_e,Y,X,we,Me){return Y=+Y,X=X>>>0,Me||Re(_e,Y,X,4),t.write(_e,Y,X,we,23,4),X+4}p.prototype.writeFloatLE=function(Y,X,we){return Oe(this,Y,X,!0,we)},p.prototype.writeFloatBE=function(Y,X,we){return Oe(this,Y,X,!1,we)};function Ne(_e,Y,X,we,Me){return Y=+Y,X=X>>>0,Me||Re(_e,Y,X,8),t.write(_e,Y,X,we,52,8),X+8}p.prototype.writeDoubleLE=function(Y,X,we){return Ne(this,Y,X,!0,we)},p.prototype.writeDoubleBE=function(Y,X,we){return Ne(this,Y,X,!1,we)},p.prototype.copy=function(Y,X,we,Me){if(!p.isBuffer(Y))throw new TypeError("argument should be a Buffer");if(we||(we=0),!Me&&Me!==0&&(Me=this.length),X>=Y.length&&(X=Y.length),X||(X=0),Me>0&&Me<we&&(Me=we),Me===we||Y.length===0||this.length===0)return 0;if(X<0)throw new RangeError("targetStart out of bounds");if(we<0||we>=this.length)throw new RangeError("Index out of range");if(Me<0)throw new RangeError("sourceEnd out of bounds");Me>this.length&&(Me=this.length),Y.length-X<Me-we&&(Me=Y.length-X+we);var qe=Me-we;return this===Y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(X,we,Me):Uint8Array.prototype.set.call(Y,this.subarray(we,Me),X),qe},p.prototype.fill=function(Y,X,we,Me){if(typeof Y=="string"){if(typeof X=="string"?(Me=X,X=0,we=this.length):typeof we=="string"&&(Me=we,we=this.length),Me!==void 0&&typeof Me!="string")throw new TypeError("encoding must be a string");if(typeof Me=="string"&&!p.isEncoding(Me))throw new TypeError("Unknown encoding: "+Me);if(Y.length===1){var qe=Y.charCodeAt(0);(Me==="utf8"&&qe<128||Me==="latin1")&&(Y=qe)}}else typeof Y=="number"?Y=Y&255:typeof Y=="boolean"&&(Y=Number(Y));if(X<0||this.length<X||this.length<we)throw new RangeError("Out of range index");if(we<=X)return this;X=X>>>0,we=we===void 0?this.length:we>>>0,Y||(Y=0);var je;if(typeof Y=="number")for(je=X;je<we;++je)this[je]=Y;else{var We=p.isBuffer(Y)?Y:p.from(Y,Me),pt=We.length;if(pt===0)throw new TypeError('The value "'+Y+'" is invalid for argument "value"');for(je=0;je<we-X;++je)this[je+X]=We[je%pt]}return this};var Ue=/[^+/0-9A-Za-z-_]/g;function Ze(_e){if(_e=_e.split("=")[0],_e=_e.trim().replace(Ue,""),_e.length<2)return"";for(;_e.length%4!==0;)_e=_e+"=";return _e}function bt(_e,Y){Y=Y||1/0;for(var X,we=_e.length,Me=null,qe=[],je=0;je<we;++je){if(X=_e.charCodeAt(je),X>55295&&X<57344){if(!Me){if(X>56319){(Y-=3)>-1&&qe.push(239,191,189);continue}else if(je+1===we){(Y-=3)>-1&&qe.push(239,191,189);continue}Me=X;continue}if(X<56320){(Y-=3)>-1&&qe.push(239,191,189),Me=X;continue}X=(Me-55296<<10|X-56320)+65536}else Me&&(Y-=3)>-1&&qe.push(239,191,189);if(Me=null,X<128){if((Y-=1)<0)break;qe.push(X)}else if(X<2048){if((Y-=2)<0)break;qe.push(X>>6|192,X&63|128)}else if(X<65536){if((Y-=3)<0)break;qe.push(X>>12|224,X>>6&63|128,X&63|128)}else if(X<1114112){if((Y-=4)<0)break;qe.push(X>>18|240,X>>12&63|128,X>>6&63|128,X&63|128)}else throw new Error("Invalid code point")}return qe}function it(_e){for(var Y=[],X=0;X<_e.length;++X)Y.push(_e.charCodeAt(X)&255);return Y}function ut(_e,Y){for(var X,we,Me,qe=[],je=0;je<_e.length&&!((Y-=2)<0);++je)X=_e.charCodeAt(je),we=X>>8,Me=X%256,qe.push(Me),qe.push(we);return qe}function ft(_e){return e.toByteArray(Ze(_e))}function He(_e,Y,X,we){for(var Me=0;Me<we&&!(Me+X>=Y.length||Me>=_e.length);++Me)Y[Me+X]=_e[Me];return Me}function Mt(_e,Y){return _e instanceof Y||_e!=null&&_e.constructor!=null&&_e.constructor.name!=null&&_e.constructor.name===Y.name}function wn(_e){return _e!==_e}var Ct=function(){for(var _e="0123456789abcdef",Y=new Array(256),X=0;X<16;++X)for(var we=X*16,Me=0;Me<16;++Me)Y[we+Me]=_e[X]+_e[Me];return Y}()})(buffer$2);var buffer$1=buffer$2,Buffer$6=buffer$1.Buffer,safer={},key$2;for(key$2 in buffer$1)buffer$1.hasOwnProperty(key$2)&&(key$2==="SlowBuffer"||key$2==="Buffer"||(safer[key$2]=buffer$1[key$2]));var Safer=safer.Buffer={};for(key$2 in Buffer$6)Buffer$6.hasOwnProperty(key$2)&&(key$2==="allocUnsafe"||key$2==="allocUnsafeSlow"||(Safer[key$2]=Buffer$6[key$2]));safer.Buffer.prototype=Buffer$6.prototype;(!Safer.from||Safer.from===Uint8Array.from)&&(Safer.from=function(n,e,t){if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof n);if(n&&typeof n.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);return Buffer$6(n,e,t)});Safer.alloc||(Safer.alloc=function(n,e,t){if(typeof n!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof n);if(n<0||n>=2*(1<<30))throw new RangeError('The value "'+n+'" is invalid for option "size"');var a=Buffer$6(n);return!e||e.length===0?a.fill(0):typeof t=="string"?a.fill(e,t):a.fill(e),a});if(!safer.kStringMaxLength)try{safer.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}safer.constants||(safer.constants={MAX_LENGTH:safer.kMaxLength},safer.kStringMaxLength&&(safer.constants.MAX_STRING_LENGTH=safer.kStringMaxLength));var safer_1=safer,reporter={};const inherits$a=inherits_browserExports;function Reporter$2(n){this._reporterState={obj:null,path:[],options:n||{},errors:[]}}reporter.Reporter=Reporter$2;Reporter$2.prototype.isError=function n(e){return e instanceof ReporterError};Reporter$2.prototype.save=function n(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};Reporter$2.prototype.restore=function n(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)};Reporter$2.prototype.enterKey=function n(e){return this._reporterState.path.push(e)};Reporter$2.prototype.exitKey=function n(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)};Reporter$2.prototype.leaveKey=function n(e,t,a){const l=this._reporterState;this.exitKey(e),l.obj!==null&&(l.obj[t]=a)};Reporter$2.prototype.path=function n(){return this._reporterState.path.join("/")};Reporter$2.prototype.enterObject=function n(){const e=this._reporterState,t=e.obj;return e.obj={},t};Reporter$2.prototype.leaveObject=function n(e){const t=this._reporterState,a=t.obj;return t.obj=e,a};Reporter$2.prototype.error=function n(e){let t;const a=this._reporterState,l=e instanceof ReporterError;if(l?t=e:t=new ReporterError(a.path.map(function(h){return"["+JSON.stringify(h)+"]"}).join(""),e.message||e,e.stack),!a.options.partial)throw t;return l||a.errors.push(t),t};Reporter$2.prototype.wrapResult=function n(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e};function ReporterError(n,e){this.path=n,this.rethrow(e)}inherits$a(ReporterError,Error);ReporterError.prototype.rethrow=function n(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ReporterError),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this};var buffer={};const inherits$9=inherits_browserExports,Reporter$1=reporter.Reporter,Buffer$5=safer_1.Buffer;function DecoderBuffer$2(n,e){if(Reporter$1.call(this,e),!Buffer$5.isBuffer(n)){this.error("Input not Buffer");return}this.base=n,this.offset=0,this.length=n.length}inherits$9(DecoderBuffer$2,Reporter$1);buffer.DecoderBuffer=DecoderBuffer$2;DecoderBuffer$2.isDecoderBuffer=function n(e){return e instanceof DecoderBuffer$2?!0:typeof e=="object"&&Buffer$5.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};DecoderBuffer$2.prototype.save=function n(){return{offset:this.offset,reporter:Reporter$1.prototype.save.call(this)}};DecoderBuffer$2.prototype.restore=function n(e){const t=new DecoderBuffer$2(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,Reporter$1.prototype.restore.call(this,e.reporter),t};DecoderBuffer$2.prototype.isEmpty=function n(){return this.offset===this.length};DecoderBuffer$2.prototype.readUInt8=function n(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};DecoderBuffer$2.prototype.skip=function n(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const a=new DecoderBuffer$2(this.base);return a._reporterState=this._reporterState,a.offset=this.offset,a.length=this.offset+e,this.offset+=e,a};DecoderBuffer$2.prototype.raw=function n(e){return this.base.slice(e?e.offset:this.offset,this.length)};function EncoderBuffer$1(n,e){if(Array.isArray(n))this.length=0,this.value=n.map(function(t){return EncoderBuffer$1.isEncoderBuffer(t)||(t=new EncoderBuffer$1(t,e)),this.length+=t.length,t},this);else if(typeof n=="number"){if(!(0<=n&&n<=255))return e.error("non-byte EncoderBuffer value");this.value=n,this.length=1}else if(typeof n=="string")this.value=n,this.length=Buffer$5.byteLength(n);else if(Buffer$5.isBuffer(n))this.value=n,this.length=n.length;else return e.error("Unsupported type: "+typeof n)}buffer.EncoderBuffer=EncoderBuffer$1;EncoderBuffer$1.isEncoderBuffer=function n(e){return e instanceof EncoderBuffer$1?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};EncoderBuffer$1.prototype.join=function n(e,t){return e||(e=Buffer$5.alloc(this.length)),t||(t=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(a){a.join(e,t),t+=a.length}):(typeof this.value=="number"?e[t]=this.value:typeof this.value=="string"?e.write(this.value,t):Buffer$5.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e};var minimalisticAssert=assert$g;function assert$g(n,e){if(!n)throw new Error(e||"Assertion failed")}assert$g.equal=function n(e,t,a){if(e!=t)throw new Error(a||"Assertion failed: "+e+" != "+t)};const Reporter=reporter.Reporter,EncoderBuffer=buffer.EncoderBuffer,DecoderBuffer$1=buffer.DecoderBuffer,assert$f=minimalisticAssert,tags=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],methods=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(tags),overrided=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function Node$2(n,e,t){const a={};this._baseState=a,a.name=t,a.enc=n,a.parent=e||null,a.children=null,a.tag=null,a.args=null,a.reverseArgs=null,a.choice=null,a.optional=!1,a.any=!1,a.obj=!1,a.use=null,a.useDecoder=null,a.key=null,a.default=null,a.explicit=null,a.implicit=null,a.contains=null,a.parent||(a.children=[],this._wrap())}var node=Node$2;const stateProps=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Node$2.prototype.clone=function n(){const e=this._baseState,t={};stateProps.forEach(function(l){t[l]=e[l]});const a=new this.constructor(t.parent);return a._baseState=t,a};Node$2.prototype._wrap=function n(){const e=this._baseState;methods.forEach(function(t){this[t]=function(){const l=new this.constructor(this);return e.children.push(l),l[t].apply(l,arguments)}},this)};Node$2.prototype._init=function n(e){const t=this._baseState;assert$f(t.parent===null),e.call(this),t.children=t.children.filter(function(a){return a._baseState.parent===this},this),assert$f.equal(t.children.length,1,"Root node can have only one child")};Node$2.prototype._useArgs=function n(e){const t=this._baseState,a=e.filter(function(l){return l instanceof this.constructor},this);e=e.filter(function(l){return!(l instanceof this.constructor)},this),a.length!==0&&(assert$f(t.children===null),t.children=a,a.forEach(function(l){l._baseState.parent=this},this)),e.length!==0&&(assert$f(t.args===null),t.args=e,t.reverseArgs=e.map(function(l){if(typeof l!="object"||l.constructor!==Object)return l;const h={};return Object.keys(l).forEach(function(g){g==(g|0)&&(g|=0);const p=l[g];h[p]=g}),h}))};overrided.forEach(function(n){Node$2.prototype[n]=function(){const t=this._baseState;throw new Error(n+" not implemented for encoding: "+t.enc)}});tags.forEach(function(n){Node$2.prototype[n]=function(){const t=this._baseState,a=Array.prototype.slice.call(arguments);return assert$f(t.tag===null),t.tag=n,this._useArgs(a),this}});Node$2.prototype.use=function n(e){assert$f(e);const t=this._baseState;return assert$f(t.use===null),t.use=e,this};Node$2.prototype.optional=function n(){const e=this._baseState;return e.optional=!0,this};Node$2.prototype.def=function n(e){const t=this._baseState;return assert$f(t.default===null),t.default=e,t.optional=!0,this};Node$2.prototype.explicit=function n(e){const t=this._baseState;return assert$f(t.explicit===null&&t.implicit===null),t.explicit=e,this};Node$2.prototype.implicit=function n(e){const t=this._baseState;return assert$f(t.explicit===null&&t.implicit===null),t.implicit=e,this};Node$2.prototype.obj=function n(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,t.length!==0&&this._useArgs(t),this};Node$2.prototype.key=function n(e){const t=this._baseState;return assert$f(t.key===null),t.key=e,this};Node$2.prototype.any=function n(){const e=this._baseState;return e.any=!0,this};Node$2.prototype.choice=function n(e){const t=this._baseState;return assert$f(t.choice===null),t.choice=e,this._useArgs(Object.keys(e).map(function(a){return e[a]})),this};Node$2.prototype.contains=function n(e){const t=this._baseState;return assert$f(t.use===null),t.contains=e,this};Node$2.prototype._decode=function n(e,t){const a=this._baseState;if(a.parent===null)return e.wrapResult(a.children[0]._decode(e,t));let l=a.default,h=!0,g=null;if(a.key!==null&&(g=e.enterKey(a.key)),a.optional){let y=null;if(a.explicit!==null?y=a.explicit:a.implicit!==null?y=a.implicit:a.tag!==null&&(y=a.tag),y===null&&!a.any){const b=e.save();try{a.choice===null?this._decodeGeneric(a.tag,e,t):this._decodeChoice(e,t),h=!0}catch{h=!1}e.restore(b)}else if(h=this._peekTag(e,y,a.any),e.isError(h))return h}let p;if(a.obj&&h&&(p=e.enterObject()),h){if(a.explicit!==null){const b=this._decodeTag(e,a.explicit);if(e.isError(b))return b;e=b}const y=e.offset;if(a.use===null&&a.choice===null){let b;a.any&&(b=e.save());const E=this._decodeTag(e,a.implicit!==null?a.implicit:a.tag,a.any);if(e.isError(E))return E;a.any?l=e.raw(b):e=E}if(t&&t.track&&a.tag!==null&&t.track(e.path(),y,e.length,"tagged"),t&&t.track&&a.tag!==null&&t.track(e.path(),e.offset,e.length,"content"),a.any||(a.choice===null?l=this._decodeGeneric(a.tag,e,t):l=this._decodeChoice(e,t)),e.isError(l))return l;if(!a.any&&a.choice===null&&a.children!==null&&a.children.forEach(function(E){E._decode(e,t)}),a.contains&&(a.tag==="octstr"||a.tag==="bitstr")){const b=new DecoderBuffer$1(l);l=this._getUse(a.contains,e._reporterState.obj)._decode(b,t)}}return a.obj&&h&&(l=e.leaveObject(p)),a.key!==null&&(l!==null||h===!0)?e.leaveKey(g,a.key,l):g!==null&&e.exitKey(g),l};Node$2.prototype._decodeGeneric=function n(e,t,a){const l=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(t,e,l.args[0],a):/str$/.test(e)?this._decodeStr(t,e,a):e==="objid"&&l.args?this._decodeObjid(t,l.args[0],l.args[1],a):e==="objid"?this._decodeObjid(t,null,null,a):e==="gentime"||e==="utctime"?this._decodeTime(t,e,a):e==="null_"?this._decodeNull(t,a):e==="bool"?this._decodeBool(t,a):e==="objDesc"?this._decodeStr(t,e,a):e==="int"||e==="enum"?this._decodeInt(t,l.args&&l.args[0],a):l.use!==null?this._getUse(l.use,t._reporterState.obj)._decode(t,a):t.error("unknown tag: "+e)};Node$2.prototype._getUse=function n(e,t){const a=this._baseState;return a.useDecoder=this._use(e,t),assert$f(a.useDecoder._baseState.parent===null),a.useDecoder=a.useDecoder._baseState.children[0],a.implicit!==a.useDecoder._baseState.implicit&&(a.useDecoder=a.useDecoder.clone(),a.useDecoder._baseState.implicit=a.implicit),a.useDecoder};Node$2.prototype._decodeChoice=function n(e,t){const a=this._baseState;let l=null,h=!1;return Object.keys(a.choice).some(function(g){const p=e.save(),y=a.choice[g];try{const b=y._decode(e,t);if(e.isError(b))return!1;l={type:g,value:b},h=!0}catch{return e.restore(p),!1}return!0},this),h?l:e.error("Choice not matched")};Node$2.prototype._createEncoderBuffer=function n(e){return new EncoderBuffer(e,this.reporter)};Node$2.prototype._encode=function n(e,t,a){const l=this._baseState;if(l.default!==null&&l.default===e)return;const h=this._encodeValue(e,t,a);if(h!==void 0&&!this._skipDefault(h,t,a))return h};Node$2.prototype._encodeValue=function n(e,t,a){const l=this._baseState;if(l.parent===null)return l.children[0]._encode(e,t||new Reporter);let h=null;if(this.reporter=t,l.optional&&e===void 0)if(l.default!==null)e=l.default;else return;let g=null,p=!1;if(l.any)h=this._createEncoderBuffer(e);else if(l.choice)h=this._encodeChoice(e,t);else if(l.contains)g=this._getUse(l.contains,a)._encode(e,t),p=!0;else if(l.children)g=l.children.map(function(y){if(y._baseState.tag==="null_")return y._encode(null,t,e);if(y._baseState.key===null)return t.error("Child should have a key");const b=t.enterKey(y._baseState.key);if(typeof e!="object")return t.error("Child expected, but input is not object");const E=y._encode(e[y._baseState.key],t,e);return t.leaveKey(b),E},this).filter(function(y){return y}),g=this._createEncoderBuffer(g);else if(l.tag==="seqof"||l.tag==="setof"){if(!(l.args&&l.args.length===1))return t.error("Too many args for : "+l.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const y=this.clone();y._baseState.implicit=null,g=this._createEncoderBuffer(e.map(function(b){const E=this._baseState;return this._getUse(E.args[0],e)._encode(b,t)},y))}else l.use!==null?h=this._getUse(l.use,a)._encode(e,t):(g=this._encodePrimitive(l.tag,e),p=!0);if(!l.any&&l.choice===null){const y=l.implicit!==null?l.implicit:l.tag,b=l.implicit===null?"universal":"context";y===null?l.use===null&&t.error("Tag could be omitted only for .use()"):l.use===null&&(h=this._encodeComposite(y,p,b,g))}return l.explicit!==null&&(h=this._encodeComposite(l.explicit,!1,"context",h)),h};Node$2.prototype._encodeChoice=function n(e,t){const a=this._baseState,l=a.choice[e.type];return l||assert$f(!1,e.type+" not found in "+JSON.stringify(Object.keys(a.choice))),l._encode(e.value,t)};Node$2.prototype._encodePrimitive=function n(e,t){const a=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if(e==="objid"&&a.args)return this._encodeObjid(t,a.reverseArgs[0],a.args[1]);if(e==="objid")return this._encodeObjid(t,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(t,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(t,a.args&&a.reverseArgs[0]);if(e==="bool")return this._encodeBool(t);if(e==="objDesc")return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)};Node$2.prototype._isNumstr=function n(e){return/^[0-9 ]*$/.test(e)};Node$2.prototype._isPrintstr=function n(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)};var der$2={};(function(n){function e(t){const a={};return Object.keys(t).forEach(function(l){(l|0)==l&&(l=l|0);const h=t[l];a[h]=l}),a}n.tagClass={0:"universal",1:"application",2:"context",3:"private"},n.tagClassByName=e(n.tagClass),n.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},n.tagByName=e(n.tag)})(der$2);const inherits$8=inherits_browserExports,Buffer$4=safer_1.Buffer,Node$1=node,der$1=der$2;function DEREncoder$1(n){this.enc="der",this.name=n.name,this.entity=n,this.tree=new DERNode$1,this.tree._init(n.body)}var der_1$1=DEREncoder$1;DEREncoder$1.prototype.encode=function n(e,t){return this.tree._encode(e,t).join()};function DERNode$1(n){Node$1.call(this,"der",n)}inherits$8(DERNode$1,Node$1);DERNode$1.prototype._encodeComposite=function n(e,t,a,l){const h=encodeTag(e,t,a,this.reporter);if(l.length<128){const y=Buffer$4.alloc(2);return y[0]=h,y[1]=l.length,this._createEncoderBuffer([y,l])}let g=1;for(let y=l.length;y>=256;y>>=8)g++;const p=Buffer$4.alloc(1+1+g);p[0]=h,p[1]=128|g;for(let y=1+g,b=l.length;b>0;y--,b>>=8)p[y]=b&255;return this._createEncoderBuffer([p,l])};DERNode$1.prototype._encodeStr=function n(e,t){if(t==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(t==="bmpstr"){const a=Buffer$4.alloc(e.length*2);for(let l=0;l<e.length;l++)a.writeUInt16BE(e.charCodeAt(l),l*2);return this._createEncoderBuffer(a)}else return t==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):t==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):t==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")};DERNode$1.prototype._encodeObjid=function n(e,t,a){if(typeof e=="string"){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let p=0;p<e.length;p++)e[p]|=0}else if(Array.isArray(e)){e=e.slice();for(let p=0;p<e.length;p++)e[p]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!a){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let l=0;for(let p=0;p<e.length;p++){let y=e[p];for(l++;y>=128;y>>=7)l++}const h=Buffer$4.alloc(l);let g=h.length-1;for(let p=e.length-1;p>=0;p--){let y=e[p];for(h[g--]=y&127;(y>>=7)>0;)h[g--]=128|y&127}return this._createEncoderBuffer(h)};function two(n){return n<10?"0"+n:n}DERNode$1.prototype._encodeTime=function n(e,t){let a;const l=new Date(e);return t==="gentime"?a=[two(l.getUTCFullYear()),two(l.getUTCMonth()+1),two(l.getUTCDate()),two(l.getUTCHours()),two(l.getUTCMinutes()),two(l.getUTCSeconds()),"Z"].join(""):t==="utctime"?a=[two(l.getUTCFullYear()%100),two(l.getUTCMonth()+1),two(l.getUTCDate()),two(l.getUTCHours()),two(l.getUTCMinutes()),two(l.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(a,"octstr")};DERNode$1.prototype._encodeNull=function n(){return this._createEncoderBuffer("")};DERNode$1.prototype._encodeInt=function n(e,t){if(typeof e=="string"){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if(typeof e!="number"&&!Buffer$4.isBuffer(e)){const h=e.toArray();!e.sign&&h[0]&128&&h.unshift(0),e=Buffer$4.from(h)}if(Buffer$4.isBuffer(e)){let h=e.length;e.length===0&&h++;const g=Buffer$4.alloc(h);return e.copy(g),e.length===0&&(g[0]=0),this._createEncoderBuffer(g)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let a=1;for(let h=e;h>=256;h>>=8)a++;const l=new Array(a);for(let h=l.length-1;h>=0;h--)l[h]=e&255,e>>=8;return l[0]&128&&l.unshift(0),this._createEncoderBuffer(Buffer$4.from(l))};DERNode$1.prototype._encodeBool=function n(e){return this._createEncoderBuffer(e?255:0)};DERNode$1.prototype._use=function n(e,t){return typeof e=="function"&&(e=e(t)),e._getEncoder("der").tree};DERNode$1.prototype._skipDefault=function n(e,t,a){const l=this._baseState;let h;if(l.default===null)return!1;const g=e.join();if(l.defaultBuffer===void 0&&(l.defaultBuffer=this._encodeValue(l.default,t,a).join()),g.length!==l.defaultBuffer.length)return!1;for(h=0;h<g.length;h++)if(g[h]!==l.defaultBuffer[h])return!1;return!0};function encodeTag(n,e,t,a){let l;if(n==="seqof"?n="seq":n==="setof"&&(n="set"),der$1.tagByName.hasOwnProperty(n))l=der$1.tagByName[n];else if(typeof n=="number"&&(n|0)===n)l=n;else return a.error("Unknown tag: "+n);return l>=31?a.error("Multi-octet tag encoding unsupported"):(e||(l|=32),l|=der$1.tagClassByName[t||"universal"]<<6,l)}const inherits$7=inherits_browserExports,DEREncoder=der_1$1;function PEMEncoder(n){DEREncoder.call(this,n),this.enc="pem"}inherits$7(PEMEncoder,DEREncoder);var pem$1=PEMEncoder;PEMEncoder.prototype.encode=function n(e,t){const l=DEREncoder.prototype.encode.call(this,e).toString("base64"),h=["-----BEGIN "+t.label+"-----"];for(let g=0;g<l.length;g+=64)h.push(l.slice(g,g+64));return h.push("-----END "+t.label+"-----"),h.join(`
`)};(function(n){const e=n;e.der=der_1$1,e.pem=pem$1})(encoders);var decoders={};const inherits$6=inherits_browserExports,bignum=bnExports,DecoderBuffer=buffer.DecoderBuffer,Node=node,der=der$2;function DERDecoder$1(n){this.enc="der",this.name=n.name,this.entity=n,this.tree=new DERNode,this.tree._init(n.body)}var der_1=DERDecoder$1;DERDecoder$1.prototype.decode=function n(e,t){return DecoderBuffer.isDecoderBuffer(e)||(e=new DecoderBuffer(e,t)),this.tree._decode(e,t)};function DERNode(n){Node.call(this,"der",n)}inherits$6(DERNode,Node);DERNode.prototype._peekTag=function n(e,t,a){if(e.isEmpty())return!1;const l=e.save(),h=derDecodeTag(e,'Failed to peek tag: "'+t+'"');return e.isError(h)?h:(e.restore(l),h.tag===t||h.tagStr===t||h.tagStr+"of"===t||a)};DERNode.prototype._decodeTag=function n(e,t,a){const l=derDecodeTag(e,'Failed to decode tag of "'+t+'"');if(e.isError(l))return l;let h=derDecodeLen(e,l.primitive,'Failed to get length of "'+t+'"');if(e.isError(h))return h;if(!a&&l.tag!==t&&l.tagStr!==t&&l.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(l.primitive||h!==null)return e.skip(h,'Failed to match body of: "'+t+'"');const g=e.save(),p=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(p)?p:(h=e.offset-g.offset,e.restore(g),e.skip(h,'Failed to match body of: "'+t+'"'))};DERNode.prototype._skipUntilEnd=function n(e,t){for(;;){const a=derDecodeTag(e,t);if(e.isError(a))return a;const l=derDecodeLen(e,a.primitive,t);if(e.isError(l))return l;let h;if(a.primitive||l!==null?h=e.skip(l):h=this._skipUntilEnd(e,t),e.isError(h))return h;if(a.tagStr==="end")break}};DERNode.prototype._decodeList=function n(e,t,a,l){const h=[];for(;!e.isEmpty();){const g=this._peekTag(e,"end");if(e.isError(g))return g;const p=a.decode(e,"der",l);if(e.isError(p)&&g)break;h.push(p)}return h};DERNode.prototype._decodeStr=function n(e,t){if(t==="bitstr"){const a=e.readUInt8();return e.isError(a)?a:{unused:a,data:e.raw()}}else if(t==="bmpstr"){const a=e.raw();if(a.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let l="";for(let h=0;h<a.length/2;h++)l+=String.fromCharCode(a.readUInt16BE(h*2));return l}else if(t==="numstr"){const a=e.raw().toString("ascii");return this._isNumstr(a)?a:e.error("Decoding of string type: numstr unsupported characters")}else{if(t==="octstr")return e.raw();if(t==="objDesc")return e.raw();if(t==="printstr"){const a=e.raw().toString("ascii");return this._isPrintstr(a)?a:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")}};DERNode.prototype._decodeObjid=function n(e,t,a){let l;const h=[];let g=0,p=0;for(;!e.isEmpty();)p=e.readUInt8(),g<<=7,g|=p&127,p&128||(h.push(g),g=0);p&128&&h.push(g);const y=h[0]/40|0,b=h[0]%40;if(a?l=h:l=[y,b].concat(h.slice(1)),t){let E=t[l.join(" ")];E===void 0&&(E=t[l.join(".")]),E!==void 0&&(l=E)}return l};DERNode.prototype._decodeTime=function n(e,t){const a=e.raw().toString();let l,h,g,p,y,b;if(t==="gentime")l=a.slice(0,4)|0,h=a.slice(4,6)|0,g=a.slice(6,8)|0,p=a.slice(8,10)|0,y=a.slice(10,12)|0,b=a.slice(12,14)|0;else if(t==="utctime")l=a.slice(0,2)|0,h=a.slice(2,4)|0,g=a.slice(4,6)|0,p=a.slice(6,8)|0,y=a.slice(8,10)|0,b=a.slice(10,12)|0,l<70?l=2e3+l:l=1900+l;else return e.error("Decoding "+t+" time is not supported yet");return Date.UTC(l,h-1,g,p,y,b,0)};DERNode.prototype._decodeNull=function n(){return null};DERNode.prototype._decodeBool=function n(e){const t=e.readUInt8();return e.isError(t)?t:t!==0};DERNode.prototype._decodeInt=function n(e,t){const a=e.raw();let l=new bignum(a);return t&&(l=t[l.toString(10)]||l),l};DERNode.prototype._use=function n(e,t){return typeof e=="function"&&(e=e(t)),e._getDecoder("der").tree};function derDecodeTag(n,e){let t=n.readUInt8(e);if(n.isError(t))return t;const a=der.tagClass[t>>6],l=(t&32)===0;if((t&31)===31){let g=t;for(t=0;(g&128)===128;){if(g=n.readUInt8(e),n.isError(g))return g;t<<=7,t|=g&127}}else t&=31;const h=der.tag[t];return{cls:a,primitive:l,tag:t,tagStr:h}}function derDecodeLen(n,e,t){let a=n.readUInt8(t);if(n.isError(a))return a;if(!e&&a===128)return null;if(!(a&128))return a;const l=a&127;if(l>4)return n.error("length octect is too long");a=0;for(let h=0;h<l;h++){a<<=8;const g=n.readUInt8(t);if(n.isError(g))return g;a|=g}return a}const inherits$5=inherits_browserExports,Buffer$3=safer_1.Buffer,DERDecoder=der_1;function PEMDecoder(n){DERDecoder.call(this,n),this.enc="pem"}inherits$5(PEMDecoder,DERDecoder);var pem=PEMDecoder;PEMDecoder.prototype.decode=function n(e,t){const a=e.toString().split(/[\r\n]+/g),l=t.label.toUpperCase(),h=/^-----(BEGIN|END) ([^-]+)-----$/;let g=-1,p=-1;for(let E=0;E<a.length;E++){const C=a[E].match(h);if(C!==null&&C[2]===l)if(g===-1){if(C[1]!=="BEGIN")break;g=E}else{if(C[1]!=="END")break;p=E;break}}if(g===-1||p===-1)throw new Error("PEM section not found for: "+l);const y=a.slice(g+1,p).join("");y.replace(/[^a-z0-9+/=]+/gi,"");const b=Buffer$3.from(y,"base64");return DERDecoder.prototype.decode.call(this,b,t)};(function(n){const e=n;e.der=der_1,e.pem=pem})(decoders);(function(n){const e=encoders,t=decoders,a=inherits_browserExports,l=n;l.define=function(p,y){return new h(p,y)};function h(g,p){this.name=g,this.body=p,this.decoders={},this.encoders={}}h.prototype._createNamed=function(p){const y=this.name;function b(E){this._initNamed(E,y)}return a(b,p),b.prototype._initNamed=function(C,A){p.call(this,C,A)},new b(this)},h.prototype._getDecoder=function(p){return p=p||"der",this.decoders.hasOwnProperty(p)||(this.decoders[p]=this._createNamed(t[p])),this.decoders[p]},h.prototype.decode=function(p,y,b){return this._getDecoder(y).decode(p,b)},h.prototype._getEncoder=function(p){return p=p||"der",this.encoders.hasOwnProperty(p)||(this.encoders[p]=this._createNamed(e[p])),this.encoders[p]},h.prototype.encode=function(p,y,b){return this._getEncoder(y).encode(p,b)}})(api);var base$1={};(function(n){const e=n;e.Reporter=reporter.Reporter,e.DecoderBuffer=buffer.DecoderBuffer,e.EncoderBuffer=buffer.EncoderBuffer,e.Node=node})(base$1);var constants={};(function(n){const e=n;e._reverse=function(a){const l={};return Object.keys(a).forEach(function(h){(h|0)==h&&(h=h|0);const g=a[h];l[g]=h}),l},e.der=der$2})(constants);(function(n){const e=n;e.bignum=bnExports,e.define=api.define,e.base=base$1,e.constants=constants,e.decoders=decoders,e.encoders=encoders})(asn1$2);var safeBufferExports={},safeBuffer={get exports(){return safeBufferExports},set exports(n){safeBufferExports=n}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,e){var t=buffer$2,a=t.Buffer;function l(g,p){for(var y in g)p[y]=g[y]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?n.exports=t:(l(t,e),e.Buffer=h);function h(g,p,y){return a(g,p,y)}h.prototype=Object.create(a.prototype),l(a,h),h.from=function(g,p,y){if(typeof g=="number")throw new TypeError("Argument must not be a number");return a(g,p,y)},h.alloc=function(g,p,y){if(typeof g!="number")throw new TypeError("Argument must be a number");var b=a(g);return p!==void 0?typeof y=="string"?b.fill(p,y):b.fill(p):b.fill(0),b},h.allocUnsafe=function(g){if(typeof g!="number")throw new TypeError("Argument must be a number");return a(g)},h.allocUnsafeSlow=function(g){if(typeof g!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(g)}})(safeBuffer,safeBufferExports);var elliptic={};const name="elliptic",version$1="6.5.4",description="EC cryptography",main="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0={name,version:version$1,description,main,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies};var utils$n={},utils$m={};(function(n){var e=n;function t(h,g){if(Array.isArray(h))return h.slice();if(!h)return[];var p=[];if(typeof h!="string"){for(var y=0;y<h.length;y++)p[y]=h[y]|0;return p}if(g==="hex"){h=h.replace(/[^a-z0-9]+/ig,""),h.length%2!==0&&(h="0"+h);for(var y=0;y<h.length;y+=2)p.push(parseInt(h[y]+h[y+1],16))}else for(var y=0;y<h.length;y++){var b=h.charCodeAt(y),E=b>>8,C=b&255;E?p.push(E,C):p.push(C)}return p}e.toArray=t;function a(h){return h.length===1?"0"+h:h}e.zero2=a;function l(h){for(var g="",p=0;p<h.length;p++)g+=a(h[p].toString(16));return g}e.toHex=l,e.encode=function(g,p){return p==="hex"?l(g):g}})(utils$m);(function(n){var e=n,t=bnExports,a=minimalisticAssert,l=utils$m;e.assert=a,e.toArray=l.toArray,e.zero2=l.zero2,e.toHex=l.toHex,e.encode=l.encode;function h(E,C,A){var B=new Array(Math.max(E.bitLength(),A)+1);B.fill(0);for(var M=1<<C+1,N=E.clone(),Z=0;Z<B.length;Z++){var ee,F=N.andln(M-1);N.isOdd()?(F>(M>>1)-1?ee=(M>>1)-F:ee=F,N.isubn(ee)):ee=0,B[Z]=ee,N.iushrn(1)}return B}e.getNAF=h;function g(E,C){var A=[[],[]];E=E.clone(),C=C.clone();for(var B=0,M=0,N;E.cmpn(-B)>0||C.cmpn(-M)>0;){var Z=E.andln(3)+B&3,ee=C.andln(3)+M&3;Z===3&&(Z=-1),ee===3&&(ee=-1);var F;Z&1?(N=E.andln(7)+B&7,(N===3||N===5)&&ee===2?F=-Z:F=Z):F=0,A[0].push(F);var O;ee&1?(N=C.andln(7)+M&7,(N===3||N===5)&&Z===2?O=-ee:O=ee):O=0,A[1].push(O),2*B===F+1&&(B=1-B),2*M===O+1&&(M=1-M),E.iushrn(1),C.iushrn(1)}return A}e.getJSF=g;function p(E,C,A){var B="_"+C;E.prototype[C]=function(){return this[B]!==void 0?this[B]:this[B]=A.call(this)}}e.cachedProperty=p;function y(E){return typeof E=="string"?e.toArray(E,"hex"):E}e.parseBytes=y;function b(E){return new t(E,"hex","le")}e.intFromLE=b})(utils$n);var brorandExports={},brorand={get exports(){return brorandExports},set exports(n){brorandExports=n}},r$1;brorand.exports=function n(e){return r$1||(r$1=new Rand(null)),r$1.generate(e)};function Rand(n){this.rand=n}brorandExports.Rand=Rand;Rand.prototype.generate=function n(e){return this._rand(e)};Rand.prototype._rand=function n(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),a=0;a<t.length;a++)t[a]=this.rand.getByte();return t};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Rand.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Rand.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(Rand.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var crypto$2=require$$0$3;if(typeof crypto$2.randomBytes!="function")throw new Error("Not supported");Rand.prototype._rand=function(e){return crypto$2.randomBytes(e)}}catch{}var curve={},BN$8=bnExports,utils$l=utils$n,getNAF=utils$l.getNAF,getJSF=utils$l.getJSF,assert$e=utils$l.assert;function BaseCurve(n,e){this.type=n,this.p=new BN$8(e.p,16),this.red=e.prime?BN$8.red(e.prime):BN$8.mont(this.p),this.zero=new BN$8(0).toRed(this.red),this.one=new BN$8(1).toRed(this.red),this.two=new BN$8(2).toRed(this.red),this.n=e.n&&new BN$8(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base=BaseCurve;BaseCurve.prototype.point=function n(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function n(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function n(e,t){assert$e(e.precomputed);var a=e._getDoubles(),l=getNAF(t,1,this._bitLength),h=(1<<a.step+1)-(a.step%2===0?2:1);h/=3;var g=[],p,y;for(p=0;p<l.length;p+=a.step){y=0;for(var b=p+a.step-1;b>=p;b--)y=(y<<1)+l[b];g.push(y)}for(var E=this.jpoint(null,null,null),C=this.jpoint(null,null,null),A=h;A>0;A--){for(p=0;p<g.length;p++)y=g[p],y===A?C=C.mixedAdd(a.points[p]):y===-A&&(C=C.mixedAdd(a.points[p].neg()));E=E.add(C)}return E.toP()};BaseCurve.prototype._wnafMul=function n(e,t){var a=4,l=e._getNAFPoints(a);a=l.wnd;for(var h=l.points,g=getNAF(t,a,this._bitLength),p=this.jpoint(null,null,null),y=g.length-1;y>=0;y--){for(var b=0;y>=0&&g[y]===0;y--)b++;if(y>=0&&b++,p=p.dblp(b),y<0)break;var E=g[y];assert$e(E!==0),e.type==="affine"?E>0?p=p.mixedAdd(h[E-1>>1]):p=p.mixedAdd(h[-E-1>>1].neg()):E>0?p=p.add(h[E-1>>1]):p=p.add(h[-E-1>>1].neg())}return e.type==="affine"?p.toP():p};BaseCurve.prototype._wnafMulAdd=function n(e,t,a,l,h){var g=this._wnafT1,p=this._wnafT2,y=this._wnafT3,b=0,E,C,A;for(E=0;E<l;E++){A=t[E];var B=A._getNAFPoints(e);g[E]=B.wnd,p[E]=B.points}for(E=l-1;E>=1;E-=2){var M=E-1,N=E;if(g[M]!==1||g[N]!==1){y[M]=getNAF(a[M],g[M],this._bitLength),y[N]=getNAF(a[N],g[N],this._bitLength),b=Math.max(y[M].length,b),b=Math.max(y[N].length,b);continue}var Z=[t[M],null,null,t[N]];t[M].y.cmp(t[N].y)===0?(Z[1]=t[M].add(t[N]),Z[2]=t[M].toJ().mixedAdd(t[N].neg())):t[M].y.cmp(t[N].y.redNeg())===0?(Z[1]=t[M].toJ().mixedAdd(t[N]),Z[2]=t[M].add(t[N].neg())):(Z[1]=t[M].toJ().mixedAdd(t[N]),Z[2]=t[M].toJ().mixedAdd(t[N].neg()));var ee=[-3,-1,-5,-7,0,7,5,1,3],F=getJSF(a[M],a[N]);for(b=Math.max(F[0].length,b),y[M]=new Array(b),y[N]=new Array(b),C=0;C<b;C++){var O=F[0][C]|0,k=F[1][C]|0;y[M][C]=ee[(O+1)*3+(k+1)],y[N][C]=0,p[M]=Z}}var H=this.jpoint(null,null,null),ce=this._wnafT4;for(E=b;E>=0;E--){for(var U=0;E>=0;){var te=!0;for(C=0;C<l;C++)ce[C]=y[C][E]|0,ce[C]!==0&&(te=!1);if(!te)break;U++,E--}if(E>=0&&U++,H=H.dblp(U),E<0)break;for(C=0;C<l;C++){var re=ce[C];re!==0&&(re>0?A=p[C][re-1>>1]:re<0&&(A=p[C][-re-1>>1].neg()),A.type==="affine"?H=H.mixedAdd(A):H=H.add(A))}}for(E=0;E<l;E++)p[E]=null;return h?H:H.toP()};function BasePoint(n,e){this.curve=n,this.type=e,this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function n(){throw new Error("Not implemented")};BasePoint.prototype.validate=function n(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function n(e,t){e=utils$l.toArray(e,t);var a=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*a){e[0]===6?assert$e(e[e.length-1]%2===0):e[0]===7&&assert$e(e[e.length-1]%2===1);var l=this.point(e.slice(1,1+a),e.slice(1+a,1+2*a));return l}else if((e[0]===2||e[0]===3)&&e.length-1===a)return this.pointFromX(e.slice(1,1+a),e[0]===3);throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function n(e){return this.encode(e,!0)};BasePoint.prototype._encode=function n(e){var t=this.curve.p.byteLength(),a=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(a):[4].concat(a,this.getY().toArray("be",t))};BasePoint.prototype.encode=function n(e,t){return utils$l.encode(this._encode(t),e)};BasePoint.prototype.precompute=function n(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};BasePoint.prototype._hasDoubles=function n(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};BasePoint.prototype._getDoubles=function n(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var a=[this],l=this,h=0;h<t;h+=e){for(var g=0;g<e;g++)l=l.dbl();a.push(l)}return{step:e,points:a}};BasePoint.prototype._getNAFPoints=function n(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],a=(1<<e)-1,l=a===1?null:this.dbl(),h=1;h<a;h++)t[h]=t[h-1].add(l);return{wnd:e,points:t}};BasePoint.prototype._getBeta=function n(){return null};BasePoint.prototype.dblp=function n(e){for(var t=this,a=0;a<e;a++)t=t.dbl();return t};var utils$k=utils$n,BN$7=bnExports,inherits$4=inherits_browserExports,Base$2=base,assert$d=utils$k.assert;function ShortCurve(n){Base$2.call(this,"short",n),this.a=new BN$7(n.a,16).toRed(this.red),this.b=new BN$7(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits$4(ShortCurve,Base$2);var short=ShortCurve;ShortCurve.prototype._getEndomorphism=function n(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,a;if(e.beta)t=new BN$7(e.beta,16).toRed(this.red);else{var l=this._getEndoRoots(this.p);t=l[0].cmp(l[1])<0?l[0]:l[1],t=t.toRed(this.red)}if(e.lambda)a=new BN$7(e.lambda,16);else{var h=this._getEndoRoots(this.n);this.g.mul(h[0]).x.cmp(this.g.x.redMul(t))===0?a=h[0]:(a=h[1],assert$d(this.g.mul(a).x.cmp(this.g.x.redMul(t))===0))}var g;return e.basis?g=e.basis.map(function(p){return{a:new BN$7(p.a,16),b:new BN$7(p.b,16)}}):g=this._getEndoBasis(a),{beta:t,lambda:a,basis:g}}};ShortCurve.prototype._getEndoRoots=function n(e){var t=e===this.p?this.red:BN$7.mont(e),a=new BN$7(2).toRed(t).redInvm(),l=a.redNeg(),h=new BN$7(3).toRed(t).redNeg().redSqrt().redMul(a),g=l.redAdd(h).fromRed(),p=l.redSub(h).fromRed();return[g,p]};ShortCurve.prototype._getEndoBasis=function n(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),a=e,l=this.n.clone(),h=new BN$7(1),g=new BN$7(0),p=new BN$7(0),y=new BN$7(1),b,E,C,A,B,M,N,Z=0,ee,F;a.cmpn(0)!==0;){var O=l.div(a);ee=l.sub(O.mul(a)),F=p.sub(O.mul(h));var k=y.sub(O.mul(g));if(!C&&ee.cmp(t)<0)b=N.neg(),E=h,C=ee.neg(),A=F;else if(C&&++Z===2)break;N=ee,l=a,a=ee,p=h,h=F,y=g,g=k}B=ee.neg(),M=F;var H=C.sqr().add(A.sqr()),ce=B.sqr().add(M.sqr());return ce.cmp(H)>=0&&(B=b,M=E),C.negative&&(C=C.neg(),A=A.neg()),B.negative&&(B=B.neg(),M=M.neg()),[{a:C,b:A},{a:B,b:M}]};ShortCurve.prototype._endoSplit=function n(e){var t=this.endo.basis,a=t[0],l=t[1],h=l.b.mul(e).divRound(this.n),g=a.b.neg().mul(e).divRound(this.n),p=h.mul(a.a),y=g.mul(l.a),b=h.mul(a.b),E=g.mul(l.b),C=e.sub(p).sub(y),A=b.add(E).neg();return{k1:C,k2:A}};ShortCurve.prototype.pointFromX=function n(e,t){e=new BN$7(e,16),e.red||(e=e.toRed(this.red));var a=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),l=a.redSqrt();if(l.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var h=l.fromRed().isOdd();return(t&&!h||!t&&h)&&(l=l.redNeg()),this.point(e,l)};ShortCurve.prototype.validate=function n(e){if(e.inf)return!0;var t=e.x,a=e.y,l=this.a.redMul(t),h=t.redSqr().redMul(t).redIAdd(l).redIAdd(this.b);return a.redSqr().redISub(h).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function n(e,t,a){for(var l=this._endoWnafT1,h=this._endoWnafT2,g=0;g<e.length;g++){var p=this._endoSplit(t[g]),y=e[g],b=y._getBeta();p.k1.negative&&(p.k1.ineg(),y=y.neg(!0)),p.k2.negative&&(p.k2.ineg(),b=b.neg(!0)),l[g*2]=y,l[g*2+1]=b,h[g*2]=p.k1,h[g*2+1]=p.k2}for(var E=this._wnafMulAdd(1,l,h,g*2,a),C=0;C<g*2;C++)l[C]=null,h[C]=null;return E};function Point$2(n,e,t,a){Base$2.BasePoint.call(this,n,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$7(e,16),this.y=new BN$7(t,16),a&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits$4(Point$2,Base$2.BasePoint);ShortCurve.prototype.point=function n(e,t,a){return new Point$2(this,e,t,a)};ShortCurve.prototype.pointFromJSON=function n(e,t){return Point$2.fromJSON(this,e,t)};Point$2.prototype._getBeta=function n(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var a=this.curve,l=function(h){return a.point(h.x.redMul(a.endo.beta),h.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(l)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(l)}}}return t}};Point$2.prototype.toJSON=function n(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point$2.fromJSON=function n(e,t,a){typeof t=="string"&&(t=JSON.parse(t));var l=e.point(t[0],t[1],a);if(!t[2])return l;function h(p){return e.point(p[0],p[1],a)}var g=t[2];return l.precomputed={beta:null,doubles:g.doubles&&{step:g.doubles.step,points:[l].concat(g.doubles.points.map(h))},naf:g.naf&&{wnd:g.naf.wnd,points:[l].concat(g.naf.points.map(h))}},l};Point$2.prototype.inspect=function n(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$2.prototype.isInfinity=function n(){return this.inf};Point$2.prototype.add=function n(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var a=t.redSqr().redISub(this.x).redISub(e.x),l=t.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,l)};Point$2.prototype.dbl=function n(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,a=this.x.redSqr(),l=e.redInvm(),h=a.redAdd(a).redIAdd(a).redIAdd(t).redMul(l),g=h.redSqr().redISub(this.x.redAdd(this.x)),p=h.redMul(this.x.redSub(g)).redISub(this.y);return this.curve.point(g,p)};Point$2.prototype.getX=function n(){return this.x.fromRed()};Point$2.prototype.getY=function n(){return this.y.fromRed()};Point$2.prototype.mul=function n(e){return e=new BN$7(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Point$2.prototype.mulAdd=function n(e,t,a){var l=[this,t],h=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(l,h):this.curve._wnafMulAdd(1,l,h,2)};Point$2.prototype.jmulAdd=function n(e,t,a){var l=[this,t],h=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(l,h,!0):this.curve._wnafMulAdd(1,l,h,2,!0)};Point$2.prototype.eq=function n(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Point$2.prototype.neg=function n(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var a=this.precomputed,l=function(h){return h.neg()};t.precomputed={naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(l)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(l)}}}return t};Point$2.prototype.toJ=function n(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function JPoint(n,e,t,a){Base$2.BasePoint.call(this,n,"jacobian"),e===null&&t===null&&a===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$7(0)):(this.x=new BN$7(e,16),this.y=new BN$7(t,16),this.z=new BN$7(a,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits$4(JPoint,Base$2.BasePoint);ShortCurve.prototype.jpoint=function n(e,t,a){return new JPoint(this,e,t,a)};JPoint.prototype.toP=function n(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),a=this.x.redMul(t),l=this.y.redMul(t).redMul(e);return this.curve.point(a,l)};JPoint.prototype.neg=function n(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function n(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),a=this.z.redSqr(),l=this.x.redMul(t),h=e.x.redMul(a),g=this.y.redMul(t.redMul(e.z)),p=e.y.redMul(a.redMul(this.z)),y=l.redSub(h),b=g.redSub(p);if(y.cmpn(0)===0)return b.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var E=y.redSqr(),C=E.redMul(y),A=l.redMul(E),B=b.redSqr().redIAdd(C).redISub(A).redISub(A),M=b.redMul(A.redISub(B)).redISub(g.redMul(C)),N=this.z.redMul(e.z).redMul(y);return this.curve.jpoint(B,M,N)};JPoint.prototype.mixedAdd=function n(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),a=this.x,l=e.x.redMul(t),h=this.y,g=e.y.redMul(t).redMul(this.z),p=a.redSub(l),y=h.redSub(g);if(p.cmpn(0)===0)return y.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var b=p.redSqr(),E=b.redMul(p),C=a.redMul(b),A=y.redSqr().redIAdd(E).redISub(C).redISub(C),B=y.redMul(C.redISub(A)).redISub(h.redMul(E)),M=this.z.redMul(p);return this.curve.jpoint(A,B,M)};JPoint.prototype.dblp=function n(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var a=this;for(t=0;t<e;t++)a=a.dbl();return a}var l=this.curve.a,h=this.curve.tinv,g=this.x,p=this.y,y=this.z,b=y.redSqr().redSqr(),E=p.redAdd(p);for(t=0;t<e;t++){var C=g.redSqr(),A=E.redSqr(),B=A.redSqr(),M=C.redAdd(C).redIAdd(C).redIAdd(l.redMul(b)),N=g.redMul(A),Z=M.redSqr().redISub(N.redAdd(N)),ee=N.redISub(Z),F=M.redMul(ee);F=F.redIAdd(F).redISub(B);var O=E.redMul(y);t+1<e&&(b=b.redMul(B)),g=Z,y=O,E=F}return this.curve.jpoint(g,E.redMul(h),y)};JPoint.prototype.dbl=function n(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint.prototype._zeroDbl=function n(){var e,t,a;if(this.zOne){var l=this.x.redSqr(),h=this.y.redSqr(),g=h.redSqr(),p=this.x.redAdd(h).redSqr().redISub(l).redISub(g);p=p.redIAdd(p);var y=l.redAdd(l).redIAdd(l),b=y.redSqr().redISub(p).redISub(p),E=g.redIAdd(g);E=E.redIAdd(E),E=E.redIAdd(E),e=b,t=y.redMul(p.redISub(b)).redISub(E),a=this.y.redAdd(this.y)}else{var C=this.x.redSqr(),A=this.y.redSqr(),B=A.redSqr(),M=this.x.redAdd(A).redSqr().redISub(C).redISub(B);M=M.redIAdd(M);var N=C.redAdd(C).redIAdd(C),Z=N.redSqr(),ee=B.redIAdd(B);ee=ee.redIAdd(ee),ee=ee.redIAdd(ee),e=Z.redISub(M).redISub(M),t=N.redMul(M.redISub(e)).redISub(ee),a=this.y.redMul(this.z),a=a.redIAdd(a)}return this.curve.jpoint(e,t,a)};JPoint.prototype._threeDbl=function n(){var e,t,a;if(this.zOne){var l=this.x.redSqr(),h=this.y.redSqr(),g=h.redSqr(),p=this.x.redAdd(h).redSqr().redISub(l).redISub(g);p=p.redIAdd(p);var y=l.redAdd(l).redIAdd(l).redIAdd(this.curve.a),b=y.redSqr().redISub(p).redISub(p);e=b;var E=g.redIAdd(g);E=E.redIAdd(E),E=E.redIAdd(E),t=y.redMul(p.redISub(b)).redISub(E),a=this.y.redAdd(this.y)}else{var C=this.z.redSqr(),A=this.y.redSqr(),B=this.x.redMul(A),M=this.x.redSub(C).redMul(this.x.redAdd(C));M=M.redAdd(M).redIAdd(M);var N=B.redIAdd(B);N=N.redIAdd(N);var Z=N.redAdd(N);e=M.redSqr().redISub(Z),a=this.y.redAdd(this.z).redSqr().redISub(A).redISub(C);var ee=A.redSqr();ee=ee.redIAdd(ee),ee=ee.redIAdd(ee),ee=ee.redIAdd(ee),t=M.redMul(N.redISub(e)).redISub(ee)}return this.curve.jpoint(e,t,a)};JPoint.prototype._dbl=function n(){var e=this.curve.a,t=this.x,a=this.y,l=this.z,h=l.redSqr().redSqr(),g=t.redSqr(),p=a.redSqr(),y=g.redAdd(g).redIAdd(g).redIAdd(e.redMul(h)),b=t.redAdd(t);b=b.redIAdd(b);var E=b.redMul(p),C=y.redSqr().redISub(E.redAdd(E)),A=E.redISub(C),B=p.redSqr();B=B.redIAdd(B),B=B.redIAdd(B),B=B.redIAdd(B);var M=y.redMul(A).redISub(B),N=a.redAdd(a).redMul(l);return this.curve.jpoint(C,M,N)};JPoint.prototype.trpl=function n(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),a=this.z.redSqr(),l=t.redSqr(),h=e.redAdd(e).redIAdd(e),g=h.redSqr(),p=this.x.redAdd(t).redSqr().redISub(e).redISub(l);p=p.redIAdd(p),p=p.redAdd(p).redIAdd(p),p=p.redISub(g);var y=p.redSqr(),b=l.redIAdd(l);b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var E=h.redIAdd(p).redSqr().redISub(g).redISub(y).redISub(b),C=t.redMul(E);C=C.redIAdd(C),C=C.redIAdd(C);var A=this.x.redMul(y).redISub(C);A=A.redIAdd(A),A=A.redIAdd(A);var B=this.y.redMul(E.redMul(b.redISub(E)).redISub(p.redMul(y)));B=B.redIAdd(B),B=B.redIAdd(B),B=B.redIAdd(B);var M=this.z.redAdd(p).redSqr().redISub(a).redISub(y);return this.curve.jpoint(A,B,M)};JPoint.prototype.mul=function n(e,t){return e=new BN$7(e,t),this.curve._wnafMul(this,e)};JPoint.prototype.eq=function n(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),a=e.z.redSqr();if(this.x.redMul(a).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var l=t.redMul(this.z),h=a.redMul(e.z);return this.y.redMul(h).redISub(e.y.redMul(l)).cmpn(0)===0};JPoint.prototype.eqXToP=function n(e){var t=this.z.redSqr(),a=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(a)===0)return!0;for(var l=e.clone(),h=this.curve.redN.redMul(t);;){if(l.iadd(this.curve.n),l.cmp(this.curve.p)>=0)return!1;if(a.redIAdd(h),this.x.cmp(a)===0)return!0}};JPoint.prototype.inspect=function n(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function n(){return this.z.cmpn(0)===0};var BN$6=bnExports,inherits$3=inherits_browserExports,Base$1=base,utils$j=utils$n;function MontCurve(n){Base$1.call(this,"mont",n),this.a=new BN$6(n.a,16).toRed(this.red),this.b=new BN$6(n.b,16).toRed(this.red),this.i4=new BN$6(4).toRed(this.red).redInvm(),this.two=new BN$6(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$3(MontCurve,Base$1);var mont=MontCurve;MontCurve.prototype.validate=function n(e){var t=e.normalize().x,a=t.redSqr(),l=a.redMul(t).redAdd(a.redMul(this.a)).redAdd(t),h=l.redSqrt();return h.redSqr().cmp(l)===0};function Point$1(n,e,t){Base$1.BasePoint.call(this,n,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN$6(e,16),this.z=new BN$6(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits$3(Point$1,Base$1.BasePoint);MontCurve.prototype.decodePoint=function n(e,t){return this.point(utils$j.toArray(e,t),1)};MontCurve.prototype.point=function n(e,t){return new Point$1(this,e,t)};MontCurve.prototype.pointFromJSON=function n(e){return Point$1.fromJSON(this,e)};Point$1.prototype.precompute=function n(){};Point$1.prototype._encode=function n(){return this.getX().toArray("be",this.curve.p.byteLength())};Point$1.fromJSON=function n(e,t){return new Point$1(e,t[0],t[1]||e.one)};Point$1.prototype.inspect=function n(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$1.prototype.isInfinity=function n(){return this.z.cmpn(0)===0};Point$1.prototype.dbl=function n(){var e=this.x.redAdd(this.z),t=e.redSqr(),a=this.x.redSub(this.z),l=a.redSqr(),h=t.redSub(l),g=t.redMul(l),p=h.redMul(l.redAdd(this.curve.a24.redMul(h)));return this.curve.point(g,p)};Point$1.prototype.add=function n(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.diffAdd=function n(e,t){var a=this.x.redAdd(this.z),l=this.x.redSub(this.z),h=e.x.redAdd(e.z),g=e.x.redSub(e.z),p=g.redMul(a),y=h.redMul(l),b=t.z.redMul(p.redAdd(y).redSqr()),E=t.x.redMul(p.redISub(y).redSqr());return this.curve.point(b,E)};Point$1.prototype.mul=function n(e){for(var t=e.clone(),a=this,l=this.curve.point(null,null),h=this,g=[];t.cmpn(0)!==0;t.iushrn(1))g.push(t.andln(1));for(var p=g.length-1;p>=0;p--)g[p]===0?(a=a.diffAdd(l,h),l=l.dbl()):(l=a.diffAdd(l,h),a=a.dbl());return l};Point$1.prototype.mulAdd=function n(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.jumlAdd=function n(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.eq=function n(e){return this.getX().cmp(e.getX())===0};Point$1.prototype.normalize=function n(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Point$1.prototype.getX=function n(){return this.normalize(),this.x.fromRed()};var utils$i=utils$n,BN$5=bnExports,inherits$2=inherits_browserExports,Base=base,assert$c=utils$i.assert;function EdwardsCurve(n){this.twisted=(n.a|0)!==1,this.mOneA=this.twisted&&(n.a|0)===-1,this.extended=this.mOneA,Base.call(this,"edwards",n),this.a=new BN$5(n.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN$5(n.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN$5(n.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$c(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(n.c|0)===1}inherits$2(EdwardsCurve,Base);var edwards=EdwardsCurve;EdwardsCurve.prototype._mulA=function n(e){return this.mOneA?e.redNeg():this.a.redMul(e)};EdwardsCurve.prototype._mulC=function n(e){return this.oneC?e:this.c.redMul(e)};EdwardsCurve.prototype.jpoint=function n(e,t,a,l){return this.point(e,t,a,l)};EdwardsCurve.prototype.pointFromX=function n(e,t){e=new BN$5(e,16),e.red||(e=e.toRed(this.red));var a=e.redSqr(),l=this.c2.redSub(this.a.redMul(a)),h=this.one.redSub(this.c2.redMul(this.d).redMul(a)),g=l.redMul(h.redInvm()),p=g.redSqrt();if(p.redSqr().redSub(g).cmp(this.zero)!==0)throw new Error("invalid point");var y=p.fromRed().isOdd();return(t&&!y||!t&&y)&&(p=p.redNeg()),this.point(e,p)};EdwardsCurve.prototype.pointFromY=function n(e,t){e=new BN$5(e,16),e.red||(e=e.toRed(this.red));var a=e.redSqr(),l=a.redSub(this.c2),h=a.redMul(this.d).redMul(this.c2).redSub(this.a),g=l.redMul(h.redInvm());if(g.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var p=g.redSqrt();if(p.redSqr().redSub(g).cmp(this.zero)!==0)throw new Error("invalid point");return p.fromRed().isOdd()!==t&&(p=p.redNeg()),this.point(p,e)};EdwardsCurve.prototype.validate=function n(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),a=e.y.redSqr(),l=t.redMul(this.a).redAdd(a),h=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(a)));return l.cmp(h)===0};function Point(n,e,t,a,l){Base.BasePoint.call(this,n,"projective"),e===null&&t===null&&a===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN$5(e,16),this.y=new BN$5(t,16),this.z=a?new BN$5(a,16):this.curve.one,this.t=l&&new BN$5(l,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits$2(Point,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function n(e){return Point.fromJSON(this,e)};EdwardsCurve.prototype.point=function n(e,t,a,l){return new Point(this,e,t,a,l)};Point.fromJSON=function n(e,t){return new Point(e,t[0],t[1],t[2])};Point.prototype.inspect=function n(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function n(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point.prototype._extDbl=function n(){var e=this.x.redSqr(),t=this.y.redSqr(),a=this.z.redSqr();a=a.redIAdd(a);var l=this.curve._mulA(e),h=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),g=l.redAdd(t),p=g.redSub(a),y=l.redSub(t),b=h.redMul(p),E=g.redMul(y),C=h.redMul(y),A=p.redMul(g);return this.curve.point(b,E,A,C)};Point.prototype._projDbl=function n(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),a=this.y.redSqr(),l,h,g,p,y,b;if(this.curve.twisted){p=this.curve._mulA(t);var E=p.redAdd(a);this.zOne?(l=e.redSub(t).redSub(a).redMul(E.redSub(this.curve.two)),h=E.redMul(p.redSub(a)),g=E.redSqr().redSub(E).redSub(E)):(y=this.z.redSqr(),b=E.redSub(y).redISub(y),l=e.redSub(t).redISub(a).redMul(b),h=E.redMul(p.redSub(a)),g=E.redMul(b))}else p=t.redAdd(a),y=this.curve._mulC(this.z).redSqr(),b=p.redSub(y).redSub(y),l=this.curve._mulC(e.redISub(p)).redMul(b),h=this.curve._mulC(p).redMul(t.redISub(a)),g=p.redMul(b);return this.curve.point(l,h,g)};Point.prototype.dbl=function n(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Point.prototype._extAdd=function n(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),a=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),l=this.t.redMul(this.curve.dd).redMul(e.t),h=this.z.redMul(e.z.redAdd(e.z)),g=a.redSub(t),p=h.redSub(l),y=h.redAdd(l),b=a.redAdd(t),E=g.redMul(p),C=y.redMul(b),A=g.redMul(b),B=p.redMul(y);return this.curve.point(E,C,B,A)};Point.prototype._projAdd=function n(e){var t=this.z.redMul(e.z),a=t.redSqr(),l=this.x.redMul(e.x),h=this.y.redMul(e.y),g=this.curve.d.redMul(l).redMul(h),p=a.redSub(g),y=a.redAdd(g),b=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(l).redISub(h),E=t.redMul(p).redMul(b),C,A;return this.curve.twisted?(C=t.redMul(y).redMul(h.redSub(this.curve._mulA(l))),A=p.redMul(y)):(C=t.redMul(y).redMul(h.redSub(l)),A=this.curve._mulC(p).redMul(y)),this.curve.point(E,C,A)};Point.prototype.add=function n(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Point.prototype.mul=function n(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Point.prototype.mulAdd=function n(e,t,a){return this.curve._wnafMulAdd(1,[this,t],[e,a],2,!1)};Point.prototype.jmulAdd=function n(e,t,a){return this.curve._wnafMulAdd(1,[this,t],[e,a],2,!0)};Point.prototype.normalize=function n(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Point.prototype.neg=function n(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point.prototype.getX=function n(){return this.normalize(),this.x.fromRed()};Point.prototype.getY=function n(){return this.normalize(),this.y.fromRed()};Point.prototype.eq=function n(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Point.prototype.eqXToP=function n(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var a=e.clone(),l=this.curve.redN.redMul(this.z);;){if(a.iadd(this.curve.n),a.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(l),this.x.cmp(t)===0)return!0}};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add;(function(n){var e=n;e.base=base,e.short=short,e.mont=mont,e.edwards=edwards})(curve);var curves$3={},hash$2={},utils$h={},assert$b=minimalisticAssert,inherits$1=inherits_browserExports;utils$h.inherits=inherits$1;function isSurrogatePair(n,e){return(n.charCodeAt(e)&64512)!==55296||e<0||e+1>=n.length?!1:(n.charCodeAt(e+1)&64512)===56320}function toArray$1(n,e){if(Array.isArray(n))return n.slice();if(!n)return[];var t=[];if(typeof n=="string")if(e){if(e==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),l=0;l<n.length;l+=2)t.push(parseInt(n[l]+n[l+1],16))}else for(var a=0,l=0;l<n.length;l++){var h=n.charCodeAt(l);h<128?t[a++]=h:h<2048?(t[a++]=h>>6|192,t[a++]=h&63|128):isSurrogatePair(n,l)?(h=65536+((h&1023)<<10)+(n.charCodeAt(++l)&1023),t[a++]=h>>18|240,t[a++]=h>>12&63|128,t[a++]=h>>6&63|128,t[a++]=h&63|128):(t[a++]=h>>12|224,t[a++]=h>>6&63|128,t[a++]=h&63|128)}else for(l=0;l<n.length;l++)t[l]=n[l]|0;return t}utils$h.toArray=toArray$1;function toHex(n){for(var e="",t=0;t<n.length;t++)e+=zero2(n[t].toString(16));return e}utils$h.toHex=toHex;function htonl(n){var e=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return e>>>0}utils$h.htonl=htonl;function toHex32(n,e){for(var t="",a=0;a<n.length;a++){var l=n[a];e==="little"&&(l=htonl(l)),t+=zero8(l.toString(16))}return t}utils$h.toHex32=toHex32;function zero2(n){return n.length===1?"0"+n:n}utils$h.zero2=zero2;function zero8(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}utils$h.zero8=zero8;function join32(n,e,t,a){var l=t-e;assert$b(l%4===0);for(var h=new Array(l/4),g=0,p=e;g<h.length;g++,p+=4){var y;a==="big"?y=n[p]<<24|n[p+1]<<16|n[p+2]<<8|n[p+3]:y=n[p+3]<<24|n[p+2]<<16|n[p+1]<<8|n[p],h[g]=y>>>0}return h}utils$h.join32=join32;function split32(n,e){for(var t=new Array(n.length*4),a=0,l=0;a<n.length;a++,l+=4){var h=n[a];e==="big"?(t[l]=h>>>24,t[l+1]=h>>>16&255,t[l+2]=h>>>8&255,t[l+3]=h&255):(t[l+3]=h>>>24,t[l+2]=h>>>16&255,t[l+1]=h>>>8&255,t[l]=h&255)}return t}utils$h.split32=split32;function rotr32$1(n,e){return n>>>e|n<<32-e}utils$h.rotr32=rotr32$1;function rotl32$2(n,e){return n<<e|n>>>32-e}utils$h.rotl32=rotl32$2;function sum32$3(n,e){return n+e>>>0}utils$h.sum32=sum32$3;function sum32_3$1(n,e,t){return n+e+t>>>0}utils$h.sum32_3=sum32_3$1;function sum32_4$2(n,e,t,a){return n+e+t+a>>>0}utils$h.sum32_4=sum32_4$2;function sum32_5$2(n,e,t,a,l){return n+e+t+a+l>>>0}utils$h.sum32_5=sum32_5$2;function sum64$1(n,e,t,a){var l=n[e],h=n[e+1],g=a+h>>>0,p=(g<a?1:0)+t+l;n[e]=p>>>0,n[e+1]=g}utils$h.sum64=sum64$1;function sum64_hi$1(n,e,t,a){var l=e+a>>>0,h=(l<e?1:0)+n+t;return h>>>0}utils$h.sum64_hi=sum64_hi$1;function sum64_lo$1(n,e,t,a){var l=e+a;return l>>>0}utils$h.sum64_lo=sum64_lo$1;function sum64_4_hi$1(n,e,t,a,l,h,g,p){var y=0,b=e;b=b+a>>>0,y+=b<e?1:0,b=b+h>>>0,y+=b<h?1:0,b=b+p>>>0,y+=b<p?1:0;var E=n+t+l+g+y;return E>>>0}utils$h.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(n,e,t,a,l,h,g,p){var y=e+a+h+p;return y>>>0}utils$h.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(n,e,t,a,l,h,g,p,y,b){var E=0,C=e;C=C+a>>>0,E+=C<e?1:0,C=C+h>>>0,E+=C<h?1:0,C=C+p>>>0,E+=C<p?1:0,C=C+b>>>0,E+=C<b?1:0;var A=n+t+l+g+y+E;return A>>>0}utils$h.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(n,e,t,a,l,h,g,p,y,b){var E=e+a+h+p+b;return E>>>0}utils$h.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(n,e,t){var a=e<<32-t|n>>>t;return a>>>0}utils$h.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(n,e,t){var a=n<<32-t|e>>>t;return a>>>0}utils$h.rotr64_lo=rotr64_lo$1;function shr64_hi$1(n,e,t){return n>>>t}utils$h.shr64_hi=shr64_hi$1;function shr64_lo$1(n,e,t){var a=n<<32-t|e>>>t;return a>>>0}utils$h.shr64_lo=shr64_lo$1;var common$5={},utils$g=utils$h,assert$a=minimalisticAssert;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$5.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function n(e,t){if(e=utils$g.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var a=e.length%this._delta8;this.pending=e.slice(e.length-a,e.length),this.pending.length===0&&(this.pending=null),e=utils$g.join32(e,0,e.length-a,this.endian);for(var l=0;l<e.length;l+=this._delta32)this._update(e,l,l+this._delta32)}return this};BlockHash$4.prototype.digest=function n(e){return this.update(this._pad()),assert$a(this.pending===null),this._digest(e)};BlockHash$4.prototype._pad=function n(){var e=this.pendingTotal,t=this._delta8,a=t-(e+this.padLength)%t,l=new Array(a+this.padLength);l[0]=128;for(var h=1;h<a;h++)l[h]=0;if(e<<=3,this.endian==="big"){for(var g=8;g<this.padLength;g++)l[h++]=0;l[h++]=0,l[h++]=0,l[h++]=0,l[h++]=0,l[h++]=e>>>24&255,l[h++]=e>>>16&255,l[h++]=e>>>8&255,l[h++]=e&255}else for(l[h++]=e&255,l[h++]=e>>>8&255,l[h++]=e>>>16&255,l[h++]=e>>>24&255,l[h++]=0,l[h++]=0,l[h++]=0,l[h++]=0,g=8;g<this.padLength;g++)l[h++]=0;return l};var sha={},common$4={},utils$f=utils$h,rotr32=utils$f.rotr32;function ft_1$1(n,e,t,a){if(n===0)return ch32$1(e,t,a);if(n===1||n===3)return p32(e,t,a);if(n===2)return maj32$1(e,t,a)}common$4.ft_1=ft_1$1;function ch32$1(n,e,t){return n&e^~n&t}common$4.ch32=ch32$1;function maj32$1(n,e,t){return n&e^n&t^e&t}common$4.maj32=maj32$1;function p32(n,e,t){return n^e^t}common$4.p32=p32;function s0_256$1(n){return rotr32(n,2)^rotr32(n,13)^rotr32(n,22)}common$4.s0_256=s0_256$1;function s1_256$1(n){return rotr32(n,6)^rotr32(n,11)^rotr32(n,25)}common$4.s1_256=s1_256$1;function g0_256$1(n){return rotr32(n,7)^rotr32(n,18)^n>>>3}common$4.g0_256=g0_256$1;function g1_256$1(n){return rotr32(n,17)^rotr32(n,19)^n>>>10}common$4.g1_256=g1_256$1;var utils$e=utils$h,common$3=common$5,shaCommon$1=common$4,rotl32$1=utils$e.rotl32,sum32$2=utils$e.sum32,sum32_5$1=utils$e.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$3.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$e.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function n(e,t){for(var a=this.W,l=0;l<16;l++)a[l]=e[t+l];for(;l<a.length;l++)a[l]=rotl32$1(a[l-3]^a[l-8]^a[l-14]^a[l-16],1);var h=this.h[0],g=this.h[1],p=this.h[2],y=this.h[3],b=this.h[4];for(l=0;l<a.length;l++){var E=~~(l/20),C=sum32_5$1(rotl32$1(h,5),ft_1(E,g,p,y),b,a[l],sha1_K[E]);b=y,y=p,p=rotl32$1(g,30),g=h,h=C}this.h[0]=sum32$2(this.h[0],h),this.h[1]=sum32$2(this.h[1],g),this.h[2]=sum32$2(this.h[2],p),this.h[3]=sum32$2(this.h[3],y),this.h[4]=sum32$2(this.h[4],b)};SHA1.prototype._digest=function n(e){return e==="hex"?utils$e.toHex32(this.h,"big"):utils$e.split32(this.h,"big")};var utils$d=utils$h,common$2=common$5,shaCommon=common$4,assert$9=minimalisticAssert,sum32$1=utils$d.sum32,sum32_4$1=utils$d.sum32_4,sum32_5=utils$d.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$2.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$d.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512;SHA256$1.outSize=256;SHA256$1.hmacStrength=192;SHA256$1.padLength=64;SHA256$1.prototype._update=function n(e,t){for(var a=this.W,l=0;l<16;l++)a[l]=e[t+l];for(;l<a.length;l++)a[l]=sum32_4$1(g1_256(a[l-2]),a[l-7],g0_256(a[l-15]),a[l-16]);var h=this.h[0],g=this.h[1],p=this.h[2],y=this.h[3],b=this.h[4],E=this.h[5],C=this.h[6],A=this.h[7];for(assert$9(this.k.length===a.length),l=0;l<a.length;l++){var B=sum32_5(A,s1_256(b),ch32(b,E,C),this.k[l],a[l]),M=sum32$1(s0_256(h),maj32(h,g,p));A=C,C=E,E=b,b=sum32$1(y,B),y=p,p=g,g=h,h=sum32$1(B,M)}this.h[0]=sum32$1(this.h[0],h),this.h[1]=sum32$1(this.h[1],g),this.h[2]=sum32$1(this.h[2],p),this.h[3]=sum32$1(this.h[3],y),this.h[4]=sum32$1(this.h[4],b),this.h[5]=sum32$1(this.h[5],E),this.h[6]=sum32$1(this.h[6],C),this.h[7]=sum32$1(this.h[7],A)};SHA256$1.prototype._digest=function n(e){return e==="hex"?utils$d.toHex32(this.h,"big"):utils$d.split32(this.h,"big")};var utils$c=utils$h,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$c.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function n(e){return e==="hex"?utils$c.toHex32(this.h.slice(0,7),"big"):utils$c.split32(this.h.slice(0,7),"big")};var utils$b=utils$h,common$1=common$5,assert$8=minimalisticAssert,rotr64_hi=utils$b.rotr64_hi,rotr64_lo=utils$b.rotr64_lo,shr64_hi=utils$b.shr64_hi,shr64_lo=utils$b.shr64_lo,sum64=utils$b.sum64,sum64_hi=utils$b.sum64_hi,sum64_lo=utils$b.sum64_lo,sum64_4_hi=utils$b.sum64_4_hi,sum64_4_lo=utils$b.sum64_4_lo,sum64_5_hi=utils$b.sum64_5_hi,sum64_5_lo=utils$b.sum64_5_lo,BlockHash$1=common$1.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$b.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;SHA512$1.blockSize=1024;SHA512$1.outSize=512;SHA512$1.hmacStrength=192;SHA512$1.padLength=128;SHA512$1.prototype._prepareBlock=function n(e,t){for(var a=this.W,l=0;l<32;l++)a[l]=e[t+l];for(;l<a.length;l+=2){var h=g1_512_hi(a[l-4],a[l-3]),g=g1_512_lo(a[l-4],a[l-3]),p=a[l-14],y=a[l-13],b=g0_512_hi(a[l-30],a[l-29]),E=g0_512_lo(a[l-30],a[l-29]),C=a[l-32],A=a[l-31];a[l]=sum64_4_hi(h,g,p,y,b,E,C,A),a[l+1]=sum64_4_lo(h,g,p,y,b,E,C,A)}};SHA512$1.prototype._update=function n(e,t){this._prepareBlock(e,t);var a=this.W,l=this.h[0],h=this.h[1],g=this.h[2],p=this.h[3],y=this.h[4],b=this.h[5],E=this.h[6],C=this.h[7],A=this.h[8],B=this.h[9],M=this.h[10],N=this.h[11],Z=this.h[12],ee=this.h[13],F=this.h[14],O=this.h[15];assert$8(this.k.length===a.length);for(var k=0;k<a.length;k+=2){var H=F,ce=O,U=s1_512_hi(A,B),te=s1_512_lo(A,B),re=ch64_hi(A,B,M,N,Z),ue=ch64_lo(A,B,M,N,Z,ee),V=this.k[k],S=this.k[k+1],T=a[k],G=a[k+1],Q=sum64_5_hi(H,ce,U,te,re,ue,V,S,T,G),le=sum64_5_lo(H,ce,U,te,re,ue,V,S,T,G);H=s0_512_hi(l,h),ce=s0_512_lo(l,h),U=maj64_hi(l,h,g,p,y),te=maj64_lo(l,h,g,p,y,b);var fe=sum64_hi(H,ce,U,te),q=sum64_lo(H,ce,U,te);F=Z,O=ee,Z=M,ee=N,M=A,N=B,A=sum64_hi(E,C,Q,le),B=sum64_lo(C,C,Q,le),E=y,C=b,y=g,b=p,g=l,p=h,l=sum64_hi(Q,le,fe,q),h=sum64_lo(Q,le,fe,q)}sum64(this.h,0,l,h),sum64(this.h,2,g,p),sum64(this.h,4,y,b),sum64(this.h,6,E,C),sum64(this.h,8,A,B),sum64(this.h,10,M,N),sum64(this.h,12,Z,ee),sum64(this.h,14,F,O)};SHA512$1.prototype._digest=function n(e){return e==="hex"?utils$b.toHex32(this.h,"big"):utils$b.split32(this.h,"big")};function ch64_hi(n,e,t,a,l){var h=n&t^~n&l;return h<0&&(h+=4294967296),h}function ch64_lo(n,e,t,a,l,h){var g=e&a^~e&h;return g<0&&(g+=4294967296),g}function maj64_hi(n,e,t,a,l){var h=n&t^n&l^t&l;return h<0&&(h+=4294967296),h}function maj64_lo(n,e,t,a,l,h){var g=e&a^e&h^a&h;return g<0&&(g+=4294967296),g}function s0_512_hi(n,e){var t=rotr64_hi(n,e,28),a=rotr64_hi(e,n,2),l=rotr64_hi(e,n,7),h=t^a^l;return h<0&&(h+=4294967296),h}function s0_512_lo(n,e){var t=rotr64_lo(n,e,28),a=rotr64_lo(e,n,2),l=rotr64_lo(e,n,7),h=t^a^l;return h<0&&(h+=4294967296),h}function s1_512_hi(n,e){var t=rotr64_hi(n,e,14),a=rotr64_hi(n,e,18),l=rotr64_hi(e,n,9),h=t^a^l;return h<0&&(h+=4294967296),h}function s1_512_lo(n,e){var t=rotr64_lo(n,e,14),a=rotr64_lo(n,e,18),l=rotr64_lo(e,n,9),h=t^a^l;return h<0&&(h+=4294967296),h}function g0_512_hi(n,e){var t=rotr64_hi(n,e,1),a=rotr64_hi(n,e,8),l=shr64_hi(n,e,7),h=t^a^l;return h<0&&(h+=4294967296),h}function g0_512_lo(n,e){var t=rotr64_lo(n,e,1),a=rotr64_lo(n,e,8),l=shr64_lo(n,e,7),h=t^a^l;return h<0&&(h+=4294967296),h}function g1_512_hi(n,e){var t=rotr64_hi(n,e,19),a=rotr64_hi(e,n,29),l=shr64_hi(n,e,6),h=t^a^l;return h<0&&(h+=4294967296),h}function g1_512_lo(n,e){var t=rotr64_lo(n,e,19),a=rotr64_lo(e,n,29),l=shr64_lo(n,e,6),h=t^a^l;return h<0&&(h+=4294967296),h}var utils$a=utils$h,SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$a.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function n(e){return e==="hex"?utils$a.toHex32(this.h.slice(0,12),"big"):utils$a.split32(this.h.slice(0,12),"big")};sha.sha1=_1;sha.sha224=_224;sha.sha256=_256;sha.sha384=_384;sha.sha512=_512;var ripemd={},utils$9=utils$h,common=common$5,rotl32=utils$9.rotl32,sum32=utils$9.sum32,sum32_3=utils$9.sum32_3,sum32_4=utils$9.sum32_4,BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$9.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function n(e,t){for(var a=this.h[0],l=this.h[1],h=this.h[2],g=this.h[3],p=this.h[4],y=a,b=l,E=h,C=g,A=p,B=0;B<80;B++){var M=sum32(rotl32(sum32_4(a,f(B,l,h,g),e[r[B]+t],K(B)),s[B]),p);a=p,p=g,g=rotl32(h,10),h=l,l=M,M=sum32(rotl32(sum32_4(y,f(79-B,b,E,C),e[rh[B]+t],Kh(B)),sh[B]),A),y=A,A=C,C=rotl32(E,10),E=b,b=M}M=sum32_3(this.h[1],h,C),this.h[1]=sum32_3(this.h[2],g,A),this.h[2]=sum32_3(this.h[3],p,y),this.h[3]=sum32_3(this.h[4],a,b),this.h[4]=sum32_3(this.h[0],l,E),this.h[0]=M};RIPEMD160.prototype._digest=function n(e){return e==="hex"?utils$9.toHex32(this.h,"little"):utils$9.split32(this.h,"little")};function f(n,e,t,a){return n<=15?e^t^a:n<=31?e&t|~e&a:n<=47?(e|~t)^a:n<=63?e&a|t&~a:e^(t|~a)}function K(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function Kh(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$8=utils$h,assert$7=minimalisticAssert;function Hmac(n,e,t){if(!(this instanceof Hmac))return new Hmac(n,e,t);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(utils$8.toArray(e,t))}var hmac=Hmac;Hmac.prototype._init=function n(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),assert$7(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};Hmac.prototype.update=function n(e,t){return this.inner.update(e,t),this};Hmac.prototype.digest=function n(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(n){var e=n;e.utils=utils$h,e.common=common$5,e.sha=sha,e.ripemd=ripemd,e.hmac=hmac,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(hash$2);var secp256k1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1}(function(n){var e=n,t=hash$2,a=curve,l=utils$n,h=l.assert;function g(b){b.type==="short"?this.curve=new a.short(b):b.type==="edwards"?this.curve=new a.edwards(b):this.curve=new a.mont(b),this.g=this.curve.g,this.n=this.curve.n,this.hash=b.hash,h(this.g.validate(),"Invalid curve"),h(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=g;function p(b,E){Object.defineProperty(e,b,{configurable:!0,enumerable:!0,get:function(){var C=new g(E);return Object.defineProperty(e,b,{configurable:!0,enumerable:!0,value:C}),C}})}p("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),p("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),p("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),p("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),p("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),p("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),p("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var y;try{y=requireSecp256k1()}catch{y=void 0}p("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",y]})})(curves$3);var hash$1=hash$2,utils$7=utils$m,assert$6=minimalisticAssert;function HmacDRBG$1(n){if(!(this instanceof HmacDRBG$1))return new HmacDRBG$1(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=utils$7.toArray(n.entropy,n.entropyEnc||"hex"),t=utils$7.toArray(n.nonce,n.nonceEnc||"hex"),a=utils$7.toArray(n.pers,n.persEnc||"hex");assert$6(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,a)}var hmacDrbg=HmacDRBG$1;HmacDRBG$1.prototype._init=function n(e,t,a){var l=e.concat(t).concat(a);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var h=0;h<this.V.length;h++)this.K[h]=0,this.V[h]=1;this._update(l),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG$1.prototype._hmac=function n(){return new hash$1.hmac(this.hash,this.K)};HmacDRBG$1.prototype._update=function n(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG$1.prototype.reseed=function n(e,t,a,l){typeof t!="string"&&(l=a,a=t,t=null),e=utils$7.toArray(e,t),a=utils$7.toArray(a,l),assert$6(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(a||[])),this._reseed=1};HmacDRBG$1.prototype.generate=function n(e,t,a,l){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(l=a,a=t,t=null),a&&(a=utils$7.toArray(a,l||"hex"),this._update(a));for(var h=[];h.length<e;)this.V=this._hmac().update(this.V).digest(),h=h.concat(this.V);var g=h.slice(0,e);return this._update(a),this._reseed++,utils$7.encode(g,t)};var BN$4=bnExports,utils$6=utils$n,assert$5=utils$6.assert;function KeyPair$3(n,e){this.ec=n,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var key$1=KeyPair$3;KeyPair$3.fromPublic=function n(e,t,a){return t instanceof KeyPair$3?t:new KeyPair$3(e,{pub:t,pubEnc:a})};KeyPair$3.fromPrivate=function n(e,t,a){return t instanceof KeyPair$3?t:new KeyPair$3(e,{priv:t,privEnc:a})};KeyPair$3.prototype.validate=function n(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair$3.prototype.getPublic=function n(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};KeyPair$3.prototype.getPrivate=function n(e){return e==="hex"?this.priv.toString(16,2):this.priv};KeyPair$3.prototype._importPrivate=function n(e,t){this.priv=new BN$4(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$3.prototype._importPublic=function n(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?assert$5(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$5(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};KeyPair$3.prototype.derive=function n(e){return e.validate()||assert$5(e.validate(),"public point not validated"),e.mul(this.priv).getX()};KeyPair$3.prototype.sign=function n(e,t,a){return this.ec.sign(e,this,t,a)};KeyPair$3.prototype.verify=function n(e,t){return this.ec.verify(e,t,this)};KeyPair$3.prototype.inspect=function n(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BN$3=bnExports,utils$5=utils$n,assert$4=utils$5.assert;function Signature$3(n,e){if(n instanceof Signature$3)return n;this._importDER(n,e)||(assert$4(n.r&&n.s,"Signature without r or s"),this.r=new BN$3(n.r,16),this.s=new BN$3(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var signature$1=Signature$3;function Position(){this.place=0}function getLength(n,e){var t=n[e.place++];if(!(t&128))return t;var a=t&15;if(a===0||a>4)return!1;for(var l=0,h=0,g=e.place;h<a;h++,g++)l<<=8,l|=n[g],l>>>=0;return l<=127?!1:(e.place=g,l)}function rmPadding(n){for(var e=0,t=n.length-1;!n[e]&&!(n[e+1]&128)&&e<t;)e++;return e===0?n:n.slice(e)}Signature$3.prototype._importDER=function n(e,t){e=utils$5.toArray(e,t);var a=new Position;if(e[a.place++]!==48)return!1;var l=getLength(e,a);if(l===!1||l+a.place!==e.length||e[a.place++]!==2)return!1;var h=getLength(e,a);if(h===!1)return!1;var g=e.slice(a.place,h+a.place);if(a.place+=h,e[a.place++]!==2)return!1;var p=getLength(e,a);if(p===!1||e.length!==p+a.place)return!1;var y=e.slice(a.place,p+a.place);if(g[0]===0)if(g[1]&128)g=g.slice(1);else return!1;if(y[0]===0)if(y[1]&128)y=y.slice(1);else return!1;return this.r=new BN$3(g),this.s=new BN$3(y),this.recoveryParam=null,!0};function constructLength(n,e){if(e<128){n.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(n.push(t|128);--t;)n.push(e>>>(t<<3)&255);n.push(e)}Signature$3.prototype.toDER=function n(e){var t=this.r.toArray(),a=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),a[0]&128&&(a=[0].concat(a)),t=rmPadding(t),a=rmPadding(a);!a[0]&&!(a[1]&128);)a=a.slice(1);var l=[2];constructLength(l,t.length),l=l.concat(t),l.push(2),constructLength(l,a.length);var h=l.concat(a),g=[48];return constructLength(g,h.length),g=g.concat(h),utils$5.encode(g,e)};var BN$2=bnExports,HmacDRBG=hmacDrbg,utils$4=utils$n,curves$2=curves$3,rand=brorandExports,assert$3=utils$4.assert,KeyPair$2=key$1,Signature$2=signature$1;function EC$1(n){if(!(this instanceof EC$1))return new EC$1(n);typeof n=="string"&&(assert$3(Object.prototype.hasOwnProperty.call(curves$2,n),"Unknown curve "+n),n=curves$2[n]),n instanceof curves$2.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var ec$2=EC$1;EC$1.prototype.keyPair=function n(e){return new KeyPair$2(this,e)};EC$1.prototype.keyFromPrivate=function n(e,t){return KeyPair$2.fromPrivate(this,e,t)};EC$1.prototype.keyFromPublic=function n(e,t){return KeyPair$2.fromPublic(this,e,t)};EC$1.prototype.genKeyPair=function n(e){e||(e={});for(var t=new HmacDRBG({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||rand(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),a=this.n.byteLength(),l=this.n.sub(new BN$2(2));;){var h=new BN$2(t.generate(a));if(!(h.cmp(l)>0))return h.iaddn(1),this.keyFromPrivate(h)}};EC$1.prototype._truncateToN=function n(e,t){var a=e.byteLength()*8-this.n.bitLength();return a>0&&(e=e.ushrn(a)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};EC$1.prototype.sign=function n(e,t,a,l){typeof a=="object"&&(l=a,a=null),l||(l={}),t=this.keyFromPrivate(t,a),e=this._truncateToN(new BN$2(e,16));for(var h=this.n.byteLength(),g=t.getPrivate().toArray("be",h),p=e.toArray("be",h),y=new HmacDRBG({hash:this.hash,entropy:g,nonce:p,pers:l.pers,persEnc:l.persEnc||"utf8"}),b=this.n.sub(new BN$2(1)),E=0;;E++){var C=l.k?l.k(E):new BN$2(y.generate(this.n.byteLength()));if(C=this._truncateToN(C,!0),!(C.cmpn(1)<=0||C.cmp(b)>=0)){var A=this.g.mul(C);if(!A.isInfinity()){var B=A.getX(),M=B.umod(this.n);if(M.cmpn(0)!==0){var N=C.invm(this.n).mul(M.mul(t.getPrivate()).iadd(e));if(N=N.umod(this.n),N.cmpn(0)!==0){var Z=(A.getY().isOdd()?1:0)|(B.cmp(M)!==0?2:0);return l.canonical&&N.cmp(this.nh)>0&&(N=this.n.sub(N),Z^=1),new Signature$2({r:M,s:N,recoveryParam:Z})}}}}}};EC$1.prototype.verify=function n(e,t,a,l){e=this._truncateToN(new BN$2(e,16)),a=this.keyFromPublic(a,l),t=new Signature$2(t,"hex");var h=t.r,g=t.s;if(h.cmpn(1)<0||h.cmp(this.n)>=0||g.cmpn(1)<0||g.cmp(this.n)>=0)return!1;var p=g.invm(this.n),y=p.mul(e).umod(this.n),b=p.mul(h).umod(this.n),E;return this.curve._maxwellTrick?(E=this.g.jmulAdd(y,a.getPublic(),b),E.isInfinity()?!1:E.eqXToP(h)):(E=this.g.mulAdd(y,a.getPublic(),b),E.isInfinity()?!1:E.getX().umod(this.n).cmp(h)===0)};EC$1.prototype.recoverPubKey=function(n,e,t,a){assert$3((3&t)===t,"The recovery param is more than two bits"),e=new Signature$2(e,a);var l=this.n,h=new BN$2(n),g=e.r,p=e.s,y=t&1,b=t>>1;if(g.cmp(this.curve.p.umod(this.curve.n))>=0&&b)throw new Error("Unable to find sencond key candinate");b?g=this.curve.pointFromX(g.add(this.curve.n),y):g=this.curve.pointFromX(g,y);var E=e.r.invm(l),C=l.sub(h).mul(E).umod(l),A=p.mul(E).umod(l);return this.g.mulAdd(C,g,A)};EC$1.prototype.getKeyRecoveryParam=function(n,e,t,a){if(e=new Signature$2(e,a),e.recoveryParam!==null)return e.recoveryParam;for(var l=0;l<4;l++){var h;try{h=this.recoverPubKey(n,e,l)}catch{continue}if(h.eq(t))return l}throw new Error("Unable to find valid recovery factor")};var utils$3=utils$n,assert$2=utils$3.assert,parseBytes$2=utils$3.parseBytes,cachedProperty$1=utils$3.cachedProperty;function KeyPair$1(n,e){this.eddsa=n,this._secret=parseBytes$2(e.secret),n.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=parseBytes$2(e.pub)}KeyPair$1.fromPublic=function n(e,t){return t instanceof KeyPair$1?t:new KeyPair$1(e,{pub:t})};KeyPair$1.fromSecret=function n(e,t){return t instanceof KeyPair$1?t:new KeyPair$1(e,{secret:t})};KeyPair$1.prototype.secret=function n(){return this._secret};cachedProperty$1(KeyPair$1,"pubBytes",function n(){return this.eddsa.encodePoint(this.pub())});cachedProperty$1(KeyPair$1,"pub",function n(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});cachedProperty$1(KeyPair$1,"privBytes",function n(){var e=this.eddsa,t=this.hash(),a=e.encodingLength-1,l=t.slice(0,e.encodingLength);return l[0]&=248,l[a]&=127,l[a]|=64,l});cachedProperty$1(KeyPair$1,"priv",function n(){return this.eddsa.decodeInt(this.privBytes())});cachedProperty$1(KeyPair$1,"hash",function n(){return this.eddsa.hash().update(this.secret()).digest()});cachedProperty$1(KeyPair$1,"messagePrefix",function n(){return this.hash().slice(this.eddsa.encodingLength)});KeyPair$1.prototype.sign=function n(e){return assert$2(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};KeyPair$1.prototype.verify=function n(e,t){return this.eddsa.verify(e,t,this)};KeyPair$1.prototype.getSecret=function n(e){return assert$2(this._secret,"KeyPair is public only"),utils$3.encode(this.secret(),e)};KeyPair$1.prototype.getPublic=function n(e){return utils$3.encode(this.pubBytes(),e)};var key=KeyPair$1,BN$1=bnExports,utils$2=utils$n,assert$1=utils$2.assert,cachedProperty=utils$2.cachedProperty,parseBytes$1=utils$2.parseBytes;function Signature$1(n,e){this.eddsa=n,typeof e!="object"&&(e=parseBytes$1(e)),Array.isArray(e)&&(e={R:e.slice(0,n.encodingLength),S:e.slice(n.encodingLength)}),assert$1(e.R&&e.S,"Signature without R or S"),n.isPoint(e.R)&&(this._R=e.R),e.S instanceof BN$1&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}cachedProperty(Signature$1,"S",function n(){return this.eddsa.decodeInt(this.Sencoded())});cachedProperty(Signature$1,"R",function n(){return this.eddsa.decodePoint(this.Rencoded())});cachedProperty(Signature$1,"Rencoded",function n(){return this.eddsa.encodePoint(this.R())});cachedProperty(Signature$1,"Sencoded",function n(){return this.eddsa.encodeInt(this.S())});Signature$1.prototype.toBytes=function n(){return this.Rencoded().concat(this.Sencoded())};Signature$1.prototype.toHex=function n(){return utils$2.encode(this.toBytes(),"hex").toUpperCase()};var signature=Signature$1,hash=hash$2,curves$1=curves$3,utils$1=utils$n,assert=utils$1.assert,parseBytes=utils$1.parseBytes,KeyPair=key,Signature=signature;function EDDSA(n){if(assert(n==="ed25519","only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(n);n=curves$1[n].curve,this.curve=n,this.g=n.g,this.g.precompute(n.n.bitLength()+1),this.pointClass=n.point().constructor,this.encodingLength=Math.ceil(n.n.bitLength()/8),this.hash=hash.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function n(e,t){e=parseBytes(e);var a=this.keyFromSecret(t),l=this.hashInt(a.messagePrefix(),e),h=this.g.mul(l),g=this.encodePoint(h),p=this.hashInt(g,a.pubBytes(),e).mul(a.priv()),y=l.add(p).umod(this.curve.n);return this.makeSignature({R:h,S:y,Rencoded:g})};EDDSA.prototype.verify=function n(e,t,a){e=parseBytes(e),t=this.makeSignature(t);var l=this.keyFromPublic(a),h=this.hashInt(t.Rencoded(),l.pubBytes(),e),g=this.g.mul(t.S()),p=t.R().add(l.pub().mul(h));return p.eq(g)};EDDSA.prototype.hashInt=function n(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return utils$1.intFromLE(e.digest()).umod(this.curve.n)};EDDSA.prototype.keyFromPublic=function n(e){return KeyPair.fromPublic(this,e)};EDDSA.prototype.keyFromSecret=function n(e){return KeyPair.fromSecret(this,e)};EDDSA.prototype.makeSignature=function n(e){return e instanceof Signature?e:new Signature(this,e)};EDDSA.prototype.encodePoint=function n(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};EDDSA.prototype.decodePoint=function n(e){e=utils$1.parseBytes(e);var t=e.length-1,a=e.slice(0,t).concat(e[t]&-129),l=(e[t]&128)!==0,h=utils$1.intFromLE(a);return this.curve.pointFromY(h,l)};EDDSA.prototype.encodeInt=function n(e){return e.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function n(e){return utils$1.intFromLE(e)};EDDSA.prototype.isPoint=function n(e){return e instanceof this.pointClass};(function(n){var e=n;e.version=require$$0.version,e.utils=utils$n,e.rand=brorandExports,e.curve=curve,e.curves=curves$3,e.ec=ec$2,e.eddsa=eddsa})(elliptic);var BN=asn1$2.bignum,Buffer$2=safeBufferExports.Buffer,b64ToBn$2=function n(e,t){var a=Buffer$2.from(e,"base64"),l=e=new BN(a,10,"be").iabs();return t&&a.fill(0),l},algorithmIdentifier=asn1$2.define("AlgorithmIdentifer",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}),AlgorithmIdentifier$1=algorithmIdentifier,publicKeyInfo=asn1$2.define("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier$1),this.key("PublicKey").bitstr())}),version=asn1$2.define("Version",function(){this.int()}),AlgorithmIdentifier=algorithmIdentifier,Version$2=version,privateKeyInfo=asn1$2.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(Version$2),this.key("privateKeyAlgorithm").use(AlgorithmIdentifier),this.key("privateKey").octstr(),this.key("attributes").optional().any())}),asn1$1=asn1$2,Buffer$1=safeBufferExports.Buffer,EC=elliptic.ec,b64ToBn$1=b64ToBn$2,PublicKeyInfo$1=publicKeyInfo,PrivateKeyInfo$1=privateKeyInfo,Version$1=version,ECParameters=asn1$1.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),ecPrivkeyVer1=1,ECPrivateKey=asn1$1.define("ECPrivateKey",function(){this.seq().obj(this.key("version").use(Version$1),this.key("privateKey").octstr(),this.key("parameters").explicit(0).optional().any(),this.key("publicKey").explicit(1).optional().bitstr())}),curves={"P-256":"p256","P-384":"p384","P-521":"p521"},oids={"P-256":[1,2,840,10045,3,1,7],"P-384":[1,3,132,0,34],"P-521":[1,3,132,0,35]},parameters={},algorithms={};Object.keys(oids).forEach(function(n){parameters[n]=ECParameters.encode({type:"namedCurve",value:oids[n]},"der"),algorithms[n]={algorithm:[1,2,840,10045,2,1],parameters:parameters[n]}});oids=null;function ecJwkToBuffer(n,e){if(typeof n.crv!="string")throw new TypeError('Expected "jwk.crv" to be a String');var t=typeof n.d=="string",a=t?["undefined","string"]:["string"];if(a.indexOf(typeof n.x)===-1)throw new TypeError('Expected "jwk.x" to be a String');if(a.indexOf(typeof n.y)===-1)throw new TypeError('Expected "jwk.y" to be a String');if(e.private&&!t)throw new TypeError('Expected "jwk.d" to be a String');var l=curves[n.crv];if(!l)throw new Error('Unsupported curve "'+n.crv+'"');var h=new EC(l),g={},p=n.x&&n.y;p&&(g.pub={x:b64ToBn$1(n.x,!1),y:b64ToBn$1(n.y,!1)}),(e.private||!p)&&(g.priv=b64ToBn$1(n.d,!0)),g=h.keyPair(g);var y=g.validate();if(!y.result)throw new Error('Invalid key for curve: "'+y.reason+'"');var b=keyToPem(n.crv,g,e);return b}function keyToPem(n,e,t){var a=!1,l=e.getPublic(a,"hex");l=Buffer$1.from(l,"hex"),l={unused:0,data:l};var h;if(t.private){var g=e.getPrivate("hex");g=Buffer$1.from(g,"hex"),h=PrivateKeyInfo$1.encode({version:0,privateKeyAlgorithm:algorithms[n],privateKey:ECPrivateKey.encode({version:ecPrivkeyVer1,privateKey:g,parameters:parameters[n],publicKey:l},"der")},"pem",{label:"PRIVATE KEY"}),g.fill(0)}else h=PublicKeyInfo$1.encode({algorithm:algorithms[n],PublicKey:l},"pem",{label:"PUBLIC KEY"});return h.slice(-1)!==`
`&&(h+=`
`),h}var ec$1=ecJwkToBuffer,asn1=asn1$2,b64ToBn=b64ToBn$2,PublicKeyInfo=publicKeyInfo,PrivateKeyInfo=privateKeyInfo,Version=version,RSAPrivateKey=asn1.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(Version),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}),RSAPublicKey=asn1.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}),algorithm={algorithm:[1,2,840,113549,1,1,1],parameters:[5,0]};function rsaJwkToBuffer(n,e){if(typeof n.e!="string")throw new TypeError('Expected "jwk.e" to be a String');if(typeof n.n!="string")throw new TypeError('Expected "jwk.n" to be a String');if(e.private){if(typeof n.d!="string")throw new TypeError('Expected "jwk.d" to be a String');if(typeof n.p!="string")throw new TypeError('Expected "jwk.p" to be a String');if(typeof n.q!="string")throw new TypeError('Expected "jwk.q" to be a String');if(typeof n.dp!="string")throw new TypeError('Expected "jwk.dp" to be a String');if(typeof n.dq!="string")throw new TypeError('Expected "jwk.dq" to be a String');if(typeof n.qi!="string")throw new TypeError('Expected "jwk.qi" to be a String')}var t;return e.private?t=PrivateKeyInfo.encode({version:0,privateKeyAlgorithm:algorithm,privateKey:RSAPrivateKey.encode({version:0,modulus:b64ToBn(n.n,!1),publicExponent:b64ToBn(n.e,!1),privateExponent:b64ToBn(n.d,!0),prime1:b64ToBn(n.p,!0),prime2:b64ToBn(n.q,!0),exponent1:b64ToBn(n.dp,!0),exponent2:b64ToBn(n.dq,!0),coefficient:b64ToBn(n.qi,!0)},"der")},"pem",{label:"PRIVATE KEY"}):t=PublicKeyInfo.encode({algorithm,PublicKey:{unused:0,data:RSAPublicKey.encode({modulus:b64ToBn(n.n,!1),publicExponent:b64ToBn(n.e,!1)},"der")}},"pem",{label:"PUBLIC KEY"}),t.slice(-1)!==`
`&&(t+=`
`),t}var rsa$1=rsaJwkToBuffer,ec=ec$1,rsa=rsa$1;function jwkToBuffer(n,e){if(typeof n!="object"||n===null)throw new TypeError('Expected "jwk" to be an Object');var t=n.kty;if(typeof t!="string")throw new TypeError('Expected "jwk.kty" to be a String');switch(e=e||{},e.private=e.private===!0,t){case"EC":return ec(n,e);case"RSA":return rsa(n,e);default:throw new Error('Unsupported key type "'+t+'"')}}var jwkToPem=jwkToBuffer;function bind(n,e){return function(){return n.apply(e,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(n=>e=>{const t=toString.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=n=>(n=n.toLowerCase(),e=>kindOf(e)===n),typeOfTest=n=>e=>typeof e===n,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(n){return n!==null&&!isUndefined(n)&&n.constructor!==null&&!isUndefined(n.constructor)&&isFunction(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&isArrayBuffer(n.buffer),e}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$1=n=>n!==null&&typeof n=="object",isBoolean=n=>n===!0||n===!1,isPlainObject=n=>{if(kindOf(n)!=="object")return!1;const e=getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=n=>isObject$1(n)&&isFunction(n.pipe),isFormData=n=>{const e="[object FormData]";return n&&(typeof FormData=="function"&&n instanceof FormData||toString.call(n)===e||isFunction(n.toString)&&n.toString()===e)},isURLSearchParams=kindOfTest("URLSearchParams"),trim=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let a,l;if(typeof n!="object"&&(n=[n]),isArray(n))for(a=0,l=n.length;a<l;a++)e.call(null,n[a],a,n);else{const h=t?Object.getOwnPropertyNames(n):Object.keys(n),g=h.length;let p;for(a=0;a<g;a++)p=h[a],e.call(null,n[p],p,n)}}function findKey(n,e){e=e.toLowerCase();const t=Object.keys(n);let a=t.length,l;for(;a-- >0;)if(l=t[a],e===l.toLowerCase())return l;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal)(),isContextDefined=n=>!isUndefined(n)&&n!==_global;function merge(){const{caseless:n}=isContextDefined(this)&&this||{},e={},t=(a,l)=>{const h=n&&findKey(e,l)||l;isPlainObject(e[h])&&isPlainObject(a)?e[h]=merge(e[h],a):isPlainObject(a)?e[h]=merge({},a):isArray(a)?e[h]=a.slice():e[h]=a};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&forEach(arguments[a],t);return e}const extend=(n,e,t,{allOwnKeys:a}={})=>(forEach(e,(l,h)=>{t&&isFunction(l)?n[h]=bind(l,t):n[h]=l},{allOwnKeys:a}),n),stripBOM=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),inherits=(n,e,t,a)=>{n.prototype=Object.create(e.prototype,a),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},toFlatObject=(n,e,t,a)=>{let l,h,g;const p={};if(e=e||{},n==null)return e;do{for(l=Object.getOwnPropertyNames(n),h=l.length;h-- >0;)g=l[h],(!a||a(g,n,e))&&!p[g]&&(e[g]=n[g],p[g]=!0);n=t!==!1&&getPrototypeOf(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},endsWith=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const a=n.indexOf(e,t);return a!==-1&&a===t},toArray=n=>{if(!n)return null;if(isArray(n))return n;let e=n.length;if(!isNumber(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},isTypedArray=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(n,e)=>{const a=(n&&n[Symbol.iterator]).call(n);let l;for(;(l=a.next())&&!l.done;){const h=l.value;e.call(n,h[0],h[1])}},matchAll=(n,e)=>{let t;const a=[];for(;(t=n.exec(e))!==null;)a.push(t);return a},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=n=>n.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(t,a,l){return a.toUpperCase()+l}),hasOwnProperty=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),a={};forEach(t,(l,h)=>{e(l,h,n)!==!1&&(a[h]=l)}),Object.defineProperties(n,a)},freezeMethods=n=>{reduceDescriptors(n,(e,t)=>{if(isFunction(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const a=n[t];if(isFunction(a)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},toObjectSet=(n,e)=>{const t={},a=l=>{l.forEach(h=>{t[h]=!0})};return isArray(n)?a(n):a(String(n).split(e)),t},noop=()=>{},toFiniteNumber=(n,e)=>(n=+n,Number.isFinite(n)?n:e),toJSONObject=n=>{const e=new Array(10),t=(a,l)=>{if(isObject$1(a)){if(e.indexOf(a)>=0)return;if(!("toJSON"in a)){e[l]=a;const h=isArray(a)?[]:{};return forEach(a,(g,p)=>{const y=t(g,l+1);!isUndefined(y)&&(h[p]=y)}),e[l]=void 0,h}}return a};return t(n,0)};var utils={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject:isObject$1,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,toJSONObject};function AxiosError(n,e,t,a,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),a&&(this.request=a),l&&(this.response=l)}utils.inherits(AxiosError,Error,{toJSON:function n(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{descriptors[n]={value:n}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(n,e,t,a,l,h)=>{const g=Object.create(prototype$1);return utils.toFlatObject(n,g,function(y){return y!==Error.prototype},p=>p!=="isAxiosError"),AxiosError.call(g,n.message,e,t,a,l),g.cause=n,g.name=n.name,h&&Object.assign(g,h),g};var browser$1=typeof self=="object"?self.FormData:window.FormData,FormData$2=browser$1;function isVisitable(n){return utils.isPlainObject(n)||utils.isArray(n)}function removeBrackets(n){return utils.endsWith(n,"[]")?n.slice(0,-2):n}function renderKey(n,e,t){return n?n.concat(e).map(function(l,h){return l=removeBrackets(l),!t&&h?"["+l+"]":l}).join(t?".":""):e}function isFlatArray(n){return utils.isArray(n)&&!n.some(isVisitable)}const predicates=utils.toFlatObject(utils,{},null,function n(e){return/^is[A-Z]/.test(e)});function isSpecCompliant(n){return n&&utils.isFunction(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator]}function toFormData(n,e,t){if(!utils.isObject(n))throw new TypeError("target must be an object");e=e||new(FormData$2||FormData),t=utils.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,Z){return!utils.isUndefined(Z[N])});const a=t.metaTokens,l=t.visitor||E,h=t.dots,g=t.indexes,y=(t.Blob||typeof Blob<"u"&&Blob)&&isSpecCompliant(e);if(!utils.isFunction(l))throw new TypeError("visitor must be a function");function b(M){if(M===null)return"";if(utils.isDate(M))return M.toISOString();if(!y&&utils.isBlob(M))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils.isArrayBuffer(M)||utils.isTypedArray(M)?y&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function E(M,N,Z){let ee=M;if(M&&!Z&&typeof M=="object"){if(utils.endsWith(N,"{}"))N=a?N:N.slice(0,-2),M=JSON.stringify(M);else if(utils.isArray(M)&&isFlatArray(M)||utils.isFileList(M)||utils.endsWith(N,"[]")&&(ee=utils.toArray(M)))return N=removeBrackets(N),ee.forEach(function(O,k){!(utils.isUndefined(O)||O===null)&&e.append(g===!0?renderKey([N],k,h):g===null?N:N+"[]",b(O))}),!1}return isVisitable(M)?!0:(e.append(renderKey(Z,N,h),b(M)),!1)}const C=[],A=Object.assign(predicates,{defaultVisitor:E,convertValue:b,isVisitable});function B(M,N){if(!utils.isUndefined(M)){if(C.indexOf(M)!==-1)throw Error("Circular reference detected in "+N.join("."));C.push(M),utils.forEach(M,function(ee,F){(!(utils.isUndefined(ee)||ee===null)&&l.call(e,ee,utils.isString(F)?F.trim():F,N,A))===!0&&B(ee,N?N.concat(F):[F])}),C.pop()}}if(!utils.isObject(n))throw new TypeError("data must be an object");return B(n),e}function encode$1$1(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(a){return e[a]})}function AxiosURLSearchParams(n,e){this._pairs=[],n&&toFormData(n,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function n(e,t){this._pairs.push([e,t])};prototype.toString=function n(e){const t=e?function(a){return e.call(this,a,encode$1$1)}:encode$1$1;return this._pairs.map(function(l){return t(l[0])+"="+t(l[1])},"").join("&")};function encode$2(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(n,e,t){if(!e)return n;const a=t&&t.encode||encode$2,l=t&&t.serialize;let h;if(l?h=l(e,t):h=utils.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,t).toString(a),h){const g=n.indexOf("#");g!==-1&&(n=n.slice(0,g)),n+=(n.indexOf("?")===-1?"?":"&")+h}return n}class InterceptorManager{constructor(){this.handlers=[]}use(e,t,a){return this.handlers.push({fulfilled:e,rejected:t,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils.forEach(this.handlers,function(a){a!==null&&e(a)})}}var InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=FormData;const isStandardBrowserEnv=(()=>{let n;return typeof navigator<"u"&&((n=navigator.product)==="ReactNative"||n==="NativeScript"||n==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")();var platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(n,e){return toFormData(n,new platform.classes.URLSearchParams,Object.assign({visitor:function(t,a,l,h){return platform.isNode&&utils.isBuffer(t)?(this.append(a,t.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)}},e))}function parsePropPath(n){return utils.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(n){const e={},t=Object.keys(n);let a;const l=t.length;let h;for(a=0;a<l;a++)h=t[a],e[h]=n[h];return e}function formDataToJSON(n){function e(t,a,l,h){let g=t[h++];const p=Number.isFinite(+g),y=h>=t.length;return g=!g&&utils.isArray(l)?l.length:g,y?(utils.hasOwnProp(l,g)?l[g]=[l[g],a]:l[g]=a,!p):((!l[g]||!utils.isObject(l[g]))&&(l[g]=[]),e(t,a,l[g],h)&&utils.isArray(l[g])&&(l[g]=arrayToObject(l[g])),!p)}if(utils.isFormData(n)&&utils.isFunction(n.entries)){const t={};return utils.forEachEntry(n,(a,l)=>{e(parsePropPath(a),l,t,0)}),t}return null}const DEFAULT_CONTENT_TYPE={"Content-Type":void 0};function stringifySafely(n,e,t){if(utils.isString(n))try{return(e||JSON.parse)(n),utils.trim(n)}catch(a){if(a.name!=="SyntaxError")throw a}return(t||JSON.stringify)(n)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function n(e,t){const a=t.getContentType()||"",l=a.indexOf("application/json")>-1,h=utils.isObject(e);if(h&&utils.isHTMLForm(e)&&(e=new FormData(e)),utils.isFormData(e))return l&&l?JSON.stringify(formDataToJSON(e)):e;if(utils.isArrayBuffer(e)||utils.isBuffer(e)||utils.isStream(e)||utils.isFile(e)||utils.isBlob(e))return e;if(utils.isArrayBufferView(e))return e.buffer;if(utils.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let p;if(h){if(a.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((p=utils.isFileList(e))||a.indexOf("multipart/form-data")>-1){const y=this.env&&this.env.FormData;return toFormData(p?{"files[]":e}:e,y&&new y,this.formSerializer)}}return h||l?(t.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function n(e){const t=this.transitional||defaults.transitional,a=t&&t.forcedJSONParsing,l=this.responseType==="json";if(e&&utils.isString(e)&&(a&&!this.responseType||l)){const g=!(t&&t.silentJSONParsing)&&l;try{return JSON.parse(e)}catch(p){if(g)throw p.name==="SyntaxError"?AxiosError.from(p,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):p}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function n(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function n(e){defaults.headers[e]={}});utils.forEach(["post","put","patch"],function n(e){defaults.headers[e]=utils.merge(DEFAULT_CONTENT_TYPE)});var defaults$1=defaults;const ignoreDuplicateOf=utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var parseHeaders=n=>{const e={};let t,a,l;return n&&n.split(`
`).forEach(function(g){l=g.indexOf(":"),t=g.substring(0,l).trim().toLowerCase(),a=g.substring(l+1).trim(),!(!t||e[t]&&ignoreDuplicateOf[t])&&(t==="set-cookie"?e[t]?e[t].push(a):e[t]=[a]:e[t]=e[t]?e[t]+", "+a:a)}),e};const $internals=Symbol("internals");function normalizeHeader(n){return n&&String(n).trim().toLowerCase()}function normalizeValue(n){return n===!1||n==null?n:utils.isArray(n)?n.map(normalizeValue):String(n)}function parseTokens(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=t.exec(n);)e[a[1]]=a[2];return e}function isValidHeaderName(n){return/^[-_a-zA-Z]+$/.test(n.trim())}function matchHeaderValue(n,e,t,a){if(utils.isFunction(a))return a.call(this,e,t);if(utils.isString(e)){if(utils.isString(a))return e.indexOf(a)!==-1;if(utils.isRegExp(a))return a.test(e)}}function formatHeader(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,a)=>t.toUpperCase()+a)}function buildAccessors(n,e){const t=utils.toCamelCase(" "+e);["get","set","has"].forEach(a=>{Object.defineProperty(n,a+t,{value:function(l,h,g){return this[a].call(this,e,l,h,g)},configurable:!0})})}class AxiosHeaders{constructor(e){e&&this.set(e)}set(e,t,a){const l=this;function h(p,y,b){const E=normalizeHeader(y);if(!E)throw new Error("header name must be a non-empty string");const C=utils.findKey(l,E);(!C||l[C]===void 0||b===!0||b===void 0&&l[C]!==!1)&&(l[C||y]=normalizeValue(p))}const g=(p,y)=>utils.forEach(p,(b,E)=>h(b,E,y));return utils.isPlainObject(e)||e instanceof this.constructor?g(e,t):utils.isString(e)&&(e=e.trim())&&!isValidHeaderName(e)?g(parseHeaders(e),t):e!=null&&h(t,e,a),this}get(e,t){if(e=normalizeHeader(e),e){const a=utils.findKey(this,e);if(a){const l=this[a];if(!t)return l;if(t===!0)return parseTokens(l);if(utils.isFunction(t))return t.call(this,l,a);if(utils.isRegExp(t))return t.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=normalizeHeader(e),e){const a=utils.findKey(this,e);return!!(a&&(!t||matchHeaderValue(this,this[a],a,t)))}return!1}delete(e,t){const a=this;let l=!1;function h(g){if(g=normalizeHeader(g),g){const p=utils.findKey(a,g);p&&(!t||matchHeaderValue(a,a[p],p,t))&&(delete a[p],l=!0)}}return utils.isArray(e)?e.forEach(h):h(e),l}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(e){const t=this,a={};return utils.forEach(this,(l,h)=>{const g=utils.findKey(a,h);if(g){t[g]=normalizeValue(l),delete t[h];return}const p=e?formatHeader(h):String(h).trim();p!==h&&delete t[h],t[p]=normalizeValue(l),a[p]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return utils.forEach(this,(a,l)=>{a!=null&&a!==!1&&(t[l]=e&&utils.isArray(a)?a.join(", "):a)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const a=new this(e);return t.forEach(l=>a.set(l)),a}static accessor(e){const a=(this[$internals]=this[$internals]={accessors:{}}).accessors,l=this.prototype;function h(g){const p=normalizeHeader(g);a[p]||(buildAccessors(l,g),a[p]=!0)}return utils.isArray(e)?e.forEach(h):h(e),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);utils.freezeMethods(AxiosHeaders.prototype);utils.freezeMethods(AxiosHeaders);var AxiosHeaders$1=AxiosHeaders;function transformData(n,e){const t=this||defaults$1,a=e||t,l=AxiosHeaders$1.from(a.headers);let h=a.data;return utils.forEach(n,function(p){h=p.call(t,h,l.normalize(),e?e.status:void 0)}),l.normalize(),h}function isCancel(n){return!!(n&&n.__CANCEL__)}function CanceledError(n,e,t){AxiosError.call(this,n??"canceled",AxiosError.ERR_CANCELED,e,t),this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:!0});var httpAdapter=null;function settle(n,e,t){const a=t.config.validateStatus;!t.status||!a||a(t.status)?n(t):e(new AxiosError("Request failed with status code "+t.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}var cookies=platform.isStandardBrowserEnv?function n(){return{write:function(t,a,l,h,g,p){const y=[];y.push(t+"="+encodeURIComponent(a)),utils.isNumber(l)&&y.push("expires="+new Date(l).toGMTString()),utils.isString(h)&&y.push("path="+h),utils.isString(g)&&y.push("domain="+g),p===!0&&y.push("secure"),document.cookie=y.join("; ")},read:function(t){const a=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function n(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function combineURLs(n,e){return e?n.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):n}function buildFullPath(n,e){return n&&!isAbsoluteURL(e)?combineURLs(n,e):e}var isURLSameOrigin=platform.isStandardBrowserEnv?function n(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let a;function l(h){let g=h;return e&&(t.setAttribute("href",g),g=t.href),t.setAttribute("href",g),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return a=l(window.location.href),function(g){const p=utils.isString(g)?l(g):g;return p.protocol===a.protocol&&p.host===a.host}}():function n(){return function(){return!0}}();function parseProtocol(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function speedometer(n,e){n=n||10;const t=new Array(n),a=new Array(n);let l=0,h=0,g;return e=e!==void 0?e:1e3,function(y){const b=Date.now(),E=a[h];g||(g=b),t[l]=y,a[l]=b;let C=h,A=0;for(;C!==l;)A+=t[C++],C=C%n;if(l=(l+1)%n,l===h&&(h=(h+1)%n),b-g<e)return;const B=E&&b-E;return B?Math.round(A*1e3/B):void 0}}function progressEventReducer(n,e){let t=0;const a=speedometer(50,250);return l=>{const h=l.loaded,g=l.lengthComputable?l.total:void 0,p=h-t,y=a(p),b=h<=g;t=h;const E={loaded:h,total:g,progress:g?h/g:void 0,bytes:p,rate:y||void 0,estimated:y&&g&&b?(g-h)/y:void 0,event:l};E[e?"download":"upload"]=!0,n(E)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u";var xhrAdapter=isXHRAdapterSupported&&function(n){return new Promise(function(t,a){let l=n.data;const h=AxiosHeaders$1.from(n.headers).normalize(),g=n.responseType;let p;function y(){n.cancelToken&&n.cancelToken.unsubscribe(p),n.signal&&n.signal.removeEventListener("abort",p)}utils.isFormData(l)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv)&&h.setContentType(!1);let b=new XMLHttpRequest;if(n.auth){const B=n.auth.username||"",M=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";h.set("Authorization","Basic "+btoa(B+":"+M))}const E=buildFullPath(n.baseURL,n.url);b.open(n.method.toUpperCase(),buildURL(E,n.params,n.paramsSerializer),!0),b.timeout=n.timeout;function C(){if(!b)return;const B=AxiosHeaders$1.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),N={data:!g||g==="text"||g==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:B,config:n,request:b};settle(function(ee){t(ee),y()},function(ee){a(ee),y()},N),b=null}if("onloadend"in b?b.onloadend=C:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(C)},b.onabort=function(){b&&(a(new AxiosError("Request aborted",AxiosError.ECONNABORTED,n,b)),b=null)},b.onerror=function(){a(new AxiosError("Network Error",AxiosError.ERR_NETWORK,n,b)),b=null},b.ontimeout=function(){let M=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const N=n.transitional||transitionalDefaults;n.timeoutErrorMessage&&(M=n.timeoutErrorMessage),a(new AxiosError(M,N.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,n,b)),b=null},platform.isStandardBrowserEnv){const B=(n.withCredentials||isURLSameOrigin(E))&&n.xsrfCookieName&&cookies.read(n.xsrfCookieName);B&&h.set(n.xsrfHeaderName,B)}l===void 0&&h.setContentType(null),"setRequestHeader"in b&&utils.forEach(h.toJSON(),function(M,N){b.setRequestHeader(N,M)}),utils.isUndefined(n.withCredentials)||(b.withCredentials=!!n.withCredentials),g&&g!=="json"&&(b.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&b.addEventListener("progress",progressEventReducer(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&b.upload&&b.upload.addEventListener("progress",progressEventReducer(n.onUploadProgress)),(n.cancelToken||n.signal)&&(p=B=>{b&&(a(!B||B.type?new CanceledError(null,n,b):B),b.abort(),b=null)},n.cancelToken&&n.cancelToken.subscribe(p),n.signal&&(n.signal.aborted?p():n.signal.addEventListener("abort",p)));const A=parseProtocol(E);if(A&&platform.protocols.indexOf(A)===-1){a(new AxiosError("Unsupported protocol "+A+":",AxiosError.ERR_BAD_REQUEST,n));return}b.send(l||null)})};const knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils.forEach(knownAdapters,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});var adapters={getAdapter:n=>{n=utils.isArray(n)?n:[n];const{length:e}=n;let t,a;for(let l=0;l<e&&(t=n[l],!(a=utils.isString(t)?knownAdapters[t.toLowerCase()]:t));l++);if(!a)throw a===!1?new AxiosError(`Adapter ${t} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils.hasOwnProp(knownAdapters,t)?`Adapter '${t}' is not available in the build`:`Unknown adapter '${t}'`);if(!utils.isFunction(a))throw new TypeError("adapter is not a function");return a},adapters:knownAdapters};function throwIfCancellationRequested(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new CanceledError(null,n)}function dispatchRequest(n){return throwIfCancellationRequested(n),n.headers=AxiosHeaders$1.from(n.headers),n.data=transformData.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(n.adapter||defaults$1.adapter)(n).then(function(a){return throwIfCancellationRequested(n),a.data=transformData.call(n,n.transformResponse,a),a.headers=AxiosHeaders$1.from(a.headers),a},function(a){return isCancel(a)||(throwIfCancellationRequested(n),a&&a.response&&(a.response.data=transformData.call(n,n.transformResponse,a.response),a.response.headers=AxiosHeaders$1.from(a.response.headers))),Promise.reject(a)})}const headersToObject=n=>n instanceof AxiosHeaders$1?n.toJSON():n;function mergeConfig(n,e){e=e||{};const t={};function a(b,E,C){return utils.isPlainObject(b)&&utils.isPlainObject(E)?utils.merge.call({caseless:C},b,E):utils.isPlainObject(E)?utils.merge({},E):utils.isArray(E)?E.slice():E}function l(b,E,C){if(utils.isUndefined(E)){if(!utils.isUndefined(b))return a(void 0,b,C)}else return a(b,E,C)}function h(b,E){if(!utils.isUndefined(E))return a(void 0,E)}function g(b,E){if(utils.isUndefined(E)){if(!utils.isUndefined(b))return a(void 0,b)}else return a(void 0,E)}function p(b,E,C){if(C in e)return a(b,E);if(C in n)return a(void 0,b)}const y={url:h,method:h,data:h,baseURL:g,transformRequest:g,transformResponse:g,paramsSerializer:g,timeout:g,timeoutMessage:g,withCredentials:g,adapter:g,responseType:g,xsrfCookieName:g,xsrfHeaderName:g,onUploadProgress:g,onDownloadProgress:g,decompress:g,maxContentLength:g,maxBodyLength:g,beforeRedirect:g,transport:g,httpAgent:g,httpsAgent:g,cancelToken:g,socketPath:g,responseEncoding:g,validateStatus:p,headers:(b,E)=>l(headersToObject(b),headersToObject(E),!0)};return utils.forEach(Object.keys(n).concat(Object.keys(e)),function(E){const C=y[E]||l,A=C(n[E],e[E],E);utils.isUndefined(A)&&C!==p||(t[E]=A)}),t}const VERSION="1.2.3",validators$1={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{validators$1[n]=function(a){return typeof a===n||"a"+(e<1?"n ":" ")+n}});const deprecatedWarnings={};validators$1.transitional=function n(e,t,a){function l(h,g){return"[Axios v"+VERSION+"] Transitional option '"+h+"'"+g+(a?". "+a:"")}return(h,g,p)=>{if(e===!1)throw new AxiosError(l(g," has been removed"+(t?" in "+t:"")),AxiosError.ERR_DEPRECATED);return t&&!deprecatedWarnings[g]&&(deprecatedWarnings[g]=!0,console.warn(l(g," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(h,g,p):!0}};function assertOptions(n,e,t){if(typeof n!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const a=Object.keys(n);let l=a.length;for(;l-- >0;){const h=a[l],g=e[h];if(g){const p=n[h],y=p===void 0||g(p,h,n);if(y!==!0)throw new AxiosError("option "+h+" must be "+y,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new AxiosError("Unknown option "+h,AxiosError.ERR_BAD_OPTION)}}var validator={assertOptions,validators:validators$1};const validators=validator.validators;class Axios{constructor(e){this.defaults=e,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=mergeConfig(this.defaults,t);const{transitional:a,paramsSerializer:l,headers:h}=t;a!==void 0&&validator.assertOptions(a,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),l!==void 0&&validator.assertOptions(l,{encode:validators.function,serialize:validators.function},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let g;g=h&&utils.merge(h.common,h[t.method]),g&&utils.forEach(["delete","get","head","post","put","patch","common"],M=>{delete h[M]}),t.headers=AxiosHeaders$1.concat(g,h);const p=[];let y=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(t)===!1||(y=y&&N.synchronous,p.unshift(N.fulfilled,N.rejected))});const b=[];this.interceptors.response.forEach(function(N){b.push(N.fulfilled,N.rejected)});let E,C=0,A;if(!y){const M=[dispatchRequest.bind(this),void 0];for(M.unshift.apply(M,p),M.push.apply(M,b),A=M.length,E=Promise.resolve(t);C<A;)E=E.then(M[C++],M[C++]);return E}A=p.length;let B=t;for(C=0;C<A;){const M=p[C++],N=p[C++];try{B=M(B)}catch(Z){N.call(this,Z);break}}try{E=dispatchRequest.call(this,B)}catch(M){return Promise.reject(M)}for(C=0,A=b.length;C<A;)E=E.then(b[C++],b[C++]);return E}getUri(e){e=mergeConfig(this.defaults,e);const t=buildFullPath(e.baseURL,e.url);return buildURL(t,e.params,e.paramsSerializer)}}utils.forEach(["delete","get","head","options"],function n(e){Axios.prototype[e]=function(t,a){return this.request(mergeConfig(a||{},{method:e,url:t,data:(a||{}).data}))}});utils.forEach(["post","put","patch"],function n(e){function t(a){return function(h,g,p){return this.request(mergeConfig(p||{},{method:e,headers:a?{"Content-Type":"multipart/form-data"}:{},url:h,data:g}))}}Axios.prototype[e]=t(),Axios.prototype[e+"Form"]=t(!0)});var Axios$1=Axios;class CancelToken{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(h){t=h});const a=this;this.promise.then(l=>{if(!a._listeners)return;let h=a._listeners.length;for(;h-- >0;)a._listeners[h](l);a._listeners=null}),this.promise.then=l=>{let h;const g=new Promise(p=>{a.subscribe(p),h=p}).then(l);return g.cancel=function(){a.unsubscribe(h)},g},e(function(h,g,p){a.reason||(a.reason=new CanceledError(h,g,p),t(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new CancelToken(function(l){e=l}),cancel:e}}}var CancelToken$1=CancelToken;function spread(n){return function(t){return n.apply(null,t)}}function isAxiosError(n){return utils.isObject(n)&&n.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([n,e])=>{HttpStatusCode[e]=n});var HttpStatusCode$1=HttpStatusCode;function createInstance(n){const e=new Axios$1(n),t=bind(Axios$1.prototype.request,e);return utils.extend(t,Axios$1.prototype,e,{allOwnKeys:!0}),utils.extend(t,e,null,{allOwnKeys:!0}),t.create=function(l){return createInstance(mergeConfig(n,l))},t}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function n(e){return Promise.all(e)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=n=>formDataToJSON(utils.isHTMLForm(n)?new FormData(n):n);axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;var axios_1$1=axios;const crypto$1=crypto,isCryptoKey=n=>n instanceof CryptoKey,digest=async(n,e)=>{const t=`SHA-${n.slice(-3)}`;return new Uint8Array(await crypto$1.subtle.digest(t,e))},digest$1=digest,encoder=new TextEncoder,decoder=new TextDecoder,MAX_INT32=2**32;function concat(...n){const e=n.reduce((l,{length:h})=>l+h,0),t=new Uint8Array(e);let a=0;return n.forEach(l=>{t.set(l,a),a+=l.length}),t}function p2s(n,e){return concat(encoder.encode(n),new Uint8Array([0]),e)}function writeUInt32BE(n,e,t){if(e<0||e>=MAX_INT32)throw new RangeError(`value must be >= 0 and <= ${MAX_INT32-1}. Received ${e}`);n.set([e>>>24,e>>>16,e>>>8,e&255],t)}function uint64be(n){const e=Math.floor(n/MAX_INT32),t=n%MAX_INT32,a=new Uint8Array(8);return writeUInt32BE(a,e,0),writeUInt32BE(a,t,4),a}function uint32be(n){const e=new Uint8Array(4);return writeUInt32BE(e,n),e}function lengthAndInput(n){return concat(uint32be(n.length),n)}async function concatKdf(n,e,t){const a=Math.ceil((e>>3)/32),l=new Uint8Array(a*32);for(let h=0;h<a;h++){const g=new Uint8Array(4+n.length+t.length);g.set(uint32be(h+1)),g.set(n,4),g.set(t,4+n.length),l.set(await digest$1("sha256",g),h*32)}return l.slice(0,e>>3)}const encodeBase64=n=>{let e=n;typeof e=="string"&&(e=encoder.encode(e));const t=32768,a=[];for(let l=0;l<e.length;l+=t)a.push(String.fromCharCode.apply(null,e.subarray(l,l+t)));return btoa(a.join(""))},encode$1=n=>encodeBase64(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),decodeBase64=n=>{const e=atob(n),t=new Uint8Array(e.length);for(let a=0;a<e.length;a++)t[a]=e.charCodeAt(a);return t},decode$1=n=>{let e=n;e instanceof Uint8Array&&(e=decoder.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return decodeBase64(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class JOSEError extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(t=Error.captureStackTrace)===null||t===void 0||t.call(Error,this,this.constructor)}}class JWTClaimValidationFailed extends JOSEError{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,t="unspecified",a="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=t,this.reason=a}}class JWTExpired extends JOSEError{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,t="unspecified",a="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=t,this.reason=a}}class JOSEAlgNotAllowed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class JOSENotSupported extends JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class JWEDecryptionFailed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class JWEInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class JWSInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class JWTInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class JWKInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class JWKSInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class JWKSNoMatchingKey extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class JWKSMultipleMatchingKeys extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class JWKSTimeout extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class JWSSignatureVerificationFailed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const errors=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed,JOSEError,JOSENotSupported,JWEDecryptionFailed,JWEInvalid,JWKInvalid,JWKSInvalid,JWKSMultipleMatchingKeys,JWKSNoMatchingKey,JWKSTimeout,JWSInvalid,JWSSignatureVerificationFailed,JWTClaimValidationFailed,JWTExpired,JWTInvalid},Symbol.toStringTag,{value:"Module"})),random=crypto$1.getRandomValues.bind(crypto$1);function bitLength$1(n){switch(n){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new JOSENotSupported(`Unsupported JWE Algorithm: ${n}`)}}const generateIv=n=>random(new Uint8Array(bitLength$1(n)>>3)),checkIvLength=(n,e)=>{if(e.length<<3!==bitLength$1(n))throw new JWEInvalid("Invalid Initialization Vector length")},checkIvLength$1=checkIvLength,checkCekLength=(n,e)=>{const t=n.byteLength<<3;if(t!==e)throw new JWEInvalid(`Invalid Content Encryption Key length. Expected ${e} bits, got ${t} bits`)},checkCekLength$1=checkCekLength,timingSafeEqual=(n,e)=>{if(!(n instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(e instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(n.length!==e.length)throw new TypeError("Input buffers must have the same length");const t=n.length;let a=0,l=-1;for(;++l<t;)a|=n[l]^e[l];return a===0},timingSafeEqual$1=timingSafeEqual;function isCloudflareWorkers(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}function unusable(n,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${n}`)}function isAlgorithm(n,e){return n.name===e}function getHashLength(n){return parseInt(n.name.slice(4),10)}function getNamedCurve$1(n){switch(n){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function checkUsage(n,e){if(e.length&&!e.some(t=>n.usages.includes(t))){let t="CryptoKey does not support this operation, its usages must include ";if(e.length>2){const a=e.pop();t+=`one of ${e.join(", ")}, or ${a}.`}else e.length===2?t+=`one of ${e[0]} or ${e[1]}.`:t+=`${e[0]}.`;throw new TypeError(t)}}function checkSigCryptoKey(n,e,...t){switch(e){case"HS256":case"HS384":case"HS512":{if(!isAlgorithm(n.algorithm,"HMAC"))throw unusable("HMAC");const a=parseInt(e.slice(2),10);if(getHashLength(n.algorithm.hash)!==a)throw unusable(`SHA-${a}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!isAlgorithm(n.algorithm,"RSASSA-PKCS1-v1_5"))throw unusable("RSASSA-PKCS1-v1_5");const a=parseInt(e.slice(2),10);if(getHashLength(n.algorithm.hash)!==a)throw unusable(`SHA-${a}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!isAlgorithm(n.algorithm,"RSA-PSS"))throw unusable("RSA-PSS");const a=parseInt(e.slice(2),10);if(getHashLength(n.algorithm.hash)!==a)throw unusable(`SHA-${a}`,"algorithm.hash");break}case(isCloudflareWorkers()&&"EdDSA"):{if(!isAlgorithm(n.algorithm,"NODE-ED25519"))throw unusable("NODE-ED25519");break}case"EdDSA":{if(n.algorithm.name!=="Ed25519"&&n.algorithm.name!=="Ed448")throw unusable("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!isAlgorithm(n.algorithm,"ECDSA"))throw unusable("ECDSA");const a=getNamedCurve$1(e);if(n.algorithm.namedCurve!==a)throw unusable(a,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}checkUsage(n,t)}function checkEncCryptoKey(n,e,...t){switch(e){case"A128GCM":case"A192GCM":case"A256GCM":{if(!isAlgorithm(n.algorithm,"AES-GCM"))throw unusable("AES-GCM");const a=parseInt(e.slice(1,4),10);if(n.algorithm.length!==a)throw unusable(a,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!isAlgorithm(n.algorithm,"AES-KW"))throw unusable("AES-KW");const a=parseInt(e.slice(1,4),10);if(n.algorithm.length!==a)throw unusable(a,"algorithm.length");break}case"ECDH":{switch(n.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw unusable("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!isAlgorithm(n.algorithm,"PBKDF2"))throw unusable("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!isAlgorithm(n.algorithm,"RSA-OAEP"))throw unusable("RSA-OAEP");const a=parseInt(e.slice(9),10)||1;if(getHashLength(n.algorithm.hash)!==a)throw unusable(`SHA-${a}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}checkUsage(n,t)}function message(n,e,...t){if(t.length>2){const a=t.pop();n+=`one of type ${t.join(", ")}, or ${a}.`}else t.length===2?n+=`one of type ${t[0]} or ${t[1]}.`:n+=`of type ${t[0]}.`;return e==null?n+=` Received ${e}`:typeof e=="function"&&e.name?n+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&e.constructor&&e.constructor.name&&(n+=` Received an instance of ${e.constructor.name}`),n}const invalidKeyInput=(n,...e)=>message("Key must be ",n,...e);function withAlg(n,e,...t){return message(`Key for the ${n} algorithm must be `,e,...t)}const isKeyLike=n=>isCryptoKey(n),types=["CryptoKey"];async function cbcDecrypt(n,e,t,a,l,h){if(!(e instanceof Uint8Array))throw new TypeError(invalidKeyInput(e,"Uint8Array"));const g=parseInt(n.slice(1,4),10),p=await crypto$1.subtle.importKey("raw",e.subarray(g>>3),"AES-CBC",!1,["decrypt"]),y=await crypto$1.subtle.importKey("raw",e.subarray(0,g>>3),{hash:`SHA-${g<<1}`,name:"HMAC"},!1,["sign"]),b=concat(h,a,t,uint64be(h.length<<3)),E=new Uint8Array((await crypto$1.subtle.sign("HMAC",y,b)).slice(0,g>>3));let C;try{C=timingSafeEqual$1(l,E)}catch{}if(!C)throw new JWEDecryptionFailed;let A;try{A=new Uint8Array(await crypto$1.subtle.decrypt({iv:a,name:"AES-CBC"},p,t))}catch{}if(!A)throw new JWEDecryptionFailed;return A}async function gcmDecrypt(n,e,t,a,l,h){let g;e instanceof Uint8Array?g=await crypto$1.subtle.importKey("raw",e,"AES-GCM",!1,["decrypt"]):(checkEncCryptoKey(e,n,"decrypt"),g=e);try{return new Uint8Array(await crypto$1.subtle.decrypt({additionalData:h,iv:a,name:"AES-GCM",tagLength:128},g,concat(t,l)))}catch{throw new JWEDecryptionFailed}}const decrypt$2=async(n,e,t,a,l,h)=>{if(!isCryptoKey(e)&&!(e instanceof Uint8Array))throw new TypeError(invalidKeyInput(e,...types,"Uint8Array"));switch(checkIvLength$1(n,a),n){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return e instanceof Uint8Array&&checkCekLength$1(e,parseInt(n.slice(-3),10)),cbcDecrypt(n,e,t,a,l,h);case"A128GCM":case"A192GCM":case"A256GCM":return e instanceof Uint8Array&&checkCekLength$1(e,parseInt(n.slice(1,4),10)),gcmDecrypt(n,e,t,a,l,h);default:throw new JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}},decrypt$3=decrypt$2,inflate=async()=>{throw new JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},deflate=async()=>{throw new JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},isDisjoint=(...n)=>{const e=n.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const a of e){const l=Object.keys(a);if(!t||t.size===0){t=new Set(l);continue}for(const h of l){if(t.has(h))return!1;t.add(h)}}return!0},isDisjoint$1=isDisjoint;function isObjectLike(n){return typeof n=="object"&&n!==null}function isObject(n){if(!isObjectLike(n)||Object.prototype.toString.call(n)!=="[object Object]")return!1;if(Object.getPrototypeOf(n)===null)return!0;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}const bogusWebCrypto=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]],bogusWebCrypto$1=bogusWebCrypto;function checkKeySize(n,e){if(n.algorithm.length!==parseInt(e.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${e}`)}function getCryptoKey$2(n,e,t){if(isCryptoKey(n))return checkEncCryptoKey(n,e,t),n;if(n instanceof Uint8Array)return crypto$1.subtle.importKey("raw",n,"AES-KW",!0,[t]);throw new TypeError(invalidKeyInput(n,...types,"Uint8Array"))}const wrap$1=async(n,e,t)=>{const a=await getCryptoKey$2(e,n,"wrapKey");checkKeySize(a,n);const l=await crypto$1.subtle.importKey("raw",t,...bogusWebCrypto$1);return new Uint8Array(await crypto$1.subtle.wrapKey("raw",l,a,"AES-KW"))},unwrap$1=async(n,e,t)=>{const a=await getCryptoKey$2(e,n,"unwrapKey");checkKeySize(a,n);const l=await crypto$1.subtle.unwrapKey("raw",t,a,"AES-KW",...bogusWebCrypto$1);return new Uint8Array(await crypto$1.subtle.exportKey("raw",l))};async function deriveKey$1(n,e,t,a,l=new Uint8Array(0),h=new Uint8Array(0)){if(!isCryptoKey(n))throw new TypeError(invalidKeyInput(n,...types));if(checkEncCryptoKey(n,"ECDH"),!isCryptoKey(e))throw new TypeError(invalidKeyInput(e,...types));checkEncCryptoKey(e,"ECDH","deriveBits");const g=concat(lengthAndInput(encoder.encode(t)),lengthAndInput(l),lengthAndInput(h),uint32be(a));let p;n.algorithm.name==="X25519"?p=256:n.algorithm.name==="X448"?p=448:p=Math.ceil(parseInt(n.algorithm.namedCurve.substr(-3),10)/8)<<3;const y=new Uint8Array(await crypto$1.subtle.deriveBits({name:n.algorithm.name,public:n},e,p));return concatKdf(y,a,g)}async function generateEpk(n){if(!isCryptoKey(n))throw new TypeError(invalidKeyInput(n,...types));return crypto$1.subtle.generateKey(n.algorithm,!0,["deriveBits"])}function ecdhAllowed(n){if(!isCryptoKey(n))throw new TypeError(invalidKeyInput(n,...types));return["P-256","P-384","P-521"].includes(n.algorithm.namedCurve)||n.algorithm.name==="X25519"||n.algorithm.name==="X448"}function checkP2s(n){if(!(n instanceof Uint8Array)||n.length<8)throw new JWEInvalid("PBES2 Salt Input must be 8 or more octets")}function getCryptoKey$1(n,e){if(n instanceof Uint8Array)return crypto$1.subtle.importKey("raw",n,"PBKDF2",!1,["deriveBits"]);if(isCryptoKey(n))return checkEncCryptoKey(n,e,"deriveBits","deriveKey"),n;throw new TypeError(invalidKeyInput(n,...types,"Uint8Array"))}async function deriveKey(n,e,t,a){checkP2s(n);const l=p2s(e,n),h=parseInt(e.slice(13,16),10),g={hash:`SHA-${e.slice(8,11)}`,iterations:t,name:"PBKDF2",salt:l},p={length:h,name:"AES-KW"},y=await getCryptoKey$1(a,e);if(y.usages.includes("deriveBits"))return new Uint8Array(await crypto$1.subtle.deriveBits(g,y,h));if(y.usages.includes("deriveKey"))return crypto$1.subtle.deriveKey(g,y,p,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const encrypt$3=async(n,e,t,a=2048,l=random(new Uint8Array(16)))=>{const h=await deriveKey(l,n,a,e);return{encryptedKey:await wrap$1(n.slice(-6),h,t),p2c:a,p2s:encode$1(l)}},decrypt$1=async(n,e,t,a,l)=>{const h=await deriveKey(l,n,a,e);return unwrap$1(n.slice(-6),h,t)};function subtleRsaEs(n){switch(n){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new JOSENotSupported(`alg ${n} is not supported either by JOSE or your javascript runtime`)}}const checkKeyLength=(n,e)=>{if(n.startsWith("RS")||n.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${n} requires key modulusLength to be 2048 bits or larger`)}},encrypt$2=async(n,e,t)=>{if(!isCryptoKey(e))throw new TypeError(invalidKeyInput(e,...types));if(checkEncCryptoKey(e,n,"encrypt","wrapKey"),checkKeyLength(n,e),e.usages.includes("encrypt"))return new Uint8Array(await crypto$1.subtle.encrypt(subtleRsaEs(n),e,t));if(e.usages.includes("wrapKey")){const a=await crypto$1.subtle.importKey("raw",t,...bogusWebCrypto$1);return new Uint8Array(await crypto$1.subtle.wrapKey("raw",a,e,subtleRsaEs(n)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},decrypt=async(n,e,t)=>{if(!isCryptoKey(e))throw new TypeError(invalidKeyInput(e,...types));if(checkEncCryptoKey(e,n,"decrypt","unwrapKey"),checkKeyLength(n,e),e.usages.includes("decrypt"))return new Uint8Array(await crypto$1.subtle.decrypt(subtleRsaEs(n),e,t));if(e.usages.includes("unwrapKey")){const a=await crypto$1.subtle.unwrapKey("raw",t,e,subtleRsaEs(n),...bogusWebCrypto$1);return new Uint8Array(await crypto$1.subtle.exportKey("raw",a))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function bitLength(n){switch(n){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new JOSENotSupported(`Unsupported JWE Algorithm: ${n}`)}}const generateCek=n=>random(new Uint8Array(bitLength(n)>>3)),formatPEM=(n,e)=>{const t=(n.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${e}-----
${t}
-----END ${e}-----`},genericExport=async(n,e,t)=>{if(!isCryptoKey(t))throw new TypeError(invalidKeyInput(t,...types));if(!t.extractable)throw new TypeError("CryptoKey is not extractable");if(t.type!==n)throw new TypeError(`key is not a ${n} key`);return formatPEM(encodeBase64(new Uint8Array(await crypto$1.subtle.exportKey(e,t))),`${n.toUpperCase()} KEY`)},toSPKI=n=>genericExport("public","spki",n),toPKCS8=n=>genericExport("private","pkcs8",n),findOid=(n,e,t=0)=>{t===0&&(e.unshift(e.length),e.unshift(6));let a=n.indexOf(e[0],t);if(a===-1)return!1;const l=n.subarray(a,a+e.length);return l.length!==e.length?!1:l.every((h,g)=>h===e[g])||findOid(n,e,a+1)},getNamedCurve=n=>{switch(!0){case findOid(n,[42,134,72,206,61,3,1,7]):return"P-256";case findOid(n,[43,129,4,0,34]):return"P-384";case findOid(n,[43,129,4,0,35]):return"P-521";case findOid(n,[43,101,110]):return"X25519";case findOid(n,[43,101,111]):return"X448";case findOid(n,[43,101,112]):return"Ed25519";case findOid(n,[43,101,113]):return"Ed448";default:throw new JOSENotSupported("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},genericImport=async(n,e,t,a,l)=>{var h;let g,p;const y=new Uint8Array(atob(t.replace(n,"")).split("").map(E=>E.charCodeAt(0))),b=e==="spki";switch(a){case"PS256":case"PS384":case"PS512":g={name:"RSA-PSS",hash:`SHA-${a.slice(-3)}`},p=b?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":g={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.slice(-3)}`},p=b?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":g={name:"RSA-OAEP",hash:`SHA-${parseInt(a.slice(-3),10)||1}`},p=b?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":g={name:"ECDSA",namedCurve:"P-256"},p=b?["verify"]:["sign"];break;case"ES384":g={name:"ECDSA",namedCurve:"P-384"},p=b?["verify"]:["sign"];break;case"ES512":g={name:"ECDSA",namedCurve:"P-521"},p=b?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const E=getNamedCurve(y);g=E.startsWith("P-")?{name:"ECDH",namedCurve:E}:{name:E},p=b?[]:["deriveBits"];break}case(isCloudflareWorkers()&&"EdDSA"):{const E=getNamedCurve(y).toUpperCase();g={name:`NODE-${E}`,namedCurve:`NODE-${E}`},p=b?["verify"]:["sign"];break}case"EdDSA":g={name:getNamedCurve(y)},p=b?["verify"]:["sign"];break;default:throw new JOSENotSupported('Invalid or unsupported "alg" (Algorithm) value')}return crypto$1.subtle.importKey(e,y,g,(h=l==null?void 0:l.extractable)!==null&&h!==void 0?h:!1,p)},fromPKCS8=(n,e,t)=>genericImport(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",n,e,t),fromSPKI=(n,e,t)=>genericImport(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",n,e,t);function subtleMapping(n){let e,t;switch(n.kty){case"oct":{switch(n.alg){case"HS256":case"HS384":case"HS512":e={name:"HMAC",hash:`SHA-${n.alg.slice(-3)}`},t=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new JOSENotSupported(`${n.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":e={name:"AES-GCM"},t=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":e={name:"AES-KW"},t=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":e={name:"PBKDF2"},t=["deriveBits"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(n.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${n.alg.slice(-3)}`},t=n.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.alg.slice(-3)}`},t=n.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(n.alg.slice(-3),10)||1}`},t=n.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(n.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=n.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=n.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=n.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:n.crv},t=n.d?["deriveBits"]:[];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case(isCloudflareWorkers()&&"OKP"):if(n.alg!=="EdDSA")throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');switch(n.crv){case"Ed25519":e={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},t=n.d?["sign"]:["verify"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":{switch(n.alg){case"EdDSA":e={name:n.crv},t=n.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:n.crv},t=n.d?["deriveBits"]:[];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}const parse=async n=>{var e,t;const{algorithm:a,keyUsages:l}=subtleMapping(n),h=[a,(e=n.ext)!==null&&e!==void 0?e:!1,(t=n.key_ops)!==null&&t!==void 0?t:l];if(a.name==="PBKDF2")return crypto$1.subtle.importKey("raw",decode$1(n.k),...h);const g={...n};return delete g.alg,delete g.use,crypto$1.subtle.importKey("jwk",g,...h)},asKeyObject=parse;function getElement(n){let e=[],t=0;for(;t<n.length;){let a=parseElement(n.subarray(t));e.push(a),t+=a.byteLength}return e}function parseElement(n){let e=0,t=n[0]&31;if(e++,t===31){for(t=0;n[e]>=128;)t=t*128+n[e]-128,e++;t=t*128+n[e]-128,e++}let a=0;if(n[e]<128)a=n[e],e++;else if(a===128){for(a=0;n[e+a]!==0||n[e+a+1]!==0;){if(a>n.byteLength)throw new TypeError("invalid indefinite form length");a++}const h=e+a+2;return{byteLength:h,contents:n.subarray(e,e+a),raw:n.subarray(0,h)}}else{let h=n[e]&127;e++,a=0;for(let g=0;g<h;g++)a=a*256+n[e],e++}const l=e+a;return{byteLength:l,contents:n.subarray(e,l),raw:n.subarray(0,l)}}function spkiFromX509(n){const e=getElement(getElement(parseElement(n).contents)[0].contents);return encodeBase64(e[e[0].raw[0]===160?6:5].raw)}function getSPKI(n){const e=n.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),t=decodeBase64(e);return formatPEM(spkiFromX509(t),"PUBLIC KEY")}async function importSPKI(n,e,t){if(typeof n!="string"||n.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return fromSPKI(n,e,t)}async function importX509(n,e,t){if(typeof n!="string"||n.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');let a;try{a=getSPKI(n)}catch(l){throw new TypeError("failed to parse the X.509 certificate",{cause:l})}return fromSPKI(a,e,t)}async function importPKCS8(n,e,t){if(typeof n!="string"||n.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return fromPKCS8(n,e,t)}async function importJWK(n,e,t){var a;if(!isObject(n))throw new TypeError("JWK must be an object");if(e||(e=n.alg),typeof e!="string"||!e)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(n.kty){case"oct":if(typeof n.k!="string"||!n.k)throw new TypeError('missing "k" (Key Value) Parameter value');return t??(t=n.ext!==!0),t?asKeyObject({...n,alg:e,ext:(a=n.ext)!==null&&a!==void 0?a:!1}):decode$1(n.k);case"RSA":if(n.oth!==void 0)throw new JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return asKeyObject({...n,alg:e});default:throw new JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}const symmetricTypeCheck=(n,e)=>{if(!(e instanceof Uint8Array)){if(!isKeyLike(e))throw new TypeError(withAlg(n,e,...types,"Uint8Array"));if(e.type!=="secret")throw new TypeError(`${types.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},asymmetricTypeCheck=(n,e,t)=>{if(!isKeyLike(e))throw new TypeError(withAlg(n,e,...types));if(e.type==="secret")throw new TypeError(`${types.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(t==="sign"&&e.type==="public")throw new TypeError(`${types.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(t==="decrypt"&&e.type==="public")throw new TypeError(`${types.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(e.algorithm&&t==="verify"&&e.type==="private")throw new TypeError(`${types.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(e.algorithm&&t==="encrypt"&&e.type==="private")throw new TypeError(`${types.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},checkKeyType=(n,e,t)=>{n.startsWith("HS")||n==="dir"||n.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(n)?symmetricTypeCheck(n,e):asymmetricTypeCheck(n,e,t)},checkKeyType$1=checkKeyType;async function cbcEncrypt(n,e,t,a,l){if(!(t instanceof Uint8Array))throw new TypeError(invalidKeyInput(t,"Uint8Array"));const h=parseInt(n.slice(1,4),10),g=await crypto$1.subtle.importKey("raw",t.subarray(h>>3),"AES-CBC",!1,["encrypt"]),p=await crypto$1.subtle.importKey("raw",t.subarray(0,h>>3),{hash:`SHA-${h<<1}`,name:"HMAC"},!1,["sign"]),y=new Uint8Array(await crypto$1.subtle.encrypt({iv:a,name:"AES-CBC"},g,e)),b=concat(l,a,y,uint64be(l.length<<3)),E=new Uint8Array((await crypto$1.subtle.sign("HMAC",p,b)).slice(0,h>>3));return{ciphertext:y,tag:E}}async function gcmEncrypt(n,e,t,a,l){let h;t instanceof Uint8Array?h=await crypto$1.subtle.importKey("raw",t,"AES-GCM",!1,["encrypt"]):(checkEncCryptoKey(t,n,"encrypt"),h=t);const g=new Uint8Array(await crypto$1.subtle.encrypt({additionalData:l,iv:a,name:"AES-GCM",tagLength:128},h,e)),p=g.slice(-16);return{ciphertext:g.slice(0,-16),tag:p}}const encrypt=async(n,e,t,a,l)=>{if(!isCryptoKey(t)&&!(t instanceof Uint8Array))throw new TypeError(invalidKeyInput(t,...types,"Uint8Array"));switch(checkIvLength$1(n,a),n){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&checkCekLength$1(t,parseInt(n.slice(-3),10)),cbcEncrypt(n,e,t,a,l);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&checkCekLength$1(t,parseInt(n.slice(1,4),10)),gcmEncrypt(n,e,t,a,l);default:throw new JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}},encrypt$1=encrypt;async function wrap(n,e,t,a){const l=n.slice(0,7);a||(a=generateIv(l));const{ciphertext:h,tag:g}=await encrypt$1(l,t,e,a,new Uint8Array(0));return{encryptedKey:h,iv:encode$1(a),tag:encode$1(g)}}async function unwrap(n,e,t,a,l){const h=n.slice(0,7);return decrypt$3(h,e,t,a,l,new Uint8Array(0))}async function decryptKeyManagement(n,e,t,a,l){switch(checkKeyType$1(n,e,"decrypt"),n){case"dir":{if(t!==void 0)throw new JWEInvalid("Encountered unexpected JWE Encrypted Key");return e}case"ECDH-ES":if(t!==void 0)throw new JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!isObject(a.epk))throw new JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!ecdhAllowed(e))throw new JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");const h=await importJWK(a.epk,n);let g,p;if(a.apu!==void 0){if(typeof a.apu!="string")throw new JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');g=decode$1(a.apu)}if(a.apv!==void 0){if(typeof a.apv!="string")throw new JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');p=decode$1(a.apv)}const y=await deriveKey$1(h,e,n==="ECDH-ES"?a.enc:n,n==="ECDH-ES"?bitLength(a.enc):parseInt(n.slice(-5,-2),10),g,p);if(n==="ECDH-ES")return y;if(t===void 0)throw new JWEInvalid("JWE Encrypted Key missing");return unwrap$1(n.slice(-6),y,t)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(t===void 0)throw new JWEInvalid("JWE Encrypted Key missing");return decrypt(n,e,t)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(t===void 0)throw new JWEInvalid("JWE Encrypted Key missing");if(typeof a.p2c!="number")throw new JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');const h=(l==null?void 0:l.maxPBES2Count)||1e4;if(a.p2c>h)throw new JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof a.p2s!="string")throw new JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');return decrypt$1(n,e,t,a.p2c,decode$1(a.p2s))}case"A128KW":case"A192KW":case"A256KW":{if(t===void 0)throw new JWEInvalid("JWE Encrypted Key missing");return unwrap$1(n,e,t)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(t===void 0)throw new JWEInvalid("JWE Encrypted Key missing");if(typeof a.iv!="string")throw new JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof a.tag!="string")throw new JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');const h=decode$1(a.iv),g=decode$1(a.tag);return unwrap(n,e,t,h,g)}default:throw new JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function validateCrit(n,e,t,a,l){if(l.crit!==void 0&&a.crit===void 0)throw new n('"crit" (Critical) Header Parameter MUST be integrity protected');if(!a||a.crit===void 0)return new Set;if(!Array.isArray(a.crit)||a.crit.length===0||a.crit.some(g=>typeof g!="string"||g.length===0))throw new n('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let h;t!==void 0?h=new Map([...Object.entries(t),...e.entries()]):h=e;for(const g of a.crit){if(!h.has(g))throw new JOSENotSupported(`Extension Header Parameter "${g}" is not recognized`);if(l[g]===void 0)throw new n(`Extension Header Parameter "${g}" is missing`);if(h.get(g)&&a[g]===void 0)throw new n(`Extension Header Parameter "${g}" MUST be integrity protected`)}return new Set(a.crit)}const validateAlgorithms=(n,e)=>{if(e!==void 0&&(!Array.isArray(e)||e.some(t=>typeof t!="string")))throw new TypeError(`"${n}" option must be an array of strings`);if(e)return new Set(e)},validateAlgorithms$1=validateAlgorithms;async function flattenedDecrypt(n,e,t){var a;if(!isObject(n))throw new JWEInvalid("Flattened JWE must be an object");if(n.protected===void 0&&n.header===void 0&&n.unprotected===void 0)throw new JWEInvalid("JOSE Header missing");if(typeof n.iv!="string")throw new JWEInvalid("JWE Initialization Vector missing or incorrect type");if(typeof n.ciphertext!="string")throw new JWEInvalid("JWE Ciphertext missing or incorrect type");if(typeof n.tag!="string")throw new JWEInvalid("JWE Authentication Tag missing or incorrect type");if(n.protected!==void 0&&typeof n.protected!="string")throw new JWEInvalid("JWE Protected Header incorrect type");if(n.encrypted_key!==void 0&&typeof n.encrypted_key!="string")throw new JWEInvalid("JWE Encrypted Key incorrect type");if(n.aad!==void 0&&typeof n.aad!="string")throw new JWEInvalid("JWE AAD incorrect type");if(n.header!==void 0&&!isObject(n.header))throw new JWEInvalid("JWE Shared Unprotected Header incorrect type");if(n.unprotected!==void 0&&!isObject(n.unprotected))throw new JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");let l;if(n.protected)try{const O=decode$1(n.protected);l=JSON.parse(decoder.decode(O))}catch{throw new JWEInvalid("JWE Protected Header is invalid")}if(!isDisjoint$1(l,n.header,n.unprotected))throw new JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const h={...l,...n.header,...n.unprotected};if(validateCrit(JWEInvalid,new Map,t==null?void 0:t.crit,l,h),h.zip!==void 0){if(!l||!l.zip)throw new JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(h.zip!=="DEF")throw new JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:g,enc:p}=h;if(typeof g!="string"||!g)throw new JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if(typeof p!="string"||!p)throw new JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");const y=t&&validateAlgorithms$1("keyManagementAlgorithms",t.keyManagementAlgorithms),b=t&&validateAlgorithms$1("contentEncryptionAlgorithms",t.contentEncryptionAlgorithms);if(y&&!y.has(g))throw new JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(b&&!b.has(p))throw new JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');let E;n.encrypted_key!==void 0&&(E=decode$1(n.encrypted_key));let C=!1;typeof e=="function"&&(e=await e(l,n),C=!0);let A;try{A=await decryptKeyManagement(g,e,E,h,t)}catch(O){if(O instanceof TypeError||O instanceof JWEInvalid||O instanceof JOSENotSupported)throw O;A=generateCek(p)}const B=decode$1(n.iv),M=decode$1(n.tag),N=encoder.encode((a=n.protected)!==null&&a!==void 0?a:"");let Z;n.aad!==void 0?Z=concat(N,encoder.encode("."),encoder.encode(n.aad)):Z=N;let ee=await decrypt$3(p,A,decode$1(n.ciphertext),B,M,Z);h.zip==="DEF"&&(ee=await((t==null?void 0:t.inflateRaw)||inflate)(ee));const F={plaintext:ee};return n.protected!==void 0&&(F.protectedHeader=l),n.aad!==void 0&&(F.additionalAuthenticatedData=decode$1(n.aad)),n.unprotected!==void 0&&(F.sharedUnprotectedHeader=n.unprotected),n.header!==void 0&&(F.unprotectedHeader=n.header),C?{...F,key:e}:F}async function compactDecrypt(n,e,t){if(n instanceof Uint8Array&&(n=decoder.decode(n)),typeof n!="string")throw new JWEInvalid("Compact JWE must be a string or Uint8Array");const{0:a,1:l,2:h,3:g,4:p,length:y}=n.split(".");if(y!==5)throw new JWEInvalid("Invalid Compact JWE");const b=await flattenedDecrypt({ciphertext:g,iv:h||void 0,protected:a||void 0,tag:p||void 0,encrypted_key:l||void 0},e,t),E={plaintext:b.plaintext,protectedHeader:b.protectedHeader};return typeof e=="function"?{...E,key:b.key}:E}async function generalDecrypt(n,e,t){if(!isObject(n))throw new JWEInvalid("General JWE must be an object");if(!Array.isArray(n.recipients)||!n.recipients.every(isObject))throw new JWEInvalid("JWE Recipients missing or incorrect type");if(!n.recipients.length)throw new JWEInvalid("JWE Recipients has no members");for(const a of n.recipients)try{return await flattenedDecrypt({aad:n.aad,ciphertext:n.ciphertext,encrypted_key:a.encrypted_key,header:a.header,iv:n.iv,protected:n.protected,tag:n.tag,unprotected:n.unprotected},e,t)}catch{}throw new JWEDecryptionFailed}const keyToJWK=async n=>{if(n instanceof Uint8Array)return{kty:"oct",k:encode$1(n)};if(!isCryptoKey(n))throw new TypeError(invalidKeyInput(n,...types,"Uint8Array"));if(!n.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:e,key_ops:t,alg:a,use:l,...h}=await crypto$1.subtle.exportKey("jwk",n);return h},keyToJWK$1=keyToJWK;async function exportSPKI(n){return toSPKI(n)}async function exportPKCS8(n){return toPKCS8(n)}async function exportJWK(n){return keyToJWK$1(n)}async function encryptKeyManagement(n,e,t,a,l={}){let h,g,p;switch(checkKeyType$1(n,t,"encrypt"),n){case"dir":{p=t;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!ecdhAllowed(t))throw new JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:y,apv:b}=l;let{epk:E}=l;E||(E=(await generateEpk(t)).privateKey);const{x:C,y:A,crv:B,kty:M}=await exportJWK(E),N=await deriveKey$1(t,E,n==="ECDH-ES"?e:n,n==="ECDH-ES"?bitLength(e):parseInt(n.slice(-5,-2),10),y,b);if(g={epk:{x:C,crv:B,kty:M}},M==="EC"&&(g.epk.y=A),y&&(g.apu=encode$1(y)),b&&(g.apv=encode$1(b)),n==="ECDH-ES"){p=N;break}p=a||generateCek(e);const Z=n.slice(-6);h=await wrap$1(Z,N,p);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{p=a||generateCek(e),h=await encrypt$2(n,t,p);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{p=a||generateCek(e);const{p2c:y,p2s:b}=l;({encryptedKey:h,...g}=await encrypt$3(n,t,p,y,b));break}case"A128KW":case"A192KW":case"A256KW":{p=a||generateCek(e),h=await wrap$1(n,t,p);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{p=a||generateCek(e);const{iv:y}=l;({encryptedKey:h,...g}=await wrap(n,t,p,y));break}default:throw new JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:p,encryptedKey:h,parameters:g}}const unprotected=Symbol();class FlattenedEncrypt{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,t){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!isDisjoint$1(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const a={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(validateCrit(JWEInvalid,new Map,t==null?void 0:t.crit,this._protectedHeader,a),a.zip!==void 0){if(!this._protectedHeader||!this._protectedHeader.zip)throw new JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(a.zip!=="DEF")throw new JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:l,enc:h}=a;if(typeof l!="string"||!l)throw new JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof h!="string"||!h)throw new JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let g;if(l==="dir"){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if(l==="ECDH-ES"&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");let p;{let M;({cek:p,encryptedKey:g,parameters:M}=await encryptKeyManagement(l,h,e,this._cek,this._keyManagementParameters)),M&&(t&&unprotected in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...M}:this.setUnprotectedHeader(M):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...M}:this.setProtectedHeader(M))}this._iv||(this._iv=generateIv(h));let y,b,E;this._protectedHeader?b=encoder.encode(encode$1(JSON.stringify(this._protectedHeader))):b=encoder.encode(""),this._aad?(E=encode$1(this._aad),y=concat(b,encoder.encode("."),encoder.encode(E))):y=b;let C,A;if(a.zip==="DEF"){const M=await((t==null?void 0:t.deflateRaw)||deflate)(this._plaintext);({ciphertext:C,tag:A}=await encrypt$1(h,M,p,this._iv,y))}else({ciphertext:C,tag:A}=await encrypt$1(h,this._plaintext,p,this._iv,y));const B={ciphertext:encode$1(C),iv:encode$1(this._iv),tag:encode$1(A)};return g&&(B.encrypted_key=encode$1(g)),E&&(B.aad=E),this._protectedHeader&&(B.protected=decoder.decode(b)),this._sharedUnprotectedHeader&&(B.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(B.header=this._unprotectedHeader),B}}class IndividualRecipient{constructor(e,t,a){this.parent=e,this.key=t,this.options=a}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}}class GeneralEncrypt{constructor(e){this._recipients=[],this._plaintext=e}addRecipient(e,t){const a=new IndividualRecipient(this,e,{crit:t==null?void 0:t.crit});return this._recipients.push(a),a}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(e){var t,a,l;if(!this._recipients.length)throw new JWEInvalid("at least one recipient must be added");if(e={deflateRaw:e==null?void 0:e.deflateRaw},this._recipients.length===1){const[y]=this._recipients,b=await new FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(y.unprotectedHeader).encrypt(y.key,{...y.options,...e});let E={ciphertext:b.ciphertext,iv:b.iv,recipients:[{}],tag:b.tag};return b.aad&&(E.aad=b.aad),b.protected&&(E.protected=b.protected),b.unprotected&&(E.unprotected=b.unprotected),b.encrypted_key&&(E.recipients[0].encrypted_key=b.encrypted_key),b.header&&(E.recipients[0].header=b.header),E}let h;for(let y=0;y<this._recipients.length;y++){const b=this._recipients[y];if(!isDisjoint$1(this._protectedHeader,this._unprotectedHeader,b.unprotectedHeader))throw new JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const E={...this._protectedHeader,...this._unprotectedHeader,...b.unprotectedHeader},{alg:C}=E;if(typeof C!="string"||!C)throw new JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(C==="dir"||C==="ECDH-ES")throw new JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof E.enc!="string"||!E.enc)throw new JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!h)h=E.enc;else if(h!==E.enc)throw new JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(validateCrit(JWEInvalid,new Map,b.options.crit,this._protectedHeader,E),E.zip!==void 0&&(!this._protectedHeader||!this._protectedHeader.zip))throw new JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}const g=generateCek(h);let p={ciphertext:"",iv:"",recipients:[],tag:""};for(let y=0;y<this._recipients.length;y++){const b=this._recipients[y],E={};p.recipients.push(E);const A={...this._protectedHeader,...this._unprotectedHeader,...b.unprotectedHeader}.alg.startsWith("PBES2")?2048+y:void 0;if(y===0){const N=await new FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(g).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(b.unprotectedHeader).setKeyManagementParameters({p2c:A}).encrypt(b.key,{...b.options,...e,[unprotected]:!0});p.ciphertext=N.ciphertext,p.iv=N.iv,p.tag=N.tag,N.aad&&(p.aad=N.aad),N.protected&&(p.protected=N.protected),N.unprotected&&(p.unprotected=N.unprotected),E.encrypted_key=N.encrypted_key,N.header&&(E.header=N.header);continue}const{encryptedKey:B,parameters:M}=await encryptKeyManagement(((t=b.unprotectedHeader)===null||t===void 0?void 0:t.alg)||((a=this._protectedHeader)===null||a===void 0?void 0:a.alg)||((l=this._unprotectedHeader)===null||l===void 0?void 0:l.alg),h,b.key,g,{p2c:A});E.encrypted_key=encode$1(B),(b.unprotectedHeader||M)&&(E.header={...b.unprotectedHeader,...M})}return p}}function subtleDsa(n,e){const t=`SHA-${n.slice(-3)}`;switch(n){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:n.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case(isCloudflareWorkers()&&"EdDSA"):const{namedCurve:a}=e;return{name:a,namedCurve:a};case"EdDSA":return{name:e.name};default:throw new JOSENotSupported(`alg ${n} is not supported either by JOSE or your javascript runtime`)}}function getCryptoKey(n,e,t){if(isCryptoKey(e))return checkSigCryptoKey(e,n,t),e;if(e instanceof Uint8Array){if(!n.startsWith("HS"))throw new TypeError(invalidKeyInput(e,...types));return crypto$1.subtle.importKey("raw",e,{hash:`SHA-${n.slice(-3)}`,name:"HMAC"},!1,[t])}throw new TypeError(invalidKeyInput(e,...types,"Uint8Array"))}const verify=async(n,e,t,a)=>{const l=await getCryptoKey(n,e,"verify");checkKeyLength(n,l);const h=subtleDsa(n,l.algorithm);try{return await crypto$1.subtle.verify(h,l,t,a)}catch{return!1}},verify$1=verify;async function flattenedVerify(n,e,t){var a;if(!isObject(n))throw new JWSInvalid("Flattened JWS must be an object");if(n.protected===void 0&&n.header===void 0)throw new JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(n.protected!==void 0&&typeof n.protected!="string")throw new JWSInvalid("JWS Protected Header incorrect type");if(n.payload===void 0)throw new JWSInvalid("JWS Payload missing");if(typeof n.signature!="string")throw new JWSInvalid("JWS Signature missing or incorrect type");if(n.header!==void 0&&!isObject(n.header))throw new JWSInvalid("JWS Unprotected Header incorrect type");let l={};if(n.protected)try{const Z=decode$1(n.protected);l=JSON.parse(decoder.decode(Z))}catch{throw new JWSInvalid("JWS Protected Header is invalid")}if(!isDisjoint$1(l,n.header))throw new JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const h={...l,...n.header},g=validateCrit(JWSInvalid,new Map([["b64",!0]]),t==null?void 0:t.crit,l,h);let p=!0;if(g.has("b64")&&(p=l.b64,typeof p!="boolean"))throw new JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:y}=h;if(typeof y!="string"||!y)throw new JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');const b=t&&validateAlgorithms$1("algorithms",t.algorithms);if(b&&!b.has(y))throw new JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(p){if(typeof n.payload!="string")throw new JWSInvalid("JWS Payload must be a string")}else if(typeof n.payload!="string"&&!(n.payload instanceof Uint8Array))throw new JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let E=!1;typeof e=="function"&&(e=await e(l,n),E=!0),checkKeyType$1(y,e,"verify");const C=concat(encoder.encode((a=n.protected)!==null&&a!==void 0?a:""),encoder.encode("."),typeof n.payload=="string"?encoder.encode(n.payload):n.payload),A=decode$1(n.signature);if(!await verify$1(y,e,A,C))throw new JWSSignatureVerificationFailed;let M;p?M=decode$1(n.payload):typeof n.payload=="string"?M=encoder.encode(n.payload):M=n.payload;const N={payload:M};return n.protected!==void 0&&(N.protectedHeader=l),n.header!==void 0&&(N.unprotectedHeader=n.header),E?{...N,key:e}:N}async function compactVerify(n,e,t){if(n instanceof Uint8Array&&(n=decoder.decode(n)),typeof n!="string")throw new JWSInvalid("Compact JWS must be a string or Uint8Array");const{0:a,1:l,2:h,length:g}=n.split(".");if(g!==3)throw new JWSInvalid("Invalid Compact JWS");const p=await flattenedVerify({payload:l,protected:a,signature:h},e,t),y={payload:p.payload,protectedHeader:p.protectedHeader};return typeof e=="function"?{...y,key:p.key}:y}async function generalVerify(n,e,t){if(!isObject(n))throw new JWSInvalid("General JWS must be an object");if(!Array.isArray(n.signatures)||!n.signatures.every(isObject))throw new JWSInvalid("JWS Signatures missing or incorrect type");for(const a of n.signatures)try{return await flattenedVerify({header:a.header,payload:n.payload,protected:a.protected,signature:a.signature},e,t)}catch{}throw new JWSSignatureVerificationFailed}const epoch=n=>Math.floor(n.getTime()/1e3),minute=60,hour=minute*60,day=hour*24,week=day*7,year=day*365.25,REGEX=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,secs=n=>{const e=REGEX.exec(n);if(!e)throw new TypeError("Invalid time period format");const t=parseFloat(e[1]);switch(e[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(t);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(t*minute);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(t*hour);case"day":case"days":case"d":return Math.round(t*day);case"week":case"weeks":case"w":return Math.round(t*week);default:return Math.round(t*year)}},normalizeTyp=n=>n.toLowerCase().replace(/^application\//,""),checkAudiencePresence=(n,e)=>typeof n=="string"?e.includes(n):Array.isArray(n)?e.some(Set.prototype.has.bind(new Set(n))):!1,jwtPayload=(n,e,t={})=>{const{typ:a}=t;if(a&&(typeof n.typ!="string"||normalizeTyp(n.typ)!==normalizeTyp(a)))throw new JWTClaimValidationFailed('unexpected "typ" JWT header value',"typ","check_failed");let l;try{l=JSON.parse(decoder.decode(e))}catch{}if(!isObject(l))throw new JWTInvalid("JWT Claims Set must be a top-level JSON object");const{issuer:h}=t;if(h&&!(Array.isArray(h)?h:[h]).includes(l.iss))throw new JWTClaimValidationFailed('unexpected "iss" claim value',"iss","check_failed");const{subject:g}=t;if(g&&l.sub!==g)throw new JWTClaimValidationFailed('unexpected "sub" claim value',"sub","check_failed");const{audience:p}=t;if(p&&!checkAudiencePresence(l.aud,typeof p=="string"?[p]:p))throw new JWTClaimValidationFailed('unexpected "aud" claim value',"aud","check_failed");let y;switch(typeof t.clockTolerance){case"string":y=secs(t.clockTolerance);break;case"number":y=t.clockTolerance;break;case"undefined":y=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:b}=t,E=epoch(b||new Date);if((l.iat!==void 0||t.maxTokenAge)&&typeof l.iat!="number")throw new JWTClaimValidationFailed('"iat" claim must be a number',"iat","invalid");if(l.nbf!==void 0){if(typeof l.nbf!="number")throw new JWTClaimValidationFailed('"nbf" claim must be a number',"nbf","invalid");if(l.nbf>E+y)throw new JWTClaimValidationFailed('"nbf" claim timestamp check failed',"nbf","check_failed")}if(l.exp!==void 0){if(typeof l.exp!="number")throw new JWTClaimValidationFailed('"exp" claim must be a number',"exp","invalid");if(l.exp<=E-y)throw new JWTExpired('"exp" claim timestamp check failed',"exp","check_failed")}if(t.maxTokenAge){const C=E-l.iat,A=typeof t.maxTokenAge=="number"?t.maxTokenAge:secs(t.maxTokenAge);if(C-y>A)throw new JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(C<0-y)throw new JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return l};async function jwtVerify(n,e,t){var a;const l=await compactVerify(n,e,t);if(!((a=l.protectedHeader.crit)===null||a===void 0)&&a.includes("b64")&&l.protectedHeader.b64===!1)throw new JWTInvalid("JWTs MUST NOT use unencoded payload");const g={payload:jwtPayload(l.protectedHeader,l.payload,t),protectedHeader:l.protectedHeader};return typeof e=="function"?{...g,key:l.key}:g}async function jwtDecrypt(n,e,t){const a=await compactDecrypt(n,e,t),l=jwtPayload(a.protectedHeader,a.plaintext,t),{protectedHeader:h}=a;if(h.iss!==void 0&&h.iss!==l.iss)throw new JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(h.sub!==void 0&&h.sub!==l.sub)throw new JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(h.aud!==void 0&&JSON.stringify(h.aud)!==JSON.stringify(l.aud))throw new JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',"aud","mismatch");const g={payload:l,protectedHeader:h};return typeof e=="function"?{...g,key:a.key}:g}class CompactEncrypt{constructor(e){this._flattened=new FlattenedEncrypt(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){const a=await this._flattened.encrypt(e,t);return[a.protected,a.encrypted_key,a.iv,a.ciphertext,a.tag].join(".")}}const sign=async(n,e,t)=>{const a=await getCryptoKey(n,e,"sign");checkKeyLength(n,a);const l=await crypto$1.subtle.sign(subtleDsa(n,a.algorithm),a,t);return new Uint8Array(l)},sign$1=sign;class FlattenedSign{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){if(!this._protectedHeader&&!this._unprotectedHeader)throw new JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!isDisjoint$1(this._protectedHeader,this._unprotectedHeader))throw new JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const a={...this._protectedHeader,...this._unprotectedHeader},l=validateCrit(JWSInvalid,new Map([["b64",!0]]),t==null?void 0:t.crit,this._protectedHeader,a);let h=!0;if(l.has("b64")&&(h=this._protectedHeader.b64,typeof h!="boolean"))throw new JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:g}=a;if(typeof g!="string"||!g)throw new JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');checkKeyType$1(g,e,"sign");let p=this._payload;h&&(p=encoder.encode(encode$1(p)));let y;this._protectedHeader?y=encoder.encode(encode$1(JSON.stringify(this._protectedHeader))):y=encoder.encode("");const b=concat(y,encoder.encode("."),p),E=await sign$1(g,e,b),C={signature:encode$1(E),payload:""};return h&&(C.payload=decoder.decode(p)),this._unprotectedHeader&&(C.header=this._unprotectedHeader),this._protectedHeader&&(C.protected=decoder.decode(y)),C}}class CompactSign{constructor(e){this._flattened=new FlattenedSign(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){const a=await this._flattened.sign(e,t);if(a.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${a.protected}.${a.payload}.${a.signature}`}}class IndividualSignature{constructor(e,t,a){this.parent=e,this.key=t,this.options=a}setProtectedHeader(e){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}}class GeneralSign{constructor(e){this._signatures=[],this._payload=e}addSignature(e,t){const a=new IndividualSignature(this,e,t);return this._signatures.push(a),a}async sign(){if(!this._signatures.length)throw new JWSInvalid("at least one signature must be added");const e={signatures:[],payload:""};for(let t=0;t<this._signatures.length;t++){const a=this._signatures[t],l=new FlattenedSign(this._payload);l.setProtectedHeader(a.protectedHeader),l.setUnprotectedHeader(a.unprotectedHeader);const{payload:h,...g}=await l.sign(a.key,a.options);if(t===0)e.payload=h;else if(e.payload!==h)throw new JWSInvalid("inconsistent use of JWS Unencoded Payload Option (RFC7797)");e.signatures.push(g)}return e}}class ProduceJWT{constructor(e){if(!isObject(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return typeof e=="number"?this._payload={...this._payload,nbf:e}:this._payload={...this._payload,nbf:epoch(new Date)+secs(e)},this}setExpirationTime(e){return typeof e=="number"?this._payload={...this._payload,exp:e}:this._payload={...this._payload,exp:epoch(new Date)+secs(e)},this}setIssuedAt(e){return typeof e>"u"?this._payload={...this._payload,iat:epoch(new Date)}:this._payload={...this._payload,iat:e},this}}class SignJWT extends ProduceJWT{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){var a;const l=new CompactSign(encoder.encode(JSON.stringify(this._payload)));if(l.setProtectedHeader(this._protectedHeader),Array.isArray((a=this._protectedHeader)===null||a===void 0?void 0:a.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new JWTInvalid("JWTs MUST NOT use unencoded payload");return l.sign(e,t)}}class EncryptJWT extends ProduceJWT{setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){const a=new CompactEncrypt(encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),a.setProtectedHeader(this._protectedHeader),this._iv&&a.setInitializationVector(this._iv),this._cek&&a.setContentEncryptionKey(this._cek),this._keyManagementParameters&&a.setKeyManagementParameters(this._keyManagementParameters),a.encrypt(e,t)}}const check=(n,e)=>{if(typeof n!="string"||!n)throw new JWKInvalid(`${e} missing or invalid`)};async function calculateJwkThumbprint(n,e){if(!isObject(n))throw new TypeError("JWK must be an object");if(e??(e="sha256"),e!=="sha256"&&e!=="sha384"&&e!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let t;switch(n.kty){case"EC":check(n.crv,'"crv" (Curve) Parameter'),check(n.x,'"x" (X Coordinate) Parameter'),check(n.y,'"y" (Y Coordinate) Parameter'),t={crv:n.crv,kty:n.kty,x:n.x,y:n.y};break;case"OKP":check(n.crv,'"crv" (Subtype of Key Pair) Parameter'),check(n.x,'"x" (Public Key) Parameter'),t={crv:n.crv,kty:n.kty,x:n.x};break;case"RSA":check(n.e,'"e" (Exponent) Parameter'),check(n.n,'"n" (Modulus) Parameter'),t={e:n.e,kty:n.kty,n:n.n};break;case"oct":check(n.k,'"k" (Key Value) Parameter'),t={k:n.k,kty:n.kty};break;default:throw new JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}const a=encoder.encode(JSON.stringify(t));return encode$1(await digest$1(e,a))}async function calculateJwkThumbprintUri(n,e){e??(e="sha256");const t=await calculateJwkThumbprint(n,e);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${e.slice(-3)}:${t}`}async function EmbeddedJWK(n,e){const t={...n,...e.header};if(!isObject(t.jwk))throw new JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const a=await importJWK({...t.jwk,ext:!0},t.alg,!0);if(a instanceof Uint8Array||a.type!=="public")throw new JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return a}function getKtyFromAlg(n){switch(typeof n=="string"&&n.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}function isJWKSLike(n){return n&&typeof n=="object"&&Array.isArray(n.keys)&&n.keys.every(isJWKLike)}function isJWKLike(n){return isObject(n)}function clone(n){return typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n))}class LocalJWKSet{constructor(e){if(this._cached=new WeakMap,!isJWKSLike(e))throw new JWKSInvalid("JSON Web Key Set malformed");this._jwks=clone(e)}async getKey(e,t){const{alg:a,kid:l}={...e,...t.header},h=getKtyFromAlg(a),g=this._jwks.keys.filter(E=>{let C=h===E.kty;if(C&&typeof l=="string"&&(C=l===E.kid),C&&typeof E.alg=="string"&&(C=a===E.alg),C&&typeof E.use=="string"&&(C=E.use==="sig"),C&&Array.isArray(E.key_ops)&&(C=E.key_ops.includes("verify")),C&&a==="EdDSA"&&(C=E.crv==="Ed25519"||E.crv==="Ed448"),C)switch(a){case"ES256":C=E.crv==="P-256";break;case"ES256K":C=E.crv==="secp256k1";break;case"ES384":C=E.crv==="P-384";break;case"ES512":C=E.crv==="P-521";break}return C}),{0:p,length:y}=g;if(y===0)throw new JWKSNoMatchingKey;if(y!==1)throw new JWKSMultipleMatchingKeys;const b=this._cached.get(p)||this._cached.set(p,{}).get(p);if(b[a]===void 0){const E=await importJWK({...p,ext:!0},a);if(E instanceof Uint8Array||E.type!=="public")throw new JWKSInvalid("JSON Web Key Set members must be public keys");b[a]=E}return b[a]}}function createLocalJWKSet(n){return LocalJWKSet.prototype.getKey.bind(new LocalJWKSet(n))}const fetchJwks=async(n,e,t)=>{let a,l,h=!1;typeof AbortController=="function"&&(a=new AbortController,l=setTimeout(()=>{h=!0,a.abort()},e));const g=await fetch(n.href,{signal:a?a.signal:void 0,redirect:"manual",headers:t.headers}).catch(p=>{throw h?new JWKSTimeout:p});if(l!==void 0&&clearTimeout(l),g.status!==200)throw new JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await g.json()}catch{throw new JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}},fetchJwks$1=fetchJwks;class RemoteJWKSet extends LocalJWKSet{constructor(e,t){if(super({keys:[]}),this._jwks=void 0,!(e instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:t==null?void 0:t.agent,headers:t==null?void 0:t.headers},this._timeoutDuration=typeof(t==null?void 0:t.timeoutDuration)=="number"?t==null?void 0:t.timeoutDuration:5e3,this._cooldownDuration=typeof(t==null?void 0:t.cooldownDuration)=="number"?t==null?void 0:t.cooldownDuration:3e4,this._cacheMaxAge=typeof(t==null?void 0:t.cacheMaxAge)=="number"?t==null?void 0:t.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(e,t){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(e,t)}catch(a){if(a instanceof JWKSNoMatchingKey&&this.coolingDown()===!1)return await this.reload(),super.getKey(e,t);throw a}}async reload(){if(this._pendingFetch&&isCloudflareWorkers())return new Promise(e=>{const t=()=>{this._pendingFetch===void 0?e():setTimeout(t,5)};t()});this._pendingFetch||(this._pendingFetch=fetchJwks$1(this._url,this._timeoutDuration,this._options).then(e=>{if(!isJWKSLike(e))throw new JWKSInvalid("JSON Web Key Set malformed");this._jwks={keys:e.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}}function createRemoteJWKSet(n,e){return RemoteJWKSet.prototype.getKey.bind(new RemoteJWKSet(n,e))}class UnsecuredJWT extends ProduceJWT{encode(){const e=encode$1(JSON.stringify({alg:"none"})),t=encode$1(JSON.stringify(this._payload));return`${e}.${t}.`}static decode(e,t){if(typeof e!="string")throw new JWTInvalid("Unsecured JWT must be a string");const{0:a,1:l,2:h,length:g}=e.split(".");if(g!==3||h!=="")throw new JWTInvalid("Invalid Unsecured JWT");let p;try{if(p=JSON.parse(decoder.decode(decode$1(a))),p.alg!=="none")throw new Error}catch{throw new JWTInvalid("Invalid Unsecured JWT")}return{payload:jwtPayload(p,decode$1(l),t),header:p}}}const encode=encode$1,decode=decode$1,base64url=Object.freeze(Object.defineProperty({__proto__:null,decode,encode},Symbol.toStringTag,{value:"Module"}));function decodeProtectedHeader(n){let e;if(typeof n=="string"){const t=n.split(".");(t.length===3||t.length===5)&&([e]=t)}else if(typeof n=="object"&&n)if("protected"in n)e=n.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof e!="string"||!e)throw new Error;const t=JSON.parse(decoder.decode(decode(e)));if(!isObject(t))throw new Error;return t}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function decodeJwt(n){if(typeof n!="string")throw new JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:t}=n.split(".");if(t===5)throw new JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(t!==3)throw new JWTInvalid("Invalid JWT");if(!e)throw new JWTInvalid("JWTs must contain a payload");let a;try{a=decode(e)}catch{throw new JWTInvalid("Failed to parse the base64url encoded payload")}let l;try{l=JSON.parse(decoder.decode(a))}catch{throw new JWTInvalid("Failed to parse the decoded payload as JSON")}if(!isObject(l))throw new JWTInvalid("Invalid JWT Claims Set");return l}async function generateSecret$1(n,e){var t;let a,l,h;switch(n){case"HS256":case"HS384":case"HS512":a=parseInt(n.slice(-3),10),l={name:"HMAC",hash:`SHA-${a}`,length:a},h=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return a=parseInt(n.slice(-3),10),random(new Uint8Array(a>>3));case"A128KW":case"A192KW":case"A256KW":a=parseInt(n.slice(1,4),10),l={name:"AES-KW",length:a},h=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":a=parseInt(n.slice(1,4),10),l={name:"AES-GCM",length:a},h=["encrypt","decrypt"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return crypto$1.subtle.generateKey(l,(t=e==null?void 0:e.extractable)!==null&&t!==void 0?t:!1,h)}function getModulusLengthOption(n){var e;const t=(e=n==null?void 0:n.modulusLength)!==null&&e!==void 0?e:2048;if(typeof t!="number"||t<2048)throw new JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return t}async function generateKeyPair$1(n,e){var t,a,l;let h,g;switch(n){case"PS256":case"PS384":case"PS512":h={name:"RSA-PSS",hash:`SHA-${n.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:getModulusLengthOption(e)},g=["sign","verify"];break;case"RS256":case"RS384":case"RS512":h={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:getModulusLengthOption(e)},g=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":h={name:"RSA-OAEP",hash:`SHA-${parseInt(n.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:getModulusLengthOption(e)},g=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":h={name:"ECDSA",namedCurve:"P-256"},g=["sign","verify"];break;case"ES384":h={name:"ECDSA",namedCurve:"P-384"},g=["sign","verify"];break;case"ES512":h={name:"ECDSA",namedCurve:"P-521"},g=["sign","verify"];break;case(isCloudflareWorkers()&&"EdDSA"):switch(e==null?void 0:e.crv){case void 0:case"Ed25519":h={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},g=["sign","verify"];break;default:throw new JOSENotSupported("Invalid or unsupported crv option provided")}break;case"EdDSA":g=["sign","verify"];const p=(t=e==null?void 0:e.crv)!==null&&t!==void 0?t:"Ed25519";switch(p){case"Ed25519":case"Ed448":h={name:p};break;default:throw new JOSENotSupported("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{g=["deriveKey","deriveBits"];const y=(a=e==null?void 0:e.crv)!==null&&a!==void 0?a:"P-256";switch(y){case"P-256":case"P-384":case"P-521":{h={name:"ECDH",namedCurve:y};break}case"X25519":case"X448":h={name:y};break;default:throw new JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return crypto$1.subtle.generateKey(h,(l=e==null?void 0:e.extractable)!==null&&l!==void 0?l:!1,g)}async function generateKeyPair(n,e){return generateKeyPair$1(n,e)}async function generateSecret(n,e){return generateSecret$1(n,e)}const browser=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt,CompactSign,EmbeddedJWK,EncryptJWT,FlattenedEncrypt,FlattenedSign,GeneralEncrypt,GeneralSign,SignJWT,UnsecuredJWT,base64url,calculateJwkThumbprint,calculateJwkThumbprintUri,compactDecrypt,compactVerify,createLocalJWKSet,createRemoteJWKSet,decodeJwt,decodeProtectedHeader,errors,exportJWK,exportPKCS8,exportSPKI,flattenedDecrypt,flattenedVerify,generalDecrypt,generalVerify,generateKeyPair,generateSecret,importJWK,importPKCS8,importSPKI,importX509,jwtDecrypt,jwtVerify},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(browser);var __awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(n,e,t,a){function l(h){return h instanceof t?h:new t(function(g){g(h)})}return new(t||(t=Promise))(function(h,g){function p(E){try{b(a.next(E))}catch(C){g(C)}}function y(E){try{b(a.throw(E))}catch(C){g(C)}}function b(E){E.done?h(E.value):l(E.value).then(p,y)}b((a=a.apply(n,e||[])).next())})},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(MangroveReviews$1,"__esModule",{value:!0});MangroveReviews$1.MangroveReviews=void 0;const jwk_to_pem_1=__importDefault(jwkToPem),axios_1=__importDefault(axios_1$1),jose_1=require$$2;class MangroveReviews{static signReview(e,t){return __awaiter(this,void 0,void 0,function*(){t=MangroveReviews.cleanPayload(t);const a="ES256",l=yield MangroveReviews.publicToPem(e.publicKey),h=JSON.stringify(yield crypto.subtle.exportKey("jwk",e.publicKey));return yield new jose_1.SignJWT(t).setProtectedHeader({alg:a,kid:l,jwk:h,enc:"utf-8"}).sign(e.privateKey)})}static submitReview(e,t=MangroveReviews.ORIGINAL_API){return axios_1.default.put(`${t}/submit/${e}`)}static signAndSubmitReview(e,t,a=MangroveReviews.ORIGINAL_API){return __awaiter(this,void 0,void 0,function*(){const l=yield MangroveReviews.signReview(e,t);return MangroveReviews.submitReview(l,a)})}static getReviews(e,t=MangroveReviews.ORIGINAL_API){return __awaiter(this,void 0,void 0,function*(){const{data:a}=yield axios_1.default.get(`${t}/reviews`,{params:e,headers:{"Content-Type":"application/json"}});return a})}static getSubject(e,t=MangroveReviews.ORIGINAL_API){return axios_1.default.get(`${t}/subject/${encodeURIComponent(e)}`).then(({data:a})=>a)}static getIssuer(e,t=MangroveReviews.ORIGINAL_API){return axios_1.default.get(`${t}/issuer/${encodeURIComponent(e)}`).then(({data:a})=>a)}static batchAggregate(e,t=MangroveReviews.ORIGINAL_API){return!e.pems&&!e.subs?null:axios_1.default.post(`${t}/batch`,e).then(({data:a})=>a)}static generateKeypair(){return crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"])}static jwkToKeypair(e){return __awaiter(this,void 0,void 0,function*(){let t=Object.assign({},e);if(!t||t.metadata!==MangroveReviews.PRIVATE_KEY_METADATA)throw new Error(`does not contain the required metadata field "${MangroveReviews.PRIVATE_KEY_METADATA}"`);const a=yield crypto.subtle.importKey("jwk",t,{name:"ECDSA",namedCurve:"P-256"},!0,["sign"]);delete t.d,delete t.dp,delete t.dq,delete t.q,delete t.qi,t.key_ops=["verify"];const l=yield crypto.subtle.importKey("jwk",t,{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);return{privateKey:a,publicKey:l}})}static keypairToJwk(e){return __awaiter(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("jwk",e.privateKey);return t.metadata=MangroveReviews.PRIVATE_KEY_METADATA,t})}static u8aToString(e){return new TextDecoder().decode(e)}static privateToPem(e){return __awaiter(this,void 0,void 0,function*(){try{const t=yield crypto.subtle.exportKey("pkcs8",e);return`-----BEGIN PRIVATE KEY-----
${btoa(String.fromCharCode(...new Uint8Array(t)))}
-----END PRIVATE KEY-----`}catch{const a=yield crypto.subtle.exportKey("jwk",e);return(0,jwk_to_pem_1.default)(a,{private:!0})}})}static publicToPem(e){return __awaiter(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("spki",e);return`-----BEGIN PUBLIC KEY-----${btoa(String.fromCharCode(...new Uint8Array(t)))}-----END PUBLIC KEY-----`})}static cleanPayload(e){if(!e.sub)throw"Payload must include subject URI in `sub` field.";if(!e.rating&&!e.opinion)throw"Payload must include either rating or opinion.";if(e.rating!==void 0&&(e.rating<0||e.rating>100))throw"Rating must be in the range from 0 to 100.";e.iat=Math.floor(Date.now()/1e3),e.rating===null&&delete e.rating,e.opinion||delete e.opinion,(!e.images||!e.images.length)&&delete e.images;const t=Object.assign({client_id:window.location.href},e.metadata);for(const a in t){const l=t[a];(l===null||l===!1)&&delete t[a]}return e.metadata=t,e}}MangroveReviews$1.MangroveReviews=MangroveReviews;MangroveReviews.ORIGINAL_API="https://api.mangrove.reviews";MangroveReviews.PRIVATE_KEY_METADATA="Mangrove private key";(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.MangroveReviews=void 0;const e=MangroveReviews$1;Object.defineProperty(n,"MangroveReviews",{enumerable:!0,get:function(){return e.MangroveReviews}})})(dist);class MangroveIdentity{constructor(e){ke(this,"keypair");ke(this,"key_id");const t=new UIEventSource(void 0);this.key_id=t;const a=new UIEventSource(void 0);this.keypair=a,e.addCallbackAndRunD(async l=>{if(l==="")return;const h=await dist.MangroveReviews.jwkToKeypair(JSON.parse(l));a.setData(h);const g=await dist.MangroveReviews.publicToPem(h.publicKey);t.setData(g)});try{!Utils.runningFromConsole&&(e.data??"")===""&&MangroveIdentity.CreateIdentity(e).then(l=>{})}catch(l){console.error("Could not create identity: ",l)}}static async CreateIdentity(e){const t=await dist.MangroveReviews.generateKeypair(),a=await dist.MangroveReviews.keypairToJwk(t);(e.data??"")===""&&e.setData(JSON.stringify(a))}}const Po=class{constructor(e,t,a){ke(this,"subjectUri");ke(this,"_reviews",new UIEventSource([]));ke(this,"reviews",this._reviews);ke(this,"_lat");ke(this,"_lon");ke(this,"_uncertainty");ke(this,"_name");ke(this,"_identity");const l=GeoOperations.centerpointCoordinates(e);[this._lon,this._lat]=l,this._identity=(t==null?void 0:t.mangroveIdentity)??new MangroveIdentity(new UIEventSource(void 0));const h=(a==null?void 0:a.nameKey)??"name";if(e.geometry.type==="Point")this._uncertainty=(a==null?void 0:a.uncertaintyRadius)??10;else{let p;e.geometry.type==="LineString"?p=[e.geometry.coordinates]:(e.geometry.type==="MultiLineString"||e.geometry.type==="Polygon")&&(p=e.geometry.coordinates);let y=0;for(const b of p)for(const E of b)y=Math.max(y,GeoOperations.distanceBetween(l,E));this._uncertainty=(a==null?void 0:a.uncertaintyRadius)??y}this._name=t.allElements.getEventSourceById(e.properties.id).map(p=>p[h]??(a==null?void 0:a.fallbackName)),this.subjectUri=this.ConstructSubjectUri();const g=this;this.subjectUri.addCallbackAndRunD(async p=>{const y=await dist.MangroveReviews.getReviews({sub:p});g.addReviews(y.reviews)}),this.ConstructSubjectUri(!0).addCallbackAndRunD(async p=>{try{const y=await dist.MangroveReviews.getReviews({sub:p});g.addReviews(y.reviews)}catch{console.log("Could not fetch reviews for partially incorrect query ",p)}})}static construct(e,t,a){const l=e.properties.id,h=Po._featureReviewsCache[l];if(h!==void 0)return h;const g=new Po(e,t,a);return Po._featureReviewsCache[l]=g,g}async createReview(e){const t={sub:this.subjectUri.data,...e},a=this._identity.keypair.data;console.log(t);const l=await dist.MangroveReviews.signReview(a,t);console.log("Signed:",l),await dist.MangroveReviews.submitReview(l),this._reviews.data.push({...t,madeByLoggedInUser:new ImmutableStore(!0)}),this._reviews.ping()}addReviews(e){const t=this,a=new Set(t._reviews.data.map(h=>h.rating+" "+h.opinion));let l=!1;for(const h of e){const g=h.payload;try{const y=new URL(g.sub);if(console.log("URL is",y),y.protocol==="geo:"){const b=y.pathname.split(",").map(C=>Number(C));if(GeoOperations.distanceBetween([this._lat,this._lon],b)>this._uncertainty)continue}}catch(y){console.warn(y)}const p=g.rating+" "+g.opinion;a.has(p)||(t._reviews.data.push({...g,madeByLoggedInUser:this._identity.key_id.map(y=>h.kid===y)}),l=!0)}l&&t._reviews.ping()}ConstructSubjectUri(e=!1){const t=this;return this._name.map(function(a){let l=`geo:${t._lat},${t._lon}?u=${t._uncertainty}`;return a&&(l+="&q="+(e?a:encodeURIComponent(a))),l})}};let FeatureReviews=Po;ke(FeatureReviews,"_featureReviewsCache",{});class FeatureSwitchState{constructor(e){ke(this,"layoutToUse");ke(this,"featureSwitchUserbadge");ke(this,"featureSwitchSearch");ke(this,"featureSwitchBackgroundSelection");ke(this,"featureSwitchAddNew");ke(this,"featureSwitchWelcomeMessage");ke(this,"featureSwitchExtraLinkEnabled");ke(this,"featureSwitchMoreQuests");ke(this,"featureSwitchShareScreen");ke(this,"featureSwitchGeolocation");ke(this,"featureSwitchIsTesting");ke(this,"featureSwitchIsDebugging");ke(this,"featureSwitchShowAllQuestions");ke(this,"featureSwitchApiURL");ke(this,"featureSwitchFilter");ke(this,"featureSwitchEnableExport");ke(this,"featureSwitchFakeUser");ke(this,"featureSwitchExportAsPdf");ke(this,"overpassUrl");ke(this,"overpassTimeout");ke(this,"overpassMaxZoom");ke(this,"osmApiTileSize");ke(this,"backgroundLayerId");this.layoutToUse=e;function t(l,h,g){const p=h(e);return QueryParameters.GetQueryParameter(l,""+p,g).sync(b=>b===void 0?p:b!=="false",[],b=>b==p?void 0:""+b)}this.featureSwitchUserbadge=t("fs-userbadge",l=>(l==null?void 0:l.enableUserBadge)??!0,"Disables/Enables the user information pill (userbadge) at the top left. Disabling this disables logging in and thus disables editing all together, effectively putting MapComplete into read-only mode."),this.featureSwitchSearch=t("fs-search",l=>(l==null?void 0:l.enableSearch)??!0,"Disables/Enables the search bar"),this.featureSwitchBackgroundSelection=t("fs-background",l=>(l==null?void 0:l.enableBackgroundLayerSelection)??!0,"Disables/Enables the background layer control"),this.featureSwitchFilter=t("fs-filter",l=>(l==null?void 0:l.enableLayers)??!0,"Disables/Enables the filter view"),this.featureSwitchAddNew=t("fs-add-new",l=>(l==null?void 0:l.enableAddNewPoints)??!0,"Disables/Enables the 'add new feature'-popup. (A theme without presets might not have it in the first place)"),this.featureSwitchWelcomeMessage=t("fs-welcome-message",()=>!0,"Disables/enables the help menu or welcome message"),this.featureSwitchExtraLinkEnabled=t("fs-iframe-popout",l=>!0,"Disables/Enables the extraLink button. By default, if in iframe mode and the welcome message is hidden, a popout button to the full mapcomplete instance is shown instead (unless disabled with this switch or another extraLink button is enabled)"),this.featureSwitchMoreQuests=t("fs-more-quests",l=>(l==null?void 0:l.enableMoreQuests)??!0,"Disables/Enables the 'More Quests'-tab in the welcome message"),this.featureSwitchShareScreen=t("fs-share-screen",l=>(l==null?void 0:l.enableShareScreen)??!0,"Disables/Enables the 'Share-screen'-tab in the welcome message"),this.featureSwitchGeolocation=t("fs-geolocation",l=>(l==null?void 0:l.enableGeolocation)??!0,"Disables/Enables the geolocation button"),this.featureSwitchShowAllQuestions=t("fs-all-questions",l=>(l==null?void 0:l.enableShowAllQuestions)??!1,"Always show all questions"),this.featureSwitchEnableExport=t("fs-export",l=>(l==null?void 0:l.enableExportButton)??!1,"Enable the export as GeoJSON and CSV button"),this.featureSwitchExportAsPdf=t("fs-pdf",l=>(l==null?void 0:l.enablePdfDownload)??!1,"Enable the PDF download button"),this.featureSwitchApiURL=QueryParameters.GetQueryParameter("backend","osm","The OSM backend to use - can be used to redirect mapcomplete to the testing backend when using 'osm-test'");let a=!1;this.featureSwitchApiURL.data!=="osm-test"&&!Utils.runningFromConsole&&(location.hostname==="localhost"||location.hostname==="127.0.0.1")&&(a=!0),this.featureSwitchIsTesting=QueryParameters.GetBooleanQueryParameter("test",a,"If true, 'dryrun' mode is activated. The app will behave as normal, except that changes to OSM will be printed onto the console instead of actually uploaded to osm.org"),this.featureSwitchIsDebugging=QueryParameters.GetBooleanQueryParameter("debug",!1,"If true, shows some extra debugging help such as all the available tags on every object"),this.featureSwitchFakeUser=QueryParameters.GetBooleanQueryParameter("fake-user",!1,"If true, 'dryrun' mode is activated and a fake user account is loaded"),this.overpassUrl=QueryParameters.GetQueryParameter("overpassUrl",((e==null?void 0:e.overpassUrl)??Constants.defaultOverpassUrls).join(","),"Point mapcomplete to a different overpass-instance. Example: https://overpass-api.de/api/interpreter").sync(l=>l==null?void 0:l.split(","),[],l=>l==null?void 0:l.join(",")),this.overpassTimeout=UIEventSource.asFloat(QueryParameters.GetQueryParameter("overpassTimeout",""+(e==null?void 0:e.overpassTimeout),"Set a different timeout (in seconds) for queries in overpass")),this.overpassMaxZoom=UIEventSource.asFloat(QueryParameters.GetQueryParameter("overpassMaxZoom",""+(e==null?void 0:e.overpassMaxZoom)," point to switch between OSM-api and overpass")),this.osmApiTileSize=UIEventSource.asFloat(QueryParameters.GetQueryParameter("osmApiTileSize",""+(e==null?void 0:e.osmApiTileSize),"Tilesize when the OSM-API is used to fetch data within a BBOX")),this.featureSwitchUserbadge.addCallbackAndRun(l=>{l||this.featureSwitchAddNew.setData(!1)}),this.backgroundLayerId=QueryParameters.GetQueryParameter("background",(e==null?void 0:e.defaultBackgroundId)??"osm","The id of the background layer to start with")}}class ElementStorage{constructor(){ke(this,"ContainingFeatures",new Map);ke(this,"_elements",new Map)}addElementById(e,t){this._elements.set(e,t)}addOrGetElement(e){const t=e.properties.id,a=e.properties,l=this.addOrGetById(t,a);return e.properties=l.data,this.ContainingFeatures.has(t)||this.ContainingFeatures.set(t,e),l}getEventSourceById(e){if(e!==void 0)return this._elements.get(e)}has(e){return this._elements.has(e)}addAlias(e,t){if(t===void 0){const l=this.getEventSourceById(e);l.data._deleted="yes",l.ping();return}if(e==t)return;const a=this.getEventSourceById(e);a!==void 0&&(a.data.id=t,this.addElementById(t,a),this.ContainingFeatures.set(t,this.ContainingFeatures.get(e)),a.ping())}addOrGetById(e,t){if(!this._elements.has(e)){const g=new UIEventSource(t,"tags of "+e);return this._elements.set(e,g),g}const a=this._elements.get(e);if(a.data==t)return a;const l=a.data;let h=!1;for(const g in t){if(!t.hasOwnProperty(g))continue;const p=t[g];l[g]!==p&&(p===void 0?g.startsWith("_")||delete l[g]:l[g]=p,h=!0)}return h&&a.ping(),a}}class ElementsState extends FeatureSwitchState{constructor(t){super(t);ke(this,"allElements",new ElementStorage);ke(this,"selectedElement",new UIEventSource(void 0,"Selected element"));ke(this,"locationControl",new UIEventSource(void 0,"locationControl"));ke(this,"currentBounds",new UIEventSource(void 0));function a(p,y,b){const E=LocalStorageSource.Get(p),C=E.data,A=UIEventSource.asFloat(QueryParameters.GetQueryParameter(p,""+y,b).syncWith(E));if(A.data===y){const B=Number(C);isNaN(B)||A.setData(B)}return A}const l=a("z",(t==null?void 0:t.startZoom)??1,"The initial/current zoom level"),h=a("lat",(t==null?void 0:t.startLat)??0,"The initial/current latitude"),g=a("lon",(t==null?void 0:t.startLon)??0,"The initial/current longitude of the app");this.locationControl.setData({zoom:Utils.asFloat(l.data),lat:Utils.asFloat(h.data),lon:Utils.asFloat(g.data)}),this.locationControl.addCallback(p=>{l.setData(p.zoom),h.setData(p.lat),g.setData(p.lon)})}}const Ko=class{constructor(e){e.osmConnection.isLoggedIn.addCallbackAndRun(t=>{if(t)return Ko.installCallback(e),!0})}static installCallback(e){e.selectedElement.addCallbackAndRunD(async t=>{var h;let a=(h=t.properties)==null?void 0:h.id;const l=e.osmConnection._oauth_config.url;if(a.startsWith(l)&&(a=a.substring(l.length)),!!(a.startsWith("way")||a.startsWith("node")||a.startsWith("relation"))&&!(a.indexOf("-")>=0))try{const g=await OsmObject.DownloadPropertiesOf(a);if(g==="deleted"){console.warn("The current selected element has been deleted upstream!");const p=e.allElements.getEventSourceById(a);if(p.data._deleted==="yes")return;p.data._deleted="yes",p.ping();return}Ko.applyUpdate(e,g,a),console.log("Updated",a)}catch(g){console.warn("Could not update",a," due to",g)}})}static applyUpdate(e,t,a){try{e.layoutToUse.isLeftRightSensitive()&&SimpleMetaTaggers.removeBothTagging(t);const h=e.changes.pendingChanges.data.filter(b=>b.type+"/"+b.id===a).filter(b=>b.tags!==void 0);for(const b of h){const E=b.tags;for(const C of E){const A=C.k,B=C.v;B===void 0||B===""?delete t[A]:t[A]=B}}let g=!1;const p=e.allElements.getEventSourceById(a),y=p.data;for(const b in t){let E=t[b];typeof E=="number"&&(E=""+E),y[b]!==E&&(g=!0,y[b]=E)}for(const b in y)b.startsWith("_")||this.metatags.has(b)||b in t||(console.log("Removing key as deleted upstream",b),delete y[b],g=!0);g?(console.log("Detected upstream changes to the object when opening it, updating..."),p.ping()):console.debug("Fetched latest tags for ",a,"but detected no changes")}catch(l){console.error("Updating the tags of selected element ",a,"failed due to",l)}}};let SelectedElementTagsUpdater=Ko;ke(SelectedElementTagsUpdater,"metatags",new Set(["timestamp","version","changeset","user","uid","id"]));class Changes{constructor(e,t=!1){ke(this,"name","Newly added features");ke(this,"features",new UIEventSource([]));ke(this,"pendingChanges",LocalStorageSource.GetParsed("pending-changes",[]));ke(this,"allChanges",new UIEventSource(void 0));ke(this,"state");ke(this,"extraComment",new UIEventSource(void 0));ke(this,"historicalUserLocations");ke(this,"_nextId",-1);ke(this,"isUploading",new UIEventSource(!1));ke(this,"previouslyCreated",[]);ke(this,"_leftRightSensitive");ke(this,"_changesetHandler");var a,l;this._leftRightSensitive=t,this.allChanges.setData([...this.pendingChanges.data]),this._nextId=Math.min(-1,...((a=this.pendingChanges.data)==null?void 0:a.map(h=>h.id))??[]),this.state=e,this._changesetHandler=(l=e==null?void 0:e.osmConnection)==null?void 0:l.CreateChangesetHandler(e.allElements,this)}static createChangesetFor(e,t){const a=t.modifiedObjects??[],l=t.newObjects??[],h=t.deletedObjects??[];let g=`<osmChange version='0.6' generator='Mapcomplete ${Constants.vNumber}'>`;return l.length>0&&(g+=`
<create>
`+l.map(p=>p.ChangesetXML(e)).join(`
`)+"</create>"),a.length>0&&(g+=`
<modify>
`+a.map(p=>p.ChangesetXML(e)).join(`
`)+`
</modify>`),h.length>0&&(g+=`
<delete>
`+h.map(p=>p.ChangesetXML(e)).join(`
`)+`
</delete>`),g+="</osmChange>",g}static GetNeededIds(e){return Utils.Dedup(e.filter(t=>t.id>=0).map(t=>t.type+"/"+t.id))}getNewID(){return this._nextId--}async flushChanges(e=void 0){if(this.pendingChanges.data.length!==0){if(this.isUploading.data){console.log("Is already uploading... Abort");return}console.log("Uploading changes due to: ",e),this.isUploading.setData(!0);try{const t=await this.flushChangesAsync();this.isUploading.setData(!1),console.log("Changes flushed. Your changeset is "+t)}catch(t){this.isUploading.setData(!1),console.error("Flushing changes failed due to",t)}}}async applyAction(e){const t=await e.Perform(this);t[0].meta.distanceToObject=this.calculateDistanceToChanges(e,t),this.applyChanges(t)}applyChanges(e){console.log("Received changes:",e),this.pendingChanges.data.push(...e),this.pendingChanges.ping(),this.allChanges.data.push(...e),this.allChanges.ping()}calculateDistanceToChanges(e,t){var y,b;const a=(b=(y=this.historicalUserLocations)==null?void 0:y.features)==null?void 0:b.data;if(a===void 0||!e.trackStatistics)return;const l=new Date,h=a.map(E=>E.feature).filter(E=>E.geometry.type==="Point").filter(E=>{const C=new Date(E.properties.date);return(l.getTime()-C.getTime())/1e3<Constants.nearbyVisitTime});if(h.length===0)return;const g=[],p=this.state.allElements.ContainingFeatures.get(e.mainObjectId);p!==void 0&&g.push(GeoOperations.centerpointCoordinates(p));for(const E of t){const C=E.changes;C!==void 0&&(C.lat!==void 0&&g.push([C.lat,C.lon]),C.coordinates!==void 0&&g.push(...C.coordinates))}return Math.min(...g.map(E=>Math.min(...h.map(C=>{const A=GeoOperations.centerpointCoordinates(C);return GeoOperations.distanceBetween(E,A)}))))}async flushSelectChanges(e,t){const a=this,l=Changes.GetNeededIds(e),h=Utils.NoNull(await Promise.all(l.map(async Z=>OsmObject.DownloadObjectAsync(Z).catch(ee=>{console.error("Could not download OSM-object",Z," dropping it from the changes ("+ee+")"),e=e.filter(F=>F.type+"/"+F.id!==Z)}))));if(this._leftRightSensitive&&h.forEach(Z=>SimpleMetaTaggers.removeBothTagging(Z.tags)),console.log("Got the fresh objects!",h,"pending: ",e),e.length==0)return console.log("No pending changes..."),!0;const g=Array.from(Utils.Hist(e.filter(Z=>Z.meta.changeType!==void 0&&Z.meta.changeType!==null).map(Z=>Z.meta.changeType)),([Z,ee])=>({key:Z,value:ee,aggregate:!0})),p=e.filter(Z=>Z.meta.specialMotivation!==void 0).map(Z=>({key:Z.meta.changeType+":"+Z.type+"/"+Z.id,value:Z.meta.specialMotivation})),y=Utils.NoNull(e.map(Z=>Z.meta.distanceToObject));y.sort((Z,ee)=>Z-ee);const b=Constants.distanceToChangeObjectBins.map(Z=>0);let E=0;const C=Constants.distanceToChangeObjectBins;for(let Z=0;Z<C.length;Z++){const ee=C[Z];for(;E<y.length&&y[E]<ee;)b[Z]++,E++}const A=Utils.NoNull(b.map((Z,ee)=>{if(Z===0)return;const F=C[ee];let O=`change_within_${F}m`;return F===Number.MAX_VALUE&&(O=`change_over_${C[ee-1]}m`),{key:O,value:Z,aggregate:!0}})),B=e[0].meta.theme;let M="Adding data with #MapComplete for theme #"+B;this.extraComment.data!==void 0&&(M+=`

`+this.extraComment.data);const N=[{key:"comment",value:M},{key:"theme",value:B},...g,...p,...A];return await this._changesetHandler.UploadChangeset((Z,ee)=>{ee.size>0&&(console.log("Rewriting pending changes from",e,"with",ee),e=e.map(O=>ChangeDescriptionTools.rewriteIds(O,ee)),console.log("Result is",e));const F=a.CreateChangesetObjects(e,h);return Changes.createChangesetFor(""+Z,F)},N,t),console.log("Upload successfull!"),!0}async flushChangesAsync(){const e=this;try{const t=e.pendingChanges.data,a=new Map;for(const h of t){const g=h.meta.theme;a.has(g)||a.set(g,[]),a.get(g).push(h)}(await Promise.all(Array.from(a,async([h,g])=>{try{const p=this.state.osmConnection.GetPreference("current-open-changeset-"+h).sync(y=>{const b=Number(y);if(!isNaN(b))return b},[],y=>""+y);return console.log("Using current-open-changeset-"+h+" from the preferences, got "+p.data),await e.flushSelectChanges(g,p)}catch(p){return console.error("Could not upload some changes:",p),!1}}))).some(h=>h==!1)||this.pendingChanges.setData([])}catch(t){console.error("Could not handle changes - probably an old, pending changeset in localstorage with an invalid format; erasing those",t),e.pendingChanges.setData([])}finally{e.isUploading.setData(!1)}}CreateChangesetObjects(e,t){const a=new Map,l=new Map;for(const g of t)a.set(g.type+"/"+g.id,g),l.set(g.type+"/"+g.id,"unchanged");for(const g of this.previouslyCreated)a.set(g.type+"/"+g.id,g),l.set(g.type+"/"+g.id,"unchanged");for(const g of e){let p=!1;const y=g.type+"/"+g.id;if(!a.has(y)){if(g.id>=0)throw"Did not get an object that should be known: "+y;if(g.changes===void 0)throw"Not a creation of the object";l.set(y,"created"),console.log("Creating object for changeDescription",g);let C;switch(g.type){case"node":const A=new OsmNode(g.id);A.lat=g.changes.lat,A.lon=g.changes.lon,C=A;break;case"way":const B=new OsmWay(g.id);B.nodes=g.changes.nodes,C=B;break;case"relation":const M=new OsmRelation(g.id);M.members=g.changes.members,C=M;break}if(C===void 0)throw"Hmm? This is a bug";a.set(y,C),this.previouslyCreated.push(C)}const b=l.get(y);g.doDelete&&(b==="created"?l.set(y,"unchanged"):l.set(y,"deleted"));const E=a.get(y);for(const C of g.tags??[]){const A=C.k;let B=C.v;B===""&&(B=void 0),E.tags[A]!==B&&(E.tags[A]=B,p=!0)}if(g.changes!==void 0)switch(g.type){case"node":const C=g.changes.lat,A=g.changes.lon,B=E;(B.lat!==C||B.lon!==A)&&(B.lat=C,B.lon=A,p=!0);break;case"way":const M=g.changes.nodes,N=E;Utils.Identical(M,N.nodes)||(N.nodes=M,p=!0);break;case"relation":const Z=g.changes.members,ee=E;Utils.Identical(Z,ee.members,(F,O)=>F.role===O.role&&F.type===O.type&&F.ref===O.ref)||(ee.members=Z,p=!0);break}p&&l.get(y)==="unchanged"&&l.set(y,"modified")}const h={newObjects:[],modifiedObjects:[],deletedObjects:[]};return a.forEach((g,p)=>{const y=l.get(p);y==="created"&&h.newObjects.push(g),y==="modified"&&h.modifiedObjects.push(g),y==="deleted"&&h.deletedObjects.push(g)}),console.debug("Calculated the pending changes: ",h.newObjects.length,"new; ",h.modifiedObjects.length,"modified;",h.deletedObjects,"deleted"),h}setHistoricalUserLocations(e){this.historicalUserLocations=e}}class ChangeToElementsActor{constructor(e,t){e.pendingChanges.addCallbackAndRun(a=>{for(const l of a){const h=l.type+"/"+l.id;if(!t.has(h))continue;const g=t.getEventSourceById(h);let p=!1;for(const y of l.tags??[]){const b=y.k;let E=y.v;E===""&&(E=void 0),g.data[b]!==E&&(p=!0,g.data[b]=E)}p&&g.ping()}})}}class PendingChangesUploader{constructor(e,t){ke(this,"lastChange");const a=this;if(this.lastChange=new Date,e.pendingChanges.addCallback(()=>{a.lastChange=new Date,window.setTimeout(()=>{const h=(new Date().getTime()-a.lastChange.getTime())/1e3;Constants.updateTimeoutSec>=h-1&&e.flushChanges("Flushing changes due to timeout")},Constants.updateTimeoutSec*1e3)}),t.stabilized(1e4).addCallback(h=>{h===void 0&&e.flushChanges("Flushing changes due to popup closed")}),Utils.runningFromConsole)return;document.addEventListener("mouseout",h=>{!h.toElement&&!h.relatedTarget&&e.flushChanges("Flushing changes due to focus lost")}),document.onfocus=()=>{e.flushChanges("OnFocus")},document.onblur=()=>{e.flushChanges("OnFocus")};try{document.addEventListener("visibilitychange",()=>{e.flushChanges("Visibility change")},!1)}catch(h){console.warn("Could not register visibility change listener",h)}function l(h){if(e.pendingChanges.data.length!=0)return e.flushChanges("onbeforeunload - probably closing or something similar"),h.preventDefault(),"Saving your last changes..."}window.onbeforeunload=l,window.addEventListener("pagehide",l)}}const contributors=[{commits:239,contributor:"Pieter Vander Vennet"},{commits:217,contributor:"kjon"},{commits:82,contributor:"Allan Nordhy"},{commits:63,contributor:"Robin van der Linde"},{commits:61,contributor:"danieldegroot2"},{commits:46,contributor:"paunofu"},{commits:45,contributor:"Anonymous"},{commits:36,contributor:"Iago"},{commits:32,contributor:"Babos Gbor"},{commits:29,contributor:"Artem"},{commits:27,contributor:"Supaplex"},{commits:22,contributor:"Marco"},{commits:21,contributor:"SC"},{commits:19,contributor:"Reza Almanda"},{commits:18,contributor:"el_libre como el chaval"},{commits:15,contributor:"WaldiS"},{commits:14,contributor:"LeJun"},{commits:14,contributor:"J. Lavoie"},{commits:13,contributor:"Romain de Bossoreille"},{commits:13,contributor:"Joost"},{commits:11,contributor:"Ji Podhoreck"},{commits:11,contributor:"Olivier"},{commits:10,contributor:"bgo-eiu"},{commits:10,contributor:"Win Olario"},{commits:10,contributor:"Johannes Rssel"},{commits:10,contributor:"Irina"},{commits:9,contributor:"Jacque Fresco"},{commits:8,contributor:"Niels Madsen"},{commits:8,contributor:"Vinicius"},{commits:7,contributor:"mcliquid"},{commits:7,contributor:""},{commits:7,contributor:"Andrews Leruth"},{commits:7,contributor:"Niels Elgaard Larsen"},{commits:6,contributor:"Jaime Marqunez Ferrndiz"},{commits:6,contributor:"Joost Schouppe"},{commits:6,contributor:"pdassori"},{commits:6,contributor:"tefan Baebler"},{commits:6,contributor:"seppesantens"},{commits:6,contributor:"Nikolay Korotkiy"},{commits:6,contributor:"William Weber Berrutti"},{commits:6,contributor:"lvgx"},{commits:5,contributor:"sylvain-m"},{commits:5,contributor:"Fabio Bettani"},{commits:5,contributor:"BMN"},{commits:5,contributor:"eMerzh"},{commits:5,contributor:"Dingcycle"},{commits:5,contributor:"phlostically"},{commits:5,contributor:"David Haberthr"},{commits:5,contributor:"Piotr"},{commits:5,contributor:"Alexey Shabanov"},{commits:4,contributor:"Hiroshi Miura"},{commits:4,contributor:"Jeff Huang"},{commits:4,contributor:"Adolfo Jayme Barrientos"},{commits:4,contributor:"Polgr Sndor"},{commits:4,contributor:"Jan Zabel"},{commits:3,contributor:"   "},{commits:3,contributor:"Bibi56"},{commits:3,contributor:"aleksej0R"},{commits:3,contributor:"liimee"},{commits:3,contributor:"foxandpotatoes"},{commits:3,contributor:"Sasha"},{commits:3,contributor:"Jose Luis Infante"},{commits:3,contributor:"Francois"},{commits:3,contributor:"Eduardo Addad de Oliveira"},{commits:3,contributor:"Wiktor Przybylski"},{commits:3,contributor:"Erik Palm"},{commits:3,contributor:"vankos"},{commits:3,contributor:"JCGF-OSM"},{commits:3,contributor:"SiegbjornSitumeang"},{commits:2,contributor:"  ZOUHIR DEHBI"},{commits:2,contributor:"Andr Marcelo Alvarenga"},{commits:2,contributor:"Ettore Atalan"},{commits:2,contributor:"Klra Fleischhansov"},{commits:2,contributor:"Piotr Strebski"},{commits:2,contributor:"Tarcila Cataldi"},{commits:2,contributor:"Valerio Bozzolan"},{commits:2,contributor:"Manuel Tassi"},{commits:2,contributor:"Marc Marc"},{commits:2,contributor:"Midgard"},{commits:2,contributor:"M. Rey"},{commits:2,contributor:"Localizer"},{commits:2,contributor:"Eric Armijo"},{commits:2,contributor:"MeblIkea"},{commits:2,contributor:""},{commits:2,contributor:"Mateusz Konieczny"},{commits:2,contributor:"Kristoffer Grundstrm"},{commits:2,contributor:"Sebastian Krten"},{commits:2,contributor:"Damian Tokarski"},{commits:2,contributor:"mic140"},{commits:2,contributor:"Heiko"},{commits:2,contributor:"Leo Alcaraz"},{commits:1,contributor:"multiflexi"},{commits:1,contributor:"gallegonovato"},{commits:1,contributor:"Lucas"},{commits:1,contributor:"Magnitudee"},{commits:1,contributor:"Dario Crespi"},{commits:1,contributor:"Hungarian_user"},{commits:1,contributor:"Stphane De Greef"},{commits:1,contributor:"deep map"},{commits:1,contributor:"HO Gin Wang"},{commits:1,contributor:"Falk Rund"},{commits:1,contributor:"sparky-oxford"},{commits:1,contributor:"jcn706"},{commits:1,contributor:"whatismoss"},{commits:1,contributor:"LePirlouit"},{commits:1,contributor:"SoftwareByRedline"},{commits:1,contributor:"plic ploc"},{commits:1,contributor:"Janina Ellinghaus"},{commits:1,contributor:"ssantos"},{commits:1,contributor:"Andre Fajar N"},{commits:1,contributor:"Ahen Purwakarta"},{commits:1,contributor:"Luna Jernberg"},{commits:1,contributor:"Rodrigo Tavares"},{commits:1,contributor:"Micha Targoski"},{commits:1,contributor:"Sean Young"},{commits:1,contributor:"Damian Puka"},{commits:1,contributor:"Ivns"},{commits:1,contributor:"Beardhatcode"},{commits:1,contributor:"riiga"},{commits:1,contributor:"Carlos Ramos Carreo"}],translators={contributors},translators$1=Object.freeze(Object.defineProperty({__proto__:null,contributors,default:translators},Symbol.toStringTag,{value:"Module"}));class Maproulette{constructor(e="https://maproulette.org/api/v2"){ke(this,"endpoint");ke(this,"apiKey");this.endpoint=e,this.apiKey=Constants.MaprouletteApiKey}async closeTask(e){const t=await fetch(`${this.endpoint}/task/${e}/1`,{method:"PUT",headers:{"Content-Type":"application/json",apiKey:this.apiKey}});t.status!==304&&console.log(`Failed to close task: ${t.status}`)}}class UserRelatedState extends ElementsState{constructor(t,a){super(t);ke(this,"osmConnection");ke(this,"changes");ke(this,"mangroveIdentity");ke(this,"maprouletteConnection");ke(this,"isTranslator");ke(this,"installedUserThemes");this.osmConnection=new OsmConnection({dryRun:this.featureSwitchIsTesting,fakeUser:this.featureSwitchFakeUser.data,oauth_token:QueryParameters.GetQueryParameter("oauth_token",void 0,"Used to complete the login"),osmConfiguration:this.featureSwitchApiURL.data,attemptLogin:a==null?void 0:a.attemptLogin}),this.osmConnection.GetPreference("translation-mode").sync(h=>h===void 0?void 0:h==="true",[],h=>h===void 0?void 0:h+"").syncWith(Locale.showLinkToWeblate),this.isTranslator=this.osmConnection.userDetails.map(h=>{if(!h.loggedIn)return!1;const g=h.name.toLowerCase().replace(/\s+/g,"");return contributors.some(p=>p.contributor.toLowerCase().replace(/\s+/g,"")===g)}),this.isTranslator.addCallbackAndRunD(h=>{h&&Locale.showLinkToWeblate.setData(!0)}),this.changes=new Changes(this,(t==null?void 0:t.isLeftRightSensitive())??!1),new ChangeToElementsActor(this.changes,this.allElements),new PendingChangesUploader(this.changes,this.selectedElement),this.mangroveIdentity=new MangroveIdentity(this.osmConnection.GetLongPreference("identity","mangrove")),this.maprouletteConnection=new Maproulette,t!=null&&t.hideFromOverview&&this.osmConnection.isLoggedIn.addCallbackAndRunD(h=>{if(h)return this.osmConnection.GetPreference("hidden-theme-"+(t==null?void 0:t.id)+"-enabled").setData("true"),!0}),this.layoutToUse!==void 0&&!this.layoutToUse.official&&(console.log("Marking unofficial theme as visited"),this.osmConnection.GetLongPreference("unofficial-theme-"+this.layoutToUse.id).setData(JSON.stringify({id:this.layoutToUse.id,icon:this.layoutToUse.icon,title:this.layoutToUse.title.translations,shortDescription:this.layoutToUse.shortDescription.translations,definition:this.layoutToUse.definition}))),this.InitializeLanguage(),new SelectedElementTagsUpdater(this),this.installedUserThemes=this.InitInstalledUserThemes()}InitializeLanguage(){const t=this.layoutToUse;Locale.language.syncWith(this.osmConnection.GetPreference("language")),Locale.language.addCallback(a=>{if(t!==void 0){if(Locale.showLinkToWeblate.data)return!0;this.layoutToUse.language.indexOf(a)<0&&(console.log("Resetting language to",t.language[0],"as",a," is unsupported"),Locale.language.setData(t.language[0]))}}),Locale.language.ping()}InitInstalledUserThemes(){const t="mapcomplete-unofficial-theme-",a="-combined-length";return this.osmConnection.preferencesHandler.preferences.map(l=>Object.keys(l).filter(h=>h.startsWith(t)&&h.endsWith(a)).map(h=>h.substring(t.length,h.length-a.length)))}GetUnofficialTheme(t){console.log("GETTING UNOFFICIAL THEME");const a=this.osmConnection.GetLongPreference("unofficial-theme-"+t),l=a.data;if(l===void 0||l==="undefined"||l===""){a.setData(null);return}try{const h=JSON.parse(l);return h.isOfficial=!1,h}catch{console.warn("Removing theme "+t+" as it could not be parsed from the preferences; the content is:",l),a.setData(null);return}}}export{And as A,BBox as B,Constants as C,FeatureReviews as F,GeoOperations as G,Or as O,RegexTag as R,SimpleMetaTaggers as S,TagUtils as T,UserRelatedState as U,_typeof as _,Tag as a,osmtogeojson_1 as b,Tiles as c,OsmObject as d,OsmRelation as e,OsmWay as f,OsmNode as g,ChangeDescriptionTools as h,OsmConnection as i,contributors as j,leafletSrcExports as l,opening_hoursExports as o,require$$0$3 as r,translators$1 as t};
