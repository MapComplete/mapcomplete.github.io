var k=Object.defineProperty;var x=(a,s,t)=>s in a?k(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t;var c=(a,s,t)=>(x(a,typeof s!="symbol"?s+"":s,t),t);import{U as w,T as C,S as h,C as S,V as A}from"./SvelteUIElement-99ed019b.js";import{S as d}from"./SubtleButton-bcb2be40.js";import{T as m}from"./List-cc3ee726.js";class v{constructor(s,t,n){c(this,"_initial");c(this,"_steps");c(this,"_stepNames");this._initial=s,this._steps=t,this._stepNames=n}static start(s,t){return new v(t,[],[s.title])}then(s,t){return new v(this._initial,this._steps.concat([t]),this._stepNames.concat([s.title??s]))}finish(s,t){const n=new w(0),i=this._steps.map(e=>{});i.push(t);for(let e=this._steps.length-1;e>=0;e--){const o=this._steps[e],p=e==this._steps.length-1;i[e]=(_,u)=>{const f=o(_);n.setData(e+1);const r=new g(f,i[e+1],u,p);return r.isActive.addCallbackAndRun(b=>{b&&n.setData(e+1)}),r}}const l=new g(this._initial,i[0]);return l.isActive.addCallbackAndRun(e=>{e&&n.setData(0)}),{flow:l,furthestStep:n,titles:this._stepNames}}}class g extends m{constructor(t,n,i,l=!1){const e=C.t.general,o=new w(!0);let p=new w(void 0);const _=new d(h.back_svg(),e.back).onClick(()=>{o.setData(!0)});let u=[];const f=new w(!1);t!==void 0&&(u=[t,new S([i,new m(new d(l?h.checkmark_svg():h.back_svg().SetStyle("transform: rotate(180deg);"),l?e.confirm:e.next).onClick(()=>{try{const r=t.Value.data;p.setData(n(r,_)),o.setData(!1)}catch(r){console.error(r),f.setData(!0)}}),new d(h.invalid_svg(),e.notValid),t.IsValid),new m(e.error.SetClass("alert"),void 0,f)]).SetClass("flex w-full justify-end space-x-2")]);super(new S(u).SetClass("h-full flex flex-col justify-between"),new A(p),o);c(this,"isActive");this.isActive=o}}export{v as F};
