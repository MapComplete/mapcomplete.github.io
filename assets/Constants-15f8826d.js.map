{"version":3,"file":"Constants-15f8826d.js","sources":["../../src/Models/Constants.ts"],"sourcesContent":["import * as packagefile from \"../../package.json\"\nimport * as extraconfig from \"../../config.json\"\nimport { Utils } from \"../Utils\"\nimport { AuthConfig } from \"../Logic/Osm/AuthConfig\"\n\nexport type PriviligedLayerType = (typeof Constants.priviliged_layers)[number]\nexport type DefaultPinIcon = (typeof Constants._defaultPinIcons)[number]\n\nexport default class Constants {\n    public static vNumber: string = packagefile.version\n    /**\n     * API key for Maproulette\n     *\n     * There is no user-friendly way to get the user's API key currently.\n     * See https://github.com/maproulette/maproulette2/issues/476 for more information.\n     * Using an empty string however does work for most actions, but will attribute all actions to the Superuser.\n     */\n    public static readonly MaprouletteApiKey = \"\"\n    public static readonly added_by_default = [\n        \"selected_element\",\n        \"gps_location\",\n        \"gps_location_history\",\n        \"home_location\",\n        \"gps_track\",\n        \"range\",\n        \"last_click\",\n        \"favourite\",\n        \"summary\",\n        \"search\",\n        \"geocoded_image\",\n    ] as const\n    /**\n     * Special layers which are not included in a theme by default\n     */\n    public static readonly no_include = [\n        \"conflation\",\n        \"split_point\",\n        \"split_road\",\n        \"current_view\",\n        \"import_candidate\",\n        \"usersettings\",\n        \"icons\",\n        \"filters\",\n    ] as const\n    /**\n     * Layer IDs of layers which have special properties through built-in hooks\n     */\n    public static readonly priviliged_layers = [\n        ...Constants.added_by_default,\n        ...Constants.no_include,\n    ] as const\n\n    public static panoramax: {\n        url: string\n        token: string\n        sequence: string\n        testsequence: string\n    } = packagefile.config.panoramax\n\n    // The user journey states thresholds when a new feature gets unlocked\n    public static userJourney = {\n        moreScreenUnlock: 1,\n        personalThemeUnlock: 5,\n        historyLinkVisible: 10,\n        deletePointsOfOthersUnlock: 20,\n        tagsVisibleAt: 25,\n        tagsVisibleAndWikiLinked: 30,\n\n        mapCompleteHelpUnlock: 50,\n        themeGeneratorReadOnlyUnlock: 50,\n        themeGeneratorFullUnlock: 500,\n        addNewPointWithUnreadMessagesUnlock: 500,\n\n        importHelperUnlock: 5000,\n    }\n    static readonly minZoomLevelToAddNewPoint = Constants.isRetina() ? 17 : 18\n    /**\n     * Used by 'PendingChangesUploader', which waits this amount of seconds to upload changes.\n     * (Note that pendingChanges might upload sooner if the popup is closed or similar)\n     */\n    static updateTimeoutSec: number = 15\n    /**\n     * If the contributor has their GPS location enabled and makes a change,\n     * the points visited less then `nearbyVisitTime`-seconds ago will be inspected.\n     * The point closest to the changed feature will be considered and this distance will be tracked.\n     * ALl these distances are used to calculate a nearby-score\n     */\n    static nearbyVisitTime: number = 30 * 60\n    /**\n     * If a user makes a change, the distance to the changed object is calculated.\n     * If a user makes multiple changes, all these distances are put into multiple bins, depending on this distance.\n     * For every bin, the totals are uploaded as metadata\n     */\n    static distanceToChangeObjectBins = [25, 50, 100, 500, 1000, 5000, Number.MAX_VALUE]\n    static themeOrder = [\n        \"personal\",\n\n        \"cyclofix\",\n        \"etymology\",\n        \"waste\",\n\n        \"food\",\n        \"cafes_and_pubs\",\n        \"shops\",\n        \"healthcare\",\n        \"sports\",\n\n        \"artwork\",\n        \"bookcases\",\n        \"playgrounds\",\n        \"drinking_water\",\n        \"toilets\",\n        \"vending_machine\",\n        \"aed\",\n        \"clock\",\n        \"charging_stations\",\n\n        \"surveillance\",\n        \"advertising\",\n        \"circular_economy\",\n    ]\n    /**\n     * Upon initialization, the GPS will search the location.\n     * If the location is found within the given timout, it'll automatically fly to it.\n     *\n     * In seconds\n     */\n    static zoomToLocationTimeout = 15\n    public static readonly viewportCenterCloseToGpsCutoff: number = 20\n    private static readonly config = (() => {\n        const defaultConfig = packagefile.config\n        return { ...defaultConfig, ...extraconfig }\n    })()\n    public static ImgurApiKey = Constants.config.api_keys.imgur\n    public static readonly mapillary_client_token_v4 = Constants.config.api_keys.mapillary_v4\n    public static defaultOverpassUrls = Constants.config.default_overpass_urls\n    public static countryCoderEndpoint: string = Constants.config.country_coder_host\n    public static osmAuthConfig: AuthConfig = Constants.config.oauth_credentials\n    public static nominatimEndpoint: string = Constants.config.nominatimEndpoint\n    public static photonEndpoint: string = Constants.config.photonEndpoint\n\n    public static linkedDataProxy: string = Constants.config[\"jsonld-proxy\"]\n    /**\n     * These are the values that are allowed to use as 'backdrop' icon for a map pin\n     */\n    public static readonly _defaultPinIcons = [\n        \"addSmall\",\n        \"airport\",\n        \"brick_wall_round\",\n        \"brick_wall_square\",\n        \"building_office_2\",\n        \"building_storefront\",\n        \"bug\",\n        \"checkmark\",\n        \"checkmark\",\n        \"circle\",\n        \"clock\",\n        \"close\",\n        \"close\",\n        \"confirm\",\n        \"computer\",\n        \"cross_bottom_right\",\n        \"crosshair\",\n        \"desktop\",\n        \"direction\",\n        \"gear\",\n        \"globe_alt\",\n        \"gps_arrow\",\n        \"heart\",\n        \"heart_outline\",\n        \"help\",\n        \"help\",\n        \"home\",\n        \"house\",\n        \"key\",\n        \"invalid\",\n        \"invalid\",\n        \"link\",\n        \"location\",\n        \"location_empty\",\n        \"location_locked\",\n        \"lock\",\n        \"mastodon\",\n        \"not_found\",\n        \"note\",\n        \"party\",\n        \"pencil\",\n        \"pin\",\n        \"resolved\",\n        \"ring\",\n        \"scissors\",\n        \"square\",\n        \"square_rounded\",\n        \"teardrop\",\n        \"teardrop_with_hole_green\",\n        \"train\",\n        \"triangle\",\n        \"user_circle\",\n        \"wifi\",\n    ] as const\n    public static readonly defaultPinIcons: string[] = <any>Constants._defaultPinIcons\n    /**\n     * The location that the MVT-layer is hosted.\n     * This is a MapLibre/MapBox vector tile server which hosts vector tiles for every (official) layer\n     */\n    public static VectorTileServer: string | undefined = Constants.config.mvt_layer_server\n    public static GeoIpServer: string | undefined = Constants.config.geoip_server\n    public static ErrorReportServer: string | undefined = Constants.config.error_server\n\n    public static readonly maptilerApiKey = \"GvoVAJgu46I5rZapJuAy\"\n    public static readonly SummaryServer: string = Constants.config.summary_server\n\n    public static allServers: string[] = [\n        Constants.SummaryServer,\n        Constants.VectorTileServer,\n        Constants.GeoIpServer,\n        Constants.ErrorReportServer,\n        Constants.countryCoderEndpoint,\n        Constants.osmAuthConfig.url,\n        Constants.nominatimEndpoint,\n        Constants.photonEndpoint,\n        Constants.linkedDataProxy,\n        ...Constants.defaultOverpassUrls,\n    ]\n\n    private static isRetina(): boolean {\n        if (Utils.runningFromConsole) {\n            return false\n        }\n        // The cause for this line of code: https://github.com/pietervdvn/MapComplete/issues/115\n        // See https://stackoverflow.com/questions/19689715/what-is-the-best-way-to-detect-retina-support-on-a-device-using-javascript\n        return (\n            (window.matchMedia &&\n                (window.matchMedia(\n                    \"only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)\"\n                ).matches ||\n                    window.matchMedia(\n                        \"only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min--moz-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)\"\n                    ).matches)) ||\n            (window.devicePixelRatio && window.devicePixelRatio >= 2)\n        )\n    }\n}\n"],"names":["_Constants","Utils","__publicField","packagefile.version","packagefile.config","extraconfig","Constants"],"mappings":"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"}