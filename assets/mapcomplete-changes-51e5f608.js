var c=Object.defineProperty;var d=(t,e,r)=>e in t?c(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var m=(t,e,r)=>(d(t,typeof e!="symbol"?e+"":e,r),r);import"./modulepreload-polyfill-3cfb730f.js";import"./Pencil-e4a5ac1f.js";import{m as s}from"./mapcomplete-changes-e5d6e2d7.js";import{U as n}from"./UIEventSource-f39c8b5a.js";import{s as u,g,a as h,h as y,b as _,r as f}from"./range-8b90fb51.js";import{M as w,T as b,a as v,l as C,s as T}from"./ThemeViewGUI-14a63995.js";import{f as L}from"./FloatOver-6c53f88c.js";import{s as S,g as A}from"./SelectedElementView-60f7b709.js";import{L as E}from"./LayoutConfig-e335f186.js";import{F as x}from"./tw-merge-bebb3163.js";import{C as p}from"./Constants-45bfc0a2.js";import"./Searchbar-046a0d9a.js";import"./index-34c7dc31.js";import"./LocalStorageSource-0ef3f4e1.js";import"./OsmConnection-aa66c185.js";import"./InputHelper-0308d5cd.js";import"./tw-join-70ce42f3.js";import"./Loading-aa985c94.js";import"./Checkbox-a6af77f2.js";import"./Dropdown-6d9b489e.js";import"./Marker-1e6d248c.js";import"./PrivacyPolicy-46ce1060.js";import"./Community-b145c89c.js";import"./AccordionSingle-3dc4bc7e.js";import"./Filterview-d03832de.js";import"./BackButton-dab7dfdb.js";import"./Login-c68ac5fb.js";class l{metaTaggging_for_mapcomplete_changes(e,r){}metaTaggging_for_current_view(e,r){const{distanceTo:i,overlapWith:a,enclosingFeatures:W,intersectionsWith:k,closest:z,closestn:G,get:V}=r;n.AddLazyProperty(e.properties,"_embedded_cs",()=>a(e)("mapcomplete-changes").map(o=>o.feat.properties)),n.AddLazyProperty(e.properties,"_embedded_cs:themes",()=>e.get("_embedded_cs").map(o=>o.theme)),n.AddLazyProperty(e.properties,"_embedded_cs:users",()=>e.get("_embedded_cs").map(o=>o["_last_edit:contributor"]))}}m(l,"themeName","mapcomplete-changes");function F(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch{return!1}}async function M(t){return await n.waitFor(t),{layers:[]}}async function U(){if(!p.SummaryServer)return new Set;try{const t=new URL(p.SummaryServer).host,e=await Promise.any([n.downloadJson("https://"+t+"/summary/status.json"),M(0)]);return new Set(e.layers)}catch(t){return console.error("Could not get MVT available layers due to",t),new Set}}async function P(){if(!F())new x("WebGL is not supported or not enabled. This is essential for MapComplete to function, please enable this.").SetClass("block alert").AttachTo("maindiv");else{const t=await U();w.setThemeMetatagging(new l),s.layers.push(u),s.layers.push(g),s.layers.push(h),s.layers.push(y),s.layers.push(_),s.layers.push(f),s.layers.push(C),s.layers.push(L),s.layers.push(T),s.layers.push(S),s.layers.push(A);const e=new b(new E(s),t),r=document.getElementById("maindiv"),i=Array.from(r.children);new v({target:r,props:{state:e}}),i.forEach(a=>r.removeChild(a)),Array.from(document.getElementsByClassName("delete-on-load")).forEach(a=>{a.parentElement.removeChild(a)})}}P();
//# sourceMappingURL=mapcomplete-changes-51e5f608.js.map
